var app=function(){"use strict";function t(){}function e(t){return t()}function s(){return Object.create(null)}function r(t){t.forEach(e)}function i(t){return"function"==typeof t}function n(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function o(t,e){t.appendChild(e)}function a(t){t.parentNode.removeChild(t)}function h(t){return document.createElement(t)}function c(){return function(t){return document.createTextNode(t)}(" ")}function l(t,e,s){null==s?t.removeAttribute(e):t.getAttribute(e)!==s&&t.setAttribute(e,s)}function u(t,e,s,r){t.style.setProperty(e,s,r?"important":"")}let p;function d(t){p=t}function m(t){(function(){if(!p)throw new Error("Function called outside component initialization");return p})().$$.on_mount.push(t)}const f=[],g=[],y=[],T=[],v=Promise.resolve();let b=!1;function w(t){y.push(t)}let x=!1;const I=new Set;function E(){if(!x){x=!0;do{for(let t=0;t<f.length;t+=1){const e=f[t];d(e),S(e.$$)}for(d(null),f.length=0;g.length;)g.pop()();for(let t=0;t<y.length;t+=1){const e=y[t];I.has(e)||(I.add(e),e())}y.length=0}while(f.length);for(;T.length;)T.pop()();b=!1,x=!1,I.clear()}}function S(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(w)}}const A=new Set;function R(t,e){-1===t.$$.dirty[0]&&(f.push(t),b||(b=!0,v.then(E)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function C(n,o,h,c,l,u,m=[-1]){const f=p;d(n);const g=o.props||{},y=n.$$={fragment:null,ctx:null,props:u,update:t,not_equal:l,bound:s(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:[]),callbacks:s(),dirty:m,skip_bound:!1};let T=!1;if(y.ctx=h?h(n,g,((t,e,...s)=>{const r=s.length?s[0]:e;return y.ctx&&l(y.ctx[t],y.ctx[t]=r)&&(!y.skip_bound&&y.bound[t]&&y.bound[t](r),T&&R(n,t)),e})):[],y.update(),T=!0,r(y.before_update),y.fragment=!!c&&c(y.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);y.fragment&&y.fragment.l(t),t.forEach(a)}else y.fragment&&y.fragment.c();o.intro&&((v=n.$$.fragment)&&v.i&&(A.delete(v),v.i(b))),function(t,s,n){const{fragment:o,on_mount:a,on_destroy:h,after_update:c}=t.$$;o&&o.m(s,n),w((()=>{const s=a.map(e).filter(i);h?h.push(...s):r(s),t.$$.on_mount=[]})),c.forEach(w)}(n,o.target,o.anchor),E()}var v,b;d(f)}
/**
     * @license
     * Copyright 2010-2022 Three.js Authors
     * SPDX-License-Identifier: MIT
     */
const O="140",_={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},D={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},F=100,M=204,P=205,N=300,L=301,k=302,U=303,H=304,B=306,G=1e3,j=1001,z=1002,V=1003,W=1004,Y=1005,X=1006,q=1007,K=1008,J=1009,$=1012,Z=1014,Q=1015,tt=1016,et=1020,st=1023,rt=1026,it=1027,nt=1028,ot=33776,at=33777,ht=33778,ct=33779,lt=35840,ut=35841,pt=35842,dt=35843,mt=36196,ft=37492,gt=37496,yt=37808,Tt=37809,vt=37810,bt=37811,wt=37812,xt=37813,It=37814,Et=37815,St=37816,At=37817,Rt=37818,Ct=37819,Ot=37820,_t=37821,Dt=36492,Ft=2200,Mt=2201,Pt=2300,Nt=2301,Lt=2302,kt=2400,Ut=2401,Ht=2402,Bt=2500,Gt=2501,jt=3e3,zt=3001,Vt="srgb",Wt="srgb-linear",Yt=7680,Xt=35044,qt=35048,Kt="300 es",Jt=1035;class $t{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const s=this._listeners;void 0===s[t]&&(s[t]=[]),-1===s[t].indexOf(e)&&s[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const s=this._listeners;return void 0!==s[t]&&-1!==s[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const s=this._listeners[t];if(void 0!==s){const t=s.indexOf(e);-1!==t&&s.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const s=e.slice(0);for(let e=0,r=s.length;e<r;e++)s[e].call(this,t);t.target=null}}}const Zt=[];for(let t=0;t<256;t++)Zt[t]=(t<16?"0":"")+t.toString(16);let Qt=1234567;const te=Math.PI/180,ee=180/Math.PI;function se(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,s=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Zt[255&t]+Zt[t>>8&255]+Zt[t>>16&255]+Zt[t>>24&255]+"-"+Zt[255&e]+Zt[e>>8&255]+"-"+Zt[e>>16&15|64]+Zt[e>>24&255]+"-"+Zt[63&s|128]+Zt[s>>8&255]+"-"+Zt[s>>16&255]+Zt[s>>24&255]+Zt[255&r]+Zt[r>>8&255]+Zt[r>>16&255]+Zt[r>>24&255]).toLowerCase()}function re(t,e,s){return Math.max(e,Math.min(s,t))}function ie(t,e){return(t%e+e)%e}function ne(t,e,s){return(1-s)*t+s*e}function oe(t){return 0==(t&t-1)&&0!==t}function ae(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function he(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}var ce=Object.freeze({__proto__:null,DEG2RAD:te,RAD2DEG:ee,generateUUID:se,clamp:re,euclideanModulo:ie,mapLinear:function(t,e,s,r,i){return r+(t-e)*(i-r)/(s-e)},inverseLerp:function(t,e,s){return t!==e?(s-t)/(e-t):0},lerp:ne,damp:function(t,e,s,r){return ne(t,e,1-Math.exp(-s*r))},pingpong:function(t,e=1){return e-Math.abs(ie(t,2*e)-e)},smoothstep:function(t,e,s){return t<=e?0:t>=s?1:(t=(t-e)/(s-e))*t*(3-2*t)},smootherstep:function(t,e,s){return t<=e?0:t>=s?1:(t=(t-e)/(s-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){void 0!==t&&(Qt=t);let e=Qt+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296},degToRad:function(t){return t*te},radToDeg:function(t){return t*ee},isPowerOfTwo:oe,ceilPowerOfTwo:ae,floorPowerOfTwo:he,setQuaternionFromProperEuler:function(t,e,s,r,i){const n=Math.cos,o=Math.sin,a=n(s/2),h=o(s/2),c=n((e+r)/2),l=o((e+r)/2),u=n((e-r)/2),p=o((e-r)/2),d=n((r-e)/2),m=o((r-e)/2);switch(i){case"XYX":t.set(a*l,h*u,h*p,a*c);break;case"YZY":t.set(h*p,a*l,h*u,a*c);break;case"ZXZ":t.set(h*u,h*p,a*l,a*c);break;case"XZX":t.set(a*l,h*m,h*d,a*c);break;case"YXY":t.set(h*d,a*l,h*m,a*c);break;case"ZYZ":t.set(h*m,h*d,a*l,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}},normalize:function(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}},denormalize:function(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}});class le{constructor(t=0,e=0){this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,s=this.y,r=t.elements;return this.x=r[0]*e+r[3]*s+r[6],this.y=r[1]*e+r[4]*s+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(t,Math.min(e,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,s=this.y-t.y;return e*e+s*s}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,s){return this.x=t.x+(e.x-t.x)*s,this.y=t.y+(e.y-t.y)*s,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e,s){return void 0!==s&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const s=Math.cos(e),r=Math.sin(e),i=this.x-t.x,n=this.y-t.y;return this.x=i*s-n*r+t.x,this.y=i*r+n*s+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}le.prototype.isVector2=!0;class ue{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(t,e,s,r,i,n,o,a,h){const c=this.elements;return c[0]=t,c[1]=r,c[2]=o,c[3]=e,c[4]=i,c[5]=a,c[6]=s,c[7]=n,c[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,s=t.elements;return e[0]=s[0],e[1]=s[1],e[2]=s[2],e[3]=s[3],e[4]=s[4],e[5]=s[5],e[6]=s[6],e[7]=s[7],e[8]=s[8],this}extractBasis(t,e,s){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),s.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const s=t.elements,r=e.elements,i=this.elements,n=s[0],o=s[3],a=s[6],h=s[1],c=s[4],l=s[7],u=s[2],p=s[5],d=s[8],m=r[0],f=r[3],g=r[6],y=r[1],T=r[4],v=r[7],b=r[2],w=r[5],x=r[8];return i[0]=n*m+o*y+a*b,i[3]=n*f+o*T+a*w,i[6]=n*g+o*v+a*x,i[1]=h*m+c*y+l*b,i[4]=h*f+c*T+l*w,i[7]=h*g+c*v+l*x,i[2]=u*m+p*y+d*b,i[5]=u*f+p*T+d*w,i[8]=u*g+p*v+d*x,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],s=t[1],r=t[2],i=t[3],n=t[4],o=t[5],a=t[6],h=t[7],c=t[8];return e*n*c-e*o*h-s*i*c+s*o*a+r*i*h-r*n*a}invert(){const t=this.elements,e=t[0],s=t[1],r=t[2],i=t[3],n=t[4],o=t[5],a=t[6],h=t[7],c=t[8],l=c*n-o*h,u=o*a-c*i,p=h*i-n*a,d=e*l+s*u+r*p;if(0===d)return this.set(0,0,0,0,0,0,0,0,0);const m=1/d;return t[0]=l*m,t[1]=(r*h-c*s)*m,t[2]=(o*s-r*n)*m,t[3]=u*m,t[4]=(c*e-r*a)*m,t[5]=(r*i-o*e)*m,t[6]=p*m,t[7]=(s*a-h*e)*m,t[8]=(n*e-s*i)*m,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,s,r,i,n,o){const a=Math.cos(i),h=Math.sin(i);return this.set(s*a,s*h,-s*(a*n+h*o)+n+t,-r*h,r*a,-r*(-h*n+a*o)+o+e,0,0,1),this}scale(t,e){const s=this.elements;return s[0]*=t,s[3]*=t,s[6]*=t,s[1]*=e,s[4]*=e,s[7]*=e,this}rotate(t){const e=Math.cos(t),s=Math.sin(t),r=this.elements,i=r[0],n=r[3],o=r[6],a=r[1],h=r[4],c=r[7];return r[0]=e*i+s*a,r[3]=e*n+s*h,r[6]=e*o+s*c,r[1]=-s*i+e*a,r[4]=-s*n+e*h,r[7]=-s*o+e*c,this}translate(t,e){const s=this.elements;return s[0]+=t*s[2],s[3]+=t*s[5],s[6]+=t*s[8],s[1]+=e*s[2],s[4]+=e*s[5],s[7]+=e*s[8],this}equals(t){const e=this.elements,s=t.elements;for(let t=0;t<9;t++)if(e[t]!==s[t])return!1;return!0}fromArray(t,e=0){for(let s=0;s<9;s++)this.elements[s]=t[s+e];return this}toArray(t=[],e=0){const s=this.elements;return t[e]=s[0],t[e+1]=s[1],t[e+2]=s[2],t[e+3]=s[3],t[e+4]=s[4],t[e+5]=s[5],t[e+6]=s[6],t[e+7]=s[7],t[e+8]=s[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}function pe(t){for(let e=t.length-1;e>=0;--e)if(t[e]>65535)return!0;return!1}ue.prototype.isMatrix3=!0;const de={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function me(t,e){return new de[t](e)}function fe(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function ge(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function ye(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}const Te={[Vt]:{[Wt]:ge},[Wt]:{[Vt]:ye}},ve={legacyMode:!0,get workingColorSpace(){return Wt},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,s){if(this.legacyMode||e===s||!e||!s)return t;if(Te[e]&&void 0!==Te[e][s]){const r=Te[e][s];return t.r=r(t.r),t.g=r(t.g),t.b=r(t.b),t}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}},be={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},we={r:0,g:0,b:0},xe={h:0,s:0,l:0},Ie={h:0,s:0,l:0};function Ee(t,e,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+6*(e-t)*s:s<.5?e:s<2/3?t+6*(e-t)*(2/3-s):t}function Se(t,e){return e.r=t.r,e.g=t.g,e.b=t.b,e}class Ae{constructor(t,e,s){return void 0===e&&void 0===s?this.set(t):this.setRGB(t,e,s)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e="srgb"){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,ve.toWorkingColorSpace(this,e),this}setRGB(t,e,s,r="srgb-linear"){return this.r=t,this.g=e,this.b=s,ve.toWorkingColorSpace(this,r),this}setHSL(t,e,s,r="srgb-linear"){if(t=ie(t,1),e=re(e,0,1),s=re(s,0,1),0===e)this.r=this.g=this.b=s;else{const r=s<=.5?s*(1+e):s+e-s*e,i=2*s-r;this.r=Ee(i,r,t+1/3),this.g=Ee(i,r,t),this.b=Ee(i,r,t-1/3)}return ve.toWorkingColorSpace(this,r),this}setStyle(t,e="srgb"){function s(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let t;const i=r[1],n=r[2];switch(i){case"rgb":case"rgba":if(t=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(n))return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,ve.toWorkingColorSpace(this,e),s(t[4]),this;if(t=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(n))return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,ve.toWorkingColorSpace(this,e),s(t[4]),this;break;case"hsl":case"hsla":if(t=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(n)){const r=parseFloat(t[1])/360,i=parseInt(t[2],10)/100,n=parseInt(t[3],10)/100;return s(t[4]),this.setHSL(r,i,n,e)}}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){const t=r[1],s=t.length;if(3===s)return this.r=parseInt(t.charAt(0)+t.charAt(0),16)/255,this.g=parseInt(t.charAt(1)+t.charAt(1),16)/255,this.b=parseInt(t.charAt(2)+t.charAt(2),16)/255,ve.toWorkingColorSpace(this,e),this;if(6===s)return this.r=parseInt(t.charAt(0)+t.charAt(1),16)/255,this.g=parseInt(t.charAt(2)+t.charAt(3),16)/255,this.b=parseInt(t.charAt(4)+t.charAt(5),16)/255,ve.toWorkingColorSpace(this,e),this}return t&&t.length>0?this.setColorName(t,e):this}setColorName(t,e="srgb"){const s=be[t.toLowerCase()];return void 0!==s?this.setHex(s,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=ge(t.r),this.g=ge(t.g),this.b=ge(t.b),this}copyLinearToSRGB(t){return this.r=ye(t.r),this.g=ye(t.g),this.b=ye(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t="srgb"){return ve.fromWorkingColorSpace(Se(this,we),t),re(255*we.r,0,255)<<16^re(255*we.g,0,255)<<8^re(255*we.b,0,255)<<0}getHexString(t="srgb"){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e="srgb-linear"){ve.fromWorkingColorSpace(Se(this,we),e);const s=we.r,r=we.g,i=we.b,n=Math.max(s,r,i),o=Math.min(s,r,i);let a,h;const c=(o+n)/2;if(o===n)a=0,h=0;else{const t=n-o;switch(h=c<=.5?t/(n+o):t/(2-n-o),n){case s:a=(r-i)/t+(r<i?6:0);break;case r:a=(i-s)/t+2;break;case i:a=(s-r)/t+4}a/=6}return t.h=a,t.s=h,t.l=c,t}getRGB(t,e="srgb-linear"){return ve.fromWorkingColorSpace(Se(this,we),e),t.r=we.r,t.g=we.g,t.b=we.b,t}getStyle(t="srgb"){return ve.fromWorkingColorSpace(Se(this,we),t),t!==Vt?`color(${t} ${we.r} ${we.g} ${we.b})`:`rgb(${255*we.r|0},${255*we.g|0},${255*we.b|0})`}offsetHSL(t,e,s){return this.getHSL(xe),xe.h+=t,xe.s+=e,xe.l+=s,this.setHSL(xe.h,xe.s,xe.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,s){return this.r=t.r+(e.r-t.r)*s,this.g=t.g+(e.g-t.g)*s,this.b=t.b+(e.b-t.b)*s,this}lerpHSL(t,e){this.getHSL(xe),t.getHSL(Ie);const s=ne(xe.h,Ie.h,e),r=ne(xe.s,Ie.s,e),i=ne(xe.l,Ie.l,e);return this.setHSL(s,r,i),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}let Re;Ae.NAMES=be,Ae.prototype.isColor=!0,Ae.prototype.r=1,Ae.prototype.g=1,Ae.prototype.b=1;class Ce{static getDataURL(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===Re&&(Re=fe("canvas")),Re.width=t.width,Re.height=t.height;const s=Re.getContext("2d");t instanceof ImageData?s.putImageData(t,0,0):s.drawImage(t,0,0,t.width,t.height),e=Re}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const e=fe("canvas");e.width=t.width,e.height=t.height;const s=e.getContext("2d");s.drawImage(t,0,0,t.width,t.height);const r=s.getImageData(0,0,t.width,t.height),i=r.data;for(let t=0;t<i.length;t++)i[t]=255*ge(i[t]/255);return s.putImageData(r,0,0),e}if(t.data){const e=t.data.slice(0);for(let t=0;t<e.length;t++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[t]=Math.floor(255*ge(e[t]/255)):e[t]=ge(e[t]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}class Oe{constructor(t=null){this.uuid=se(),this.data=t,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const s={uuid:this.uuid,url:""},r=this.data;if(null!==r){let t;if(Array.isArray(r)){t=[];for(let e=0,s=r.length;e<s;e++)r[e].isDataTexture?t.push(_e(r[e].image)):t.push(_e(r[e]))}else t=_e(r);s.url=t}return e||(t.images[this.uuid]=s),s}}function _e(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?Ce.getDataURL(t):t.data?{data:Array.prototype.slice.call(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}Oe.prototype.isSource=!0;let De=0;class Fe extends $t{constructor(t=Fe.DEFAULT_IMAGE,e=Fe.DEFAULT_MAPPING,s=1001,r=1001,i=1006,n=1008,o=1023,a=1009,h=1,c=3e3){super(),Object.defineProperty(this,"id",{value:De++}),this.uuid=se(),this.name="",this.source=new Oe(t),this.mipmaps=[],this.mapping=e,this.wrapS=s,this.wrapT=r,this.magFilter=i,this.minFilter=n,this.anisotropy=h,this.format=o,this.internalFormat=null,this.type=a,this.offset=new le(0,0),this.repeat=new le(1,1),this.center=new le(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ue,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const s={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(s.userData=this.userData),e||(t.textures[this.uuid]=s),s}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==N)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case G:t.x=t.x-Math.floor(t.x);break;case j:t.x=t.x<0?0:1;break;case z:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case G:t.y=t.y-Math.floor(t.y);break;case j:t.y=t.y<0?0:1;break;case z:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}Fe.DEFAULT_IMAGE=null,Fe.DEFAULT_MAPPING=N,Fe.prototype.isTexture=!0;class Me{constructor(t=0,e=0,s=0,r=1){this.x=t,this.y=e,this.z=s,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,s,r){return this.x=t,this.y=e,this.z=s,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,s=this.y,r=this.z,i=this.w,n=t.elements;return this.x=n[0]*e+n[4]*s+n[8]*r+n[12]*i,this.y=n[1]*e+n[5]*s+n[9]*r+n[13]*i,this.z=n[2]*e+n[6]*s+n[10]*r+n[14]*i,this.w=n[3]*e+n[7]*s+n[11]*r+n[15]*i,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,s,r,i;const n=.01,o=.1,a=t.elements,h=a[0],c=a[4],l=a[8],u=a[1],p=a[5],d=a[9],m=a[2],f=a[6],g=a[10];if(Math.abs(c-u)<n&&Math.abs(l-m)<n&&Math.abs(d-f)<n){if(Math.abs(c+u)<o&&Math.abs(l+m)<o&&Math.abs(d+f)<o&&Math.abs(h+p+g-3)<o)return this.set(1,0,0,0),this;e=Math.PI;const t=(h+1)/2,a=(p+1)/2,y=(g+1)/2,T=(c+u)/4,v=(l+m)/4,b=(d+f)/4;return t>a&&t>y?t<n?(s=0,r=.707106781,i=.707106781):(s=Math.sqrt(t),r=T/s,i=v/s):a>y?a<n?(s=.707106781,r=0,i=.707106781):(r=Math.sqrt(a),s=T/r,i=b/r):y<n?(s=.707106781,r=.707106781,i=0):(i=Math.sqrt(y),s=v/i,r=b/i),this.set(s,r,i,e),this}let y=Math.sqrt((f-d)*(f-d)+(l-m)*(l-m)+(u-c)*(u-c));return Math.abs(y)<.001&&(y=1),this.x=(f-d)/y,this.y=(l-m)/y,this.z=(u-c)/y,this.w=Math.acos((h+p+g-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(t,Math.min(e,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,s){return this.x=t.x+(e.x-t.x)*s,this.y=t.y+(e.y-t.y)*s,this.z=t.z+(e.z-t.z)*s,this.w=t.w+(e.w-t.w)*s,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e,s){return void 0!==s&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}Me.prototype.isVector4=!0;class Pe extends $t{constructor(t,e,s={}){super(),this.width=t,this.height=e,this.depth=1,this.scissor=new Me(0,0,t,e),this.scissorTest=!1,this.viewport=new Me(0,0,t,e);const r={width:t,height:e,depth:1};this.texture=new Fe(r,s.mapping,s.wrapS,s.wrapT,s.magFilter,s.minFilter,s.format,s.type,s.anisotropy,s.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==s.generateMipmaps&&s.generateMipmaps,this.texture.internalFormat=void 0!==s.internalFormat?s.internalFormat:null,this.texture.minFilter=void 0!==s.minFilter?s.minFilter:X,this.depthBuffer=void 0===s.depthBuffer||s.depthBuffer,this.stencilBuffer=void 0!==s.stencilBuffer&&s.stencilBuffer,this.depthTexture=void 0!==s.depthTexture?s.depthTexture:null,this.samples=void 0!==s.samples?s.samples:0}setSize(t,e,s=1){this.width===t&&this.height===e&&this.depth===s||(this.width=t,this.height=e,this.depth=s,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=s,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;const e=Object.assign({},t.texture.image);return this.texture.source=new Oe(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}Pe.prototype.isWebGLRenderTarget=!0;class Ne extends Fe{constructor(t=null,e=1,s=1,r=1){super(null),this.image={data:t,width:e,height:s,depth:r},this.magFilter=V,this.minFilter=V,this.wrapR=j,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Ne.prototype.isDataArrayTexture=!0;class Le extends Pe{constructor(t,e,s){super(t,e),this.depth=s,this.texture=new Ne(null,t,e,s),this.texture.isRenderTargetTexture=!0}}Le.prototype.isWebGLArrayRenderTarget=!0;class ke extends Fe{constructor(t=null,e=1,s=1,r=1){super(null),this.image={data:t,width:e,height:s,depth:r},this.magFilter=V,this.minFilter=V,this.wrapR=j,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}ke.prototype.isData3DTexture=!0;class Ue extends Pe{constructor(t,e,s){super(t,e),this.depth=s,this.texture=new ke(null,t,e,s),this.texture.isRenderTargetTexture=!0}}Ue.prototype.isWebGL3DRenderTarget=!0;class He extends Pe{constructor(t,e,s,r={}){super(t,e,r);const i=this.texture;this.texture=[];for(let t=0;t<s;t++)this.texture[t]=i.clone(),this.texture[t].isRenderTargetTexture=!0}setSize(t,e,s=1){if(this.width!==t||this.height!==e||this.depth!==s){this.width=t,this.height=e,this.depth=s;for(let r=0,i=this.texture.length;r<i;r++)this.texture[r].image.width=t,this.texture[r].image.height=e,this.texture[r].image.depth=s;this.dispose()}return this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e),this}copy(t){this.dispose(),this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.texture.length=0;for(let e=0,s=t.texture.length;e<s;e++)this.texture[e]=t.texture[e].clone(),this.texture[e].isRenderTargetTexture=!0;return this}}He.prototype.isWebGLMultipleRenderTargets=!0;class Be{constructor(t=0,e=0,s=0,r=1){this._x=t,this._y=e,this._z=s,this._w=r}static slerp(t,e,s,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),s.slerpQuaternions(t,e,r)}static slerpFlat(t,e,s,r,i,n,o){let a=s[r+0],h=s[r+1],c=s[r+2],l=s[r+3];const u=i[n+0],p=i[n+1],d=i[n+2],m=i[n+3];if(0===o)return t[e+0]=a,t[e+1]=h,t[e+2]=c,void(t[e+3]=l);if(1===o)return t[e+0]=u,t[e+1]=p,t[e+2]=d,void(t[e+3]=m);if(l!==m||a!==u||h!==p||c!==d){let t=1-o;const e=a*u+h*p+c*d+l*m,s=e>=0?1:-1,r=1-e*e;if(r>Number.EPSILON){const i=Math.sqrt(r),n=Math.atan2(i,e*s);t=Math.sin(t*n)/i,o=Math.sin(o*n)/i}const i=o*s;if(a=a*t+u*i,h=h*t+p*i,c=c*t+d*i,l=l*t+m*i,t===1-o){const t=1/Math.sqrt(a*a+h*h+c*c+l*l);a*=t,h*=t,c*=t,l*=t}}t[e]=a,t[e+1]=h,t[e+2]=c,t[e+3]=l}static multiplyQuaternionsFlat(t,e,s,r,i,n){const o=s[r],a=s[r+1],h=s[r+2],c=s[r+3],l=i[n],u=i[n+1],p=i[n+2],d=i[n+3];return t[e]=o*d+c*l+a*p-h*u,t[e+1]=a*d+c*u+h*l-o*p,t[e+2]=h*d+c*p+o*u-a*l,t[e+3]=c*d-o*l-a*u-h*p,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,s,r){return this._x=t,this._y=e,this._z=s,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const s=t._x,r=t._y,i=t._z,n=t._order,o=Math.cos,a=Math.sin,h=o(s/2),c=o(r/2),l=o(i/2),u=a(s/2),p=a(r/2),d=a(i/2);switch(n){case"XYZ":this._x=u*c*l+h*p*d,this._y=h*p*l-u*c*d,this._z=h*c*d+u*p*l,this._w=h*c*l-u*p*d;break;case"YXZ":this._x=u*c*l+h*p*d,this._y=h*p*l-u*c*d,this._z=h*c*d-u*p*l,this._w=h*c*l+u*p*d;break;case"ZXY":this._x=u*c*l-h*p*d,this._y=h*p*l+u*c*d,this._z=h*c*d+u*p*l,this._w=h*c*l-u*p*d;break;case"ZYX":this._x=u*c*l-h*p*d,this._y=h*p*l+u*c*d,this._z=h*c*d-u*p*l,this._w=h*c*l+u*p*d;break;case"YZX":this._x=u*c*l+h*p*d,this._y=h*p*l+u*c*d,this._z=h*c*d-u*p*l,this._w=h*c*l-u*p*d;break;case"XZY":this._x=u*c*l-h*p*d,this._y=h*p*l-u*c*d,this._z=h*c*d+u*p*l,this._w=h*c*l+u*p*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+n)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const s=e/2,r=Math.sin(s);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(s),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,s=e[0],r=e[4],i=e[8],n=e[1],o=e[5],a=e[9],h=e[2],c=e[6],l=e[10],u=s+o+l;if(u>0){const t=.5/Math.sqrt(u+1);this._w=.25/t,this._x=(c-a)*t,this._y=(i-h)*t,this._z=(n-r)*t}else if(s>o&&s>l){const t=2*Math.sqrt(1+s-o-l);this._w=(c-a)/t,this._x=.25*t,this._y=(r+n)/t,this._z=(i+h)/t}else if(o>l){const t=2*Math.sqrt(1+o-s-l);this._w=(i-h)/t,this._x=(r+n)/t,this._y=.25*t,this._z=(a+c)/t}else{const t=2*Math.sqrt(1+l-s-o);this._w=(n-r)/t,this._x=(i+h)/t,this._y=(a+c)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let s=t.dot(e)+1;return s<Number.EPSILON?(s=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=s):(this._x=0,this._y=-t.z,this._z=t.y,this._w=s)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=s),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(re(this.dot(t),-1,1)))}rotateTowards(t,e){const s=this.angleTo(t);if(0===s)return this;const r=Math.min(1,e/s);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const s=t._x,r=t._y,i=t._z,n=t._w,o=e._x,a=e._y,h=e._z,c=e._w;return this._x=s*c+n*o+r*h-i*a,this._y=r*c+n*a+i*o-s*h,this._z=i*c+n*h+s*a-r*o,this._w=n*c-s*o-r*a-i*h,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const s=this._x,r=this._y,i=this._z,n=this._w;let o=n*t._w+s*t._x+r*t._y+i*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=n,this._x=s,this._y=r,this._z=i,this;const a=1-o*o;if(a<=Number.EPSILON){const t=1-e;return this._w=t*n+e*this._w,this._x=t*s+e*this._x,this._y=t*r+e*this._y,this._z=t*i+e*this._z,this.normalize(),this._onChangeCallback(),this}const h=Math.sqrt(a),c=Math.atan2(h,o),l=Math.sin((1-e)*c)/h,u=Math.sin(e*c)/h;return this._w=n*l+this._w*u,this._x=s*l+this._x*u,this._y=r*l+this._y*u,this._z=i*l+this._z*u,this._onChangeCallback(),this}slerpQuaternions(t,e,s){return this.copy(t).slerp(e,s)}random(){const t=Math.random(),e=Math.sqrt(1-t),s=Math.sqrt(t),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(e*Math.cos(r),s*Math.sin(i),s*Math.cos(i),e*Math.sin(r))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}Be.prototype.isQuaternion=!0;class Ge{constructor(t=0,e=0,s=0){this.x=t,this.y=e,this.z=s}set(t,e,s){return void 0===s&&(s=this.z),this.x=t,this.y=e,this.z=s,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(ze.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(ze.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,s=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*s+i[6]*r,this.y=i[1]*e+i[4]*s+i[7]*r,this.z=i[2]*e+i[5]*s+i[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,s=this.y,r=this.z,i=t.elements,n=1/(i[3]*e+i[7]*s+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*s+i[8]*r+i[12])*n,this.y=(i[1]*e+i[5]*s+i[9]*r+i[13])*n,this.z=(i[2]*e+i[6]*s+i[10]*r+i[14])*n,this}applyQuaternion(t){const e=this.x,s=this.y,r=this.z,i=t.x,n=t.y,o=t.z,a=t.w,h=a*e+n*r-o*s,c=a*s+o*e-i*r,l=a*r+i*s-n*e,u=-i*e-n*s-o*r;return this.x=h*a+u*-i+c*-o-l*-n,this.y=c*a+u*-n+l*-i-h*-o,this.z=l*a+u*-o+h*-n-c*-i,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,s=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*s+i[8]*r,this.y=i[1]*e+i[5]*s+i[9]*r,this.z=i[2]*e+i[6]*s+i[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(t,Math.min(e,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,s){return this.x=t.x+(e.x-t.x)*s,this.y=t.y+(e.y-t.y)*s,this.z=t.z+(e.z-t.z)*s,this}cross(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)}crossVectors(t,e){const s=t.x,r=t.y,i=t.z,n=e.x,o=e.y,a=e.z;return this.x=r*a-i*o,this.y=i*n-s*a,this.z=s*o-r*n,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const s=t.dot(this)/e;return this.copy(t).multiplyScalar(s)}projectOnPlane(t){return je.copy(this).projectOnVector(t),this.sub(je)}reflect(t){return this.sub(je.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const s=this.dot(t)/e;return Math.acos(re(s,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,s=this.y-t.y,r=this.z-t.z;return e*e+s*s+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,s){const r=Math.sin(e)*t;return this.x=r*Math.sin(s),this.y=Math.cos(e)*t,this.z=r*Math.cos(s),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,s){return this.x=t*Math.sin(e),this.y=s,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),s=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=s,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e,s){return void 0!==s&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,s=Math.sqrt(1-t**2);return this.x=s*Math.cos(e),this.y=s*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}Ge.prototype.isVector3=!0;const je=new Ge,ze=new Be;class Ve{constructor(t=new Ge(1/0,1/0,1/0),e=new Ge(-1/0,-1/0,-1/0)){this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,s=1/0,r=1/0,i=-1/0,n=-1/0,o=-1/0;for(let a=0,h=t.length;a<h;a+=3){const h=t[a],c=t[a+1],l=t[a+2];h<e&&(e=h),c<s&&(s=c),l<r&&(r=l),h>i&&(i=h),c>n&&(n=c),l>o&&(o=l)}return this.min.set(e,s,r),this.max.set(i,n,o),this}setFromBufferAttribute(t){let e=1/0,s=1/0,r=1/0,i=-1/0,n=-1/0,o=-1/0;for(let a=0,h=t.count;a<h;a++){const h=t.getX(a),c=t.getY(a),l=t.getZ(a);h<e&&(e=h),c<s&&(s=c),l<r&&(r=l),h>i&&(i=h),c>n&&(n=c),l>o&&(o=l)}return this.min.set(e,s,r),this.max.set(i,n,o),this}setFromPoints(t){this.makeEmpty();for(let e=0,s=t.length;e<s;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const s=Ye.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(s),this.max.copy(t).add(s),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const s=t.geometry;if(void 0!==s)if(e&&null!=s.attributes&&void 0!==s.attributes.position){const e=s.attributes.position;for(let s=0,r=e.count;s<r;s++)Ye.fromBufferAttribute(e,s).applyMatrix4(t.matrixWorld),this.expandByPoint(Ye)}else null===s.boundingBox&&s.computeBoundingBox(),Xe.copy(s.boundingBox),Xe.applyMatrix4(t.matrixWorld),this.union(Xe);const r=t.children;for(let t=0,s=r.length;t<s;t++)this.expandByObject(r[t],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,Ye),Ye.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,s;return t.normal.x>0?(e=t.normal.x*this.min.x,s=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,s=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,s+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,s+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,s+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,s+=t.normal.z*this.min.z),e<=-t.constant&&s>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(ts),es.subVectors(this.max,ts),qe.subVectors(t.a,ts),Ke.subVectors(t.b,ts),Je.subVectors(t.c,ts),$e.subVectors(Ke,qe),Ze.subVectors(Je,Ke),Qe.subVectors(qe,Je);let e=[0,-$e.z,$e.y,0,-Ze.z,Ze.y,0,-Qe.z,Qe.y,$e.z,0,-$e.x,Ze.z,0,-Ze.x,Qe.z,0,-Qe.x,-$e.y,$e.x,0,-Ze.y,Ze.x,0,-Qe.y,Qe.x,0];return!!is(e,qe,Ke,Je,es)&&(e=[1,0,0,0,1,0,0,0,1],!!is(e,qe,Ke,Je,es)&&(ss.crossVectors($e,Ze),e=[ss.x,ss.y,ss.z],is(e,qe,Ke,Je,es)))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return Ye.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=.5*this.getSize(Ye).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(We[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),We[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),We[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),We[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),We[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),We[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),We[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),We[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(We)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}Ve.prototype.isBox3=!0;const We=[new Ge,new Ge,new Ge,new Ge,new Ge,new Ge,new Ge,new Ge],Ye=new Ge,Xe=new Ve,qe=new Ge,Ke=new Ge,Je=new Ge,$e=new Ge,Ze=new Ge,Qe=new Ge,ts=new Ge,es=new Ge,ss=new Ge,rs=new Ge;function is(t,e,s,r,i){for(let n=0,o=t.length-3;n<=o;n+=3){rs.fromArray(t,n);const o=i.x*Math.abs(rs.x)+i.y*Math.abs(rs.y)+i.z*Math.abs(rs.z),a=e.dot(rs),h=s.dot(rs),c=r.dot(rs);if(Math.max(-Math.max(a,h,c),Math.min(a,h,c))>o)return!1}return!0}const ns=new Ve,os=new Ge,as=new Ge,hs=new Ge;class cs{constructor(t=new Ge,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const s=this.center;void 0!==e?s.copy(e):ns.setFromPoints(t).getCenter(s);let r=0;for(let e=0,i=t.length;e<i;e++)r=Math.max(r,s.distanceToSquared(t[e]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const s=this.center.distanceToSquared(t);return e.copy(t),s>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){hs.subVectors(t,this.center);const e=hs.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),s=.5*(t-this.radius);this.center.add(hs.multiplyScalar(s/t)),this.radius+=s}return this}union(t){return!0===this.center.equals(t.center)?as.set(0,0,1).multiplyScalar(t.radius):as.subVectors(t.center,this.center).normalize().multiplyScalar(t.radius),this.expandByPoint(os.copy(t.center).add(as)),this.expandByPoint(os.copy(t.center).sub(as)),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const ls=new Ge,us=new Ge,ps=new Ge,ds=new Ge,ms=new Ge,fs=new Ge,gs=new Ge;class ys{constructor(t=new Ge,e=new Ge(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,ls)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const s=e.dot(this.direction);return s<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(s).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=ls.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(ls.copy(this.direction).multiplyScalar(e).add(this.origin),ls.distanceToSquared(t))}distanceSqToSegment(t,e,s,r){us.copy(t).add(e).multiplyScalar(.5),ps.copy(e).sub(t).normalize(),ds.copy(this.origin).sub(us);const i=.5*t.distanceTo(e),n=-this.direction.dot(ps),o=ds.dot(this.direction),a=-ds.dot(ps),h=ds.lengthSq(),c=Math.abs(1-n*n);let l,u,p,d;if(c>0)if(l=n*a-o,u=n*o-a,d=i*c,l>=0)if(u>=-d)if(u<=d){const t=1/c;l*=t,u*=t,p=l*(l+n*u+2*o)+u*(n*l+u+2*a)+h}else u=i,l=Math.max(0,-(n*u+o)),p=-l*l+u*(u+2*a)+h;else u=-i,l=Math.max(0,-(n*u+o)),p=-l*l+u*(u+2*a)+h;else u<=-d?(l=Math.max(0,-(-n*i+o)),u=l>0?-i:Math.min(Math.max(-i,-a),i),p=-l*l+u*(u+2*a)+h):u<=d?(l=0,u=Math.min(Math.max(-i,-a),i),p=u*(u+2*a)+h):(l=Math.max(0,-(n*i+o)),u=l>0?i:Math.min(Math.max(-i,-a),i),p=-l*l+u*(u+2*a)+h);else u=n>0?-i:i,l=Math.max(0,-(n*u+o)),p=-l*l+u*(u+2*a)+h;return s&&s.copy(this.direction).multiplyScalar(l).add(this.origin),r&&r.copy(ps).multiplyScalar(u).add(us),p}intersectSphere(t,e){ls.subVectors(t.center,this.origin);const s=ls.dot(this.direction),r=ls.dot(ls)-s*s,i=t.radius*t.radius;if(r>i)return null;const n=Math.sqrt(i-r),o=s-n,a=s+n;return o<0&&a<0?null:o<0?this.at(a,e):this.at(o,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const s=-(this.origin.dot(t.normal)+t.constant)/e;return s>=0?s:null}intersectPlane(t,e){const s=this.distanceToPlane(t);return null===s?null:this.at(s,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);if(0===e)return!0;return t.normal.dot(this.direction)*e<0}intersectBox(t,e){let s,r,i,n,o,a;const h=1/this.direction.x,c=1/this.direction.y,l=1/this.direction.z,u=this.origin;return h>=0?(s=(t.min.x-u.x)*h,r=(t.max.x-u.x)*h):(s=(t.max.x-u.x)*h,r=(t.min.x-u.x)*h),c>=0?(i=(t.min.y-u.y)*c,n=(t.max.y-u.y)*c):(i=(t.max.y-u.y)*c,n=(t.min.y-u.y)*c),s>n||i>r?null:((i>s||s!=s)&&(s=i),(n<r||r!=r)&&(r=n),l>=0?(o=(t.min.z-u.z)*l,a=(t.max.z-u.z)*l):(o=(t.max.z-u.z)*l,a=(t.min.z-u.z)*l),s>a||o>r?null:((o>s||s!=s)&&(s=o),(a<r||r!=r)&&(r=a),r<0?null:this.at(s>=0?s:r,e)))}intersectsBox(t){return null!==this.intersectBox(t,ls)}intersectTriangle(t,e,s,r,i){ms.subVectors(e,t),fs.subVectors(s,t),gs.crossVectors(ms,fs);let n,o=this.direction.dot(gs);if(o>0){if(r)return null;n=1}else{if(!(o<0))return null;n=-1,o=-o}ds.subVectors(this.origin,t);const a=n*this.direction.dot(fs.crossVectors(ds,fs));if(a<0)return null;const h=n*this.direction.dot(ms.cross(ds));if(h<0)return null;if(a+h>o)return null;const c=-n*ds.dot(gs);return c<0?null:this.at(c/o,i)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Ts{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(t,e,s,r,i,n,o,a,h,c,l,u,p,d,m,f){const g=this.elements;return g[0]=t,g[4]=e,g[8]=s,g[12]=r,g[1]=i,g[5]=n,g[9]=o,g[13]=a,g[2]=h,g[6]=c,g[10]=l,g[14]=u,g[3]=p,g[7]=d,g[11]=m,g[15]=f,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Ts).fromArray(this.elements)}copy(t){const e=this.elements,s=t.elements;return e[0]=s[0],e[1]=s[1],e[2]=s[2],e[3]=s[3],e[4]=s[4],e[5]=s[5],e[6]=s[6],e[7]=s[7],e[8]=s[8],e[9]=s[9],e[10]=s[10],e[11]=s[11],e[12]=s[12],e[13]=s[13],e[14]=s[14],e[15]=s[15],this}copyPosition(t){const e=this.elements,s=t.elements;return e[12]=s[12],e[13]=s[13],e[14]=s[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,s){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),s.setFromMatrixColumn(this,2),this}makeBasis(t,e,s){return this.set(t.x,e.x,s.x,0,t.y,e.y,s.y,0,t.z,e.z,s.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,s=t.elements,r=1/vs.setFromMatrixColumn(t,0).length(),i=1/vs.setFromMatrixColumn(t,1).length(),n=1/vs.setFromMatrixColumn(t,2).length();return e[0]=s[0]*r,e[1]=s[1]*r,e[2]=s[2]*r,e[3]=0,e[4]=s[4]*i,e[5]=s[5]*i,e[6]=s[6]*i,e[7]=0,e[8]=s[8]*n,e[9]=s[9]*n,e[10]=s[10]*n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const e=this.elements,s=t.x,r=t.y,i=t.z,n=Math.cos(s),o=Math.sin(s),a=Math.cos(r),h=Math.sin(r),c=Math.cos(i),l=Math.sin(i);if("XYZ"===t.order){const t=n*c,s=n*l,r=o*c,i=o*l;e[0]=a*c,e[4]=-a*l,e[8]=h,e[1]=s+r*h,e[5]=t-i*h,e[9]=-o*a,e[2]=i-t*h,e[6]=r+s*h,e[10]=n*a}else if("YXZ"===t.order){const t=a*c,s=a*l,r=h*c,i=h*l;e[0]=t+i*o,e[4]=r*o-s,e[8]=n*h,e[1]=n*l,e[5]=n*c,e[9]=-o,e[2]=s*o-r,e[6]=i+t*o,e[10]=n*a}else if("ZXY"===t.order){const t=a*c,s=a*l,r=h*c,i=h*l;e[0]=t-i*o,e[4]=-n*l,e[8]=r+s*o,e[1]=s+r*o,e[5]=n*c,e[9]=i-t*o,e[2]=-n*h,e[6]=o,e[10]=n*a}else if("ZYX"===t.order){const t=n*c,s=n*l,r=o*c,i=o*l;e[0]=a*c,e[4]=r*h-s,e[8]=t*h+i,e[1]=a*l,e[5]=i*h+t,e[9]=s*h-r,e[2]=-h,e[6]=o*a,e[10]=n*a}else if("YZX"===t.order){const t=n*a,s=n*h,r=o*a,i=o*h;e[0]=a*c,e[4]=i-t*l,e[8]=r*l+s,e[1]=l,e[5]=n*c,e[9]=-o*c,e[2]=-h*c,e[6]=s*l+r,e[10]=t-i*l}else if("XZY"===t.order){const t=n*a,s=n*h,r=o*a,i=o*h;e[0]=a*c,e[4]=-l,e[8]=h*c,e[1]=t*l+i,e[5]=n*c,e[9]=s*l-r,e[2]=r*l-s,e[6]=o*c,e[10]=i*l+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(ws,t,xs)}lookAt(t,e,s){const r=this.elements;return Ss.subVectors(t,e),0===Ss.lengthSq()&&(Ss.z=1),Ss.normalize(),Is.crossVectors(s,Ss),0===Is.lengthSq()&&(1===Math.abs(s.z)?Ss.x+=1e-4:Ss.z+=1e-4,Ss.normalize(),Is.crossVectors(s,Ss)),Is.normalize(),Es.crossVectors(Ss,Is),r[0]=Is.x,r[4]=Es.x,r[8]=Ss.x,r[1]=Is.y,r[5]=Es.y,r[9]=Ss.y,r[2]=Is.z,r[6]=Es.z,r[10]=Ss.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const s=t.elements,r=e.elements,i=this.elements,n=s[0],o=s[4],a=s[8],h=s[12],c=s[1],l=s[5],u=s[9],p=s[13],d=s[2],m=s[6],f=s[10],g=s[14],y=s[3],T=s[7],v=s[11],b=s[15],w=r[0],x=r[4],I=r[8],E=r[12],S=r[1],A=r[5],R=r[9],C=r[13],O=r[2],_=r[6],D=r[10],F=r[14],M=r[3],P=r[7],N=r[11],L=r[15];return i[0]=n*w+o*S+a*O+h*M,i[4]=n*x+o*A+a*_+h*P,i[8]=n*I+o*R+a*D+h*N,i[12]=n*E+o*C+a*F+h*L,i[1]=c*w+l*S+u*O+p*M,i[5]=c*x+l*A+u*_+p*P,i[9]=c*I+l*R+u*D+p*N,i[13]=c*E+l*C+u*F+p*L,i[2]=d*w+m*S+f*O+g*M,i[6]=d*x+m*A+f*_+g*P,i[10]=d*I+m*R+f*D+g*N,i[14]=d*E+m*C+f*F+g*L,i[3]=y*w+T*S+v*O+b*M,i[7]=y*x+T*A+v*_+b*P,i[11]=y*I+T*R+v*D+b*N,i[15]=y*E+T*C+v*F+b*L,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],s=t[4],r=t[8],i=t[12],n=t[1],o=t[5],a=t[9],h=t[13],c=t[2],l=t[6],u=t[10],p=t[14];return t[3]*(+i*a*l-r*h*l-i*o*u+s*h*u+r*o*p-s*a*p)+t[7]*(+e*a*p-e*h*u+i*n*u-r*n*p+r*h*c-i*a*c)+t[11]*(+e*h*l-e*o*p-i*n*l+s*n*p+i*o*c-s*h*c)+t[15]*(-r*o*c-e*a*l+e*o*u+r*n*l-s*n*u+s*a*c)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,s){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=s),this}invert(){const t=this.elements,e=t[0],s=t[1],r=t[2],i=t[3],n=t[4],o=t[5],a=t[6],h=t[7],c=t[8],l=t[9],u=t[10],p=t[11],d=t[12],m=t[13],f=t[14],g=t[15],y=l*f*h-m*u*h+m*a*p-o*f*p-l*a*g+o*u*g,T=d*u*h-c*f*h-d*a*p+n*f*p+c*a*g-n*u*g,v=c*m*h-d*l*h+d*o*p-n*m*p-c*o*g+n*l*g,b=d*l*a-c*m*a-d*o*u+n*m*u+c*o*f-n*l*f,w=e*y+s*T+r*v+i*b;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const x=1/w;return t[0]=y*x,t[1]=(m*u*i-l*f*i-m*r*p+s*f*p+l*r*g-s*u*g)*x,t[2]=(o*f*i-m*a*i+m*r*h-s*f*h-o*r*g+s*a*g)*x,t[3]=(l*a*i-o*u*i-l*r*h+s*u*h+o*r*p-s*a*p)*x,t[4]=T*x,t[5]=(c*f*i-d*u*i+d*r*p-e*f*p-c*r*g+e*u*g)*x,t[6]=(d*a*i-n*f*i-d*r*h+e*f*h+n*r*g-e*a*g)*x,t[7]=(n*u*i-c*a*i+c*r*h-e*u*h-n*r*p+e*a*p)*x,t[8]=v*x,t[9]=(d*l*i-c*m*i-d*s*p+e*m*p+c*s*g-e*l*g)*x,t[10]=(n*m*i-d*o*i+d*s*h-e*m*h-n*s*g+e*o*g)*x,t[11]=(c*o*i-n*l*i-c*s*h+e*l*h+n*s*p-e*o*p)*x,t[12]=b*x,t[13]=(c*m*r-d*l*r+d*s*u-e*m*u-c*s*f+e*l*f)*x,t[14]=(d*o*r-n*m*r-d*s*a+e*m*a+n*s*f-e*o*f)*x,t[15]=(n*l*r-c*o*r+c*s*a-e*l*a-n*s*u+e*o*u)*x,this}scale(t){const e=this.elements,s=t.x,r=t.y,i=t.z;return e[0]*=s,e[4]*=r,e[8]*=i,e[1]*=s,e[5]*=r,e[9]*=i,e[2]*=s,e[6]*=r,e[10]*=i,e[3]*=s,e[7]*=r,e[11]*=i,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],s=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,s,r))}makeTranslation(t,e,s){return this.set(1,0,0,t,0,1,0,e,0,0,1,s,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),s=Math.sin(t);return this.set(1,0,0,0,0,e,-s,0,0,s,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),s=Math.sin(t);return this.set(e,0,s,0,0,1,0,0,-s,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),s=Math.sin(t);return this.set(e,-s,0,0,s,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const s=Math.cos(e),r=Math.sin(e),i=1-s,n=t.x,o=t.y,a=t.z,h=i*n,c=i*o;return this.set(h*n+s,h*o-r*a,h*a+r*o,0,h*o+r*a,c*o+s,c*a-r*n,0,h*a-r*o,c*a+r*n,i*a*a+s,0,0,0,0,1),this}makeScale(t,e,s){return this.set(t,0,0,0,0,e,0,0,0,0,s,0,0,0,0,1),this}makeShear(t,e,s,r,i,n){return this.set(1,s,i,0,t,1,n,0,e,r,1,0,0,0,0,1),this}compose(t,e,s){const r=this.elements,i=e._x,n=e._y,o=e._z,a=e._w,h=i+i,c=n+n,l=o+o,u=i*h,p=i*c,d=i*l,m=n*c,f=n*l,g=o*l,y=a*h,T=a*c,v=a*l,b=s.x,w=s.y,x=s.z;return r[0]=(1-(m+g))*b,r[1]=(p+v)*b,r[2]=(d-T)*b,r[3]=0,r[4]=(p-v)*w,r[5]=(1-(u+g))*w,r[6]=(f+y)*w,r[7]=0,r[8]=(d+T)*x,r[9]=(f-y)*x,r[10]=(1-(u+m))*x,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,s){const r=this.elements;let i=vs.set(r[0],r[1],r[2]).length();const n=vs.set(r[4],r[5],r[6]).length(),o=vs.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),t.x=r[12],t.y=r[13],t.z=r[14],bs.copy(this);const a=1/i,h=1/n,c=1/o;return bs.elements[0]*=a,bs.elements[1]*=a,bs.elements[2]*=a,bs.elements[4]*=h,bs.elements[5]*=h,bs.elements[6]*=h,bs.elements[8]*=c,bs.elements[9]*=c,bs.elements[10]*=c,e.setFromRotationMatrix(bs),s.x=i,s.y=n,s.z=o,this}makePerspective(t,e,s,r,i,n){void 0===n&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const o=this.elements,a=2*i/(e-t),h=2*i/(s-r),c=(e+t)/(e-t),l=(s+r)/(s-r),u=-(n+i)/(n-i),p=-2*n*i/(n-i);return o[0]=a,o[4]=0,o[8]=c,o[12]=0,o[1]=0,o[5]=h,o[9]=l,o[13]=0,o[2]=0,o[6]=0,o[10]=u,o[14]=p,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(t,e,s,r,i,n){const o=this.elements,a=1/(e-t),h=1/(s-r),c=1/(n-i),l=(e+t)*a,u=(s+r)*h,p=(n+i)*c;return o[0]=2*a,o[4]=0,o[8]=0,o[12]=-l,o[1]=0,o[5]=2*h,o[9]=0,o[13]=-u,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-p,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(t){const e=this.elements,s=t.elements;for(let t=0;t<16;t++)if(e[t]!==s[t])return!1;return!0}fromArray(t,e=0){for(let s=0;s<16;s++)this.elements[s]=t[s+e];return this}toArray(t=[],e=0){const s=this.elements;return t[e]=s[0],t[e+1]=s[1],t[e+2]=s[2],t[e+3]=s[3],t[e+4]=s[4],t[e+5]=s[5],t[e+6]=s[6],t[e+7]=s[7],t[e+8]=s[8],t[e+9]=s[9],t[e+10]=s[10],t[e+11]=s[11],t[e+12]=s[12],t[e+13]=s[13],t[e+14]=s[14],t[e+15]=s[15],t}}Ts.prototype.isMatrix4=!0;const vs=new Ge,bs=new Ts,ws=new Ge(0,0,0),xs=new Ge(1,1,1),Is=new Ge,Es=new Ge,Ss=new Ge,As=new Ts,Rs=new Be;class Cs{constructor(t=0,e=0,s=0,r=Cs.DefaultOrder){this._x=t,this._y=e,this._z=s,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,s,r=this._order){return this._x=t,this._y=e,this._z=s,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,s=!0){const r=t.elements,i=r[0],n=r[4],o=r[8],a=r[1],h=r[5],c=r[9],l=r[2],u=r[6],p=r[10];switch(e){case"XYZ":this._y=Math.asin(re(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,p),this._z=Math.atan2(-n,i)):(this._x=Math.atan2(u,h),this._z=0);break;case"YXZ":this._x=Math.asin(-re(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,p),this._z=Math.atan2(a,h)):(this._y=Math.atan2(-l,i),this._z=0);break;case"ZXY":this._x=Math.asin(re(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(-l,p),this._z=Math.atan2(-n,h)):(this._y=0,this._z=Math.atan2(a,i));break;case"ZYX":this._y=Math.asin(-re(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(u,p),this._z=Math.atan2(a,i)):(this._x=0,this._z=Math.atan2(-n,h));break;case"YZX":this._z=Math.asin(re(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,h),this._y=Math.atan2(-l,i)):(this._x=0,this._y=Math.atan2(o,p));break;case"XZY":this._z=Math.asin(-re(n,-1,1)),Math.abs(n)<.9999999?(this._x=Math.atan2(u,h),this._y=Math.atan2(o,i)):(this._x=Math.atan2(-c,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===s&&this._onChangeCallback(),this}setFromQuaternion(t,e,s){return As.makeRotationFromQuaternion(t),this.setFromRotationMatrix(As,e,s)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return Rs.setFromEuler(this),this.setFromQuaternion(Rs,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Cs.prototype.isEuler=!0,Cs.DefaultOrder="XYZ",Cs.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Os{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}let _s=0;const Ds=new Ge,Fs=new Be,Ms=new Ts,Ps=new Ge,Ns=new Ge,Ls=new Ge,ks=new Be,Us=new Ge(1,0,0),Hs=new Ge(0,1,0),Bs=new Ge(0,0,1),Gs={type:"added"},js={type:"removed"};class zs extends $t{constructor(){super(),Object.defineProperty(this,"id",{value:_s++}),this.uuid=se(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=zs.DefaultUp.clone();const t=new Ge,e=new Cs,s=new Be,r=new Ge(1,1,1);e._onChange((function(){s.setFromEuler(e,!1)})),s._onChange((function(){e.setFromQuaternion(s,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:s},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Ts},normalMatrix:{value:new ue}}),this.matrix=new Ts,this.matrixWorld=new Ts,this.matrixAutoUpdate=zs.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Os,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Fs.setFromAxisAngle(t,e),this.quaternion.multiply(Fs),this}rotateOnWorldAxis(t,e){return Fs.setFromAxisAngle(t,e),this.quaternion.premultiply(Fs),this}rotateX(t){return this.rotateOnAxis(Us,t)}rotateY(t){return this.rotateOnAxis(Hs,t)}rotateZ(t){return this.rotateOnAxis(Bs,t)}translateOnAxis(t,e){return Ds.copy(t).applyQuaternion(this.quaternion),this.position.add(Ds.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(Us,t)}translateY(t){return this.translateOnAxis(Hs,t)}translateZ(t){return this.translateOnAxis(Bs,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(Ms.copy(this.matrixWorld).invert())}lookAt(t,e,s){t.isVector3?Ps.copy(t):Ps.set(t,e,s);const r=this.parent;this.updateWorldMatrix(!0,!1),Ns.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ms.lookAt(Ns,Ps,this.up):Ms.lookAt(Ps,Ns,this.up),this.quaternion.setFromRotationMatrix(Ms),r&&(Ms.extractRotation(r.matrixWorld),Fs.setFromRotationMatrix(Ms),this.quaternion.premultiply(Fs.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Gs)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(js)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(js)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Ms.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Ms.multiply(t.parent.matrixWorld)),t.applyMatrix4(Ms),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let s=0,r=this.children.length;s<r;s++){const r=this.children[s].getObjectByProperty(t,e);if(void 0!==r)return r}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ns,t,Ls),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ns,ks,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let s=0,r=e.length;s<r;s++)e[s].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let s=0,r=e.length;s<r;s++)e[s].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let s=0,r=e.length;s<r;s++)e[s].updateMatrixWorld(t)}updateWorldMatrix(t,e){const s=this.parent;if(!0===t&&null!==s&&s.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,s=t.length;e<s;e++)t[e].updateWorldMatrix(!1,!0)}}toJSON(t){const e=void 0===t||"string"==typeof t,s={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},s.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function i(e,s){return void 0===e[s.uuid]&&(e[s.uuid]=s.toJSON(t)),s.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const s=e.shapes;if(Array.isArray(s))for(let e=0,r=s.length;e<r;e++){const r=s[e];i(t.shapes,r)}else i(t.shapes,s)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(t.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let s=0,r=this.material.length;s<r;s++)e.push(i(t.materials,this.material[s]));r.material=e}else r.material=i(t.materials,this.material);if(this.children.length>0){r.children=[];for(let e=0;e<this.children.length;e++)r.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){r.animations=[];for(let e=0;e<this.animations.length;e++){const s=this.animations[e];r.animations.push(i(t.animations,s))}}if(e){const e=n(t.geometries),r=n(t.materials),i=n(t.textures),o=n(t.images),a=n(t.shapes),h=n(t.skeletons),c=n(t.animations),l=n(t.nodes);e.length>0&&(s.geometries=e),r.length>0&&(s.materials=r),i.length>0&&(s.textures=i),o.length>0&&(s.images=o),a.length>0&&(s.shapes=a),h.length>0&&(s.skeletons=h),c.length>0&&(s.animations=c),l.length>0&&(s.nodes=l)}return s.object=r,s;function n(t){const e=[];for(const s in t){const r=t[s];delete r.metadata,e.push(r)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let e=0;e<t.children.length;e++){const s=t.children[e];this.add(s.clone())}return this}}zs.DefaultUp=new Ge(0,1,0),zs.DefaultMatrixAutoUpdate=!0,zs.prototype.isObject3D=!0;const Vs=new Ge,Ws=new Ge,Ys=new Ge,Xs=new Ge,qs=new Ge,Ks=new Ge,Js=new Ge,$s=new Ge,Zs=new Ge,Qs=new Ge;class tr{constructor(t=new Ge,e=new Ge,s=new Ge){this.a=t,this.b=e,this.c=s}static getNormal(t,e,s,r){r.subVectors(s,e),Vs.subVectors(t,e),r.cross(Vs);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(t,e,s,r,i){Vs.subVectors(r,e),Ws.subVectors(s,e),Ys.subVectors(t,e);const n=Vs.dot(Vs),o=Vs.dot(Ws),a=Vs.dot(Ys),h=Ws.dot(Ws),c=Ws.dot(Ys),l=n*h-o*o;if(0===l)return i.set(-2,-1,-1);const u=1/l,p=(h*a-o*c)*u,d=(n*c-o*a)*u;return i.set(1-p-d,d,p)}static containsPoint(t,e,s,r){return this.getBarycoord(t,e,s,r,Xs),Xs.x>=0&&Xs.y>=0&&Xs.x+Xs.y<=1}static getUV(t,e,s,r,i,n,o,a){return this.getBarycoord(t,e,s,r,Xs),a.set(0,0),a.addScaledVector(i,Xs.x),a.addScaledVector(n,Xs.y),a.addScaledVector(o,Xs.z),a}static isFrontFacing(t,e,s,r){return Vs.subVectors(s,e),Ws.subVectors(t,e),Vs.cross(Ws).dot(r)<0}set(t,e,s){return this.a.copy(t),this.b.copy(e),this.c.copy(s),this}setFromPointsAndIndices(t,e,s,r){return this.a.copy(t[e]),this.b.copy(t[s]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,s,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,s),this.c.fromBufferAttribute(t,r),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Vs.subVectors(this.c,this.b),Ws.subVectors(this.a,this.b),.5*Vs.cross(Ws).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return tr.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return tr.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,s,r,i){return tr.getUV(t,this.a,this.b,this.c,e,s,r,i)}containsPoint(t){return tr.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return tr.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const s=this.a,r=this.b,i=this.c;let n,o;qs.subVectors(r,s),Ks.subVectors(i,s),$s.subVectors(t,s);const a=qs.dot($s),h=Ks.dot($s);if(a<=0&&h<=0)return e.copy(s);Zs.subVectors(t,r);const c=qs.dot(Zs),l=Ks.dot(Zs);if(c>=0&&l<=c)return e.copy(r);const u=a*l-c*h;if(u<=0&&a>=0&&c<=0)return n=a/(a-c),e.copy(s).addScaledVector(qs,n);Qs.subVectors(t,i);const p=qs.dot(Qs),d=Ks.dot(Qs);if(d>=0&&p<=d)return e.copy(i);const m=p*h-a*d;if(m<=0&&h>=0&&d<=0)return o=h/(h-d),e.copy(s).addScaledVector(Ks,o);const f=c*d-p*l;if(f<=0&&l-c>=0&&p-d>=0)return Js.subVectors(i,r),o=(l-c)/(l-c+(p-d)),e.copy(r).addScaledVector(Js,o);const g=1/(f+m+u);return n=m*g,o=u*g,e.copy(s).addScaledVector(qs,n).addScaledVector(Ks,o)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let er=0;class sr extends $t{constructor(){super(),Object.defineProperty(this,"id",{value:er++}),this.uuid=se(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=M,this.blendDst=P,this.blendEquation=F,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Yt,this.stencilZFail=Yt,this.stencilZPass=Yt,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const s=t[e];if(void 0===s){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if("shading"===e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===s;continue}const r=this[e];void 0!==r?r&&r.isColor?r.set(s):r&&r.isVector3&&s&&s.isVector3?r.copy(s):this[e]=s:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const s={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(t){const e=[];for(const s in t){const r=t[s];delete r.metadata,e.push(r)}return e}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),this.color&&this.color.isColor&&(s.color=this.color.getHex()),void 0!==this.roughness&&(s.roughness=this.roughness),void 0!==this.metalness&&(s.metalness=this.metalness),void 0!==this.sheen&&(s.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(s.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(s.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(s.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(s.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(s.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(s.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(s.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(s.shininess=this.shininess),void 0!==this.clearcoat&&(s.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(s.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(s.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(s.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(s.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,s.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(s.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(s.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(s.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(s.lightMap=this.lightMap.toJSON(t).uuid,s.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(s.aoMap=this.aoMap.toJSON(t).uuid,s.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(s.bumpMap=this.bumpMap.toJSON(t).uuid,s.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(s.normalMap=this.normalMap.toJSON(t).uuid,s.normalMapType=this.normalMapType,s.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(s.displacementMap=this.displacementMap.toJSON(t).uuid,s.displacementScale=this.displacementScale,s.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(s.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(s.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(s.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(s.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(s.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(s.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(s.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(s.combine=this.combine)),void 0!==this.envMapIntensity&&(s.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(s.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(s.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(s.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(s.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(s.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(s.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(s.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&(s.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(s.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(s.size=this.size),null!==this.shadowSide&&(s.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(s.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(s.blending=this.blending),0!==this.side&&(s.side=this.side),this.vertexColors&&(s.vertexColors=!0),this.opacity<1&&(s.opacity=this.opacity),!0===this.transparent&&(s.transparent=this.transparent),s.depthFunc=this.depthFunc,s.depthTest=this.depthTest,s.depthWrite=this.depthWrite,s.colorWrite=this.colorWrite,s.stencilWrite=this.stencilWrite,s.stencilWriteMask=this.stencilWriteMask,s.stencilFunc=this.stencilFunc,s.stencilRef=this.stencilRef,s.stencilFuncMask=this.stencilFuncMask,s.stencilFail=this.stencilFail,s.stencilZFail=this.stencilZFail,s.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(s.rotation=this.rotation),!0===this.polygonOffset&&(s.polygonOffset=!0),0!==this.polygonOffsetFactor&&(s.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(s.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(s.linewidth=this.linewidth),void 0!==this.dashSize&&(s.dashSize=this.dashSize),void 0!==this.gapSize&&(s.gapSize=this.gapSize),void 0!==this.scale&&(s.scale=this.scale),!0===this.dithering&&(s.dithering=!0),this.alphaTest>0&&(s.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(s.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(s.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(s.wireframe=this.wireframe),this.wireframeLinewidth>1&&(s.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(s.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(s.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(s.flatShading=this.flatShading),!1===this.visible&&(s.visible=!1),!1===this.toneMapped&&(s.toneMapped=!1),!1===this.fog&&(s.fog=!1),"{}"!==JSON.stringify(this.userData)&&(s.userData=this.userData),e){const e=r(t.textures),i=r(t.images);e.length>0&&(s.textures=e),i.length>0&&(s.images=i)}return s}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let s=null;if(null!==e){const t=e.length;s=new Array(t);for(let r=0;r!==t;++r)s[r]=e[r].clone()}return this.clippingPlanes=s,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}sr.prototype.isMaterial=!0,sr.fromType=function(){return null};class rr extends sr{constructor(t){super(),this.type="MeshBasicMaterial",this.color=new Ae(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}rr.prototype.isMeshBasicMaterial=!0;const ir=new Ge,nr=new le;class or{constructor(t,e,s){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===s,this.usage=Xt,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,s){t*=this.itemSize,s*=e.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[s+r];return this}copyArray(t){return this.array.set(t),this}copyColorsArray(t){const e=this.array;let s=0;for(let r=0,i=t.length;r<i;r++){let i=t[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),i=new Ae),e[s++]=i.r,e[s++]=i.g,e[s++]=i.b}return this}copyVector2sArray(t){const e=this.array;let s=0;for(let r=0,i=t.length;r<i;r++){let i=t[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),i=new le),e[s++]=i.x,e[s++]=i.y}return this}copyVector3sArray(t){const e=this.array;let s=0;for(let r=0,i=t.length;r<i;r++){let i=t[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),i=new Ge),e[s++]=i.x,e[s++]=i.y,e[s++]=i.z}return this}copyVector4sArray(t){const e=this.array;let s=0;for(let r=0,i=t.length;r<i;r++){let i=t[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),i=new Me),e[s++]=i.x,e[s++]=i.y,e[s++]=i.z,e[s++]=i.w}return this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,s=this.count;e<s;e++)nr.fromBufferAttribute(this,e),nr.applyMatrix3(t),this.setXY(e,nr.x,nr.y);else if(3===this.itemSize)for(let e=0,s=this.count;e<s;e++)ir.fromBufferAttribute(this,e),ir.applyMatrix3(t),this.setXYZ(e,ir.x,ir.y,ir.z);return this}applyMatrix4(t){for(let e=0,s=this.count;e<s;e++)ir.fromBufferAttribute(this,e),ir.applyMatrix4(t),this.setXYZ(e,ir.x,ir.y,ir.z);return this}applyNormalMatrix(t){for(let e=0,s=this.count;e<s;e++)ir.fromBufferAttribute(this,e),ir.applyNormalMatrix(t),this.setXYZ(e,ir.x,ir.y,ir.z);return this}transformDirection(t){for(let e=0,s=this.count;e<s;e++)ir.fromBufferAttribute(this,e),ir.transformDirection(t),this.setXYZ(e,ir.x,ir.y,ir.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){return this.array[t*this.itemSize]}setX(t,e){return this.array[t*this.itemSize]=e,this}getY(t){return this.array[t*this.itemSize+1]}setY(t,e){return this.array[t*this.itemSize+1]=e,this}getZ(t){return this.array[t*this.itemSize+2]}setZ(t,e){return this.array[t*this.itemSize+2]=e,this}getW(t){return this.array[t*this.itemSize+3]}setW(t,e){return this.array[t*this.itemSize+3]=e,this}setXY(t,e,s){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=s,this}setXYZ(t,e,s,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=s,this.array[t+2]=r,this}setXYZW(t,e,s,r,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=s,this.array[t+2]=r,this.array[t+3]=i,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==Xt&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}}or.prototype.isBufferAttribute=!0;class ar extends or{constructor(t,e,s){super(new Int8Array(t),e,s)}}class hr extends or{constructor(t,e,s){super(new Uint8Array(t),e,s)}}class cr extends or{constructor(t,e,s){super(new Uint8ClampedArray(t),e,s)}}class lr extends or{constructor(t,e,s){super(new Int16Array(t),e,s)}}class ur extends or{constructor(t,e,s){super(new Uint16Array(t),e,s)}}class pr extends or{constructor(t,e,s){super(new Int32Array(t),e,s)}}class dr extends or{constructor(t,e,s){super(new Uint32Array(t),e,s)}}class mr extends or{constructor(t,e,s){super(new Uint16Array(t),e,s)}}mr.prototype.isFloat16BufferAttribute=!0;class fr extends or{constructor(t,e,s){super(new Float32Array(t),e,s)}}class gr extends or{constructor(t,e,s){super(new Float64Array(t),e,s)}}let yr=0;const Tr=new Ts,vr=new zs,br=new Ge,wr=new Ve,xr=new Ve,Ir=new Ge;class Er extends $t{constructor(){super(),Object.defineProperty(this,"id",{value:yr++}),this.uuid=se(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(pe(t)?dr:ur)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,s=0){this.groups.push({start:t,count:e,materialIndex:s})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const s=this.attributes.normal;if(void 0!==s){const e=(new ue).getNormalMatrix(t);s.applyNormalMatrix(e),s.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return Tr.makeRotationFromQuaternion(t),this.applyMatrix4(Tr),this}rotateX(t){return Tr.makeRotationX(t),this.applyMatrix4(Tr),this}rotateY(t){return Tr.makeRotationY(t),this.applyMatrix4(Tr),this}rotateZ(t){return Tr.makeRotationZ(t),this.applyMatrix4(Tr),this}translate(t,e,s){return Tr.makeTranslation(t,e,s),this.applyMatrix4(Tr),this}scale(t,e,s){return Tr.makeScale(t,e,s),this.applyMatrix4(Tr),this}lookAt(t){return vr.lookAt(t),vr.updateMatrix(),this.applyMatrix4(vr.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(br).negate(),this.translate(br.x,br.y,br.z),this}setFromPoints(t){const e=[];for(let s=0,r=t.length;s<r;s++){const r=t[s];e.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new fr(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Ve);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Ge(-1/0,-1/0,-1/0),new Ge(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let t=0,s=e.length;t<s;t++){const s=e[t];wr.setFromBufferAttribute(s),this.morphTargetsRelative?(Ir.addVectors(this.boundingBox.min,wr.min),this.boundingBox.expandByPoint(Ir),Ir.addVectors(this.boundingBox.max,wr.max),this.boundingBox.expandByPoint(Ir)):(this.boundingBox.expandByPoint(wr.min),this.boundingBox.expandByPoint(wr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new cs);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Ge,1/0);if(t){const s=this.boundingSphere.center;if(wr.setFromBufferAttribute(t),e)for(let t=0,s=e.length;t<s;t++){const s=e[t];xr.setFromBufferAttribute(s),this.morphTargetsRelative?(Ir.addVectors(wr.min,xr.min),wr.expandByPoint(Ir),Ir.addVectors(wr.max,xr.max),wr.expandByPoint(Ir)):(wr.expandByPoint(xr.min),wr.expandByPoint(xr.max))}wr.getCenter(s);let r=0;for(let e=0,i=t.count;e<i;e++)Ir.fromBufferAttribute(t,e),r=Math.max(r,s.distanceToSquared(Ir));if(e)for(let i=0,n=e.length;i<n;i++){const n=e[i],o=this.morphTargetsRelative;for(let e=0,i=n.count;e<i;e++)Ir.fromBufferAttribute(n,e),o&&(br.fromBufferAttribute(t,e),Ir.add(br)),r=Math.max(r,s.distanceToSquared(Ir))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const s=t.array,r=e.position.array,i=e.normal.array,n=e.uv.array,o=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new or(new Float32Array(4*o),4));const a=this.getAttribute("tangent").array,h=[],c=[];for(let t=0;t<o;t++)h[t]=new Ge,c[t]=new Ge;const l=new Ge,u=new Ge,p=new Ge,d=new le,m=new le,f=new le,g=new Ge,y=new Ge;function T(t,e,s){l.fromArray(r,3*t),u.fromArray(r,3*e),p.fromArray(r,3*s),d.fromArray(n,2*t),m.fromArray(n,2*e),f.fromArray(n,2*s),u.sub(l),p.sub(l),m.sub(d),f.sub(d);const i=1/(m.x*f.y-f.x*m.y);isFinite(i)&&(g.copy(u).multiplyScalar(f.y).addScaledVector(p,-m.y).multiplyScalar(i),y.copy(p).multiplyScalar(m.x).addScaledVector(u,-f.x).multiplyScalar(i),h[t].add(g),h[e].add(g),h[s].add(g),c[t].add(y),c[e].add(y),c[s].add(y))}let v=this.groups;0===v.length&&(v=[{start:0,count:s.length}]);for(let t=0,e=v.length;t<e;++t){const e=v[t],r=e.start;for(let t=r,i=r+e.count;t<i;t+=3)T(s[t+0],s[t+1],s[t+2])}const b=new Ge,w=new Ge,x=new Ge,I=new Ge;function E(t){x.fromArray(i,3*t),I.copy(x);const e=h[t];b.copy(e),b.sub(x.multiplyScalar(x.dot(e))).normalize(),w.crossVectors(I,e);const s=w.dot(c[t])<0?-1:1;a[4*t]=b.x,a[4*t+1]=b.y,a[4*t+2]=b.z,a[4*t+3]=s}for(let t=0,e=v.length;t<e;++t){const e=v[t],r=e.start;for(let t=r,i=r+e.count;t<i;t+=3)E(s[t+0]),E(s[t+1]),E(s[t+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let s=this.getAttribute("normal");if(void 0===s)s=new or(new Float32Array(3*e.count),3),this.setAttribute("normal",s);else for(let t=0,e=s.count;t<e;t++)s.setXYZ(t,0,0,0);const r=new Ge,i=new Ge,n=new Ge,o=new Ge,a=new Ge,h=new Ge,c=new Ge,l=new Ge;if(t)for(let u=0,p=t.count;u<p;u+=3){const p=t.getX(u+0),d=t.getX(u+1),m=t.getX(u+2);r.fromBufferAttribute(e,p),i.fromBufferAttribute(e,d),n.fromBufferAttribute(e,m),c.subVectors(n,i),l.subVectors(r,i),c.cross(l),o.fromBufferAttribute(s,p),a.fromBufferAttribute(s,d),h.fromBufferAttribute(s,m),o.add(c),a.add(c),h.add(c),s.setXYZ(p,o.x,o.y,o.z),s.setXYZ(d,a.x,a.y,a.z),s.setXYZ(m,h.x,h.y,h.z)}else for(let t=0,o=e.count;t<o;t+=3)r.fromBufferAttribute(e,t+0),i.fromBufferAttribute(e,t+1),n.fromBufferAttribute(e,t+2),c.subVectors(n,i),l.subVectors(r,i),c.cross(l),s.setXYZ(t+0,c.x,c.y,c.z),s.setXYZ(t+1,c.x,c.y,c.z),s.setXYZ(t+2,c.x,c.y,c.z);this.normalizeNormals(),s.needsUpdate=!0}}merge(t,e){if(!t||!t.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const s=this.attributes;for(const r in s){if(void 0===t.attributes[r])continue;const i=s[r].array,n=t.attributes[r],o=n.array,a=n.itemSize*e,h=Math.min(o.length,i.length-a);for(let t=0,e=a;t<h;t++,e++)i[e]=o[t]}return this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,s=t.count;e<s;e++)Ir.fromBufferAttribute(t,e),Ir.normalize(),t.setXYZ(e,Ir.x,Ir.y,Ir.z)}toNonIndexed(){function t(t,e){const s=t.array,r=t.itemSize,i=t.normalized,n=new s.constructor(e.length*r);let o=0,a=0;for(let i=0,h=e.length;i<h;i++){o=t.isInterleavedBufferAttribute?e[i]*t.data.stride+t.offset:e[i]*r;for(let t=0;t<r;t++)n[a++]=s[o++]}return new or(n,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new Er,s=this.index.array,r=this.attributes;for(const i in r){const n=t(r[i],s);e.setAttribute(i,n)}const i=this.morphAttributes;for(const r in i){const n=[],o=i[r];for(let e=0,r=o.length;e<r;e++){const r=t(o[e],s);n.push(r)}e.morphAttributes[r]=n}e.morphTargetsRelative=this.morphTargetsRelative;const n=this.groups;for(let t=0,s=n.length;t<s;t++){const s=n[t];e.addGroup(s.start,s.count,s.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const s in e)void 0!==e[s]&&(t[s]=e[s]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const s=this.attributes;for(const e in s){const r=s[e];t.data.attributes[e]=r.toJSON(t.data)}const r={};let i=!1;for(const e in this.morphAttributes){const s=this.morphAttributes[e],n=[];for(let e=0,r=s.length;e<r;e++){const r=s[e];n.push(r.toJSON(t.data))}n.length>0&&(r[e]=n,i=!0)}i&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const n=this.groups;n.length>0&&(t.data.groups=JSON.parse(JSON.stringify(n)));const o=this.boundingSphere;return null!==o&&(t.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const s=t.index;null!==s&&this.setIndex(s.clone(e));const r=t.attributes;for(const t in r){const s=r[t];this.setAttribute(t,s.clone(e))}const i=t.morphAttributes;for(const t in i){const s=[],r=i[t];for(let t=0,i=r.length;t<i;t++)s.push(r[t].clone(e));this.morphAttributes[t]=s}this.morphTargetsRelative=t.morphTargetsRelative;const n=t.groups;for(let t=0,e=n.length;t<e;t++){const e=n[t];this.addGroup(e.start,e.count,e.materialIndex)}const o=t.boundingBox;null!==o&&(this.boundingBox=o.clone());const a=t.boundingSphere;return null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,void 0!==t.parameters&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}Er.prototype.isBufferGeometry=!0;const Sr=new Ts,Ar=new ys,Rr=new cs,Cr=new Ge,Or=new Ge,_r=new Ge,Dr=new Ge,Fr=new Ge,Mr=new Ge,Pr=new Ge,Nr=new Ge,Lr=new Ge,kr=new le,Ur=new le,Hr=new le,Br=new Ge,Gr=new Ge;class jr extends zs{constructor(t=new Er,e=new rr){super(),this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,s=Object.keys(e);if(s.length>0){const t=e[s[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,s=t.length;e<s;e++){const s=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(t,e){const s=this.geometry,r=this.material,i=this.matrixWorld;if(void 0===r)return;if(null===s.boundingSphere&&s.computeBoundingSphere(),Rr.copy(s.boundingSphere),Rr.applyMatrix4(i),!1===t.ray.intersectsSphere(Rr))return;if(Sr.copy(i).invert(),Ar.copy(t.ray).applyMatrix4(Sr),null!==s.boundingBox&&!1===Ar.intersectsBox(s.boundingBox))return;let n;if(s.isBufferGeometry){const i=s.index,o=s.attributes.position,a=s.morphAttributes.position,h=s.morphTargetsRelative,c=s.attributes.uv,l=s.attributes.uv2,u=s.groups,p=s.drawRange;if(null!==i)if(Array.isArray(r))for(let s=0,d=u.length;s<d;s++){const d=u[s],m=r[d.materialIndex];for(let s=Math.max(d.start,p.start),r=Math.min(i.count,Math.min(d.start+d.count,p.start+p.count));s<r;s+=3){const r=i.getX(s),u=i.getX(s+1),p=i.getX(s+2);n=zr(this,m,t,Ar,o,a,h,c,l,r,u,p),n&&(n.faceIndex=Math.floor(s/3),n.face.materialIndex=d.materialIndex,e.push(n))}}else{for(let s=Math.max(0,p.start),u=Math.min(i.count,p.start+p.count);s<u;s+=3){const u=i.getX(s),p=i.getX(s+1),d=i.getX(s+2);n=zr(this,r,t,Ar,o,a,h,c,l,u,p,d),n&&(n.faceIndex=Math.floor(s/3),e.push(n))}}else if(void 0!==o)if(Array.isArray(r))for(let s=0,i=u.length;s<i;s++){const i=u[s],d=r[i.materialIndex];for(let s=Math.max(i.start,p.start),r=Math.min(o.count,Math.min(i.start+i.count,p.start+p.count));s<r;s+=3){n=zr(this,d,t,Ar,o,a,h,c,l,s,s+1,s+2),n&&(n.faceIndex=Math.floor(s/3),n.face.materialIndex=i.materialIndex,e.push(n))}}else{for(let s=Math.max(0,p.start),i=Math.min(o.count,p.start+p.count);s<i;s+=3){n=zr(this,r,t,Ar,o,a,h,c,l,s,s+1,s+2),n&&(n.faceIndex=Math.floor(s/3),e.push(n))}}}else s.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function zr(t,e,s,r,i,n,o,a,h,c,l,u){Cr.fromBufferAttribute(i,c),Or.fromBufferAttribute(i,l),_r.fromBufferAttribute(i,u);const p=t.morphTargetInfluences;if(n&&p){Pr.set(0,0,0),Nr.set(0,0,0),Lr.set(0,0,0);for(let t=0,e=n.length;t<e;t++){const e=p[t],s=n[t];0!==e&&(Dr.fromBufferAttribute(s,c),Fr.fromBufferAttribute(s,l),Mr.fromBufferAttribute(s,u),o?(Pr.addScaledVector(Dr,e),Nr.addScaledVector(Fr,e),Lr.addScaledVector(Mr,e)):(Pr.addScaledVector(Dr.sub(Cr),e),Nr.addScaledVector(Fr.sub(Or),e),Lr.addScaledVector(Mr.sub(_r),e)))}Cr.add(Pr),Or.add(Nr),_r.add(Lr)}t.isSkinnedMesh&&(t.boneTransform(c,Cr),t.boneTransform(l,Or),t.boneTransform(u,_r));const d=function(t,e,s,r,i,n,o,a){let h;if(h=1===e.side?r.intersectTriangle(o,n,i,!0,a):r.intersectTriangle(i,n,o,2!==e.side,a),null===h)return null;Gr.copy(a),Gr.applyMatrix4(t.matrixWorld);const c=s.ray.origin.distanceTo(Gr);return c<s.near||c>s.far?null:{distance:c,point:Gr.clone(),object:t}}(t,e,s,r,Cr,Or,_r,Br);if(d){a&&(kr.fromBufferAttribute(a,c),Ur.fromBufferAttribute(a,l),Hr.fromBufferAttribute(a,u),d.uv=tr.getUV(Br,Cr,Or,_r,kr,Ur,Hr,new le)),h&&(kr.fromBufferAttribute(h,c),Ur.fromBufferAttribute(h,l),Hr.fromBufferAttribute(h,u),d.uv2=tr.getUV(Br,Cr,Or,_r,kr,Ur,Hr,new le));const t={a:c,b:l,c:u,normal:new Ge,materialIndex:0};tr.getNormal(Cr,Or,_r,t.normal),d.face=t}return d}jr.prototype.isMesh=!0;class Vr extends Er{constructor(t=1,e=1,s=1,r=1,i=1,n=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:s,widthSegments:r,heightSegments:i,depthSegments:n};const o=this;r=Math.floor(r),i=Math.floor(i),n=Math.floor(n);const a=[],h=[],c=[],l=[];let u=0,p=0;function d(t,e,s,r,i,n,d,m,f,g,y){const T=n/f,v=d/g,b=n/2,w=d/2,x=m/2,I=f+1,E=g+1;let S=0,A=0;const R=new Ge;for(let n=0;n<E;n++){const o=n*v-w;for(let a=0;a<I;a++){const u=a*T-b;R[t]=u*r,R[e]=o*i,R[s]=x,h.push(R.x,R.y,R.z),R[t]=0,R[e]=0,R[s]=m>0?1:-1,c.push(R.x,R.y,R.z),l.push(a/f),l.push(1-n/g),S+=1}}for(let t=0;t<g;t++)for(let e=0;e<f;e++){const s=u+e+I*t,r=u+e+I*(t+1),i=u+(e+1)+I*(t+1),n=u+(e+1)+I*t;a.push(s,r,n),a.push(r,i,n),A+=6}o.addGroup(p,A,y),p+=A,u+=S}d("z","y","x",-1,-1,s,e,t,n,i,0),d("z","y","x",1,-1,s,e,-t,n,i,1),d("x","z","y",1,1,t,s,e,r,n,2),d("x","z","y",1,-1,t,s,-e,r,n,3),d("x","y","z",1,-1,t,e,s,r,i,4),d("x","y","z",-1,-1,t,e,-s,r,i,5),this.setIndex(a),this.setAttribute("position",new fr(h,3)),this.setAttribute("normal",new fr(c,3)),this.setAttribute("uv",new fr(l,2))}static fromJSON(t){return new Vr(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Wr(t){const e={};for(const s in t){e[s]={};for(const r in t[s]){const i=t[s][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[s][r]=i.clone():Array.isArray(i)?e[s][r]=i.slice():e[s][r]=i}}return e}function Yr(t){const e={};for(let s=0;s<t.length;s++){const r=Wr(t[s]);for(const t in r)e[t]=r[t]}return e}const Xr={clone:Wr,merge:Yr};class qr extends sr{constructor(t){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Wr(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const s in this.uniforms){const r=this.uniforms[s].value;r&&r.isTexture?e.uniforms[s]={type:"t",value:r.toJSON(t).uuid}:r&&r.isColor?e.uniforms[s]={type:"c",value:r.getHex()}:r&&r.isVector2?e.uniforms[s]={type:"v2",value:r.toArray()}:r&&r.isVector3?e.uniforms[s]={type:"v3",value:r.toArray()}:r&&r.isVector4?e.uniforms[s]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?e.uniforms[s]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?e.uniforms[s]={type:"m4",value:r.toArray()}:e.uniforms[s]={value:r}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const s={};for(const t in this.extensions)!0===this.extensions[t]&&(s[t]=!0);return Object.keys(s).length>0&&(e.extensions=s),e}}qr.prototype.isShaderMaterial=!0;class Kr extends zs{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new Ts,this.projectionMatrix=new Ts,this.projectionMatrixInverse=new Ts}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}Kr.prototype.isCamera=!0;class Jr extends Kr{constructor(t=50,e=1,s=.1,r=2e3){super(),this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=s,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*ee*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*te*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*ee*Math.atan(Math.tan(.5*te*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,s,r,i,n){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=s,this.view.offsetY=r,this.view.width=i,this.view.height=n,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*te*this.fov)/this.zoom,s=2*e,r=this.aspect*s,i=-.5*r;const n=this.view;if(null!==this.view&&this.view.enabled){const t=n.fullWidth,o=n.fullHeight;i+=n.offsetX*r/t,e-=n.offsetY*s/o,r*=n.width/t,s*=n.height/o}const o=this.filmOffset;0!==o&&(i+=t*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,e,e-s,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}Jr.prototype.isPerspectiveCamera=!0;const $r=90;class Zr extends zs{constructor(t,e,s){if(super(),this.type="CubeCamera",!0!==s.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=s;const r=new Jr($r,1,t,e);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new Ge(1,0,0)),this.add(r);const i=new Jr($r,1,t,e);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new Ge(-1,0,0)),this.add(i);const n=new Jr($r,1,t,e);n.layers=this.layers,n.up.set(0,0,1),n.lookAt(new Ge(0,1,0)),this.add(n);const o=new Jr($r,1,t,e);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new Ge(0,-1,0)),this.add(o);const a=new Jr($r,1,t,e);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new Ge(0,0,1)),this.add(a);const h=new Jr($r,1,t,e);h.layers=this.layers,h.up.set(0,-1,0),h.lookAt(new Ge(0,0,-1)),this.add(h)}update(t,e){null===this.parent&&this.updateMatrixWorld();const s=this.renderTarget,[r,i,n,o,a,h]=this.children,c=t.getRenderTarget(),l=t.toneMapping,u=t.xr.enabled;t.toneMapping=0,t.xr.enabled=!1;const p=s.texture.generateMipmaps;s.texture.generateMipmaps=!1,t.setRenderTarget(s,0),t.render(e,r),t.setRenderTarget(s,1),t.render(e,i),t.setRenderTarget(s,2),t.render(e,n),t.setRenderTarget(s,3),t.render(e,o),t.setRenderTarget(s,4),t.render(e,a),s.texture.generateMipmaps=p,t.setRenderTarget(s,5),t.render(e,h),t.setRenderTarget(c),t.toneMapping=l,t.xr.enabled=u,s.texture.needsPMREMUpdate=!0}}class Qr extends Fe{constructor(t,e,s,r,i,n,o,a,h,c){super(t=void 0!==t?t:[],e=void 0!==e?e:L,s,r,i,n,o,a,h,c),this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}Qr.prototype.isCubeTexture=!0;class ti extends Pe{constructor(t,e={}){super(t,t,e);const s={width:t,height:t,depth:1},r=[s,s,s,s,s,s];this.texture=new Qr(r,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:X}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const s={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},r=new Vr(5,5,5),i=new qr({name:"CubemapFromEquirect",uniforms:Wr(s.uniforms),vertexShader:s.vertexShader,fragmentShader:s.fragmentShader,side:1,blending:0});i.uniforms.tEquirect.value=e;const n=new jr(r,i),o=e.minFilter;e.minFilter===K&&(e.minFilter=X);return new Zr(1,10,this).update(t,n),e.minFilter=o,n.geometry.dispose(),n.material.dispose(),this}clear(t,e,s,r){const i=t.getRenderTarget();for(let i=0;i<6;i++)t.setRenderTarget(this,i),t.clear(e,s,r);t.setRenderTarget(i)}}ti.prototype.isWebGLCubeRenderTarget=!0;const ei=new Ge,si=new Ge,ri=new ue;class ii{constructor(t=new Ge(1,0,0),e=0){this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,s,r){return this.normal.set(t,e,s),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,s){const r=ei.subVectors(s,e).cross(si.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){const s=t.delta(ei),r=this.normal.dot(s);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const i=-(t.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:e.copy(s).multiplyScalar(i).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),s=this.distanceToPoint(t.end);return e<0&&s>0||s<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const s=e||ri.getNormalMatrix(t),r=this.coplanarPoint(ei).applyMatrix4(t),i=this.normal.applyMatrix3(s).normalize();return this.constant=-r.dot(i),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}ii.prototype.isPlane=!0;const ni=new cs,oi=new Ge;class ai{constructor(t=new ii,e=new ii,s=new ii,r=new ii,i=new ii,n=new ii){this.planes=[t,e,s,r,i,n]}set(t,e,s,r,i,n){const o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(s),o[3].copy(r),o[4].copy(i),o[5].copy(n),this}copy(t){const e=this.planes;for(let s=0;s<6;s++)e[s].copy(t.planes[s]);return this}setFromProjectionMatrix(t){const e=this.planes,s=t.elements,r=s[0],i=s[1],n=s[2],o=s[3],a=s[4],h=s[5],c=s[6],l=s[7],u=s[8],p=s[9],d=s[10],m=s[11],f=s[12],g=s[13],y=s[14],T=s[15];return e[0].setComponents(o-r,l-a,m-u,T-f).normalize(),e[1].setComponents(o+r,l+a,m+u,T+f).normalize(),e[2].setComponents(o+i,l+h,m+p,T+g).normalize(),e[3].setComponents(o-i,l-h,m-p,T-g).normalize(),e[4].setComponents(o-n,l-c,m-d,T-y).normalize(),e[5].setComponents(o+n,l+c,m+d,T+y).normalize(),this}intersectsObject(t){const e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),ni.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(ni)}intersectsSprite(t){return ni.center.set(0,0,0),ni.radius=.7071067811865476,ni.applyMatrix4(t.matrixWorld),this.intersectsSphere(ni)}intersectsSphere(t){const e=this.planes,s=t.center,r=-t.radius;for(let t=0;t<6;t++){if(e[t].distanceToPoint(s)<r)return!1}return!0}intersectsBox(t){const e=this.planes;for(let s=0;s<6;s++){const r=e[s];if(oi.x=r.normal.x>0?t.max.x:t.min.x,oi.y=r.normal.y>0?t.max.y:t.min.y,oi.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(oi)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let s=0;s<6;s++)if(e[s].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function hi(){let t=null,e=!1,s=null,r=null;function i(e,n){s(e,n),r=t.requestAnimationFrame(i)}return{start:function(){!0!==e&&null!==s&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(t){s=t},setContext:function(e){t=e}}}function ci(t,e){const s=e.isWebGL2,r=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),r.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);const s=r.get(e);s&&(t.deleteBuffer(s.buffer),r.delete(e))},update:function(e,i){if(e.isGLBufferAttribute){const t=r.get(e);return void((!t||t.version<e.version)&&r.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version}))}e.isInterleavedBufferAttribute&&(e=e.data);const n=r.get(e);void 0===n?r.set(e,function(e,r){const i=e.array,n=e.usage,o=t.createBuffer();let a;if(t.bindBuffer(r,o),t.bufferData(r,i,n),e.onUploadCallback(),i instanceof Float32Array)a=5126;else if(i instanceof Uint16Array)if(e.isFloat16BufferAttribute){if(!s)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");a=5131}else a=5123;else if(i instanceof Int16Array)a=5122;else if(i instanceof Uint32Array)a=5125;else if(i instanceof Int32Array)a=5124;else if(i instanceof Int8Array)a=5120;else if(i instanceof Uint8Array)a=5121;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);a=5121}return{buffer:o,type:a,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version}}(e,i)):n.version<e.version&&(!function(e,r,i){const n=r.array,o=r.updateRange;t.bindBuffer(i,e),-1===o.count?t.bufferSubData(i,0,n):(s?t.bufferSubData(i,o.offset*n.BYTES_PER_ELEMENT,n,o.offset,o.count):t.bufferSubData(i,o.offset*n.BYTES_PER_ELEMENT,n.subarray(o.offset,o.offset+o.count)),o.count=-1)}(n.buffer,e,i),n.version=e.version)}}}class li extends Er{constructor(t=1,e=1,s=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:s,heightSegments:r};const i=t/2,n=e/2,o=Math.floor(s),a=Math.floor(r),h=o+1,c=a+1,l=t/o,u=e/a,p=[],d=[],m=[],f=[];for(let t=0;t<c;t++){const e=t*u-n;for(let s=0;s<h;s++){const r=s*l-i;d.push(r,-e,0),m.push(0,0,1),f.push(s/o),f.push(1-t/a)}}for(let t=0;t<a;t++)for(let e=0;e<o;e++){const s=e+h*t,r=e+h*(t+1),i=e+1+h*(t+1),n=e+1+h*t;p.push(s,r,n),p.push(r,i,n)}this.setIndex(p),this.setAttribute("position",new fr(d,3)),this.setAttribute("normal",new fr(m,3)),this.setAttribute("uv",new fr(f,2))}static fromJSON(t){return new li(t.width,t.height,t.widthSegments,t.heightSegments)}}const ui={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},pi={common:{diffuse:{value:new Ae(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new ue},uv2Transform:{value:new ue},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new le(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ae(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ae(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ue}},sprite:{diffuse:{value:new Ae(16777215)},opacity:{value:1},center:{value:new le(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ue}}},di={basic:{uniforms:Yr([pi.common,pi.specularmap,pi.envmap,pi.aomap,pi.lightmap,pi.fog]),vertexShader:ui.meshbasic_vert,fragmentShader:ui.meshbasic_frag},lambert:{uniforms:Yr([pi.common,pi.specularmap,pi.envmap,pi.aomap,pi.lightmap,pi.emissivemap,pi.fog,pi.lights,{emissive:{value:new Ae(0)}}]),vertexShader:ui.meshlambert_vert,fragmentShader:ui.meshlambert_frag},phong:{uniforms:Yr([pi.common,pi.specularmap,pi.envmap,pi.aomap,pi.lightmap,pi.emissivemap,pi.bumpmap,pi.normalmap,pi.displacementmap,pi.fog,pi.lights,{emissive:{value:new Ae(0)},specular:{value:new Ae(1118481)},shininess:{value:30}}]),vertexShader:ui.meshphong_vert,fragmentShader:ui.meshphong_frag},standard:{uniforms:Yr([pi.common,pi.envmap,pi.aomap,pi.lightmap,pi.emissivemap,pi.bumpmap,pi.normalmap,pi.displacementmap,pi.roughnessmap,pi.metalnessmap,pi.fog,pi.lights,{emissive:{value:new Ae(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ui.meshphysical_vert,fragmentShader:ui.meshphysical_frag},toon:{uniforms:Yr([pi.common,pi.aomap,pi.lightmap,pi.emissivemap,pi.bumpmap,pi.normalmap,pi.displacementmap,pi.gradientmap,pi.fog,pi.lights,{emissive:{value:new Ae(0)}}]),vertexShader:ui.meshtoon_vert,fragmentShader:ui.meshtoon_frag},matcap:{uniforms:Yr([pi.common,pi.bumpmap,pi.normalmap,pi.displacementmap,pi.fog,{matcap:{value:null}}]),vertexShader:ui.meshmatcap_vert,fragmentShader:ui.meshmatcap_frag},points:{uniforms:Yr([pi.points,pi.fog]),vertexShader:ui.points_vert,fragmentShader:ui.points_frag},dashed:{uniforms:Yr([pi.common,pi.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ui.linedashed_vert,fragmentShader:ui.linedashed_frag},depth:{uniforms:Yr([pi.common,pi.displacementmap]),vertexShader:ui.depth_vert,fragmentShader:ui.depth_frag},normal:{uniforms:Yr([pi.common,pi.bumpmap,pi.normalmap,pi.displacementmap,{opacity:{value:1}}]),vertexShader:ui.meshnormal_vert,fragmentShader:ui.meshnormal_frag},sprite:{uniforms:Yr([pi.sprite,pi.fog]),vertexShader:ui.sprite_vert,fragmentShader:ui.sprite_frag},background:{uniforms:{uvTransform:{value:new ue},t2D:{value:null}},vertexShader:ui.background_vert,fragmentShader:ui.background_frag},cube:{uniforms:Yr([pi.envmap,{opacity:{value:1}}]),vertexShader:ui.cube_vert,fragmentShader:ui.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ui.equirect_vert,fragmentShader:ui.equirect_frag},distanceRGBA:{uniforms:Yr([pi.common,pi.displacementmap,{referencePosition:{value:new Ge},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ui.distanceRGBA_vert,fragmentShader:ui.distanceRGBA_frag},shadow:{uniforms:Yr([pi.lights,pi.fog,{color:{value:new Ae(0)},opacity:{value:1}}]),vertexShader:ui.shadow_vert,fragmentShader:ui.shadow_frag}};function mi(t,e,s,r,i,n){const o=new Ae(0);let a,h,c=!0===i?0:1,l=null,u=0,p=null;function d(t,e){s.buffers.color.setClear(t.r,t.g,t.b,e,n)}return{getClearColor:function(){return o},setClearColor:function(t,e=1){o.set(t),c=e,d(o,c)},getClearAlpha:function(){return c},setClearAlpha:function(t){c=t,d(o,c)},render:function(s,i){let n=!1,m=!0===i.isScene?i.background:null;m&&m.isTexture&&(m=e.get(m));const f=t.xr,g=f.getSession&&f.getSession();g&&"additive"===g.environmentBlendMode&&(m=null),null===m?d(o,c):m&&m.isColor&&(d(m,1),n=!0),(t.autoClear||n)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),m&&(m.isCubeTexture||m.mapping===B)?(void 0===h&&(h=new jr(new Vr(1,1,1),new qr({name:"BackgroundCubeMaterial",uniforms:Wr(di.cube.uniforms),vertexShader:di.cube.vertexShader,fragmentShader:di.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(t,e,s){this.matrixWorld.copyPosition(s.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(h)),h.material.uniforms.envMap.value=m,h.material.uniforms.flipEnvMap.value=m.isCubeTexture&&!1===m.isRenderTargetTexture?-1:1,l===m&&u===m.version&&p===t.toneMapping||(h.material.needsUpdate=!0,l=m,u=m.version,p=t.toneMapping),h.layers.enableAll(),s.unshift(h,h.geometry,h.material,0,0,null)):m&&m.isTexture&&(void 0===a&&(a=new jr(new li(2,2),new qr({name:"BackgroundMaterial",uniforms:Wr(di.background.uniforms),vertexShader:di.background.vertexShader,fragmentShader:di.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(a)),a.material.uniforms.t2D.value=m,!0===m.matrixAutoUpdate&&m.updateMatrix(),a.material.uniforms.uvTransform.value.copy(m.matrix),l===m&&u===m.version&&p===t.toneMapping||(a.material.needsUpdate=!0,l=m,u=m.version,p=t.toneMapping),a.layers.enableAll(),s.unshift(a,a.geometry,a.material,0,0,null))}}}function fi(t,e,s,r){const i=t.getParameter(34921),n=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||null!==n,a={},h=d(null);let c=h,l=!1;function u(e){return r.isWebGL2?t.bindVertexArray(e):n.bindVertexArrayOES(e)}function p(e){return r.isWebGL2?t.deleteVertexArray(e):n.deleteVertexArrayOES(e)}function d(t){const e=[],s=[],r=[];for(let t=0;t<i;t++)e[t]=0,s[t]=0,r[t]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:s,attributeDivisors:r,object:t,attributes:{},index:null}}function m(){const t=c.newAttributes;for(let e=0,s=t.length;e<s;e++)t[e]=0}function f(t){g(t,0)}function g(s,i){const n=c.newAttributes,o=c.enabledAttributes,a=c.attributeDivisors;if(n[s]=1,0===o[s]&&(t.enableVertexAttribArray(s),o[s]=1),a[s]!==i){(r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](s,i),a[s]=i}}function y(){const e=c.newAttributes,s=c.enabledAttributes;for(let r=0,i=s.length;r<i;r++)s[r]!==e[r]&&(t.disableVertexAttribArray(r),s[r]=0)}function T(e,s,i,n,o,a){!0!==r.isWebGL2||5124!==i&&5125!==i?t.vertexAttribPointer(e,s,i,n,o,a):t.vertexAttribIPointer(e,s,i,o,a)}function v(){b(),l=!0,c!==h&&(c=h,u(c.object))}function b(){h.geometry=null,h.program=null,h.wireframe=!1}return{setup:function(i,h,p,v,b){let w=!1;if(o){const e=function(e,s,i){const o=!0===i.wireframe;let h=a[e.id];void 0===h&&(h={},a[e.id]=h);let c=h[s.id];void 0===c&&(c={},h[s.id]=c);let l=c[o];void 0===l&&(l=d(r.isWebGL2?t.createVertexArray():n.createVertexArrayOES()),c[o]=l);return l}(v,p,h);c!==e&&(c=e,u(c.object)),w=function(t,e,s,r){const i=c.attributes,n=e.attributes;let o=0;const a=s.getAttributes();for(const e in a){if(a[e].location>=0){const s=i[e];let r=n[e];if(void 0===r&&("instanceMatrix"===e&&t.instanceMatrix&&(r=t.instanceMatrix),"instanceColor"===e&&t.instanceColor&&(r=t.instanceColor)),void 0===s)return!0;if(s.attribute!==r)return!0;if(r&&s.data!==r.data)return!0;o++}}return c.attributesNum!==o||c.index!==r}(i,v,p,b),w&&function(t,e,s,r){const i={},n=e.attributes;let o=0;const a=s.getAttributes();for(const e in a){if(a[e].location>=0){let s=n[e];void 0===s&&("instanceMatrix"===e&&t.instanceMatrix&&(s=t.instanceMatrix),"instanceColor"===e&&t.instanceColor&&(s=t.instanceColor));const r={};r.attribute=s,s&&s.data&&(r.data=s.data),i[e]=r,o++}}c.attributes=i,c.attributesNum=o,c.index=r}(i,v,p,b)}else{const t=!0===h.wireframe;c.geometry===v.id&&c.program===p.id&&c.wireframe===t||(c.geometry=v.id,c.program=p.id,c.wireframe=t,w=!0)}null!==b&&s.update(b,34963),(w||l)&&(l=!1,function(i,n,o,a){if(!1===r.isWebGL2&&(i.isInstancedMesh||a.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;m();const h=a.attributes,c=o.getAttributes(),l=n.defaultAttributeValues;for(const e in c){const r=c[e];if(r.location>=0){let n=h[e];if(void 0===n&&("instanceMatrix"===e&&i.instanceMatrix&&(n=i.instanceMatrix),"instanceColor"===e&&i.instanceColor&&(n=i.instanceColor)),void 0!==n){const e=n.normalized,o=n.itemSize,h=s.get(n);if(void 0===h)continue;const c=h.buffer,l=h.type,u=h.bytesPerElement;if(n.isInterleavedBufferAttribute){const s=n.data,h=s.stride,p=n.offset;if(s.isInstancedInterleavedBuffer){for(let t=0;t<r.locationSize;t++)g(r.location+t,s.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=s.meshPerAttribute*s.count)}else for(let t=0;t<r.locationSize;t++)f(r.location+t);t.bindBuffer(34962,c);for(let t=0;t<r.locationSize;t++)T(r.location+t,o/r.locationSize,l,e,h*u,(p+o/r.locationSize*t)*u)}else{if(n.isInstancedBufferAttribute){for(let t=0;t<r.locationSize;t++)g(r.location+t,n.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let t=0;t<r.locationSize;t++)f(r.location+t);t.bindBuffer(34962,c);for(let t=0;t<r.locationSize;t++)T(r.location+t,o/r.locationSize,l,e,o*u,o/r.locationSize*t*u)}}else if(void 0!==l){const s=l[e];if(void 0!==s)switch(s.length){case 2:t.vertexAttrib2fv(r.location,s);break;case 3:t.vertexAttrib3fv(r.location,s);break;case 4:t.vertexAttrib4fv(r.location,s);break;default:t.vertexAttrib1fv(r.location,s)}}}}y()}(i,h,p,v),null!==b&&t.bindBuffer(34963,s.get(b).buffer))},reset:v,resetDefaultState:b,dispose:function(){v();for(const t in a){const e=a[t];for(const t in e){const s=e[t];for(const t in s)p(s[t].object),delete s[t];delete e[t]}delete a[t]}},releaseStatesOfGeometry:function(t){if(void 0===a[t.id])return;const e=a[t.id];for(const t in e){const s=e[t];for(const t in s)p(s[t].object),delete s[t];delete e[t]}delete a[t.id]},releaseStatesOfProgram:function(t){for(const e in a){const s=a[e];if(void 0===s[t.id])continue;const r=s[t.id];for(const t in r)p(r[t].object),delete r[t];delete s[t.id]}},initAttributes:m,enableAttribute:f,disableUnusedAttributes:y}}function gi(t,e,s,r){const i=r.isWebGL2;let n;this.setMode=function(t){n=t},this.render=function(e,r){t.drawArrays(n,e,r),s.update(r,n,1)},this.renderInstances=function(r,o,a){if(0===a)return;let h,c;if(i)h=t,c="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===h)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[c](n,r,o,a),s.update(o,n,a)}}function yi(t,e,s){let r;function i(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const n="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext;let o=void 0!==s.precision?s.precision:"highp";const a=i(o);a!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",a,"instead."),o=a);const h=n||e.has("WEBGL_draw_buffers"),c=!0===s.logarithmicDepthBuffer,l=t.getParameter(34930),u=t.getParameter(35660),p=t.getParameter(3379),d=t.getParameter(34076),m=t.getParameter(34921),f=t.getParameter(36347),g=t.getParameter(36348),y=t.getParameter(36349),T=u>0,v=n||e.has("OES_texture_float");return{isWebGL2:n,drawBuffers:h,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){const s=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(s.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:o,logarithmicDepthBuffer:c,maxTextures:l,maxVertexTextures:u,maxTextureSize:p,maxCubemapSize:d,maxAttributes:m,maxVertexUniforms:f,maxVaryings:g,maxFragmentUniforms:y,vertexTextures:T,floatFragmentTextures:v,floatVertexTextures:T&&v,maxSamples:n?t.getParameter(36183):0}}function Ti(t){const e=this;let s=null,r=0,i=!1,n=!1;const o=new ii,a=new ue,h={value:null,needsUpdate:!1};function c(){h.value!==s&&(h.value=s,h.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function l(t,s,r,i){const n=null!==t?t.length:0;let c=null;if(0!==n){if(c=h.value,!0!==i||null===c){const e=r+4*n,i=s.matrixWorldInverse;a.getNormalMatrix(i),(null===c||c.length<e)&&(c=new Float32Array(e));for(let e=0,s=r;e!==n;++e,s+=4)o.copy(t[e]).applyMatrix4(i,a),o.normal.toArray(c,s),c[s+3]=o.constant}h.value=c,h.needsUpdate=!0}return e.numPlanes=n,e.numIntersection=0,c}this.uniform=h,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e,n){const o=0!==t.length||e||0!==r||i;return i=e,s=l(t,n,0),r=t.length,o},this.beginShadows=function(){n=!0,l(null)},this.endShadows=function(){n=!1,c()},this.setState=function(e,o,a){const u=e.clippingPlanes,p=e.clipIntersection,d=e.clipShadows,m=t.get(e);if(!i||null===u||0===u.length||n&&!d)n?l(null):c();else{const t=n?0:r,e=4*t;let i=m.clippingState||null;h.value=i,i=l(u,o,e,a);for(let t=0;t!==e;++t)i[t]=s[t];m.clippingState=i,this.numIntersection=p?this.numPlanes:0,this.numPlanes+=t}}}function vi(t){let e=new WeakMap;function s(t,e){return e===U?t.mapping=L:e===H&&(t.mapping=k),t}function r(t){const s=t.target;s.removeEventListener("dispose",r);const i=e.get(s);void 0!==i&&(e.delete(s),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){const n=i.mapping;if(n===U||n===H){if(e.has(i)){return s(e.get(i).texture,i.mapping)}{const n=i.image;if(n&&n.height>0){const o=new ti(n.height/2);return o.fromEquirectangularTexture(t,i),e.set(i,o),i.addEventListener("dispose",r),s(o.texture,i.mapping)}return null}}}return i},dispose:function(){e=new WeakMap}}}di.physical={uniforms:Yr([di.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new le(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new Ae(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new le},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Ae(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Ae(1,1,1)},specularColorMap:{value:null}}]),vertexShader:ui.meshphysical_vert,fragmentShader:ui.meshphysical_frag};class bi extends Kr{constructor(t=-1,e=1,s=1,r=-1,i=.1,n=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=s,this.bottom=r,this.near=i,this.far=n,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,s,r,i,n){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=s,this.view.offsetY=r,this.view.width=i,this.view.height=n,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),s=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=s-t,n=s+t,o=r+e,a=r-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=t*this.view.offsetX,n=i+t*this.view.width,o-=e*this.view.offsetY,a=o-e*this.view.height}this.projectionMatrix.makeOrthographic(i,n,o,a,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}bi.prototype.isOrthographicCamera=!0;const wi=[.125,.215,.35,.446,.526,.582],xi=20,Ii=new bi,Ei=new Ae;let Si=null;const Ai=(1+Math.sqrt(5))/2,Ri=1/Ai,Ci=[new Ge(1,1,1),new Ge(-1,1,1),new Ge(1,1,-1),new Ge(-1,1,-1),new Ge(0,Ai,Ri),new Ge(0,Ai,-Ri),new Ge(Ri,0,Ai),new Ge(-Ri,0,Ai),new Ge(Ai,Ri,0),new Ge(-Ai,Ri,0)];class Oi{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,s=.1,r=100){Si=this._renderer.getRenderTarget(),this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(t,s,r,i),e>0&&this._blur(i,0,0,e),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Mi(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Fi(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(Si),t.scissorTest=!1,Di(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===L||t.mapping===k?this._setSize(0===t.image.length?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),Si=this._renderer.getRenderTarget();const s=e||this._allocateTargets();return this._textureToCubeUV(t,s),this._applyPMREM(s),this._cleanup(s),s}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,s={magFilter:X,minFilter:X,generateMipmaps:!1,type:tt,format:st,encoding:jt,depthBuffer:!1},r=_i(t,e,s);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=_i(t,e,s);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(t){const e=[],s=[],r=[];let i=t;const n=t-4+1+wi.length;for(let o=0;o<n;o++){const n=Math.pow(2,i);s.push(n);let a=1/n;o>t-4?a=wi[o-t+4-1]:0===o&&(a=0),r.push(a);const h=1/(n-2),c=-h,l=1+h,u=[c,c,l,c,l,l,c,c,l,l,c,l],p=6,d=6,m=3,f=2,g=1,y=new Float32Array(m*d*p),T=new Float32Array(f*d*p),v=new Float32Array(g*d*p);for(let t=0;t<p;t++){const e=t%3*2/3-1,s=t>2?0:-1,r=[e,s,0,e+2/3,s,0,e+2/3,s+1,0,e,s,0,e+2/3,s+1,0,e,s+1,0];y.set(r,m*d*t),T.set(u,f*d*t);const i=[t,t,t,t,t,t];v.set(i,g*d*t)}const b=new Er;b.setAttribute("position",new or(y,m)),b.setAttribute("uv",new or(T,f)),b.setAttribute("faceIndex",new or(v,g)),e.push(b),i>4&&i--}return{lodPlanes:e,sizeLods:s,sigmas:r}}(r)),this._blurMaterial=function(t,e,s){const r=new Float32Array(xi),i=new Ge(0,1,0);return new qr({name:"SphericalGaussianBlur",defines:{n:xi,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/s,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:Pi(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(r,t,e)}return r}_compileMaterial(t){const e=new jr(this._lodPlanes[0],t);this._renderer.compile(e,Ii)}_sceneToCubeUV(t,e,s,r){const i=new Jr(90,1,e,s),n=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],a=this._renderer,h=a.autoClear,c=a.toneMapping;a.getClearColor(Ei),a.toneMapping=0,a.autoClear=!1;const l=new rr({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),u=new jr(new Vr,l);let p=!1;const d=t.background;d?d.isColor&&(l.color.copy(d),t.background=null,p=!0):(l.color.copy(Ei),p=!0);for(let e=0;e<6;e++){const s=e%3;0===s?(i.up.set(0,n[e],0),i.lookAt(o[e],0,0)):1===s?(i.up.set(0,0,n[e]),i.lookAt(0,o[e],0)):(i.up.set(0,n[e],0),i.lookAt(0,0,o[e]));const h=this._cubeSize;Di(r,s*h,e>2?h:0,h,h),a.setRenderTarget(r),p&&a.render(u,i),a.render(t,i)}u.geometry.dispose(),u.material.dispose(),a.toneMapping=c,a.autoClear=h,t.background=d}_textureToCubeUV(t,e){const s=this._renderer,r=t.mapping===L||t.mapping===k;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=Mi()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Fi());const i=r?this._cubemapMaterial:this._equirectMaterial,n=new jr(this._lodPlanes[0],i);i.uniforms.envMap.value=t;const o=this._cubeSize;Di(e,0,0,3*o,2*o),s.setRenderTarget(e),s.render(n,Ii)}_applyPMREM(t){const e=this._renderer,s=e.autoClear;e.autoClear=!1;for(let e=1;e<this._lodPlanes.length;e++){const s=Math.sqrt(this._sigmas[e]*this._sigmas[e]-this._sigmas[e-1]*this._sigmas[e-1]),r=Ci[(e-1)%Ci.length];this._blur(t,e-1,e,s,r)}e.autoClear=s}_blur(t,e,s,r,i){const n=this._pingPongRenderTarget;this._halfBlur(t,n,e,s,r,"latitudinal",i),this._halfBlur(n,t,s,s,r,"longitudinal",i)}_halfBlur(t,e,s,r,i,n,o){const a=this._renderer,h=this._blurMaterial;"latitudinal"!==n&&"longitudinal"!==n&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new jr(this._lodPlanes[r],h),l=h.uniforms,u=this._sizeLods[s]-1,p=isFinite(i)?Math.PI/(2*u):2*Math.PI/39,d=i/p,m=isFinite(i)?1+Math.floor(3*d):xi;m>xi&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${m} samples when the maximum is set to 20`);const f=[];let g=0;for(let t=0;t<xi;++t){const e=t/d,s=Math.exp(-e*e/2);f.push(s),0===t?g+=s:t<m&&(g+=2*s)}for(let t=0;t<f.length;t++)f[t]=f[t]/g;l.envMap.value=t.texture,l.samples.value=m,l.weights.value=f,l.latitudinal.value="latitudinal"===n,o&&(l.poleAxis.value=o);const{_lodMax:y}=this;l.dTheta.value=p,l.mipInt.value=y-s;const T=this._sizeLods[r];Di(e,3*T*(r>y-4?r-y+4:0),4*(this._cubeSize-T),3*T,2*T),a.setRenderTarget(e),a.render(c,Ii)}}function _i(t,e,s){const r=new Pe(t,e,s);return r.texture.mapping=B,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Di(t,e,s,r,i){t.viewport.set(e,s,r,i),t.scissor.set(e,s,r,i)}function Fi(){return new qr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Pi(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Mi(){return new qr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Pi(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Pi(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function Ni(t){let e=new WeakMap,s=null;function r(t){const s=t.target;s.removeEventListener("dispose",r);const i=e.get(s);void 0!==i&&(e.delete(s),i.dispose())}return{get:function(i){if(i&&i.isTexture){const n=i.mapping,o=n===U||n===H,a=n===L||n===k;if(o||a){if(i.isRenderTargetTexture&&!0===i.needsPMREMUpdate){i.needsPMREMUpdate=!1;let r=e.get(i);return null===s&&(s=new Oi(t)),r=o?s.fromEquirectangular(i,r):s.fromCubemap(i,r),e.set(i,r),r.texture}if(e.has(i))return e.get(i).texture;{const n=i.image;if(o&&n&&n.height>0||a&&n&&function(t){let e=0;const s=6;for(let r=0;r<s;r++)void 0!==t[r]&&e++;return e===s}(n)){null===s&&(s=new Oi(t));const n=o?s.fromEquirectangular(i):s.fromCubemap(i);return e.set(i,n),i.addEventListener("dispose",r),n.texture}return null}}}return i},dispose:function(){e=new WeakMap,null!==s&&(s.dispose(),s=null)}}}function Li(t){const e={};function s(s){if(void 0!==e[s])return e[s];let r;switch(s){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(s)}return e[s]=r,r}return{has:function(t){return null!==s(t)},init:function(t){t.isWebGL2?s("EXT_color_buffer_float"):(s("WEBGL_depth_texture"),s("OES_texture_float"),s("OES_texture_half_float"),s("OES_texture_half_float_linear"),s("OES_standard_derivatives"),s("OES_element_index_uint"),s("OES_vertex_array_object"),s("ANGLE_instanced_arrays")),s("OES_texture_float_linear"),s("EXT_color_buffer_half_float"),s("WEBGL_multisampled_render_to_texture")},get:function(t){const e=s(t);return null===e&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function ki(t,e,s,r){const i={},n=new WeakMap;function o(t){const a=t.target;null!==a.index&&e.remove(a.index);for(const t in a.attributes)e.remove(a.attributes[t]);a.removeEventListener("dispose",o),delete i[a.id];const h=n.get(a);h&&(e.remove(h),n.delete(a)),r.releaseStatesOfGeometry(a),!0===a.isInstancedBufferGeometry&&delete a._maxInstanceCount,s.memory.geometries--}function a(t){const s=[],r=t.index,i=t.attributes.position;let o=0;if(null!==r){const t=r.array;o=r.version;for(let e=0,r=t.length;e<r;e+=3){const r=t[e+0],i=t[e+1],n=t[e+2];s.push(r,i,i,n,n,r)}}else{const t=i.array;o=i.version;for(let e=0,r=t.length/3-1;e<r;e+=3){const t=e+0,r=e+1,i=e+2;s.push(t,r,r,i,i,t)}}const a=new(pe(s)?dr:ur)(s,1);a.version=o;const h=n.get(t);h&&e.remove(h),n.set(t,a)}return{get:function(t,e){return!0===i[e.id]||(e.addEventListener("dispose",o),i[e.id]=!0,s.memory.geometries++),e},update:function(t){const s=t.attributes;for(const t in s)e.update(s[t],34962);const r=t.morphAttributes;for(const t in r){const s=r[t];for(let t=0,r=s.length;t<r;t++)e.update(s[t],34962)}},getWireframeAttribute:function(t){const e=n.get(t);if(e){const s=t.index;null!==s&&e.version<s.version&&a(t)}else a(t);return n.get(t)}}}function Ui(t,e,s,r){const i=r.isWebGL2;let n,o,a;this.setMode=function(t){n=t},this.setIndex=function(t){o=t.type,a=t.bytesPerElement},this.render=function(e,r){t.drawElements(n,r,o,e*a),s.update(r,n,1)},this.renderInstances=function(r,h,c){if(0===c)return;let l,u;if(i)l=t,u="drawElementsInstanced";else if(l=e.get("ANGLE_instanced_arrays"),u="drawElementsInstancedANGLE",null===l)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[u](n,h,o,r*a,c),s.update(h,n,c)}}function Hi(t){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,s,r){switch(e.calls++,s){case 4:e.triangles+=r*(t/3);break;case 1:e.lines+=r*(t/2);break;case 3:e.lines+=r*(t-1);break;case 2:e.lines+=r*t;break;case 0:e.points+=r*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s)}}}}function Bi(t,e){return t[0]-e[0]}function Gi(t,e){return Math.abs(e[1])-Math.abs(t[1])}function ji(t,e){let s=1;const r=e.isInterleavedBufferAttribute?e.data.array:e.array;r instanceof Int8Array?s=127:r instanceof Int16Array?s=32767:r instanceof Int32Array?s=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),t.divideScalar(s)}function zi(t,e,s){const r={},i=new Float32Array(8),n=new WeakMap,o=new Me,a=[];for(let t=0;t<8;t++)a[t]=[t,0];return{update:function(h,c,l,u){const p=h.morphTargetInfluences;if(!0===e.isWebGL2){const r=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,i=void 0!==r?r.length:0;let a=n.get(c);if(void 0===a||a.count!==i){void 0!==a&&a.texture.dispose();const t=void 0!==c.morphAttributes.position,s=void 0!==c.morphAttributes.normal,r=void 0!==c.morphAttributes.color,h=c.morphAttributes.position||[],l=c.morphAttributes.normal||[],u=c.morphAttributes.color||[];let p=0;!0===t&&(p=1),!0===s&&(p=2),!0===r&&(p=3);let d=c.attributes.position.count*p,m=1;d>e.maxTextureSize&&(m=Math.ceil(d/e.maxTextureSize),d=e.maxTextureSize);const f=new Float32Array(d*m*4*i),g=new Ne(f,d,m,i);g.type=Q,g.needsUpdate=!0;const y=4*p;for(let e=0;e<i;e++){const i=h[e],n=l[e],a=u[e],c=d*m*4*e;for(let e=0;e<i.count;e++){const h=e*y;!0===t&&(o.fromBufferAttribute(i,e),!0===i.normalized&&ji(o,i),f[c+h+0]=o.x,f[c+h+1]=o.y,f[c+h+2]=o.z,f[c+h+3]=0),!0===s&&(o.fromBufferAttribute(n,e),!0===n.normalized&&ji(o,n),f[c+h+4]=o.x,f[c+h+5]=o.y,f[c+h+6]=o.z,f[c+h+7]=0),!0===r&&(o.fromBufferAttribute(a,e),!0===a.normalized&&ji(o,a),f[c+h+8]=o.x,f[c+h+9]=o.y,f[c+h+10]=o.z,f[c+h+11]=4===a.itemSize?o.w:1)}}a={count:i,texture:g,size:new le(d,m)},n.set(c,a),c.addEventListener("dispose",(function t(){g.dispose(),n.delete(c),c.removeEventListener("dispose",t)}))}let h=0;for(let t=0;t<p.length;t++)h+=p[t];const l=c.morphTargetsRelative?1:1-h;u.getUniforms().setValue(t,"morphTargetBaseInfluence",l),u.getUniforms().setValue(t,"morphTargetInfluences",p),u.getUniforms().setValue(t,"morphTargetsTexture",a.texture,s),u.getUniforms().setValue(t,"morphTargetsTextureSize",a.size)}else{const e=void 0===p?0:p.length;let s=r[c.id];if(void 0===s||s.length!==e){s=[];for(let t=0;t<e;t++)s[t]=[t,0];r[c.id]=s}for(let t=0;t<e;t++){const e=s[t];e[0]=t,e[1]=p[t]}s.sort(Gi);for(let t=0;t<8;t++)t<e&&s[t][1]?(a[t][0]=s[t][0],a[t][1]=s[t][1]):(a[t][0]=Number.MAX_SAFE_INTEGER,a[t][1]=0);a.sort(Bi);const n=c.morphAttributes.position,o=c.morphAttributes.normal;let h=0;for(let t=0;t<8;t++){const e=a[t],s=e[0],r=e[1];s!==Number.MAX_SAFE_INTEGER&&r?(n&&c.getAttribute("morphTarget"+t)!==n[s]&&c.setAttribute("morphTarget"+t,n[s]),o&&c.getAttribute("morphNormal"+t)!==o[s]&&c.setAttribute("morphNormal"+t,o[s]),i[t]=r,h+=r):(n&&!0===c.hasAttribute("morphTarget"+t)&&c.deleteAttribute("morphTarget"+t),o&&!0===c.hasAttribute("morphNormal"+t)&&c.deleteAttribute("morphNormal"+t),i[t]=0)}const l=c.morphTargetsRelative?1:1-h;u.getUniforms().setValue(t,"morphTargetBaseInfluence",l),u.getUniforms().setValue(t,"morphTargetInfluences",i)}}}}function Vi(t,e,s,r){let i=new WeakMap;function n(t){const e=t.target;e.removeEventListener("dispose",n),s.remove(e.instanceMatrix),null!==e.instanceColor&&s.remove(e.instanceColor)}return{update:function(t){const o=r.render.frame,a=t.geometry,h=e.get(t,a);return i.get(h)!==o&&(e.update(h),i.set(h,o)),t.isInstancedMesh&&(!1===t.hasEventListener("dispose",n)&&t.addEventListener("dispose",n),s.update(t.instanceMatrix,34962),null!==t.instanceColor&&s.update(t.instanceColor,34962)),h},dispose:function(){i=new WeakMap}}}const Wi=new Fe,Yi=new Ne,Xi=new ke,qi=new Qr,Ki=[],Ji=[],$i=new Float32Array(16),Zi=new Float32Array(9),Qi=new Float32Array(4);function tn(t,e,s){const r=t[0];if(r<=0||r>0)return t;const i=e*s;let n=Ki[i];if(void 0===n&&(n=new Float32Array(i),Ki[i]=n),0!==e){r.toArray(n,0);for(let r=1,i=0;r!==e;++r)i+=s,t[r].toArray(n,i)}return n}function en(t,e){if(t.length!==e.length)return!1;for(let s=0,r=t.length;s<r;s++)if(t[s]!==e[s])return!1;return!0}function sn(t,e){for(let s=0,r=e.length;s<r;s++)t[s]=e[s]}function rn(t,e){let s=Ji[e];void 0===s&&(s=new Int32Array(e),Ji[e]=s);for(let r=0;r!==e;++r)s[r]=t.allocateTextureUnit();return s}function nn(t,e){const s=this.cache;s[0]!==e&&(t.uniform1f(this.addr,e),s[0]=e)}function on(t,e){const s=this.cache;if(void 0!==e.x)s[0]===e.x&&s[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),s[0]=e.x,s[1]=e.y);else{if(en(s,e))return;t.uniform2fv(this.addr,e),sn(s,e)}}function an(t,e){const s=this.cache;if(void 0!==e.x)s[0]===e.x&&s[1]===e.y&&s[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),s[0]=e.x,s[1]=e.y,s[2]=e.z);else if(void 0!==e.r)s[0]===e.r&&s[1]===e.g&&s[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),s[0]=e.r,s[1]=e.g,s[2]=e.b);else{if(en(s,e))return;t.uniform3fv(this.addr,e),sn(s,e)}}function hn(t,e){const s=this.cache;if(void 0!==e.x)s[0]===e.x&&s[1]===e.y&&s[2]===e.z&&s[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),s[0]=e.x,s[1]=e.y,s[2]=e.z,s[3]=e.w);else{if(en(s,e))return;t.uniform4fv(this.addr,e),sn(s,e)}}function cn(t,e){const s=this.cache,r=e.elements;if(void 0===r){if(en(s,e))return;t.uniformMatrix2fv(this.addr,!1,e),sn(s,e)}else{if(en(s,r))return;Qi.set(r),t.uniformMatrix2fv(this.addr,!1,Qi),sn(s,r)}}function ln(t,e){const s=this.cache,r=e.elements;if(void 0===r){if(en(s,e))return;t.uniformMatrix3fv(this.addr,!1,e),sn(s,e)}else{if(en(s,r))return;Zi.set(r),t.uniformMatrix3fv(this.addr,!1,Zi),sn(s,r)}}function un(t,e){const s=this.cache,r=e.elements;if(void 0===r){if(en(s,e))return;t.uniformMatrix4fv(this.addr,!1,e),sn(s,e)}else{if(en(s,r))return;$i.set(r),t.uniformMatrix4fv(this.addr,!1,$i),sn(s,r)}}function pn(t,e){const s=this.cache;s[0]!==e&&(t.uniform1i(this.addr,e),s[0]=e)}function dn(t,e){const s=this.cache;en(s,e)||(t.uniform2iv(this.addr,e),sn(s,e))}function mn(t,e){const s=this.cache;en(s,e)||(t.uniform3iv(this.addr,e),sn(s,e))}function fn(t,e){const s=this.cache;en(s,e)||(t.uniform4iv(this.addr,e),sn(s,e))}function gn(t,e){const s=this.cache;s[0]!==e&&(t.uniform1ui(this.addr,e),s[0]=e)}function yn(t,e){const s=this.cache;en(s,e)||(t.uniform2uiv(this.addr,e),sn(s,e))}function Tn(t,e){const s=this.cache;en(s,e)||(t.uniform3uiv(this.addr,e),sn(s,e))}function vn(t,e){const s=this.cache;en(s,e)||(t.uniform4uiv(this.addr,e),sn(s,e))}function bn(t,e,s){const r=this.cache,i=s.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),s.setTexture2D(e||Wi,i)}function wn(t,e,s){const r=this.cache,i=s.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),s.setTexture3D(e||Xi,i)}function xn(t,e,s){const r=this.cache,i=s.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),s.setTextureCube(e||qi,i)}function In(t,e,s){const r=this.cache,i=s.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),s.setTexture2DArray(e||Yi,i)}function En(t,e){t.uniform1fv(this.addr,e)}function Sn(t,e){const s=tn(e,this.size,2);t.uniform2fv(this.addr,s)}function An(t,e){const s=tn(e,this.size,3);t.uniform3fv(this.addr,s)}function Rn(t,e){const s=tn(e,this.size,4);t.uniform4fv(this.addr,s)}function Cn(t,e){const s=tn(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,s)}function On(t,e){const s=tn(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,s)}function _n(t,e){const s=tn(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,s)}function Dn(t,e){t.uniform1iv(this.addr,e)}function Fn(t,e){t.uniform2iv(this.addr,e)}function Mn(t,e){t.uniform3iv(this.addr,e)}function Pn(t,e){t.uniform4iv(this.addr,e)}function Nn(t,e){t.uniform1uiv(this.addr,e)}function Ln(t,e){t.uniform2uiv(this.addr,e)}function kn(t,e){t.uniform3uiv(this.addr,e)}function Un(t,e){t.uniform4uiv(this.addr,e)}function Hn(t,e,s){const r=e.length,i=rn(s,r);t.uniform1iv(this.addr,i);for(let t=0;t!==r;++t)s.setTexture2D(e[t]||Wi,i[t])}function Bn(t,e,s){const r=e.length,i=rn(s,r);t.uniform1iv(this.addr,i);for(let t=0;t!==r;++t)s.setTexture3D(e[t]||Xi,i[t])}function Gn(t,e,s){const r=e.length,i=rn(s,r);t.uniform1iv(this.addr,i);for(let t=0;t!==r;++t)s.setTextureCube(e[t]||qi,i[t])}function jn(t,e,s){const r=e.length,i=rn(s,r);t.uniform1iv(this.addr,i);for(let t=0;t!==r;++t)s.setTexture2DArray(e[t]||Yi,i[t])}function zn(t,e,s){this.id=t,this.addr=s,this.cache=[],this.setValue=function(t){switch(t){case 5126:return nn;case 35664:return on;case 35665:return an;case 35666:return hn;case 35674:return cn;case 35675:return ln;case 35676:return un;case 5124:case 35670:return pn;case 35667:case 35671:return dn;case 35668:case 35672:return mn;case 35669:case 35673:return fn;case 5125:return gn;case 36294:return yn;case 36295:return Tn;case 36296:return vn;case 35678:case 36198:case 36298:case 36306:case 35682:return bn;case 35679:case 36299:case 36307:return wn;case 35680:case 36300:case 36308:case 36293:return xn;case 36289:case 36303:case 36311:case 36292:return In}}(e.type)}function Vn(t,e,s){this.id=t,this.addr=s,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return En;case 35664:return Sn;case 35665:return An;case 35666:return Rn;case 35674:return Cn;case 35675:return On;case 35676:return _n;case 5124:case 35670:return Dn;case 35667:case 35671:return Fn;case 35668:case 35672:return Mn;case 35669:case 35673:return Pn;case 5125:return Nn;case 36294:return Ln;case 36295:return kn;case 36296:return Un;case 35678:case 36198:case 36298:case 36306:case 35682:return Hn;case 35679:case 36299:case 36307:return Bn;case 35680:case 36300:case 36308:case 36293:return Gn;case 36289:case 36303:case 36311:case 36292:return jn}}(e.type)}function Wn(t){this.id=t,this.seq=[],this.map={}}Wn.prototype.setValue=function(t,e,s){const r=this.seq;for(let i=0,n=r.length;i!==n;++i){const n=r[i];n.setValue(t,e[n.id],s)}};const Yn=/(\w+)(\])?(\[|\.)?/g;function Xn(t,e){t.seq.push(e),t.map[e.id]=e}function qn(t,e,s){const r=t.name,i=r.length;for(Yn.lastIndex=0;;){const n=Yn.exec(r),o=Yn.lastIndex;let a=n[1];const h="]"===n[2],c=n[3];if(h&&(a|=0),void 0===c||"["===c&&o+2===i){Xn(s,void 0===c?new zn(a,t,e):new Vn(a,t,e));break}{let t=s.map[a];void 0===t&&(t=new Wn(a),Xn(s,t)),s=t}}}function Kn(t,e){this.seq=[],this.map={};const s=t.getProgramParameter(e,35718);for(let r=0;r<s;++r){const s=t.getActiveUniform(e,r);qn(s,t.getUniformLocation(e,s.name),this)}}function Jn(t,e,s){const r=t.createShader(e);return t.shaderSource(r,s),t.compileShader(r),r}Kn.prototype.setValue=function(t,e,s,r){const i=this.map[e];void 0!==i&&i.setValue(t,s,r)},Kn.prototype.setOptional=function(t,e,s){const r=e[s];void 0!==r&&this.setValue(t,s,r)},Kn.upload=function(t,e,s,r){for(let i=0,n=e.length;i!==n;++i){const n=e[i],o=s[n.id];!1!==o.needsUpdate&&n.setValue(t,o.value,r)}},Kn.seqWithValue=function(t,e){const s=[];for(let r=0,i=t.length;r!==i;++r){const i=t[r];i.id in e&&s.push(i)}return s};let $n=0;function Zn(t,e,s){const r=t.getShaderParameter(e,35713),i=t.getShaderInfoLog(e).trim();if(r&&""===i)return"";const n=/ERROR: 0:(\d+)/.exec(i);if(n){const r=parseInt(n[0]);return s.toUpperCase()+"\n\n"+i+"\n\n"+function(t,e){const s=t.split("\n"),r=[],i=Math.max(e-6,0),n=Math.min(e+6,s.length);for(let t=i;t<n;t++)r.push(t+1+": "+s[t]);return r.join("\n")}(t.getShaderSource(e),r)}return i}function Qn(t,e){const s=function(t){switch(t){case jt:return["Linear","( value )"];case zt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+s[0]+s[1]+"; }"}function to(t,e){let s;switch(e){case 1:s="Linear";break;case 2:s="Reinhard";break;case 3:s="OptimizedCineon";break;case 4:s="ACESFilmic";break;case 5:s="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),s="Linear"}return"vec3 "+t+"( vec3 color ) { return "+s+"ToneMapping( color ); }"}function eo(t){return""!==t}function so(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function ro(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const io=/^[ \t]*#include +<([\w\d./]+)>/gm;function no(t){return t.replace(io,oo)}function oo(t,e){const s=ui[e];if(void 0===s)throw new Error("Can not resolve #include <"+e+">");return no(s)}const ao=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,ho=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function co(t){return t.replace(ho,uo).replace(ao,lo)}function lo(t,e,s,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),uo(t,e,s,r)}function uo(t,e,s,r){let i="";for(let t=parseInt(e);t<parseInt(s);t++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+t+" ]").replace(/UNROLLED_LOOP_INDEX/g,t);return i}function po(t){let e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function mo(t,e,s,r){const i=t.getContext(),n=s.defines;let o=s.vertexShader,a=s.fragmentShader;const h=function(t){let e="SHADOWMAP_TYPE_BASIC";return 1===t.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===t.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===t.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(s),c=function(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case L:case k:e="ENVMAP_TYPE_CUBE";break;case B:e="ENVMAP_TYPE_CUBE_UV"}return e}(s),l=function(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case k:e="ENVMAP_MODE_REFRACTION"}return e}(s),u=function(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(s),p=function(t){const e=t.envMapCubeUVHeight;if(null===e)return null;const s=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,s),112)),texelHeight:r,maxMip:s}}(s),d=s.isWebGL2?"":function(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(eo).join("\n")}(s),m=function(t){const e=[];for(const s in t){const r=t[s];!1!==r&&e.push("#define "+s+" "+r)}return e.join("\n")}(n),f=i.createProgram();let g,y,T=s.glslVersion?"#version "+s.glslVersion+"\n":"";s.isRawShaderMaterial?(g=[m].filter(eo).join("\n"),g.length>0&&(g+="\n"),y=[d,m].filter(eo).join("\n"),y.length>0&&(y+="\n")):(g=[po(s),"#define SHADER_NAME "+s.shaderName,m,s.instancing?"#define USE_INSTANCING":"",s.instancingColor?"#define USE_INSTANCING_COLOR":"",s.supportsVertexTextures?"#define VERTEX_TEXTURES":"",s.useFog&&s.fog?"#define USE_FOG":"",s.useFog&&s.fogExp2?"#define FOG_EXP2":"",s.map?"#define USE_MAP":"",s.envMap?"#define USE_ENVMAP":"",s.envMap?"#define "+l:"",s.lightMap?"#define USE_LIGHTMAP":"",s.aoMap?"#define USE_AOMAP":"",s.emissiveMap?"#define USE_EMISSIVEMAP":"",s.bumpMap?"#define USE_BUMPMAP":"",s.normalMap?"#define USE_NORMALMAP":"",s.normalMap&&s.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",s.normalMap&&s.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",s.clearcoatMap?"#define USE_CLEARCOATMAP":"",s.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",s.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",s.displacementMap&&s.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",s.specularMap?"#define USE_SPECULARMAP":"",s.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",s.specularColorMap?"#define USE_SPECULARCOLORMAP":"",s.roughnessMap?"#define USE_ROUGHNESSMAP":"",s.metalnessMap?"#define USE_METALNESSMAP":"",s.alphaMap?"#define USE_ALPHAMAP":"",s.transmission?"#define USE_TRANSMISSION":"",s.transmissionMap?"#define USE_TRANSMISSIONMAP":"",s.thicknessMap?"#define USE_THICKNESSMAP":"",s.sheenColorMap?"#define USE_SHEENCOLORMAP":"",s.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",s.vertexTangents?"#define USE_TANGENT":"",s.vertexColors?"#define USE_COLOR":"",s.vertexAlphas?"#define USE_COLOR_ALPHA":"",s.vertexUvs?"#define USE_UV":"",s.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",s.flatShading?"#define FLAT_SHADED":"",s.skinning?"#define USE_SKINNING":"",s.morphTargets?"#define USE_MORPHTARGETS":"",s.morphNormals&&!1===s.flatShading?"#define USE_MORPHNORMALS":"",s.morphColors&&s.isWebGL2?"#define USE_MORPHCOLORS":"",s.morphTargetsCount>0&&s.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",s.morphTargetsCount>0&&s.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+s.morphTextureStride:"",s.morphTargetsCount>0&&s.isWebGL2?"#define MORPHTARGETS_COUNT "+s.morphTargetsCount:"",s.doubleSided?"#define DOUBLE_SIDED":"",s.flipSided?"#define FLIP_SIDED":"",s.shadowMapEnabled?"#define USE_SHADOWMAP":"",s.shadowMapEnabled?"#define "+h:"",s.sizeAttenuation?"#define USE_SIZEATTENUATION":"",s.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",s.logarithmicDepthBuffer&&s.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(eo).join("\n"),y=[d,po(s),"#define SHADER_NAME "+s.shaderName,m,s.useFog&&s.fog?"#define USE_FOG":"",s.useFog&&s.fogExp2?"#define FOG_EXP2":"",s.map?"#define USE_MAP":"",s.matcap?"#define USE_MATCAP":"",s.envMap?"#define USE_ENVMAP":"",s.envMap?"#define "+c:"",s.envMap?"#define "+l:"",s.envMap?"#define "+u:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",s.lightMap?"#define USE_LIGHTMAP":"",s.aoMap?"#define USE_AOMAP":"",s.emissiveMap?"#define USE_EMISSIVEMAP":"",s.bumpMap?"#define USE_BUMPMAP":"",s.normalMap?"#define USE_NORMALMAP":"",s.normalMap&&s.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",s.normalMap&&s.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",s.clearcoat?"#define USE_CLEARCOAT":"",s.clearcoatMap?"#define USE_CLEARCOATMAP":"",s.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",s.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",s.specularMap?"#define USE_SPECULARMAP":"",s.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",s.specularColorMap?"#define USE_SPECULARCOLORMAP":"",s.roughnessMap?"#define USE_ROUGHNESSMAP":"",s.metalnessMap?"#define USE_METALNESSMAP":"",s.alphaMap?"#define USE_ALPHAMAP":"",s.alphaTest?"#define USE_ALPHATEST":"",s.sheen?"#define USE_SHEEN":"",s.sheenColorMap?"#define USE_SHEENCOLORMAP":"",s.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",s.transmission?"#define USE_TRANSMISSION":"",s.transmissionMap?"#define USE_TRANSMISSIONMAP":"",s.thicknessMap?"#define USE_THICKNESSMAP":"",s.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",s.vertexTangents?"#define USE_TANGENT":"",s.vertexColors||s.instancingColor?"#define USE_COLOR":"",s.vertexAlphas?"#define USE_COLOR_ALPHA":"",s.vertexUvs?"#define USE_UV":"",s.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",s.gradientMap?"#define USE_GRADIENTMAP":"",s.flatShading?"#define FLAT_SHADED":"",s.doubleSided?"#define DOUBLE_SIDED":"",s.flipSided?"#define FLIP_SIDED":"",s.shadowMapEnabled?"#define USE_SHADOWMAP":"",s.shadowMapEnabled?"#define "+h:"",s.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",s.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",s.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",s.logarithmicDepthBuffer&&s.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==s.toneMapping?"#define TONE_MAPPING":"",0!==s.toneMapping?ui.tonemapping_pars_fragment:"",0!==s.toneMapping?to("toneMapping",s.toneMapping):"",s.dithering?"#define DITHERING":"",s.opaque?"#define OPAQUE":"",ui.encodings_pars_fragment,Qn("linearToOutputTexel",s.outputEncoding),s.useDepthPacking?"#define DEPTH_PACKING "+s.depthPacking:"","\n"].filter(eo).join("\n")),o=no(o),o=so(o,s),o=ro(o,s),a=no(a),a=so(a,s),a=ro(a,s),o=co(o),a=co(a),s.isWebGL2&&!0!==s.isRawShaderMaterial&&(T="#version 300 es\n",g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,y=["#define varying in",s.glslVersion===Kt?"":"layout(location = 0) out highp vec4 pc_fragColor;",s.glslVersion===Kt?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+y);const v=T+y+a,b=Jn(i,35633,T+g+o),w=Jn(i,35632,v);if(i.attachShader(f,b),i.attachShader(f,w),void 0!==s.index0AttributeName?i.bindAttribLocation(f,0,s.index0AttributeName):!0===s.morphTargets&&i.bindAttribLocation(f,0,"position"),i.linkProgram(f),t.debug.checkShaderErrors){const t=i.getProgramInfoLog(f).trim(),e=i.getShaderInfoLog(b).trim(),s=i.getShaderInfoLog(w).trim();let r=!0,n=!0;if(!1===i.getProgramParameter(f,35714)){r=!1;const e=Zn(i,b,"vertex"),s=Zn(i,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(f,35715)+"\n\nProgram Info Log: "+t+"\n"+e+"\n"+s)}else""!==t?console.warn("THREE.WebGLProgram: Program Info Log:",t):""!==e&&""!==s||(n=!1);n&&(this.diagnostics={runnable:r,programLog:t,vertexShader:{log:e,prefix:g},fragmentShader:{log:s,prefix:y}})}let x,I;return i.deleteShader(b),i.deleteShader(w),this.getUniforms=function(){return void 0===x&&(x=new Kn(i,f)),x},this.getAttributes=function(){return void 0===I&&(I=function(t,e){const s={},r=t.getProgramParameter(e,35721);for(let i=0;i<r;i++){const r=t.getActiveAttrib(e,i),n=r.name;let o=1;35674===r.type&&(o=2),35675===r.type&&(o=3),35676===r.type&&(o=4),s[n]={type:r.type,location:t.getAttribLocation(e,n),locationSize:o}}return s}(i,f)),I},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(f),this.program=void 0},this.name=s.shaderName,this.id=$n++,this.cacheKey=e,this.usedTimes=1,this.program=f,this.vertexShader=b,this.fragmentShader=w,this}let fo=0;class go{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,s=t.fragmentShader,r=this._getShaderStage(e),i=this._getShaderStage(s),n=this._getShaderCacheForMaterial(t);return!1===n.has(r)&&(n.add(r),r.usedTimes++),!1===n.has(i)&&(n.add(i),i.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const t of e)t.usedTimes--,0===t.usedTimes&&this.shaderCache.delete(t.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;return!1===e.has(t)&&e.set(t,new Set),e.get(t)}_getShaderStage(t){const e=this.shaderCache;if(!1===e.has(t)){const s=new yo(t);e.set(t,s)}return e.get(t)}}class yo{constructor(t){this.id=fo++,this.code=t,this.usedTimes=0}}function To(t,e,s,r,i,n,o){const a=new Os,h=new go,c=[],l=i.isWebGL2,u=i.logarithmicDepthBuffer,p=i.vertexTextures;let d=i.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(n,a,c,f,g){const y=f.fog,T=g.geometry,v=n.isMeshStandardMaterial?f.environment:null,b=(n.isMeshStandardMaterial?s:e).get(n.envMap||v),w=b&&b.mapping===B?b.image.height:null,x=m[n.type];null!==n.precision&&(d=i.getMaxPrecision(n.precision),d!==n.precision&&console.warn("THREE.WebGLProgram.getParameters:",n.precision,"not supported, using",d,"instead."));const I=T.morphAttributes.position||T.morphAttributes.normal||T.morphAttributes.color,E=void 0!==I?I.length:0;let S,A,R,C,O=0;if(void 0!==T.morphAttributes.position&&(O=1),void 0!==T.morphAttributes.normal&&(O=2),void 0!==T.morphAttributes.color&&(O=3),x){const t=di[x];S=t.vertexShader,A=t.fragmentShader}else S=n.vertexShader,A=n.fragmentShader,h.update(n),R=h.getVertexShaderID(n),C=h.getFragmentShaderID(n);const _=t.getRenderTarget(),D=n.alphaTest>0,F=n.clearcoat>0;return{isWebGL2:l,shaderID:x,shaderName:n.type,vertexShader:S,fragmentShader:A,defines:n.defines,customVertexShaderID:R,customFragmentShaderID:C,isRawShaderMaterial:!0===n.isRawShaderMaterial,glslVersion:n.glslVersion,precision:d,instancing:!0===g.isInstancedMesh,instancingColor:!0===g.isInstancedMesh&&null!==g.instanceColor,supportsVertexTextures:p,outputEncoding:null===_?t.outputEncoding:!0===_.isXRRenderTarget?_.texture.encoding:jt,map:!!n.map,matcap:!!n.matcap,envMap:!!b,envMapMode:b&&b.mapping,envMapCubeUVHeight:w,lightMap:!!n.lightMap,aoMap:!!n.aoMap,emissiveMap:!!n.emissiveMap,bumpMap:!!n.bumpMap,normalMap:!!n.normalMap,objectSpaceNormalMap:1===n.normalMapType,tangentSpaceNormalMap:0===n.normalMapType,decodeVideoTexture:!!n.map&&!0===n.map.isVideoTexture&&n.map.encoding===zt,clearcoat:F,clearcoatMap:F&&!!n.clearcoatMap,clearcoatRoughnessMap:F&&!!n.clearcoatRoughnessMap,clearcoatNormalMap:F&&!!n.clearcoatNormalMap,displacementMap:!!n.displacementMap,roughnessMap:!!n.roughnessMap,metalnessMap:!!n.metalnessMap,specularMap:!!n.specularMap,specularIntensityMap:!!n.specularIntensityMap,specularColorMap:!!n.specularColorMap,opaque:!1===n.transparent&&1===n.blending,alphaMap:!!n.alphaMap,alphaTest:D,gradientMap:!!n.gradientMap,sheen:n.sheen>0,sheenColorMap:!!n.sheenColorMap,sheenRoughnessMap:!!n.sheenRoughnessMap,transmission:n.transmission>0,transmissionMap:!!n.transmissionMap,thicknessMap:!!n.thicknessMap,combine:n.combine,vertexTangents:!!n.normalMap&&!!T.attributes.tangent,vertexColors:n.vertexColors,vertexAlphas:!0===n.vertexColors&&!!T.attributes.color&&4===T.attributes.color.itemSize,vertexUvs:!!(n.map||n.bumpMap||n.normalMap||n.specularMap||n.alphaMap||n.emissiveMap||n.roughnessMap||n.metalnessMap||n.clearcoatMap||n.clearcoatRoughnessMap||n.clearcoatNormalMap||n.displacementMap||n.transmissionMap||n.thicknessMap||n.specularIntensityMap||n.specularColorMap||n.sheenColorMap||n.sheenRoughnessMap),uvsVertexOnly:!(n.map||n.bumpMap||n.normalMap||n.specularMap||n.alphaMap||n.emissiveMap||n.roughnessMap||n.metalnessMap||n.clearcoatNormalMap||n.transmission>0||n.transmissionMap||n.thicknessMap||n.specularIntensityMap||n.specularColorMap||n.sheen>0||n.sheenColorMap||n.sheenRoughnessMap||!n.displacementMap),fog:!!y,useFog:!0===n.fog,fogExp2:y&&y.isFogExp2,flatShading:!!n.flatShading,sizeAttenuation:n.sizeAttenuation,logarithmicDepthBuffer:u,skinning:!0===g.isSkinnedMesh,morphTargets:void 0!==T.morphAttributes.position,morphNormals:void 0!==T.morphAttributes.normal,morphColors:void 0!==T.morphAttributes.color,morphTargetsCount:E,morphTextureStride:O,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:n.dithering,shadowMapEnabled:t.shadowMap.enabled&&c.length>0,shadowMapType:t.shadowMap.type,toneMapping:n.toneMapped?t.toneMapping:0,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:n.premultipliedAlpha,doubleSided:2===n.side,flipSided:1===n.side,useDepthPacking:!!n.depthPacking,depthPacking:n.depthPacking||0,index0AttributeName:n.index0AttributeName,extensionDerivatives:n.extensions&&n.extensions.derivatives,extensionFragDepth:n.extensions&&n.extensions.fragDepth,extensionDrawBuffers:n.extensions&&n.extensions.drawBuffers,extensionShaderTextureLOD:n.extensions&&n.extensions.shaderTextureLOD,rendererExtensionFragDepth:l||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:l||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:l||r.has("EXT_shader_texture_lod"),customProgramCacheKey:n.customProgramCacheKey()}},getProgramCacheKey:function(e){const s=[];if(e.shaderID?s.push(e.shaderID):(s.push(e.customVertexShaderID),s.push(e.customFragmentShaderID)),void 0!==e.defines)for(const t in e.defines)s.push(t),s.push(e.defines[t]);return!1===e.isRawShaderMaterial&&(!function(t,e){t.push(e.precision),t.push(e.outputEncoding),t.push(e.envMapMode),t.push(e.envMapCubeUVHeight),t.push(e.combine),t.push(e.vertexUvs),t.push(e.fogExp2),t.push(e.sizeAttenuation),t.push(e.morphTargetsCount),t.push(e.morphAttributeCount),t.push(e.numDirLights),t.push(e.numPointLights),t.push(e.numSpotLights),t.push(e.numHemiLights),t.push(e.numRectAreaLights),t.push(e.numDirLightShadows),t.push(e.numPointLightShadows),t.push(e.numSpotLightShadows),t.push(e.shadowMapType),t.push(e.toneMapping),t.push(e.numClippingPlanes),t.push(e.numClipIntersection),t.push(e.depthPacking)}(s,e),function(t,e){a.disableAll(),e.isWebGL2&&a.enable(0);e.supportsVertexTextures&&a.enable(1);e.instancing&&a.enable(2);e.instancingColor&&a.enable(3);e.map&&a.enable(4);e.matcap&&a.enable(5);e.envMap&&a.enable(6);e.lightMap&&a.enable(7);e.aoMap&&a.enable(8);e.emissiveMap&&a.enable(9);e.bumpMap&&a.enable(10);e.normalMap&&a.enable(11);e.objectSpaceNormalMap&&a.enable(12);e.tangentSpaceNormalMap&&a.enable(13);e.clearcoat&&a.enable(14);e.clearcoatMap&&a.enable(15);e.clearcoatRoughnessMap&&a.enable(16);e.clearcoatNormalMap&&a.enable(17);e.displacementMap&&a.enable(18);e.specularMap&&a.enable(19);e.roughnessMap&&a.enable(20);e.metalnessMap&&a.enable(21);e.gradientMap&&a.enable(22);e.alphaMap&&a.enable(23);e.alphaTest&&a.enable(24);e.vertexColors&&a.enable(25);e.vertexAlphas&&a.enable(26);e.vertexUvs&&a.enable(27);e.vertexTangents&&a.enable(28);e.uvsVertexOnly&&a.enable(29);e.fog&&a.enable(30);t.push(a.mask),a.disableAll(),e.useFog&&a.enable(0);e.flatShading&&a.enable(1);e.logarithmicDepthBuffer&&a.enable(2);e.skinning&&a.enable(3);e.morphTargets&&a.enable(4);e.morphNormals&&a.enable(5);e.morphColors&&a.enable(6);e.premultipliedAlpha&&a.enable(7);e.shadowMapEnabled&&a.enable(8);e.physicallyCorrectLights&&a.enable(9);e.doubleSided&&a.enable(10);e.flipSided&&a.enable(11);e.useDepthPacking&&a.enable(12);e.dithering&&a.enable(13);e.specularIntensityMap&&a.enable(14);e.specularColorMap&&a.enable(15);e.transmission&&a.enable(16);e.transmissionMap&&a.enable(17);e.thicknessMap&&a.enable(18);e.sheen&&a.enable(19);e.sheenColorMap&&a.enable(20);e.sheenRoughnessMap&&a.enable(21);e.decodeVideoTexture&&a.enable(22);e.opaque&&a.enable(23);t.push(a.mask)}(s,e),s.push(t.outputEncoding)),s.push(e.customProgramCacheKey),s.join()},getUniforms:function(t){const e=m[t.type];let s;if(e){const t=di[e];s=Xr.clone(t.uniforms)}else s=t.uniforms;return s},acquireProgram:function(e,s){let r;for(let t=0,e=c.length;t<e;t++){const e=c[t];if(e.cacheKey===s){r=e,++r.usedTimes;break}}return void 0===r&&(r=new mo(t,s,e,n),c.push(r)),r},releaseProgram:function(t){if(0==--t.usedTimes){const e=c.indexOf(t);c[e]=c[c.length-1],c.pop(),t.destroy()}},releaseShaderCache:function(t){h.remove(t)},programs:c,dispose:function(){h.dispose()}}}function vo(){let t=new WeakMap;return{get:function(e){let s=t.get(e);return void 0===s&&(s={},t.set(e,s)),s},remove:function(e){t.delete(e)},update:function(e,s,r){t.get(e)[s]=r},dispose:function(){t=new WeakMap}}}function bo(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function wo(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function xo(){const t=[];let e=0;const s=[],r=[],i=[];function n(s,r,i,n,o,a){let h=t[e];return void 0===h?(h={id:s.id,object:s,geometry:r,material:i,groupOrder:n,renderOrder:s.renderOrder,z:o,group:a},t[e]=h):(h.id=s.id,h.object=s,h.geometry=r,h.material=i,h.groupOrder=n,h.renderOrder=s.renderOrder,h.z=o,h.group=a),e++,h}return{opaque:s,transmissive:r,transparent:i,init:function(){e=0,s.length=0,r.length=0,i.length=0},push:function(t,e,o,a,h,c){const l=n(t,e,o,a,h,c);o.transmission>0?r.push(l):!0===o.transparent?i.push(l):s.push(l)},unshift:function(t,e,o,a,h,c){const l=n(t,e,o,a,h,c);o.transmission>0?r.unshift(l):!0===o.transparent?i.unshift(l):s.unshift(l)},finish:function(){for(let s=e,r=t.length;s<r;s++){const e=t[s];if(null===e.id)break;e.id=null,e.object=null,e.geometry=null,e.material=null,e.group=null}},sort:function(t,e){s.length>1&&s.sort(t||bo),r.length>1&&r.sort(e||wo),i.length>1&&i.sort(e||wo)}}}function Io(){let t=new WeakMap;return{get:function(e,s){let r;return!1===t.has(e)?(r=new xo,t.set(e,[r])):s>=t.get(e).length?(r=new xo,t.get(e).push(r)):r=t.get(e)[s],r},dispose:function(){t=new WeakMap}}}function Eo(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let s;switch(e.type){case"DirectionalLight":s={direction:new Ge,color:new Ae};break;case"SpotLight":s={position:new Ge,direction:new Ge,color:new Ae,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":s={position:new Ge,color:new Ae,distance:0,decay:0};break;case"HemisphereLight":s={direction:new Ge,skyColor:new Ae,groundColor:new Ae};break;case"RectAreaLight":s={color:new Ae,position:new Ge,halfWidth:new Ge,halfHeight:new Ge}}return t[e.id]=s,s}}}let So=0;function Ao(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function Ro(t,e){const s=new Eo,r=function(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let s;switch(e.type){case"DirectionalLight":case"SpotLight":s={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new le};break;case"PointLight":s={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new le,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=s,s}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let t=0;t<9;t++)i.probe.push(new Ge);const n=new Ge,o=new Ts,a=new Ts;return{setup:function(n,o){let a=0,h=0,c=0;for(let t=0;t<9;t++)i.probe[t].set(0,0,0);let l=0,u=0,p=0,d=0,m=0,f=0,g=0,y=0;n.sort(Ao);const T=!0!==o?Math.PI:1;for(let t=0,e=n.length;t<e;t++){const e=n[t],o=e.color,v=e.intensity,b=e.distance,w=e.shadow&&e.shadow.map?e.shadow.map.texture:null;if(e.isAmbientLight)a+=o.r*v*T,h+=o.g*v*T,c+=o.b*v*T;else if(e.isLightProbe)for(let t=0;t<9;t++)i.probe[t].addScaledVector(e.sh.coefficients[t],v);else if(e.isDirectionalLight){const t=s.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*T),e.castShadow){const t=e.shadow,s=r.get(e);s.shadowBias=t.bias,s.shadowNormalBias=t.normalBias,s.shadowRadius=t.radius,s.shadowMapSize=t.mapSize,i.directionalShadow[l]=s,i.directionalShadowMap[l]=w,i.directionalShadowMatrix[l]=e.shadow.matrix,f++}i.directional[l]=t,l++}else if(e.isSpotLight){const t=s.get(e);if(t.position.setFromMatrixPosition(e.matrixWorld),t.color.copy(o).multiplyScalar(v*T),t.distance=b,t.coneCos=Math.cos(e.angle),t.penumbraCos=Math.cos(e.angle*(1-e.penumbra)),t.decay=e.decay,e.castShadow){const t=e.shadow,s=r.get(e);s.shadowBias=t.bias,s.shadowNormalBias=t.normalBias,s.shadowRadius=t.radius,s.shadowMapSize=t.mapSize,i.spotShadow[p]=s,i.spotShadowMap[p]=w,i.spotShadowMatrix[p]=e.shadow.matrix,y++}i.spot[p]=t,p++}else if(e.isRectAreaLight){const t=s.get(e);t.color.copy(o).multiplyScalar(v),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),i.rectArea[d]=t,d++}else if(e.isPointLight){const t=s.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*T),t.distance=e.distance,t.decay=e.decay,e.castShadow){const t=e.shadow,s=r.get(e);s.shadowBias=t.bias,s.shadowNormalBias=t.normalBias,s.shadowRadius=t.radius,s.shadowMapSize=t.mapSize,s.shadowCameraNear=t.camera.near,s.shadowCameraFar=t.camera.far,i.pointShadow[u]=s,i.pointShadowMap[u]=w,i.pointShadowMatrix[u]=e.shadow.matrix,g++}i.point[u]=t,u++}else if(e.isHemisphereLight){const t=s.get(e);t.skyColor.copy(e.color).multiplyScalar(v*T),t.groundColor.copy(e.groundColor).multiplyScalar(v*T),i.hemi[m]=t,m++}}d>0&&(e.isWebGL2||!0===t.has("OES_texture_float_linear")?(i.rectAreaLTC1=pi.LTC_FLOAT_1,i.rectAreaLTC2=pi.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=pi.LTC_HALF_1,i.rectAreaLTC2=pi.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=a,i.ambient[1]=h,i.ambient[2]=c;const v=i.hash;v.directionalLength===l&&v.pointLength===u&&v.spotLength===p&&v.rectAreaLength===d&&v.hemiLength===m&&v.numDirectionalShadows===f&&v.numPointShadows===g&&v.numSpotShadows===y||(i.directional.length=l,i.spot.length=p,i.rectArea.length=d,i.point.length=u,i.hemi.length=m,i.directionalShadow.length=f,i.directionalShadowMap.length=f,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=y,i.spotShadowMap.length=y,i.directionalShadowMatrix.length=f,i.pointShadowMatrix.length=g,i.spotShadowMatrix.length=y,v.directionalLength=l,v.pointLength=u,v.spotLength=p,v.rectAreaLength=d,v.hemiLength=m,v.numDirectionalShadows=f,v.numPointShadows=g,v.numSpotShadows=y,i.version=So++)},setupView:function(t,e){let s=0,r=0,h=0,c=0,l=0;const u=e.matrixWorldInverse;for(let e=0,p=t.length;e<p;e++){const p=t[e];if(p.isDirectionalLight){const t=i.directional[s];t.direction.setFromMatrixPosition(p.matrixWorld),n.setFromMatrixPosition(p.target.matrixWorld),t.direction.sub(n),t.direction.transformDirection(u),s++}else if(p.isSpotLight){const t=i.spot[h];t.position.setFromMatrixPosition(p.matrixWorld),t.position.applyMatrix4(u),t.direction.setFromMatrixPosition(p.matrixWorld),n.setFromMatrixPosition(p.target.matrixWorld),t.direction.sub(n),t.direction.transformDirection(u),h++}else if(p.isRectAreaLight){const t=i.rectArea[c];t.position.setFromMatrixPosition(p.matrixWorld),t.position.applyMatrix4(u),a.identity(),o.copy(p.matrixWorld),o.premultiply(u),a.extractRotation(o),t.halfWidth.set(.5*p.width,0,0),t.halfHeight.set(0,.5*p.height,0),t.halfWidth.applyMatrix4(a),t.halfHeight.applyMatrix4(a),c++}else if(p.isPointLight){const t=i.point[r];t.position.setFromMatrixPosition(p.matrixWorld),t.position.applyMatrix4(u),r++}else if(p.isHemisphereLight){const t=i.hemi[l];t.direction.setFromMatrixPosition(p.matrixWorld),t.direction.transformDirection(u),l++}}},state:i}}function Co(t,e){const s=new Ro(t,e),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:s},setupLights:function(t){s.setup(r,t)},setupLightsView:function(t){s.setupView(r,t)},pushLight:function(t){r.push(t)},pushShadow:function(t){i.push(t)}}}function Oo(t,e){let s=new WeakMap;return{get:function(r,i=0){let n;return!1===s.has(r)?(n=new Co(t,e),s.set(r,[n])):i>=s.get(r).length?(n=new Co(t,e),s.get(r).push(n)):n=s.get(r)[i],n},dispose:function(){s=new WeakMap}}}class _o extends sr{constructor(t){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}_o.prototype.isMeshDepthMaterial=!0;class Do extends sr{constructor(t){super(),this.type="MeshDistanceMaterial",this.referencePosition=new Ge,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}Do.prototype.isMeshDistanceMaterial=!0;function Fo(t,e,s){let r=new ai;const i=new le,n=new le,o=new Me,a=new _o({depthPacking:3201}),h=new Do,c={},l=s.maxTextureSize,u={0:1,1:0,2:2},p=new qr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new le},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),d=p.clone();d.defines.HORIZONTAL_PASS=1;const m=new Er;m.setAttribute("position",new or(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const f=new jr(m,p),g=this;function y(s,r){const i=e.update(f);p.defines.VSM_SAMPLES!==s.blurSamples&&(p.defines.VSM_SAMPLES=s.blurSamples,d.defines.VSM_SAMPLES=s.blurSamples,p.needsUpdate=!0,d.needsUpdate=!0),p.uniforms.shadow_pass.value=s.map.texture,p.uniforms.resolution.value=s.mapSize,p.uniforms.radius.value=s.radius,t.setRenderTarget(s.mapPass),t.clear(),t.renderBufferDirect(r,null,i,p,f,null),d.uniforms.shadow_pass.value=s.mapPass.texture,d.uniforms.resolution.value=s.mapSize,d.uniforms.radius.value=s.radius,t.setRenderTarget(s.map),t.clear(),t.renderBufferDirect(r,null,i,d,f,null)}function T(e,s,r,i,n,o){let l=null;const p=!0===r.isPointLight?e.customDistanceMaterial:e.customDepthMaterial;if(l=void 0!==p?p:!0===r.isPointLight?h:a,t.localClippingEnabled&&!0===s.clipShadows&&0!==s.clippingPlanes.length||s.displacementMap&&0!==s.displacementScale||s.alphaMap&&s.alphaTest>0){const t=l.uuid,e=s.uuid;let r=c[t];void 0===r&&(r={},c[t]=r);let i=r[e];void 0===i&&(i=l.clone(),r[e]=i),l=i}return l.visible=s.visible,l.wireframe=s.wireframe,l.side=3===o?null!==s.shadowSide?s.shadowSide:s.side:null!==s.shadowSide?s.shadowSide:u[s.side],l.alphaMap=s.alphaMap,l.alphaTest=s.alphaTest,l.clipShadows=s.clipShadows,l.clippingPlanes=s.clippingPlanes,l.clipIntersection=s.clipIntersection,l.displacementMap=s.displacementMap,l.displacementScale=s.displacementScale,l.displacementBias=s.displacementBias,l.wireframeLinewidth=s.wireframeLinewidth,l.linewidth=s.linewidth,!0===r.isPointLight&&!0===l.isMeshDistanceMaterial&&(l.referencePosition.setFromMatrixPosition(r.matrixWorld),l.nearDistance=i,l.farDistance=n),l}function v(s,i,n,o,a){if(!1===s.visible)return;if(s.layers.test(i.layers)&&(s.isMesh||s.isLine||s.isPoints)&&(s.castShadow||s.receiveShadow&&3===a)&&(!s.frustumCulled||r.intersectsObject(s))){s.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,s.matrixWorld);const r=e.update(s),i=s.material;if(Array.isArray(i)){const e=r.groups;for(let h=0,c=e.length;h<c;h++){const c=e[h],l=i[c.materialIndex];if(l&&l.visible){const e=T(s,l,o,n.near,n.far,a);t.renderBufferDirect(n,null,r,e,s,c)}}}else if(i.visible){const e=T(s,i,o,n.near,n.far,a);t.renderBufferDirect(n,null,r,e,s,null)}}const h=s.children;for(let t=0,e=h.length;t<e;t++)v(h[t],i,n,o,a)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(e,s,a){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===e.length)return;const h=t.getRenderTarget(),c=t.getActiveCubeFace(),u=t.getActiveMipmapLevel(),p=t.state;p.setBlending(0),p.buffers.color.setClear(1,1,1,1),p.buffers.depth.setTest(!0),p.setScissorTest(!1);for(let h=0,c=e.length;h<c;h++){const c=e[h],u=c.shadow;if(void 0===u){console.warn("THREE.WebGLShadowMap:",c,"has no shadow.");continue}if(!1===u.autoUpdate&&!1===u.needsUpdate)continue;i.copy(u.mapSize);const d=u.getFrameExtents();if(i.multiply(d),n.copy(u.mapSize),(i.x>l||i.y>l)&&(i.x>l&&(n.x=Math.floor(l/d.x),i.x=n.x*d.x,u.mapSize.x=n.x),i.y>l&&(n.y=Math.floor(l/d.y),i.y=n.y*d.y,u.mapSize.y=n.y)),null!==u.map||u.isPointLightShadow||3!==this.type||(u.map=new Pe(i.x,i.y),u.map.texture.name=c.name+".shadowMap",u.mapPass=new Pe(i.x,i.y),u.camera.updateProjectionMatrix()),null===u.map){const t={minFilter:V,magFilter:V,format:st};u.map=new Pe(i.x,i.y,t),u.map.texture.name=c.name+".shadowMap",u.camera.updateProjectionMatrix()}t.setRenderTarget(u.map),t.clear();const m=u.getViewportCount();for(let t=0;t<m;t++){const e=u.getViewport(t);o.set(n.x*e.x,n.y*e.y,n.x*e.z,n.y*e.w),p.viewport(o),u.updateMatrices(c,t),r=u.getFrustum(),v(s,a,u.camera,c,this.type)}u.isPointLightShadow||3!==this.type||y(u,a),u.needsUpdate=!1}g.needsUpdate=!1,t.setRenderTarget(h,c,u)}}function Mo(t,e,s){const r=s.isWebGL2;const i=new function(){let e=!1;const s=new Me;let r=null;const i=new Me(0,0,0,0);return{setMask:function(s){r===s||e||(t.colorMask(s,s,s,s),r=s)},setLocked:function(t){e=t},setClear:function(e,r,n,o,a){!0===a&&(e*=o,r*=o,n*=o),s.set(e,r,n,o),!1===i.equals(s)&&(t.clearColor(e,r,n,o),i.copy(s))},reset:function(){e=!1,r=null,i.set(-1,0,0,0)}}},n=new function(){let e=!1,s=null,r=null,i=null;return{setTest:function(t){t?G(2929):j(2929)},setMask:function(r){s===r||e||(t.depthMask(r),s=r)},setFunc:function(e){if(r!==e){if(e)switch(e){case 0:t.depthFunc(512);break;case 1:t.depthFunc(519);break;case 2:t.depthFunc(513);break;case 3:t.depthFunc(515);break;case 4:t.depthFunc(514);break;case 5:t.depthFunc(518);break;case 6:t.depthFunc(516);break;case 7:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);r=e}},setLocked:function(t){e=t},setClear:function(e){i!==e&&(t.clearDepth(e),i=e)},reset:function(){e=!1,s=null,r=null,i=null}}},o=new function(){let e=!1,s=null,r=null,i=null,n=null,o=null,a=null,h=null,c=null;return{setTest:function(t){e||(t?G(2960):j(2960))},setMask:function(r){s===r||e||(t.stencilMask(r),s=r)},setFunc:function(e,s,o){r===e&&i===s&&n===o||(t.stencilFunc(e,s,o),r=e,i=s,n=o)},setOp:function(e,s,r){o===e&&a===s&&h===r||(t.stencilOp(e,s,r),o=e,a=s,h=r)},setLocked:function(t){e=t},setClear:function(e){c!==e&&(t.clearStencil(e),c=e)},reset:function(){e=!1,s=null,r=null,i=null,n=null,o=null,a=null,h=null,c=null}}};let a={},h={},c=new WeakMap,l=[],u=null,p=!1,d=null,m=null,f=null,g=null,y=null,T=null,v=null,b=!1,w=null,x=null,I=null,E=null,S=null;const A=t.getParameter(35661);let R=!1,C=0;const O=t.getParameter(7938);-1!==O.indexOf("WebGL")?(C=parseFloat(/^WebGL (\d)/.exec(O)[1]),R=C>=1):-1!==O.indexOf("OpenGL ES")&&(C=parseFloat(/^OpenGL ES (\d)/.exec(O)[1]),R=C>=2);let _=null,D={};const N=t.getParameter(3088),L=t.getParameter(2978),k=(new Me).fromArray(N),U=(new Me).fromArray(L);function H(e,s,r){const i=new Uint8Array(4),n=t.createTexture();t.bindTexture(e,n),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(let e=0;e<r;e++)t.texImage2D(s+e,0,6408,1,1,0,6408,5121,i);return n}const B={};function G(e){!0!==a[e]&&(t.enable(e),a[e]=!0)}function j(e){!1!==a[e]&&(t.disable(e),a[e]=!1)}B[3553]=H(3553,3553,1),B[34067]=H(34067,34069,6),i.setClear(0,0,0,1),n.setClear(1),o.setClear(0),G(2929),n.setFunc(3),Y(!1),X(1),G(2884),W(0);const z={[F]:32774,101:32778,102:32779};if(r)z[103]=32775,z[104]=32776;else{const t=e.get("EXT_blend_minmax");null!==t&&(z[103]=t.MIN_EXT,z[104]=t.MAX_EXT)}const V={200:0,201:1,202:768,[M]:770,210:776,208:774,206:772,203:769,[P]:771,209:775,207:773};function W(e,s,r,i,n,o,a,h){if(0!==e){if(!1===p&&(G(3042),p=!0),5===e)n=n||s,o=o||r,a=a||i,s===m&&n===y||(t.blendEquationSeparate(z[s],z[n]),m=s,y=n),r===f&&i===g&&o===T&&a===v||(t.blendFuncSeparate(V[r],V[i],V[o],V[a]),f=r,g=i,T=o,v=a),d=e,b=null;else if(e!==d||h!==b){if(m===F&&y===F||(t.blendEquation(32774),m=F,y=F),h)switch(e){case 1:t.blendFuncSeparate(1,771,1,771);break;case 2:t.blendFunc(1,1);break;case 3:t.blendFuncSeparate(0,769,0,1);break;case 4:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case 1:t.blendFuncSeparate(770,771,1,771);break;case 2:t.blendFunc(770,1);break;case 3:t.blendFuncSeparate(0,769,0,1);break;case 4:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}f=null,g=null,T=null,v=null,d=e,b=h}}else!0===p&&(j(3042),p=!1)}function Y(e){w!==e&&(e?t.frontFace(2304):t.frontFace(2305),w=e)}function X(e){0!==e?(G(2884),e!==x&&(1===e?t.cullFace(1029):2===e?t.cullFace(1028):t.cullFace(1032))):j(2884),x=e}function q(e,s,r){e?(G(32823),E===s&&S===r||(t.polygonOffset(s,r),E=s,S=r)):j(32823)}function K(e){void 0===e&&(e=33984+A-1),_!==e&&(t.activeTexture(e),_=e)}return{buffers:{color:i,depth:n,stencil:o},enable:G,disable:j,bindFramebuffer:function(e,s){return h[e]!==s&&(t.bindFramebuffer(e,s),h[e]=s,r&&(36009===e&&(h[36160]=s),36160===e&&(h[36009]=s)),!0)},drawBuffers:function(r,i){let n=l,o=!1;if(r)if(n=c.get(i),void 0===n&&(n=[],c.set(i,n)),r.isWebGLMultipleRenderTargets){const t=r.texture;if(n.length!==t.length||36064!==n[0]){for(let e=0,s=t.length;e<s;e++)n[e]=36064+e;n.length=t.length,o=!0}}else 36064!==n[0]&&(n[0]=36064,o=!0);else 1029!==n[0]&&(n[0]=1029,o=!0);o&&(s.isWebGL2?t.drawBuffers(n):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(n))},useProgram:function(e){return u!==e&&(t.useProgram(e),u=e,!0)},setBlending:W,setMaterial:function(t,e){2===t.side?j(2884):G(2884);let s=1===t.side;e&&(s=!s),Y(s),1===t.blending&&!1===t.transparent?W(0):W(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),n.setFunc(t.depthFunc),n.setTest(t.depthTest),n.setMask(t.depthWrite),i.setMask(t.colorWrite);const r=t.stencilWrite;o.setTest(r),r&&(o.setMask(t.stencilWriteMask),o.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),o.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),q(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?G(32926):j(32926)},setFlipSided:Y,setCullFace:X,setLineWidth:function(e){e!==I&&(R&&t.lineWidth(e),I=e)},setPolygonOffset:q,setScissorTest:function(t){t?G(3089):j(3089)},activeTexture:K,bindTexture:function(e,s){null===_&&K();let r=D[_];void 0===r&&(r={type:void 0,texture:void 0},D[_]=r),r.type===e&&r.texture===s||(t.bindTexture(e,s||B[e]),r.type=e,r.texture=s)},unbindTexture:function(){const e=D[_];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage2D:function(){try{t.texStorage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{t.texStorage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{t.texSubImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{t.texSubImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(e){!1===k.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),k.copy(e))},viewport:function(e){!1===U.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),U.copy(e))},reset:function(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),!0===r&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),a={},_=null,D={},h={},c=new WeakMap,l=[],u=null,p=!1,d=null,m=null,f=null,g=null,y=null,T=null,v=null,b=!1,w=null,x=null,I=null,E=null,S=null,k.set(0,0,t.canvas.width,t.canvas.height),U.set(0,0,t.canvas.width,t.canvas.height),i.reset(),n.reset(),o.reset()}}}function Po(t,e,s,r,i,n,o){const a=i.isWebGL2,h=i.maxTextures,c=i.maxCubemapSize,l=i.maxTextureSize,u=i.maxSamples,p=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,d=/OculusBrowser/g.test(navigator.userAgent),m=new WeakMap;let f;const g=new WeakMap;let y=!1;try{y="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(t){}function T(t,e){return y?new OffscreenCanvas(t,e):fe("canvas")}function v(t,e,s,r){let i=1;if((t.width>r||t.height>r)&&(i=r/Math.max(t.width,t.height)),i<1||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const r=e?he:Math.floor,n=r(i*t.width),o=r(i*t.height);void 0===f&&(f=T(n,o));const a=s?T(n,o):f;a.width=n,a.height=o;return a.getContext("2d").drawImage(t,0,0,n,o),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+n+"x"+o+")."),a}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function b(t){return oe(t.width)&&oe(t.height)}function w(t,e){return t.generateMipmaps&&e&&t.minFilter!==V&&t.minFilter!==X}function x(e){t.generateMipmap(e)}function I(s,r,i,n,o=!1){if(!1===a)return r;if(null!==s){if(void 0!==t[s])return t[s];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+s+"'")}let h=r;return 6403===r&&(5126===i&&(h=33326),5131===i&&(h=33325),5121===i&&(h=33321)),33319===r&&(5126===i&&(h=33328),5131===i&&(h=33327),5121===i&&(h=33323)),6408===r&&(5126===i&&(h=34836),5131===i&&(h=34842),5121===i&&(h=n===zt&&!1===o?35907:32856),32819===i&&(h=32854),32820===i&&(h=32855)),33325!==h&&33326!==h&&33327!==h&&33328!==h&&34842!==h&&34836!==h||e.get("EXT_color_buffer_float"),h}function E(t,e,s){return!0===w(t,s)||t.isFramebufferTexture&&t.minFilter!==V&&t.minFilter!==X?Math.log2(Math.max(e.width,e.height))+1:void 0!==t.mipmaps&&t.mipmaps.length>0?t.mipmaps.length:t.isCompressedTexture&&Array.isArray(t.image)?e.mipmaps.length:1}function S(t){return t===V||t===W||t===Y?9728:9729}function A(t){const e=t.target;e.removeEventListener("dispose",A),function(t){const e=r.get(t);if(void 0===e.__webglInit)return;const s=t.source,i=g.get(s);if(i){const r=i[e.__cacheKey];r.usedTimes--,0===r.usedTimes&&C(t),0===Object.keys(i).length&&g.delete(s)}r.remove(t)}(e),e.isVideoTexture&&m.delete(e)}function R(e){const s=e.target;s.removeEventListener("dispose",R),function(e){const s=e.texture,i=r.get(e),n=r.get(s);void 0!==n.__webglTexture&&(t.deleteTexture(n.__webglTexture),o.memory.textures--);e.depthTexture&&e.depthTexture.dispose();if(e.isWebGLCubeRenderTarget)for(let e=0;e<6;e++)t.deleteFramebuffer(i.__webglFramebuffer[e]),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer[e]);else t.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&t.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer&&t.deleteRenderbuffer(i.__webglColorRenderbuffer),i.__webglDepthRenderbuffer&&t.deleteRenderbuffer(i.__webglDepthRenderbuffer);if(e.isWebGLMultipleRenderTargets)for(let e=0,i=s.length;e<i;e++){const i=r.get(s[e]);i.__webglTexture&&(t.deleteTexture(i.__webglTexture),o.memory.textures--),r.remove(s[e])}r.remove(s),r.remove(e)}(s)}function C(e){const s=r.get(e);t.deleteTexture(s.__webglTexture);const i=e.source;delete g.get(i)[s.__cacheKey],o.memory.textures--}let O=0;function _(t,e){const i=r.get(t);if(t.isVideoTexture&&function(t){const e=o.render.frame;m.get(t)!==e&&(m.set(t,e),t.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&i.__version!==t.version){const s=t.image;if(null===s)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==s.complete)return void N(i,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}s.activeTexture(33984+e),s.bindTexture(3553,i.__webglTexture)}const D={[G]:10497,[j]:33071,[z]:33648},F={[V]:9728,[W]:9984,[Y]:9986,[X]:9729,[q]:9985,[K]:9987};function M(s,n,o){if(o?(t.texParameteri(s,10242,D[n.wrapS]),t.texParameteri(s,10243,D[n.wrapT]),32879!==s&&35866!==s||t.texParameteri(s,32882,D[n.wrapR]),t.texParameteri(s,10240,F[n.magFilter]),t.texParameteri(s,10241,F[n.minFilter])):(t.texParameteri(s,10242,33071),t.texParameteri(s,10243,33071),32879!==s&&35866!==s||t.texParameteri(s,32882,33071),n.wrapS===j&&n.wrapT===j||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(s,10240,S(n.magFilter)),t.texParameteri(s,10241,S(n.minFilter)),n.minFilter!==V&&n.minFilter!==X&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const o=e.get("EXT_texture_filter_anisotropic");if(n.type===Q&&!1===e.has("OES_texture_float_linear"))return;if(!1===a&&n.type===tt&&!1===e.has("OES_texture_half_float_linear"))return;(n.anisotropy>1||r.get(n).__currentAnisotropy)&&(t.texParameterf(s,o.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(n.anisotropy,i.getMaxAnisotropy())),r.get(n).__currentAnisotropy=n.anisotropy)}}function P(e,s){let r=!1;void 0===e.__webglInit&&(e.__webglInit=!0,s.addEventListener("dispose",A));const i=s.source;let n=g.get(i);void 0===n&&(n={},g.set(i,n));const a=function(t){const e=[];return e.push(t.wrapS),e.push(t.wrapT),e.push(t.magFilter),e.push(t.minFilter),e.push(t.anisotropy),e.push(t.internalFormat),e.push(t.format),e.push(t.type),e.push(t.generateMipmaps),e.push(t.premultiplyAlpha),e.push(t.flipY),e.push(t.unpackAlignment),e.push(t.encoding),e.join()}(s);if(a!==e.__cacheKey){void 0===n[a]&&(n[a]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,r=!0),n[a].usedTimes++;const i=n[e.__cacheKey];void 0!==i&&(n[e.__cacheKey].usedTimes--,0===i.usedTimes&&C(s)),e.__cacheKey=a,e.__webglTexture=n[a].texture}return r}function N(e,r,i){let o=3553;r.isDataArrayTexture&&(o=35866),r.isData3DTexture&&(o=32879);const h=P(e,r),c=r.source;if(s.activeTexture(33984+i),s.bindTexture(o,e.__webglTexture),c.version!==c.__currentVersion||!0===h){t.pixelStorei(37440,r.flipY),t.pixelStorei(37441,r.premultiplyAlpha),t.pixelStorei(3317,r.unpackAlignment),t.pixelStorei(37443,0);const i=function(t){return!a&&(t.wrapS!==j||t.wrapT!==j||t.minFilter!==V&&t.minFilter!==X)}(r)&&!1===b(r.image);let u=v(r.image,i,!1,l);u=nt(r,u);const p=b(u)||a,d=n.convert(r.format,r.encoding);let m,f=n.convert(r.type),g=I(r.internalFormat,d,f,r.encoding,r.isVideoTexture);M(o,r,p);const y=r.mipmaps,T=a&&!0!==r.isVideoTexture,S=void 0===e.__version||!0===h,A=E(r,u,p);if(r.isDepthTexture)g=6402,a?g=r.type===Q?36012:r.type===Z?33190:r.type===et?35056:33189:r.type===Q&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===rt&&6402===g&&r.type!==$&&r.type!==Z&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=$,f=n.convert(r.type)),r.format===it&&6402===g&&(g=34041,r.type!==et&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=et,f=n.convert(r.type))),S&&(T?s.texStorage2D(3553,1,g,u.width,u.height):s.texImage2D(3553,0,g,u.width,u.height,0,d,f,null));else if(r.isDataTexture)if(y.length>0&&p){T&&S&&s.texStorage2D(3553,A,g,y[0].width,y[0].height);for(let t=0,e=y.length;t<e;t++)m=y[t],T?s.texSubImage2D(3553,t,0,0,m.width,m.height,d,f,m.data):s.texImage2D(3553,t,g,m.width,m.height,0,d,f,m.data);r.generateMipmaps=!1}else T?(S&&s.texStorage2D(3553,A,g,u.width,u.height),s.texSubImage2D(3553,0,0,0,u.width,u.height,d,f,u.data)):s.texImage2D(3553,0,g,u.width,u.height,0,d,f,u.data);else if(r.isCompressedTexture){T&&S&&s.texStorage2D(3553,A,g,y[0].width,y[0].height);for(let t=0,e=y.length;t<e;t++)m=y[t],r.format!==st?null!==d?T?s.compressedTexSubImage2D(3553,t,0,0,m.width,m.height,d,m.data):s.compressedTexImage2D(3553,t,g,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):T?s.texSubImage2D(3553,t,0,0,m.width,m.height,d,f,m.data):s.texImage2D(3553,t,g,m.width,m.height,0,d,f,m.data)}else if(r.isDataArrayTexture)T?(S&&s.texStorage3D(35866,A,g,u.width,u.height,u.depth),s.texSubImage3D(35866,0,0,0,0,u.width,u.height,u.depth,d,f,u.data)):s.texImage3D(35866,0,g,u.width,u.height,u.depth,0,d,f,u.data);else if(r.isData3DTexture)T?(S&&s.texStorage3D(32879,A,g,u.width,u.height,u.depth),s.texSubImage3D(32879,0,0,0,0,u.width,u.height,u.depth,d,f,u.data)):s.texImage3D(32879,0,g,u.width,u.height,u.depth,0,d,f,u.data);else if(r.isFramebufferTexture){if(S)if(T)s.texStorage2D(3553,A,g,u.width,u.height);else{let t=u.width,e=u.height;for(let r=0;r<A;r++)s.texImage2D(3553,r,g,t,e,0,d,f,null),t>>=1,e>>=1}}else if(y.length>0&&p){T&&S&&s.texStorage2D(3553,A,g,y[0].width,y[0].height);for(let t=0,e=y.length;t<e;t++)m=y[t],T?s.texSubImage2D(3553,t,0,0,d,f,m):s.texImage2D(3553,t,g,d,f,m);r.generateMipmaps=!1}else T?(S&&s.texStorage2D(3553,A,g,u.width,u.height),s.texSubImage2D(3553,0,0,0,d,f,u)):s.texImage2D(3553,0,g,d,f,u);w(r,p)&&x(o),c.__currentVersion=c.version,r.onUpdate&&r.onUpdate(r)}e.__version=r.version}function L(e,i,o,a,h){const c=n.convert(o.format,o.encoding),l=n.convert(o.type),u=I(o.internalFormat,c,l,o.encoding);r.get(i).__hasExternalTextures||(32879===h||35866===h?s.texImage3D(h,0,u,i.width,i.height,i.depth,0,c,l,null):s.texImage2D(h,0,u,i.width,i.height,0,c,l,null)),s.bindFramebuffer(36160,e),B(i)?p.framebufferTexture2DMultisampleEXT(36160,a,h,r.get(o).__webglTexture,0,H(i)):t.framebufferTexture2D(36160,a,h,r.get(o).__webglTexture,0),s.bindFramebuffer(36160,null)}function k(e,s,r){if(t.bindRenderbuffer(36161,e),s.depthBuffer&&!s.stencilBuffer){let i=33189;if(r||B(s)){const e=s.depthTexture;e&&e.isDepthTexture&&(e.type===Q?i=36012:e.type===Z&&(i=33190));const r=H(s);B(s)?p.renderbufferStorageMultisampleEXT(36161,r,i,s.width,s.height):t.renderbufferStorageMultisample(36161,r,i,s.width,s.height)}else t.renderbufferStorage(36161,i,s.width,s.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(s.depthBuffer&&s.stencilBuffer){const i=H(s);r&&!1===B(s)?t.renderbufferStorageMultisample(36161,i,35056,s.width,s.height):B(s)?p.renderbufferStorageMultisampleEXT(36161,i,35056,s.width,s.height):t.renderbufferStorage(36161,34041,s.width,s.height),t.framebufferRenderbuffer(36160,33306,36161,e)}else{const e=!0===s.isWebGLMultipleRenderTargets?s.texture[0]:s.texture,i=n.convert(e.format,e.encoding),o=n.convert(e.type),a=I(e.internalFormat,i,o,e.encoding),h=H(s);r&&!1===B(s)?t.renderbufferStorageMultisample(36161,h,a,s.width,s.height):B(s)?p.renderbufferStorageMultisampleEXT(36161,h,a,s.width,s.height):t.renderbufferStorage(36161,a,s.width,s.height)}t.bindRenderbuffer(36161,null)}function U(e){const i=r.get(e),n=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture&&!i.__autoAllocateDepthBuffer){if(n)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(s.bindFramebuffer(36160,e),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),_(i.depthTexture,0);const n=r.get(i.depthTexture).__webglTexture,o=H(i);if(i.depthTexture.format===rt)B(i)?p.framebufferTexture2DMultisampleEXT(36160,36096,3553,n,0,o):t.framebufferTexture2D(36160,36096,3553,n,0);else{if(i.depthTexture.format!==it)throw new Error("Unknown depthTexture format");B(i)?p.framebufferTexture2DMultisampleEXT(36160,33306,3553,n,0,o):t.framebufferTexture2D(36160,33306,3553,n,0)}}(i.__webglFramebuffer,e)}else if(n){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)s.bindFramebuffer(36160,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=t.createRenderbuffer(),k(i.__webglDepthbuffer[r],e,!1)}else s.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=t.createRenderbuffer(),k(i.__webglDepthbuffer,e,!1);s.bindFramebuffer(36160,null)}function H(t){return Math.min(u,t.samples)}function B(t){const s=r.get(t);return a&&t.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==s.__useRenderToTexture}function nt(t,s){const r=t.encoding,i=t.format,n=t.type;return!0===t.isCompressedTexture||!0===t.isVideoTexture||t.format===Jt||r!==jt&&(r===zt?!1===a?!0===e.has("EXT_sRGB")&&i===st?(t.format=Jt,t.minFilter=X,t.generateMipmaps=!1):s=Ce.sRGBToLinear(s):i===st&&n===J||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",r)),s}this.allocateTextureUnit=function(){const t=O;return t>=h&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+h),O+=1,t},this.resetTextureUnits=function(){O=0},this.setTexture2D=_,this.setTexture2DArray=function(t,e){const i=r.get(t);t.version>0&&i.__version!==t.version?N(i,t,e):(s.activeTexture(33984+e),s.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(t,e){const i=r.get(t);t.version>0&&i.__version!==t.version?N(i,t,e):(s.activeTexture(33984+e),s.bindTexture(32879,i.__webglTexture))},this.setTextureCube=function(e,i){const o=r.get(e);e.version>0&&o.__version!==e.version?function(e,r,i){if(6!==r.image.length)return;const o=P(e,r),h=r.source;if(s.activeTexture(33984+i),s.bindTexture(34067,e.__webglTexture),h.version!==h.__currentVersion||!0===o){t.pixelStorei(37440,r.flipY),t.pixelStorei(37441,r.premultiplyAlpha),t.pixelStorei(3317,r.unpackAlignment),t.pixelStorei(37443,0);const i=r.isCompressedTexture||r.image[0].isCompressedTexture,o=r.image[0]&&r.image[0].isDataTexture,l=[];for(let t=0;t<6;t++)l[t]=i||o?o?r.image[t].image:r.image[t]:v(r.image[t],!1,!0,c),l[t]=nt(r,l[t]);const u=l[0],p=b(u)||a,d=n.convert(r.format,r.encoding),m=n.convert(r.type),f=I(r.internalFormat,d,m,r.encoding),g=a&&!0!==r.isVideoTexture,y=void 0===e.__version;let T,S=E(r,u,p);if(M(34067,r,p),i){g&&y&&s.texStorage2D(34067,S,f,u.width,u.height);for(let t=0;t<6;t++){T=l[t].mipmaps;for(let e=0;e<T.length;e++){const i=T[e];r.format!==st?null!==d?g?s.compressedTexSubImage2D(34069+t,e,0,0,i.width,i.height,d,i.data):s.compressedTexImage2D(34069+t,e,f,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):g?s.texSubImage2D(34069+t,e,0,0,i.width,i.height,d,m,i.data):s.texImage2D(34069+t,e,f,i.width,i.height,0,d,m,i.data)}}}else{T=r.mipmaps,g&&y&&(T.length>0&&S++,s.texStorage2D(34067,S,f,l[0].width,l[0].height));for(let t=0;t<6;t++)if(o){g?s.texSubImage2D(34069+t,0,0,0,l[t].width,l[t].height,d,m,l[t].data):s.texImage2D(34069+t,0,f,l[t].width,l[t].height,0,d,m,l[t].data);for(let e=0;e<T.length;e++){const r=T[e].image[t].image;g?s.texSubImage2D(34069+t,e+1,0,0,r.width,r.height,d,m,r.data):s.texImage2D(34069+t,e+1,f,r.width,r.height,0,d,m,r.data)}}else{g?s.texSubImage2D(34069+t,0,0,0,d,m,l[t]):s.texImage2D(34069+t,0,f,d,m,l[t]);for(let e=0;e<T.length;e++){const r=T[e];g?s.texSubImage2D(34069+t,e+1,0,0,d,m,r.image[t]):s.texImage2D(34069+t,e+1,f,d,m,r.image[t])}}}w(r,p)&&x(34067),h.__currentVersion=h.version,r.onUpdate&&r.onUpdate(r)}e.__version=r.version}(o,e,i):(s.activeTexture(33984+i),s.bindTexture(34067,o.__webglTexture))},this.rebindTextures=function(t,e,s){const i=r.get(t);void 0!==e&&L(i.__webglFramebuffer,t,t.texture,36064,3553),void 0!==s&&U(t)},this.setupRenderTarget=function(e){const h=e.texture,c=r.get(e),l=r.get(h);e.addEventListener("dispose",R),!0!==e.isWebGLMultipleRenderTargets&&(void 0===l.__webglTexture&&(l.__webglTexture=t.createTexture()),l.__version=h.version,o.memory.textures++);const u=!0===e.isWebGLCubeRenderTarget,p=!0===e.isWebGLMultipleRenderTargets,d=b(e)||a;if(u){c.__webglFramebuffer=[];for(let e=0;e<6;e++)c.__webglFramebuffer[e]=t.createFramebuffer()}else if(c.__webglFramebuffer=t.createFramebuffer(),p)if(i.drawBuffers){const s=e.texture;for(let e=0,i=s.length;e<i;e++){const i=r.get(s[e]);void 0===i.__webglTexture&&(i.__webglTexture=t.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(a&&e.samples>0&&!1===B(e)){c.__webglMultisampledFramebuffer=t.createFramebuffer(),c.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,c.__webglColorRenderbuffer);const r=n.convert(h.format,h.encoding),i=n.convert(h.type),o=I(h.internalFormat,r,i,h.encoding),a=H(e);t.renderbufferStorageMultisample(36161,a,o,e.width,e.height),s.bindFramebuffer(36160,c.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,c.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(c.__webglDepthRenderbuffer=t.createRenderbuffer(),k(c.__webglDepthRenderbuffer,e,!0)),s.bindFramebuffer(36160,null)}if(u){s.bindTexture(34067,l.__webglTexture),M(34067,h,d);for(let t=0;t<6;t++)L(c.__webglFramebuffer[t],e,h,36064,34069+t);w(h,d)&&x(34067),s.unbindTexture()}else if(p){const t=e.texture;for(let i=0,n=t.length;i<n;i++){const n=t[i],o=r.get(n);s.bindTexture(3553,o.__webglTexture),M(3553,n,d),L(c.__webglFramebuffer,e,n,36064+i,3553),w(n,d)&&x(3553)}s.unbindTexture()}else{let t=3553;(e.isWebGL3DRenderTarget||e.isWebGLArrayRenderTarget)&&(a?t=e.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),s.bindTexture(t,l.__webglTexture),M(t,h,d),L(c.__webglFramebuffer,e,h,36064,t),w(h,d)&&x(t),s.unbindTexture()}e.depthBuffer&&U(e)},this.updateRenderTargetMipmap=function(t){const e=b(t)||a,i=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let n=0,o=i.length;n<o;n++){const o=i[n];if(w(o,e)){const e=t.isWebGLCubeRenderTarget?34067:3553,i=r.get(o).__webglTexture;s.bindTexture(e,i),x(e),s.unbindTexture()}}},this.updateMultisampleRenderTarget=function(e){if(a&&e.samples>0&&!1===B(e)){const i=e.width,n=e.height;let o=16384;const a=[36064],h=e.stencilBuffer?33306:36096;e.depthBuffer&&a.push(h);const c=r.get(e),l=void 0!==c.__ignoreDepthValues&&c.__ignoreDepthValues;!1===l&&(e.depthBuffer&&(o|=256),e.stencilBuffer&&(o|=1024)),s.bindFramebuffer(36008,c.__webglMultisampledFramebuffer),s.bindFramebuffer(36009,c.__webglFramebuffer),!0===l&&(t.invalidateFramebuffer(36008,[h]),t.invalidateFramebuffer(36009,[h])),t.blitFramebuffer(0,0,i,n,0,0,i,n,o,9728),d&&t.invalidateFramebuffer(36008,a),s.bindFramebuffer(36008,null),s.bindFramebuffer(36009,c.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=U,this.setupFrameBufferTexture=L,this.useMultisampledRTT=B}function No(t,e,s){const r=s.isWebGL2;return{convert:function(s,i=null){let n;if(s===J)return 5121;if(1017===s)return 32819;if(1018===s)return 32820;if(1010===s)return 5120;if(1011===s)return 5122;if(s===$)return 5123;if(1013===s)return 5124;if(s===Z)return 5125;if(s===Q)return 5126;if(s===tt)return r?5131:(n=e.get("OES_texture_half_float"),null!==n?n.HALF_FLOAT_OES:null);if(1021===s)return 6406;if(s===st)return 6408;if(1024===s)return 6409;if(1025===s)return 6410;if(s===rt)return 6402;if(s===it)return 34041;if(s===nt)return 6403;if(1022===s)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(s===Jt)return n=e.get("EXT_sRGB"),null!==n?n.SRGB_ALPHA_EXT:null;if(1029===s)return 36244;if(1030===s)return 33319;if(1031===s)return 33320;if(1033===s)return 36249;if(s===ot||s===at||s===ht||s===ct)if(i===zt){if(n=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===n)return null;if(s===ot)return n.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===at)return n.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===ht)return n.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===ct)return n.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(n=e.get("WEBGL_compressed_texture_s3tc"),null===n)return null;if(s===ot)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===at)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===ht)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===ct)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(s===lt||s===ut||s===pt||s===dt){if(n=e.get("WEBGL_compressed_texture_pvrtc"),null===n)return null;if(s===lt)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===ut)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===pt)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===dt)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(s===mt)return n=e.get("WEBGL_compressed_texture_etc1"),null!==n?n.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===ft||s===gt){if(n=e.get("WEBGL_compressed_texture_etc"),null===n)return null;if(s===ft)return i===zt?n.COMPRESSED_SRGB8_ETC2:n.COMPRESSED_RGB8_ETC2;if(s===gt)return i===zt?n.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:n.COMPRESSED_RGBA8_ETC2_EAC}if(s===yt||s===Tt||s===vt||s===bt||s===wt||s===xt||s===It||s===Et||s===St||s===At||s===Rt||s===Ct||s===Ot||s===_t){if(n=e.get("WEBGL_compressed_texture_astc"),null===n)return null;if(s===yt)return i===zt?n.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:n.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===Tt)return i===zt?n.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:n.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===vt)return i===zt?n.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:n.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===bt)return i===zt?n.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:n.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===wt)return i===zt?n.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:n.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===xt)return i===zt?n.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:n.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===It)return i===zt?n.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:n.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===Et)return i===zt?n.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:n.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===St)return i===zt?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:n.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===At)return i===zt?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:n.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===Rt)return i===zt?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:n.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===Ct)return i===zt?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:n.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===Ot)return i===zt?n.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:n.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===_t)return i===zt?n.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:n.COMPRESSED_RGBA_ASTC_12x12_KHR}if(s===Dt){if(n=e.get("EXT_texture_compression_bptc"),null===n)return null;if(s===Dt)return i===zt?n.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:n.COMPRESSED_RGBA_BPTC_UNORM_EXT}return s===et?r?34042:(n=e.get("WEBGL_depth_texture"),null!==n?n.UNSIGNED_INT_24_8_WEBGL:null):void 0!==t[s]?t[s]:null}}}class Lo extends Jr{constructor(t=[]){super(),this.cameras=t}}Lo.prototype.isArrayCamera=!0;class ko extends zs{constructor(){super(),this.type="Group"}}ko.prototype.isGroup=!0;const Uo={type:"move"};class Ho{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new ko,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new ko,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Ge,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Ge),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new ko,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Ge,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Ge),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,s){let r=null,i=null,n=null;const o=this._targetRay,a=this._grip,h=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState)if(null!==o&&(r=e.getPose(t.targetRaySpace,s),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(Uo))),h&&t.hand){n=!0;for(const r of t.hand.values()){const t=e.getJointPose(r,s);if(void 0===h.joints[r.jointName]){const t=new ko;t.matrixAutoUpdate=!1,t.visible=!1,h.joints[r.jointName]=t,h.add(t)}const i=h.joints[r.jointName];null!==t&&(i.matrix.fromArray(t.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.jointRadius=t.radius),i.visible=null!==t}const r=h.joints["index-finger-tip"],i=h.joints["thumb-tip"],o=r.position.distanceTo(i.position),a=.02,c=.005;h.inputState.pinching&&o>a+c?(h.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!h.inputState.pinching&&o<=a-c&&(h.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==a&&t.gripSpace&&(i=e.getPose(t.gripSpace,s),null!==i&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1));return null!==o&&(o.visible=null!==r),null!==a&&(a.visible=null!==i),null!==h&&(h.visible=null!==n),this}}class Bo extends Fe{constructor(t,e,s,r,i,n,o,a,h,c){if((c=void 0!==c?c:rt)!==rt&&c!==it)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===s&&c===rt&&(s=$),void 0===s&&c===it&&(s=et),super(null,r,i,n,o,a,c,s,h),this.image={width:t,height:e},this.magFilter=void 0!==o?o:V,this.minFilter=void 0!==a?a:V,this.flipY=!1,this.generateMipmaps=!1}}Bo.prototype.isDepthTexture=!0;class Go extends $t{constructor(t,e){super();const s=this;let r=null,i=1,n=null,o="local-floor",a=null,h=null,c=null,l=null,u=null,p=null;const d=e.getContextAttributes();let m=null,f=null;const g=[],y=new Map,T=new Jr;T.layers.enable(1),T.viewport=new Me;const v=new Jr;v.layers.enable(2),v.viewport=new Me;const b=[T,v],w=new Lo;w.layers.enable(1),w.layers.enable(2);let x=null,I=null;function E(t){const e=y.get(t.inputSource);e&&e.dispatchEvent({type:t.type,data:t.inputSource})}function S(){y.forEach((function(t,e){t.disconnect(e)})),y.clear(),x=null,I=null,t.setRenderTarget(m),u=null,l=null,c=null,r=null,f=null,D.stop(),s.isPresenting=!1,s.dispatchEvent({type:"sessionend"})}function A(t){const e=r.inputSources;for(let t=0;t<e.length;t++){const s="right"===e[t].handedness?1:0;y.set(e[t],g[s])}for(let e=0;e<t.removed.length;e++){const s=t.removed[e],r=y.get(s);r&&(r.dispatchEvent({type:"disconnected",data:s}),y.delete(s))}for(let e=0;e<t.added.length;e++){const s=t.added[e],r=y.get(s);r&&r.dispatchEvent({type:"connected",data:s})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=g[t];return void 0===e&&(e=new Ho,g[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=g[t];return void 0===e&&(e=new Ho,g[t]=e),e.getGripSpace()},this.getHand=function(t){let e=g[t];return void 0===e&&(e=new Ho,g[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){i=t,!0===s.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){o=t,!0===s.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return a||n},this.setReferenceSpace=function(t){a=t},this.getBaseLayer=function(){return null!==l?l:u},this.getBinding=function(){return c},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=async function(a){if(r=a,null!==r){if(m=t.getRenderTarget(),r.addEventListener("select",E),r.addEventListener("selectstart",E),r.addEventListener("selectend",E),r.addEventListener("squeeze",E),r.addEventListener("squeezestart",E),r.addEventListener("squeezeend",E),r.addEventListener("end",S),r.addEventListener("inputsourceschange",A),!0!==d.xrCompatible&&await e.makeXRCompatible(),void 0===r.renderState.layers||!1===t.capabilities.isWebGL2){const s={antialias:void 0!==r.renderState.layers||d.antialias,alpha:d.alpha,depth:d.depth,stencil:d.stencil,framebufferScaleFactor:i};u=new XRWebGLLayer(r,e,s),r.updateRenderState({baseLayer:u}),f=new Pe(u.framebufferWidth,u.framebufferHeight,{format:st,type:J,encoding:t.outputEncoding})}else{let s=null,n=null,o=null;d.depth&&(o=d.stencil?35056:33190,s=d.stencil?it:rt,n=d.stencil?et:$);const a={colorFormat:t.outputEncoding===zt?35907:32856,depthFormat:o,scaleFactor:i};c=new XRWebGLBinding(r,e),l=c.createProjectionLayer(a),r.updateRenderState({layers:[l]}),f=new Pe(l.textureWidth,l.textureHeight,{format:st,type:J,depthTexture:new Bo(l.textureWidth,l.textureHeight,n,void 0,void 0,void 0,void 0,void 0,void 0,s),stencilBuffer:d.stencil,encoding:t.outputEncoding,samples:d.antialias?4:0});t.properties.get(f).__ignoreDepthValues=l.ignoreDepthValues}f.isXRRenderTarget=!0,this.setFoveation(1),n=await r.requestReferenceSpace(o),D.setContext(r),D.start(),s.isPresenting=!0,s.dispatchEvent({type:"sessionstart"})}};const R=new Ge,C=new Ge;function O(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.updateCamera=function(t){if(null===r)return;w.near=v.near=T.near=t.near,w.far=v.far=T.far=t.far,x===w.near&&I===w.far||(r.updateRenderState({depthNear:w.near,depthFar:w.far}),x=w.near,I=w.far);const e=t.parent,s=w.cameras;O(w,e);for(let t=0;t<s.length;t++)O(s[t],e);w.matrixWorld.decompose(w.position,w.quaternion,w.scale),t.position.copy(w.position),t.quaternion.copy(w.quaternion),t.scale.copy(w.scale),t.matrix.copy(w.matrix),t.matrixWorld.copy(w.matrixWorld);const i=t.children;for(let t=0,e=i.length;t<e;t++)i[t].updateMatrixWorld(!0);2===s.length?function(t,e,s){R.setFromMatrixPosition(e.matrixWorld),C.setFromMatrixPosition(s.matrixWorld);const r=R.distanceTo(C),i=e.projectionMatrix.elements,n=s.projectionMatrix.elements,o=i[14]/(i[10]-1),a=i[14]/(i[10]+1),h=(i[9]+1)/i[5],c=(i[9]-1)/i[5],l=(i[8]-1)/i[0],u=(n[8]+1)/n[0],p=o*l,d=o*u,m=r/(-l+u),f=m*-l;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(f),t.translateZ(m),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();const g=o+m,y=a+m,T=p-f,v=d+(r-f),b=h*a/y*g,w=c*a/y*g;t.projectionMatrix.makePerspective(T,v,b,w,g,y)}(w,T,v):w.projectionMatrix.copy(T.projectionMatrix)},this.getCamera=function(){return w},this.getFoveation=function(){return null!==l?l.fixedFoveation:null!==u?u.fixedFoveation:void 0},this.setFoveation=function(t){null!==l&&(l.fixedFoveation=t),null!==u&&void 0!==u.fixedFoveation&&(u.fixedFoveation=t)};let _=null;const D=new hi;D.setAnimationLoop((function(e,s){if(h=s.getViewerPose(a||n),p=s,null!==h){const e=h.views;null!==u&&(t.setRenderTargetFramebuffer(f,u.framebuffer),t.setRenderTarget(f));let s=!1;e.length!==w.cameras.length&&(w.cameras.length=0,s=!0);for(let r=0;r<e.length;r++){const i=e[r];let n=null;if(null!==u)n=u.getViewport(i);else{const e=c.getViewSubImage(l,i);n=e.viewport,0===r&&(t.setRenderTargetTextures(f,e.colorTexture,l.ignoreDepthValues?void 0:e.depthStencilTexture),t.setRenderTarget(f))}const o=b[r];o.matrix.fromArray(i.transform.matrix),o.projectionMatrix.fromArray(i.projectionMatrix),o.viewport.set(n.x,n.y,n.width,n.height),0===r&&w.matrix.copy(o.matrix),!0===s&&w.cameras.push(o)}}const i=r.inputSources;for(let t=0;t<g.length;t++){const e=i[t],r=y.get(e);void 0!==r&&r.update(e,s,a||n)}_&&_(e,s),p=null})),this.setAnimationLoop=function(t){_=t},this.dispose=function(){}}}function jo(t,e){function s(s,r){s.opacity.value=r.opacity,r.color&&s.diffuse.value.copy(r.color),r.emissive&&s.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(s.map.value=r.map),r.alphaMap&&(s.alphaMap.value=r.alphaMap),r.bumpMap&&(s.bumpMap.value=r.bumpMap,s.bumpScale.value=r.bumpScale,1===r.side&&(s.bumpScale.value*=-1)),r.displacementMap&&(s.displacementMap.value=r.displacementMap,s.displacementScale.value=r.displacementScale,s.displacementBias.value=r.displacementBias),r.emissiveMap&&(s.emissiveMap.value=r.emissiveMap),r.normalMap&&(s.normalMap.value=r.normalMap,s.normalScale.value.copy(r.normalScale),1===r.side&&s.normalScale.value.negate()),r.specularMap&&(s.specularMap.value=r.specularMap),r.alphaTest>0&&(s.alphaTest.value=r.alphaTest);const i=e.get(r).envMap;if(i&&(s.envMap.value=i,s.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,s.reflectivity.value=r.reflectivity,s.ior.value=r.ior,s.refractionRatio.value=r.refractionRatio),r.lightMap){s.lightMap.value=r.lightMap;const e=!0!==t.physicallyCorrectLights?Math.PI:1;s.lightMapIntensity.value=r.lightMapIntensity*e}let n,o;r.aoMap&&(s.aoMap.value=r.aoMap,s.aoMapIntensity.value=r.aoMapIntensity),r.map?n=r.map:r.specularMap?n=r.specularMap:r.displacementMap?n=r.displacementMap:r.normalMap?n=r.normalMap:r.bumpMap?n=r.bumpMap:r.roughnessMap?n=r.roughnessMap:r.metalnessMap?n=r.metalnessMap:r.alphaMap?n=r.alphaMap:r.emissiveMap?n=r.emissiveMap:r.clearcoatMap?n=r.clearcoatMap:r.clearcoatNormalMap?n=r.clearcoatNormalMap:r.clearcoatRoughnessMap?n=r.clearcoatRoughnessMap:r.specularIntensityMap?n=r.specularIntensityMap:r.specularColorMap?n=r.specularColorMap:r.transmissionMap?n=r.transmissionMap:r.thicknessMap?n=r.thicknessMap:r.sheenColorMap?n=r.sheenColorMap:r.sheenRoughnessMap&&(n=r.sheenRoughnessMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),s.uvTransform.value.copy(n.matrix)),r.aoMap?o=r.aoMap:r.lightMap&&(o=r.lightMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),s.uv2Transform.value.copy(o.matrix))}return{refreshFogUniforms:function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)},refreshMaterialUniforms:function(t,r,i,n,o){r.isMeshBasicMaterial||r.isMeshLambertMaterial?s(t,r):r.isMeshToonMaterial?(s(t,r),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap)}(t,r)):r.isMeshPhongMaterial?(s(t,r),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4)}(t,r)):r.isMeshStandardMaterial?(s(t,r),function(t,s){t.roughness.value=s.roughness,t.metalness.value=s.metalness,s.roughnessMap&&(t.roughnessMap.value=s.roughnessMap);s.metalnessMap&&(t.metalnessMap.value=s.metalnessMap);e.get(s).envMap&&(t.envMapIntensity.value=s.envMapIntensity)}(t,r),r.isMeshPhysicalMaterial&&function(t,e,s){t.ior.value=e.ior,e.sheen>0&&(t.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),t.sheenRoughness.value=e.sheenRoughness,e.sheenColorMap&&(t.sheenColorMap.value=e.sheenColorMap),e.sheenRoughnessMap&&(t.sheenRoughnessMap.value=e.sheenRoughnessMap));e.clearcoat>0&&(t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap),e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,1===e.side&&t.clearcoatNormalScale.value.negate()));e.transmission>0&&(t.transmission.value=e.transmission,t.transmissionSamplerMap.value=s.texture,t.transmissionSamplerSize.value.set(s.width,s.height),e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor));t.specularIntensity.value=e.specularIntensity,t.specularColor.value.copy(e.specularColor),e.specularIntensityMap&&(t.specularIntensityMap.value=e.specularIntensityMap);e.specularColorMap&&(t.specularColorMap.value=e.specularColorMap)}(t,r,o)):r.isMeshMatcapMaterial?(s(t,r),function(t,e){e.matcap&&(t.matcap.value=e.matcap)}(t,r)):r.isMeshDepthMaterial?s(t,r):r.isMeshDistanceMaterial?(s(t,r),function(t,e){t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(t,r)):r.isMeshNormalMaterial?s(t,r):r.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}(t,r),r.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,r)):r.isPointsMaterial?function(t,e,s,r){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*s,t.scale.value=.5*r,e.map&&(t.map.value=e.map);e.alphaMap&&(t.alphaMap.value=e.alphaMap);e.alphaTest>0&&(t.alphaTest.value=e.alphaTest);let i;e.map?i=e.map:e.alphaMap&&(i=e.alphaMap);void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix))}(t,r,i,n):r.isSpriteMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map);e.alphaMap&&(t.alphaMap.value=e.alphaMap);e.alphaTest>0&&(t.alphaTest.value=e.alphaTest);let s;e.map?s=e.map:e.alphaMap&&(s=e.alphaMap);void 0!==s&&(!0===s.matrixAutoUpdate&&s.updateMatrix(),t.uvTransform.value.copy(s.matrix))}(t,r):r.isShadowMaterial?(t.color.value.copy(r.color),t.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function zo(t={}){const e=void 0!==t.canvas?t.canvas:function(){const t=fe("canvas");return t.style.display="block",t}(),s=void 0!==t.context?t.context:null,r=void 0===t.depth||t.depth,i=void 0===t.stencil||t.stencil,n=void 0!==t.antialias&&t.antialias,o=void 0===t.premultipliedAlpha||t.premultipliedAlpha,a=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,h=void 0!==t.powerPreference?t.powerPreference:"default",c=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat;let l;l=null!==s?s.getContextAttributes().alpha:void 0!==t.alpha&&t.alpha;let u=null,p=null;const d=[],m=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=jt,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const f=this;let g=!1,y=0,T=0,v=null,b=-1,w=null;const x=new Me,I=new Me;let E=null,S=e.width,A=e.height,R=1,C=null,O=null;const _=new Me(0,0,S,A),D=new Me(0,0,S,A);let F=!1;const M=new ai;let P=!1,N=!1,L=null;const k=new Ts,U=new le,H=new Ge,B={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function G(){return null===v?R:1}let j,z,V,W,Y,X,q,$,Z,et,rt,it,nt,ot,at,ht,ct,lt,ut,pt,dt,mt,ft,gt=s;function yt(t,s){for(let r=0;r<t.length;r++){const i=t[r],n=e.getContext(i,s);if(null!==n)return n}return null}try{const t={alpha:!0,depth:r,stencil:i,antialias:n,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:h,failIfMajorPerformanceCaveat:c};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r140"),e.addEventListener("webglcontextlost",bt,!1),e.addEventListener("webglcontextrestored",wt,!1),null===gt){const e=["webgl2","webgl","experimental-webgl"];if(!0===f.isWebGL1Renderer&&e.shift(),gt=yt(e,t),null===gt)throw yt(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===gt.getShaderPrecisionFormat&&(gt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}function Tt(){j=new Li(gt),z=new yi(gt,j,t),j.init(z),mt=new No(gt,j,z),V=new Mo(gt,j,z),W=new Hi(gt),Y=new vo,X=new Po(gt,j,V,Y,z,mt,W),q=new vi(f),$=new Ni(f),Z=new ci(gt,z),ft=new fi(gt,j,Z,z),et=new ki(gt,Z,W,ft),rt=new Vi(gt,et,Z,W),ut=new zi(gt,z,X),ht=new Ti(Y),it=new To(f,q,$,j,z,ft,ht),nt=new jo(f,Y),ot=new Io,at=new Oo(j,z),lt=new mi(f,q,V,rt,l,o),ct=new Fo(f,rt,z),pt=new gi(gt,j,W,z),dt=new Ui(gt,j,W,z),W.programs=it.programs,f.capabilities=z,f.extensions=j,f.properties=Y,f.renderLists=ot,f.shadowMap=ct,f.state=V,f.info=W}Tt();const vt=new Go(f,gt);function bt(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function wt(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const t=W.autoReset,e=ct.enabled,s=ct.autoUpdate,r=ct.needsUpdate,i=ct.type;Tt(),W.autoReset=t,ct.enabled=e,ct.autoUpdate=s,ct.needsUpdate=r,ct.type=i}function xt(t){const e=t.target;e.removeEventListener("dispose",xt),function(t){(function(t){const e=Y.get(t).programs;void 0!==e&&(e.forEach((function(t){it.releaseProgram(t)})),t.isShaderMaterial&&it.releaseShaderCache(t))})(t),Y.remove(t)}(e)}this.xr=vt,this.getContext=function(){return gt},this.getContextAttributes=function(){return gt.getContextAttributes()},this.forceContextLoss=function(){const t=j.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=j.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return R},this.setPixelRatio=function(t){void 0!==t&&(R=t,this.setSize(S,A,!1))},this.getSize=function(t){return t.set(S,A)},this.setSize=function(t,s,r){vt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(S=t,A=s,e.width=Math.floor(t*R),e.height=Math.floor(s*R),!1!==r&&(e.style.width=t+"px",e.style.height=s+"px"),this.setViewport(0,0,t,s))},this.getDrawingBufferSize=function(t){return t.set(S*R,A*R).floor()},this.setDrawingBufferSize=function(t,s,r){S=t,A=s,R=r,e.width=Math.floor(t*r),e.height=Math.floor(s*r),this.setViewport(0,0,t,s)},this.getCurrentViewport=function(t){return t.copy(x)},this.getViewport=function(t){return t.copy(_)},this.setViewport=function(t,e,s,r){t.isVector4?_.set(t.x,t.y,t.z,t.w):_.set(t,e,s,r),V.viewport(x.copy(_).multiplyScalar(R).floor())},this.getScissor=function(t){return t.copy(D)},this.setScissor=function(t,e,s,r){t.isVector4?D.set(t.x,t.y,t.z,t.w):D.set(t,e,s,r),V.scissor(I.copy(D).multiplyScalar(R).floor())},this.getScissorTest=function(){return F},this.setScissorTest=function(t){V.setScissorTest(F=t)},this.setOpaqueSort=function(t){C=t},this.setTransparentSort=function(t){O=t},this.getClearColor=function(t){return t.copy(lt.getClearColor())},this.setClearColor=function(){lt.setClearColor.apply(lt,arguments)},this.getClearAlpha=function(){return lt.getClearAlpha()},this.setClearAlpha=function(){lt.setClearAlpha.apply(lt,arguments)},this.clear=function(t=!0,e=!0,s=!0){let r=0;t&&(r|=16384),e&&(r|=256),s&&(r|=1024),gt.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",bt,!1),e.removeEventListener("webglcontextrestored",wt,!1),ot.dispose(),at.dispose(),Y.dispose(),q.dispose(),$.dispose(),rt.dispose(),ft.dispose(),it.dispose(),vt.dispose(),vt.removeEventListener("sessionstart",Et),vt.removeEventListener("sessionend",St),L&&(L.dispose(),L=null),At.stop()},this.renderBufferDirect=function(t,e,s,r,i,n){null===e&&(e=B);const o=i.isMesh&&i.matrixWorld.determinant()<0,a=function(t,e,s,r,i){!0!==e.isScene&&(e=B);X.resetTextureUnits();const n=e.fog,o=r.isMeshStandardMaterial?e.environment:null,a=null===v?f.outputEncoding:!0===v.isXRRenderTarget?v.texture.encoding:jt,h=(r.isMeshStandardMaterial?$:q).get(r.envMap||o),c=!0===r.vertexColors&&!!s.attributes.color&&4===s.attributes.color.itemSize,l=!!r.normalMap&&!!s.attributes.tangent,u=!!s.morphAttributes.position,d=!!s.morphAttributes.normal,m=!!s.morphAttributes.color,g=r.toneMapped?f.toneMapping:0,y=s.morphAttributes.position||s.morphAttributes.normal||s.morphAttributes.color,T=void 0!==y?y.length:0,x=Y.get(r),I=p.state.lights;if(!0===P&&(!0===N||t!==w)){const e=t===w&&r.id===b;ht.setState(r,t,e)}let E=!1;r.version===x.__version?x.needsLights&&x.lightsStateVersion!==I.state.version||x.outputEncoding!==a||i.isInstancedMesh&&!1===x.instancing?E=!0:i.isInstancedMesh||!0!==x.instancing?i.isSkinnedMesh&&!1===x.skinning?E=!0:i.isSkinnedMesh||!0!==x.skinning?x.envMap!==h||!0===r.fog&&x.fog!==n?E=!0:void 0===x.numClippingPlanes||x.numClippingPlanes===ht.numPlanes&&x.numIntersection===ht.numIntersection?(x.vertexAlphas!==c||x.vertexTangents!==l||x.morphTargets!==u||x.morphNormals!==d||x.morphColors!==m||x.toneMapping!==g||!0===z.isWebGL2&&x.morphTargetsCount!==T)&&(E=!0):E=!0:E=!0:E=!0:(E=!0,x.__version=r.version);let S=x.currentProgram;!0===E&&(S=Dt(r,e,i));let C=!1,O=!1,_=!1;const D=S.getUniforms(),F=x.uniforms;V.useProgram(S.program)&&(C=!0,O=!0,_=!0);r.id!==b&&(b=r.id,O=!0);if(C||w!==t){if(D.setValue(gt,"projectionMatrix",t.projectionMatrix),z.logarithmicDepthBuffer&&D.setValue(gt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),w!==t&&(w=t,O=!0,_=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){const e=D.map.cameraPosition;void 0!==e&&e.setValue(gt,H.setFromMatrixPosition(t.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&D.setValue(gt,"isOrthographic",!0===t.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&D.setValue(gt,"viewMatrix",t.matrixWorldInverse)}if(i.isSkinnedMesh){D.setOptional(gt,i,"bindMatrix"),D.setOptional(gt,i,"bindMatrixInverse");const t=i.skeleton;t&&(z.floatVertexTextures?(null===t.boneTexture&&t.computeBoneTexture(),D.setValue(gt,"boneTexture",t.boneTexture,X),D.setValue(gt,"boneTextureSize",t.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const M=s.morphAttributes;(void 0!==M.position||void 0!==M.normal||void 0!==M.color&&!0===z.isWebGL2)&&ut.update(i,s,r,S);(O||x.receiveShadow!==i.receiveShadow)&&(x.receiveShadow=i.receiveShadow,D.setValue(gt,"receiveShadow",i.receiveShadow));O&&(D.setValue(gt,"toneMappingExposure",f.toneMappingExposure),x.needsLights&&(U=_,(k=F).ambientLightColor.needsUpdate=U,k.lightProbe.needsUpdate=U,k.directionalLights.needsUpdate=U,k.directionalLightShadows.needsUpdate=U,k.pointLights.needsUpdate=U,k.pointLightShadows.needsUpdate=U,k.spotLights.needsUpdate=U,k.spotLightShadows.needsUpdate=U,k.rectAreaLights.needsUpdate=U,k.hemisphereLights.needsUpdate=U),n&&!0===r.fog&&nt.refreshFogUniforms(F,n),nt.refreshMaterialUniforms(F,r,R,A,L),Kn.upload(gt,x.uniformsList,F,X));var k,U;r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(Kn.upload(gt,x.uniformsList,F,X),r.uniformsNeedUpdate=!1);r.isSpriteMaterial&&D.setValue(gt,"center",i.center);return D.setValue(gt,"modelViewMatrix",i.modelViewMatrix),D.setValue(gt,"normalMatrix",i.normalMatrix),D.setValue(gt,"modelMatrix",i.matrixWorld),S}(t,e,s,r,i);V.setMaterial(r,o);let h=s.index;const c=s.attributes.position;if(null===h){if(void 0===c||0===c.count)return}else if(0===h.count)return;let l,u=1;!0===r.wireframe&&(h=et.getWireframeAttribute(s),u=2),ft.setup(i,r,a,s,h);let d=pt;null!==h&&(l=Z.get(h),d=dt,d.setIndex(l));const m=null!==h?h.count:c.count,g=s.drawRange.start*u,y=s.drawRange.count*u,T=null!==n?n.start*u:0,x=null!==n?n.count*u:1/0,I=Math.max(g,T),E=Math.min(m,g+y,T+x)-1,S=Math.max(0,E-I+1);if(0!==S){if(i.isMesh)!0===r.wireframe?(V.setLineWidth(r.wireframeLinewidth*G()),d.setMode(1)):d.setMode(4);else if(i.isLine){let t=r.linewidth;void 0===t&&(t=1),V.setLineWidth(t*G()),i.isLineSegments?d.setMode(1):i.isLineLoop?d.setMode(2):d.setMode(3)}else i.isPoints?d.setMode(0):i.isSprite&&d.setMode(4);if(i.isInstancedMesh)d.renderInstances(I,S,i.count);else if(s.isInstancedBufferGeometry){const t=Math.min(s.instanceCount,s._maxInstanceCount);d.renderInstances(I,S,t)}else d.render(I,S)}},this.compile=function(t,e){p=at.get(t),p.init(),m.push(p),t.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(p.pushLight(t),t.castShadow&&p.pushShadow(t))})),p.setupLights(f.physicallyCorrectLights),t.traverse((function(e){const s=e.material;if(s)if(Array.isArray(s))for(let r=0;r<s.length;r++){Dt(s[r],t,e)}else Dt(s,t,e)})),m.pop(),p=null};let It=null;function Et(){At.stop()}function St(){At.start()}const At=new hi;function Rt(t,e,s,r){if(!1===t.visible)return;if(t.layers.test(e.layers))if(t.isGroup)s=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)p.pushLight(t),t.castShadow&&p.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||M.intersectsSprite(t)){r&&H.setFromMatrixPosition(t.matrixWorld).applyMatrix4(k);const e=rt.update(t),i=t.material;i.visible&&u.push(t,e,i,s,H.z,null)}}else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.frame!==W.render.frame&&(t.skeleton.update(),t.skeleton.frame=W.render.frame),!t.frustumCulled||M.intersectsObject(t))){r&&H.setFromMatrixPosition(t.matrixWorld).applyMatrix4(k);const e=rt.update(t),i=t.material;if(Array.isArray(i)){const r=e.groups;for(let n=0,o=r.length;n<o;n++){const o=r[n],a=i[o.materialIndex];a&&a.visible&&u.push(t,e,a,s,H.z,o)}}else i.visible&&u.push(t,e,i,s,H.z,null)}const i=t.children;for(let t=0,n=i.length;t<n;t++)Rt(i[t],e,s,r)}function Ct(t,e,s,r){const i=t.opaque,o=t.transmissive,a=t.transparent;p.setupLightsView(s),o.length>0&&function(t,e,s){const r=z.isWebGL2;null===L&&(L=new Pe(1,1,{generateMipmaps:!0,type:j.has("EXT_color_buffer_half_float")?tt:J,minFilter:K,samples:r&&!0===n?4:0}));f.getDrawingBufferSize(U),r?L.setSize(U.x,U.y):L.setSize(he(U.x),he(U.y));const i=f.getRenderTarget();f.setRenderTarget(L),f.clear();const o=f.toneMapping;f.toneMapping=0,Ot(t,e,s),f.toneMapping=o,X.updateMultisampleRenderTarget(L),X.updateRenderTargetMipmap(L),f.setRenderTarget(i)}(i,e,s),r&&V.viewport(x.copy(r)),i.length>0&&Ot(i,e,s),o.length>0&&Ot(o,e,s),a.length>0&&Ot(a,e,s),V.buffers.depth.setTest(!0),V.buffers.depth.setMask(!0),V.buffers.color.setMask(!0),V.setPolygonOffset(!1)}function Ot(t,e,s){const r=!0===e.isScene?e.overrideMaterial:null;for(let i=0,n=t.length;i<n;i++){const n=t[i],o=n.object,a=n.geometry,h=null===r?n.material:r,c=n.group;o.layers.test(s.layers)&&_t(o,e,s,a,h,c)}}function _t(t,e,s,r,i,n){t.onBeforeRender(f,e,s,r,i,n),t.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),i.onBeforeRender(f,e,s,r,t,n),!0===i.transparent&&2===i.side?(i.side=1,i.needsUpdate=!0,f.renderBufferDirect(s,e,r,i,t,n),i.side=0,i.needsUpdate=!0,f.renderBufferDirect(s,e,r,i,t,n),i.side=2):f.renderBufferDirect(s,e,r,i,t,n),t.onAfterRender(f,e,s,r,i,n)}function Dt(t,e,s){!0!==e.isScene&&(e=B);const r=Y.get(t),i=p.state.lights,n=p.state.shadowsArray,o=i.state.version,a=it.getParameters(t,i.state,n,e,s),h=it.getProgramCacheKey(a);let c=r.programs;r.environment=t.isMeshStandardMaterial?e.environment:null,r.fog=e.fog,r.envMap=(t.isMeshStandardMaterial?$:q).get(t.envMap||r.environment),void 0===c&&(t.addEventListener("dispose",xt),c=new Map,r.programs=c);let l=c.get(h);if(void 0!==l){if(r.currentProgram===l&&r.lightsStateVersion===o)return Ft(t,a),l}else a.uniforms=it.getUniforms(t),t.onBuild(s,a,f),t.onBeforeCompile(a,f),l=it.acquireProgram(a,h),c.set(h,l),r.uniforms=a.uniforms;const u=r.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(u.clippingPlanes=ht.uniform),Ft(t,a),r.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),r.lightsStateVersion=o,r.needsLights&&(u.ambientLightColor.value=i.state.ambient,u.lightProbe.value=i.state.probe,u.directionalLights.value=i.state.directional,u.directionalLightShadows.value=i.state.directionalShadow,u.spotLights.value=i.state.spot,u.spotLightShadows.value=i.state.spotShadow,u.rectAreaLights.value=i.state.rectArea,u.ltc_1.value=i.state.rectAreaLTC1,u.ltc_2.value=i.state.rectAreaLTC2,u.pointLights.value=i.state.point,u.pointLightShadows.value=i.state.pointShadow,u.hemisphereLights.value=i.state.hemi,u.directionalShadowMap.value=i.state.directionalShadowMap,u.directionalShadowMatrix.value=i.state.directionalShadowMatrix,u.spotShadowMap.value=i.state.spotShadowMap,u.spotShadowMatrix.value=i.state.spotShadowMatrix,u.pointShadowMap.value=i.state.pointShadowMap,u.pointShadowMatrix.value=i.state.pointShadowMatrix);const d=l.getUniforms(),m=Kn.seqWithValue(d.seq,u);return r.currentProgram=l,r.uniformsList=m,l}function Ft(t,e){const s=Y.get(t);s.outputEncoding=e.outputEncoding,s.instancing=e.instancing,s.skinning=e.skinning,s.morphTargets=e.morphTargets,s.morphNormals=e.morphNormals,s.morphColors=e.morphColors,s.morphTargetsCount=e.morphTargetsCount,s.numClippingPlanes=e.numClippingPlanes,s.numIntersection=e.numClipIntersection,s.vertexAlphas=e.vertexAlphas,s.vertexTangents=e.vertexTangents,s.toneMapping=e.toneMapping}At.setAnimationLoop((function(t){It&&It(t)})),"undefined"!=typeof self&&At.setContext(self),this.setAnimationLoop=function(t){It=t,vt.setAnimationLoop(t),null===t?At.stop():At.start()},vt.addEventListener("sessionstart",Et),vt.addEventListener("sessionend",St),this.render=function(t,e){if(void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===g)return;!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),!0===vt.enabled&&!0===vt.isPresenting&&(!0===vt.cameraAutoUpdate&&vt.updateCamera(e),e=vt.getCamera()),!0===t.isScene&&t.onBeforeRender(f,t,e,v),p=at.get(t,m.length),p.init(),m.push(p),k.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),M.setFromProjectionMatrix(k),N=this.localClippingEnabled,P=ht.init(this.clippingPlanes,N,e),u=ot.get(t,d.length),u.init(),d.push(u),Rt(t,e,0,f.sortObjects),u.finish(),!0===f.sortObjects&&u.sort(C,O),!0===P&&ht.beginShadows();const s=p.state.shadowsArray;if(ct.render(s,t,e),!0===P&&ht.endShadows(),!0===this.info.autoReset&&this.info.reset(),lt.render(u,t),p.setupLights(f.physicallyCorrectLights),e.isArrayCamera){const s=e.cameras;for(let e=0,r=s.length;e<r;e++){const r=s[e];Ct(u,t,r,r.viewport)}}else Ct(u,t,e);null!==v&&(X.updateMultisampleRenderTarget(v),X.updateRenderTargetMipmap(v)),!0===t.isScene&&t.onAfterRender(f,t,e),ft.resetDefaultState(),b=-1,w=null,m.pop(),p=m.length>0?m[m.length-1]:null,d.pop(),u=d.length>0?d[d.length-1]:null},this.getActiveCubeFace=function(){return y},this.getActiveMipmapLevel=function(){return T},this.getRenderTarget=function(){return v},this.setRenderTargetTextures=function(t,e,s){Y.get(t.texture).__webglTexture=e,Y.get(t.depthTexture).__webglTexture=s;const r=Y.get(t);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===s,r.__autoAllocateDepthBuffer||!0===j.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(t,e){const s=Y.get(t);s.__webglFramebuffer=e,s.__useDefaultFramebuffer=void 0===e},this.setRenderTarget=function(t,e=0,s=0){v=t,y=e,T=s;let r=!0;if(t){const e=Y.get(t);void 0!==e.__useDefaultFramebuffer?(V.bindFramebuffer(36160,null),r=!1):void 0===e.__webglFramebuffer?X.setupRenderTarget(t):e.__hasExternalTextures&&X.rebindTextures(t,Y.get(t.texture).__webglTexture,Y.get(t.depthTexture).__webglTexture)}let i=null,n=!1,o=!1;if(t){const s=t.texture;(s.isData3DTexture||s.isDataArrayTexture)&&(o=!0);const r=Y.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(i=r[e],n=!0):i=z.isWebGL2&&t.samples>0&&!1===X.useMultisampledRTT(t)?Y.get(t).__webglMultisampledFramebuffer:r,x.copy(t.viewport),I.copy(t.scissor),E=t.scissorTest}else x.copy(_).multiplyScalar(R).floor(),I.copy(D).multiplyScalar(R).floor(),E=F;if(V.bindFramebuffer(36160,i)&&z.drawBuffers&&r&&V.drawBuffers(t,i),V.viewport(x),V.scissor(I),V.setScissorTest(E),n){const r=Y.get(t.texture);gt.framebufferTexture2D(36160,36064,34069+e,r.__webglTexture,s)}else if(o){const r=Y.get(t.texture),i=e||0;gt.framebufferTextureLayer(36160,36064,r.__webglTexture,s||0,i)}b=-1},this.readRenderTargetPixels=function(t,e,s,r,i,n,o){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let a=Y.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==o&&(a=a[o]),a){V.bindFramebuffer(36160,a);try{const o=t.texture,a=o.format,h=o.type;if(a!==st&&mt.convert(a)!==gt.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=h===tt&&(j.has("EXT_color_buffer_half_float")||z.isWebGL2&&j.has("EXT_color_buffer_float"));if(!(h===J||mt.convert(h)===gt.getParameter(35738)||h===Q&&(z.isWebGL2||j.has("OES_texture_float")||j.has("WEBGL_color_buffer_float"))||c))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");e>=0&&e<=t.width-r&&s>=0&&s<=t.height-i&&gt.readPixels(e,s,r,i,mt.convert(a),mt.convert(h),n)}finally{const t=null!==v?Y.get(v).__webglFramebuffer:null;V.bindFramebuffer(36160,t)}}},this.copyFramebufferToTexture=function(t,e,s=0){if(!0!==e.isFramebufferTexture)return void console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");const r=Math.pow(2,-s),i=Math.floor(e.image.width*r),n=Math.floor(e.image.height*r);X.setTexture2D(e,0),gt.copyTexSubImage2D(3553,s,0,0,t.x,t.y,i,n),V.unbindTexture()},this.copyTextureToTexture=function(t,e,s,r=0){const i=e.image.width,n=e.image.height,o=mt.convert(s.format),a=mt.convert(s.type);X.setTexture2D(s,0),gt.pixelStorei(37440,s.flipY),gt.pixelStorei(37441,s.premultiplyAlpha),gt.pixelStorei(3317,s.unpackAlignment),e.isDataTexture?gt.texSubImage2D(3553,r,t.x,t.y,i,n,o,a,e.image.data):e.isCompressedTexture?gt.compressedTexSubImage2D(3553,r,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,o,e.mipmaps[0].data):gt.texSubImage2D(3553,r,t.x,t.y,o,a,e.image),0===r&&s.generateMipmaps&&gt.generateMipmap(3553),V.unbindTexture()},this.copyTextureToTexture3D=function(t,e,s,r,i=0){if(f.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const n=t.max.x-t.min.x+1,o=t.max.y-t.min.y+1,a=t.max.z-t.min.z+1,h=mt.convert(r.format),c=mt.convert(r.type);let l;if(r.isData3DTexture)X.setTexture3D(r,0),l=32879;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");X.setTexture2DArray(r,0),l=35866}gt.pixelStorei(37440,r.flipY),gt.pixelStorei(37441,r.premultiplyAlpha),gt.pixelStorei(3317,r.unpackAlignment);const u=gt.getParameter(3314),p=gt.getParameter(32878),d=gt.getParameter(3316),m=gt.getParameter(3315),g=gt.getParameter(32877),y=s.isCompressedTexture?s.mipmaps[0]:s.image;gt.pixelStorei(3314,y.width),gt.pixelStorei(32878,y.height),gt.pixelStorei(3316,t.min.x),gt.pixelStorei(3315,t.min.y),gt.pixelStorei(32877,t.min.z),s.isDataTexture||s.isData3DTexture?gt.texSubImage3D(l,i,e.x,e.y,e.z,n,o,a,h,c,y.data):s.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),gt.compressedTexSubImage3D(l,i,e.x,e.y,e.z,n,o,a,h,y.data)):gt.texSubImage3D(l,i,e.x,e.y,e.z,n,o,a,h,c,y),gt.pixelStorei(3314,u),gt.pixelStorei(32878,p),gt.pixelStorei(3316,d),gt.pixelStorei(3315,m),gt.pixelStorei(32877,g),0===i&&r.generateMipmaps&&gt.generateMipmap(l),V.unbindTexture()},this.initTexture=function(t){X.setTexture2D(t,0),V.unbindTexture()},this.resetState=function(){y=0,T=0,v=null,V.reset(),ft.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}zo.prototype.isWebGLRenderer=!0;class Vo extends zo{}Vo.prototype.isWebGL1Renderer=!0;class Wo{constructor(t,e=25e-5){this.name="",this.color=new Ae(t),this.density=e}clone(){return new Wo(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}Wo.prototype.isFogExp2=!0;class Yo{constructor(t,e=1,s=1e3){this.name="",this.color=new Ae(t),this.near=e,this.far=s}clone(){return new Yo(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}Yo.prototype.isFog=!0;class Xo extends zs{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}Xo.prototype.isScene=!0;class qo{constructor(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=Xt,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=se()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,s){t*=this.stride,s*=e.stride;for(let r=0,i=this.stride;r<i;r++)this.array[t+r]=e.array[s+r];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=se()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),s=new this.constructor(e,this.stride);return s.setUsage(this.usage),s}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=se()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}qo.prototype.isInterleavedBuffer=!0;const Ko=new Ge;class Jo{constructor(t,e,s,r=!1){this.name="",this.data=t,this.itemSize=e,this.offset=s,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,s=this.data.count;e<s;e++)Ko.fromBufferAttribute(this,e),Ko.applyMatrix4(t),this.setXYZ(e,Ko.x,Ko.y,Ko.z);return this}applyNormalMatrix(t){for(let e=0,s=this.count;e<s;e++)Ko.fromBufferAttribute(this,e),Ko.applyNormalMatrix(t),this.setXYZ(e,Ko.x,Ko.y,Ko.z);return this}transformDirection(t){for(let e=0,s=this.count;e<s;e++)Ko.fromBufferAttribute(this,e),Ko.transformDirection(t),this.setXYZ(e,Ko.x,Ko.y,Ko.z);return this}setX(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){return this.data.array[t*this.data.stride+this.offset]}getY(t){return this.data.array[t*this.data.stride+this.offset+1]}getZ(t){return this.data.array[t*this.data.stride+this.offset+2]}getW(t){return this.data.array[t*this.data.stride+this.offset+3]}setXY(t,e,s){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=s,this}setXYZ(t,e,s,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=s,this.data.array[t+2]=r,this}setXYZW(t,e,s,r,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=s,this.data.array[t+2]=r,this.data.array[t+3]=i,this}clone(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const s=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[s+e])}return new or(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Jo(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const s=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[s+e])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Jo.prototype.isInterleavedBufferAttribute=!0;class $o extends sr{constructor(t){super(),this.type="SpriteMaterial",this.color=new Ae(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let Zo;$o.prototype.isSpriteMaterial=!0;const Qo=new Ge,ta=new Ge,ea=new Ge,sa=new le,ra=new le,ia=new Ts,na=new Ge,oa=new Ge,aa=new Ge,ha=new le,ca=new le,la=new le;class ua extends zs{constructor(t){if(super(),this.type="Sprite",void 0===Zo){Zo=new Er;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),e=new qo(t,5);Zo.setIndex([0,1,2,0,2,3]),Zo.setAttribute("position",new Jo(e,3,0,!1)),Zo.setAttribute("uv",new Jo(e,2,3,!1))}this.geometry=Zo,this.material=void 0!==t?t:new $o,this.center=new le(.5,.5)}raycast(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),ta.setFromMatrixScale(this.matrixWorld),ia.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),ea.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&ta.multiplyScalar(-ea.z);const s=this.material.rotation;let r,i;0!==s&&(i=Math.cos(s),r=Math.sin(s));const n=this.center;pa(na.set(-.5,-.5,0),ea,n,ta,r,i),pa(oa.set(.5,-.5,0),ea,n,ta,r,i),pa(aa.set(.5,.5,0),ea,n,ta,r,i),ha.set(0,0),ca.set(1,0),la.set(1,1);let o=t.ray.intersectTriangle(na,oa,aa,!1,Qo);if(null===o&&(pa(oa.set(-.5,.5,0),ea,n,ta,r,i),ca.set(0,1),o=t.ray.intersectTriangle(na,aa,oa,!1,Qo),null===o))return;const a=t.ray.origin.distanceTo(Qo);a<t.near||a>t.far||e.push({distance:a,point:Qo.clone(),uv:tr.getUV(Qo,na,oa,aa,ha,ca,la,new le),face:null,object:this})}copy(t){return super.copy(t),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}}function pa(t,e,s,r,i,n){sa.subVectors(t,s).addScalar(.5).multiply(r),void 0!==i?(ra.x=n*sa.x-i*sa.y,ra.y=i*sa.x+n*sa.y):ra.copy(sa),t.copy(e),t.x+=ra.x,t.y+=ra.y,t.applyMatrix4(ia)}ua.prototype.isSprite=!0;const da=new Ge,ma=new Ge;class fa extends zs{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);const e=t.levels;for(let t=0,s=e.length;t<s;t++){const s=e[t];this.addLevel(s.object.clone(),s.distance)}return this.autoUpdate=t.autoUpdate,this}addLevel(t,e=0){e=Math.abs(e);const s=this.levels;let r;for(r=0;r<s.length&&!(e<s[r].distance);r++);return s.splice(r,0,{distance:e,object:t}),this.add(t),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){const e=this.levels;if(e.length>0){let s,r;for(s=1,r=e.length;s<r&&!(t<e[s].distance);s++);return e[s-1].object}return null}raycast(t,e){if(this.levels.length>0){da.setFromMatrixPosition(this.matrixWorld);const s=t.ray.origin.distanceTo(da);this.getObjectForDistance(s).raycast(t,e)}}update(t){const e=this.levels;if(e.length>1){da.setFromMatrixPosition(t.matrixWorld),ma.setFromMatrixPosition(this.matrixWorld);const s=da.distanceTo(ma)/t.zoom;let r,i;for(e[0].object.visible=!0,r=1,i=e.length;r<i&&s>=e[r].distance;r++)e[r-1].object.visible=!1,e[r].object.visible=!0;for(this._currentLevel=r-1;r<i;r++)e[r].object.visible=!1}}toJSON(t){const e=super.toJSON(t);!1===this.autoUpdate&&(e.object.autoUpdate=!1),e.object.levels=[];const s=this.levels;for(let t=0,r=s.length;t<r;t++){const r=s[t];e.object.levels.push({object:r.object.uuid,distance:r.distance})}return e}}const ga=new Ge,ya=new Me,Ta=new Me,va=new Ge,ba=new Ts;class wa extends jr{constructor(t,e){super(t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ts,this.bindMatrixInverse=new Ts}copy(t){return super.copy(t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this}bind(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new Me,e=this.geometry.attributes.skinWeight;for(let s=0,r=e.count;s<r;s++){t.fromBufferAttribute(e,s);const r=1/t.manhattanLength();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(s,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(t,e){const s=this.skeleton,r=this.geometry;ya.fromBufferAttribute(r.attributes.skinIndex,t),Ta.fromBufferAttribute(r.attributes.skinWeight,t),ga.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let t=0;t<4;t++){const r=Ta.getComponent(t);if(0!==r){const i=ya.getComponent(t);ba.multiplyMatrices(s.bones[i].matrixWorld,s.boneInverses[i]),e.addScaledVector(va.copy(ga).applyMatrix4(ba),r)}}return e.applyMatrix4(this.bindMatrixInverse)}}wa.prototype.isSkinnedMesh=!0;class xa extends zs{constructor(){super(),this.type="Bone"}}xa.prototype.isBone=!0;class Ia extends Fe{constructor(t=null,e=1,s=1,r,i,n,o,a,h=1003,c=1003,l,u){super(null,n,o,a,h,c,r,i,l,u),this.image={data:t,width:e,height:s},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Ia.prototype.isDataTexture=!0;const Ea=new Ts,Sa=new Ts;class Aa{constructor(t=[],e=[]){this.uuid=se(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new Ts)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const e=new Ts;this.bones[t]&&e.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(e)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&e.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&(e.parent&&e.parent.isBone?(e.matrix.copy(e.parent.matrixWorld).invert(),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))}}update(){const t=this.bones,e=this.boneInverses,s=this.boneMatrices,r=this.boneTexture;for(let r=0,i=t.length;r<i;r++){const i=t[r]?t[r].matrixWorld:Sa;Ea.multiplyMatrices(i,e[r]),Ea.toArray(s,16*r)}null!==r&&(r.needsUpdate=!0)}clone(){return new Aa(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(4*this.bones.length);t=ae(t),t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const s=new Ia(e,t,t,st,Q);return s.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=s,this.boneTextureSize=t,this}getBoneByName(t){for(let e=0,s=this.bones.length;e<s;e++){const s=this.bones[e];if(s.name===t)return s}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let s=0,r=t.bones.length;s<r;s++){const r=t.bones[s];let i=e[r];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),i=new xa),this.bones.push(i),this.boneInverses.push((new Ts).fromArray(t.boneInverses[s]))}return this.init(),this}toJSON(){const t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,s=this.boneInverses;for(let r=0,i=e.length;r<i;r++){const i=e[r];t.bones.push(i.uuid);const n=s[r];t.boneInverses.push(n.toArray())}return t}}class Ra extends or{constructor(t,e,s,r=1){"number"==typeof s&&(r=s,s=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(t,e,s),this.meshPerAttribute=r}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}Ra.prototype.isInstancedBufferAttribute=!0;const Ca=new Ts,Oa=new Ts,_a=[],Da=new jr;class Fa extends jr{constructor(t,e,s){super(t,e),this.instanceMatrix=new Ra(new Float32Array(16*s),16),this.instanceColor=null,this.count=s,this.frustumCulled=!1}copy(t){return super.copy(t),this.instanceMatrix.copy(t.instanceMatrix),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,this}getColorAt(t,e){e.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,16*t)}raycast(t,e){const s=this.matrixWorld,r=this.count;if(Da.geometry=this.geometry,Da.material=this.material,void 0!==Da.material)for(let i=0;i<r;i++){this.getMatrixAt(i,Ca),Oa.multiplyMatrices(s,Ca),Da.matrixWorld=Oa,Da.raycast(t,_a);for(let t=0,s=_a.length;t<s;t++){const s=_a[t];s.instanceId=i,s.object=this,e.push(s)}_a.length=0}}setColorAt(t,e){null===this.instanceColor&&(this.instanceColor=new Ra(new Float32Array(3*this.instanceMatrix.count),3)),e.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,16*t)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}Fa.prototype.isInstancedMesh=!0;class Ma extends sr{constructor(t){super(),this.type="LineBasicMaterial",this.color=new Ae(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}Ma.prototype.isLineBasicMaterial=!0;const Pa=new Ge,Na=new Ge,La=new Ts,ka=new ys,Ua=new cs;class Ha extends zs{constructor(t=new Er,e=new Ma){super(),this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const e=t.attributes.position,s=[0];for(let t=1,r=e.count;t<r;t++)Pa.fromBufferAttribute(e,t-1),Na.fromBufferAttribute(e,t),s[t]=s[t-1],s[t]+=Pa.distanceTo(Na);t.setAttribute("lineDistance",new fr(s,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(t,e){const s=this.geometry,r=this.matrixWorld,i=t.params.Line.threshold,n=s.drawRange;if(null===s.boundingSphere&&s.computeBoundingSphere(),Ua.copy(s.boundingSphere),Ua.applyMatrix4(r),Ua.radius+=i,!1===t.ray.intersectsSphere(Ua))return;La.copy(r).invert(),ka.copy(t.ray).applyMatrix4(La);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,h=new Ge,c=new Ge,l=new Ge,u=new Ge,p=this.isLineSegments?2:1;if(s.isBufferGeometry){const r=s.index,i=s.attributes.position;if(null!==r){for(let s=Math.max(0,n.start),o=Math.min(r.count,n.start+n.count)-1;s<o;s+=p){const n=r.getX(s),o=r.getX(s+1);h.fromBufferAttribute(i,n),c.fromBufferAttribute(i,o);if(ka.distanceSqToSegment(h,c,u,l)>a)continue;u.applyMatrix4(this.matrixWorld);const p=t.ray.origin.distanceTo(u);p<t.near||p>t.far||e.push({distance:p,point:l.clone().applyMatrix4(this.matrixWorld),index:s,face:null,faceIndex:null,object:this})}}else{for(let s=Math.max(0,n.start),r=Math.min(i.count,n.start+n.count)-1;s<r;s+=p){h.fromBufferAttribute(i,s),c.fromBufferAttribute(i,s+1);if(ka.distanceSqToSegment(h,c,u,l)>a)continue;u.applyMatrix4(this.matrixWorld);const r=t.ray.origin.distanceTo(u);r<t.near||r>t.far||e.push({distance:r,point:l.clone().applyMatrix4(this.matrixWorld),index:s,face:null,faceIndex:null,object:this})}}}else s.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,s=Object.keys(e);if(s.length>0){const t=e[s[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,s=t.length;e<s;e++){const s=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Ha.prototype.isLine=!0;const Ba=new Ge,Ga=new Ge;class ja extends Ha{constructor(t,e){super(t,e),this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const e=t.attributes.position,s=[];for(let t=0,r=e.count;t<r;t+=2)Ba.fromBufferAttribute(e,t),Ga.fromBufferAttribute(e,t+1),s[t]=0===t?0:s[t-1],s[t+1]=s[t]+Ba.distanceTo(Ga);t.setAttribute("lineDistance",new fr(s,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}ja.prototype.isLineSegments=!0;class za extends Ha{constructor(t,e){super(t,e),this.type="LineLoop"}}za.prototype.isLineLoop=!0;class Va extends sr{constructor(t){super(),this.type="PointsMaterial",this.color=new Ae(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}Va.prototype.isPointsMaterial=!0;const Wa=new Ts,Ya=new ys,Xa=new cs,qa=new Ge;class Ka extends zs{constructor(t=new Er,e=new Va){super(),this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),this.material=t.material,this.geometry=t.geometry,this}raycast(t,e){const s=this.geometry,r=this.matrixWorld,i=t.params.Points.threshold,n=s.drawRange;if(null===s.boundingSphere&&s.computeBoundingSphere(),Xa.copy(s.boundingSphere),Xa.applyMatrix4(r),Xa.radius+=i,!1===t.ray.intersectsSphere(Xa))return;Wa.copy(r).invert(),Ya.copy(t.ray).applyMatrix4(Wa);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o;if(s.isBufferGeometry){const i=s.index,o=s.attributes.position;if(null!==i){for(let s=Math.max(0,n.start),h=Math.min(i.count,n.start+n.count);s<h;s++){const n=i.getX(s);qa.fromBufferAttribute(o,n),Ja(qa,n,a,r,t,e,this)}}else{for(let s=Math.max(0,n.start),i=Math.min(o.count,n.start+n.count);s<i;s++)qa.fromBufferAttribute(o,s),Ja(qa,s,a,r,t,e,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,s=Object.keys(e);if(s.length>0){const t=e[s[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,s=t.length;e<s;e++){const s=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}function Ja(t,e,s,r,i,n,o){const a=Ya.distanceSqToPoint(t);if(a<s){const s=new Ge;Ya.closestPointToPoint(t,s),s.applyMatrix4(r);const h=i.ray.origin.distanceTo(s);if(h<i.near||h>i.far)return;n.push({distance:h,distanceToRay:Math.sqrt(a),point:s,index:e,face:null,object:o})}}Ka.prototype.isPoints=!0;class $a extends Fe{constructor(t,e,s,r,i,n,o,a,h){super(t,e,s,r,i,n,o,a,h),this.minFilter=void 0!==n?n:X,this.magFilter=void 0!==i?i:X,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback((function e(){c.needsUpdate=!0,t.requestVideoFrameCallback(e)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;!1==="requestVideoFrameCallback"in t&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}$a.prototype.isVideoTexture=!0;class Za extends Fe{constructor(t,e,s){super({width:t,height:e}),this.format=s,this.magFilter=V,this.minFilter=V,this.generateMipmaps=!1,this.needsUpdate=!0}}Za.prototype.isFramebufferTexture=!0;class Qa extends Fe{constructor(t,e,s,r,i,n,o,a,h,c,l,u){super(null,n,o,a,h,c,r,i,l,u),this.image={width:e,height:s},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}Qa.prototype.isCompressedTexture=!0;class th extends Fe{constructor(t,e,s,r,i,n,o,a,h){super(t,e,s,r,i,n,o,a,h),this.needsUpdate=!0}}th.prototype.isCanvasTexture=!0;class eh{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const s=this.getUtoTmapping(t);return this.getPoint(s,e)}getPoints(t=5){const e=[];for(let s=0;s<=t;s++)e.push(this.getPoint(s/t));return e}getSpacedPoints(t=5){const e=[];for(let s=0;s<=t;s++)e.push(this.getPointAt(s/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let s,r=this.getPoint(0),i=0;e.push(0);for(let n=1;n<=t;n++)s=this.getPoint(n/t),i+=s.distanceTo(r),e.push(i),r=s;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const s=this.getLengths();let r=0;const i=s.length;let n;n=e||t*s[i-1];let o,a=0,h=i-1;for(;a<=h;)if(r=Math.floor(a+(h-a)/2),o=s[r]-n,o<0)a=r+1;else{if(!(o>0)){h=r;break}h=r-1}if(r=h,s[r]===n)return r/(i-1);const c=s[r];return(r+(n-c)/(s[r+1]-c))/(i-1)}getTangent(t,e){const s=1e-4;let r=t-s,i=t+s;r<0&&(r=0),i>1&&(i=1);const n=this.getPoint(r),o=this.getPoint(i),a=e||(n.isVector2?new le:new Ge);return a.copy(o).sub(n).normalize(),a}getTangentAt(t,e){const s=this.getUtoTmapping(t);return this.getTangent(s,e)}computeFrenetFrames(t,e){const s=new Ge,r=[],i=[],n=[],o=new Ge,a=new Ts;for(let e=0;e<=t;e++){const s=e/t;r[e]=this.getTangentAt(s,new Ge)}i[0]=new Ge,n[0]=new Ge;let h=Number.MAX_VALUE;const c=Math.abs(r[0].x),l=Math.abs(r[0].y),u=Math.abs(r[0].z);c<=h&&(h=c,s.set(1,0,0)),l<=h&&(h=l,s.set(0,1,0)),u<=h&&s.set(0,0,1),o.crossVectors(r[0],s).normalize(),i[0].crossVectors(r[0],o),n[0].crossVectors(r[0],i[0]);for(let e=1;e<=t;e++){if(i[e]=i[e-1].clone(),n[e]=n[e-1].clone(),o.crossVectors(r[e-1],r[e]),o.length()>Number.EPSILON){o.normalize();const t=Math.acos(re(r[e-1].dot(r[e]),-1,1));i[e].applyMatrix4(a.makeRotationAxis(o,t))}n[e].crossVectors(r[e],i[e])}if(!0===e){let e=Math.acos(re(i[0].dot(i[t]),-1,1));e/=t,r[0].dot(o.crossVectors(i[0],i[t]))>0&&(e=-e);for(let s=1;s<=t;s++)i[s].applyMatrix4(a.makeRotationAxis(r[s],e*s)),n[s].crossVectors(r[s],i[s])}return{tangents:r,normals:i,binormals:n}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class sh extends eh{constructor(t=0,e=0,s=1,r=1,i=0,n=2*Math.PI,o=!1,a=0){super(),this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=s,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=n,this.aClockwise=o,this.aRotation=a}getPoint(t,e){const s=e||new le,r=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const n=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=n?0:r),!0!==this.aClockwise||n||(i===r?i=-r:i-=r);const o=this.aStartAngle+t*i;let a=this.aX+this.xRadius*Math.cos(o),h=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){const t=Math.cos(this.aRotation),e=Math.sin(this.aRotation),s=a-this.aX,r=h-this.aY;a=s*t-r*e+this.aX,h=s*e+r*t+this.aY}return s.set(a,h)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}sh.prototype.isEllipseCurve=!0;class rh extends sh{constructor(t,e,s,r,i,n){super(t,e,s,s,r,i,n),this.type="ArcCurve"}}function ih(){let t=0,e=0,s=0,r=0;function i(i,n,o,a){t=i,e=o,s=-3*i+3*n-2*o-a,r=2*i-2*n+o+a}return{initCatmullRom:function(t,e,s,r,n){i(e,s,n*(s-t),n*(r-e))},initNonuniformCatmullRom:function(t,e,s,r,n,o,a){let h=(e-t)/n-(s-t)/(n+o)+(s-e)/o,c=(s-e)/o-(r-e)/(o+a)+(r-s)/a;h*=o,c*=o,i(e,s,h,c)},calc:function(i){const n=i*i;return t+e*i+s*n+r*(n*i)}}}rh.prototype.isArcCurve=!0;const nh=new Ge,oh=new ih,ah=new ih,hh=new ih;class ch extends eh{constructor(t=[],e=!1,s="centripetal",r=.5){super(),this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=s,this.tension=r}getPoint(t,e=new Ge){const s=e,r=this.points,i=r.length,n=(i-(this.closed?0:1))*t;let o,a,h=Math.floor(n),c=n-h;this.closed?h+=h>0?0:(Math.floor(Math.abs(h)/i)+1)*i:0===c&&h===i-1&&(h=i-2,c=1),this.closed||h>0?o=r[(h-1)%i]:(nh.subVectors(r[0],r[1]).add(r[0]),o=nh);const l=r[h%i],u=r[(h+1)%i];if(this.closed||h+2<i?a=r[(h+2)%i]:(nh.subVectors(r[i-1],r[i-2]).add(r[i-1]),a=nh),"centripetal"===this.curveType||"chordal"===this.curveType){const t="chordal"===this.curveType?.5:.25;let e=Math.pow(o.distanceToSquared(l),t),s=Math.pow(l.distanceToSquared(u),t),r=Math.pow(u.distanceToSquared(a),t);s<1e-4&&(s=1),e<1e-4&&(e=s),r<1e-4&&(r=s),oh.initNonuniformCatmullRom(o.x,l.x,u.x,a.x,e,s,r),ah.initNonuniformCatmullRom(o.y,l.y,u.y,a.y,e,s,r),hh.initNonuniformCatmullRom(o.z,l.z,u.z,a.z,e,s,r)}else"catmullrom"===this.curveType&&(oh.initCatmullRom(o.x,l.x,u.x,a.x,this.tension),ah.initCatmullRom(o.y,l.y,u.y,a.y,this.tension),hh.initCatmullRom(o.z,l.z,u.z,a.z,this.tension));return s.set(oh.calc(c),ah.calc(c),hh.calc(c)),s}copy(t){super.copy(t),this.points=[];for(let e=0,s=t.points.length;e<s;e++){const s=t.points[e];this.points.push(s.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,s=this.points.length;e<s;e++){const s=this.points[e];t.points.push(s.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,s=t.points.length;e<s;e++){const s=t.points[e];this.points.push((new Ge).fromArray(s))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function lh(t,e,s,r,i){const n=.5*(r-e),o=.5*(i-s),a=t*t;return(2*s-2*r+n+o)*(t*a)+(-3*s+3*r-2*n-o)*a+n*t+s}function uh(t,e,s,r){return function(t,e){const s=1-t;return s*s*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,s)+function(t,e){return t*t*e}(t,r)}function ph(t,e,s,r,i){return function(t,e){const s=1-t;return s*s*s*e}(t,e)+function(t,e){const s=1-t;return 3*s*s*t*e}(t,s)+function(t,e){return 3*(1-t)*t*t*e}(t,r)+function(t,e){return t*t*t*e}(t,i)}ch.prototype.isCatmullRomCurve3=!0;class dh extends eh{constructor(t=new le,e=new le,s=new le,r=new le){super(),this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=s,this.v3=r}getPoint(t,e=new le){const s=e,r=this.v0,i=this.v1,n=this.v2,o=this.v3;return s.set(ph(t,r.x,i.x,n.x,o.x),ph(t,r.y,i.y,n.y,o.y)),s}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}dh.prototype.isCubicBezierCurve=!0;class mh extends eh{constructor(t=new Ge,e=new Ge,s=new Ge,r=new Ge){super(),this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=s,this.v3=r}getPoint(t,e=new Ge){const s=e,r=this.v0,i=this.v1,n=this.v2,o=this.v3;return s.set(ph(t,r.x,i.x,n.x,o.x),ph(t,r.y,i.y,n.y,o.y),ph(t,r.z,i.z,n.z,o.z)),s}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}mh.prototype.isCubicBezierCurve3=!0;class fh extends eh{constructor(t=new le,e=new le){super(),this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new le){const s=e;return 1===t?s.copy(this.v2):(s.copy(this.v2).sub(this.v1),s.multiplyScalar(t).add(this.v1)),s}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e){const s=e||new le;return s.copy(this.v2).sub(this.v1).normalize(),s}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}fh.prototype.isLineCurve=!0;class gh extends eh{constructor(t=new Ge,e=new Ge){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=t,this.v2=e}getPoint(t,e=new Ge){const s=e;return 1===t?s.copy(this.v2):(s.copy(this.v2).sub(this.v1),s.multiplyScalar(t).add(this.v1)),s}getPointAt(t,e){return this.getPoint(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class yh extends eh{constructor(t=new le,e=new le,s=new le){super(),this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=s}getPoint(t,e=new le){const s=e,r=this.v0,i=this.v1,n=this.v2;return s.set(uh(t,r.x,i.x,n.x),uh(t,r.y,i.y,n.y)),s}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}yh.prototype.isQuadraticBezierCurve=!0;class Th extends eh{constructor(t=new Ge,e=new Ge,s=new Ge){super(),this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=s}getPoint(t,e=new Ge){const s=e,r=this.v0,i=this.v1,n=this.v2;return s.set(uh(t,r.x,i.x,n.x),uh(t,r.y,i.y,n.y),uh(t,r.z,i.z,n.z)),s}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}Th.prototype.isQuadraticBezierCurve3=!0;class vh extends eh{constructor(t=[]){super(),this.type="SplineCurve",this.points=t}getPoint(t,e=new le){const s=e,r=this.points,i=(r.length-1)*t,n=Math.floor(i),o=i-n,a=r[0===n?n:n-1],h=r[n],c=r[n>r.length-2?r.length-1:n+1],l=r[n>r.length-3?r.length-1:n+2];return s.set(lh(o,a.x,h.x,c.x,l.x),lh(o,a.y,h.y,c.y,l.y)),s}copy(t){super.copy(t),this.points=[];for(let e=0,s=t.points.length;e<s;e++){const s=t.points[e];this.points.push(s.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,s=this.points.length;e<s;e++){const s=this.points[e];t.points.push(s.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,s=t.points.length;e<s;e++){const s=t.points[e];this.points.push((new le).fromArray(s))}return this}}vh.prototype.isSplineCurve=!0;var bh=Object.freeze({__proto__:null,ArcCurve:rh,CatmullRomCurve3:ch,CubicBezierCurve:dh,CubicBezierCurve3:mh,EllipseCurve:sh,LineCurve:fh,LineCurve3:gh,QuadraticBezierCurve:yh,QuadraticBezierCurve3:Th,SplineCurve:vh});class wh extends eh{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new fh(e,t))}getPoint(t,e){const s=t*this.getLength(),r=this.getCurveLengths();let i=0;for(;i<r.length;){if(r[i]>=s){const t=r[i]-s,n=this.curves[i],o=n.getLength(),a=0===o?0:1-t/o;return n.getPointAt(a,e)}i++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let s=0,r=this.curves.length;s<r;s++)e+=this.curves[s].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let s=0;s<=t;s++)e.push(this.getPoint(s/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let s;for(let r=0,i=this.curves;r<i.length;r++){const n=i[r],o=n.isEllipseCurve?2*t:n.isLineCurve||n.isLineCurve3?1:n.isSplineCurve?t*n.points.length:t,a=n.getPoints(o);for(let t=0;t<a.length;t++){const r=a[t];s&&s.equals(r)||(e.push(r),s=r)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,s=t.curves.length;e<s;e++){const s=t.curves[e];this.curves.push(s.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,s=this.curves.length;e<s;e++){const s=this.curves[e];t.curves.push(s.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,s=t.curves.length;e<s;e++){const s=t.curves[e];this.curves.push((new bh[s.type]).fromJSON(s))}return this}}class xh extends wh{constructor(t){super(),this.type="Path",this.currentPoint=new le,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,s=t.length;e<s;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const s=new fh(this.currentPoint.clone(),new le(t,e));return this.curves.push(s),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,s,r){const i=new yh(this.currentPoint.clone(),new le(t,e),new le(s,r));return this.curves.push(i),this.currentPoint.set(s,r),this}bezierCurveTo(t,e,s,r,i,n){const o=new dh(this.currentPoint.clone(),new le(t,e),new le(s,r),new le(i,n));return this.curves.push(o),this.currentPoint.set(i,n),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),s=new vh(e);return this.curves.push(s),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,s,r,i,n){const o=this.currentPoint.x,a=this.currentPoint.y;return this.absarc(t+o,e+a,s,r,i,n),this}absarc(t,e,s,r,i,n){return this.absellipse(t,e,s,s,r,i,n),this}ellipse(t,e,s,r,i,n,o,a){const h=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(t+h,e+c,s,r,i,n,o,a),this}absellipse(t,e,s,r,i,n,o,a){const h=new sh(t,e,s,r,i,n,o,a);if(this.curves.length>0){const t=h.getPoint(0);t.equals(this.currentPoint)||this.lineTo(t.x,t.y)}this.curves.push(h);const c=h.getPoint(1);return this.currentPoint.copy(c),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class Ih extends Er{constructor(t=[new le(0,.5),new le(.5,0),new le(0,-.5)],e=12,s=0,r=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:s,phiLength:r},e=Math.floor(e),r=re(r,0,2*Math.PI);const i=[],n=[],o=[],a=[],h=[],c=1/e,l=new Ge,u=new le,p=new Ge,d=new Ge,m=new Ge;let f=0,g=0;for(let e=0;e<=t.length-1;e++)switch(e){case 0:f=t[e+1].x-t[e].x,g=t[e+1].y-t[e].y,p.x=1*g,p.y=-f,p.z=0*g,m.copy(p),p.normalize(),a.push(p.x,p.y,p.z);break;case t.length-1:a.push(m.x,m.y,m.z);break;default:f=t[e+1].x-t[e].x,g=t[e+1].y-t[e].y,p.x=1*g,p.y=-f,p.z=0*g,d.copy(p),p.x+=m.x,p.y+=m.y,p.z+=m.z,p.normalize(),a.push(p.x,p.y,p.z),m.copy(d)}for(let i=0;i<=e;i++){const p=s+i*c*r,d=Math.sin(p),m=Math.cos(p);for(let s=0;s<=t.length-1;s++){l.x=t[s].x*d,l.y=t[s].y,l.z=t[s].x*m,n.push(l.x,l.y,l.z),u.x=i/e,u.y=s/(t.length-1),o.push(u.x,u.y);const r=a[3*s+0]*d,c=a[3*s+1],p=a[3*s+0]*m;h.push(r,c,p)}}for(let s=0;s<e;s++)for(let e=0;e<t.length-1;e++){const r=e+s*t.length,n=r,o=r+t.length,a=r+t.length+1,h=r+1;i.push(n,o,h),i.push(a,h,o)}this.setIndex(i),this.setAttribute("position",new fr(n,3)),this.setAttribute("uv",new fr(o,2)),this.setAttribute("normal",new fr(h,3))}static fromJSON(t){return new Ih(t.points,t.segments,t.phiStart,t.phiLength)}}class Eh extends Ih{constructor(t=1,e=1,s=4,r=8){const i=new xh;i.absarc(0,-e/2,t,1.5*Math.PI,0),i.absarc(0,e/2,t,0,.5*Math.PI),super(i.getPoints(s),r),this.type="CapsuleGeometry",this.parameters={radius:t,height:e,capSegments:s,radialSegments:r}}static fromJSON(t){return new Eh(t.radius,t.length,t.capSegments,t.radialSegments)}}class Sh extends Er{constructor(t=1,e=8,s=0,r=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:s,thetaLength:r},e=Math.max(3,e);const i=[],n=[],o=[],a=[],h=new Ge,c=new le;n.push(0,0,0),o.push(0,0,1),a.push(.5,.5);for(let i=0,l=3;i<=e;i++,l+=3){const u=s+i/e*r;h.x=t*Math.cos(u),h.y=t*Math.sin(u),n.push(h.x,h.y,h.z),o.push(0,0,1),c.x=(n[l]/t+1)/2,c.y=(n[l+1]/t+1)/2,a.push(c.x,c.y)}for(let t=1;t<=e;t++)i.push(t,t+1,0);this.setIndex(i),this.setAttribute("position",new fr(n,3)),this.setAttribute("normal",new fr(o,3)),this.setAttribute("uv",new fr(a,2))}static fromJSON(t){return new Sh(t.radius,t.segments,t.thetaStart,t.thetaLength)}}class Ah extends Er{constructor(t=1,e=1,s=1,r=8,i=1,n=!1,o=0,a=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:s,radialSegments:r,heightSegments:i,openEnded:n,thetaStart:o,thetaLength:a};const h=this;r=Math.floor(r),i=Math.floor(i);const c=[],l=[],u=[],p=[];let d=0;const m=[],f=s/2;let g=0;function y(s){const i=d,n=new le,m=new Ge;let y=0;const T=!0===s?t:e,v=!0===s?1:-1;for(let t=1;t<=r;t++)l.push(0,f*v,0),u.push(0,v,0),p.push(.5,.5),d++;const b=d;for(let t=0;t<=r;t++){const e=t/r*a+o,s=Math.cos(e),i=Math.sin(e);m.x=T*i,m.y=f*v,m.z=T*s,l.push(m.x,m.y,m.z),u.push(0,v,0),n.x=.5*s+.5,n.y=.5*i*v+.5,p.push(n.x,n.y),d++}for(let t=0;t<r;t++){const e=i+t,r=b+t;!0===s?c.push(r,r+1,e):c.push(r+1,r,e),y+=3}h.addGroup(g,y,!0===s?1:2),g+=y}!function(){const n=new Ge,y=new Ge;let T=0;const v=(e-t)/s;for(let h=0;h<=i;h++){const c=[],g=h/i,T=g*(e-t)+t;for(let t=0;t<=r;t++){const e=t/r,i=e*a+o,h=Math.sin(i),m=Math.cos(i);y.x=T*h,y.y=-g*s+f,y.z=T*m,l.push(y.x,y.y,y.z),n.set(h,v,m).normalize(),u.push(n.x,n.y,n.z),p.push(e,1-g),c.push(d++)}m.push(c)}for(let t=0;t<r;t++)for(let e=0;e<i;e++){const s=m[e][t],r=m[e+1][t],i=m[e+1][t+1],n=m[e][t+1];c.push(s,r,n),c.push(r,i,n),T+=6}h.addGroup(g,T,0),g+=T}(),!1===n&&(t>0&&y(!0),e>0&&y(!1)),this.setIndex(c),this.setAttribute("position",new fr(l,3)),this.setAttribute("normal",new fr(u,3)),this.setAttribute("uv",new fr(p,2))}static fromJSON(t){return new Ah(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Rh extends Ah{constructor(t=1,e=1,s=8,r=1,i=!1,n=0,o=2*Math.PI){super(0,t,e,s,r,i,n,o),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:s,heightSegments:r,openEnded:i,thetaStart:n,thetaLength:o}}static fromJSON(t){return new Rh(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Ch extends Er{constructor(t=[],e=[],s=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:s,detail:r};const i=[],n=[];function o(t,e,s,r){const i=r+1,n=[];for(let r=0;r<=i;r++){n[r]=[];const o=t.clone().lerp(s,r/i),a=e.clone().lerp(s,r/i),h=i-r;for(let t=0;t<=h;t++)n[r][t]=0===t&&r===i?o:o.clone().lerp(a,t/h)}for(let t=0;t<i;t++)for(let e=0;e<2*(i-t)-1;e++){const s=Math.floor(e/2);e%2==0?(a(n[t][s+1]),a(n[t+1][s]),a(n[t][s])):(a(n[t][s+1]),a(n[t+1][s+1]),a(n[t+1][s]))}}function a(t){i.push(t.x,t.y,t.z)}function h(e,s){const r=3*e;s.x=t[r+0],s.y=t[r+1],s.z=t[r+2]}function c(t,e,s,r){r<0&&1===t.x&&(n[e]=t.x-1),0===s.x&&0===s.z&&(n[e]=r/2/Math.PI+.5)}function l(t){return Math.atan2(t.z,-t.x)}!function(t){const s=new Ge,r=new Ge,i=new Ge;for(let n=0;n<e.length;n+=3)h(e[n+0],s),h(e[n+1],r),h(e[n+2],i),o(s,r,i,t)}(r),function(t){const e=new Ge;for(let s=0;s<i.length;s+=3)e.x=i[s+0],e.y=i[s+1],e.z=i[s+2],e.normalize().multiplyScalar(t),i[s+0]=e.x,i[s+1]=e.y,i[s+2]=e.z}(s),function(){const t=new Ge;for(let s=0;s<i.length;s+=3){t.x=i[s+0],t.y=i[s+1],t.z=i[s+2];const r=l(t)/2/Math.PI+.5,o=(e=t,Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))/Math.PI+.5);n.push(r,1-o)}var e;(function(){const t=new Ge,e=new Ge,s=new Ge,r=new Ge,o=new le,a=new le,h=new le;for(let u=0,p=0;u<i.length;u+=9,p+=6){t.set(i[u+0],i[u+1],i[u+2]),e.set(i[u+3],i[u+4],i[u+5]),s.set(i[u+6],i[u+7],i[u+8]),o.set(n[p+0],n[p+1]),a.set(n[p+2],n[p+3]),h.set(n[p+4],n[p+5]),r.copy(t).add(e).add(s).divideScalar(3);const d=l(r);c(o,p+0,t,d),c(a,p+2,e,d),c(h,p+4,s,d)}})(),function(){for(let t=0;t<n.length;t+=6){const e=n[t+0],s=n[t+2],r=n[t+4],i=Math.max(e,s,r),o=Math.min(e,s,r);i>.9&&o<.1&&(e<.2&&(n[t+0]+=1),s<.2&&(n[t+2]+=1),r<.2&&(n[t+4]+=1))}}()}(),this.setAttribute("position",new fr(i,3)),this.setAttribute("normal",new fr(i.slice(),3)),this.setAttribute("uv",new fr(n,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}static fromJSON(t){return new Ch(t.vertices,t.indices,t.radius,t.details)}}class Oh extends Ch{constructor(t=1,e=0){const s=(1+Math.sqrt(5))/2,r=1/s;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-s,0,-r,s,0,r,-s,0,r,s,-r,-s,0,-r,s,0,r,-s,0,r,s,0,-s,0,-r,s,0,-r,-s,0,r,s,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new Oh(t.radius,t.detail)}}const _h=new Ge,Dh=new Ge,Fh=new Ge,Mh=new tr;class Ph extends Er{constructor(t=null,e=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:e},null!==t){const s=4,r=Math.pow(10,s),i=Math.cos(te*e),n=t.getIndex(),o=t.getAttribute("position"),a=n?n.count:o.count,h=[0,0,0],c=["a","b","c"],l=new Array(3),u={},p=[];for(let t=0;t<a;t+=3){n?(h[0]=n.getX(t),h[1]=n.getX(t+1),h[2]=n.getX(t+2)):(h[0]=t,h[1]=t+1,h[2]=t+2);const{a:e,b:s,c:a}=Mh;if(e.fromBufferAttribute(o,h[0]),s.fromBufferAttribute(o,h[1]),a.fromBufferAttribute(o,h[2]),Mh.getNormal(Fh),l[0]=`${Math.round(e.x*r)},${Math.round(e.y*r)},${Math.round(e.z*r)}`,l[1]=`${Math.round(s.x*r)},${Math.round(s.y*r)},${Math.round(s.z*r)}`,l[2]=`${Math.round(a.x*r)},${Math.round(a.y*r)},${Math.round(a.z*r)}`,l[0]!==l[1]&&l[1]!==l[2]&&l[2]!==l[0])for(let t=0;t<3;t++){const e=(t+1)%3,s=l[t],r=l[e],n=Mh[c[t]],o=Mh[c[e]],a=`${s}_${r}`,d=`${r}_${s}`;d in u&&u[d]?(Fh.dot(u[d].normal)<=i&&(p.push(n.x,n.y,n.z),p.push(o.x,o.y,o.z)),u[d]=null):a in u||(u[a]={index0:h[t],index1:h[e],normal:Fh.clone()})}}for(const t in u)if(u[t]){const{index0:e,index1:s}=u[t];_h.fromBufferAttribute(o,e),Dh.fromBufferAttribute(o,s),p.push(_h.x,_h.y,_h.z),p.push(Dh.x,Dh.y,Dh.z)}this.setAttribute("position",new fr(p,3))}}}class Nh extends xh{constructor(t){super(t),this.uuid=se(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let s=0,r=this.holes.length;s<r;s++)e[s]=this.holes[s].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,s=t.holes.length;e<s;e++){const s=t.holes[e];this.holes.push(s.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,s=this.holes.length;e<s;e++){const s=this.holes[e];t.holes.push(s.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,s=t.holes.length;e<s;e++){const s=t.holes[e];this.holes.push((new xh).fromJSON(s))}return this}}const Lh=function(t,e,s=2){const r=e&&e.length,i=r?e[0]*s:t.length;let n=kh(t,0,i,s,!0);const o=[];if(!n||n.next===n.prev)return o;let a,h,c,l,u,p,d;if(r&&(n=function(t,e,s,r){const i=[];let n,o,a,h,c;for(n=0,o=e.length;n<o;n++)a=e[n]*r,h=n<o-1?e[n+1]*r:t.length,c=kh(t,a,h,r,!1),c===c.next&&(c.steiner=!0),i.push(qh(c));for(i.sort(Vh),n=0;n<i.length;n++)Wh(i[n],s),s=Uh(s,s.next);return s}(t,e,n,s)),t.length>80*s){a=c=t[0],h=l=t[1];for(let e=s;e<i;e+=s)u=t[e],p=t[e+1],u<a&&(a=u),p<h&&(h=p),u>c&&(c=u),p>l&&(l=p);d=Math.max(c-a,l-h),d=0!==d?1/d:0}return Hh(n,o,s,a,h,d),o};function kh(t,e,s,r,i){let n,o;if(i===function(t,e,s,r){let i=0;for(let n=e,o=s-r;n<s;n+=r)i+=(t[o]-t[n])*(t[n+1]+t[o+1]),o=n;return i}(t,e,s,r)>0)for(n=e;n<s;n+=r)o=ic(n,t[n],t[n+1],o);else for(n=s-r;n>=e;n-=r)o=ic(n,t[n],t[n+1],o);return o&&Zh(o,o.next)&&(nc(o),o=o.next),o}function Uh(t,e){if(!t)return t;e||(e=t);let s,r=t;do{if(s=!1,r.steiner||!Zh(r,r.next)&&0!==$h(r.prev,r,r.next))r=r.next;else{if(nc(r),r=e=r.prev,r===r.next)break;s=!0}}while(s||r!==e);return e}function Hh(t,e,s,r,i,n,o){if(!t)return;!o&&n&&function(t,e,s,r){let i=t;do{null===i.z&&(i.z=Xh(i.x,i.y,e,s,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){let e,s,r,i,n,o,a,h,c=1;do{for(s=t,t=null,n=null,o=0;s;){for(o++,r=s,a=0,e=0;e<c&&(a++,r=r.nextZ,r);e++);for(h=c;a>0||h>0&&r;)0!==a&&(0===h||!r||s.z<=r.z)?(i=s,s=s.nextZ,a--):(i=r,r=r.nextZ,h--),n?n.nextZ=i:t=i,i.prevZ=n,n=i;s=r}n.nextZ=null,c*=2}while(o>1)}(i)}(t,r,i,n);let a,h,c=t;for(;t.prev!==t.next;)if(a=t.prev,h=t.next,n?Gh(t,r,i,n):Bh(t))e.push(a.i/s),e.push(t.i/s),e.push(h.i/s),nc(t),t=h.next,c=h.next;else if((t=h)===c){o?1===o?Hh(t=jh(Uh(t),e,s),e,s,r,i,n,2):2===o&&zh(t,e,s,r,i,n):Hh(Uh(t),e,s,r,i,n,1);break}}function Bh(t){const e=t.prev,s=t,r=t.next;if($h(e,s,r)>=0)return!1;let i=t.next.next;for(;i!==t.prev;){if(Kh(e.x,e.y,s.x,s.y,r.x,r.y,i.x,i.y)&&$h(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Gh(t,e,s,r){const i=t.prev,n=t,o=t.next;if($h(i,n,o)>=0)return!1;const a=i.x<n.x?i.x<o.x?i.x:o.x:n.x<o.x?n.x:o.x,h=i.y<n.y?i.y<o.y?i.y:o.y:n.y<o.y?n.y:o.y,c=i.x>n.x?i.x>o.x?i.x:o.x:n.x>o.x?n.x:o.x,l=i.y>n.y?i.y>o.y?i.y:o.y:n.y>o.y?n.y:o.y,u=Xh(a,h,e,s,r),p=Xh(c,l,e,s,r);let d=t.prevZ,m=t.nextZ;for(;d&&d.z>=u&&m&&m.z<=p;){if(d!==t.prev&&d!==t.next&&Kh(i.x,i.y,n.x,n.y,o.x,o.y,d.x,d.y)&&$h(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,m!==t.prev&&m!==t.next&&Kh(i.x,i.y,n.x,n.y,o.x,o.y,m.x,m.y)&&$h(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;d&&d.z>=u;){if(d!==t.prev&&d!==t.next&&Kh(i.x,i.y,n.x,n.y,o.x,o.y,d.x,d.y)&&$h(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;m&&m.z<=p;){if(m!==t.prev&&m!==t.next&&Kh(i.x,i.y,n.x,n.y,o.x,o.y,m.x,m.y)&&$h(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function jh(t,e,s){let r=t;do{const i=r.prev,n=r.next.next;!Zh(i,n)&&Qh(i,r,r.next,n)&&sc(i,n)&&sc(n,i)&&(e.push(i.i/s),e.push(r.i/s),e.push(n.i/s),nc(r),nc(r.next),r=t=n),r=r.next}while(r!==t);return Uh(r)}function zh(t,e,s,r,i,n){let o=t;do{let t=o.next.next;for(;t!==o.prev;){if(o.i!==t.i&&Jh(o,t)){let a=rc(o,t);return o=Uh(o,o.next),a=Uh(a,a.next),Hh(o,e,s,r,i,n),void Hh(a,e,s,r,i,n)}t=t.next}o=o.next}while(o!==t)}function Vh(t,e){return t.x-e.x}function Wh(t,e){if(e=function(t,e){let s=e;const r=t.x,i=t.y;let n,o=-1/0;do{if(i<=s.y&&i>=s.next.y&&s.next.y!==s.y){const t=s.x+(i-s.y)*(s.next.x-s.x)/(s.next.y-s.y);if(t<=r&&t>o){if(o=t,t===r){if(i===s.y)return s;if(i===s.next.y)return s.next}n=s.x<s.next.x?s:s.next}}s=s.next}while(s!==e);if(!n)return null;if(r===o)return n;const a=n,h=n.x,c=n.y;let l,u=1/0;s=n;do{r>=s.x&&s.x>=h&&r!==s.x&&Kh(i<c?r:o,i,h,c,i<c?o:r,i,s.x,s.y)&&(l=Math.abs(i-s.y)/(r-s.x),sc(s,t)&&(l<u||l===u&&(s.x>n.x||s.x===n.x&&Yh(n,s)))&&(n=s,u=l)),s=s.next}while(s!==a);return n}(t,e)){const s=rc(e,t);Uh(e,e.next),Uh(s,s.next)}}function Yh(t,e){return $h(t.prev,t,e.prev)<0&&$h(e.next,t,t.next)<0}function Xh(t,e,s,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-s)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function qh(t){let e=t,s=t;do{(e.x<s.x||e.x===s.x&&e.y<s.y)&&(s=e),e=e.next}while(e!==t);return s}function Kh(t,e,s,r,i,n,o,a){return(i-o)*(e-a)-(t-o)*(n-a)>=0&&(t-o)*(r-a)-(s-o)*(e-a)>=0&&(s-o)*(n-a)-(i-o)*(r-a)>=0}function Jh(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let s=t;do{if(s.i!==t.i&&s.next.i!==t.i&&s.i!==e.i&&s.next.i!==e.i&&Qh(s,s.next,t,e))return!0;s=s.next}while(s!==t);return!1}(t,e)&&(sc(t,e)&&sc(e,t)&&function(t,e){let s=t,r=!1;const i=(t.x+e.x)/2,n=(t.y+e.y)/2;do{s.y>n!=s.next.y>n&&s.next.y!==s.y&&i<(s.next.x-s.x)*(n-s.y)/(s.next.y-s.y)+s.x&&(r=!r),s=s.next}while(s!==t);return r}(t,e)&&($h(t.prev,t,e.prev)||$h(t,e.prev,e))||Zh(t,e)&&$h(t.prev,t,t.next)>0&&$h(e.prev,e,e.next)>0)}function $h(t,e,s){return(e.y-t.y)*(s.x-e.x)-(e.x-t.x)*(s.y-e.y)}function Zh(t,e){return t.x===e.x&&t.y===e.y}function Qh(t,e,s,r){const i=ec($h(t,e,s)),n=ec($h(t,e,r)),o=ec($h(s,r,t)),a=ec($h(s,r,e));return i!==n&&o!==a||(!(0!==i||!tc(t,s,e))||(!(0!==n||!tc(t,r,e))||(!(0!==o||!tc(s,t,r))||!(0!==a||!tc(s,e,r)))))}function tc(t,e,s){return e.x<=Math.max(t.x,s.x)&&e.x>=Math.min(t.x,s.x)&&e.y<=Math.max(t.y,s.y)&&e.y>=Math.min(t.y,s.y)}function ec(t){return t>0?1:t<0?-1:0}function sc(t,e){return $h(t.prev,t,t.next)<0?$h(t,e,t.next)>=0&&$h(t,t.prev,e)>=0:$h(t,e,t.prev)<0||$h(t,t.next,e)<0}function rc(t,e){const s=new oc(t.i,t.x,t.y),r=new oc(e.i,e.x,e.y),i=t.next,n=e.prev;return t.next=e,e.prev=t,s.next=i,i.prev=s,r.next=s,s.prev=r,n.next=r,r.prev=n,r}function ic(t,e,s,r){const i=new oc(t,e,s);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function nc(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function oc(t,e,s){this.i=t,this.x=e,this.y=s,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class ac{static area(t){const e=t.length;let s=0;for(let r=e-1,i=0;i<e;r=i++)s+=t[r].x*t[i].y-t[i].x*t[r].y;return.5*s}static isClockWise(t){return ac.area(t)<0}static triangulateShape(t,e){const s=[],r=[],i=[];hc(t),cc(s,t);let n=t.length;e.forEach(hc);for(let t=0;t<e.length;t++)r.push(n),n+=e[t].length,cc(s,e[t]);const o=Lh(s,r);for(let t=0;t<o.length;t+=3)i.push(o.slice(t,t+3));return i}}function hc(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function cc(t,e){for(let s=0;s<e.length;s++)t.push(e[s].x),t.push(e[s].y)}class lc extends Er{constructor(t=new Nh([new le(.5,.5),new le(-.5,.5),new le(-.5,-.5),new le(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const s=this,r=[],i=[];for(let e=0,s=t.length;e<s;e++){n(t[e])}function n(t){const n=[],o=void 0!==e.curveSegments?e.curveSegments:12,a=void 0!==e.steps?e.steps:1;let h=void 0!==e.depth?e.depth:1,c=void 0===e.bevelEnabled||e.bevelEnabled,l=void 0!==e.bevelThickness?e.bevelThickness:.2,u=void 0!==e.bevelSize?e.bevelSize:l-.1,p=void 0!==e.bevelOffset?e.bevelOffset:0,d=void 0!==e.bevelSegments?e.bevelSegments:3;const m=e.extrudePath,f=void 0!==e.UVGenerator?e.UVGenerator:uc;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),h=e.amount);let g,y,T,v,b,w=!1;m&&(g=m.getSpacedPoints(a),w=!0,c=!1,y=m.computeFrenetFrames(a,!1),T=new Ge,v=new Ge,b=new Ge),c||(d=0,l=0,u=0,p=0);const x=t.extractPoints(o);let I=x.shape;const E=x.holes;if(!ac.isClockWise(I)){I=I.reverse();for(let t=0,e=E.length;t<e;t++){const e=E[t];ac.isClockWise(e)&&(E[t]=e.reverse())}}const S=ac.triangulateShape(I,E),A=I;for(let t=0,e=E.length;t<e;t++){const e=E[t];I=I.concat(e)}function R(t,e,s){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(s).add(t)}const C=I.length,O=S.length;function _(t,e,s){let r,i,n;const o=t.x-e.x,a=t.y-e.y,h=s.x-t.x,c=s.y-t.y,l=o*o+a*a,u=o*c-a*h;if(Math.abs(u)>Number.EPSILON){const u=Math.sqrt(l),p=Math.sqrt(h*h+c*c),d=e.x-a/u,m=e.y+o/u,f=((s.x-c/p-d)*c-(s.y+h/p-m)*h)/(o*c-a*h);r=d+o*f-t.x,i=m+a*f-t.y;const g=r*r+i*i;if(g<=2)return new le(r,i);n=Math.sqrt(g/2)}else{let t=!1;o>Number.EPSILON?h>Number.EPSILON&&(t=!0):o<-Number.EPSILON?h<-Number.EPSILON&&(t=!0):Math.sign(a)===Math.sign(c)&&(t=!0),t?(r=-a,i=o,n=Math.sqrt(l)):(r=o,i=a,n=Math.sqrt(l/2))}return new le(r/n,i/n)}const D=[];for(let t=0,e=A.length,s=e-1,r=t+1;t<e;t++,s++,r++)s===e&&(s=0),r===e&&(r=0),D[t]=_(A[t],A[s],A[r]);const F=[];let M,P=D.concat();for(let t=0,e=E.length;t<e;t++){const e=E[t];M=[];for(let t=0,s=e.length,r=s-1,i=t+1;t<s;t++,r++,i++)r===s&&(r=0),i===s&&(i=0),M[t]=_(e[t],e[r],e[i]);F.push(M),P=P.concat(M)}for(let t=0;t<d;t++){const e=t/d,s=l*Math.cos(e*Math.PI/2),r=u*Math.sin(e*Math.PI/2)+p;for(let t=0,e=A.length;t<e;t++){const e=R(A[t],D[t],r);k(e.x,e.y,-s)}for(let t=0,e=E.length;t<e;t++){const e=E[t];M=F[t];for(let t=0,i=e.length;t<i;t++){const i=R(e[t],M[t],r);k(i.x,i.y,-s)}}}const N=u+p;for(let t=0;t<C;t++){const e=c?R(I[t],P[t],N):I[t];w?(v.copy(y.normals[0]).multiplyScalar(e.x),T.copy(y.binormals[0]).multiplyScalar(e.y),b.copy(g[0]).add(v).add(T),k(b.x,b.y,b.z)):k(e.x,e.y,0)}for(let t=1;t<=a;t++)for(let e=0;e<C;e++){const s=c?R(I[e],P[e],N):I[e];w?(v.copy(y.normals[t]).multiplyScalar(s.x),T.copy(y.binormals[t]).multiplyScalar(s.y),b.copy(g[t]).add(v).add(T),k(b.x,b.y,b.z)):k(s.x,s.y,h/a*t)}for(let t=d-1;t>=0;t--){const e=t/d,s=l*Math.cos(e*Math.PI/2),r=u*Math.sin(e*Math.PI/2)+p;for(let t=0,e=A.length;t<e;t++){const e=R(A[t],D[t],r);k(e.x,e.y,h+s)}for(let t=0,e=E.length;t<e;t++){const e=E[t];M=F[t];for(let t=0,i=e.length;t<i;t++){const i=R(e[t],M[t],r);w?k(i.x,i.y+g[a-1].y,g[a-1].x+s):k(i.x,i.y,h+s)}}}function L(t,e){let s=t.length;for(;--s>=0;){const r=s;let i=s-1;i<0&&(i=t.length-1);for(let t=0,s=a+2*d;t<s;t++){const s=C*t,n=C*(t+1);H(e+r+s,e+i+s,e+i+n,e+r+n)}}}function k(t,e,s){n.push(t),n.push(e),n.push(s)}function U(t,e,i){B(t),B(e),B(i);const n=r.length/3,o=f.generateTopUV(s,r,n-3,n-2,n-1);G(o[0]),G(o[1]),G(o[2])}function H(t,e,i,n){B(t),B(e),B(n),B(e),B(i),B(n);const o=r.length/3,a=f.generateSideWallUV(s,r,o-6,o-3,o-2,o-1);G(a[0]),G(a[1]),G(a[3]),G(a[1]),G(a[2]),G(a[3])}function B(t){r.push(n[3*t+0]),r.push(n[3*t+1]),r.push(n[3*t+2])}function G(t){i.push(t.x),i.push(t.y)}!function(){const t=r.length/3;if(c){let t=0,e=C*t;for(let t=0;t<O;t++){const s=S[t];U(s[2]+e,s[1]+e,s[0]+e)}t=a+2*d,e=C*t;for(let t=0;t<O;t++){const s=S[t];U(s[0]+e,s[1]+e,s[2]+e)}}else{for(let t=0;t<O;t++){const e=S[t];U(e[2],e[1],e[0])}for(let t=0;t<O;t++){const e=S[t];U(e[0]+C*a,e[1]+C*a,e[2]+C*a)}}s.addGroup(t,r.length/3-t,0)}(),function(){const t=r.length/3;let e=0;L(A,e),e+=A.length;for(let t=0,s=E.length;t<s;t++){const s=E[t];L(s,e),e+=s.length}s.addGroup(t,r.length/3-t,1)}()}this.setAttribute("position",new fr(r,3)),this.setAttribute("uv",new fr(i,2)),this.computeVertexNormals()}toJSON(){const t=super.toJSON();return function(t,e,s){if(s.shapes=[],Array.isArray(t))for(let e=0,r=t.length;e<r;e++){const r=t[e];s.shapes.push(r.uuid)}else s.shapes.push(t.uuid);void 0!==e.extrudePath&&(s.options.extrudePath=e.extrudePath.toJSON());return s}(this.parameters.shapes,this.parameters.options,t)}static fromJSON(t,e){const s=[];for(let r=0,i=t.shapes.length;r<i;r++){const i=e[t.shapes[r]];s.push(i)}const r=t.options.extrudePath;return void 0!==r&&(t.options.extrudePath=(new bh[r.type]).fromJSON(r)),new lc(s,t.options)}}const uc={generateTopUV:function(t,e,s,r,i){const n=e[3*s],o=e[3*s+1],a=e[3*r],h=e[3*r+1],c=e[3*i],l=e[3*i+1];return[new le(n,o),new le(a,h),new le(c,l)]},generateSideWallUV:function(t,e,s,r,i,n){const o=e[3*s],a=e[3*s+1],h=e[3*s+2],c=e[3*r],l=e[3*r+1],u=e[3*r+2],p=e[3*i],d=e[3*i+1],m=e[3*i+2],f=e[3*n],g=e[3*n+1],y=e[3*n+2];return Math.abs(a-l)<Math.abs(o-c)?[new le(o,1-h),new le(c,1-u),new le(p,1-m),new le(f,1-y)]:[new le(a,1-h),new le(l,1-u),new le(d,1-m),new le(g,1-y)]}};class pc extends Ch{constructor(t=1,e=0){const s=(1+Math.sqrt(5))/2;super([-1,s,0,1,s,0,-1,-s,0,1,-s,0,0,-1,s,0,1,s,0,-1,-s,0,1,-s,s,0,-1,s,0,1,-s,0,-1,-s,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new pc(t.radius,t.detail)}}class dc extends Ch{constructor(t=1,e=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new dc(t.radius,t.detail)}}class mc extends Er{constructor(t=.5,e=1,s=8,r=1,i=0,n=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:s,phiSegments:r,thetaStart:i,thetaLength:n},s=Math.max(3,s);const o=[],a=[],h=[],c=[];let l=t;const u=(e-t)/(r=Math.max(1,r)),p=new Ge,d=new le;for(let t=0;t<=r;t++){for(let t=0;t<=s;t++){const r=i+t/s*n;p.x=l*Math.cos(r),p.y=l*Math.sin(r),a.push(p.x,p.y,p.z),h.push(0,0,1),d.x=(p.x/e+1)/2,d.y=(p.y/e+1)/2,c.push(d.x,d.y)}l+=u}for(let t=0;t<r;t++){const e=t*(s+1);for(let t=0;t<s;t++){const r=t+e,i=r,n=r+s+1,a=r+s+2,h=r+1;o.push(i,n,h),o.push(n,a,h)}}this.setIndex(o),this.setAttribute("position",new fr(a,3)),this.setAttribute("normal",new fr(h,3)),this.setAttribute("uv",new fr(c,2))}static fromJSON(t){return new mc(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}}class fc extends Er{constructor(t=new Nh([new le(0,.5),new le(-.5,-.5),new le(.5,-.5)]),e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const s=[],r=[],i=[],n=[];let o=0,a=0;if(!1===Array.isArray(t))h(t);else for(let e=0;e<t.length;e++)h(t[e]),this.addGroup(o,a,e),o+=a,a=0;function h(t){const o=r.length/3,h=t.extractPoints(e);let c=h.shape;const l=h.holes;!1===ac.isClockWise(c)&&(c=c.reverse());for(let t=0,e=l.length;t<e;t++){const e=l[t];!0===ac.isClockWise(e)&&(l[t]=e.reverse())}const u=ac.triangulateShape(c,l);for(let t=0,e=l.length;t<e;t++){const e=l[t];c=c.concat(e)}for(let t=0,e=c.length;t<e;t++){const e=c[t];r.push(e.x,e.y,0),i.push(0,0,1),n.push(e.x,e.y)}for(let t=0,e=u.length;t<e;t++){const e=u[t],r=e[0]+o,i=e[1]+o,n=e[2]+o;s.push(r,i,n),a+=3}}this.setIndex(s),this.setAttribute("position",new fr(r,3)),this.setAttribute("normal",new fr(i,3)),this.setAttribute("uv",new fr(n,2))}toJSON(){const t=super.toJSON();return function(t,e){if(e.shapes=[],Array.isArray(t))for(let s=0,r=t.length;s<r;s++){const r=t[s];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}(this.parameters.shapes,t)}static fromJSON(t,e){const s=[];for(let r=0,i=t.shapes.length;r<i;r++){const i=e[t.shapes[r]];s.push(i)}return new fc(s,t.curveSegments)}}class gc extends Er{constructor(t=1,e=32,s=16,r=0,i=2*Math.PI,n=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:s,phiStart:r,phiLength:i,thetaStart:n,thetaLength:o},e=Math.max(3,Math.floor(e)),s=Math.max(2,Math.floor(s));const a=Math.min(n+o,Math.PI);let h=0;const c=[],l=new Ge,u=new Ge,p=[],d=[],m=[],f=[];for(let p=0;p<=s;p++){const g=[],y=p/s;let T=0;0==p&&0==n?T=.5/e:p==s&&a==Math.PI&&(T=-.5/e);for(let s=0;s<=e;s++){const a=s/e;l.x=-t*Math.cos(r+a*i)*Math.sin(n+y*o),l.y=t*Math.cos(n+y*o),l.z=t*Math.sin(r+a*i)*Math.sin(n+y*o),d.push(l.x,l.y,l.z),u.copy(l).normalize(),m.push(u.x,u.y,u.z),f.push(a+T,1-y),g.push(h++)}c.push(g)}for(let t=0;t<s;t++)for(let r=0;r<e;r++){const e=c[t][r+1],i=c[t][r],o=c[t+1][r],h=c[t+1][r+1];(0!==t||n>0)&&p.push(e,i,h),(t!==s-1||a<Math.PI)&&p.push(i,o,h)}this.setIndex(p),this.setAttribute("position",new fr(d,3)),this.setAttribute("normal",new fr(m,3)),this.setAttribute("uv",new fr(f,2))}static fromJSON(t){return new gc(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class yc extends Ch{constructor(t=1,e=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new yc(t.radius,t.detail)}}class Tc extends Er{constructor(t=1,e=.4,s=8,r=6,i=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:s,tubularSegments:r,arc:i},s=Math.floor(s),r=Math.floor(r);const n=[],o=[],a=[],h=[],c=new Ge,l=new Ge,u=new Ge;for(let n=0;n<=s;n++)for(let p=0;p<=r;p++){const d=p/r*i,m=n/s*Math.PI*2;l.x=(t+e*Math.cos(m))*Math.cos(d),l.y=(t+e*Math.cos(m))*Math.sin(d),l.z=e*Math.sin(m),o.push(l.x,l.y,l.z),c.x=t*Math.cos(d),c.y=t*Math.sin(d),u.subVectors(l,c).normalize(),a.push(u.x,u.y,u.z),h.push(p/r),h.push(n/s)}for(let t=1;t<=s;t++)for(let e=1;e<=r;e++){const s=(r+1)*t+e-1,i=(r+1)*(t-1)+e-1,o=(r+1)*(t-1)+e,a=(r+1)*t+e;n.push(s,i,a),n.push(i,o,a)}this.setIndex(n),this.setAttribute("position",new fr(o,3)),this.setAttribute("normal",new fr(a,3)),this.setAttribute("uv",new fr(h,2))}static fromJSON(t){return new Tc(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}class vc extends Er{constructor(t=1,e=.4,s=64,r=8,i=2,n=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:s,radialSegments:r,p:i,q:n},s=Math.floor(s),r=Math.floor(r);const o=[],a=[],h=[],c=[],l=new Ge,u=new Ge,p=new Ge,d=new Ge,m=new Ge,f=new Ge,g=new Ge;for(let o=0;o<=s;++o){const T=o/s*i*Math.PI*2;y(T,i,n,t,p),y(T+.01,i,n,t,d),f.subVectors(d,p),g.addVectors(d,p),m.crossVectors(f,g),g.crossVectors(m,f),m.normalize(),g.normalize();for(let t=0;t<=r;++t){const i=t/r*Math.PI*2,n=-e*Math.cos(i),d=e*Math.sin(i);l.x=p.x+(n*g.x+d*m.x),l.y=p.y+(n*g.y+d*m.y),l.z=p.z+(n*g.z+d*m.z),a.push(l.x,l.y,l.z),u.subVectors(l,p).normalize(),h.push(u.x,u.y,u.z),c.push(o/s),c.push(t/r)}}for(let t=1;t<=s;t++)for(let e=1;e<=r;e++){const s=(r+1)*(t-1)+(e-1),i=(r+1)*t+(e-1),n=(r+1)*t+e,a=(r+1)*(t-1)+e;o.push(s,i,a),o.push(i,n,a)}function y(t,e,s,r,i){const n=Math.cos(t),o=Math.sin(t),a=s/e*t,h=Math.cos(a);i.x=r*(2+h)*.5*n,i.y=r*(2+h)*o*.5,i.z=r*Math.sin(a)*.5}this.setIndex(o),this.setAttribute("position",new fr(a,3)),this.setAttribute("normal",new fr(h,3)),this.setAttribute("uv",new fr(c,2))}static fromJSON(t){return new vc(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}class bc extends Er{constructor(t=new Th(new Ge(-1,-1,0),new Ge(-1,1,0),new Ge(1,1,0)),e=64,s=1,r=8,i=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:s,radialSegments:r,closed:i};const n=t.computeFrenetFrames(e,i);this.tangents=n.tangents,this.normals=n.normals,this.binormals=n.binormals;const o=new Ge,a=new Ge,h=new le;let c=new Ge;const l=[],u=[],p=[],d=[];function m(i){c=t.getPointAt(i/e,c);const h=n.normals[i],p=n.binormals[i];for(let t=0;t<=r;t++){const e=t/r*Math.PI*2,i=Math.sin(e),n=-Math.cos(e);a.x=n*h.x+i*p.x,a.y=n*h.y+i*p.y,a.z=n*h.z+i*p.z,a.normalize(),u.push(a.x,a.y,a.z),o.x=c.x+s*a.x,o.y=c.y+s*a.y,o.z=c.z+s*a.z,l.push(o.x,o.y,o.z)}}!function(){for(let t=0;t<e;t++)m(t);m(!1===i?e:0),function(){for(let t=0;t<=e;t++)for(let s=0;s<=r;s++)h.x=t/e,h.y=s/r,p.push(h.x,h.y)}(),function(){for(let t=1;t<=e;t++)for(let e=1;e<=r;e++){const s=(r+1)*(t-1)+(e-1),i=(r+1)*t+(e-1),n=(r+1)*t+e,o=(r+1)*(t-1)+e;d.push(s,i,o),d.push(i,n,o)}}()}(),this.setIndex(d),this.setAttribute("position",new fr(l,3)),this.setAttribute("normal",new fr(u,3)),this.setAttribute("uv",new fr(p,2))}toJSON(){const t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new bc((new bh[t.path.type]).fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}class wc extends Er{constructor(t=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},null!==t){const e=[],s=new Set,r=new Ge,i=new Ge;if(null!==t.index){const n=t.attributes.position,o=t.index;let a=t.groups;0===a.length&&(a=[{start:0,count:o.count,materialIndex:0}]);for(let t=0,h=a.length;t<h;++t){const h=a[t],c=h.start;for(let t=c,a=c+h.count;t<a;t+=3)for(let a=0;a<3;a++){const h=o.getX(t+a),c=o.getX(t+(a+1)%3);r.fromBufferAttribute(n,h),i.fromBufferAttribute(n,c),!0===xc(r,i,s)&&(e.push(r.x,r.y,r.z),e.push(i.x,i.y,i.z))}}}else{const n=t.attributes.position;for(let t=0,o=n.count/3;t<o;t++)for(let o=0;o<3;o++){const a=3*t+o,h=3*t+(o+1)%3;r.fromBufferAttribute(n,a),i.fromBufferAttribute(n,h),!0===xc(r,i,s)&&(e.push(r.x,r.y,r.z),e.push(i.x,i.y,i.z))}}this.setAttribute("position",new fr(e,3))}}}function xc(t,e,s){const r=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return!0!==s.has(r)&&!0!==s.has(i)&&(s.add(r),s.add(i),!0)}var Ic=Object.freeze({__proto__:null,BoxGeometry:Vr,BoxBufferGeometry:Vr,CapsuleGeometry:Eh,CapsuleBufferGeometry:Eh,CircleGeometry:Sh,CircleBufferGeometry:Sh,ConeGeometry:Rh,ConeBufferGeometry:Rh,CylinderGeometry:Ah,CylinderBufferGeometry:Ah,DodecahedronGeometry:Oh,DodecahedronBufferGeometry:Oh,EdgesGeometry:Ph,ExtrudeGeometry:lc,ExtrudeBufferGeometry:lc,IcosahedronGeometry:pc,IcosahedronBufferGeometry:pc,LatheGeometry:Ih,LatheBufferGeometry:Ih,OctahedronGeometry:dc,OctahedronBufferGeometry:dc,PlaneGeometry:li,PlaneBufferGeometry:li,PolyhedronGeometry:Ch,PolyhedronBufferGeometry:Ch,RingGeometry:mc,RingBufferGeometry:mc,ShapeGeometry:fc,ShapeBufferGeometry:fc,SphereGeometry:gc,SphereBufferGeometry:gc,TetrahedronGeometry:yc,TetrahedronBufferGeometry:yc,TorusGeometry:Tc,TorusBufferGeometry:Tc,TorusKnotGeometry:vc,TorusKnotBufferGeometry:vc,TubeGeometry:bc,TubeBufferGeometry:bc,WireframeGeometry:wc});class Ec extends sr{constructor(t){super(),this.type="ShadowMaterial",this.color=new Ae(0),this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.fog=t.fog,this}}Ec.prototype.isShadowMaterial=!0;class Sc extends qr{constructor(t){super(t),this.type="RawShaderMaterial"}}Sc.prototype.isRawShaderMaterial=!0;class Ac extends sr{constructor(t){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ae(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ae(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new le(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}Ac.prototype.isMeshStandardMaterial=!0;class Rc extends Ac{constructor(t){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new le(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return re(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenColor=new Ae(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Ae(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ae(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(t)}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}Rc.prototype.isMeshPhysicalMaterial=!0;class Cc extends sr{constructor(t){super(),this.type="MeshPhongMaterial",this.color=new Ae(16777215),this.specular=new Ae(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ae(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new le(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}Cc.prototype.isMeshPhongMaterial=!0;class Oc extends sr{constructor(t){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ae(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ae(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new le(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}Oc.prototype.isMeshToonMaterial=!0;class _c extends sr{constructor(t){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new le(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}_c.prototype.isMeshNormalMaterial=!0;class Dc extends sr{constructor(t){super(),this.type="MeshLambertMaterial",this.color=new Ae(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ae(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}Dc.prototype.isMeshLambertMaterial=!0;class Fc extends sr{constructor(t){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ae(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new le(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this.fog=t.fog,this}}Fc.prototype.isMeshMatcapMaterial=!0;class Mc extends Ma{constructor(t){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}Mc.prototype.isLineDashedMaterial=!0;const Pc={ShadowMaterial:Ec,SpriteMaterial:$o,RawShaderMaterial:Sc,ShaderMaterial:qr,PointsMaterial:Va,MeshPhysicalMaterial:Rc,MeshStandardMaterial:Ac,MeshPhongMaterial:Cc,MeshToonMaterial:Oc,MeshNormalMaterial:_c,MeshLambertMaterial:Dc,MeshDepthMaterial:_o,MeshDistanceMaterial:Do,MeshBasicMaterial:rr,MeshMatcapMaterial:Fc,LineDashedMaterial:Mc,LineBasicMaterial:Ma,Material:sr};sr.fromType=function(t){return new Pc[t]};const Nc={arraySlice:function(t,e,s){return Nc.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==s?s:t.length)):t.slice(e,s)},convertArray:function(t,e,s){return!t||!s&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){const e=t.length,s=new Array(e);for(let t=0;t!==e;++t)s[t]=t;return s.sort((function(e,s){return t[e]-t[s]})),s},sortedArray:function(t,e,s){const r=t.length,i=new t.constructor(r);for(let n=0,o=0;o!==r;++n){const r=s[n]*e;for(let s=0;s!==e;++s)i[o++]=t[r+s]}return i},flattenJSON:function(t,e,s,r){let i=1,n=t[0];for(;void 0!==n&&void 0===n[r];)n=t[i++];if(void 0===n)return;let o=n[r];if(void 0!==o)if(Array.isArray(o))do{o=n[r],void 0!==o&&(e.push(n.time),s.push.apply(s,o)),n=t[i++]}while(void 0!==n);else if(void 0!==o.toArray)do{o=n[r],void 0!==o&&(e.push(n.time),o.toArray(s,s.length)),n=t[i++]}while(void 0!==n);else do{o=n[r],void 0!==o&&(e.push(n.time),s.push(o)),n=t[i++]}while(void 0!==n)},subclip:function(t,e,s,r,i=30){const n=t.clone();n.name=e;const o=[];for(let t=0;t<n.tracks.length;++t){const e=n.tracks[t],a=e.getValueSize(),h=[],c=[];for(let t=0;t<e.times.length;++t){const n=e.times[t]*i;if(!(n<s||n>=r)){h.push(e.times[t]);for(let s=0;s<a;++s)c.push(e.values[t*a+s])}}0!==h.length&&(e.times=Nc.convertArray(h,e.times.constructor),e.values=Nc.convertArray(c,e.values.constructor),o.push(e))}n.tracks=o;let a=1/0;for(let t=0;t<n.tracks.length;++t)a>n.tracks[t].times[0]&&(a=n.tracks[t].times[0]);for(let t=0;t<n.tracks.length;++t)n.tracks[t].shift(-1*a);return n.resetDuration(),n},makeClipAdditive:function(t,e=0,s=t,r=30){r<=0&&(r=30);const i=s.tracks.length,n=e/r;for(let e=0;e<i;++e){const r=s.tracks[e],i=r.ValueTypeName;if("bool"===i||"string"===i)continue;const o=t.tracks.find((function(t){return t.name===r.name&&t.ValueTypeName===i}));if(void 0===o)continue;let a=0;const h=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(a=h/3);let c=0;const l=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=l/3);const u=r.times.length-1;let p;if(n<=r.times[0]){const t=a,e=h-a;p=Nc.arraySlice(r.values,t,e)}else if(n>=r.times[u]){const t=u*h+a,e=t+h-a;p=Nc.arraySlice(r.values,t,e)}else{const t=r.createInterpolant(),e=a,s=h-a;t.evaluate(n),p=Nc.arraySlice(t.resultBuffer,e,s)}if("quaternion"===i){(new Be).fromArray(p).normalize().conjugate().toArray(p)}const d=o.times.length;for(let t=0;t<d;++t){const e=t*l+c;if("quaternion"===i)Be.multiplyQuaternionsFlat(o.values,e,p,0,o.values,e);else{const t=l-2*c;for(let s=0;s<t;++s)o.values[e+s]-=p[s]}}}return t.blendMode=Gt,t}};class Lc{constructor(t,e,s,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(s),this.sampleValues=e,this.valueSize=s,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let s=this._cachedIndex,r=e[s],i=e[s-1];t:{e:{let n;s:{r:if(!(t<r)){for(let n=s+2;;){if(void 0===r){if(t<i)break r;return s=e.length,this._cachedIndex=s,this.afterEnd_(s-1,t,i)}if(s===n)break;if(i=r,r=e[++s],t<r)break e}n=e.length;break s}if(t>=i)break t;{const o=e[1];t<o&&(s=2,i=o);for(let n=s-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(s===n)break;if(r=i,i=e[--s-1],t>=i)break e}n=s,s=0}}for(;s<n;){const r=s+n>>>1;t<e[r]?n=r:s=r+1}if(r=e[s],i=e[s-1],void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(void 0===r)return s=e.length,this._cachedIndex=s,this.afterEnd_(s-1,i,t)}this._cachedIndex=s,this.intervalChanged_(s,i,r)}return this.interpolate_(s,i,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,s=this.sampleValues,r=this.valueSize,i=t*r;for(let t=0;t!==r;++t)e[t]=s[i+t];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}Lc.prototype.beforeStart_=Lc.prototype.copySampleValue_,Lc.prototype.afterEnd_=Lc.prototype.copySampleValue_;class kc extends Lc{constructor(t,e,s,r){super(t,e,s,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:kt,endingEnd:kt}}intervalChanged_(t,e,s){const r=this.parameterPositions;let i=t-2,n=t+1,o=r[i],a=r[n];if(void 0===o)switch(this.getSettings_().endingStart){case Ut:i=t,o=2*e-s;break;case Ht:i=r.length-2,o=e+r[i]-r[i+1];break;default:i=t,o=s}if(void 0===a)switch(this.getSettings_().endingEnd){case Ut:n=t,a=2*s-e;break;case Ht:n=1,a=s+r[1]-r[0];break;default:n=t-1,a=e}const h=.5*(s-e),c=this.valueSize;this._weightPrev=h/(e-o),this._weightNext=h/(a-s),this._offsetPrev=i*c,this._offsetNext=n*c}interpolate_(t,e,s,r){const i=this.resultBuffer,n=this.sampleValues,o=this.valueSize,a=t*o,h=a-o,c=this._offsetPrev,l=this._offsetNext,u=this._weightPrev,p=this._weightNext,d=(s-e)/(r-e),m=d*d,f=m*d,g=-u*f+2*u*m-u*d,y=(1+u)*f+(-1.5-2*u)*m+(-.5+u)*d+1,T=(-1-p)*f+(1.5+p)*m+.5*d,v=p*f-p*m;for(let t=0;t!==o;++t)i[t]=g*n[c+t]+y*n[h+t]+T*n[a+t]+v*n[l+t];return i}}class Uc extends Lc{constructor(t,e,s,r){super(t,e,s,r)}interpolate_(t,e,s,r){const i=this.resultBuffer,n=this.sampleValues,o=this.valueSize,a=t*o,h=a-o,c=(s-e)/(r-e),l=1-c;for(let t=0;t!==o;++t)i[t]=n[h+t]*l+n[a+t]*c;return i}}class Hc extends Lc{constructor(t,e,s,r){super(t,e,s,r)}interpolate_(t){return this.copySampleValue_(t-1)}}class Bc{constructor(t,e,s,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Nc.convertArray(e,this.TimeBufferType),this.values=Nc.convertArray(s,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let s;if(e.toJSON!==this.toJSON)s=e.toJSON(t);else{s={name:t.name,times:Nc.convertArray(t.times,Array),values:Nc.convertArray(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(s.interpolation=e)}return s.type=t.ValueTypeName,s}InterpolantFactoryMethodDiscrete(t){return new Hc(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new Uc(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new kc(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case Pt:e=this.InterpolantFactoryMethodDiscrete;break;case Nt:e=this.InterpolantFactoryMethodLinear;break;case Lt:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Pt;case this.InterpolantFactoryMethodLinear:return Nt;case this.InterpolantFactoryMethodSmooth:return Lt}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let s=0,r=e.length;s!==r;++s)e[s]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let s=0,r=e.length;s!==r;++s)e[s]*=t}return this}trim(t,e){const s=this.times,r=s.length;let i=0,n=r-1;for(;i!==r&&s[i]<t;)++i;for(;-1!==n&&s[n]>e;)--n;if(++n,0!==i||n!==r){i>=n&&(n=Math.max(n,1),i=n-1);const t=this.getValueSize();this.times=Nc.arraySlice(s,i,n),this.values=Nc.arraySlice(this.values,i*t,n*t)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const s=this.times,r=this.values,i=s.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let n=null;for(let e=0;e!==i;e++){const r=s[e];if("number"==typeof r&&isNaN(r)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,e,r),t=!1;break}if(null!==n&&n>r){console.error("THREE.KeyframeTrack: Out of order keys.",this,e,r,n),t=!1;break}n=r}if(void 0!==r&&Nc.isTypedArray(r))for(let e=0,s=r.length;e!==s;++e){const s=r[e];if(isNaN(s)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,e,s),t=!1;break}}return t}optimize(){const t=Nc.arraySlice(this.times),e=Nc.arraySlice(this.values),s=this.getValueSize(),r=this.getInterpolation()===Lt,i=t.length-1;let n=1;for(let o=1;o<i;++o){let i=!1;const a=t[o];if(a!==t[o+1]&&(1!==o||a!==t[0]))if(r)i=!0;else{const t=o*s,r=t-s,n=t+s;for(let o=0;o!==s;++o){const s=e[t+o];if(s!==e[r+o]||s!==e[n+o]){i=!0;break}}}if(i){if(o!==n){t[n]=t[o];const r=o*s,i=n*s;for(let t=0;t!==s;++t)e[i+t]=e[r+t]}++n}}if(i>0){t[n]=t[i];for(let t=i*s,r=n*s,o=0;o!==s;++o)e[r+o]=e[t+o];++n}return n!==t.length?(this.times=Nc.arraySlice(t,0,n),this.values=Nc.arraySlice(e,0,n*s)):(this.times=t,this.values=e),this}clone(){const t=Nc.arraySlice(this.times,0),e=Nc.arraySlice(this.values,0),s=new(0,this.constructor)(this.name,t,e);return s.createInterpolant=this.createInterpolant,s}}Bc.prototype.TimeBufferType=Float32Array,Bc.prototype.ValueBufferType=Float32Array,Bc.prototype.DefaultInterpolation=Nt;class Gc extends Bc{}Gc.prototype.ValueTypeName="bool",Gc.prototype.ValueBufferType=Array,Gc.prototype.DefaultInterpolation=Pt,Gc.prototype.InterpolantFactoryMethodLinear=void 0,Gc.prototype.InterpolantFactoryMethodSmooth=void 0;class jc extends Bc{}jc.prototype.ValueTypeName="color";class zc extends Bc{}zc.prototype.ValueTypeName="number";class Vc extends Lc{constructor(t,e,s,r){super(t,e,s,r)}interpolate_(t,e,s,r){const i=this.resultBuffer,n=this.sampleValues,o=this.valueSize,a=(s-e)/(r-e);let h=t*o;for(let t=h+o;h!==t;h+=4)Be.slerpFlat(i,0,n,h-o,n,h,a);return i}}class Wc extends Bc{InterpolantFactoryMethodLinear(t){return new Vc(this.times,this.values,this.getValueSize(),t)}}Wc.prototype.ValueTypeName="quaternion",Wc.prototype.DefaultInterpolation=Nt,Wc.prototype.InterpolantFactoryMethodSmooth=void 0;class Yc extends Bc{}Yc.prototype.ValueTypeName="string",Yc.prototype.ValueBufferType=Array,Yc.prototype.DefaultInterpolation=Pt,Yc.prototype.InterpolantFactoryMethodLinear=void 0,Yc.prototype.InterpolantFactoryMethodSmooth=void 0;class Xc extends Bc{}Xc.prototype.ValueTypeName="vector";class qc{constructor(t,e=-1,s,r=2500){this.name=t,this.tracks=s,this.duration=e,this.blendMode=r,this.uuid=se(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],s=t.tracks,r=1/(t.fps||1);for(let t=0,i=s.length;t!==i;++t)e.push(Kc(s[t]).scale(r));const i=new this(t.name,t.duration,e,t.blendMode);return i.uuid=t.uuid,i}static toJSON(t){const e=[],s=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let t=0,r=s.length;t!==r;++t)e.push(Bc.toJSON(s[t]));return r}static CreateFromMorphTargetSequence(t,e,s,r){const i=e.length,n=[];for(let t=0;t<i;t++){let o=[],a=[];o.push((t+i-1)%i,t,(t+1)%i),a.push(0,1,0);const h=Nc.getKeyframeOrder(o);o=Nc.sortedArray(o,1,h),a=Nc.sortedArray(a,1,h),r||0!==o[0]||(o.push(i),a.push(a[0])),n.push(new zc(".morphTargetInfluences["+e[t].name+"]",o,a).scale(1/s))}return new this(t,-1,n)}static findByName(t,e){let s=t;if(!Array.isArray(t)){const e=t;s=e.geometry&&e.geometry.animations||e.animations}for(let t=0;t<s.length;t++)if(s[t].name===e)return s[t];return null}static CreateClipsFromMorphTargetSequences(t,e,s){const r={},i=/^([\w-]*?)([\d]+)$/;for(let e=0,s=t.length;e<s;e++){const s=t[e],n=s.name.match(i);if(n&&n.length>1){const t=n[1];let e=r[t];e||(r[t]=e=[]),e.push(s)}}const n=[];for(const t in r)n.push(this.CreateFromMorphTargetSequence(t,r[t],e,s));return n}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const s=function(t,e,s,r,i){if(0!==s.length){const n=[],o=[];Nc.flattenJSON(s,n,o,r),0!==n.length&&i.push(new t(e,n,o))}},r=[],i=t.name||"default",n=t.fps||30,o=t.blendMode;let a=t.length||-1;const h=t.hierarchy||[];for(let t=0;t<h.length;t++){const i=h[t].keys;if(i&&0!==i.length)if(i[0].morphTargets){const t={};let e;for(e=0;e<i.length;e++)if(i[e].morphTargets)for(let s=0;s<i[e].morphTargets.length;s++)t[i[e].morphTargets[s]]=-1;for(const s in t){const t=[],n=[];for(let r=0;r!==i[e].morphTargets.length;++r){const r=i[e];t.push(r.time),n.push(r.morphTarget===s?1:0)}r.push(new zc(".morphTargetInfluence["+s+"]",t,n))}a=t.length*n}else{const n=".bones["+e[t].name+"]";s(Xc,n+".position",i,"pos",r),s(Wc,n+".quaternion",i,"rot",r),s(Xc,n+".scale",i,"scl",r)}}if(0===r.length)return null;return new this(i,a,r,o)}resetDuration(){let t=0;for(let e=0,s=this.tracks.length;e!==s;++e){const s=this.tracks[e];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Kc(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return zc;case"vector":case"vector2":case"vector3":case"vector4":return Xc;case"color":return jc;case"quaternion":return Wc;case"bool":case"boolean":return Gc;case"string":return Yc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){const e=[],s=[];Nc.flattenJSON(t.keys,e,s,"value"),t.times=e,t.values=s}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const Jc={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class $c{constructor(t,e,s){const r=this;let i,n=!1,o=0,a=0;const h=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=s,this.itemStart=function(t){a++,!1===n&&void 0!==r.onStart&&r.onStart(t,o,a),n=!0},this.itemEnd=function(t){o++,void 0!==r.onProgress&&r.onProgress(t,o,a),o===a&&(n=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return i?i(t):t},this.setURLModifier=function(t){return i=t,this},this.addHandler=function(t,e){return h.push(t,e),this},this.removeHandler=function(t){const e=h.indexOf(t);return-1!==e&&h.splice(e,2),this},this.getHandler=function(t){for(let e=0,s=h.length;e<s;e+=2){const s=h[e],r=h[e+1];if(s.global&&(s.lastIndex=0),s.test(t))return r}return null}}}const Zc=new $c;class Qc{constructor(t){this.manager=void 0!==t?t:Zc,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const s=this;return new Promise((function(r,i){s.load(t,r,e,i)}))}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}const tl={};class el extends Qc{constructor(t){super(t)}load(t,e,s,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=Jc.get(t);if(void 0!==i)return this.manager.itemStart(t),setTimeout((()=>{e&&e(i),this.manager.itemEnd(t)}),0),i;if(void 0!==tl[t])return void tl[t].push({onLoad:e,onProgress:s,onError:r});tl[t]=[],tl[t].push({onLoad:e,onProgress:s,onError:r});const n=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,a=this.responseType;fetch(n).then((e=>{if(200===e.status||0===e.status){if(0===e.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===e.body||void 0===e.body.getReader)return e;const s=tl[t],r=e.body.getReader(),i=e.headers.get("Content-Length"),n=i?parseInt(i):0,o=0!==n;let a=0;const h=new ReadableStream({start(t){!function e(){r.read().then((({done:r,value:i})=>{if(r)t.close();else{a+=i.byteLength;const r=new ProgressEvent("progress",{lengthComputable:o,loaded:a,total:n});for(let t=0,e=s.length;t<e;t++){const e=s[t];e.onProgress&&e.onProgress(r)}t.enqueue(i),e()}}))}()}});return new Response(h)}throw Error(`fetch for "${e.url}" responded with ${e.status}: ${e.statusText}`)})).then((t=>{switch(a){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"document":return t.text().then((t=>(new DOMParser).parseFromString(t,o)));case"json":return t.json();default:if(void 0===o)return t.text();{const e=/charset="?([^;"\s]*)"?/i.exec(o),s=e&&e[1]?e[1].toLowerCase():void 0,r=new TextDecoder(s);return t.arrayBuffer().then((t=>r.decode(t)))}}})).then((e=>{Jc.add(t,e);const s=tl[t];delete tl[t];for(let t=0,r=s.length;t<r;t++){const r=s[t];r.onLoad&&r.onLoad(e)}})).catch((e=>{const s=tl[t];if(void 0===s)throw this.manager.itemError(t),e;delete tl[t];for(let t=0,r=s.length;t<r;t++){const r=s[t];r.onError&&r.onError(e)}this.manager.itemError(t)})).finally((()=>{this.manager.itemEnd(t)})),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class sl extends Qc{constructor(t){super(t)}load(t,e,s,r){const i=this,n=[],o=new Qa,a=new el(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(i.withCredentials);let h=0;function c(c){a.load(t[c],(function(t){const s=i.parse(t,!0);n[c]={width:s.width,height:s.height,format:s.format,mipmaps:s.mipmaps},h+=1,6===h&&(1===s.mipmapCount&&(o.minFilter=X),o.image=n,o.format=s.format,o.needsUpdate=!0,e&&e(o))}),s,r)}if(Array.isArray(t))for(let e=0,s=t.length;e<s;++e)c(e);else a.load(t,(function(t){const s=i.parse(t,!0);if(s.isCubemap){const t=s.mipmaps.length/s.mipmapCount;for(let e=0;e<t;e++){n[e]={mipmaps:[]};for(let t=0;t<s.mipmapCount;t++)n[e].mipmaps.push(s.mipmaps[e*s.mipmapCount+t]),n[e].format=s.format,n[e].width=s.width,n[e].height=s.height}o.image=n}else o.image.width=s.width,o.image.height=s.height,o.mipmaps=s.mipmaps;1===s.mipmapCount&&(o.minFilter=X),o.format=s.format,o.needsUpdate=!0,e&&e(o)}),s,r);return o}}class rl extends Qc{constructor(t){super(t)}load(t,e,s,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=this,n=Jc.get(t);if(void 0!==n)return i.manager.itemStart(t),setTimeout((function(){e&&e(n),i.manager.itemEnd(t)}),0),n;const o=fe("img");function a(){c(),Jc.add(t,this),e&&e(this),i.manager.itemEnd(t)}function h(e){c(),r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}function c(){o.removeEventListener("load",a,!1),o.removeEventListener("error",h,!1)}return o.addEventListener("load",a,!1),o.addEventListener("error",h,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(t),o.src=t,o}}class il extends Qc{constructor(t){super(t)}load(t,e,s,r){const i=new Qr,n=new rl(this.manager);n.setCrossOrigin(this.crossOrigin),n.setPath(this.path);let o=0;function a(s){n.load(t[s],(function(t){i.images[s]=t,o++,6===o&&(i.needsUpdate=!0,e&&e(i))}),void 0,r)}for(let e=0;e<t.length;++e)a(e);return i}}class nl extends Qc{constructor(t){super(t)}load(t,e,s,r){const i=this,n=new Ia,o=new el(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(i.withCredentials),o.load(t,(function(t){const s=i.parse(t);s&&(void 0!==s.image?n.image=s.image:void 0!==s.data&&(n.image.width=s.width,n.image.height=s.height,n.image.data=s.data),n.wrapS=void 0!==s.wrapS?s.wrapS:j,n.wrapT=void 0!==s.wrapT?s.wrapT:j,n.magFilter=void 0!==s.magFilter?s.magFilter:X,n.minFilter=void 0!==s.minFilter?s.minFilter:X,n.anisotropy=void 0!==s.anisotropy?s.anisotropy:1,void 0!==s.encoding&&(n.encoding=s.encoding),void 0!==s.flipY&&(n.flipY=s.flipY),void 0!==s.format&&(n.format=s.format),void 0!==s.type&&(n.type=s.type),void 0!==s.mipmaps&&(n.mipmaps=s.mipmaps,n.minFilter=K),1===s.mipmapCount&&(n.minFilter=X),void 0!==s.generateMipmaps&&(n.generateMipmaps=s.generateMipmaps),n.needsUpdate=!0,e&&e(n,s))}),s,r),n}}class ol extends Qc{constructor(t){super(t)}load(t,e,s,r){const i=new Fe,n=new rl(this.manager);return n.setCrossOrigin(this.crossOrigin),n.setPath(this.path),n.load(t,(function(t){i.image=t,i.needsUpdate=!0,void 0!==e&&e(i)}),s,r),i}}class al extends zs{constructor(t,e=1){super(),this.type="Light",this.color=new Ae(t),this.intensity=e}dispose(){}copy(t){return super.copy(t),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}al.prototype.isLight=!0;class hl extends al{constructor(t,e,s){super(t,s),this.type="HemisphereLight",this.position.copy(zs.DefaultUp),this.updateMatrix(),this.groundColor=new Ae(e)}copy(t){return al.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}hl.prototype.isHemisphereLight=!0;const cl=new Ts,ll=new Ge,ul=new Ge;class pl{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new le(512,512),this.map=null,this.mapPass=null,this.matrix=new Ts,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ai,this._frameExtents=new le(1,1),this._viewportCount=1,this._viewports=[new Me(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,s=this.matrix;ll.setFromMatrixPosition(t.matrixWorld),e.position.copy(ll),ul.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(ul),e.updateMatrixWorld(),cl.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(cl),s.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),s.multiply(e.projectionMatrix),s.multiply(e.matrixWorldInverse)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class dl extends pl{constructor(){super(new Jr(50,1,.5,500)),this.focus=1}updateMatrices(t){const e=this.camera,s=2*ee*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=t.distance||e.far;s===e.fov&&r===e.aspect&&i===e.far||(e.fov=s,e.aspect=r,e.far=i,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}dl.prototype.isSpotLightShadow=!0;class ml extends al{constructor(t,e,s=0,r=Math.PI/3,i=0,n=1){super(t,e),this.type="SpotLight",this.position.copy(zs.DefaultUp),this.updateMatrix(),this.target=new zs,this.distance=s,this.angle=r,this.penumbra=i,this.decay=n,this.shadow=new dl}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}ml.prototype.isSpotLight=!0;const fl=new Ts,gl=new Ge,yl=new Ge;class Tl extends pl{constructor(){super(new Jr(90,1,.5,500)),this._frameExtents=new le(4,2),this._viewportCount=6,this._viewports=[new Me(2,1,1,1),new Me(0,1,1,1),new Me(3,1,1,1),new Me(1,1,1,1),new Me(3,0,1,1),new Me(1,0,1,1)],this._cubeDirections=[new Ge(1,0,0),new Ge(-1,0,0),new Ge(0,0,1),new Ge(0,0,-1),new Ge(0,1,0),new Ge(0,-1,0)],this._cubeUps=[new Ge(0,1,0),new Ge(0,1,0),new Ge(0,1,0),new Ge(0,1,0),new Ge(0,0,1),new Ge(0,0,-1)]}updateMatrices(t,e=0){const s=this.camera,r=this.matrix,i=t.distance||s.far;i!==s.far&&(s.far=i,s.updateProjectionMatrix()),gl.setFromMatrixPosition(t.matrixWorld),s.position.copy(gl),yl.copy(s.position),yl.add(this._cubeDirections[e]),s.up.copy(this._cubeUps[e]),s.lookAt(yl),s.updateMatrixWorld(),r.makeTranslation(-gl.x,-gl.y,-gl.z),fl.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),this._frustum.setFromProjectionMatrix(fl)}}Tl.prototype.isPointLightShadow=!0;class vl extends al{constructor(t,e,s=0,r=1){super(t,e),this.type="PointLight",this.distance=s,this.decay=r,this.shadow=new Tl}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}vl.prototype.isPointLight=!0;class bl extends pl{constructor(){super(new bi(-5,5,5,-5,.5,500))}}bl.prototype.isDirectionalLightShadow=!0;class wl extends al{constructor(t,e){super(t,e),this.type="DirectionalLight",this.position.copy(zs.DefaultUp),this.updateMatrix(),this.target=new zs,this.shadow=new bl}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}wl.prototype.isDirectionalLight=!0;class xl extends al{constructor(t,e){super(t,e),this.type="AmbientLight"}}xl.prototype.isAmbientLight=!0;class Il extends al{constructor(t,e,s=10,r=10){super(t,e),this.type="RectAreaLight",this.width=s,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}Il.prototype.isRectAreaLight=!0;class El{constructor(){this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new Ge)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const s=t.x,r=t.y,i=t.z,n=this.coefficients;return e.copy(n[0]).multiplyScalar(.282095),e.addScaledVector(n[1],.488603*r),e.addScaledVector(n[2],.488603*i),e.addScaledVector(n[3],.488603*s),e.addScaledVector(n[4],s*r*1.092548),e.addScaledVector(n[5],r*i*1.092548),e.addScaledVector(n[6],.315392*(3*i*i-1)),e.addScaledVector(n[7],s*i*1.092548),e.addScaledVector(n[8],.546274*(s*s-r*r)),e}getIrradianceAt(t,e){const s=t.x,r=t.y,i=t.z,n=this.coefficients;return e.copy(n[0]).multiplyScalar(.886227),e.addScaledVector(n[1],1.023328*r),e.addScaledVector(n[2],1.023328*i),e.addScaledVector(n[3],1.023328*s),e.addScaledVector(n[4],.858086*s*r),e.addScaledVector(n[5],.858086*r*i),e.addScaledVector(n[6],.743125*i*i-.247708),e.addScaledVector(n[7],.858086*s*i),e.addScaledVector(n[8],.429043*(s*s-r*r)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let s=0;s<9;s++)this.coefficients[s].addScaledVector(t.coefficients[s],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let s=0;s<9;s++)this.coefficients[s].lerp(t.coefficients[s],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(t,e=0){const s=this.coefficients;for(let r=0;r<9;r++)s[r].fromArray(t,e+3*r);return this}toArray(t=[],e=0){const s=this.coefficients;for(let r=0;r<9;r++)s[r].toArray(t,e+3*r);return t}static getBasisAt(t,e){const s=t.x,r=t.y,i=t.z;e[0]=.282095,e[1]=.488603*r,e[2]=.488603*i,e[3]=.488603*s,e[4]=1.092548*s*r,e[5]=1.092548*r*i,e[6]=.315392*(3*i*i-1),e[7]=1.092548*s*i,e[8]=.546274*(s*s-r*r)}}El.prototype.isSphericalHarmonics3=!0;class Sl extends al{constructor(t=new El,e=1){super(void 0,e),this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}Sl.prototype.isLightProbe=!0;class Al extends Qc{constructor(t){super(t),this.textures={}}load(t,e,s,r){const i=this,n=new el(i.manager);n.setPath(i.path),n.setRequestHeader(i.requestHeader),n.setWithCredentials(i.withCredentials),n.load(t,(function(s){try{e(i.parse(JSON.parse(s)))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),s,r)}parse(t){const e=this.textures;function s(t){return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]}const r=sr.fromType(t.type);if(void 0!==t.uuid&&(r.uuid=t.uuid),void 0!==t.name&&(r.name=t.name),void 0!==t.color&&void 0!==r.color&&r.color.setHex(t.color),void 0!==t.roughness&&(r.roughness=t.roughness),void 0!==t.metalness&&(r.metalness=t.metalness),void 0!==t.sheen&&(r.sheen=t.sheen),void 0!==t.sheenColor&&(r.sheenColor=(new Ae).setHex(t.sheenColor)),void 0!==t.sheenRoughness&&(r.sheenRoughness=t.sheenRoughness),void 0!==t.emissive&&void 0!==r.emissive&&r.emissive.setHex(t.emissive),void 0!==t.specular&&void 0!==r.specular&&r.specular.setHex(t.specular),void 0!==t.specularIntensity&&(r.specularIntensity=t.specularIntensity),void 0!==t.specularColor&&void 0!==r.specularColor&&r.specularColor.setHex(t.specularColor),void 0!==t.shininess&&(r.shininess=t.shininess),void 0!==t.clearcoat&&(r.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(r.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.transmission&&(r.transmission=t.transmission),void 0!==t.thickness&&(r.thickness=t.thickness),void 0!==t.attenuationDistance&&(r.attenuationDistance=t.attenuationDistance),void 0!==t.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(t.attenuationColor),void 0!==t.fog&&(r.fog=t.fog),void 0!==t.flatShading&&(r.flatShading=t.flatShading),void 0!==t.blending&&(r.blending=t.blending),void 0!==t.combine&&(r.combine=t.combine),void 0!==t.side&&(r.side=t.side),void 0!==t.shadowSide&&(r.shadowSide=t.shadowSide),void 0!==t.opacity&&(r.opacity=t.opacity),void 0!==t.transparent&&(r.transparent=t.transparent),void 0!==t.alphaTest&&(r.alphaTest=t.alphaTest),void 0!==t.depthTest&&(r.depthTest=t.depthTest),void 0!==t.depthWrite&&(r.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(r.colorWrite=t.colorWrite),void 0!==t.stencilWrite&&(r.stencilWrite=t.stencilWrite),void 0!==t.stencilWriteMask&&(r.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(r.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(r.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(r.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(r.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(r.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(r.stencilZPass=t.stencilZPass),void 0!==t.wireframe&&(r.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(r.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(r.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(r.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(r.rotation=t.rotation),1!==t.linewidth&&(r.linewidth=t.linewidth),void 0!==t.dashSize&&(r.dashSize=t.dashSize),void 0!==t.gapSize&&(r.gapSize=t.gapSize),void 0!==t.scale&&(r.scale=t.scale),void 0!==t.polygonOffset&&(r.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(r.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(r.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.dithering&&(r.dithering=t.dithering),void 0!==t.alphaToCoverage&&(r.alphaToCoverage=t.alphaToCoverage),void 0!==t.premultipliedAlpha&&(r.premultipliedAlpha=t.premultipliedAlpha),void 0!==t.visible&&(r.visible=t.visible),void 0!==t.toneMapped&&(r.toneMapped=t.toneMapped),void 0!==t.userData&&(r.userData=t.userData),void 0!==t.vertexColors&&("number"==typeof t.vertexColors?r.vertexColors=t.vertexColors>0:r.vertexColors=t.vertexColors),void 0!==t.uniforms)for(const e in t.uniforms){const i=t.uniforms[e];switch(r.uniforms[e]={},i.type){case"t":r.uniforms[e].value=s(i.value);break;case"c":r.uniforms[e].value=(new Ae).setHex(i.value);break;case"v2":r.uniforms[e].value=(new le).fromArray(i.value);break;case"v3":r.uniforms[e].value=(new Ge).fromArray(i.value);break;case"v4":r.uniforms[e].value=(new Me).fromArray(i.value);break;case"m3":r.uniforms[e].value=(new ue).fromArray(i.value);break;case"m4":r.uniforms[e].value=(new Ts).fromArray(i.value);break;default:r.uniforms[e].value=i.value}}if(void 0!==t.defines&&(r.defines=t.defines),void 0!==t.vertexShader&&(r.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(r.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(const e in t.extensions)r.extensions[e]=t.extensions[e];if(void 0!==t.shading&&(r.flatShading=1===t.shading),void 0!==t.size&&(r.size=t.size),void 0!==t.sizeAttenuation&&(r.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(r.map=s(t.map)),void 0!==t.matcap&&(r.matcap=s(t.matcap)),void 0!==t.alphaMap&&(r.alphaMap=s(t.alphaMap)),void 0!==t.bumpMap&&(r.bumpMap=s(t.bumpMap)),void 0!==t.bumpScale&&(r.bumpScale=t.bumpScale),void 0!==t.normalMap&&(r.normalMap=s(t.normalMap)),void 0!==t.normalMapType&&(r.normalMapType=t.normalMapType),void 0!==t.normalScale){let e=t.normalScale;!1===Array.isArray(e)&&(e=[e,e]),r.normalScale=(new le).fromArray(e)}return void 0!==t.displacementMap&&(r.displacementMap=s(t.displacementMap)),void 0!==t.displacementScale&&(r.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(r.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(r.roughnessMap=s(t.roughnessMap)),void 0!==t.metalnessMap&&(r.metalnessMap=s(t.metalnessMap)),void 0!==t.emissiveMap&&(r.emissiveMap=s(t.emissiveMap)),void 0!==t.emissiveIntensity&&(r.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(r.specularMap=s(t.specularMap)),void 0!==t.specularIntensityMap&&(r.specularIntensityMap=s(t.specularIntensityMap)),void 0!==t.specularColorMap&&(r.specularColorMap=s(t.specularColorMap)),void 0!==t.envMap&&(r.envMap=s(t.envMap)),void 0!==t.envMapIntensity&&(r.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(r.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(r.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(r.lightMap=s(t.lightMap)),void 0!==t.lightMapIntensity&&(r.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(r.aoMap=s(t.aoMap)),void 0!==t.aoMapIntensity&&(r.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(r.gradientMap=s(t.gradientMap)),void 0!==t.clearcoatMap&&(r.clearcoatMap=s(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=s(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(r.clearcoatNormalMap=s(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(r.clearcoatNormalScale=(new le).fromArray(t.clearcoatNormalScale)),void 0!==t.transmissionMap&&(r.transmissionMap=s(t.transmissionMap)),void 0!==t.thicknessMap&&(r.thicknessMap=s(t.thicknessMap)),void 0!==t.sheenColorMap&&(r.sheenColorMap=s(t.sheenColorMap)),void 0!==t.sheenRoughnessMap&&(r.sheenRoughnessMap=s(t.sheenRoughnessMap)),r}setTextures(t){return this.textures=t,this}}class Rl{static decodeText(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);let e="";for(let s=0,r=t.length;s<r;s++)e+=String.fromCharCode(t[s]);try{return decodeURIComponent(escape(e))}catch(t){return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return-1===e?"./":t.slice(0,e+1)}static resolveURL(t,e){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class Cl extends Er{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const t=super.toJSON(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}Cl.prototype.isInstancedBufferGeometry=!0;class Ol extends Qc{constructor(t){super(t)}load(t,e,s,r){const i=this,n=new el(i.manager);n.setPath(i.path),n.setRequestHeader(i.requestHeader),n.setWithCredentials(i.withCredentials),n.load(t,(function(s){try{e(i.parse(JSON.parse(s)))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),s,r)}parse(t){const e={},s={};function r(t,r){if(void 0!==e[r])return e[r];const i=t.interleavedBuffers[r],n=function(t,e){if(void 0!==s[e])return s[e];const r=t.arrayBuffers[e],i=new Uint32Array(r).buffer;return s[e]=i,i}(t,i.buffer),o=me(i.type,n),a=new qo(o,i.stride);return a.uuid=i.uuid,e[r]=a,a}const i=t.isInstancedBufferGeometry?new Cl:new Er,n=t.data.index;if(void 0!==n){const t=me(n.type,n.array);i.setIndex(new or(t,1))}const o=t.data.attributes;for(const e in o){const s=o[e];let n;if(s.isInterleavedBufferAttribute){const e=r(t.data,s.data);n=new Jo(e,s.itemSize,s.offset,s.normalized)}else{const t=me(s.type,s.array);n=new(s.isInstancedBufferAttribute?Ra:or)(t,s.itemSize,s.normalized)}void 0!==s.name&&(n.name=s.name),void 0!==s.usage&&n.setUsage(s.usage),void 0!==s.updateRange&&(n.updateRange.offset=s.updateRange.offset,n.updateRange.count=s.updateRange.count),i.setAttribute(e,n)}const a=t.data.morphAttributes;if(a)for(const e in a){const s=a[e],n=[];for(let e=0,i=s.length;e<i;e++){const i=s[e];let o;if(i.isInterleavedBufferAttribute){const e=r(t.data,i.data);o=new Jo(e,i.itemSize,i.offset,i.normalized)}else{const t=me(i.type,i.array);o=new or(t,i.itemSize,i.normalized)}void 0!==i.name&&(o.name=i.name),n.push(o)}i.morphAttributes[e]=n}t.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);const h=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==h)for(let t=0,e=h.length;t!==e;++t){const e=h[t];i.addGroup(e.start,e.count,e.materialIndex)}const c=t.data.boundingSphere;if(void 0!==c){const t=new Ge;void 0!==c.center&&t.fromArray(c.center),i.boundingSphere=new cs(t,c.radius)}return t.name&&(i.name=t.name),t.userData&&(i.userData=t.userData),i}}const _l={UVMapping:N,CubeReflectionMapping:L,CubeRefractionMapping:k,EquirectangularReflectionMapping:U,EquirectangularRefractionMapping:H,CubeUVReflectionMapping:B},Dl={RepeatWrapping:G,ClampToEdgeWrapping:j,MirroredRepeatWrapping:z},Fl={NearestFilter:V,NearestMipmapNearestFilter:W,NearestMipmapLinearFilter:Y,LinearFilter:X,LinearMipmapNearestFilter:q,LinearMipmapLinearFilter:K};class Ml extends Qc{constructor(t){super(t),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,s,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=this,n=Jc.get(t);if(void 0!==n)return i.manager.itemStart(t),setTimeout((function(){e&&e(n),i.manager.itemEnd(t)}),0),n;const o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,fetch(t,o).then((function(t){return t.blob()})).then((function(t){return createImageBitmap(t,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(s){Jc.add(t,s),e&&e(s),i.manager.itemEnd(t)})).catch((function(e){r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)})),i.manager.itemStart(t)}}let Pl;Ml.prototype.isImageBitmapLoader=!0;const Nl={getContext:function(){return void 0===Pl&&(Pl=new(window.AudioContext||window.webkitAudioContext)),Pl},setContext:function(t){Pl=t}};class Ll extends Qc{constructor(t){super(t)}load(t,e,s,r){const i=this,n=new el(this.manager);n.setResponseType("arraybuffer"),n.setPath(this.path),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials),n.load(t,(function(s){try{const t=s.slice(0);Nl.getContext().decodeAudioData(t,(function(t){e(t)}))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),s,r)}}class kl extends Sl{constructor(t,e,s=1){super(void 0,s);const r=(new Ae).set(t),i=(new Ae).set(e),n=new Ge(r.r,r.g,r.b),o=new Ge(i.r,i.g,i.b),a=Math.sqrt(Math.PI),h=a*Math.sqrt(.75);this.sh.coefficients[0].copy(n).add(o).multiplyScalar(a),this.sh.coefficients[1].copy(n).sub(o).multiplyScalar(h)}}kl.prototype.isHemisphereLightProbe=!0;class Ul extends Sl{constructor(t,e=1){super(void 0,e);const s=(new Ae).set(t);this.sh.coefficients[0].set(s.r,s.g,s.b).multiplyScalar(2*Math.sqrt(Math.PI))}}Ul.prototype.isAmbientLightProbe=!0;const Hl=new Ts,Bl=new Ts,Gl=new Ts;class jl{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=zl(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=zl();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}function zl(){return("undefined"==typeof performance?Date:performance).now()}const Vl=new Ge,Wl=new Be,Yl=new Ge,Xl=new Ge;class ql extends zs{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(t){return t||(t=[]),!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}const Kl=new Ge,Jl=new Be,$l=new Ge,Zl=new Ge;class Ql{constructor(t,e=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const e=this.getFrequencyData();for(let s=0;s<e.length;s++)t+=e[s];return t/e.length}}class tu{constructor(t,e,s){let r,i,n;switch(this.binding=t,this.valueSize=s,e){case"quaternion":r=this._slerp,i=this._slerpAdditive,n=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*s),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,n=this._setAdditiveIdentityOther,this.buffer=new Array(5*s);break;default:r=this._lerp,i=this._lerpAdditive,n=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*s)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=n,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const s=this.buffer,r=this.valueSize,i=t*r+r;let n=this.cumulativeWeight;if(0===n){for(let t=0;t!==r;++t)s[i+t]=s[t];n=e}else{n+=e;const t=e/n;this._mixBufferRegion(s,i,0,t,r)}this.cumulativeWeight=n}accumulateAdditive(t){const e=this.buffer,s=this.valueSize,r=s*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,r,0,t,s),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,s=this.buffer,r=t*e+e,i=this.cumulativeWeight,n=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const t=e*this._origIndex;this._mixBufferRegion(s,r,t,1-i,e)}n>0&&this._mixBufferRegionAdditive(s,r,this._addIndex*e,1,e);for(let t=e,i=e+e;t!==i;++t)if(s[t]!==s[t+e]){o.setValue(s,r);break}}saveOriginalState(){const t=this.binding,e=this.buffer,s=this.valueSize,r=s*this._origIndex;t.getValue(e,r);for(let t=s,i=r;t!==i;++t)e[t]=e[r+t%s];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=3*this.valueSize;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let s=t;s<e;s++)this.buffer[s]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let s=0;s<this.valueSize;s++)this.buffer[e+s]=this.buffer[t+s]}_select(t,e,s,r,i){if(r>=.5)for(let r=0;r!==i;++r)t[e+r]=t[s+r]}_slerp(t,e,s,r){Be.slerpFlat(t,e,t,e,t,s,r)}_slerpAdditive(t,e,s,r,i){const n=this._workIndex*i;Be.multiplyQuaternionsFlat(t,n,t,e,t,s),Be.slerpFlat(t,e,t,e,t,n,r)}_lerp(t,e,s,r,i){const n=1-r;for(let o=0;o!==i;++o){const i=e+o;t[i]=t[i]*n+t[s+o]*r}}_lerpAdditive(t,e,s,r,i){for(let n=0;n!==i;++n){const i=e+n;t[i]=t[i]+t[s+n]*r}}}const eu="\\[\\]\\.:\\/",su=new RegExp("[\\[\\]\\.:\\/]","g"),ru="[^\\[\\]\\.:\\/]",iu="[^"+eu.replace("\\.","")+"]",nu=/((?:WC+[\/:])*)/.source.replace("WC",ru),ou=/(WCOD+)?/.source.replace("WCOD",iu),au=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",ru),hu=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",ru),cu=new RegExp("^"+nu+ou+au+hu+"$"),lu=["material","materials","bones"];class uu{constructor(t,e,s){this.path=e,this.parsedPath=s||uu.parseTrackName(e),this.node=uu.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,s){return t&&t.isAnimationObjectGroup?new uu.Composite(t,e,s):new uu(t,e,s)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(su,"")}static parseTrackName(t){const e=cu.exec(t);if(null===e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const s={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=s.nodeName&&s.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const t=s.nodeName.substring(r+1);-1!==lu.indexOf(t)&&(s.nodeName=s.nodeName.substring(0,r),s.objectName=t)}if(null===s.propertyName||0===s.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return s}static findNode(t,e){if(void 0===e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const s=t.skeleton.getBoneByName(e);if(void 0!==s)return s}if(t.children){const s=function(t){for(let r=0;r<t.length;r++){const i=t[r];if(i.name===e||i.uuid===e)return i;const n=s(i.children);if(n)return n}return null},r=s(t.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const s=this.resolvedProperty;for(let r=0,i=s.length;r!==i;++r)t[e++]=s[r]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const s=this.resolvedProperty;for(let r=0,i=s.length;r!==i;++r)s[r]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const s=this.resolvedProperty;for(let r=0,i=s.length;r!==i;++r)s[r]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const s=this.resolvedProperty;for(let r=0,i=s.length;r!==i;++r)s[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,s=e.objectName,r=e.propertyName;let i=e.propertyIndex;if(t||(t=uu.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(s){let r=e.objectIndex;switch(s){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===r){r=e;break}break;default:if(void 0===t[s])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[s]}if(void 0!==r){if(void 0===t[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[r]}}const n=t[r];if(void 0===n){const s=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+s+"."+r+" but it wasn't found.",t)}let o=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?o=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(o=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[i]&&(i=t.morphTargetDictionary[i])}a=this.BindingType.ArrayElement,this.resolvedProperty=n,this.propertyIndex=i}else void 0!==n.fromArray&&void 0!==n.toArray?(a=this.BindingType.HasFromToArray,this.resolvedProperty=n):Array.isArray(n)?(a=this.BindingType.EntireArray,this.resolvedProperty=n):this.propertyName=r;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}uu.Composite=class{constructor(t,e,s){const r=s||uu.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();const s=this._targetGroup.nCachedObjects_,r=this._bindings[s];void 0!==r&&r.getValue(t,e)}setValue(t,e){const s=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=s.length;r!==i;++r)s[r].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,s=t.length;e!==s;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,s=t.length;e!==s;++e)t[e].unbind()}},uu.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},uu.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},uu.prototype.GetterByBindingType=[uu.prototype._getValue_direct,uu.prototype._getValue_array,uu.prototype._getValue_arrayElement,uu.prototype._getValue_toArray],uu.prototype.SetterByBindingTypeAndVersioning=[[uu.prototype._setValue_direct,uu.prototype._setValue_direct_setNeedsUpdate,uu.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[uu.prototype._setValue_array,uu.prototype._setValue_array_setNeedsUpdate,uu.prototype._setValue_array_setMatrixWorldNeedsUpdate],[uu.prototype._setValue_arrayElement,uu.prototype._setValue_arrayElement_setNeedsUpdate,uu.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[uu.prototype._setValue_fromArray,uu.prototype._setValue_fromArray_setNeedsUpdate,uu.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class pu{constructor(){this.uuid=se(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let e=0,s=arguments.length;e!==s;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}add(){const t=this._objects,e=this._indicesByUUID,s=this._paths,r=this._parsedPaths,i=this._bindings,n=i.length;let o,a=t.length,h=this.nCachedObjects_;for(let c=0,l=arguments.length;c!==l;++c){const l=arguments[c],u=l.uuid;let p=e[u];if(void 0===p){p=a++,e[u]=p,t.push(l);for(let t=0,e=n;t!==e;++t)i[t].push(new uu(l,s[t],r[t]))}else if(p<h){o=t[p];const a=--h,c=t[a];e[c.uuid]=p,t[p]=c,e[u]=a,t[a]=l;for(let t=0,e=n;t!==e;++t){const e=i[t],n=e[a];let o=e[p];e[p]=n,void 0===o&&(o=new uu(l,s[t],r[t])),e[a]=o}}else t[p]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=h}remove(){const t=this._objects,e=this._indicesByUUID,s=this._bindings,r=s.length;let i=this.nCachedObjects_;for(let n=0,o=arguments.length;n!==o;++n){const o=arguments[n],a=o.uuid,h=e[a];if(void 0!==h&&h>=i){const n=i++,c=t[n];e[c.uuid]=h,t[h]=c,e[a]=n,t[n]=o;for(let t=0,e=r;t!==e;++t){const e=s[t],r=e[n],i=e[h];e[h]=r,e[n]=i}}}this.nCachedObjects_=i}uncache(){const t=this._objects,e=this._indicesByUUID,s=this._bindings,r=s.length;let i=this.nCachedObjects_,n=t.length;for(let o=0,a=arguments.length;o!==a;++o){const a=arguments[o].uuid,h=e[a];if(void 0!==h)if(delete e[a],h<i){const o=--i,a=t[o],c=--n,l=t[c];e[a.uuid]=h,t[h]=a,e[l.uuid]=o,t[o]=l,t.pop();for(let t=0,e=r;t!==e;++t){const e=s[t],r=e[o],i=e[c];e[h]=r,e[o]=i,e.pop()}}else{const i=--n,o=t[i];i>0&&(e[o.uuid]=h),t[h]=o,t.pop();for(let t=0,e=r;t!==e;++t){const e=s[t];e[h]=e[i],e.pop()}}}this.nCachedObjects_=i}subscribe_(t,e){const s=this._bindingsIndicesByPath;let r=s[t];const i=this._bindings;if(void 0!==r)return i[r];const n=this._paths,o=this._parsedPaths,a=this._objects,h=a.length,c=this.nCachedObjects_,l=new Array(h);r=i.length,s[t]=r,n.push(t),o.push(e),i.push(l);for(let s=c,r=a.length;s!==r;++s){const r=a[s];l[s]=new uu(r,t,e)}return l}unsubscribe_(t){const e=this._bindingsIndicesByPath,s=e[t];if(void 0!==s){const r=this._paths,i=this._parsedPaths,n=this._bindings,o=n.length-1,a=n[o];e[t[o]]=s,n[s]=a,n.pop(),i[s]=i[o],i.pop(),r[s]=r[o],r.pop()}}}pu.prototype.isAnimationObjectGroup=!0;class du{constructor(t,e,s=null,r=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=s,this.blendMode=r;const i=e.tracks,n=i.length,o=new Array(n),a={endingStart:kt,endingEnd:kt};for(let t=0;t!==n;++t){const e=i[t].createInterpolant(null);o[t]=e,e.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(n),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Mt,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,s){if(t.fadeOut(e),this.fadeIn(e),s){const s=this._clip.duration,r=t._clip.duration,i=r/s,n=s/r;t.warp(1,i,e),this.warp(n,1,e)}return this}crossFadeTo(t,e,s){return t.crossFadeFrom(this,e,s)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,s){const r=this._mixer,i=r.time,n=this.timeScale;let o=this._timeScaleInterpolant;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);const a=o.parameterPositions,h=o.sampleValues;return a[0]=i,a[1]=i+s,h[0]=t/n,h[1]=e/n,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,s,r){if(!this.enabled)return void this._updateWeight(t);const i=this._startTime;if(null!==i){const r=(t-i)*s;if(r<0||0===s)return;this._startTime=null,e=s*r}e*=this._updateTimeScale(t);const n=this._updateTime(e),o=this._updateWeight(t);if(o>0){const t=this._interpolants,e=this._propertyBindings;switch(this.blendMode){case Gt:for(let s=0,r=t.length;s!==r;++s)t[s].evaluate(n),e[s].accumulateAdditive(o);break;case Bt:default:for(let s=0,i=t.length;s!==i;++s)t[s].evaluate(n),e[s].accumulate(r,o)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const s=this._weightInterpolant;if(null!==s){const r=s.evaluate(t)[0];e*=r,t>s.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const s=this._timeScaleInterpolant;if(null!==s){e*=s.evaluate(t)[0],t>s.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,s=this.loop;let r=this.time+t,i=this._loopCount;const n=2202===s;if(0===t)return-1===i?r:n&&1==(1&i)?e-r:r;if(s===Ft){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(r>=e)r=e;else{if(!(r<0)){this.time=r;break t}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===i&&(t>=0?(i=0,this._setEndings(!0,0===this.repetitions,n)):this._setEndings(0===this.repetitions,!0,n)),r>=e||r<0){const s=Math.floor(r/e);r-=e*s,i+=Math.abs(s);const o=this.repetitions-i;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=t>0?e:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===o){const e=t<0;this._setEndings(e,!e,n)}else this._setEndings(!1,!1,n);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}else this.time=r;if(n&&1==(1&i))return e-r}return r}_setEndings(t,e,s){const r=this._interpolantSettings;s?(r.endingStart=Ut,r.endingEnd=Ut):(r.endingStart=t?this.zeroSlopeAtStart?Ut:kt:Ht,r.endingEnd=e?this.zeroSlopeAtEnd?Ut:kt:Ht)}_scheduleFading(t,e,s){const r=this._mixer,i=r.time;let n=this._weightInterpolant;null===n&&(n=r._lendControlInterpolant(),this._weightInterpolant=n);const o=n.parameterPositions,a=n.sampleValues;return o[0]=i,a[0]=e,o[1]=i+t,a[1]=s,this}}class mu extends $t{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const s=t._localRoot||this._root,r=t._clip.tracks,i=r.length,n=t._propertyBindings,o=t._interpolants,a=s.uuid,h=this._bindingsByRootAndName;let c=h[a];void 0===c&&(c={},h[a]=c);for(let t=0;t!==i;++t){const i=r[t],h=i.name;let l=c[h];if(void 0!==l)++l.referenceCount,n[t]=l;else{if(l=n[t],void 0!==l){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,a,h));continue}const r=e&&e._propertyBindings[t].binding.parsedPath;l=new tu(uu.create(s,h,r),i.ValueTypeName,i.getValueSize()),++l.referenceCount,this._addInactiveBinding(l,a,h),n[t]=l}o[t].resultBuffer=l.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){const e=(t._localRoot||this._root).uuid,s=t._clip.uuid,r=this._actionsByClip[s];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,s,e)}const e=t._propertyBindings;for(let t=0,s=e.length;t!==s;++t){const s=e[t];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let t=0,s=e.length;t!==s;++t){const s=e[t];0==--s.useCount&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return null!==e&&e<this._nActiveActions}_addInactiveAction(t,e,s){const r=this._actions,i=this._actionsByClip;let n=i[e];if(void 0===n)n={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,i[e]=n;else{const e=n.knownActions;t._byClipCacheIndex=e.length,e.push(t)}t._cacheIndex=r.length,r.push(t),n.actionByRoot[s]=t}_removeInactiveAction(t){const e=this._actions,s=e[e.length-1],r=t._cacheIndex;s._cacheIndex=r,e[r]=s,e.pop(),t._cacheIndex=null;const i=t._clip.uuid,n=this._actionsByClip,o=n[i],a=o.knownActions,h=a[a.length-1],c=t._byClipCacheIndex;h._byClipCacheIndex=c,a[c]=h,a.pop(),t._byClipCacheIndex=null;delete o.actionByRoot[(t._localRoot||this._root).uuid],0===a.length&&delete n[i],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let t=0,s=e.length;t!==s;++t){const s=e[t];0==--s.referenceCount&&this._removeInactiveBinding(s)}}_lendAction(t){const e=this._actions,s=t._cacheIndex,r=this._nActiveActions++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=s,e[s]=i}_takeBackAction(t){const e=this._actions,s=t._cacheIndex,r=--this._nActiveActions,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=s,e[s]=i}_addInactiveBinding(t,e,s){const r=this._bindingsByRootAndName,i=this._bindings;let n=r[e];void 0===n&&(n={},r[e]=n),n[s]=t,t._cacheIndex=i.length,i.push(t)}_removeInactiveBinding(t){const e=this._bindings,s=t.binding,r=s.rootNode.uuid,i=s.path,n=this._bindingsByRootAndName,o=n[r],a=e[e.length-1],h=t._cacheIndex;a._cacheIndex=h,e[h]=a,e.pop(),delete o[i],0===Object.keys(o).length&&delete n[r]}_lendBinding(t){const e=this._bindings,s=t._cacheIndex,r=this._nActiveBindings++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=s,e[s]=i}_takeBackBinding(t){const e=this._bindings,s=t._cacheIndex,r=--this._nActiveBindings,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=s,e[s]=i}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let s=t[e];return void 0===s&&(s=new Uc(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),s.__cacheIndex=e,t[e]=s),s}_takeBackControlInterpolant(t){const e=this._controlInterpolants,s=t.__cacheIndex,r=--this._nActiveControlInterpolants,i=e[r];t.__cacheIndex=r,e[r]=t,i.__cacheIndex=s,e[s]=i}clipAction(t,e,s){const r=e||this._root,i=r.uuid;let n="string"==typeof t?qc.findByName(r,t):t;const o=null!==n?n.uuid:t,a=this._actionsByClip[o];let h=null;if(void 0===s&&(s=null!==n?n.blendMode:Bt),void 0!==a){const t=a.actionByRoot[i];if(void 0!==t&&t.blendMode===s)return t;h=a.knownActions[0],null===n&&(n=h._clip)}if(null===n)return null;const c=new du(this,n,e,s);return this._bindAction(c,h),this._addInactiveAction(c,o,i),c}existingAction(t,e){const s=e||this._root,r=s.uuid,i="string"==typeof t?qc.findByName(s,t):t,n=i?i.uuid:t,o=this._actionsByClip[n];return void 0!==o&&o.actionByRoot[r]||null}stopAllAction(){const t=this._actions;for(let e=this._nActiveActions-1;e>=0;--e)t[e].stop();return this}update(t){t*=this.timeScale;const e=this._actions,s=this._nActiveActions,r=this.time+=t,i=Math.sign(t),n=this._accuIndex^=1;for(let o=0;o!==s;++o){e[o]._update(r,t,i,n)}const o=this._bindings,a=this._nActiveBindings;for(let t=0;t!==a;++t)o[t].apply(n);return this}setTime(t){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,s=t.uuid,r=this._actionsByClip,i=r[s];if(void 0!==i){const t=i.knownActions;for(let s=0,r=t.length;s!==r;++s){const r=t[s];this._deactivateAction(r);const i=r._cacheIndex,n=e[e.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,n._cacheIndex=i,e[i]=n,e.pop(),this._removeInactiveBindingsForAction(r)}delete r[s]}}uncacheRoot(t){const e=t.uuid,s=this._actionsByClip;for(const t in s){const r=s[t].actionByRoot[e];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}const r=this._bindingsByRootAndName[e];if(void 0!==r)for(const t in r){const e=r[t];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(t,e){const s=this.existingAction(t,e);null!==s&&(this._deactivateAction(s),this._removeInactiveAction(s))}}mu.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class fu{constructor(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}clone(){return new fu(void 0===this.value.clone?this.value:this.value.clone())}}class gu extends qo{constructor(t,e,s=1){super(t,e),this.meshPerAttribute=s}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}gu.prototype.isInstancedInterleavedBuffer=!0;class yu{constructor(t,e,s,r,i){this.buffer=t,this.type=e,this.itemSize=s,this.elementSize=r,this.count=i,this.version=0}set needsUpdate(t){!0===t&&this.version++}setBuffer(t){return this.buffer=t,this}setType(t,e){return this.type=t,this.elementSize=e,this}setItemSize(t){return this.itemSize=t,this}setCount(t){return this.count=t,this}}yu.prototype.isGLBufferAttribute=!0;class Tu{constructor(t,e,s=0,r=1/0){this.ray=new ys(t,e),this.near=s,this.far=r,this.camera=null,this.layers=new Os,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}intersectObject(t,e=!0,s=[]){return bu(t,this,s,e),s.sort(vu),s}intersectObjects(t,e=!0,s=[]){for(let r=0,i=t.length;r<i;r++)bu(t[r],this,s,e);return s.sort(vu),s}}function vu(t,e){return t.distance-e.distance}function bu(t,e,s,r){if(t.layers.test(e.layers)&&t.raycast(e,s),!0===r){const r=t.children;for(let t=0,i=r.length;t<i;t++)bu(r[t],e,s,!0)}}class wu{constructor(t=1,e=0,s=0){return this.radius=t,this.phi=e,this.theta=s,this}set(t,e,s){return this.radius=t,this.phi=e,this.theta=s,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){const t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,s){return this.radius=Math.sqrt(t*t+e*e+s*s),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,s),this.phi=Math.acos(re(e/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const xu=new le;class Iu{constructor(t=new le(1/0,1/0),e=new le(-1/0,-1/0)){this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,s=t.length;e<s;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const s=xu.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(s),this.max.copy(t).add(s),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return xu.copy(t).clamp(this.min,this.max).sub(t).length()}intersect(t){return this.min.max(t.min),this.max.min(t.max),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}Iu.prototype.isBox2=!0;const Eu=new Ge,Su=new Ge;class Au{constructor(t=new Ge,e=new Ge){this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){Eu.subVectors(t,this.start),Su.subVectors(this.end,this.start);const s=Su.dot(Su);let r=Su.dot(Eu)/s;return e&&(r=re(r,0,1)),r}closestPointToPoint(t,e,s){const r=this.closestPointToPointParameter(t,e);return this.delta(s).multiplyScalar(r).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const Ru=new Ge;const Cu=new Ge,Ou=new Ts,_u=new Ts;class Du extends ja{constructor(t){const e=Fu(t),s=new Er,r=[],i=[],n=new Ae(0,0,1),o=new Ae(0,1,0);for(let t=0;t<e.length;t++){const s=e[t];s.parent&&s.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(n.r,n.g,n.b),i.push(o.r,o.g,o.b))}s.setAttribute("position",new fr(r,3)),s.setAttribute("color",new fr(i,3));super(s,new Ma({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,s=this.geometry,r=s.getAttribute("position");_u.copy(this.root.matrixWorld).invert();for(let t=0,s=0;t<e.length;t++){const i=e[t];i.parent&&i.parent.isBone&&(Ou.multiplyMatrices(_u,i.matrixWorld),Cu.setFromMatrixPosition(Ou),r.setXYZ(s,Cu.x,Cu.y,Cu.z),Ou.multiplyMatrices(_u,i.parent.matrixWorld),Cu.setFromMatrixPosition(Ou),r.setXYZ(s+1,Cu.x,Cu.y,Cu.z),s+=2)}s.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}}function Fu(t){const e=[];!0===t.isBone&&e.push(t);for(let s=0;s<t.children.length;s++)e.push.apply(e,Fu(t.children[s]));return e}const Mu=new Ge,Pu=new Ae,Nu=new Ae;class Lu extends ja{constructor(t=10,e=10,s=4473924,r=8947848){s=new Ae(s),r=new Ae(r);const i=e/2,n=t/e,o=t/2,a=[],h=[];for(let t=0,c=0,l=-o;t<=e;t++,l+=n){a.push(-o,0,l,o,0,l),a.push(l,0,-o,l,0,o);const e=t===i?s:r;e.toArray(h,c),c+=3,e.toArray(h,c),c+=3,e.toArray(h,c),c+=3,e.toArray(h,c),c+=3}const c=new Er;c.setAttribute("position",new fr(a,3)),c.setAttribute("color",new fr(h,3));super(c,new Ma({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}const ku=new Ge,Uu=new Ge,Hu=new Ge;const Bu=new Ge,Gu=new Kr;function ju(t,e,s,r,i,n,o){Bu.set(i,n,o).unproject(r);const a=e[t];if(void 0!==a){const t=s.getAttribute("position");for(let e=0,s=a.length;e<s;e++)t.setXYZ(a[e],Bu.x,Bu.y,Bu.z)}}const zu=new Ve;class Vu extends ja{constructor(t,e=16776960){const s=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new Er;i.setIndex(new or(s,1)),i.setAttribute("position",new or(r,3)),super(i,new Ma({color:e,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&zu.setFromObject(this.object),zu.isEmpty())return;const e=zu.min,s=zu.max,r=this.geometry.attributes.position,i=r.array;i[0]=s.x,i[1]=s.y,i[2]=s.z,i[3]=e.x,i[4]=s.y,i[5]=s.z,i[6]=e.x,i[7]=e.y,i[8]=s.z,i[9]=s.x,i[10]=e.y,i[11]=s.z,i[12]=s.x,i[13]=s.y,i[14]=e.z,i[15]=e.x,i[16]=s.y,i[17]=e.z,i[18]=e.x,i[19]=e.y,i[20]=e.z,i[21]=s.x,i[22]=e.y,i[23]=e.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t){return ja.prototype.copy.call(this,t),this.object=t.object,this}}const Wu=new Ge;let Yu,Xu;class qu extends ja{constructor(t=1){const e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],s=new Er;s.setAttribute("position",new fr(e,3)),s.setAttribute("color",new fr([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(s,new Ma({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(t,e,s){const r=new Ae,i=this.geometry.attributes.color.array;return r.set(t),r.toArray(i,0),r.toArray(i,3),r.set(e),r.toArray(i,6),r.toArray(i,9),r.set(s),r.toArray(i,12),r.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Ku{constructor(){this.type="ShapePath",this.color=new Ae,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new xh,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,s,r){return this.currentPath.quadraticCurveTo(t,e,s,r),this}bezierCurveTo(t,e,s,r,i,n){return this.currentPath.bezierCurveTo(t,e,s,r,i,n),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t,e){function s(t){const e=[];for(let s=0,r=t.length;s<r;s++){const r=t[s],i=new Nh;i.curves=r.curves,e.push(i)}return e}function r(t,e){const s=e.length;let r=!1;for(let i=s-1,n=0;n<s;i=n++){let s=e[i],o=e[n],a=o.x-s.x,h=o.y-s.y;if(Math.abs(h)>Number.EPSILON){if(h<0&&(s=e[n],a=-a,o=e[i],h=-h),t.y<s.y||t.y>o.y)continue;if(t.y===s.y){if(t.x===s.x)return!0}else{const e=h*(t.x-s.x)-a*(t.y-s.y);if(0===e)return!0;if(e<0)continue;r=!r}}else{if(t.y!==s.y)continue;if(o.x<=t.x&&t.x<=s.x||s.x<=t.x&&t.x<=o.x)return!0}}return r}const i=ac.isClockWise,n=this.subPaths;if(0===n.length)return[];if(!0===e)return s(n);let o,a,h;const c=[];if(1===n.length)return a=n[0],h=new Nh,h.curves=a.curves,c.push(h),c;let l=!i(n[0].getPoints());l=t?!l:l;const u=[],p=[];let d,m,f=[],g=0;p[g]=void 0,f[g]=[];for(let e=0,s=n.length;e<s;e++)a=n[e],d=a.getPoints(),o=i(d),o=t?!o:o,o?(!l&&p[g]&&g++,p[g]={s:new Nh,p:d},p[g].s.curves=a.curves,l&&g++,f[g]=[]):f[g].push({h:a,p:d[0]});if(!p[0])return s(n);if(p.length>1){let t=!1,e=0;for(let t=0,e=p.length;t<e;t++)u[t]=[];for(let s=0,i=p.length;s<i;s++){const i=f[s];for(let n=0;n<i.length;n++){const o=i[n];let a=!0;for(let i=0;i<p.length;i++)r(o.p,p[i].p)&&(s!==i&&e++,a?(a=!1,u[i].push(o)):t=!0);a&&u[s].push(o)}}e>0&&!1===t&&(f=u)}for(let t=0,e=p.length;t<e;t++){h=p[t].s,c.push(h),m=f[t];for(let t=0,e=m.length;t<e;t++)h.holes.push(m[t].h)}return c}}class Ju{static toHalfFloat(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=re(t,-65504,65504),Zu[0]=t;const e=Qu[0],s=e>>23&511;return tp[s]+((8388607&e)>>ep[s])}static fromHalfFloat(t){const e=t>>10;return Qu[0]=sp[ip[e]+(1023&t)]+rp[e],Zu[0]}}const $u=new ArrayBuffer(4),Zu=new Float32Array($u),Qu=new Uint32Array($u),tp=new Uint32Array(512),ep=new Uint32Array(512);for(let t=0;t<256;++t){const e=t-127;e<-27?(tp[t]=0,tp[256|t]=32768,ep[t]=24,ep[256|t]=24):e<-14?(tp[t]=1024>>-e-14,tp[256|t]=1024>>-e-14|32768,ep[t]=-e-1,ep[256|t]=-e-1):e<=15?(tp[t]=e+15<<10,tp[256|t]=e+15<<10|32768,ep[t]=13,ep[256|t]=13):e<128?(tp[t]=31744,tp[256|t]=64512,ep[t]=24,ep[256|t]=24):(tp[t]=31744,tp[256|t]=64512,ep[t]=13,ep[256|t]=13)}const sp=new Uint32Array(2048),rp=new Uint32Array(64),ip=new Uint32Array(64);for(let t=1;t<1024;++t){let e=t<<13,s=0;for(;0==(8388608&e);)e<<=1,s-=8388608;e&=-8388609,s+=947912704,sp[t]=e|s}for(let t=1024;t<2048;++t)sp[t]=939524096+(t-1024<<13);for(let t=1;t<31;++t)rp[t]=t<<23;rp[31]=1199570944,rp[32]=2147483648;for(let t=33;t<63;++t)rp[t]=2147483648+(t-32<<23);rp[63]=3347054592;for(let t=1;t<64;++t)32!==t&&(ip[t]=1024);eh.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(eh.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},xh.prototype.fromPoints=function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)};Lu.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Du.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};Qc.prototype.extractUrlBase=function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Rl.extractUrlBase(t)},Qc.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};Iu.prototype.center=function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},Iu.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Iu.prototype.isIntersectionBox=function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},Iu.prototype.size=function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)},Ve.prototype.center=function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Ve.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Ve.prototype.isIntersectionBox=function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},Ve.prototype.isIntersectionSphere=function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},Ve.prototype.size=function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)},Cs.prototype.toVector3=function(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")},cs.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},ai.prototype.setFromMatrix=function(t){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(t)},Au.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},ue.prototype.flattenToArrayOffset=function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},ue.prototype.multiplyVector3=function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},ue.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},ue.prototype.applyToBufferAttribute=function(t){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},ue.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},ue.prototype.getInverse=function(t){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()},Ts.prototype.extractPosition=function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},Ts.prototype.flattenToArrayOffset=function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},Ts.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Ge).setFromMatrixColumn(this,3)},Ts.prototype.setRotationFromQuaternion=function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},Ts.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},Ts.prototype.multiplyVector3=function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},Ts.prototype.multiplyVector4=function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},Ts.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},Ts.prototype.rotateAxis=function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},Ts.prototype.crossVector=function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},Ts.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},Ts.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},Ts.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},Ts.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},Ts.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},Ts.prototype.applyToBufferAttribute=function(t){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},Ts.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},Ts.prototype.makeFrustum=function(t,e,s,r,i,n){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,r,s,i,n)},Ts.prototype.getInverse=function(t){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()},ii.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},Be.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Be.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},ys.prototype.isIntersectionBox=function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},ys.prototype.isIntersectionPlane=function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},ys.prototype.isIntersectionSphere=function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},tr.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},tr.prototype.barycoordFromPoint=function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},tr.prototype.midpoint=function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},tr.prototypenormal=function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},tr.prototype.plane=function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)},tr.barycoordFromPoint=function(t,e,s,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),tr.getBarycoord(t,e,s,r,i)},tr.normal=function(t,e,s,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),tr.getNormal(t,e,s,r)},Nh.prototype.extractAllPoints=function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},Nh.prototype.extrude=function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new lc(this,t)},Nh.prototype.makeGeometry=function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new fc(this,t)},le.prototype.fromAttribute=function(t,e,s){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,s)},le.prototype.distanceToManhattan=function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},le.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Ge.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},Ge.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},Ge.prototype.getPositionFromMatrix=function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},Ge.prototype.getScaleFromMatrix=function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},Ge.prototype.getColumnFromMatrix=function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},Ge.prototype.applyProjection=function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},Ge.prototype.fromAttribute=function(t,e,s){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,s)},Ge.prototype.distanceToManhattan=function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},Ge.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Me.prototype.fromAttribute=function(t,e,s){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,s)},Me.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},zs.prototype.getChildByName=function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},zs.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},zs.prototype.translate=function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},zs.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},zs.prototype.applyMatrix=function(t){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)},Object.defineProperties(zs.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),jr.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(jr.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),wa.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Jr.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(al.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(or.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===qt},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(qt)}}}),or.prototype.setDynamic=function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?qt:Xt),this},or.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},or.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Er.prototype.addIndex=function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},Er.prototype.addAttribute=function(t,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(t,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new or(arguments[1],arguments[2])))},Er.prototype.addDrawCall=function(t,e,s){void 0!==s&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},Er.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},Er.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},Er.prototype.removeAttribute=function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)},Er.prototype.applyMatrix=function(t){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)},Object.defineProperties(Er.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),qo.prototype.setDynamic=function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?qt:Xt),this},qo.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},lc.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},lc.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},lc.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},Xo.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},fu.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(sr.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Ae}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===t}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(qr.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),zo.prototype.clearTarget=function(t,e,s,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,s,r)},zo.prototype.animate=function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},zo.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},zo.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},zo.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},zo.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},zo.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},zo.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},zo.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},zo.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},zo.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},zo.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},zo.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},zo.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},zo.prototype.enableScissorTest=function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},zo.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},zo.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},zo.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},zo.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},zo.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},zo.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},zo.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},zo.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},zo.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},zo.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(zo.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(t){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===t?zt:jt}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}}),Object.defineProperties(Fo.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(Pe.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),ql.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return(new Ll).load(t,(function(t){e.setBuffer(t)})),this},Ql.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Zr.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)},Zr.prototype.clear=function(t,e,s,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(t,e,s,r)},Ce.crossOrigin=void 0,Ce.loadTexture=function(t,e,s,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const i=new ol;i.setCrossOrigin(this.crossOrigin);const n=i.load(t,s,void 0,r);return e&&(n.mapping=e),n},Ce.loadTextureCube=function(t,e,s,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const i=new il;i.setCrossOrigin(this.crossOrigin);const n=i.load(t,s,void 0,r);return e&&(n.mapping=e),n},Ce.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Ce.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};const np={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:O}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=O);var op=Object.freeze({__proto__:null,ACESFilmicToneMapping:4,AddEquation:F,AddOperation:2,AdditiveAnimationBlendMode:Gt,AdditiveBlending:2,AlphaFormat:1021,AlwaysDepth:1,AlwaysStencilFunc:519,AmbientLight:xl,AmbientLightProbe:Ul,AnimationClip:qc,AnimationLoader:class extends Qc{constructor(t){super(t)}load(t,e,s,r){const i=this,n=new el(this.manager);n.setPath(this.path),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials),n.load(t,(function(s){try{e(i.parse(JSON.parse(s)))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),s,r)}parse(t){const e=[];for(let s=0;s<t.length;s++){const r=qc.parse(t[s]);e.push(r)}return e}},AnimationMixer:mu,AnimationObjectGroup:pu,AnimationUtils:Nc,ArcCurve:rh,ArrayCamera:Lo,ArrowHelper:class extends zs{constructor(t=new Ge(0,0,1),e=new Ge(0,0,0),s=1,r=16776960,i=.2*s,n=.2*i){super(),this.type="ArrowHelper",void 0===Yu&&(Yu=new Er,Yu.setAttribute("position",new fr([0,0,0,0,1,0],3)),Xu=new Ah(0,.5,1,5,1),Xu.translate(0,-.5,0)),this.position.copy(e),this.line=new Ha(Yu,new Ma({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new jr(Xu,new rr({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(s,i,n)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{Wu.set(t.z,0,-t.x).normalize();const e=Math.acos(t.y);this.quaternion.setFromAxisAngle(Wu,e)}}setLength(t,e=.2*t,s=.2*e){this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(s,e,s),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}},Audio:ql,AudioAnalyser:Ql,AudioContext:Nl,AudioListener:class extends zs{constructor(){super(),this.type="AudioListener",this.context=Nl.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new jl}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const e=this.context.listener,s=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Vl,Wl,Yl),Xl.set(0,0,-1).applyQuaternion(Wl),e.positionX){const t=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(Vl.x,t),e.positionY.linearRampToValueAtTime(Vl.y,t),e.positionZ.linearRampToValueAtTime(Vl.z,t),e.forwardX.linearRampToValueAtTime(Xl.x,t),e.forwardY.linearRampToValueAtTime(Xl.y,t),e.forwardZ.linearRampToValueAtTime(Xl.z,t),e.upX.linearRampToValueAtTime(s.x,t),e.upY.linearRampToValueAtTime(s.y,t),e.upZ.linearRampToValueAtTime(s.z,t)}else e.setPosition(Vl.x,Vl.y,Vl.z),e.setOrientation(Xl.x,Xl.y,Xl.z,s.x,s.y,s.z)}},AudioLoader:Ll,AxesHelper:qu,AxisHelper:class extends qu{constructor(t){console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),super(t)}},BackSide:1,BasicDepthPacking:3200,BasicShadowMap:0,BinaryTextureLoader:class extends nl{constructor(t){console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),super(t)}},Bone:xa,BooleanKeyframeTrack:Gc,BoundingBoxHelper:class extends Vu{constructor(t,e){console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),super(t,e)}},Box2:Iu,Box3:Ve,Box3Helper:class extends ja{constructor(t,e=16776960){const s=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Er;r.setIndex(new or(s,1)),r.setAttribute("position",new fr([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new Ma({color:e,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}},BoxBufferGeometry:Vr,BoxGeometry:Vr,BoxHelper:Vu,BufferAttribute:or,BufferGeometry:Er,BufferGeometryLoader:Ol,ByteType:1010,Cache:Jc,Camera:Kr,CameraHelper:class extends ja{constructor(t){const e=new Er,s=new Ma({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],n={},o=new Ae(16755200),a=new Ae(16711680),h=new Ae(43775),c=new Ae(16777215),l=new Ae(3355443);function u(t,e,s){p(t,s),p(e,s)}function p(t,e){r.push(0,0,0),i.push(e.r,e.g,e.b),void 0===n[t]&&(n[t]=[]),n[t].push(r.length/3-1)}u("n1","n2",o),u("n2","n4",o),u("n4","n3",o),u("n3","n1",o),u("f1","f2",o),u("f2","f4",o),u("f4","f3",o),u("f3","f1",o),u("n1","f1",o),u("n2","f2",o),u("n3","f3",o),u("n4","f4",o),u("p","n1",a),u("p","n2",a),u("p","n3",a),u("p","n4",a),u("u1","u2",h),u("u2","u3",h),u("u3","u1",h),u("c","t",c),u("p","c",l),u("cn1","cn2",l),u("cn3","cn4",l),u("cf1","cf2",l),u("cf3","cf4",l),e.setAttribute("position",new fr(r,3)),e.setAttribute("color",new fr(i,3)),super(e,s),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=n,this.update()}update(){const t=this.geometry,e=this.pointMap;Gu.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),ju("c",e,t,Gu,0,0,-1),ju("t",e,t,Gu,0,0,1),ju("n1",e,t,Gu,-1,-1,-1),ju("n2",e,t,Gu,1,-1,-1),ju("n3",e,t,Gu,-1,1,-1),ju("n4",e,t,Gu,1,1,-1),ju("f1",e,t,Gu,-1,-1,1),ju("f2",e,t,Gu,1,-1,1),ju("f3",e,t,Gu,-1,1,1),ju("f4",e,t,Gu,1,1,1),ju("u1",e,t,Gu,.7,1.1,-1),ju("u2",e,t,Gu,-.7,1.1,-1),ju("u3",e,t,Gu,0,2,-1),ju("cf1",e,t,Gu,-1,0,1),ju("cf2",e,t,Gu,1,0,1),ju("cf3",e,t,Gu,0,-1,1),ju("cf4",e,t,Gu,0,1,1),ju("cn1",e,t,Gu,-1,0,-1),ju("cn2",e,t,Gu,1,0,-1),ju("cn3",e,t,Gu,0,-1,-1),ju("cn4",e,t,Gu,0,1,-1),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}},CanvasRenderer:function(){console.error("THREE.CanvasRenderer has been removed")},CanvasTexture:th,CapsuleBufferGeometry:Eh,CapsuleGeometry:Eh,CatmullRomCurve3:ch,CineonToneMapping:3,CircleBufferGeometry:Sh,CircleGeometry:Sh,ClampToEdgeWrapping:j,Clock:jl,Color:Ae,ColorKeyframeTrack:jc,ColorManagement:ve,CompressedTexture:Qa,CompressedTextureLoader:sl,ConeBufferGeometry:Rh,ConeGeometry:Rh,CubeCamera:Zr,CubeReflectionMapping:L,CubeRefractionMapping:k,CubeTexture:Qr,CubeTextureLoader:il,CubeUVReflectionMapping:B,CubicBezierCurve:dh,CubicBezierCurve3:mh,CubicInterpolant:kc,CullFaceBack:1,CullFaceFront:2,CullFaceFrontBack:3,CullFaceNone:0,Curve:eh,CurvePath:wh,CustomBlending:5,CustomToneMapping:5,CylinderBufferGeometry:Ah,CylinderGeometry:Ah,Cylindrical:class{constructor(t=1,e=0,s=0){return this.radius=t,this.theta=e,this.y=s,this}set(t,e,s){return this.radius=t,this.theta=e,this.y=s,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,s){return this.radius=Math.sqrt(t*t+s*s),this.theta=Math.atan2(t,s),this.y=e,this}clone(){return(new this.constructor).copy(this)}},Data3DTexture:ke,DataArrayTexture:Ne,DataTexture:Ia,DataTexture2DArray:class extends Ne{constructor(t,e,s,r){console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),super(t,e,s,r)}},DataTexture3D:class extends ke{constructor(t,e,s,r){console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),super(t,e,s,r)}},DataTextureLoader:nl,DataUtils:Ju,DecrementStencilOp:7683,DecrementWrapStencilOp:34056,DefaultLoadingManager:Zc,DepthFormat:rt,DepthStencilFormat:it,DepthTexture:Bo,DirectionalLight:wl,DirectionalLightHelper:class extends zs{constructor(t,e,s){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=s,void 0===e&&(e=1);let r=new Er;r.setAttribute("position",new fr([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));const i=new Ma({fog:!1,toneMapped:!1});this.lightPlane=new Ha(r,i),this.add(this.lightPlane),r=new Er,r.setAttribute("position",new fr([0,0,0,0,0,1],3)),this.targetLine=new Ha(r,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){ku.setFromMatrixPosition(this.light.matrixWorld),Uu.setFromMatrixPosition(this.light.target.matrixWorld),Hu.subVectors(Uu,ku),this.lightPlane.lookAt(Uu),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Uu),this.targetLine.scale.z=Hu.length()}},DiscreteInterpolant:Hc,DodecahedronBufferGeometry:Oh,DodecahedronGeometry:Oh,DoubleSide:2,DstAlphaFactor:206,DstColorFactor:208,DynamicBufferAttribute:class extends or{constructor(t,e){console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),super(t,e),this.setUsage(qt)}},DynamicCopyUsage:35050,DynamicDrawUsage:qt,DynamicReadUsage:35049,EdgesGeometry:Ph,EdgesHelper:class extends ja{constructor(t,e){console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),super(new Ph(t.geometry),new Ma({color:void 0!==e?e:16777215}))}},EllipseCurve:sh,EqualDepth:4,EqualStencilFunc:514,EquirectangularReflectionMapping:U,EquirectangularRefractionMapping:H,Euler:Cs,EventDispatcher:$t,ExtrudeBufferGeometry:lc,ExtrudeGeometry:lc,FaceColors:1,FileLoader:el,FlatShading:1,Float16BufferAttribute:mr,Float32Attribute:class extends fr{constructor(t,e){console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),super(t,e)}},Float32BufferAttribute:fr,Float64Attribute:class extends gr{constructor(t,e){console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),super(t,e)}},Float64BufferAttribute:gr,FloatType:Q,Fog:Yo,FogExp2:Wo,Font:function(){console.error("THREE.Font has been moved to /examples/jsm/loaders/FontLoader.js")},FontLoader:function(){console.error("THREE.FontLoader has been moved to /examples/jsm/loaders/FontLoader.js")},FramebufferTexture:Za,FrontSide:0,Frustum:ai,GLBufferAttribute:yu,GLSL1:"100",GLSL3:Kt,GreaterDepth:6,GreaterEqualDepth:5,GreaterEqualStencilFunc:518,GreaterStencilFunc:516,GridHelper:Lu,Group:ko,HalfFloatType:tt,HemisphereLight:hl,HemisphereLightHelper:class extends zs{constructor(t,e,s){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=s;const r=new dc(e);r.rotateY(.5*Math.PI),this.material=new rr({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const i=r.getAttribute("position"),n=new Float32Array(3*i.count);r.setAttribute("color",new or(n,3)),this.add(new jr(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const e=t.geometry.getAttribute("color");Pu.copy(this.light.color),Nu.copy(this.light.groundColor);for(let t=0,s=e.count;t<s;t++){const r=t<s/2?Pu:Nu;e.setXYZ(t,r.r,r.g,r.b)}e.needsUpdate=!0}t.lookAt(Mu.setFromMatrixPosition(this.light.matrixWorld).negate())}},HemisphereLightProbe:kl,IcosahedronBufferGeometry:pc,IcosahedronGeometry:pc,ImageBitmapLoader:Ml,ImageLoader:rl,ImageUtils:Ce,ImmediateRenderObject:function(){console.error("THREE.ImmediateRenderObject has been removed.")},IncrementStencilOp:7682,IncrementWrapStencilOp:34055,InstancedBufferAttribute:Ra,InstancedBufferGeometry:Cl,InstancedInterleavedBuffer:gu,InstancedMesh:Fa,Int16Attribute:class extends lr{constructor(t,e){console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),super(t,e)}},Int16BufferAttribute:lr,Int32Attribute:class extends pr{constructor(t,e){console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),super(t,e)}},Int32BufferAttribute:pr,Int8Attribute:class extends ar{constructor(t,e){console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),super(t,e)}},Int8BufferAttribute:ar,IntType:1013,InterleavedBuffer:qo,InterleavedBufferAttribute:Jo,Interpolant:Lc,InterpolateDiscrete:Pt,InterpolateLinear:Nt,InterpolateSmooth:Lt,InvertStencilOp:5386,JSONLoader:function(){console.error("THREE.JSONLoader has been removed.")},KeepStencilOp:Yt,KeyframeTrack:Bc,LOD:fa,LatheBufferGeometry:Ih,LatheGeometry:Ih,Layers:Os,LensFlare:function(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")},LessDepth:2,LessEqualDepth:3,LessEqualStencilFunc:515,LessStencilFunc:513,Light:al,LightProbe:Sl,Line:Ha,Line3:Au,LineBasicMaterial:Ma,LineCurve:fh,LineCurve3:gh,LineDashedMaterial:Mc,LineLoop:za,LinePieces:1,LineSegments:ja,LineStrip:0,LinearEncoding:jt,LinearFilter:X,LinearInterpolant:Uc,LinearMipMapLinearFilter:1008,LinearMipMapNearestFilter:1007,LinearMipmapLinearFilter:K,LinearMipmapNearestFilter:q,LinearSRGBColorSpace:Wt,LinearToneMapping:1,Loader:Qc,LoaderUtils:Rl,LoadingManager:$c,LoopOnce:Ft,LoopPingPong:2202,LoopRepeat:Mt,LuminanceAlphaFormat:1025,LuminanceFormat:1024,MOUSE:_,Material:sr,MaterialLoader:Al,Math:ce,MathUtils:ce,Matrix3:ue,Matrix4:Ts,MaxEquation:104,Mesh:jr,MeshBasicMaterial:rr,MeshDepthMaterial:_o,MeshDistanceMaterial:Do,MeshFaceMaterial:function(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t},MeshLambertMaterial:Dc,MeshMatcapMaterial:Fc,MeshNormalMaterial:_c,MeshPhongMaterial:Cc,MeshPhysicalMaterial:Rc,MeshStandardMaterial:Ac,MeshToonMaterial:Oc,MinEquation:103,MirroredRepeatWrapping:z,MixOperation:1,MultiMaterial:function(t=[]){return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t},MultiplyBlending:4,MultiplyOperation:0,NearestFilter:V,NearestMipMapLinearFilter:1005,NearestMipMapNearestFilter:1004,NearestMipmapLinearFilter:Y,NearestMipmapNearestFilter:W,NeverDepth:0,NeverStencilFunc:512,NoBlending:0,NoColorSpace:"",NoColors:0,NoToneMapping:0,NormalAnimationBlendMode:Bt,NormalBlending:1,NotEqualDepth:7,NotEqualStencilFunc:517,NumberKeyframeTrack:zc,Object3D:zs,ObjectLoader:class extends Qc{constructor(t){super(t)}load(t,e,s,r){const i=this,n=""===this.path?Rl.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||n;const o=new el(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,(function(s){let n=null;try{n=JSON.parse(s)}catch(e){return void 0!==r&&r(e),void console.error("THREE:ObjectLoader: Can't parse "+t+".",e.message)}const o=n.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()?i.parse(n,e):console.error("THREE.ObjectLoader: Can't load "+t)}),s,r)}async loadAsync(t,e){const s=""===this.path?Rl.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||s;const r=new el(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const i=await r.loadAsync(t,e),n=JSON.parse(i),o=n.metadata;if(void 0===o||void 0===o.type||"geometry"===o.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+t);return await this.parseAsync(n)}parse(t,e){const s=this.parseAnimations(t.animations),r=this.parseShapes(t.shapes),i=this.parseGeometries(t.geometries,r),n=this.parseImages(t.images,(function(){void 0!==e&&e(h)})),o=this.parseTextures(t.textures,n),a=this.parseMaterials(t.materials,o),h=this.parseObject(t.object,i,a,o,s),c=this.parseSkeletons(t.skeletons,h);if(this.bindSkeletons(h,c),void 0!==e){let t=!1;for(const e in n)if(n[e]instanceof HTMLImageElement){t=!0;break}!1===t&&e(h)}return h}async parseAsync(t){const e=this.parseAnimations(t.animations),s=this.parseShapes(t.shapes),r=this.parseGeometries(t.geometries,s),i=await this.parseImagesAsync(t.images),n=this.parseTextures(t.textures,i),o=this.parseMaterials(t.materials,n),a=this.parseObject(t.object,r,o,n,e),h=this.parseSkeletons(t.skeletons,a);return this.bindSkeletons(a,h),a}parseShapes(t){const e={};if(void 0!==t)for(let s=0,r=t.length;s<r;s++){const r=(new Nh).fromJSON(t[s]);e[r.uuid]=r}return e}parseSkeletons(t,e){const s={},r={};if(e.traverse((function(t){t.isBone&&(r[t.uuid]=t)})),void 0!==t)for(let e=0,i=t.length;e<i;e++){const i=(new Aa).fromJSON(t[e],r);s[i.uuid]=i}return s}parseGeometries(t,e){const s={};if(void 0!==t){const r=new Ol;for(let i=0,n=t.length;i<n;i++){let n;const o=t[i];switch(o.type){case"BufferGeometry":case"InstancedBufferGeometry":n=r.parse(o);break;case"Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:o.type in Ic?n=Ic[o.type].fromJSON(o,e):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${o.type}"`)}n.uuid=o.uuid,void 0!==o.name&&(n.name=o.name),!0===n.isBufferGeometry&&void 0!==o.userData&&(n.userData=o.userData),s[o.uuid]=n}}return s}parseMaterials(t,e){const s={},r={};if(void 0!==t){const i=new Al;i.setTextures(e);for(let e=0,n=t.length;e<n;e++){const n=t[e];if("MultiMaterial"===n.type){const t=[];for(let e=0;e<n.materials.length;e++){const r=n.materials[e];void 0===s[r.uuid]&&(s[r.uuid]=i.parse(r)),t.push(s[r.uuid])}r[n.uuid]=t}else void 0===s[n.uuid]&&(s[n.uuid]=i.parse(n)),r[n.uuid]=s[n.uuid]}}return r}parseAnimations(t){const e={};if(void 0!==t)for(let s=0;s<t.length;s++){const r=t[s],i=qc.parse(r);e[i.uuid]=i}return e}parseImages(t,e){const s=this,r={};let i;function n(t){if("string"==typeof t){const e=t;return function(t){return s.manager.itemStart(t),i.load(t,(function(){s.manager.itemEnd(t)}),void 0,(function(){s.manager.itemError(t),s.manager.itemEnd(t)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(e)?e:s.resourcePath+e)}return t.data?{data:me(t.type,t.data),width:t.width,height:t.height}:null}if(void 0!==t&&t.length>0){const s=new $c(e);i=new rl(s),i.setCrossOrigin(this.crossOrigin);for(let e=0,s=t.length;e<s;e++){const s=t[e],i=s.url;if(Array.isArray(i)){const t=[];for(let e=0,s=i.length;e<s;e++){const s=n(i[e]);null!==s&&(s instanceof HTMLImageElement?t.push(s):t.push(new Ia(s.data,s.width,s.height)))}r[s.uuid]=new Oe(t)}else{const t=n(s.url);r[s.uuid]=new Oe(t)}}}return r}async parseImagesAsync(t){const e=this,s={};let r;async function i(t){if("string"==typeof t){const s=t,i=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(s)?s:e.resourcePath+s;return await r.loadAsync(i)}return t.data?{data:me(t.type,t.data),width:t.width,height:t.height}:null}if(void 0!==t&&t.length>0){r=new rl(this.manager),r.setCrossOrigin(this.crossOrigin);for(let e=0,r=t.length;e<r;e++){const r=t[e],n=r.url;if(Array.isArray(n)){const t=[];for(let e=0,s=n.length;e<s;e++){const s=n[e],r=await i(s);null!==r&&(r instanceof HTMLImageElement?t.push(r):t.push(new Ia(r.data,r.width,r.height)))}s[r.uuid]=new Oe(t)}else{const t=await i(r.url);s[r.uuid]=new Oe(t)}}}return s}parseTextures(t,e){function s(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}const r={};if(void 0!==t)for(let i=0,n=t.length;i<n;i++){const n=t[i];void 0===n.image&&console.warn('THREE.ObjectLoader: No "image" specified for',n.uuid),void 0===e[n.image]&&console.warn("THREE.ObjectLoader: Undefined image",n.image);const o=e[n.image],a=o.data;let h;Array.isArray(a)?(h=new Qr,6===a.length&&(h.needsUpdate=!0)):(h=a&&a.data?new Ia:new Fe,a&&(h.needsUpdate=!0)),h.source=o,h.uuid=n.uuid,void 0!==n.name&&(h.name=n.name),void 0!==n.mapping&&(h.mapping=s(n.mapping,_l)),void 0!==n.offset&&h.offset.fromArray(n.offset),void 0!==n.repeat&&h.repeat.fromArray(n.repeat),void 0!==n.center&&h.center.fromArray(n.center),void 0!==n.rotation&&(h.rotation=n.rotation),void 0!==n.wrap&&(h.wrapS=s(n.wrap[0],Dl),h.wrapT=s(n.wrap[1],Dl)),void 0!==n.format&&(h.format=n.format),void 0!==n.type&&(h.type=n.type),void 0!==n.encoding&&(h.encoding=n.encoding),void 0!==n.minFilter&&(h.minFilter=s(n.minFilter,Fl)),void 0!==n.magFilter&&(h.magFilter=s(n.magFilter,Fl)),void 0!==n.anisotropy&&(h.anisotropy=n.anisotropy),void 0!==n.flipY&&(h.flipY=n.flipY),void 0!==n.premultiplyAlpha&&(h.premultiplyAlpha=n.premultiplyAlpha),void 0!==n.unpackAlignment&&(h.unpackAlignment=n.unpackAlignment),void 0!==n.userData&&(h.userData=n.userData),r[n.uuid]=h}return r}parseObject(t,e,s,r,i){let n,o,a;function h(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function c(t){if(void 0!==t){if(Array.isArray(t)){const e=[];for(let r=0,i=t.length;r<i;r++){const i=t[r];void 0===s[i]&&console.warn("THREE.ObjectLoader: Undefined material",i),e.push(s[i])}return e}return void 0===s[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),s[t]}}function l(t){return void 0===r[t]&&console.warn("THREE.ObjectLoader: Undefined texture",t),r[t]}switch(t.type){case"Scene":n=new Xo,void 0!==t.background&&(Number.isInteger(t.background)?n.background=new Ae(t.background):n.background=l(t.background)),void 0!==t.environment&&(n.environment=l(t.environment)),void 0!==t.fog&&("Fog"===t.fog.type?n.fog=new Yo(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(n.fog=new Wo(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":n=new Jr(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(n.focus=t.focus),void 0!==t.zoom&&(n.zoom=t.zoom),void 0!==t.filmGauge&&(n.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(n.filmOffset=t.filmOffset),void 0!==t.view&&(n.view=Object.assign({},t.view));break;case"OrthographicCamera":n=new bi(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(n.zoom=t.zoom),void 0!==t.view&&(n.view=Object.assign({},t.view));break;case"AmbientLight":n=new xl(t.color,t.intensity);break;case"DirectionalLight":n=new wl(t.color,t.intensity);break;case"PointLight":n=new vl(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":n=new Il(t.color,t.intensity,t.width,t.height);break;case"SpotLight":n=new ml(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":n=new hl(t.color,t.groundColor,t.intensity);break;case"LightProbe":n=(new Sl).fromJSON(t);break;case"SkinnedMesh":o=h(t.geometry),a=c(t.material),n=new wa(o,a),void 0!==t.bindMode&&(n.bindMode=t.bindMode),void 0!==t.bindMatrix&&n.bindMatrix.fromArray(t.bindMatrix),void 0!==t.skeleton&&(n.skeleton=t.skeleton);break;case"Mesh":o=h(t.geometry),a=c(t.material),n=new jr(o,a);break;case"InstancedMesh":o=h(t.geometry),a=c(t.material);const e=t.count,s=t.instanceMatrix,r=t.instanceColor;n=new Fa(o,a,e),n.instanceMatrix=new Ra(new Float32Array(s.array),16),void 0!==r&&(n.instanceColor=new Ra(new Float32Array(r.array),r.itemSize));break;case"LOD":n=new fa;break;case"Line":n=new Ha(h(t.geometry),c(t.material));break;case"LineLoop":n=new za(h(t.geometry),c(t.material));break;case"LineSegments":n=new ja(h(t.geometry),c(t.material));break;case"PointCloud":case"Points":n=new Ka(h(t.geometry),c(t.material));break;case"Sprite":n=new ua(c(t.material));break;case"Group":n=new ko;break;case"Bone":n=new xa;break;default:n=new zs}if(n.uuid=t.uuid,void 0!==t.name&&(n.name=t.name),void 0!==t.matrix?(n.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(n.matrixAutoUpdate=t.matrixAutoUpdate),n.matrixAutoUpdate&&n.matrix.decompose(n.position,n.quaternion,n.scale)):(void 0!==t.position&&n.position.fromArray(t.position),void 0!==t.rotation&&n.rotation.fromArray(t.rotation),void 0!==t.quaternion&&n.quaternion.fromArray(t.quaternion),void 0!==t.scale&&n.scale.fromArray(t.scale)),void 0!==t.castShadow&&(n.castShadow=t.castShadow),void 0!==t.receiveShadow&&(n.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(n.shadow.bias=t.shadow.bias),void 0!==t.shadow.normalBias&&(n.shadow.normalBias=t.shadow.normalBias),void 0!==t.shadow.radius&&(n.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&n.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(n.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(n.visible=t.visible),void 0!==t.frustumCulled&&(n.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(n.renderOrder=t.renderOrder),void 0!==t.userData&&(n.userData=t.userData),void 0!==t.layers&&(n.layers.mask=t.layers),void 0!==t.children){const o=t.children;for(let t=0;t<o.length;t++)n.add(this.parseObject(o[t],e,s,r,i))}if(void 0!==t.animations){const e=t.animations;for(let t=0;t<e.length;t++){const s=e[t];n.animations.push(i[s])}}if("LOD"===t.type){void 0!==t.autoUpdate&&(n.autoUpdate=t.autoUpdate);const e=t.levels;for(let t=0;t<e.length;t++){const s=e[t],r=n.getObjectByProperty("uuid",s.object);void 0!==r&&n.addLevel(r,s.distance)}}return n}bindSkeletons(t,e){0!==Object.keys(e).length&&t.traverse((function(t){if(!0===t.isSkinnedMesh&&void 0!==t.skeleton){const s=e[t.skeleton];void 0===s?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",t.skeleton):t.bind(s,t.bindMatrix)}}))}setTexturePath(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}},ObjectSpaceNormalMap:1,OctahedronBufferGeometry:dc,OctahedronGeometry:dc,OneFactor:201,OneMinusDstAlphaFactor:207,OneMinusDstColorFactor:209,OneMinusSrcAlphaFactor:P,OneMinusSrcColorFactor:203,OrthographicCamera:bi,PCFShadowMap:1,PCFSoftShadowMap:2,PMREMGenerator:Oi,ParametricGeometry:class extends Er{constructor(){console.error("THREE.ParametricGeometry has been moved to /examples/jsm/geometries/ParametricGeometry.js"),super()}},Particle:class extends ua{constructor(t){console.warn("THREE.Particle has been renamed to THREE.Sprite."),super(t)}},ParticleBasicMaterial:class extends Va{constructor(t){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),super(t)}},ParticleSystem:class extends Ka{constructor(t,e){console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),super(t,e)}},ParticleSystemMaterial:class extends Va{constructor(t){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),super(t)}},Path:xh,PerspectiveCamera:Jr,Plane:ii,PlaneBufferGeometry:li,PlaneGeometry:li,PlaneHelper:class extends Ha{constructor(t,e=1,s=16776960){const r=s,i=new Er;i.setAttribute("position",new fr([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),i.computeBoundingSphere(),super(i,new Ma({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=e;const n=new Er;n.setAttribute("position",new fr([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),n.computeBoundingSphere(),this.add(new jr(n,new rr({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){let e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=e<0?1:0,this.lookAt(this.plane.normal),super.updateMatrixWorld(t)}},PointCloud:class extends Ka{constructor(t,e){console.warn("THREE.PointCloud has been renamed to THREE.Points."),super(t,e)}},PointCloudMaterial:class extends Va{constructor(t){console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),super(t)}},PointLight:vl,PointLightHelper:class extends jr{constructor(t,e,s){super(new gc(e,4,2),new rr({wireframe:!0,fog:!1,toneMapped:!1})),this.light=t,this.light.updateMatrixWorld(),this.color=s,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},Points:Ka,PointsMaterial:Va,PolarGridHelper:class extends ja{constructor(t=10,e=16,s=8,r=64,i=4473924,n=8947848){i=new Ae(i),n=new Ae(n);const o=[],a=[];for(let s=0;s<=e;s++){const r=s/e*(2*Math.PI),h=Math.sin(r)*t,c=Math.cos(r)*t;o.push(0,0,0),o.push(h,0,c);const l=1&s?i:n;a.push(l.r,l.g,l.b),a.push(l.r,l.g,l.b)}for(let e=0;e<=s;e++){const h=1&e?i:n,c=t-t/s*e;for(let t=0;t<r;t++){let e=t/r*(2*Math.PI),s=Math.sin(e)*c,i=Math.cos(e)*c;o.push(s,0,i),a.push(h.r,h.g,h.b),e=(t+1)/r*(2*Math.PI),s=Math.sin(e)*c,i=Math.cos(e)*c,o.push(s,0,i),a.push(h.r,h.g,h.b)}}const h=new Er;h.setAttribute("position",new fr(o,3)),h.setAttribute("color",new fr(a,3));super(h,new Ma({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}},PolyhedronBufferGeometry:Ch,PolyhedronGeometry:Ch,PositionalAudio:class extends ql{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,e,s){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=s,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(Kl,Jl,$l),Zl.set(0,0,1).applyQuaternion(Jl);const e=this.panner;if(e.positionX){const t=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(Kl.x,t),e.positionY.linearRampToValueAtTime(Kl.y,t),e.positionZ.linearRampToValueAtTime(Kl.z,t),e.orientationX.linearRampToValueAtTime(Zl.x,t),e.orientationY.linearRampToValueAtTime(Zl.y,t),e.orientationZ.linearRampToValueAtTime(Zl.z,t)}else e.setPosition(Kl.x,Kl.y,Kl.z),e.setOrientation(Zl.x,Zl.y,Zl.z)}},PropertyBinding:uu,PropertyMixer:tu,QuadraticBezierCurve:yh,QuadraticBezierCurve3:Th,Quaternion:Be,QuaternionKeyframeTrack:Wc,QuaternionLinearInterpolant:Vc,REVISION:O,RGBADepthPacking:3201,RGBAFormat:st,RGBAIntegerFormat:1033,RGBA_ASTC_10x10_Format:Ct,RGBA_ASTC_10x5_Format:St,RGBA_ASTC_10x6_Format:At,RGBA_ASTC_10x8_Format:Rt,RGBA_ASTC_12x10_Format:Ot,RGBA_ASTC_12x12_Format:_t,RGBA_ASTC_4x4_Format:yt,RGBA_ASTC_5x4_Format:Tt,RGBA_ASTC_5x5_Format:vt,RGBA_ASTC_6x5_Format:bt,RGBA_ASTC_6x6_Format:wt,RGBA_ASTC_8x5_Format:xt,RGBA_ASTC_8x6_Format:It,RGBA_ASTC_8x8_Format:Et,RGBA_BPTC_Format:Dt,RGBA_ETC2_EAC_Format:gt,RGBA_PVRTC_2BPPV1_Format:dt,RGBA_PVRTC_4BPPV1_Format:pt,RGBA_S3TC_DXT1_Format:at,RGBA_S3TC_DXT3_Format:ht,RGBA_S3TC_DXT5_Format:ct,RGBFormat:1022,RGB_ETC1_Format:mt,RGB_ETC2_Format:ft,RGB_PVRTC_2BPPV1_Format:ut,RGB_PVRTC_4BPPV1_Format:lt,RGB_S3TC_DXT1_Format:ot,RGFormat:1030,RGIntegerFormat:1031,RawShaderMaterial:Sc,Ray:ys,Raycaster:Tu,RectAreaLight:Il,RedFormat:nt,RedIntegerFormat:1029,ReinhardToneMapping:2,RepeatWrapping:G,ReplaceStencilOp:7681,ReverseSubtractEquation:102,RingBufferGeometry:mc,RingGeometry:mc,SRGBColorSpace:Vt,Scene:Xo,SceneUtils:np,ShaderChunk:ui,ShaderLib:di,ShaderMaterial:qr,ShadowMaterial:Ec,Shape:Nh,ShapeBufferGeometry:fc,ShapeGeometry:fc,ShapePath:Ku,ShapeUtils:ac,ShortType:1011,Skeleton:Aa,SkeletonHelper:Du,SkinnedMesh:wa,SmoothShading:2,Source:Oe,Sphere:cs,SphereBufferGeometry:gc,SphereGeometry:gc,Spherical:wu,SphericalHarmonics3:El,SplineCurve:vh,SpotLight:ml,SpotLightHelper:class extends zs{constructor(t,e){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;const s=new Er,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let t=0,e=1,s=32;t<s;t++,e++){const i=t/s*Math.PI*2,n=e/s*Math.PI*2;r.push(Math.cos(i),Math.sin(i),1,Math.cos(n),Math.sin(n),1)}s.setAttribute("position",new fr(r,3));const i=new Ma({fog:!1,toneMapped:!1});this.cone=new ja(s,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),Ru.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Ru),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},Sprite:ua,SpriteMaterial:$o,SrcAlphaFactor:M,SrcAlphaSaturateFactor:210,SrcColorFactor:202,StaticCopyUsage:35046,StaticDrawUsage:Xt,StaticReadUsage:35045,StereoCamera:class{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Jr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Jr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(t){const e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep,Gl.copy(t.projectionMatrix);const s=e.eyeSep/2,r=s*e.near/e.focus,i=e.near*Math.tan(te*e.fov*.5)/e.zoom;let n,o;Bl.elements[12]=-s,Hl.elements[12]=s,n=-i*e.aspect+r,o=i*e.aspect+r,Gl.elements[0]=2*e.near/(o-n),Gl.elements[8]=(o+n)/(o-n),this.cameraL.projectionMatrix.copy(Gl),n=-i*e.aspect-r,o=i*e.aspect-r,Gl.elements[0]=2*e.near/(o-n),Gl.elements[8]=(o+n)/(o-n),this.cameraR.projectionMatrix.copy(Gl)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(Bl),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(Hl)}},StreamCopyUsage:35042,StreamDrawUsage:35040,StreamReadUsage:35041,StringKeyframeTrack:Yc,SubtractEquation:101,SubtractiveBlending:3,TOUCH:D,TangentSpaceNormalMap:0,TetrahedronBufferGeometry:yc,TetrahedronGeometry:yc,TextGeometry:class extends Er{constructor(){console.error("THREE.TextGeometry has been moved to /examples/jsm/geometries/TextGeometry.js"),super()}},Texture:Fe,TextureLoader:ol,TorusBufferGeometry:Tc,TorusGeometry:Tc,TorusKnotBufferGeometry:vc,TorusKnotGeometry:vc,Triangle:tr,TriangleFanDrawMode:2,TriangleStripDrawMode:1,TrianglesDrawMode:0,TubeBufferGeometry:bc,TubeGeometry:bc,UVMapping:N,Uint16Attribute:class extends ur{constructor(t,e){console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),super(t,e)}},Uint16BufferAttribute:ur,Uint32Attribute:class extends dr{constructor(t,e){console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),super(t,e)}},Uint32BufferAttribute:dr,Uint8Attribute:class extends hr{constructor(t,e){console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),super(t,e)}},Uint8BufferAttribute:hr,Uint8ClampedAttribute:class extends cr{constructor(t,e){console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),super(t,e)}},Uint8ClampedBufferAttribute:cr,Uniform:fu,UniformsLib:pi,UniformsUtils:Xr,UnsignedByteType:J,UnsignedInt248Type:et,UnsignedIntType:Z,UnsignedShort4444Type:1017,UnsignedShort5551Type:1018,UnsignedShortType:$,VSMShadowMap:3,Vector2:le,Vector3:Ge,Vector4:Me,VectorKeyframeTrack:Xc,Vertex:class extends Ge{constructor(t,e,s){console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),super(t,e,s)}},VertexColors:2,VideoTexture:$a,WebGL1Renderer:Vo,WebGL3DRenderTarget:Ue,WebGLArrayRenderTarget:Le,WebGLCubeRenderTarget:ti,WebGLMultipleRenderTargets:He,WebGLMultisampleRenderTarget:class extends Pe{constructor(t,e,s){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),super(t,e,s),this.samples=4}},WebGLRenderTarget:Pe,WebGLRenderTargetCube:class extends ti{constructor(t,e,s){console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),super(t,s)}},WebGLRenderer:zo,WebGLUtils:No,WireframeGeometry:wc,WireframeHelper:class extends ja{constructor(t,e){console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),super(new wc(t.geometry),new Ma({color:void 0!==e?e:16777215}))}},WrapAroundEnding:Ht,XHRLoader:class extends el{constructor(t){console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),super(t)}},ZeroCurvatureEnding:kt,ZeroFactor:200,ZeroSlopeEnding:Ut,ZeroStencilOp:0,_SRGBAFormat:Jt,sRGBEncoding:zt});const ap=new WeakMap;class hp extends Qc{constructor(t){super(t),this.libraryPath="",this.libraryPending=null,this.libraryBinary=null,this.libraryConfig={},this.url="",this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.workerConfig={},this.materials=[],this.warnings=[]}setLibraryPath(t){return this.libraryPath=t,this}setWorkerLimit(t){return this.workerLimit=t,this}load(t,e,s,r){const i=new el(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),this.url=t,i.load(t,(s=>{if(ap.has(s)){return ap.get(s).promise.then(e).catch(r)}this.decodeObjects(s,t).then((t=>{t.userData.warnings=this.warnings,e(t)})).catch((t=>r(t)))}),s,r)}debug(){console.log("Task load: ",this.workerPool.map((t=>t._taskLoad)))}decodeObjects(t,e){let s,r;const i=t.byteLength,n=this._getWorker(i).then((e=>(s=e,r=this.workerNextTaskID++,new Promise(((e,i)=>{s._callbacks[r]={resolve:e,reject:i},s.postMessage({type:"decode",id:r,buffer:t},[t])}))))).then((t=>this._createGeometry(t.data))).catch((t=>{throw t}));return n.catch((()=>!0)).then((()=>{s&&r&&this._releaseTask(s,r)})),ap.set(t,{url:e,promise:n}),n}parse(t,e,s){this.decodeObjects(t,"").then((t=>{t.userData.warnings=this.warnings,e(t)})).catch((t=>s(t)))}_compareMaterials(t){const e={};e.name=t.name,e.color={},e.color.r=t.color.r,e.color.g=t.color.g,e.color.b=t.color.b,e.type=t.type;for(let t=0;t<this.materials.length;t++){const s=this.materials[t],r={};if(r.name=s.name,r.color={},r.color.r=s.color.r,r.color.g=s.color.g,r.color.b=s.color.b,r.type=s.type,JSON.stringify(e)===JSON.stringify(r))return s}return this.materials.push(t),t}_createMaterial(t){if(void 0===t)return new Ac({color:new Ae(1,1,1),metalness:.8,name:"default",side:2});const e=t.diffuseColor,s=new Ae(e.r/255,e.g/255,e.b/255);0===e.r&&0===e.g&&0===e.b&&(s.r=1,s.g=1,s.b=1);const r=new Ac({color:s,name:t.name,side:2,transparent:t.transparency>0,opacity:1-t.transparency}),i=new ol;for(let e=0;e<t.textures.length;e++){const s=t.textures[e];if(null!==s.image){const t=i.load(s.image);switch(s.type){case"Diffuse":r.map=t;break;case"Bump":r.bumpMap=t;break;case"Transparency":r.alphaMap=t,r.transparent=!0;break;case"Emap":r.envMap=t}t.wrapS=0===s.wrapU?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,t.wrapT=0===s.wrapV?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,t.repeat.set(s.repeat[0],s.repeat[1])}}return r}_createGeometry(t){const e=new zs,s=[],r=[],i=[];e.userData.layers=t.layers,e.userData.groups=t.groups,e.userData.settings=t.settings,e.userData.objectType="File3dm",e.userData.materials=null,e.name=this.url;let n=t.objects;const o=t.materials;for(let a=0;a<n.length;a++){const h=n[a],c=h.attributes;switch(h.objectType){case"InstanceDefinition":r.push(h);break;case"InstanceReference":i.push(h);break;default:let n;if(c.materialIndex>=0){const t=o[c.materialIndex];let e=this._createMaterial(t);e=this._compareMaterials(e),n=this._createObject(h,e)}else{const t=this._createMaterial();n=this._createObject(h,t)}if(void 0===n)continue;const a=t.layers[c.layerIndex];n.visible=!a||t.layers[c.layerIndex].visible,c.isInstanceDefinitionObject?s.push(n):e.add(n)}}for(let t=0;t<r.length;t++){const o=r[t];n=[];for(let t=0;t<o.attributes.objectIds.length;t++){const e=o.attributes.objectIds[t];for(let t=0;t<s.length;t++){e===s[t].userData.attributes.id&&n.push(s[t])}}for(let t=0;t<i.length;t++){const s=i[t];if(s.geometry.parentIdefId===o.attributes.id){const t=new zs,r=s.geometry.xform.array,i=new Ts;i.set(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15]),t.applyMatrix4(i);for(let e=0;e<n.length;e++)t.add(n[e].clone(!0));e.add(t)}}}return e.userData.materials=this.materials,e}_createObject(t,e){const s=new Ol,r=t.attributes;let i,n,o,a;switch(t.objectType){case"Point":case"PointSet":i=s.parse(t.geometry),i.attributes.hasOwnProperty("color")?n=new Va({vertexColors:!0,sizeAttenuation:!1,size:2}):(o=r.drawColor,a=new Ae(o.r/255,o.g/255,o.b/255),n=new Va({color:a,sizeAttenuation:!1,size:2})),n=this._compareMaterials(n);const h=new Ka(i,n);return h.userData.attributes=r,h.userData.objectType=t.objectType,r.name&&(h.name=r.name),h;case"Mesh":case"Extrusion":case"SubD":case"Brep":if(null===t.geometry)return;i=s.parse(t.geometry),i.attributes.hasOwnProperty("color")&&(e.vertexColors=!0),null===e&&(e=this._createMaterial(),e=this._compareMaterials(e));const c=new jr(i,e);return c.castShadow=r.castsShadows,c.receiveShadow=r.receivesShadows,c.userData.attributes=r,c.userData.objectType=t.objectType,r.name&&(c.name=r.name),c;case"Curve":i=s.parse(t.geometry),o=r.drawColor,a=new Ae(o.r/255,o.g/255,o.b/255),n=new Ma({color:a}),n=this._compareMaterials(n);const l=new Ha(i,n);return l.userData.attributes=r,l.userData.objectType=t.objectType,r.name&&(l.name=r.name),l;case"TextDot":i=t.geometry;const u=document.createElement("canvas").getContext("2d"),p=`${i.fontHeight}px ${i.fontFace}`;u.font=p;const d=u.measureText(i.text).width+10,m=i.fontHeight+10,f=window.devicePixelRatio;u.canvas.width=d*f,u.canvas.height=m*f,u.canvas.style.width=d+"px",u.canvas.style.height=m+"px",u.setTransform(f,0,0,f,0,0),u.font=p,u.textBaseline="middle",u.textAlign="center",a=r.drawColor,u.fillStyle=`rgba(${a.r},${a.g},${a.b},${a.a})`,u.fillRect(0,0,d,m),u.fillStyle="white",u.fillText(i.text,d/2,m/2);const g=new th(u.canvas);g.minFilter=X,g.wrapS=j,g.wrapT=j,n=new $o({map:g,depthTest:!1});const y=new ua(n);return y.position.set(i.point[0],i.point[1],i.point[2]),y.scale.set(d/10,m/10,1),y.userData.attributes=r,y.userData.objectType=t.objectType,r.name&&(y.name=r.name),y;case"Light":let T;switch(i=t.geometry,i.lightStyle.name){case"LightStyle_WorldPoint":T=new vl,T.castShadow=r.castsShadows,T.position.set(i.location[0],i.location[1],i.location[2]),T.shadow.normalBias=.1;break;case"LightStyle_WorldSpot":T=new ml,T.castShadow=r.castsShadows,T.position.set(i.location[0],i.location[1],i.location[2]),T.target.position.set(i.direction[0],i.direction[1],i.direction[2]),T.angle=i.spotAngleRadians,T.shadow.normalBias=.1;break;case"LightStyle_WorldRectangular":T=new Il;const t=Math.abs(i.width[2]),e=Math.abs(i.length[0]);T.position.set(i.location[0]-e/2,i.location[1],i.location[2]-t/2),T.height=e,T.width=t,T.lookAt(new Ge(i.direction[0],i.direction[1],i.direction[2]));break;case"LightStyle_WorldDirectional":T=new wl,T.castShadow=r.castsShadows,T.position.set(i.location[0],i.location[1],i.location[2]),T.target.position.set(i.direction[0],i.direction[1],i.direction[2]),T.shadow.normalBias=.1}return T&&(T.intensity=i.intensity,o=i.diffuse,a=new Ae(o.r/255,o.g/255,o.b/255),T.color=a,T.userData.attributes=r,T.userData.objectType=t.objectType),T}}_initLibrary(){if(!this.libraryPending){const t=new el(this.manager);t.setPath(this.libraryPath);const e=new Promise(((e,s)=>{t.load("rhino3dm.js",e,void 0,s)})),s=new el(this.manager);s.setPath(this.libraryPath),s.setResponseType("arraybuffer");const r=new Promise(((t,e)=>{s.load("rhino3dm.wasm",t,void 0,e)}));this.libraryPending=Promise.all([e,r]).then((([t,e])=>{this.libraryConfig.wasmBinary=e;const s=cp.toString(),r=["/* rhino3dm.js */",t,"/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([r]))}))}return this.libraryPending}_getWorker(t){return this._initLibrary().then((()=>{if(this.workerPool.length<this.workerLimit){const t=new Worker(this.workerSourceURL);t._callbacks={},t._taskCosts={},t._taskLoad=0,t.postMessage({type:"init",libraryConfig:this.libraryConfig}),t.onmessage=e=>{const s=e.data;switch(s.type){case"warning":this.warnings.push(s.data),console.warn(s.data);break;case"decode":t._callbacks[s.id].resolve(s);break;case"error":t._callbacks[s.id].reject(s);break;default:console.error('THREE.Rhino3dmLoader: Unexpected message, "'+s.type+'"')}},this.workerPool.push(t)}else this.workerPool.sort((function(t,e){return t._taskLoad>e._taskLoad?-1:1}));const e=this.workerPool[this.workerPool.length-1];return e._taskLoad+=t,e}))}_releaseTask(t,e){t._taskLoad-=t._taskCosts[e],delete t._callbacks[e],delete t._taskCosts[e]}dispose(){for(let t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this}}function cp(){let t,e,s,r;function i(t,e){const i=t.geometry(),a=t.attributes();let h,c,l,u,p,d=i.objectType;switch(d){case s.ObjectType.Curve:const t=o(i,100);l={},c={},u={},l.itemSize=3,l.type="Float32Array",l.array=[];for(let e=0;e<t.length;e++)l.array.push(t[e][0]),l.array.push(t[e][1]),l.array.push(t[e][2]);c.position=l,u.attributes=c,h={data:u};break;case s.ObjectType.Point:const m=i.location;l={};const f={};c={},u={},l.itemSize=3,l.type="Float32Array",l.array=[m[0],m[1],m[2]];const g=a.drawColor(e);f.itemSize=3,f.type="Float32Array",f.array=[g.r/255,g.g/255,g.b/255],c.position=l,c.color=f,u.attributes=c,h={data:u};break;case s.ObjectType.PointSet:case s.ObjectType.Mesh:h=i.toThreejsJSON();break;case s.ObjectType.Brep:const y=i.faces();p=new s.Mesh;for(let t=0;t<y.count;t++){const e=y.get(t),r=e.getMesh(s.MeshType.Any);r&&(p.append(r),r.delete()),e.delete()}p.faces().count>0&&(p.compact(),h=p.toThreejsJSON(),y.delete()),p.delete();break;case s.ObjectType.Extrusion:p=i.getMesh(s.MeshType.Any),p&&(h=p.toThreejsJSON(),p.delete());break;case s.ObjectType.TextDot:h=n(i);break;case s.ObjectType.Light:h=n(i),"LightStyle_WorldLinear"===h.lightStyle.name&&self.postMessage({type:"warning",id:r,data:{message:`THREE.3DMLoader: No conversion exists for ${d.constructor.name} ${h.lightStyle.name}`,type:"no conversion",guid:a.id}});break;case s.ObjectType.InstanceReference:h=n(i),h.xform=n(i.xform),h.xform.array=i.xform.toFloatArray(!0);break;case s.ObjectType.SubD:i.subdivide(3),p=s.Mesh.createFromSubDControlNet(i),p&&(h=p.toThreejsJSON(),p.delete());break;default:self.postMessage({type:"warning",id:r,data:{message:`THREE.3DMLoader: Conversion not implemented for ${d.constructor.name}`,type:"not implemented",guid:a.id}})}if(h)return c=n(a),c.geometry=n(i),a.groupCount>0&&(c.groupIds=a.getGroupList()),a.userStringCount>0&&(c.userStrings=a.getUserStrings()),i.userStringCount>0&&(c.geometry.userStrings=i.getUserStrings()),c.drawColor=a.drawColor(e),d=d.constructor.name,d=d.substring(11,d.length),{geometry:h,attributes:c,objectType:d};self.postMessage({type:"warning",id:r,data:{message:`THREE.3DMLoader: ${d.constructor.name} has no associated mesh geometry.`,type:"missing mesh",guid:a.id}})}function n(t){const e={};for(const s in t){const r=t[s];"function"!=typeof r&&("object"==typeof r&&null!==r&&r.hasOwnProperty("constructor")?e[s]={name:r.constructor.name,value:r.value}:e[s]=r)}return e}function o(t,e){let r=e,i=[];const n=[];if(t instanceof s.LineCurve)return[t.pointAtStart,t.pointAtEnd];if(t instanceof s.PolylineCurve){r=t.pointCount;for(let e=0;e<r;e++)i.push(t.point(e));return i}if(t instanceof s.PolyCurve){const e=t.segmentCount;for(let s=0;s<e;s++){const e=t.segmentCurve(s),n=o(e,r);i=i.concat(n),e.delete()}return i}if(t instanceof s.ArcCurve&&(r=Math.floor(t.angleDegrees/5),r=r<2?2:r),t instanceof s.NurbsCurve&&1===t.degree){const e=t.tryGetPolyline();for(let t=0;t<e.count;t++)i.push(e.get(t));return e.delete(),i}const a=t.domain,h=r-1;for(let e=0;e<r;e++){const s=a[0]+e/h*(a[1]-a[0]);if(s===a[0]||s===a[1]){n.push(s);continue}const r=t.tangentAt(s),i=t.tangentAt(n.slice(-1)[0]),o=r[0]*r[0]+r[1]*r[1]+r[2]*r[2],c=i[0]*i[0]+i[1]*i[1]+i[2]*i[2],l=Math.sqrt(o*c);let u;if(0===l)u=Math.PI/2;else{const t=(r.x*i.x+r.y*i.y+r.z*i.z)/l;u=Math.acos(Math.max(-1,Math.min(1,t)))}u<.1||n.push(s)}return i=n.map((e=>t.pointAt(e))),i}onmessage=function(o){const a=o.data;switch(a.type){case"init":e=a.libraryConfig;const o=e.wasmBinary;let h;t=new Promise((function(t){h={wasmBinary:o,onRuntimeInitialized:t},rhino3dm(h)})).then((()=>{s=h}));break;case"decode":r=a.id;const c=a.buffer;t.then((()=>{try{const t=function(t,e){const s=new Uint8Array(e),o=t.File3dm.fromByteArray(s),a=[],h=[],c=[],l=[],u=[],p=[],d=[],m=o.objects(),f=m.count;for(let t=0;t<f;t++){const e=m.get(t),s=i(e,o);e.delete(),s&&a.push(s)}for(let t=0;t<o.instanceDefinitions().count();t++){const e=o.instanceDefinitions().get(t),s=n(e);s.objectIds=e.getObjectIds(),a.push({geometry:null,attributes:s,objectType:"InstanceDefinition"})}const g=[t.TextureType.Diffuse,t.TextureType.Bump,t.TextureType.Transparency,t.TextureType.Opacity,t.TextureType.Emap],y=[t.TextureType.PBR_BaseColor,t.TextureType.PBR_Subsurface,t.TextureType.PBR_SubsurfaceScattering,t.TextureType.PBR_SubsurfaceScatteringRadius,t.TextureType.PBR_Metallic,t.TextureType.PBR_Specular,t.TextureType.PBR_SpecularTint,t.TextureType.PBR_Roughness,t.TextureType.PBR_Anisotropic,t.TextureType.PBR_Anisotropic_Rotation,t.TextureType.PBR_Sheen,t.TextureType.PBR_SheenTint,t.TextureType.PBR_Clearcoat,t.TextureType.PBR_ClearcoatBump,t.TextureType.PBR_ClearcoatRoughness,t.TextureType.PBR_OpacityIor,t.TextureType.PBR_OpacityRoughness,t.TextureType.PBR_Emission,t.TextureType.PBR_AmbientOcclusion,t.TextureType.PBR_Displacement];for(let t=0;t<o.materials().count();t++){const e=o.materials().get(t),s=e.physicallyBased();let i=n(e);const a=[];for(let t=0;t<g.length;t++){const s=e.getTexture(g[t]);if(s){let e=g[t].constructor.name;e=e.substring(12,e.length);const i={type:e},n=o.getEmbeddedFileAsBase64(s.fileName);i.wrapU=s.wrapU,i.wrapV=s.wrapV,i.wrapW=s.wrapW;const h=s.uvwTransform.toFloatArray(!0);i.repeat=[h[0],h[5]],n?i.image="data:image/png;base64,"+n:(self.postMessage({type:"warning",id:r,data:{message:`THREE.3DMLoader: Image for ${e} texture not embedded in file.`,type:"missing resource"}}),i.image=null),a.push(i),s.delete()}}if(i.textures=a,s.supported){for(let t=0;t<y.length;t++){const s=e.getTexture(y[t]);if(s){const e=o.getEmbeddedFileAsBase64(s.fileName);let r=y[t].constructor.name;r=r.substring(12,r.length);const i={type:r,image:"data:image/png;base64,"+e};a.push(i),s.delete()}}const t=n(e.physicallyBased());i=Object.assign(t,i)}h.push(i),e.delete(),s.delete()}for(let t=0;t<o.layers().count();t++){const e=o.layers().get(t),s=n(e);c.push(s),e.delete()}for(let t=0;t<o.views().count();t++){const e=o.views().get(t),s=n(e);l.push(s),e.delete()}for(let t=0;t<o.namedViews().count();t++){const e=o.namedViews().get(t),s=n(e);u.push(s),e.delete()}for(let t=0;t<o.groups().count();t++){const e=o.groups().get(t),s=n(e);p.push(s),e.delete()}const T=n(o.settings()),v=o.strings().count();for(let t=0;t<v;t++)d.push(o.strings().get(t));return o.delete(),{objects:a,materials:h,layers:c,views:l,namedViews:u,groups:p,strings:d,settings:T}}(s,c);self.postMessage({type:"decode",id:a.id,data:t})}catch(t){self.postMessage({type:"error",id:a.id,error:t})}}))}}}
/*!
    fflate - fast JavaScript compression/decompression
    <https://101arrowz.github.io/fflate>
    Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
    version 0.6.9
    */var lp={},up=function(t){return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},pp=function(t){return new Worker(t)};try{URL.revokeObjectURL(up(""))}catch(t){up=function(t){return"data:application/javascript;charset=UTF-8,"+encodeURI(t)},pp=function(t){return new Worker(t,{type:"module"})}}var dp=Uint8Array,mp=Uint16Array,fp=Uint32Array,gp=new dp([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),yp=new dp([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Tp=new dp([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),vp=function(t,e){for(var s=new mp(31),r=0;r<31;++r)s[r]=e+=1<<t[r-1];var i=new fp(s[30]);for(r=1;r<30;++r)for(var n=s[r];n<s[r+1];++n)i[n]=n-s[r]<<5|r;return[s,i]},bp=vp(gp,2),wp=bp[0],xp=bp[1];wp[28]=258,xp[258]=28;for(var Ip=vp(yp,0),Ep=Ip[0],Sp=Ip[1],Ap=new mp(32768),Rp=0;Rp<32768;++Rp){var Cp=(43690&Rp)>>>1|(21845&Rp)<<1;Cp=(61680&(Cp=(52428&Cp)>>>2|(13107&Cp)<<2))>>>4|(3855&Cp)<<4,Ap[Rp]=((65280&Cp)>>>8|(255&Cp)<<8)>>>1}var Op=function(t,e,s){for(var r=t.length,i=0,n=new mp(e);i<r;++i)++n[t[i]-1];var o,a=new mp(e);for(i=0;i<e;++i)a[i]=a[i-1]+n[i-1]<<1;if(s){o=new mp(1<<e);var h=15-e;for(i=0;i<r;++i)if(t[i])for(var c=i<<4|t[i],l=e-t[i],u=a[t[i]-1]++<<l,p=u|(1<<l)-1;u<=p;++u)o[Ap[u]>>>h]=c}else for(o=new mp(r),i=0;i<r;++i)t[i]&&(o[i]=Ap[a[t[i]-1]++]>>>15-t[i]);return o},_p=new dp(288);for(Rp=0;Rp<144;++Rp)_p[Rp]=8;for(Rp=144;Rp<256;++Rp)_p[Rp]=9;for(Rp=256;Rp<280;++Rp)_p[Rp]=7;for(Rp=280;Rp<288;++Rp)_p[Rp]=8;var Dp=new dp(32);for(Rp=0;Rp<32;++Rp)Dp[Rp]=5;var Fp=Op(_p,9,0),Mp=Op(_p,9,1),Pp=Op(Dp,5,0),Np=Op(Dp,5,1),Lp=function(t){for(var e=t[0],s=1;s<t.length;++s)t[s]>e&&(e=t[s]);return e},kp=function(t,e,s){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(7&e)&s},Up=function(t,e){var s=e/8|0;return(t[s]|t[s+1]<<8|t[s+2]<<16)>>(7&e)},Hp=function(t){return(t/8|0)+(7&t&&1)},Bp=function(t,e,s){(null==e||e<0)&&(e=0),(null==s||s>t.length)&&(s=t.length);var r=new(t instanceof mp?mp:t instanceof fp?fp:dp)(s-e);return r.set(t.subarray(e,s)),r},Gp=function(t,e,s){var r=t.length;if(!r||s&&!s.l&&r<5)return e||new dp(0);var i=!e||s,n=!s||s.i;s||(s={}),e||(e=new dp(3*r));var o=function(t){var s=e.length;if(t>s){var r=new dp(Math.max(2*s,t));r.set(e),e=r}},a=s.f||0,h=s.p||0,c=s.b||0,l=s.l,u=s.d,p=s.m,d=s.n,m=8*r;do{if(!l){s.f=a=kp(t,h,1);var f=kp(t,h+1,3);if(h+=3,!f){var g=t[(R=Hp(h)+4)-4]|t[R-3]<<8,y=R+g;if(y>r){if(n)throw"unexpected EOF";break}i&&o(c+g),e.set(t.subarray(R,y),c),s.b=c+=g,s.p=h=8*y;continue}if(1==f)l=Mp,u=Np,p=9,d=5;else{if(2!=f)throw"invalid block type";var T=kp(t,h,31)+257,v=kp(t,h+10,15)+4,b=T+kp(t,h+5,31)+1;h+=14;for(var w=new dp(b),x=new dp(19),I=0;I<v;++I)x[Tp[I]]=kp(t,h+3*I,7);h+=3*v;var E=Lp(x),S=(1<<E)-1,A=Op(x,E,1);for(I=0;I<b;){var R,C=A[kp(t,h,S)];if(h+=15&C,(R=C>>>4)<16)w[I++]=R;else{var O=0,_=0;for(16==R?(_=3+kp(t,h,3),h+=2,O=w[I-1]):17==R?(_=3+kp(t,h,7),h+=3):18==R&&(_=11+kp(t,h,127),h+=7);_--;)w[I++]=O}}var D=w.subarray(0,T),F=w.subarray(T);p=Lp(D),d=Lp(F),l=Op(D,p,1),u=Op(F,d,1)}if(h>m){if(n)throw"unexpected EOF";break}}i&&o(c+131072);for(var M=(1<<p)-1,P=(1<<d)-1,N=h;;N=h){var L=(O=l[Up(t,h)&M])>>>4;if((h+=15&O)>m){if(n)throw"unexpected EOF";break}if(!O)throw"invalid length/literal";if(L<256)e[c++]=L;else{if(256==L){N=h,l=null;break}var k=L-254;if(L>264){var U=gp[I=L-257];k=kp(t,h,(1<<U)-1)+wp[I],h+=U}var H=u[Up(t,h)&P],B=H>>>4;if(!H)throw"invalid distance";h+=15&H;F=Ep[B];if(B>3){U=yp[B];F+=Up(t,h)&(1<<U)-1,h+=U}if(h>m){if(n)throw"unexpected EOF";break}i&&o(c+131072);for(var G=c+k;c<G;c+=4)e[c]=e[c-F],e[c+1]=e[c+1-F],e[c+2]=e[c+2-F],e[c+3]=e[c+3-F];c=G}}s.l=l,s.p=N,s.b=c,l&&(a=1,s.m=p,s.d=u,s.n=d)}while(!a);return c==e.length?e:Bp(e,0,c)},jp=function(t,e,s){s<<=7&e;var r=e/8|0;t[r]|=s,t[r+1]|=s>>>8},zp=function(t,e,s){s<<=7&e;var r=e/8|0;t[r]|=s,t[r+1]|=s>>>8,t[r+2]|=s>>>16},Vp=function(t,e){for(var s=[],r=0;r<t.length;++r)t[r]&&s.push({s:r,f:t[r]});var i=s.length,n=s.slice();if(!i)return[$p,0];if(1==i){var o=new dp(s[0].s+1);return o[s[0].s]=1,[o,1]}s.sort((function(t,e){return t.f-e.f})),s.push({s:-1,f:25001});var a=s[0],h=s[1],c=0,l=1,u=2;for(s[0]={s:-1,f:a.f+h.f,l:a,r:h};l!=i-1;)a=s[s[c].f<s[u].f?c++:u++],h=s[c!=l&&s[c].f<s[u].f?c++:u++],s[l++]={s:-1,f:a.f+h.f,l:a,r:h};var p=n[0].s;for(r=1;r<i;++r)n[r].s>p&&(p=n[r].s);var d=new mp(p+1),m=Wp(s[l-1],d,0);if(m>e){r=0;var f=0,g=m-e,y=1<<g;for(n.sort((function(t,e){return d[e.s]-d[t.s]||t.f-e.f}));r<i;++r){var T=n[r].s;if(!(d[T]>e))break;f+=y-(1<<m-d[T]),d[T]=e}for(f>>>=g;f>0;){var v=n[r].s;d[v]<e?f-=1<<e-d[v]++-1:++r}for(;r>=0&&f;--r){var b=n[r].s;d[b]==e&&(--d[b],++f)}m=e}return[new dp(d),m]},Wp=function(t,e,s){return-1==t.s?Math.max(Wp(t.l,e,s+1),Wp(t.r,e,s+1)):e[t.s]=s},Yp=function(t){for(var e=t.length;e&&!t[--e];);for(var s=new mp(++e),r=0,i=t[0],n=1,o=function(t){s[r++]=t},a=1;a<=e;++a)if(t[a]==i&&a!=e)++n;else{if(!i&&n>2){for(;n>138;n-=138)o(32754);n>2&&(o(n>10?n-11<<5|28690:n-3<<5|12305),n=0)}else if(n>3){for(o(i),--n;n>6;n-=6)o(8304);n>2&&(o(n-3<<5|8208),n=0)}for(;n--;)o(i);n=1,i=t[a]}return[s.subarray(0,r),e]},Xp=function(t,e){for(var s=0,r=0;r<e.length;++r)s+=t[r]*e[r];return s},qp=function(t,e,s){var r=s.length,i=Hp(e+2);t[i]=255&r,t[i+1]=r>>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var n=0;n<r;++n)t[i+n+4]=s[n];return 8*(i+4+r)},Kp=function(t,e,s,r,i,n,o,a,h,c,l){jp(e,l++,s),++i[256];for(var u=Vp(i,15),p=u[0],d=u[1],m=Vp(n,15),f=m[0],g=m[1],y=Yp(p),T=y[0],v=y[1],b=Yp(f),w=b[0],x=b[1],I=new mp(19),E=0;E<T.length;++E)I[31&T[E]]++;for(E=0;E<w.length;++E)I[31&w[E]]++;for(var S=Vp(I,7),A=S[0],R=S[1],C=19;C>4&&!A[Tp[C-1]];--C);var O,_,D,F,M=c+5<<3,P=Xp(i,_p)+Xp(n,Dp)+o,N=Xp(i,p)+Xp(n,f)+o+14+3*C+Xp(I,A)+(2*I[16]+3*I[17]+7*I[18]);if(M<=P&&M<=N)return qp(e,l,t.subarray(h,h+c));if(jp(e,l,1+(N<P)),l+=2,N<P){O=Op(p,d,0),_=p,D=Op(f,g,0),F=f;var L=Op(A,R,0);jp(e,l,v-257),jp(e,l+5,x-1),jp(e,l+10,C-4),l+=14;for(E=0;E<C;++E)jp(e,l+3*E,A[Tp[E]]);l+=3*C;for(var k=[T,w],U=0;U<2;++U){var H=k[U];for(E=0;E<H.length;++E){var B=31&H[E];jp(e,l,L[B]),l+=A[B],B>15&&(jp(e,l,H[E]>>>5&127),l+=H[E]>>>12)}}}else O=Fp,_=_p,D=Pp,F=Dp;for(E=0;E<a;++E)if(r[E]>255){B=r[E]>>>18&31;zp(e,l,O[B+257]),l+=_[B+257],B>7&&(jp(e,l,r[E]>>>23&31),l+=gp[B]);var G=31&r[E];zp(e,l,D[G]),l+=F[G],G>3&&(zp(e,l,r[E]>>>5&8191),l+=yp[G])}else zp(e,l,O[r[E]]),l+=_[r[E]];return zp(e,l,O[256]),l+_[256]},Jp=new fp([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),$p=new dp(0),Zp=function(t,e,s,r,i,n){var o=t.length,a=new dp(r+o+5*(1+Math.ceil(o/7e3))+i),h=a.subarray(r,a.length-i),c=0;if(!e||o<8)for(var l=0;l<=o;l+=65535){var u=l+65535;u<o?c=qp(h,c,t.subarray(l,u)):(h[l]=n,c=qp(h,c,t.subarray(l,o)))}else{for(var p=Jp[e-1],d=p>>>13,m=8191&p,f=(1<<s)-1,g=new mp(32768),y=new mp(f+1),T=Math.ceil(s/3),v=2*T,b=function(e){return(t[e]^t[e+1]<<T^t[e+2]<<v)&f},w=new fp(25e3),x=new mp(288),I=new mp(32),E=0,S=0,A=(l=0,0),R=0,C=0;l<o;++l){var O=b(l),_=32767&l,D=y[O];if(g[_]=D,y[O]=_,R<=l){var F=o-l;if((E>7e3||A>24576)&&F>423){c=Kp(t,h,0,w,x,I,S,A,C,l-C,c),A=E=S=0,C=l;for(var M=0;M<286;++M)x[M]=0;for(M=0;M<30;++M)I[M]=0}var P=2,N=0,L=m,k=_-D&32767;if(F>2&&O==b(l-k))for(var U=Math.min(d,F)-1,H=Math.min(32767,l),B=Math.min(258,F);k<=H&&--L&&_!=D;){if(t[l+P]==t[l+P-k]){for(var G=0;G<B&&t[l+G]==t[l+G-k];++G);if(G>P){if(P=G,N=k,G>U)break;var j=Math.min(k,G-2),z=0;for(M=0;M<j;++M){var V=l-k+M+32768&32767,W=V-g[V]+32768&32767;W>z&&(z=W,D=V)}}}k+=(_=D)-(D=g[_])+32768&32767}if(N){w[A++]=268435456|xp[P]<<18|Sp[N];var Y=31&xp[P],X=31&Sp[N];S+=gp[Y]+yp[X],++x[257+Y],++I[X],R=l+P,++E}else w[A++]=t[l],++x[t[l]]}}c=Kp(t,h,n,w,x,I,S,A,C,l-C,c),!n&&7&c&&(c=qp(h,c+1,$p))}return Bp(a,0,r+Hp(c)+i)},Qp=function(){for(var t=new fp(256),e=0;e<256;++e){for(var s=e,r=9;--r;)s=(1&s&&3988292384)^s>>>1;t[e]=s}return t}(),td=function(){var t=-1;return{p:function(e){for(var s=t,r=0;r<e.length;++r)s=Qp[255&s^e[r]]^s>>>8;t=s},d:function(){return~t}}},ed=function(){var t=1,e=0;return{p:function(s){for(var r=t,i=e,n=s.length,o=0;o!=n;){for(var a=Math.min(o+2655,n);o<a;++o)i+=r+=s[o];r=(65535&r)+15*(r>>16),i=(65535&i)+15*(i>>16)}t=r,e=i},d:function(){return(255&(t%=65521))<<24|t>>>8<<16|(255&(e%=65521))<<8|e>>>8}}},sd=function(t,e,s,r,i){return Zp(t,null==e.level?6:e.level,null==e.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,s,r,!i)},rd=function(t,e){var s={};for(var r in t)s[r]=t[r];for(var r in e)s[r]=e[r];return s},id=function(t,e,s){for(var r=t(),i=t.toString(),n=i.slice(i.indexOf("[")+1,i.lastIndexOf("]")).replace(/ /g,"").split(","),o=0;o<r.length;++o){var a=r[o],h=n[o];if("function"==typeof a){e+=";"+h+"=";var c=a.toString();if(a.prototype)if(-1!=c.indexOf("[native code]")){var l=c.indexOf(" ",8)+1;e+=c.slice(l,c.indexOf("(",l))}else for(var u in e+=c,a.prototype)e+=";"+h+".prototype."+u+"="+a.prototype[u].toString();else e+=c}else s[h]=a}return[e,s]},nd=[],od=function(t,e,s,r){var i;if(!nd[s]){for(var n="",o={},a=t.length-1,h=0;h<a;++h)n=(i=id(t[h],n,o))[0],o=i[1];nd[s]=id(t[a],n,o)}var c=rd({},nd[s][1]);return function(t,e,s,r,i){var n=pp(lp[e]||(lp[e]=up(t)));return n.onerror=function(t){return i(t.error,null)},n.onmessage=function(t){return i(null,t.data)},n.postMessage(s,r),n}(nd[s][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+e.toString()+"}",s,c,function(t){var e=[];for(var s in t)(t[s]instanceof dp||t[s]instanceof mp||t[s]instanceof fp)&&e.push((t[s]=new t[s].constructor(t[s])).buffer);return e}(c),r)},ad=function(){return[dp,mp,fp,gp,yp,Tp,wp,Ep,Mp,Np,Ap,Op,Lp,kp,Up,Hp,Bp,Gp,Ld,dd,md]},hd=function(){return[dp,mp,fp,gp,yp,Tp,xp,Sp,Fp,_p,Pp,Dp,Ap,Jp,$p,Op,jp,zp,Vp,Wp,Yp,Xp,qp,Kp,Hp,Bp,Zp,sd,Fd,dd]},cd=function(){return[xd,Sd,wd,td,Qp]},ld=function(){return[Id,Ed]},ud=function(){return[Ad,wd,ed]},pd=function(){return[Rd]},dd=function(t){return postMessage(t,[t.buffer])},md=function(t){return t&&t.size&&new dp(t.size)},fd=function(t,e,s,r,i,n){var o=od(s,r,i,(function(t,e){o.terminate(),n(t,e)}));return o.postMessage([t,e],e.consume?[t.buffer]:[]),function(){o.terminate()}},gd=function(t){return t.ondata=function(t,e){return postMessage([t,e],[t.buffer])},function(e){return t.push(e.data[0],e.data[1])}},yd=function(t,e,s,r,i){var n,o=od(t,r,i,(function(t,s){t?(o.terminate(),e.ondata.call(e,t)):(s[1]&&o.terminate(),e.ondata.call(e,t,s[0],s[1]))}));o.postMessage(s),e.push=function(t,s){if(n)throw"stream finished";if(!e.ondata)throw"no stream handler";o.postMessage([t,n=s],[t.buffer])},e.terminate=function(){o.terminate()}},Td=function(t,e){return t[e]|t[e+1]<<8},vd=function(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0},bd=function(t,e){return vd(t,e)+4294967296*vd(t,e+4)},wd=function(t,e,s){for(;s;++e)t[e]=s,s>>>=8},xd=function(t,e){var s=e.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=e.level<2?4:9==e.level?2:0,t[9]=3,0!=e.mtime&&wd(t,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),s){t[3]=8;for(var r=0;r<=s.length;++r)t[r+10]=s.charCodeAt(r)}},Id=function(t){if(31!=t[0]||139!=t[1]||8!=t[2])throw"invalid gzip data";var e=t[3],s=10;4&e&&(s+=t[10]|2+(t[11]<<8));for(var r=(e>>3&1)+(e>>4&1);r>0;r-=!t[s++]);return s+(2&e)},Ed=function(t){var e=t.length;return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0},Sd=function(t){return 10+(t.filename&&t.filename.length+1||0)},Ad=function(t,e){var s=e.level,r=0==s?0:s<6?1:9==s?3:2;t[0]=120,t[1]=r<<6|(r?32-2*r:1)},Rd=function(t){if(8!=(15&t[0])||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(32&t[1])throw"invalid zlib data: preset dictionaries not supported"};function Cd(t,e){return e||"function"!=typeof t||(e=t,t={}),this.ondata=e,t}var Od=function(){function t(t,e){e||"function"!=typeof t||(e=t,t={}),this.ondata=e,this.o=t||{}}return t.prototype.p=function(t,e){this.ondata(sd(t,this.o,0,0,!e),e)},t.prototype.push=function(t,e){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";this.d=e,this.p(t,e||!1)},t}(),_d=function(){return function(t,e){yd([hd,function(){return[gd,Od]}],this,Cd.call(this,t,e),(function(t){var e=new Od(t.data);onmessage=gd(e)}),6)}}();function Dd(t,e,s){if(s||(s=e,e={}),"function"!=typeof s)throw"no callback";return fd(t,e,[hd],(function(t){return dd(Fd(t.data[0],t.data[1]))}),0,s)}function Fd(t,e){return sd(t,e||{},0,0)}var Md=function(){function t(t){this.s={},this.p=new dp(0),this.ondata=t}return t.prototype.e=function(t){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";var e=this.p.length,s=new dp(e+t.length);s.set(this.p),s.set(t,e),this.p=s},t.prototype.c=function(t){this.d=this.s.i=t||!1;var e=this.s.b,s=Gp(this.p,this.o,this.s);this.ondata(Bp(s,e,this.s.b),this.d),this.o=Bp(s,this.s.b-32768),this.s.b=this.o.length,this.p=Bp(this.p,this.s.p/8|0),this.s.p&=7},t.prototype.push=function(t,e){this.e(t),this.c(e)},t}(),Pd=function(){return function(t){this.ondata=t,yd([ad,function(){return[gd,Md]}],this,0,(function(){var t=new Md;onmessage=gd(t)}),7)}}();function Nd(t,e,s){if(s||(s=e,e={}),"function"!=typeof s)throw"no callback";return fd(t,e,[ad],(function(t){return dd(Ld(t.data[0],md(t.data[1])))}),1,s)}function Ld(t,e){return Gp(t,e)}var kd=function(){function t(t,e){this.c=td(),this.l=0,this.v=1,Od.call(this,t,e)}return t.prototype.push=function(t,e){Od.prototype.push.call(this,t,e)},t.prototype.p=function(t,e){this.c.p(t),this.l+=t.length;var s=sd(t,this.o,this.v&&Sd(this.o),e&&8,!e);this.v&&(xd(s,this.o),this.v=0),e&&(wd(s,s.length-8,this.c.d()),wd(s,s.length-4,this.l)),this.ondata(s,e)},t}(),Ud=function(){return function(t,e){yd([hd,cd,function(){return[gd,Od,kd]}],this,Cd.call(this,t,e),(function(t){var e=new kd(t.data);onmessage=gd(e)}),8)}}();function Hd(t,e,s){if(s||(s=e,e={}),"function"!=typeof s)throw"no callback";return fd(t,e,[hd,cd,function(){return[Bd]}],(function(t){return dd(Bd(t.data[0],t.data[1]))}),2,s)}function Bd(t,e){e||(e={});var s=td(),r=t.length;s.p(t);var i=sd(t,e,Sd(e),8),n=i.length;return xd(i,e),wd(i,n-8,s.d()),wd(i,n-4,r),i}var Gd=function(){function t(t){this.v=1,Md.call(this,t)}return t.prototype.push=function(t,e){if(Md.prototype.e.call(this,t),this.v){var s=this.p.length>3?Id(this.p):4;if(s>=this.p.length&&!e)return;this.p=this.p.subarray(s),this.v=0}if(e){if(this.p.length<8)throw"invalid gzip stream";this.p=this.p.subarray(0,-8)}Md.prototype.c.call(this,e)},t}(),jd=function(){return function(t){this.ondata=t,yd([ad,ld,function(){return[gd,Md,Gd]}],this,0,(function(){var t=new Gd;onmessage=gd(t)}),9)}}();function zd(t,e,s){if(s||(s=e,e={}),"function"!=typeof s)throw"no callback";return fd(t,e,[ad,ld,function(){return[Vd]}],(function(t){return dd(Vd(t.data[0]))}),3,s)}function Vd(t,e){return Gp(t.subarray(Id(t),-8),e||new dp(Ed(t)))}var Wd=function(){function t(t,e){this.c=ed(),this.v=1,Od.call(this,t,e)}return t.prototype.push=function(t,e){Od.prototype.push.call(this,t,e)},t.prototype.p=function(t,e){this.c.p(t);var s=sd(t,this.o,this.v&&2,e&&4,!e);this.v&&(Ad(s,this.o),this.v=0),e&&wd(s,s.length-4,this.c.d()),this.ondata(s,e)},t}(),Yd=function(){return function(t,e){yd([hd,ud,function(){return[gd,Od,Wd]}],this,Cd.call(this,t,e),(function(t){var e=new Wd(t.data);onmessage=gd(e)}),10)}}();function Xd(t,e){e||(e={});var s=ed();s.p(t);var r=sd(t,e,2,4);return Ad(r,e),wd(r,r.length-4,s.d()),r}var qd=function(){function t(t){this.v=1,Md.call(this,t)}return t.prototype.push=function(t,e){if(Md.prototype.e.call(this,t),this.v){if(this.p.length<2&&!e)return;this.p=this.p.subarray(2),this.v=0}if(e){if(this.p.length<4)throw"invalid zlib stream";this.p=this.p.subarray(0,-4)}Md.prototype.c.call(this,e)},t}(),Kd=function(){return function(t){this.ondata=t,yd([ad,pd,function(){return[gd,Md,qd]}],this,0,(function(){var t=new qd;onmessage=gd(t)}),11)}}();function Jd(t,e,s){if(s||(s=e,e={}),"function"!=typeof s)throw"no callback";return fd(t,e,[ad,pd,function(){return[$d]}],(function(t){return dd($d(t.data[0],md(t.data[1])))}),5,s)}function $d(t,e){return Gp((Rd(t),t.subarray(2,-4)),e)}var Zd=function(){function t(t){this.G=Gd,this.I=Md,this.Z=qd,this.ondata=t}return t.prototype.push=function(t,e){if(!this.ondata)throw"no stream handler";if(this.s)this.s.push(t,e);else{if(this.p&&this.p.length){var s=new dp(this.p.length+t.length);s.set(this.p),s.set(t,this.p.length)}else this.p=t;if(this.p.length>2){var r=this,i=function(){r.ondata.apply(r,arguments)};this.s=31==this.p[0]&&139==this.p[1]&&8==this.p[2]?new this.G(i):8!=(15&this.p[0])||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(i):new this.Z(i),this.s.push(this.p,e),this.p=null}}},t}(),Qd=function(){function t(t){this.G=jd,this.I=Pd,this.Z=Kd,this.ondata=t}return t.prototype.push=function(t,e){Zd.prototype.push.call(this,t,e)},t}();var tm=function(t,e,s,r){for(var i in t){var n=t[i],o=e+i;n instanceof dp?s[o]=[n,r]:Array.isArray(n)?s[o]=[n[0],rd(r,n[1])]:tm(n,o+"/",s,r)}},em="undefined"!=typeof TextEncoder&&new TextEncoder,sm="undefined"!=typeof TextDecoder&&new TextDecoder,rm=0;try{sm.decode($p,{stream:!0}),rm=1}catch(t){}var im=function(t){for(var e="",s=0;;){var r=t[s++],i=(r>127)+(r>223)+(r>239);if(s+i>t.length)return[e,Bp(t,s-1)];i?3==i?(r=((15&r)<<18|(63&t[s++])<<12|(63&t[s++])<<6|63&t[s++])-65536,e+=String.fromCharCode(55296|r>>10,56320|1023&r)):e+=1&i?String.fromCharCode((31&r)<<6|63&t[s++]):String.fromCharCode((15&r)<<12|(63&t[s++])<<6|63&t[s++]):e+=String.fromCharCode(r)}},nm=function(){function t(t){this.ondata=t,rm?this.t=new TextDecoder:this.p=$p}return t.prototype.push=function(t,e){if(!this.ondata)throw"no callback";if(e=!!e,this.t){if(this.ondata(this.t.decode(t,{stream:!0}),e),e){if(this.t.decode().length)throw"invalid utf-8 data";this.t=null}}else{if(!this.p)throw"stream finished";var s=new dp(this.p.length+t.length);s.set(this.p),s.set(t,this.p.length);var r=im(s),i=r[0],n=r[1];if(e){if(n.length)throw"invalid utf-8 data";this.p=null}else this.p=n;this.ondata(i,e)}},t}(),om=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,e){if(!this.ondata)throw"no callback";if(this.d)throw"stream finished";this.ondata(am(t),this.d=e||!1)},t}();function am(t,e){if(e){for(var s=new dp(t.length),r=0;r<t.length;++r)s[r]=t.charCodeAt(r);return s}if(em)return em.encode(t);var i=t.length,n=new dp(t.length+(t.length>>1)),o=0,a=function(t){n[o++]=t};for(r=0;r<i;++r){if(o+5>n.length){var h=new dp(o+8+(i-r<<1));h.set(n),n=h}var c=t.charCodeAt(r);c<128||e?a(c):c<2048?(a(192|c>>6),a(128|63&c)):c>55295&&c<57344?(a(240|(c=65536+(1047552&c)|1023&t.charCodeAt(++r))>>18),a(128|c>>12&63),a(128|c>>6&63),a(128|63&c)):(a(224|c>>12),a(128|c>>6&63),a(128|63&c))}return Bp(n,0,o)}function hm(t,e){if(e){for(var s="",r=0;r<t.length;r+=16384)s+=String.fromCharCode.apply(null,t.subarray(r,r+16384));return s}if(sm)return sm.decode(t);var i=im(t),n=i[0];if(i[1].length)throw"invalid utf-8 data";return n}var cm=function(t){return 1==t?3:t<6?2:9==t?1:0},lm=function(t,e){return e+30+Td(t,e+26)+Td(t,e+28)},um=function(t,e,s){var r=Td(t,e+28),i=hm(t.subarray(e+46,e+46+r),!(2048&Td(t,e+8))),n=e+46+r,o=vd(t,e+20),a=s&&4294967295==o?pm(t,n):[o,vd(t,e+24),vd(t,e+42)],h=a[0],c=a[1],l=a[2];return[Td(t,e+10),h,c,i,n+Td(t,e+30)+Td(t,e+32),l]},pm=function(t,e){for(;1!=Td(t,e);e+=4+Td(t,e+2));return[bd(t,e+12),bd(t,e+4),bd(t,e+20)]},dm=function(t){var e=0;if(t)for(var s in t){var r=t[s].length;if(r>65535)throw"extra field too long";e+=r+4}return e},mm=function(t,e,s,r,i,n,o,a){var h=r.length,c=s.extra,l=a&&a.length,u=dm(c);wd(t,e,null!=o?33639248:67324752),e+=4,null!=o&&(t[e++]=20,t[e++]=s.os),t[e]=20,e+=2,t[e++]=s.flag<<1|(null==n&&8),t[e++]=i&&8,t[e++]=255&s.compression,t[e++]=s.compression>>8;var p=new Date(null==s.mtime?Date.now():s.mtime),d=p.getFullYear()-1980;if(d<0||d>119)throw"date not in range 1980-2099";if(wd(t,e,d<<25|p.getMonth()+1<<21|p.getDate()<<16|p.getHours()<<11|p.getMinutes()<<5|p.getSeconds()>>>1),e+=4,null!=n&&(wd(t,e,s.crc),wd(t,e+4,n),wd(t,e+8,s.size)),wd(t,e+12,h),wd(t,e+14,u),e+=16,null!=o&&(wd(t,e,l),wd(t,e+6,s.attrs),wd(t,e+10,o),e+=14),t.set(r,e),e+=h,u)for(var m in c){var f=c[m],g=f.length;wd(t,e,+m),wd(t,e+2,g),t.set(f,e+4),e+=4+g}return l&&(t.set(a,e),e+=l),e},fm=function(t,e,s,r,i){wd(t,e,101010256),wd(t,e+8,s),wd(t,e+10,s),wd(t,e+12,r),wd(t,e+16,i)},gm=function(){function t(t){this.filename=t,this.c=td(),this.size=0,this.compression=0}return t.prototype.process=function(t,e){this.ondata(null,t,e)},t.prototype.push=function(t,e){if(!this.ondata)throw"no callback - add to ZIP archive before pushing";this.c.p(t),this.size+=t.length,e&&(this.crc=this.c.d()),this.process(t,e||!1)},t}(),ym=function(){function t(t,e){var s=this;e||(e={}),gm.call(this,t),this.d=new Od(e,(function(t,e){s.ondata(null,t,e)})),this.compression=8,this.flag=cm(e.level)}return t.prototype.process=function(t,e){try{this.d.push(t,e)}catch(t){this.ondata(t,null,e)}},t.prototype.push=function(t,e){gm.prototype.push.call(this,t,e)},t}(),Tm=function(){function t(t,e){var s=this;e||(e={}),gm.call(this,t),this.d=new _d(e,(function(t,e,r){s.ondata(t,e,r)})),this.compression=8,this.flag=cm(e.level),this.terminate=this.d.terminate}return t.prototype.process=function(t,e){this.d.push(t,e)},t.prototype.push=function(t,e){gm.prototype.push.call(this,t,e)},t}(),vm=function(){function t(t){this.ondata=t,this.u=[],this.d=1}return t.prototype.add=function(t){var e=this;if(2&this.d)throw"stream finished";var s=am(t.filename),r=s.length,i=t.comment,n=i&&am(i),o=r!=t.filename.length||n&&i.length!=n.length,a=r+dm(t.extra)+30;if(r>65535)throw"filename too long";var h=new dp(a);mm(h,0,t,s,o);var c=[h],l=function(){for(var t=0,s=c;t<s.length;t++){var r=s[t];e.ondata(null,r,!1)}c=[]},u=this.d;this.d=0;var p=this.u.length,d=rd(t,{f:s,u:o,o:n,t:function(){t.terminate&&t.terminate()},r:function(){if(l(),u){var t=e.u[p+1];t?t.r():e.d=1}u=1}}),m=0;t.ondata=function(s,r,i){if(s)e.ondata(s,r,i),e.terminate();else if(m+=r.length,c.push(r),i){var n=new dp(16);wd(n,0,134695760),wd(n,4,t.crc),wd(n,8,m),wd(n,12,t.size),c.push(n),d.c=m,d.b=a+m+16,d.crc=t.crc,d.size=t.size,u&&d.r(),u=1}else u&&l()},this.u.push(d)},t.prototype.end=function(){var t=this;if(2&this.d){if(1&this.d)throw"stream finishing";throw"stream finished"}this.d?this.e():this.u.push({r:function(){1&t.d&&(t.u.splice(-1,1),t.e())},t:function(){}}),this.d=3},t.prototype.e=function(){for(var t=0,e=0,s=0,r=0,i=this.u;r<i.length;r++){s+=46+(h=i[r]).f.length+dm(h.extra)+(h.o?h.o.length:0)}for(var n=new dp(s+22),o=0,a=this.u;o<a.length;o++){var h=a[o];mm(n,t,h,h.f,h.u,h.c,e,h.o),t+=46+h.f.length+dm(h.extra)+(h.o?h.o.length:0),e+=h.b}fm(n,t,this.u.length,s,e),this.ondata(null,n,!0),this.d=2},t.prototype.terminate=function(){for(var t=0,e=this.u;t<e.length;t++){e[t].t()}this.d=2},t}();var bm=function(){function t(){}return t.prototype.push=function(t,e){this.ondata(null,t,e)},t.compression=0,t}(),wm=function(){function t(){var t=this;this.i=new Md((function(e,s){t.ondata(null,e,s)}))}return t.prototype.push=function(t,e){try{this.i.push(t,e)}catch(s){this.ondata(s,t,e)}},t.compression=8,t}(),xm=function(){function t(t,e){var s=this;e<32e4?this.i=new Md((function(t,e){s.ondata(null,t,e)})):(this.i=new Pd((function(t,e,r){s.ondata(t,e,r)})),this.terminate=this.i.terminate)}return t.prototype.push=function(t,e){this.i.terminate&&(t=Bp(t,0)),this.i.push(t,e)},t.compression=8,t}(),Im=function(){function t(t){this.onfile=t,this.k=[],this.o={0:bm},this.p=$p}return t.prototype.push=function(t,e){var s=this;if(!this.onfile)throw"no callback";if(!this.p)throw"stream finished";if(this.c>0){var r=Math.min(this.c,t.length),i=t.subarray(0,r);if(this.c-=r,this.d?this.d.push(i,!this.c):this.k[0].push(i),(t=t.subarray(r)).length)return this.push(t,e)}else{var n=0,o=0,a=void 0,h=void 0;this.p.length?t.length?((h=new dp(this.p.length+t.length)).set(this.p),h.set(t,this.p.length)):h=this.p:h=t;for(var c=h.length,l=this.c,u=l&&this.d,p=function(){var t,e=vd(h,o);if(67324752==e){n=1,a=o,d.d=null,d.c=0;var r=Td(h,o+6),i=Td(h,o+8),u=2048&r,p=8&r,m=Td(h,o+26),f=Td(h,o+28);if(c>o+30+m+f){var g=[];d.k.unshift(g),n=2;var y,T=vd(h,o+18),v=vd(h,o+22),b=hm(h.subarray(o+30,o+=30+m),!u);4294967295==T?(t=p?[-2]:pm(h,o),T=t[0],v=t[1]):p&&(T=-1),o+=f,d.c=T;var w={name:b,compression:i,start:function(){if(!w.ondata)throw"no callback";if(T){var t=s.o[i];if(!t)throw"unknown compression type "+i;(y=T<0?new t(b):new t(b,T,v)).ondata=function(t,e,s){w.ondata(t,e,s)};for(var e=0,r=g;e<r.length;e++){var n=r[e];y.push(n,!1)}s.k[0]==g&&s.c?s.d=y:y.push($p,!0)}else w.ondata(null,$p,!0)},terminate:function(){y&&y.terminate&&y.terminate()}};T>=0&&(w.size=T,w.originalSize=v),d.onfile(w)}return"break"}if(l){if(134695760==e)return a=o+=12+(-2==l&&8),n=3,d.c=0,"break";if(33639248==e)return a=o-=4,n=3,d.c=0,"break"}},d=this;o<c-4;++o){if("break"===p())break}if(this.p=$p,l<0){var m=n?h.subarray(0,a-12-(-2==l&&8)-(134695760==vd(h,a-16)&&4)):h.subarray(0,o);u?u.push(m,!!n):this.k[+(2==n)].push(m)}if(2&n)return this.push(h.subarray(o),e);this.p=h.subarray(o)}if(e){if(this.c)throw"invalid zip file";this.p=null}},t.prototype.register=function(t){this.o[t.compression]=t},t}();function Em(t){for(var e={},s=t.length-22;101010256!=vd(t,s);--s)if(!s||t.length-s>65558)throw"invalid zip file";var r=Td(t,s+8);if(!r)return{};var i=vd(t,s+16),n=4294967295==i;if(n){if(s=vd(t,s-12),101075792!=vd(t,s))throw"invalid zip file";r=vd(t,s+32),i=vd(t,s+48)}for(var o=0;o<r;++o){var a=um(t,i,n),h=a[0],c=a[1],l=a[2],u=a[3],p=a[4],d=a[5],m=lm(t,d);if(i=p,h){if(8!=h)throw"unknown compression type "+h;e[u]=Ld(t.subarray(m,m+c),new dp(l))}else e[u]=Bp(t,m,m+c)}return e}var Sm=Object.freeze({__proto__:null,Deflate:Od,AsyncDeflate:_d,deflate:Dd,deflateSync:Fd,Inflate:Md,AsyncInflate:Pd,inflate:Nd,inflateSync:Ld,Gzip:kd,AsyncGzip:Ud,gzip:Hd,gzipSync:Bd,Gunzip:Gd,AsyncGunzip:jd,gunzip:zd,gunzipSync:Vd,Zlib:Wd,AsyncZlib:Yd,zlib:function(t,e,s){if(s||(s=e,e={}),"function"!=typeof s)throw"no callback";return fd(t,e,[hd,ud,function(){return[Xd]}],(function(t){return dd(Xd(t.data[0],t.data[1]))}),4,s)},zlibSync:Xd,Unzlib:qd,AsyncUnzlib:Kd,unzlib:Jd,unzlibSync:$d,compress:Hd,AsyncCompress:Ud,compressSync:Bd,Compress:kd,Decompress:Zd,AsyncDecompress:Qd,decompress:function(t,e,s){if(s||(s=e,e={}),"function"!=typeof s)throw"no callback";return 31==t[0]&&139==t[1]&&8==t[2]?zd(t,e,s):8!=(15&t[0])||t[0]>>4>7||(t[0]<<8|t[1])%31?Nd(t,e,s):Jd(t,e,s)},decompressSync:function(t,e){return 31==t[0]&&139==t[1]&&8==t[2]?Vd(t,e):8!=(15&t[0])||t[0]>>4>7||(t[0]<<8|t[1])%31?Ld(t,e):$d(t,e)},DecodeUTF8:nm,EncodeUTF8:om,strToU8:am,strFromU8:hm,ZipPassThrough:gm,ZipDeflate:ym,AsyncZipDeflate:Tm,Zip:vm,zip:function(t,e,s){if(s||(s=e,e={}),"function"!=typeof s)throw"no callback";var r={};tm(t,"",r,e);var i=Object.keys(r),n=i.length,o=0,a=0,h=n,c=new Array(n),l=[],u=function(){for(var t=0;t<l.length;++t)l[t]()},p=function(){var t=new dp(a+22),e=o,r=a-o;a=0;for(var i=0;i<h;++i){var n=c[i];try{var l=n.c.length;mm(t,a,n,n.f,n.u,l);var u=30+n.f.length+dm(n.extra),p=a+u;t.set(n.c,p),mm(t,o,n,n.f,n.u,l,a,n.m),o+=16+u+(n.m?n.m.length:0),a=p+l}catch(t){return s(t,null)}}fm(t,o,c.length,r,e),s(null,t)};n||p();for(var d=function(t){var e=i[t],h=r[e],d=h[0],m=h[1],f=td(),g=d.length;f.p(d);var y=am(e),T=y.length,v=m.comment,b=v&&am(v),w=b&&b.length,x=dm(m.extra),I=0==m.level?0:8,E=function(r,i){if(r)u(),s(r,null);else{var h=i.length;c[t]=rd(m,{size:g,crc:f.d(),c:i,f:y,m:b,u:T!=e.length||b&&v.length!=w,compression:I}),o+=30+T+x+h,a+=76+2*(T+x)+(w||0)+h,--n||p()}};if(T>65535&&E("filename too long",null),I)if(g<16e4)try{E(null,Fd(d,m))}catch(t){E(t,null)}else l.push(Dd(d,m,E));else E(null,d)},m=0;m<h;++m)d(m);return u},zipSync:function(t,e){e||(e={});var s={},r=[];tm(t,"",s,e);var i=0,n=0;for(var o in s){var a=s[o],h=a[0],c=a[1],l=0==c.level?0:8,u=(I=am(o)).length,p=c.comment,d=p&&am(p),m=d&&d.length,f=dm(c.extra);if(u>65535)throw"filename too long";var g=l?Fd(h,c):h,y=g.length,T=td();T.p(h),r.push(rd(c,{size:h.length,crc:T.d(),c:g,f:I,m:d,u:u!=o.length||d&&p.length!=m,o:i,compression:l})),i+=30+u+f+y,n+=76+2*(u+f)+(m||0)+y}for(var v=new dp(n+22),b=i,w=n-i,x=0;x<r.length;++x){var I=r[x];mm(v,I.o,I,I.f,I.u,I.c.length);var E=30+I.f.length+dm(I.extra);v.set(I.c,I.o+E),mm(v,i,I,I.f,I.u,I.c.length,I.o,I.m),i+=16+E+(I.m?I.m.length:0)}return fm(v,i,r.length,w,b),v},UnzipPassThrough:bm,UnzipInflate:wm,AsyncUnzipInflate:xm,Unzip:Im,unzip:function(t,e){if("function"!=typeof e)throw"no callback";for(var s=[],r=function(){for(var t=0;t<s.length;++t)s[t]()},i={},n=t.length-22;101010256!=vd(t,n);--n)if(!n||t.length-n>65558)return void e("invalid zip file",null);var o=Td(t,n+8);o||e(null,{});var a=o,h=vd(t,n+16),c=4294967295==h;if(c){if(n=vd(t,n-12),101075792!=vd(t,n))return void e("invalid zip file",null);a=o=vd(t,n+32),h=vd(t,n+48)}for(var l=function(n){var a=um(t,h,c),l=a[0],u=a[1],p=a[2],d=a[3],m=a[4],f=a[5],g=lm(t,f);h=m;var y=function(t,s){t?(r(),e(t,null)):(i[d]=s,--o||e(null,i))};if(l)if(8==l){var T=t.subarray(g,g+u);if(u<32e4)try{y(null,Ld(T,new dp(p)))}catch(t){y(t,null)}else s.push(Nd(T,{size:p},y))}else y("unknown compression type "+l,null);else y(null,Bp(t,g,g+u))},u=0;u<a;++u)l();return r},unzipSync:Em});class Am extends Qc{constructor(t){super(t),this.availableExtensions=[]}load(t,e,s,r){const i=this,n=new el(i.manager);n.setPath(i.path),n.setResponseType("arraybuffer"),n.setRequestHeader(i.requestHeader),n.setWithCredentials(i.withCredentials),n.load(t,(function(s){try{e(i.parse(s))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),s,r)}parse(t){const e=this,s=new ol(this.manager);function r(t){const e=[],s=(new DOMParser).parseFromString(t,"application/xml").querySelectorAll("Relationship");for(let t=0;t<s.length;t++){const r=s[t],i={target:r.getAttribute("Target"),id:r.getAttribute("Id"),type:r.getAttribute("Type")};e.push(i)}return e}function i(t){const e={id:t.getAttribute("id"),basematerials:[]},s=t.querySelectorAll("base");for(let t=0;t<s.length;t++){const r=h(s[t]);r.index=t,e.basematerials.push(r)}return e}function n(t){const e={id:t.getAttribute("id"),texid:t.getAttribute("texid"),displaypropertiesid:t.getAttribute("displaypropertiesid")},s=t.querySelectorAll("tex2coord"),r=[];for(let t=0;t<s.length;t++){const e=s[t],i=e.getAttribute("u"),n=e.getAttribute("v");r.push(parseFloat(i),parseFloat(n))}return e.uvs=new Float32Array(r),e}function o(t){const e={id:t.getAttribute("id"),displaypropertiesid:t.getAttribute("displaypropertiesid")},s=t.querySelectorAll("color"),r=[],i=new Ae;for(let t=0;t<s.length;t++){const e=s[t].getAttribute("color");i.setStyle(e.substring(0,7)),i.convertSRGBToLinear(),r.push(i.r,i.g,i.b)}return e.colors=new Float32Array(r),e}function a(t){const e={id:t.getAttribute("id")},s=t.querySelectorAll("pbmetallic"),r=[];for(let t=0;t<s.length;t++){const e=s[t];r.push({name:e.getAttribute("name"),metallicness:parseFloat(e.getAttribute("metallicness")),roughness:parseFloat(e.getAttribute("roughness"))})}return e.data=r,e}function h(t){const e={};return e.name=t.getAttribute("name"),e.displaycolor=t.getAttribute("displaycolor"),e.displaypropertiesid=t.getAttribute("displaypropertiesid"),e}function c(t){const e={};e.objectId=t.getAttribute("objectid");const s=t.getAttribute("transform");return s&&(e.transform=l(s)),e}function l(t){const e=[];t.split(" ").forEach((function(t){e.push(parseFloat(t))}));const s=new Ts;return s.set(e[0],e[3],e[6],e[9],e[1],e[4],e[7],e[10],e[2],e[5],e[8],e[11],0,0,0,1),s}function u(t){const e={type:t.getAttribute("type")},s=t.getAttribute("id");s&&(e.id=s);const r=t.getAttribute("pid");r&&(e.pid=r);const i=t.getAttribute("pindex");i&&(e.pindex=i);const n=t.getAttribute("thumbnail");n&&(e.thumbnail=n);const o=t.getAttribute("partnumber");o&&(e.partnumber=o);const a=t.getAttribute("name");a&&(e.name=a);const h=t.querySelector("mesh");h&&(e.mesh=function(t){const e={},s=[],r=t.querySelectorAll("vertices vertex");for(let t=0;t<r.length;t++){const e=r[t],i=e.getAttribute("x"),n=e.getAttribute("y"),o=e.getAttribute("z");s.push(parseFloat(i),parseFloat(n),parseFloat(o))}e.vertices=new Float32Array(s);const i=[],n=[],o=t.querySelectorAll("triangles triangle");for(let t=0;t<o.length;t++){const e=o[t],s=e.getAttribute("v1"),r=e.getAttribute("v2"),a=e.getAttribute("v3"),h=e.getAttribute("p1"),c=e.getAttribute("p2"),l=e.getAttribute("p3"),u=e.getAttribute("pid"),p={};p.v1=parseInt(s,10),p.v2=parseInt(r,10),p.v3=parseInt(a,10),n.push(p.v1,p.v2,p.v3),h&&(p.p1=parseInt(h,10)),c&&(p.p2=parseInt(c,10)),l&&(p.p3=parseInt(l,10)),u&&(p.pid=u),0<Object.keys(p).length&&i.push(p)}return e.triangleProperties=i,e.triangles=new Uint32Array(n),e}(h));const l=t.querySelector("components");return l&&(e.components=function(t){const e=[],s=t.querySelectorAll("component");for(let t=0;t<s.length;t++){const r=c(s[t]);e.push(r)}return e}(l)),e}function p(t){const e={unit:t.getAttribute("unit")||"millimeter"},s=t.querySelectorAll("metadata");s&&(e.metadata=function(t){const e={};for(let s=0;s<t.length;s++){const r=t[s],i=r.getAttribute("name");0<=["Title","Designer","Description","Copyright","LicenseTerms","Rating","CreationDate","ModificationDate"].indexOf(i)&&(e[i]=r.textContent)}return e}(s));const r=t.querySelector("resources");r&&(e.resources=function(t){const e={basematerials:{}},s=t.querySelectorAll("basematerials");for(let t=0;t<s.length;t++){const r=i(s[t]);e.basematerials[r.id]=r}e.texture2d={};const r=t.querySelectorAll("texture2d");for(let t=0;t<r.length;t++){const s={id:(h=r[t]).getAttribute("id"),path:h.getAttribute("path"),contenttype:h.getAttribute("contenttype"),tilestyleu:h.getAttribute("tilestyleu"),tilestylev:h.getAttribute("tilestylev"),filter:h.getAttribute("filter")};e.texture2d[s.id]=s}var h;e.colorgroup={};const c=t.querySelectorAll("colorgroup");for(let t=0;t<c.length;t++){const s=o(c[t]);e.colorgroup[s.id]=s}e.pbmetallicdisplayproperties={};const l=t.querySelectorAll("pbmetallicdisplayproperties");for(let t=0;t<l.length;t++){const s=a(l[t]);e.pbmetallicdisplayproperties[s.id]=s}e.texture2dgroup={};const p=t.querySelectorAll("texture2dgroup");for(let t=0;t<p.length;t++){const s=n(p[t]);e.texture2dgroup[s.id]=s}e.object={};const d=t.querySelectorAll("object");for(let t=0;t<d.length;t++){const s=u(d[t]);e.object[s.id]=s}return e}(r));const h=t.querySelector("build");return h&&(e.build=function(t){const e=[],s=t.querySelectorAll("item");for(let t=0;t<s.length;t++){const r=s[t],i={objectId:r.getAttribute("objectid")},n=r.getAttribute("transform");n&&(i.transform=l(n)),e.push(i)}return e}(h)),e}function d(t,e,r,i){const n=t.texid,o=r.resources.texture2d[n];if(o){const t=i[o.path],e=o.contenttype,r=new Blob([t],{type:e}),n=URL.createObjectURL(r),a=s.load(n,(function(){URL.revokeObjectURL(n)}));switch(a.encoding=zt,o.tilestyleu){case"wrap":a.wrapS=G;break;case"mirror":a.wrapS=z;break;case"none":case"clamp":a.wrapS=j;break;default:a.wrapS=G}switch(o.tilestylev){case"wrap":a.wrapT=G;break;case"mirror":a.wrapT=z;break;case"none":case"clamp":a.wrapT=j;break;default:a.wrapT=G}switch(o.filter){case"auto":a.magFilter=X,a.minFilter=K;break;case"linear":a.magFilter=X,a.minFilter=X;break;case"nearest":a.magFilter=V,a.minFilter=V;break;default:a.magFilter=X,a.minFilter=K}return a}return null}function m(t,e,s,r,i,n,o){const a=o.pindex,h={};for(let t=0,s=e.length;t<s;t++){const s=e[t],r=void 0!==s.p1?s.p1:a;void 0===h[r]&&(h[r]=[]),h[r].push(s)}const c=Object.keys(h),l=[];for(let e=0,a=c.length;e<a;e++){const a=c[e],u=h[a],p=b(t.basematerials[a],r,i,n,o,w),d=new Er,m=[],f=s.vertices;for(let t=0,e=u.length;t<e;t++){const e=u[t];m.push(f[3*e.v1+0]),m.push(f[3*e.v1+1]),m.push(f[3*e.v1+2]),m.push(f[3*e.v2+0]),m.push(f[3*e.v2+1]),m.push(f[3*e.v2+2]),m.push(f[3*e.v3+0]),m.push(f[3*e.v3+1]),m.push(f[3*e.v3+2])}d.setAttribute("position",new fr(m,3));const g=new jr(d,p);l.push(g)}return l}function f(t,e,s,r,i,n,o){const a=new Er,h=[],c=[],l=s.vertices,u=t.uvs;for(let t=0,s=e.length;t<s;t++){const s=e[t];h.push(l[3*s.v1+0]),h.push(l[3*s.v1+1]),h.push(l[3*s.v1+2]),h.push(l[3*s.v2+0]),h.push(l[3*s.v2+1]),h.push(l[3*s.v2+2]),h.push(l[3*s.v3+0]),h.push(l[3*s.v3+1]),h.push(l[3*s.v3+2]),c.push(u[2*s.p1+0]),c.push(u[2*s.p1+1]),c.push(u[2*s.p2+0]),c.push(u[2*s.p2+1]),c.push(u[2*s.p3+0]),c.push(u[2*s.p3+1])}a.setAttribute("position",new fr(h,3)),a.setAttribute("uv",new fr(c,2));const p=b(t,r,i,n,o,d),m=new Cc({map:p,flatShading:!0});return new jr(a,m)}function g(t,e,s,r){const i=new Er,n=[],o=[],a=s.vertices,h=t.colors;for(let t=0,s=e.length;t<s;t++){const s=e[t],i=s.v1,c=s.v2,l=s.v3;n.push(a[3*i+0]),n.push(a[3*i+1]),n.push(a[3*i+2]),n.push(a[3*c+0]),n.push(a[3*c+1]),n.push(a[3*c+2]),n.push(a[3*l+0]),n.push(a[3*l+1]),n.push(a[3*l+2]);const u=void 0!==s.p1?s.p1:r.pindex,p=void 0!==s.p2?s.p2:u,d=void 0!==s.p3?s.p3:u;o.push(h[3*u+0]),o.push(h[3*u+1]),o.push(h[3*u+2]),o.push(h[3*p+0]),o.push(h[3*p+1]),o.push(h[3*p+2]),o.push(h[3*d+0]),o.push(h[3*d+1]),o.push(h[3*d+2])}i.setAttribute("position",new fr(n,3)),i.setAttribute("color",new fr(o,3));const c=new Cc({vertexColors:!0,flatShading:!0});return new jr(i,c)}function y(t){const e=new Er;e.setIndex(new or(t.triangles,1)),e.setAttribute("position",new or(t.vertices,3));const s=new Cc({color:16777215,flatShading:!0});return new jr(e,s)}function T(t,e){return void 0!==e.resources.texture2dgroup[t]?"texture":void 0!==e.resources.basematerials[t]?"material":void 0!==e.resources.colorgroup[t]?"vertexColors":"default"===t?"default":void 0}function v(t,e,s,r,i){const n=new ko,o=function(t,e,s,r,i,n){const o=Object.keys(t),a=[];for(let h=0,c=o.length;h<c;h++){const c=o[h],l=t[c];switch(T(c,r)){case"material":const t=m(r.resources.basematerials[c],l,e,s,r,i,n);for(let e=0,s=t.length;e<s;e++)a.push(t[e]);break;case"texture":const o=r.resources.texture2dgroup[c];a.push(f(o,l,e,s,r,i,n));break;case"vertexColors":const h=r.resources.colorgroup[c];a.push(g(h,l,e,n));break;case"default":a.push(y(e));break;default:console.error("THREE.3MFLoader: Unsupported resource type.")}}if(n.name)for(let t=0;t<a.length;t++)a[t].name=n.name;return a}(function(t,e){const s={},r=t.triangleProperties,i=e.pid;for(let t=0,e=r.length;t<e;t++){const e=r[t];let n=void 0!==e.pid?e.pid:i;void 0===n&&(n="default"),void 0===s[n]&&(s[n]=[]),s[n].push(e)}return s}(t,i),t,e,s,r,i);for(let t=0,e=o.length;t<e;t++)n.add(o[t]);return n}function b(t,e,s,r,i,n){return void 0!==t.build||(t.build=n(t,e,s,r,i)),t.build}function w(t,e,s){let r;const i=t.displaypropertiesid,n=s.resources.pbmetallicdisplayproperties;if(null!==i&&void 0!==n[i]){const e=n[i].data[t.index];r=new Ac({flatShading:!0,roughness:e.roughness,metalness:e.metallicness})}else r=new Cc({flatShading:!0});r.name=t.name;const o=t.displaycolor,a=o.substring(0,7);return r.color.setStyle(a),r.color.convertSRGBToLinear(),9===o.length&&(r.opacity=parseInt(o.charAt(7)+o.charAt(8),16)/255),r}function x(t,e,s,r){const i=new ko;for(let n=0;n<t.length;n++){const o=t[n];let a=e[o.objectId];void 0===a&&(I(o.objectId,e,s,r),a=e[o.objectId]);const h=a.clone(),c=o.transform;c&&h.applyMatrix4(c),i.add(h)}return i}function I(t,s,r,i){const n=r.resources.object[t];if(n.mesh){const t=n.mesh;!function(t,s,r){if(!t)return;const i=[],n=Object.keys(t);for(let t=0;t<n.length;t++){const s=n[t];for(let t=0;t<e.availableExtensions.length;t++){const r=e.availableExtensions[t];r.ns===s&&i.push(r)}}for(let e=0;e<i.length;e++){const n=i[e];n.apply(r,t[n.ns],s)}}(r.extensions,t,r.xml),s[n.id]=b(t,s,r,i,n,v)}else{const t=n.components;s[n.id]=b(t,s,r,i,n,x)}n.name&&(s[n.id].name=n.name)}const E=function(t){let e,s,i=null,n=null;const o=[],a=[];let h;const c={},l={};try{i=Em(new Uint8Array(t))}catch(t){if(t instanceof ReferenceError)return console.error("THREE.3MFLoader: fflate missing and file is compressed."),null}for(n in i)n.match(/\_rels\/.rels$/)?e=n:n.match(/3D\/_rels\/.*\.model\.rels$/)?s=n:n.match(/^3D\/.*\.model$/)?o.push(n):n.match(/^3D\/Textures?\/.*/)&&a.push(n);const u=i[e],d=r(Rl.decodeText(u));if(s){const t=i[s];h=r(Rl.decodeText(t))}for(let t=0;t<o.length;t++){const e=o[t],s=i[e],r=Rl.decodeText(s),n=(new DOMParser).parseFromString(r,"application/xml");"model"!==n.documentElement.nodeName.toLowerCase()&&console.error("THREE.3MFLoader: Error loading 3MF - no 3MF document found: ",e);const a=n.querySelector("model"),h={};for(let t=0;t<a.attributes.length;t++){const e=a.attributes[t];e.name.match(/^xmlns:(.+)$/)&&(h[e.value]=RegExp.$1)}const l=p(a);l.xml=a,0<Object.keys(h).length&&(l.extensions=h),c[e]=l}for(let t=0;t<a.length;t++){const e=a[t];l[e]=i[e].buffer}return{rels:d,modelRels:h,model:c,printTicket:{},texture:l}}(t);return function(t,e){const s=new ko,r=function(t){for(let e=0;e<t.length;e++){const s=t[e];if("model"===s.target.split(".").pop().toLowerCase())return s}}(e.rels),i=e.model[r.target.substring(1)].build;for(let e=0;e<i.length;e++){const r=i[e],n=t[r.objectId].clone(),o=r.transform;o&&n.applyMatrix4(o),s.add(n)}return s}(function(t){const e=t.model,s=t.modelRels,r={},i=Object.keys(e),n={};if(s)for(let e=0,r=s.length;e<r;e++){const r=s[e],i=r.target.substring(1);t.texture[i]&&(n[r.target]=t.texture[i])}for(let t=0;t<i.length;t++){const s=e[i[t]],o=Object.keys(s.resources.object);for(let t=0;t<o.length;t++){I(o[t],r,s,n)}}return r}(E),E)}addExtension(t){this.availableExtensions.push(t)}}class Rm extends Qc{constructor(t){super(t)}load(t,e,s,r){const i=this,n=new el(i.manager);n.setPath(i.path),n.setResponseType("arraybuffer"),n.setRequestHeader(i.requestHeader),n.setWithCredentials(i.withCredentials),n.load(t,(function(s){try{e(i.parse(s))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),s,r)}parse(t){function e(t){let e="AMF Material";const r=t.attributes.id.textContent;let i={r:1,g:1,b:1,a:1},n=null;for(let r=0;r<t.childNodes.length;r++){const n=t.childNodes[r];"metadata"===n.nodeName&&void 0!==n.attributes.type?"name"===n.attributes.type.value&&(e=n.textContent):"color"===n.nodeName&&(i=s(n))}return n=new Cc({flatShading:!0,color:new Ae(i.r,i.g,i.b),name:e}),1!==i.a&&(n.transparent=!0,n.opacity=i.a),{id:r,material:n}}function s(t){const e={r:1,g:1,b:1,a:1};for(let s=0;s<t.childNodes.length;s++){const r=t.childNodes[s];"r"===r.nodeName?e.r=r.textContent:"g"===r.nodeName?e.g=r.textContent:"b"===r.nodeName?e.b=r.textContent:"a"===r.nodeName&&(e.a=r.textContent)}return e}function r(t){const e={name:"",triangles:[],materialid:null};let s=t.firstElementChild;for(void 0!==t.attributes.materialid&&(e.materialId=t.attributes.materialid.nodeValue);s;){if("metadata"===s.nodeName)void 0!==s.attributes.type&&"name"===s.attributes.type.value&&(e.name=s.textContent);else if("triangle"===s.nodeName){const t=s.getElementsByTagName("v1")[0].textContent,r=s.getElementsByTagName("v2")[0].textContent,i=s.getElementsByTagName("v3")[0].textContent;e.triangles.push(t,r,i)}s=s.nextElementSibling}return e}function i(t){const e=[],s=[];let r=t.firstElementChild;for(;r;){if("vertex"===r.nodeName){let t=r.firstElementChild;for(;t;){if("coordinates"===t.nodeName){const s=t.getElementsByTagName("x")[0].textContent,r=t.getElementsByTagName("y")[0].textContent,i=t.getElementsByTagName("z")[0].textContent;e.push(s,r,i)}else if("normal"===t.nodeName){const e=t.getElementsByTagName("nx")[0].textContent,r=t.getElementsByTagName("ny")[0].textContent,i=t.getElementsByTagName("nz")[0].textContent;s.push(e,r,i)}t=t.nextElementSibling}}r=r.nextElementSibling}return{vertices:e,normals:s}}function n(t){const e=t.attributes.id.textContent,n={name:"amfobject",meshes:[]};let o=null,a=t.firstElementChild;for(;a;){if("metadata"===a.nodeName)void 0!==a.attributes.type&&"name"===a.attributes.type.value&&(n.name=a.textContent);else if("color"===a.nodeName)o=s(a);else if("mesh"===a.nodeName){let t=a.firstElementChild;const e={vertices:[],normals:[],volumes:[],color:o};for(;t;){if("vertices"===t.nodeName){const s=i(t);e.normals=e.normals.concat(s.normals),e.vertices=e.vertices.concat(s.vertices)}else"volume"===t.nodeName&&e.volumes.push(r(t));t=t.nextElementSibling}n.meshes.push(e)}a=a.nextElementSibling}return{id:e,obj:n}}const o=function(t){let e=new DataView(t);if("PK"===String.fromCharCode(e.getUint8(0),e.getUint8(1))){let s=null,r=null;console.log("THREE.AMFLoader: Loading Zip");try{s=Em(new Uint8Array(t))}catch(t){if(t instanceof ReferenceError)return console.log("THREE.AMFLoader: fflate missing and file is compressed."),null}for(r in s)if(".amf"===r.toLowerCase().slice(-4))break;console.log("THREE.AMFLoader: Trying to load file asset: "+r),e=new DataView(s[r].buffer)}const s=Rl.decodeText(e),r=(new DOMParser).parseFromString(s,"application/xml");return"amf"!==r.documentElement.nodeName.toLowerCase()?(console.log("THREE.AMFLoader: Error loading AMF - no AMF document found."),null):r}(t);let a="",h="";const c=function(t){let e=1,s="millimeter";void 0!==t.documentElement.attributes.unit&&(s=t.documentElement.attributes.unit.value.toLowerCase());const r={millimeter:1,inch:25.4,feet:304.8,meter:1e3,micron:.001};return void 0!==r[s]&&(e=r[s]),console.log("THREE.AMFLoader: Unit scale: "+e),e}(o),l={},u={},p=o.documentElement.childNodes;let d,m;for(d=0;d<p.length;d++){const t=p[d];if("metadata"===t.nodeName)void 0!==t.attributes.type&&("name"===t.attributes.type.value?a=t.textContent:"author"===t.attributes.type.value&&(h=t.textContent));else if("material"===t.nodeName){const s=e(t);l[s.id]=s.material}else if("object"===t.nodeName){const e=n(t);u[e.id]=e.obj}}const f=new ko,g=new Cc({color:11184895,flatShading:!0});f.name=a,f.userData.author=h,f.userData.loader="AMF";for(const t in u){const e=u[t],s=e.meshes,r=new ko;for(r.name=e.name||"",d=0;d<s.length;d++){let t=g;const e=s[d],i=new fr(e.vertices,3);let n=null;if(e.normals.length&&(n=new fr(e.normals,3)),e.color){const s=e.color;t=g.clone(),t.color=new Ae(s.r,s.g,s.b),1!==s.a&&(t.transparent=!0,t.opacity=s.a)}const o=e.volumes;for(m=0;m<o.length;m++){const e=o[m],s=new Er;let a=t;s.setIndex(e.triangles),s.setAttribute("position",i.clone()),n&&s.setAttribute("normal",n.clone()),void 0!==l[e.materialId]&&(a=l[e.materialId]),s.scale(c,c,c),r.add(new jr(s,a.clone()))}}f.add(r)}return f}}class Cm extends Qc{constructor(t){super(t),this.animateBonePositions=!0,this.animateBoneRotations=!0}load(t,e,s,r){const i=this,n=new el(i.manager);n.setPath(i.path),n.setRequestHeader(i.requestHeader),n.setWithCredentials(i.withCredentials),n.load(t,(function(s){try{e(i.parse(s))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),s,r)}parse(t){function e(t,s,r){if("ENDSITE"===r.type)return;const i={time:s,position:new Ge,rotation:new Be};r.frames.push(i);const n=new Be,o=new Ge(1,0,0),a=new Ge(0,1,0),h=new Ge(0,0,1);for(let e=0;e<r.channels.length;e++)switch(r.channels[e]){case"Xposition":i.position.x=parseFloat(t.shift().trim());break;case"Yposition":i.position.y=parseFloat(t.shift().trim());break;case"Zposition":i.position.z=parseFloat(t.shift().trim());break;case"Xrotation":n.setFromAxisAngle(o,parseFloat(t.shift().trim())*Math.PI/180),i.rotation.multiply(n);break;case"Yrotation":n.setFromAxisAngle(a,parseFloat(t.shift().trim())*Math.PI/180),i.rotation.multiply(n);break;case"Zrotation":n.setFromAxisAngle(h,parseFloat(t.shift().trim())*Math.PI/180),i.rotation.multiply(n);break;default:console.warn("THREE.BVHLoader: Invalid channel type.")}for(let i=0;i<r.children.length;i++)e(t,s,r.children[i])}function s(t,e,i){const n={name:"",type:"",frames:[]};i.push(n);let o=e.split(/[\s]+/);"END"===o[0].toUpperCase()&&"SITE"===o[1].toUpperCase()?(n.type="ENDSITE",n.name="ENDSITE"):(n.name=o[1],n.type=o[0].toUpperCase()),"{"!==r(t)&&console.error("THREE.BVHLoader: Expected opening { after type & name"),o=r(t).split(/[\s]+/),"OFFSET"!==o[0]&&console.error("THREE.BVHLoader: Expected OFFSET but got: "+o[0]),4!==o.length&&console.error("THREE.BVHLoader: Invalid number of values for OFFSET.");const a=new Ge(parseFloat(o[1]),parseFloat(o[2]),parseFloat(o[3]));if((isNaN(a.x)||isNaN(a.y)||isNaN(a.z))&&console.error("THREE.BVHLoader: Invalid values of OFFSET."),n.offset=a,"ENDSITE"!==n.type){o=r(t).split(/[\s]+/),"CHANNELS"!==o[0]&&console.error("THREE.BVHLoader: Expected CHANNELS definition.");const e=parseInt(o[1]);n.channels=o.splice(2,e),n.children=[]}for(;;){const e=r(t);if("}"===e)return n;n.children.push(s(t,e,i))}}function r(t){let e;for(;0===(e=t.shift().trim()).length;);return e}const i=this,n=function(t){"HIERARCHY"!==r(t)&&console.error("THREE.BVHLoader: HIERARCHY expected.");const i=[],n=s(t,r(t),i);"MOTION"!==r(t)&&console.error("THREE.BVHLoader: MOTION expected.");let o=r(t).split(/[\s]+/);const a=parseInt(o[1]);isNaN(a)&&console.error("THREE.BVHLoader: Failed to read number of frames."),o=r(t).split(/[\s]+/);const h=parseFloat(o[2]);isNaN(h)&&console.error("THREE.BVHLoader: Failed to read frame time.");for(let s=0;s<a;s++)o=r(t).split(/[\s]+/),e(o,s*h,n);return i}(t.split(/[\r\n]+/g)),o=[];!function t(e,s){const r=new xa;if(s.push(r),r.position.add(e.offset),r.name=e.name,"ENDSITE"!==e.type)for(let i=0;i<e.children.length;i++)r.add(t(e.children[i],s));return r}(n[0],o);const a=function(t){const e=[];for(let s=0;s<t.length;s++){const r=t[s];if("ENDSITE"===r.type)continue;const n=[],o=[],a=[];for(let t=0;t<r.frames.length;t++){const e=r.frames[t];n.push(e.time),o.push(e.position.x+r.offset.x),o.push(e.position.y+r.offset.y),o.push(e.position.z+r.offset.z),a.push(e.rotation.x),a.push(e.rotation.y),a.push(e.rotation.z),a.push(e.rotation.w)}i.animateBonePositions&&e.push(new Xc(".bones["+r.name+"].position",n,o)),i.animateBoneRotations&&e.push(new Wc(".bones["+r.name+"].quaternion",n,a))}return new qc("animation",-1,e)}(n);return{skeleton:new Aa(o),clip:a}}}class Om extends nl{constructor(t){super(t)}parse(t){const e=0,s=1,r=2,i=3,n=9,o=10,a=11,h=48,c=4,l=0,u=1,p=2,d=3;t.length<19&&console.error("THREE.TGALoader: Not enough data to contain header.");let m=0;const f=new Uint8Array(t),g={id_length:f[m++],colormap_type:f[m++],image_type:f[m++],colormap_index:f[m++]|f[m++]<<8,colormap_length:f[m++]|f[m++]<<8,colormap_size:f[m++],origin:[f[m++]|f[m++]<<8,f[m++]|f[m++]<<8],width:f[m++]|f[m++]<<8,height:f[m++]|f[m++]<<8,pixel_size:f[m++],flags:f[m++]};!function(t){switch(t.image_type){case s:case n:(t.colormap_length>256||24!==t.colormap_size||1!==t.colormap_type)&&console.error("THREE.TGALoader: Invalid type colormap data for indexed type.");break;case r:case i:case o:case a:t.colormap_type&&console.error("THREE.TGALoader: Invalid type colormap data for colormap type.");break;case e:console.error("THREE.TGALoader: No data.");default:console.error('THREE.TGALoader: Invalid type "%s".',t.image_type)}(t.width<=0||t.height<=0)&&console.error("THREE.TGALoader: Invalid image size."),8!==t.pixel_size&&16!==t.pixel_size&&24!==t.pixel_size&&32!==t.pixel_size&&console.error('THREE.TGALoader: Invalid pixel size "%s".',t.pixel_size)}(g),g.id_length+m>t.length&&console.error("THREE.TGALoader: No data."),m+=g.id_length;let y=!1,T=!1,v=!1;switch(g.image_type){case n:y=!0,T=!0;break;case s:T=!0;break;case o:y=!0;break;case r:break;case a:y=!0,v=!0;break;case i:v=!0}const b=new Uint8Array(g.width*g.height*4),w=function(t,e,s,r,i){let n,o;const a=s.pixel_size>>3,h=s.width*s.height*a;if(e&&(o=i.subarray(r,r+=s.colormap_length*(s.colormap_size>>3))),t){let t,e,s;n=new Uint8Array(h);let o=0;const c=new Uint8Array(a);for(;o<h;)if(t=i[r++],e=1+(127&t),128&t){for(s=0;s<a;++s)c[s]=i[r++];for(s=0;s<e;++s)n.set(c,o+s*a);o+=a*e}else{for(e*=a,s=0;s<e;++s)n[o+s]=i[r++];o+=e}}else n=i.subarray(r,r+=e?s.width*s.height:h);return{pixel_data:n,palettes:o}}(y,T,g,m,f);return function(t,e,s,r,i){let n,o,a,m,f,y;switch((g.flags&h)>>c){default:case p:n=0,a=1,f=e,o=0,m=1,y=s;break;case l:n=0,a=1,f=e,o=s-1,m=-1,y=-1;break;case d:n=e-1,a=-1,f=-1,o=0,m=1,y=s;break;case u:n=e-1,a=-1,f=-1,o=s-1,m=-1,y=-1}if(v)switch(g.pixel_size){case 8:!function(t,e,s,r,i,n,o,a){let h,c,l,u=0;const p=g.width;for(l=e;l!==r;l+=s)for(c=i;c!==o;c+=n,u++)h=a[u],t[4*(c+p*l)+0]=h,t[4*(c+p*l)+1]=h,t[4*(c+p*l)+2]=h,t[4*(c+p*l)+3]=255}(t,o,m,y,n,a,f,r);break;case 16:!function(t,e,s,r,i,n,o,a){let h,c,l=0;const u=g.width;for(c=e;c!==r;c+=s)for(h=i;h!==o;h+=n,l+=2)t[4*(h+u*c)+0]=a[l+0],t[4*(h+u*c)+1]=a[l+0],t[4*(h+u*c)+2]=a[l+0],t[4*(h+u*c)+3]=a[l+1]}(t,o,m,y,n,a,f,r);break;default:console.error("THREE.TGALoader: Format not supported.")}else switch(g.pixel_size){case 8:!function(t,e,s,r,i,n,o,a,h){const c=h;let l,u,p,d=0;const m=g.width;for(p=e;p!==r;p+=s)for(u=i;u!==o;u+=n,d++)l=a[d],t[4*(u+m*p)+3]=255,t[4*(u+m*p)+2]=c[3*l+0],t[4*(u+m*p)+1]=c[3*l+1],t[4*(u+m*p)+0]=c[3*l+2]}(t,o,m,y,n,a,f,r,i);break;case 16:!function(t,e,s,r,i,n,o,a){let h,c,l,u=0;const p=g.width;for(l=e;l!==r;l+=s)for(c=i;c!==o;c+=n,u+=2)h=a[u+0]+(a[u+1]<<8),t[4*(c+p*l)+0]=(31744&h)>>7,t[4*(c+p*l)+1]=(992&h)>>2,t[4*(c+p*l)+2]=(31&h)<<3,t[4*(c+p*l)+3]=32768&h?0:255}(t,o,m,y,n,a,f,r);break;case 24:!function(t,e,s,r,i,n,o,a){let h,c,l=0;const u=g.width;for(c=e;c!==r;c+=s)for(h=i;h!==o;h+=n,l+=3)t[4*(h+u*c)+3]=255,t[4*(h+u*c)+2]=a[l+0],t[4*(h+u*c)+1]=a[l+1],t[4*(h+u*c)+0]=a[l+2]}(t,o,m,y,n,a,f,r);break;case 32:!function(t,e,s,r,i,n,o,a){let h,c,l=0;const u=g.width;for(c=e;c!==r;c+=s)for(h=i;h!==o;h+=n,l+=4)t[4*(h+u*c)+2]=a[l+0],t[4*(h+u*c)+1]=a[l+1],t[4*(h+u*c)+0]=a[l+2],t[4*(h+u*c)+3]=a[l+3]}(t,o,m,y,n,a,f,r);break;default:console.error("THREE.TGALoader: Format not supported.")}}(b,g.width,g.height,w.pixel_data,w.palettes),{data:b,width:g.width,height:g.height,flipY:!0,generateMipmaps:!0,minFilter:K}}}class _m extends Qc{constructor(t){super(t)}load(t,e,s,r){const i=this,n=""===i.path?Rl.extractUrlBase(t):i.path,o=new el(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(t,(function(s){try{e(i.parse(s,n))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),s,r)}parse(t,e){function s(t,e){const s=[],r=t.childNodes;for(let t=0,i=r.length;t<i;t++){const i=r[t];i.nodeName===e&&s.push(i)}return s}function r(t){if(0===t.length)return[];const e=t.trim().split(/\s+/),s=new Array(e.length);for(let t=0,r=e.length;t<r;t++)s[t]=e[t];return s}function i(t){if(0===t.length)return[];const e=t.trim().split(/\s+/),s=new Array(e.length);for(let t=0,r=e.length;t<r;t++)s[t]=parseFloat(e[t]);return s}function n(t){if(0===t.length)return[];const e=t.trim().split(/\s+/),s=new Array(e.length);for(let t=0,r=e.length;t<r;t++)s[t]=parseInt(e[t]);return s}function o(t){return t.substring(1)}function a(t){return 0===Object.keys(t).length}function h(t){return void 0!==t&&!0===t.hasAttribute("meter")?parseFloat(t.getAttribute("meter")):1}function c(t){return void 0!==t?t.textContent:"Y_UP"}function l(t,e,r,i){const n=s(t,e)[0];if(void 0!==n){const t=s(n,r);for(let e=0;e<t.length;e++)i(t[e])}}function u(t,e){for(const s in t){t[s].build=e(t[s])}}function p(t,e){return void 0!==t.build||(t.build=e(t)),t.build}function d(t){const e={inputs:{}};for(let s=0,r=t.childNodes.length;s<r;s++){const r=t.childNodes[s];if(1===r.nodeType)switch(r.nodeName){case"input":const t=o(r.getAttribute("source")),s=r.getAttribute("semantic");e.inputs[s]=t}}return e}function m(t){const e={};let s=t.getAttribute("target").split("/");const r=s.shift();let i=s.shift();const n=-1!==i.indexOf("("),a=-1!==i.indexOf(".");if(a)s=i.split("."),i=s.shift(),e.member=s.shift();else if(n){const t=i.split("(");i=t.shift();for(let e=0;e<t.length;e++)t[e]=parseInt(t[e].replace(/\)/,""));e.indices=t}return e.id=r,e.sid=i,e.arraySyntax=n,e.memberSyntax=a,e.sampler=o(t.getAttribute("source")),e}function f(t){const e=[],s=t.channels,r=t.samplers,i=t.sources;for(const t in s)if(s.hasOwnProperty(t)){const n=s[t],o=r[n.sampler],a=o.inputs.INPUT,h=o.inputs.OUTPUT;w(y(n,i[a],i[h]),e)}return e}function g(t){return p(Qt.animations[t],f)}function y(t,e,s){const r=Qt.nodes[t.id],i=Ut(r.id),n=r.transforms[t.sid],o=r.matrix.clone().transpose();let a,h,c,l,u,p;const d={};switch(n){case"matrix":for(c=0,l=e.array.length;c<l;c++)if(a=e.array[c],h=c*s.stride,void 0===d[a]&&(d[a]={}),!0===t.arraySyntax){const e=s.array[h],r=t.indices[0]+4*t.indices[1];d[a][r]=e}else for(u=0,p=s.stride;u<p;u++)d[a][u]=s.array[h+u];break;case"translate":case"rotate":case"scale":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',n)}const m=function(t,e){const s=[];for(const e in t)s.push({time:parseFloat(e),value:t[e]});s.sort(r);for(let t=0;t<16;t++)x(s,t,e.elements[t]);return s;function r(t,e){return t.time-e.time}}(d,o);return{name:i.uuid,keyframes:m}}const T=new Ge,v=new Ge,b=new Be;function w(t,e){const s=t.keyframes,r=t.name,i=[],n=[],o=[],a=[];for(let t=0,e=s.length;t<e;t++){const e=s[t],r=e.time,h=e.value;Rt.fromArray(h).transpose(),Rt.decompose(T,b,v),i.push(r),n.push(T.x,T.y,T.z),o.push(b.x,b.y,b.z,b.w),a.push(v.x,v.y,v.z)}return n.length>0&&e.push(new Xc(r+".position",i,n)),o.length>0&&e.push(new Wc(r+".quaternion",i,o)),a.length>0&&e.push(new Xc(r+".scale",i,a)),e}function x(t,e,s){let r,i,n,o=!0;for(i=0,n=t.length;i<n;i++)r=t[i],void 0===r.value[e]?r.value[e]=null:o=!1;if(!0===o)for(i=0,n=t.length;i<n;i++)r=t[i],r.value[e]=s;else!function(t,e){let s,r;for(let i=0,n=t.length;i<n;i++){const n=t[i];if(null===n.value[e]){if(s=I(t,i,e),r=E(t,i,e),null===s){n.value[e]=r.value[e];continue}if(null===r){n.value[e]=s.value[e];continue}S(n,s,r,e)}}}(t,e)}function I(t,e,s){for(;e>=0;){const r=t[e];if(null!==r.value[s])return r;e--}return null}function E(t,e,s){for(;e<t.length;){const r=t[e];if(null!==r.value[s])return r;e++}return null}function S(t,e,s,r){s.time-e.time!=0?t.value[r]=(t.time-e.time)*(s.value[r]-e.value[r])/(s.time-e.time)+e.value[r]:t.value[r]=e.value[r]}function A(t){const e=[],s=t.name,r=t.end-t.start||-1,i=t.animations;for(let t=0,s=i.length;t<s;t++){const s=g(i[t]);for(let t=0,r=s.length;t<r;t++)e.push(s[t])}return new qc(s,r,e)}function R(t){return p(Qt.clips[t],A)}function C(t){const e={sources:{}};for(let s=0,r=t.childNodes.length;s<r;s++){const r=t.childNodes[s];if(1===r.nodeType)switch(r.nodeName){case"bind_shape_matrix":e.bindShapeMatrix=i(r.textContent);break;case"source":const t=r.getAttribute("id");e.sources[t]=at(r);break;case"joints":e.joints=O(r);break;case"vertex_weights":e.vertexWeights=_(r)}}return e}function O(t){const e={inputs:{}};for(let s=0,r=t.childNodes.length;s<r;s++){const r=t.childNodes[s];if(1===r.nodeType)switch(r.nodeName){case"input":const t=r.getAttribute("semantic"),s=o(r.getAttribute("source"));e.inputs[t]=s}}return e}function _(t){const e={inputs:{}};for(let s=0,r=t.childNodes.length;s<r;s++){const r=t.childNodes[s];if(1===r.nodeType)switch(r.nodeName){case"input":const t=r.getAttribute("semantic"),s=o(r.getAttribute("source")),i=parseInt(r.getAttribute("offset"));e.inputs[t]={id:s,offset:i};break;case"vcount":e.vcount=n(r.textContent);break;case"v":e.v=n(r.textContent)}}return e}function D(t){const e={id:t.id},s=Qt.geometries[e.id];return void 0!==t.skin&&(e.skin=function(t){const e=4,s={joints:[],indices:{array:[],stride:e},weights:{array:[],stride:e}},r=t.sources,i=t.vertexWeights,n=i.vcount,o=i.v,a=i.inputs.JOINT.offset,h=i.inputs.WEIGHT.offset,c=t.sources[t.joints.inputs.JOINT],l=t.sources[t.joints.inputs.INV_BIND_MATRIX],u=r[i.inputs.WEIGHT.id].array;let p,d,m,f=0;for(p=0,m=n.length;p<m;p++){const t=n[p],r=[];for(d=0;d<t;d++){const t=o[f+a],e=u[o[f+h]];r.push({index:t,weight:e}),f+=2}for(r.sort(g),d=0;d<e;d++){const t=r[d];void 0!==t?(s.indices.array.push(t.index),s.weights.array.push(t.weight)):(s.indices.array.push(0),s.weights.array.push(0))}}t.bindShapeMatrix?s.bindMatrix=(new Ts).fromArray(t.bindShapeMatrix).transpose():s.bindMatrix=(new Ts).identity();for(p=0,m=c.array.length;p<m;p++){const t=c.array[p],e=(new Ts).fromArray(l.array,p*l.stride).transpose();s.joints.push({name:t,boneInverse:e})}return s;function g(t,e){return e.weight-t.weight}}(t.skin),s.sources.skinIndices=e.skin.indices,s.sources.skinWeights=e.skin.weights),e}function F(t){return void 0!==t.build?t.build:t.init_from}function M(t){const e=Qt.images[t];return void 0!==e?p(e,F):(console.warn("THREE.ColladaLoader: Couldn't find image with ID:",t),null)}function P(t){const e={surfaces:{},samplers:{}};for(let s=0,r=t.childNodes.length;s<r;s++){const r=t.childNodes[s];if(1===r.nodeType)switch(r.nodeName){case"newparam":N(r,e);break;case"technique":e.technique=U(r);break;case"extra":e.extra=Y(r)}}return e}function N(t,e){const s=t.getAttribute("sid");for(let r=0,i=t.childNodes.length;r<i;r++){const i=t.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"surface":e.surfaces[s]=L(i);break;case"sampler2D":e.samplers[s]=k(i)}}}function L(t){const e={};for(let s=0,r=t.childNodes.length;s<r;s++){const r=t.childNodes[s];if(1===r.nodeType)switch(r.nodeName){case"init_from":e.init_from=r.textContent}}return e}function k(t){const e={};for(let s=0,r=t.childNodes.length;s<r;s++){const r=t.childNodes[s];if(1===r.nodeType)switch(r.nodeName){case"source":e.source=r.textContent}}return e}function U(t){const e={};for(let s=0,r=t.childNodes.length;s<r;s++){const r=t.childNodes[s];if(1===r.nodeType)switch(r.nodeName){case"constant":case"lambert":case"blinn":case"phong":e.type=r.nodeName,e.parameters=H(r);break;case"extra":e.extra=Y(r)}}return e}function H(t){const e={};for(let s=0,r=t.childNodes.length;s<r;s++){const r=t.childNodes[s];if(1===r.nodeType)switch(r.nodeName){case"emission":case"diffuse":case"specular":case"bump":case"ambient":case"shininess":case"transparency":e[r.nodeName]=B(r);break;case"transparent":e[r.nodeName]={opaque:r.hasAttribute("opaque")?r.getAttribute("opaque"):"A_ONE",data:B(r)}}}return e}function B(t){const e={};for(let s=0,r=t.childNodes.length;s<r;s++){const r=t.childNodes[s];if(1===r.nodeType)switch(r.nodeName){case"color":e[r.nodeName]=i(r.textContent);break;case"float":e[r.nodeName]=parseFloat(r.textContent);break;case"texture":e[r.nodeName]={id:r.getAttribute("texture"),extra:z(r)}}}return e}function z(t){const e={technique:{}};for(let s=0,r=t.childNodes.length;s<r;s++){const r=t.childNodes[s];if(1===r.nodeType)switch(r.nodeName){case"extra":V(r,e)}}return e}function V(t,e){for(let s=0,r=t.childNodes.length;s<r;s++){const r=t.childNodes[s];if(1===r.nodeType)switch(r.nodeName){case"technique":W(r,e)}}}function W(t,e){for(let s=0,r=t.childNodes.length;s<r;s++){const r=t.childNodes[s];if(1===r.nodeType)switch(r.nodeName){case"repeatU":case"repeatV":case"offsetU":case"offsetV":e.technique[r.nodeName]=parseFloat(r.textContent);break;case"wrapU":case"wrapV":"TRUE"===r.textContent.toUpperCase()?e.technique[r.nodeName]=1:"FALSE"===r.textContent.toUpperCase()?e.technique[r.nodeName]=0:e.technique[r.nodeName]=parseInt(r.textContent);break;case"bump":e[r.nodeName]=q(r)}}}function Y(t){const e={};for(let s=0,r=t.childNodes.length;s<r;s++){const r=t.childNodes[s];if(1===r.nodeType)switch(r.nodeName){case"technique":e.technique=X(r)}}return e}function X(t){const e={};for(let s=0,r=t.childNodes.length;s<r;s++){const r=t.childNodes[s];if(1===r.nodeType)switch(r.nodeName){case"double_sided":e[r.nodeName]=parseInt(r.textContent);break;case"bump":e[r.nodeName]=q(r)}}return e}function q(t){const e={};for(let s=0,r=t.childNodes.length;s<r;s++){const r=t.childNodes[s];if(1===r.nodeType)switch(r.nodeName){case"texture":e[r.nodeName]={id:r.getAttribute("texture"),texcoord:r.getAttribute("texcoord"),extra:z(r)}}}return e}function K(t){return t}function J(t){const e=(s=t.url,p(Qt.effects[s],K));var s;const r=e.profile.technique;let i;switch(r.type){case"phong":case"blinn":i=new Cc;break;case"lambert":i=new Dc;break;default:i=new rr}function n(t,s=null){const r=e.profile.samplers[t.id];let i=null;if(void 0!==r){i=M(e.profile.surfaces[r.source].init_from)}else console.warn("THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530)."),i=M(t.id);if(null!==i){const e=function(t){let e,s=t.slice(2+(t.lastIndexOf(".")-1>>>0));switch(s=s.toLowerCase(),s){case"tga":e=qt;break;default:e=Xt}return e}(i);if(void 0!==e){const r=e.load(i),n=t.extra;if(void 0!==n&&void 0!==n.technique&&!1===a(n.technique)){const t=n.technique;r.wrapS=t.wrapU?G:j,r.wrapT=t.wrapV?G:j,r.offset.set(t.offsetU||0,t.offsetV||0),r.repeat.set(t.repeatU||1,t.repeatV||1)}else r.wrapS=G,r.wrapT=G;return null!==s&&(r.encoding=s),r}return console.warn("THREE.ColladaLoader: Loader for texture %s not found.",i),null}return console.warn("THREE.ColladaLoader: Couldn't create texture with ID:",t.id),null}i.name=t.name||"";const o=r.parameters;for(const t in o){const e=o[t];switch(t){case"diffuse":e.color&&i.color.fromArray(e.color),e.texture&&(i.map=n(e.texture,zt));break;case"specular":e.color&&i.specular&&i.specular.fromArray(e.color),e.texture&&(i.specularMap=n(e.texture));break;case"bump":e.texture&&(i.normalMap=n(e.texture));break;case"ambient":e.texture&&(i.lightMap=n(e.texture,zt));break;case"shininess":e.float&&i.shininess&&(i.shininess=e.float);break;case"emission":e.color&&i.emissive&&i.emissive.fromArray(e.color),e.texture&&(i.emissiveMap=n(e.texture,zt))}}i.color.convertSRGBToLinear(),i.specular&&i.specular.convertSRGBToLinear(),i.emissive&&i.emissive.convertSRGBToLinear();let h=o.transparent,c=o.transparency;if(void 0===c&&h&&(c={float:1}),void 0===h&&c&&(h={opaque:"A_ONE",data:{color:[1,1,1,1]}}),h&&c)if(h.data.texture)i.transparent=!0;else{const t=h.data.color;switch(h.opaque){case"A_ONE":i.opacity=t[3]*c.float;break;case"RGB_ZERO":i.opacity=1-t[0]*c.float;break;case"A_ZERO":i.opacity=1-t[3]*c.float;break;case"RGB_ONE":i.opacity=t[0]*c.float;break;default:console.warn('THREE.ColladaLoader: Invalid opaque type "%s" of transparent tag.',h.opaque)}i.opacity<1&&(i.transparent=!0)}if(void 0!==r.extra&&void 0!==r.extra.technique){const t=r.extra.technique;for(const e in t){const s=t[e];switch(e){case"double_sided":i.side=1===s?2:0;break;case"bump":i.normalMap=n(s.texture),i.normalScale=new le(1,1)}}}return i}function $(t){return p(Qt.materials[t],J)}function Z(t){for(let e=0;e<t.childNodes.length;e++){const s=t.childNodes[e];switch(s.nodeName){case"technique_common":return Q(s)}}return{}}function Q(t){const e={};for(let s=0;s<t.childNodes.length;s++){const r=t.childNodes[s];switch(r.nodeName){case"perspective":case"orthographic":e.technique=r.nodeName,e.parameters=tt(r)}}return e}function tt(t){const e={};for(let s=0;s<t.childNodes.length;s++){const r=t.childNodes[s];switch(r.nodeName){case"xfov":case"yfov":case"xmag":case"ymag":case"znear":case"zfar":case"aspect_ratio":e[r.nodeName]=parseFloat(r.textContent)}}return e}function et(t){let e;switch(t.optics.technique){case"perspective":e=new Jr(t.optics.parameters.yfov,t.optics.parameters.aspect_ratio,t.optics.parameters.znear,t.optics.parameters.zfar);break;case"orthographic":let s=t.optics.parameters.ymag,r=t.optics.parameters.xmag;const i=t.optics.parameters.aspect_ratio;r=void 0===r?s*i:r,s=void 0===s?r/i:s,r*=.5,s*=.5,e=new bi(-r,r,s,-s,t.optics.parameters.znear,t.optics.parameters.zfar);break;default:e=new Jr}return e.name=t.name||"",e}function st(t){const e=Qt.cameras[t];return void 0!==e?p(e,et):(console.warn("THREE.ColladaLoader: Couldn't find camera with ID:",t),null)}function rt(t){const e={};for(let s=0,r=t.childNodes.length;s<r;s++){const r=t.childNodes[s];if(1===r.nodeType)switch(r.nodeName){case"directional":case"point":case"spot":case"ambient":e.technique=r.nodeName,e.parameters=it(r)}}return e}function it(t){const e={};for(let s=0,r=t.childNodes.length;s<r;s++){const r=t.childNodes[s];if(1===r.nodeType)switch(r.nodeName){case"color":const t=i(r.textContent);e.color=(new Ae).fromArray(t).convertSRGBToLinear();break;case"falloff_angle":e.falloffAngle=parseFloat(r.textContent);break;case"quadratic_attenuation":const s=parseFloat(r.textContent);e.distance=s?Math.sqrt(1/s):0}}return e}function nt(t){let e;switch(t.technique){case"directional":e=new wl;break;case"point":e=new vl;break;case"spot":e=new ml;break;case"ambient":e=new xl}return t.parameters.color&&e.color.copy(t.parameters.color),t.parameters.distance&&(e.distance=t.parameters.distance),e}function ot(t){const e=Qt.lights[t];return void 0!==e?p(e,nt):(console.warn("THREE.ColladaLoader: Couldn't find light with ID:",t),null)}function at(t){const e={array:[],stride:3};for(let n=0;n<t.childNodes.length;n++){const o=t.childNodes[n];if(1===o.nodeType)switch(o.nodeName){case"float_array":e.array=i(o.textContent);break;case"Name_array":e.array=r(o.textContent);break;case"technique_common":const t=s(o,"accessor")[0];void 0!==t&&(e.stride=parseInt(t.getAttribute("stride")))}}return e}function ht(t){const e={};for(let s=0;s<t.childNodes.length;s++){const r=t.childNodes[s];1===r.nodeType&&(e[r.getAttribute("semantic")]=o(r.getAttribute("source")))}return e}function ct(t){const e={type:t.nodeName,material:t.getAttribute("material"),count:parseInt(t.getAttribute("count")),inputs:{},stride:0,hasUV:!1};for(let s=0,r=t.childNodes.length;s<r;s++){const r=t.childNodes[s];if(1===r.nodeType)switch(r.nodeName){case"input":const t=o(r.getAttribute("source")),s=r.getAttribute("semantic"),i=parseInt(r.getAttribute("offset")),a=parseInt(r.getAttribute("set")),h=a>0?s+a:s;e.inputs[h]={id:t,offset:i},e.stride=Math.max(e.stride,i+1),"TEXCOORD"===s&&(e.hasUV=!0);break;case"vcount":e.vcount=n(r.textContent);break;case"p":e.p=n(r.textContent)}}return e}function lt(t){let e=0;for(let s=0,r=t.length;s<r;s++){!0===t[s].hasUV&&e++}e>0&&e<t.length&&(t.uvsNeedsFix=!0)}function ut(t){const e={},s=t.sources,r=t.vertices,i=t.primitives;if(0===i.length)return{};const n=function(t){const e={};for(let s=0;s<t.length;s++){const r=t[s];void 0===e[r.type]&&(e[r.type]=[]),e[r.type].push(r)}return e}(i);for(const t in n){const i=n[t];lt(i),e[t]=pt(i,s,r)}return e}function pt(t,e,s){const r={},i={array:[],stride:0},n={array:[],stride:0},o={array:[],stride:0},a={array:[],stride:0},h={array:[],stride:0},c=[],l=4,u=[],p=4,d=new Er,m=[];let f=0;for(let r=0;r<t.length;r++){const l=t[r],p=l.inputs;let g=0;switch(l.type){case"lines":case"linestrips":g=2*l.count;break;case"triangles":g=3*l.count;break;case"polylist":for(let t=0;t<l.count;t++){const e=l.vcount[t];switch(e){case 3:g+=3;break;case 4:g+=6;break;default:g+=3*(e-2)}}break;default:console.warn("THREE.ColladaLoader: Unknow primitive type:",l.type)}d.addGroup(f,g,r),f+=g,l.material&&m.push(l.material);for(const r in p){const d=p[r];switch(r){case"VERTEX":for(const r in s){const p=s[r];switch(r){case"POSITION":const s=i.array.length;if(dt(l,e[p],d.offset,i.array),i.stride=e[p].stride,e.skinWeights&&e.skinIndices&&(dt(l,e.skinIndices,d.offset,c),dt(l,e.skinWeights,d.offset,u)),!1===l.hasUV&&!0===t.uvsNeedsFix){const t=(i.array.length-s)/i.stride;for(let e=0;e<t;e++)o.array.push(0,0)}break;case"NORMAL":dt(l,e[p],d.offset,n.array),n.stride=e[p].stride;break;case"COLOR":dt(l,e[p],d.offset,h.array),h.stride=e[p].stride;break;case"TEXCOORD":dt(l,e[p],d.offset,o.array),o.stride=e[p].stride;break;case"TEXCOORD1":dt(l,e[p],d.offset,a.array),o.stride=e[p].stride;break;default:console.warn('THREE.ColladaLoader: Semantic "%s" not handled in geometry build process.',r)}}break;case"NORMAL":dt(l,e[d.id],d.offset,n.array),n.stride=e[d.id].stride;break;case"COLOR":dt(l,e[d.id],d.offset,h.array,!0),h.stride=e[d.id].stride;break;case"TEXCOORD":dt(l,e[d.id],d.offset,o.array),o.stride=e[d.id].stride;break;case"TEXCOORD1":dt(l,e[d.id],d.offset,a.array),a.stride=e[d.id].stride}}}return i.array.length>0&&d.setAttribute("position",new fr(i.array,i.stride)),n.array.length>0&&d.setAttribute("normal",new fr(n.array,n.stride)),h.array.length>0&&d.setAttribute("color",new fr(h.array,h.stride)),o.array.length>0&&d.setAttribute("uv",new fr(o.array,o.stride)),a.array.length>0&&d.setAttribute("uv2",new fr(a.array,a.stride)),c.length>0&&d.setAttribute("skinIndex",new fr(c,l)),u.length>0&&d.setAttribute("skinWeight",new fr(u,p)),r.data=d,r.type=t[0].type,r.materialKeys=m,r}function dt(t,e,s,r,i=!1){const n=t.p,o=t.stride,a=t.vcount;function h(t){let e=n[t+s]*l;const o=e+l;for(;e<o;e++)r.push(c[e]);if(i){const t=r.length-l-1;Kt.setRGB(r[t+0],r[t+1],r[t+2]).convertSRGBToLinear(),r[t+0]=Kt.r,r[t+1]=Kt.g,r[t+2]=Kt.b}}const c=e.array,l=e.stride;if(void 0!==t.vcount){let t=0;for(let e=0,s=a.length;e<s;e++){const s=a[e];if(4===s){const e=t+1*o,s=t+2*o,r=t+3*o;h(t+0*o),h(e),h(r),h(e),h(s),h(r)}else if(3===s){const e=t+1*o,s=t+2*o;h(t+0*o),h(e),h(s)}else if(s>4)for(let e=1,r=s-2;e<=r;e++){const s=t+o*e,r=t+o*(e+1);h(t+0*o),h(s),h(r)}t+=o*s}}else for(let t=0,e=n.length;t<e;t+=o)h(t)}function mt(t){return p(Qt.geometries[t],ut)}function ft(t){return void 0!==t.build?t.build:t}function gt(t,e){for(let s=0;s<t.childNodes.length;s++){const r=t.childNodes[s];if(1===r.nodeType)switch(r.nodeName){case"joint":e.joints[r.getAttribute("sid")]=yt(r);break;case"link":e.links.push(vt(r))}}}function yt(t){let e;for(let s=0;s<t.childNodes.length;s++){const r=t.childNodes[s];if(1===r.nodeType)switch(r.nodeName){case"prismatic":case"revolute":e=Tt(r)}}return e}function Tt(t){const e={sid:t.getAttribute("sid"),name:t.getAttribute("name")||"",axis:new Ge,limits:{min:0,max:0},type:t.nodeName,static:!1,zeroPosition:0,middlePosition:0};for(let s=0;s<t.childNodes.length;s++){const r=t.childNodes[s];if(1===r.nodeType)switch(r.nodeName){case"axis":const t=i(r.textContent);e.axis.fromArray(t);break;case"limits":const s=r.getElementsByTagName("max")[0],n=r.getElementsByTagName("min")[0];e.limits.max=parseFloat(s.textContent),e.limits.min=parseFloat(n.textContent)}}return e.limits.min>=e.limits.max&&(e.static=!0),e.middlePosition=(e.limits.min+e.limits.max)/2,e}function vt(t){const e={sid:t.getAttribute("sid"),name:t.getAttribute("name")||"",attachments:[],transforms:[]};for(let s=0;s<t.childNodes.length;s++){const r=t.childNodes[s];if(1===r.nodeType)switch(r.nodeName){case"attachment_full":e.attachments.push(bt(r));break;case"matrix":case"translate":case"rotate":e.transforms.push(wt(r))}}return e}function bt(t){const e={joint:t.getAttribute("joint").split("/").pop(),transforms:[],links:[]};for(let s=0;s<t.childNodes.length;s++){const r=t.childNodes[s];if(1===r.nodeType)switch(r.nodeName){case"link":e.links.push(vt(r));break;case"matrix":case"translate":case"rotate":e.transforms.push(wt(r))}}return e}function wt(t){const e={type:t.nodeName},s=i(t.textContent);switch(e.type){case"matrix":e.obj=new Ts,e.obj.fromArray(s).transpose();break;case"translate":e.obj=new Ge,e.obj.fromArray(s);break;case"rotate":e.obj=new Ge,e.obj.fromArray(s),e.angle=ce.degToRad(s[3])}return e}function xt(t,e){for(let s=0;s<t.childNodes.length;s++){const r=t.childNodes[s];if(1===r.nodeType)switch(r.nodeName){case"technique_common":It(r,e)}}}function It(t,e){for(let s=0;s<t.childNodes.length;s++){const r=t.childNodes[s];if(1===r.nodeType)switch(r.nodeName){case"inertia":e.inertia=i(r.textContent);break;case"mass":e.mass=i(r.textContent)[0]}}}function Et(t){const e={target:t.getAttribute("target").split("/").pop()};for(let s=0;s<t.childNodes.length;s++){const r=t.childNodes[s];if(1===r.nodeType)switch(r.nodeName){case"axis":const t=r.getElementsByTagName("param")[0];e.axis=t.textContent;const s=e.axis.split("inst_").pop().split("axis")[0];e.jointIndex=s.substring(0,s.length-1)}}return e}function St(t){return void 0!==t.build?t.build:t}function At(t){const e=[],s=jt.querySelector('[id="'+t.id+'"]');for(let t=0;t<s.childNodes.length;t++){const r=s.childNodes[t];if(1!==r.nodeType)continue;let n,o;switch(r.nodeName){case"matrix":n=i(r.textContent);const t=(new Ts).fromArray(n).transpose();e.push({sid:r.getAttribute("sid"),type:r.nodeName,obj:t});break;case"translate":case"scale":n=i(r.textContent),o=(new Ge).fromArray(n),e.push({sid:r.getAttribute("sid"),type:r.nodeName,obj:o});break;case"rotate":n=i(r.textContent),o=(new Ge).fromArray(n);const s=ce.degToRad(n[3]);e.push({sid:r.getAttribute("sid"),type:r.nodeName,obj:o,angle:s})}}return e}const Rt=new Ts,Ct=new Ge;function Ot(t){const e={name:t.getAttribute("name")||"",type:t.getAttribute("type"),id:t.getAttribute("id"),sid:t.getAttribute("sid"),matrix:new Ts,nodes:[],instanceCameras:[],instanceControllers:[],instanceLights:[],instanceGeometries:[],instanceNodes:[],transforms:{}};for(let s=0;s<t.childNodes.length;s++){const r=t.childNodes[s];if(1!==r.nodeType)continue;let n;switch(r.nodeName){case"node":e.nodes.push(r.getAttribute("id")),Ot(r);break;case"instance_camera":e.instanceCameras.push(o(r.getAttribute("url")));break;case"instance_controller":e.instanceControllers.push(_t(r));break;case"instance_light":e.instanceLights.push(o(r.getAttribute("url")));break;case"instance_geometry":e.instanceGeometries.push(_t(r));break;case"instance_node":e.instanceNodes.push(o(r.getAttribute("url")));break;case"matrix":n=i(r.textContent),e.matrix.multiply(Rt.fromArray(n).transpose()),e.transforms[r.getAttribute("sid")]=r.nodeName;break;case"translate":n=i(r.textContent),Ct.fromArray(n),e.matrix.multiply(Rt.makeTranslation(Ct.x,Ct.y,Ct.z)),e.transforms[r.getAttribute("sid")]=r.nodeName;break;case"rotate":n=i(r.textContent);const t=ce.degToRad(n[3]);e.matrix.multiply(Rt.makeRotationAxis(Ct.fromArray(n),t)),e.transforms[r.getAttribute("sid")]=r.nodeName;break;case"scale":n=i(r.textContent),e.matrix.scale(Ct.fromArray(n)),e.transforms[r.getAttribute("sid")]=r.nodeName;break;case"extra":break;default:console.log(r)}}return kt(e.id)?console.warn("THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.",e.id):Qt.nodes[e.id]=e,e}function _t(t){const e={id:o(t.getAttribute("url")),materials:{},skeletons:[]};for(let s=0;s<t.childNodes.length;s++){const r=t.childNodes[s];switch(r.nodeName){case"bind_material":const t=r.getElementsByTagName("instance_material");for(let s=0;s<t.length;s++){const r=t[s],i=r.getAttribute("symbol"),n=r.getAttribute("target");e.materials[i]=o(n)}break;case"skeleton":e.skeletons.push(o(r.textContent))}}return e}function Dt(t,e){const s=[],r=[];let i,n,o;for(i=0;i<t.length;i++){const r=t[i];let n;if(kt(r))n=Ut(r),Ft(n,e,s);else if(a=r,void 0!==Qt.visualScenes[a]){const t=Qt.visualScenes[r].children;for(let r=0;r<t.length;r++){const i=t[r];if("JOINT"===i.type){Ft(Ut(i.id),e,s)}}}else console.error("THREE.ColladaLoader: Unable to find root bone of skeleton with ID:",r)}var a;for(i=0;i<e.length;i++)for(n=0;n<s.length;n++)if(o=s[n],o.bone.name===e[i].name){r[i]=o,o.processed=!0;break}for(i=0;i<s.length;i++)o=s[i],!1===o.processed&&(r.push(o),o.processed=!0);const h=[],c=[];for(i=0;i<r.length;i++)o=r[i],h.push(o.bone),c.push(o.boneInverse);return new Aa(h,c)}function Ft(t,e,s){t.traverse((function(t){if(!0===t.isBone){let r;for(let s=0;s<e.length;s++){const i=e[s];if(i.name===t.name){r=i.boneInverse;break}}void 0===r&&(r=new Ts),s.push({bone:t,boneInverse:r,processed:!1})}}))}function Mt(t){const e=[],s=t.matrix,r=t.nodes,i=t.type,n=t.instanceCameras,o=t.instanceControllers,a=t.instanceLights,h=t.instanceGeometries,c=t.instanceNodes;for(let t=0,s=r.length;t<s;t++)e.push(Ut(r[t]));for(let t=0,s=n.length;t<s;t++){const s=st(n[t]);null!==s&&e.push(s.clone())}for(let t=0,s=o.length;t<s;t++){const s=o[t],r=(l=s.id,p(Qt.controllers[l],D)),i=Lt(mt(r.id),s.materials),n=Dt(s.skeletons,r.skin.joints);for(let t=0,s=i.length;t<s;t++){const s=i[t];s.isSkinnedMesh&&(s.bind(n,r.skin.bindMatrix),s.normalizeSkinWeights()),e.push(s)}}var l;for(let t=0,s=a.length;t<s;t++){const s=ot(a[t]);null!==s&&e.push(s.clone())}for(let t=0,s=h.length;t<s;t++){const s=h[t],r=Lt(mt(s.id),s.materials);for(let t=0,s=r.length;t<s;t++)e.push(r[t])}for(let t=0,s=c.length;t<s;t++)e.push(Ut(c[t]).clone());let u;if(0===r.length&&1===e.length)u=e[0];else{u="JOINT"===i?new xa:new ko;for(let t=0;t<e.length;t++)u.add(e[t])}return u.name="JOINT"===i?t.sid:t.name,u.matrix.copy(s),u.matrix.decompose(u.position,u.quaternion,u.scale),u}const Pt=new rr({color:16711935});function Nt(t,e){const s=[];for(let r=0,i=t.length;r<i;r++){const i=e[t[r]];void 0===i?(console.warn("THREE.ColladaLoader: Material with key %s not found. Apply fallback material.",t[r]),s.push(Pt)):s.push($(i))}return s}function Lt(t,e){const s=[];for(const r in t){const i=t[r],n=Nt(i.materialKeys,e);0===n.length&&("lines"===r||"linestrips"===r?n.push(new Ma):n.push(new Cc));const o=void 0!==i.data.attributes.skinIndex,a=1===n.length?n[0]:n;let h;switch(r){case"lines":h=new ja(i.data,a);break;case"linestrips":h=new Ha(i.data,a);break;case"triangles":case"polylist":h=o?new wa(i.data,a):new jr(i.data,a)}s.push(h)}return s}function kt(t){return void 0!==Qt.nodes[t]}function Ut(t){return p(Qt.nodes[t],Mt)}function Ht(t){const e=new ko;e.name=t.name;const s=t.children;for(let t=0;t<s.length;t++){const r=s[t];e.add(Ut(r.id))}return e}function Bt(t){return p(Qt.visualScenes[t],Ht)}if(0===t.length)return{scene:new Xo};const Gt=(new DOMParser).parseFromString(t,"application/xml"),jt=s(Gt,"COLLADA")[0],Vt=Gt.getElementsByTagName("parsererror")[0];if(void 0!==Vt){const t=s(Vt,"div")[0];let e;return e=t?t.textContent:function(t){let e="";const s=[t];for(;s.length;){const t=s.shift();t.nodeType===Node.TEXT_NODE?e+=t.textContent:(e+="\n",s.push.apply(s,t.childNodes))}return e.trim()}(Vt),console.error("THREE.ColladaLoader: Failed to parse collada file.\n",e),null}const Wt=jt.getAttribute("version");console.log("THREE.ColladaLoader: File version",Wt);const Yt=function(t){return{unit:h(s(t,"unit")[0]),upAxis:c(s(t,"up_axis")[0])}}(s(jt,"asset")[0]),Xt=new ol(this.manager);let qt;Xt.setPath(this.resourcePath||e).setCrossOrigin(this.crossOrigin),Om&&(qt=new Om(this.manager),qt.setPath(this.resourcePath||e));const Kt=new Ae,Jt=[];let $t={},Zt=0;const Qt={animations:{},clips:{},controllers:{},images:{},effects:{},materials:{},cameras:{},lights:{},geometries:{},nodes:{},visualScenes:{},kinematicsModels:{},physicsModels:{},kinematicsScenes:{}};l(jt,"library_animations","animation",(function t(e){const s={sources:{},samplers:{},channels:{}};let r=!1;for(let i=0,n=e.childNodes.length;i<n;i++){const n=e.childNodes[i];if(1!==n.nodeType)continue;let o;switch(n.nodeName){case"source":o=n.getAttribute("id"),s.sources[o]=at(n);break;case"sampler":o=n.getAttribute("id"),s.samplers[o]=d(n);break;case"channel":o=n.getAttribute("target"),s.channels[o]=m(n);break;case"animation":t(n),r=!0;break;default:console.log(n)}}!1===r&&(Qt.animations[e.getAttribute("id")||ce.generateUUID()]=s)})),l(jt,"library_animation_clips","animation_clip",(function(t){const e={name:t.getAttribute("id")||"default",start:parseFloat(t.getAttribute("start")||0),end:parseFloat(t.getAttribute("end")||0),animations:[]};for(let s=0,r=t.childNodes.length;s<r;s++){const r=t.childNodes[s];if(1===r.nodeType)switch(r.nodeName){case"instance_animation":e.animations.push(o(r.getAttribute("url")))}}Qt.clips[t.getAttribute("id")]=e})),l(jt,"library_controllers","controller",(function(t){const e={};for(let s=0,r=t.childNodes.length;s<r;s++){const r=t.childNodes[s];if(1===r.nodeType)switch(r.nodeName){case"skin":e.id=o(r.getAttribute("source")),e.skin=C(r);break;case"morph":e.id=o(r.getAttribute("source")),console.warn("THREE.ColladaLoader: Morph target animation not supported yet.")}}Qt.controllers[t.getAttribute("id")]=e})),l(jt,"library_images","image",(function(t){const e={init_from:s(t,"init_from")[0].textContent};Qt.images[t.getAttribute("id")]=e})),l(jt,"library_effects","effect",(function(t){const e={};for(let s=0,r=t.childNodes.length;s<r;s++){const r=t.childNodes[s];if(1===r.nodeType)switch(r.nodeName){case"profile_COMMON":e.profile=P(r)}}Qt.effects[t.getAttribute("id")]=e})),l(jt,"library_materials","material",(function(t){const e={name:t.getAttribute("name")};for(let s=0,r=t.childNodes.length;s<r;s++){const r=t.childNodes[s];if(1===r.nodeType)switch(r.nodeName){case"instance_effect":e.url=o(r.getAttribute("url"))}}Qt.materials[t.getAttribute("id")]=e})),l(jt,"library_cameras","camera",(function(t){const e={name:t.getAttribute("name")};for(let s=0,r=t.childNodes.length;s<r;s++){const r=t.childNodes[s];if(1===r.nodeType)switch(r.nodeName){case"optics":e.optics=Z(r)}}Qt.cameras[t.getAttribute("id")]=e})),l(jt,"library_lights","light",(function(t){let e={};for(let s=0,r=t.childNodes.length;s<r;s++){const r=t.childNodes[s];if(1===r.nodeType)switch(r.nodeName){case"technique_common":e=rt(r)}}Qt.lights[t.getAttribute("id")]=e})),l(jt,"library_geometries","geometry",(function(t){const e={name:t.getAttribute("name"),sources:{},vertices:{},primitives:[]},r=s(t,"mesh")[0];if(void 0!==r){for(let t=0;t<r.childNodes.length;t++){const s=r.childNodes[t];if(1!==s.nodeType)continue;const i=s.getAttribute("id");switch(s.nodeName){case"source":e.sources[i]=at(s);break;case"vertices":e.vertices=ht(s);break;case"polygons":console.warn("THREE.ColladaLoader: Unsupported primitive type: ",s.nodeName);break;case"lines":case"linestrips":case"polylist":case"triangles":e.primitives.push(ct(s));break;default:console.log(s)}}Qt.geometries[t.getAttribute("id")]=e}})),l(jt,"library_nodes","node",Ot),l(jt,"library_visual_scenes","visual_scene",(function(t){const e={name:t.getAttribute("name"),children:[]};!function(t){const e=t.getElementsByTagName("node");for(let t=0;t<e.length;t++){const s=e[t];!1===s.hasAttribute("id")&&s.setAttribute("id","three_default_"+Zt++)}}(t);const r=s(t,"node");for(let t=0;t<r.length;t++)e.children.push(Ot(r[t]));Qt.visualScenes[t.getAttribute("id")]=e})),l(jt,"library_kinematics_models","kinematics_model",(function(t){const e={name:t.getAttribute("name")||"",joints:{},links:[]};for(let s=0;s<t.childNodes.length;s++){const r=t.childNodes[s];if(1===r.nodeType)switch(r.nodeName){case"technique_common":gt(r,e)}}Qt.kinematicsModels[t.getAttribute("id")]=e})),l(jt,"library_physics_models","physics_model",(function(t){const e={name:t.getAttribute("name")||"",rigidBodies:{}};for(let s=0;s<t.childNodes.length;s++){const r=t.childNodes[s];if(1===r.nodeType)switch(r.nodeName){case"rigid_body":e.rigidBodies[r.getAttribute("name")]={},xt(r,e.rigidBodies[r.getAttribute("name")])}}Qt.physicsModels[t.getAttribute("id")]=e})),l(jt,"scene","instance_kinematics_scene",(function(t){const e={bindJointAxis:[]};for(let s=0;s<t.childNodes.length;s++){const r=t.childNodes[s];if(1===r.nodeType)switch(r.nodeName){case"bind_joint_axis":e.bindJointAxis.push(Et(r))}}Qt.kinematicsScenes[o(t.getAttribute("url"))]=e})),u(Qt.animations,f),u(Qt.clips,A),u(Qt.controllers,D),u(Qt.images,F),u(Qt.effects,K),u(Qt.materials,J),u(Qt.cameras,et),u(Qt.lights,nt),u(Qt.geometries,ut),u(Qt.visualScenes,Ht),function(){const t=Qt.clips;if(!0===a(t)){if(!1===a(Qt.animations)){const t=[];for(const e in Qt.animations){const s=g(e);for(let e=0,r=s.length;e<r;e++)t.push(s[e])}Jt.push(new qc("default",-1,t))}}else for(const e in t)Jt.push(R(e))}(),function(){const t=Object.keys(Qt.kinematicsModels)[0],e=Object.keys(Qt.kinematicsScenes)[0],s=Object.keys(Qt.visualScenes)[0];if(void 0===t||void 0===e)return;const r=(i=t,p(Qt.kinematicsModels[i],ft));var i;const n=function(t){return p(Qt.kinematicsScenes[t],St)}(e),o=Bt(s),a=n.bindJointAxis,h={};for(let t=0,e=a.length;t<e;t++){const e=a[t],s=jt.querySelector('[sid="'+e.target+'"]');if(s){const t=s.parentElement;c(e.jointIndex,t)}}function c(t,e){const s=e.getAttribute("name"),i=r.joints[t];o.traverse((function(r){r.name===s&&(h[t]={object:r,transforms:At(e),joint:i,position:i.zeroPosition})}))}const l=new Ts;$t={joints:r&&r.joints,getJointValue:function(t){const e=h[t];if(e)return e.position;console.warn("THREE.ColladaLoader: Joint "+t+" doesn't exist.")},setJointValue:function(t,e){const s=h[t];if(s){const r=s.joint;if(e>r.limits.max||e<r.limits.min)console.warn("THREE.ColladaLoader: Joint "+t+" value "+e+" outside of limits (min: "+r.limits.min+", max: "+r.limits.max+").");else if(r.static)console.warn("THREE.ColladaLoader: Joint "+t+" is static.");else{const i=s.object,n=r.axis,o=s.transforms;Rt.identity();for(let s=0;s<o.length;s++){const i=o[s];if(i.sid&&-1!==i.sid.indexOf(t))switch(r.type){case"revolute":Rt.multiply(l.makeRotationAxis(n,ce.degToRad(e)));break;case"prismatic":Rt.multiply(l.makeTranslation(n.x*e,n.y*e,n.z*e));break;default:console.warn("THREE.ColladaLoader: Unknown joint type: "+r.type)}else switch(i.type){case"matrix":Rt.multiply(i.obj);break;case"translate":Rt.multiply(l.makeTranslation(i.obj.x,i.obj.y,i.obj.z));break;case"scale":Rt.scale(i.obj);break;case"rotate":Rt.multiply(l.makeRotationAxis(i.obj,i.angle))}}i.matrix.copy(Rt),i.matrix.decompose(i.position,i.quaternion,i.scale),h[t].position=e}}else console.log("THREE.ColladaLoader: "+t+" does not exist.")}}}();const te=function(t){return Bt(o(s(t,"instance_visual_scene")[0].getAttribute("url")))}(s(jt,"scene")[0]);return te.animations=Jt,"Z_UP"===Yt.upAxis&&te.quaternion.setFromEuler(new Cs(-Math.PI/2,0,0)),te.scale.multiplyScalar(Yt.unit),{get animations(){return console.warn("THREE.ColladaLoader: Please access animations over scene.animations now."),Jt},kinematics:$t,library:Qt,scene:te}}}const Dm=new WeakMap;class Fm extends Qc{constructor(t){super(t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(t){return this.decoderPath=t,this}setDecoderConfig(t){return this.decoderConfig=t,this}setWorkerLimit(t){return this.workerLimit=t,this}load(t,e,s,r){const i=new el(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(t,(t=>{const s={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(t,s).then(e).catch(r)}),s,r)}decodeDracoFile(t,e,s,r){const i={attributeIDs:s||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!s};this.decodeGeometry(t,i).then(e)}decodeGeometry(t,e){for(const t in e.attributeTypes){const s=e.attributeTypes[t];void 0!==s.BYTES_PER_ELEMENT&&(e.attributeTypes[t]=s.name)}const s=JSON.stringify(e);if(Dm.has(t)){const e=Dm.get(t);if(e.key===s)return e.promise;if(0===t.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const i=this.workerNextTaskID++,n=t.byteLength,o=this._getWorker(i,n).then((s=>(r=s,new Promise(((s,n)=>{r._callbacks[i]={resolve:s,reject:n},r.postMessage({type:"decode",id:i,taskConfig:e,buffer:t},[t])}))))).then((t=>this._createGeometry(t.geometry)));return o.catch((()=>!0)).then((()=>{r&&i&&this._releaseTask(r,i)})),Dm.set(t,{key:s,promise:o}),o}_createGeometry(t){const e=new Er;t.index&&e.setIndex(new or(t.index.array,1));for(let s=0;s<t.attributes.length;s++){const r=t.attributes[s],i=r.name,n=r.array,o=r.itemSize;e.setAttribute(i,new or(n,o))}return e}_loadLibrary(t,e){const s=new el(this.manager);return s.setPath(this.decoderPath),s.setResponseType(e),s.setWithCredentials(this.withCredentials),new Promise(((e,r)=>{s.load(t,e,void 0,r)}))}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const t="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,e=[];return t?e.push(this._loadLibrary("draco_decoder.js","text")):(e.push(this._loadLibrary("draco_wasm_wrapper.js","text")),e.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(e).then((e=>{const s=e[0];t||(this.decoderConfig.wasmBinary=e[1]);const r=Mm.toString(),i=["/* draco decoder */",s,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([i]))})),this.decoderPending}_getWorker(t,e){return this._initDecoder().then((()=>{if(this.workerPool.length<this.workerLimit){const t=new Worker(this.workerSourceURL);t._callbacks={},t._taskCosts={},t._taskLoad=0,t.postMessage({type:"init",decoderConfig:this.decoderConfig}),t.onmessage=function(e){const s=e.data;switch(s.type){case"decode":t._callbacks[s.id].resolve(s);break;case"error":t._callbacks[s.id].reject(s);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+s.type+'"')}},this.workerPool.push(t)}else this.workerPool.sort((function(t,e){return t._taskLoad>e._taskLoad?-1:1}));const s=this.workerPool[this.workerPool.length-1];return s._taskCosts[t]=e,s._taskLoad+=e,s}))}_releaseTask(t,e){t._taskLoad-=t._taskCosts[e],delete t._callbacks[e],delete t._taskCosts[e]}debug(){console.log("Task load: ",this.workerPool.map((t=>t._taskLoad)))}dispose(){for(let t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this}}function Mm(){let t,e;function s(t,e,s,r,i,n){const o=n.num_components(),a=s.num_points()*o,h=a*i.BYTES_PER_ELEMENT,c=function(t,e){switch(e){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32}}(t,i),l=t._malloc(h);e.GetAttributeDataArrayForAllPoints(s,n,c,h,l);const u=new i(t.HEAPF32.buffer,l,a).slice();return t._free(l),{name:r,array:u,itemSize:o}}onmessage=function(r){const i=r.data;switch(i.type){case"init":t=i.decoderConfig,e=new Promise((function(e){t.onModuleLoaded=function(t){e({draco:t})},DracoDecoderModule(t)}));break;case"decode":const r=i.buffer,n=i.taskConfig;e.then((t=>{const e=t.draco,o=new e.Decoder,a=new e.DecoderBuffer;a.Init(new Int8Array(r),r.byteLength);try{const t=function(t,e,r,i){const n=i.attributeIDs,o=i.attributeTypes;let a,h;const c=e.GetEncodedGeometryType(r);if(c===t.TRIANGULAR_MESH)a=new t.Mesh,h=e.DecodeBufferToMesh(r,a);else{if(c!==t.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");a=new t.PointCloud,h=e.DecodeBufferToPointCloud(r,a)}if(!h.ok()||0===a.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+h.error_msg());const l={index:null,attributes:[]};for(const r in n){const h=self[o[r]];let c,u;if(i.useUniqueIDs)u=n[r],c=e.GetAttributeByUniqueId(a,u);else{if(u=e.GetAttributeId(a,t[n[r]]),-1===u)continue;c=e.GetAttribute(a,u)}l.attributes.push(s(t,e,a,r,h,c))}c===t.TRIANGULAR_MESH&&(l.index=function(t,e,s){const r=3*s.num_faces(),i=4*r,n=t._malloc(i);e.GetTrianglesUInt32Array(s,i,n);const o=new Uint32Array(t.HEAPF32.buffer,n,r).slice();return t._free(n),{array:o,itemSize:1}}(t,e,a));return t.destroy(a),l}(e,o,a,n),r=t.attributes.map((t=>t.array.buffer));t.index&&r.push(t.index.array.buffer),self.postMessage({type:"decode",id:i.id,geometry:t},r)}catch(t){console.error(t),self.postMessage({type:"error",id:i.id,error:t.message})}finally{e.destroy(a),e.destroy(o)}}))}}}class Pm extends sl{constructor(t){super(t)}parse(t,e){const s={mipmaps:[],width:0,height:0,format:null,mipmapCount:1};function r(t){return t.charCodeAt(0)+(t.charCodeAt(1)<<8)+(t.charCodeAt(2)<<16)+(t.charCodeAt(3)<<24)}function i(t,e,s,r){const i=s*r*4,n=new Uint8Array(t,e,i),o=new Uint8Array(i);let a=0,h=0;for(let t=0;t<r;t++)for(let t=0;t<s;t++){const t=n[h];h++;const e=n[h];h++;const s=n[h];h++;const r=n[h];h++,o[a]=s,a++,o[a]=e,a++,o[a]=t,a++,o[a]=r,a++}return o}const n=r("DXT1"),o=r("DXT3"),a=r("DXT5"),h=r("ETC1"),c=new Int32Array(t,0,31);if(542327876!==c[0])return console.error("THREE.DDSLoader.parse: Invalid magic number in DDS header."),s;if(4&!c[20])return console.error("THREE.DDSLoader.parse: Unsupported format, must contain a FourCC code."),s;let l;const u=c[21];let p=!1;switch(u){case n:l=8,s.format=ot;break;case o:l=16,s.format=ht;break;case a:l=16,s.format=ct;break;case h:l=8,s.format=mt;break;default:if(!(32===c[22]&&16711680&c[23]&&65280&c[24]&&255&c[25]&&4278190080&c[26]))return console.error("THREE.DDSLoader.parse: Unsupported FourCC code ",(d=u,String.fromCharCode(255&d,d>>8&255,d>>16&255,d>>24&255))),s;p=!0,l=64,s.format=st}var d;s.mipmapCount=1,131072&c[2]&&!1!==e&&(s.mipmapCount=Math.max(1,c[7]));const m=c[28];if(s.isCubemap=!!(512&m),s.isCubemap&&(!(1024&m)||!(2048&m)||!(4096&m)||!(8192&m)||!(16384&m)||!(32768&m)))return console.error("THREE.DDSLoader.parse: Incomplete cubemap faces"),s;s.width=c[4],s.height=c[3];let f=c[1]+4;const g=s.isCubemap?6:1;for(let e=0;e<g;e++){let e=s.width,r=s.height;for(let n=0;n<s.mipmapCount;n++){let n,o;p?(n=i(t,f,e,r),o=n.length):(o=Math.max(4,e)/4*Math.max(4,r)/4*l,n=new Uint8Array(t,f,o));const a={data:n,width:e,height:r};s.mipmaps.push(a),f+=o,e=Math.max(e>>1,1),r=Math.max(r>>1,1)}}return s}}class Nm extends nl{constructor(t){super(t),this.type=tt}parse(t){const e=65536,s=14,r=65537,i=16384,n=Math.pow(2.7182818,2.2);const o={l:0,c:0,lc:0};function a(t,e,s,r,i){for(;s<t;)e=e<<8|G(r,i),s+=8;s-=t,o.l=e>>s&(1<<t)-1,o.c=e,o.lc=s}const h=new Array(59);function c(t,e,s,i,n,c){const l=e;let u=0,p=0;for(;i<=n;i++){if(l.value-e.value>s)return!1;a(6,u,p,t,l);const r=o.l;if(u=o.c,p=o.lc,c[i]=r,63==r){if(l.value-e.value>s)throw new Error("Something wrong with hufUnpackEncTable");a(8,u,p,t,l);let r=o.l+6;if(u=o.c,p=o.lc,i+r>n+1)throw new Error("Something wrong with hufUnpackEncTable");for(;r--;)c[i++]=0;i--}else if(r>=59){let t=r-59+2;if(i+t>n+1)throw new Error("Something wrong with hufUnpackEncTable");for(;t--;)c[i++]=0;i--}}!function(t){for(let t=0;t<=58;++t)h[t]=0;for(let e=0;e<r;++e)h[t[e]]+=1;let e=0;for(let t=58;t>0;--t){const s=e+h[t]>>1;h[t]=e,e=s}for(let e=0;e<r;++e){const s=t[e];s>0&&(t[e]=s|h[s]++<<6)}}(c)}function l(t){return 63&t}function u(t){return t>>6}const p={c:0,lc:0};function d(t,e,s,r){t=t<<8|G(s,r),e+=8,p.c=t,p.lc=e}const m={c:0,lc:0};function f(t,e,s,r,i,n,o,a,h){if(t==e){r<8&&(d(s,r,i,n),s=p.c,r=p.lc);let t=s>>(r-=8);if(t=new Uint8Array([t])[0],a.value+t>h)return!1;const e=o[a.value-1];for(;t-- >0;)o[a.value++]=e}else{if(!(a.value<h))return!1;o[a.value++]=t}m.c=s,m.lc=r}function g(t){return 65535&t}function y(t){const e=g(t);return e>32767?e-65536:e}const T={a:0,b:0};function v(t,e){const s=y(t),r=y(e),i=s+(1&r)+(r>>1),n=i,o=i-r;T.a=n,T.b=o}function b(t,e){const s=g(t),r=g(e),i=s-(r>>1)&65535,n=r+i-32768&65535;T.a=n,T.b=i}function w(t,e,s,r,i,n,o){const a=o<16384,h=s>i?i:s;let c,l,u=1;for(;u<=h;)u<<=1;for(u>>=1,c=u,u>>=1;u>=1;){l=0;const o=l+n*(i-c),h=n*u,p=n*c,d=r*u,m=r*c;let f,g,y,w;for(;l<=o;l+=p){let i=l;const n=l+r*(s-c);for(;i<=n;i+=m){const s=i+d,r=i+h,n=r+d;a?(v(t[i+e],t[r+e]),f=T.a,y=T.b,v(t[s+e],t[n+e]),g=T.a,w=T.b,v(f,g),t[i+e]=T.a,t[s+e]=T.b,v(y,w),t[r+e]=T.a,t[n+e]=T.b):(b(t[i+e],t[r+e]),f=T.a,y=T.b,b(t[s+e],t[n+e]),g=T.a,w=T.b,b(f,g),t[i+e]=T.a,t[s+e]=T.b,b(y,w),t[r+e]=T.a,t[n+e]=T.b)}if(s&u){const s=i+h;a?v(t[i+e],t[s+e]):b(t[i+e],t[s+e]),f=T.a,t[s+e]=T.b,t[i+e]=f}}if(i&u){let i=l;const n=l+r*(s-c);for(;i<=n;i+=m){const s=i+d;a?v(t[i+e],t[s+e]):b(t[i+e],t[s+e]),f=T.a,t[s+e]=T.b,t[i+e]=f}}c=u,u>>=1}return l}function x(t,e,n,o,a,h){const g=n.value,y=B(e,n),T=B(e,n);n.value+=4;const v=B(e,n);if(n.value+=4,y<0||y>=r||T<0||T>=r)throw new Error("Something wrong with HUF_ENCSIZE");const b=new Array(r),w=new Array(i);!function(t){for(let e=0;e<i;e++)t[e]={},t[e].len=0,t[e].lit=0,t[e].p=null}(w);if(c(t,n,o-(n.value-g),y,T,b),v>8*(o-(n.value-g)))throw new Error("Something wrong with hufUncompress");!function(t,e,r,i){for(;e<=r;e++){const r=u(t[e]),n=l(t[e]);if(r>>n)throw new Error("Invalid table entry");if(n>s){const t=i[r>>n-s];if(t.len)throw new Error("Invalid table entry");if(t.lit++,t.p){const e=t.p;t.p=new Array(t.lit);for(let s=0;s<t.lit-1;++s)t.p[s]=e[s]}else t.p=new Array(1);t.p[t.lit-1]=e}else if(n){let t=0;for(let o=1<<s-n;o>0;o--){const o=i[(r<<s-n)+t];if(o.len||o.p)throw new Error("Invalid table entry");o.len=n,o.lit=e,t++}}}}(b,y,T,w),function(t,e,r,i,n,o,a,h,c){let g=0,y=0;const T=a,v=Math.trunc(i.value+(n+7)/8);for(;i.value<v;)for(d(g,y,r,i),g=p.c,y=p.lc;y>=s;){const n=e[g>>y-s&16383];if(n.len)y-=n.len,f(n.lit,o,g,y,r,i,h,c,T),g=m.c,y=m.lc;else{if(!n.p)throw new Error("hufDecode issues");let e;for(e=0;e<n.lit;e++){const s=l(t[n.p[e]]);for(;y<s&&i.value<v;)d(g,y,r,i),g=p.c,y=p.lc;if(y>=s&&u(t[n.p[e]])==(g>>y-s&(1<<s)-1)){y-=s,f(n.p[e],o,g,y,r,i,h,c,T),g=m.c,y=m.lc;break}}if(e==n.lit)throw new Error("hufDecode issues")}}const b=8-n&7;for(g>>=b,y-=b;y>0;){const t=e[g<<s-y&16383];if(!t.len)throw new Error("hufDecode issues");y-=t.len,f(t.lit,o,g,y,r,i,h,c,T),g=m.c,y=m.lc}}(b,w,t,n,v,T,h,a,{value:0})}function I(t){for(let e=1;e<t.length;e++){const s=t[e-1]+t[e]-128;t[e]=s}}function E(t,e){let s=0,r=Math.floor((t.length+1)/2),i=0;const n=t.length-1;for(;!(i>n||(e[i++]=t[s++],i>n));)e[i++]=t[r++]}function S(t){let e=t.byteLength;const s=new Array;let r=0;const i=new DataView(t);for(;e>0;){const t=i.getInt8(r++);if(t<0){const n=-t;e-=n+1;for(let t=0;t<n;t++)s.push(i.getUint8(r++))}else{const n=t;e-=2;const o=i.getUint8(r++);for(let t=0;t<n+1;t++)s.push(o)}}return s}function A(t,e,s){let r,i=1;for(;i<64;)r=e[t.value],65280==r?i=64:r>>8==255?i+=255&r:(s[i]=r,i++),t.value++}function R(t,e){e[0]=Y(t[0]),e[1]=Y(t[1]),e[2]=Y(t[5]),e[3]=Y(t[6]),e[4]=Y(t[14]),e[5]=Y(t[15]),e[6]=Y(t[27]),e[7]=Y(t[28]),e[8]=Y(t[2]),e[9]=Y(t[4]),e[10]=Y(t[7]),e[11]=Y(t[13]),e[12]=Y(t[16]),e[13]=Y(t[26]),e[14]=Y(t[29]),e[15]=Y(t[42]),e[16]=Y(t[3]),e[17]=Y(t[8]),e[18]=Y(t[12]),e[19]=Y(t[17]),e[20]=Y(t[25]),e[21]=Y(t[30]),e[22]=Y(t[41]),e[23]=Y(t[43]),e[24]=Y(t[9]),e[25]=Y(t[11]),e[26]=Y(t[18]),e[27]=Y(t[24]),e[28]=Y(t[31]),e[29]=Y(t[40]),e[30]=Y(t[44]),e[31]=Y(t[53]),e[32]=Y(t[10]),e[33]=Y(t[19]),e[34]=Y(t[23]),e[35]=Y(t[32]),e[36]=Y(t[39]),e[37]=Y(t[45]),e[38]=Y(t[52]),e[39]=Y(t[54]),e[40]=Y(t[20]),e[41]=Y(t[22]),e[42]=Y(t[33]),e[43]=Y(t[38]),e[44]=Y(t[46]),e[45]=Y(t[51]),e[46]=Y(t[55]),e[47]=Y(t[60]),e[48]=Y(t[21]),e[49]=Y(t[34]),e[50]=Y(t[37]),e[51]=Y(t[47]),e[52]=Y(t[50]),e[53]=Y(t[56]),e[54]=Y(t[59]),e[55]=Y(t[61]),e[56]=Y(t[35]),e[57]=Y(t[36]),e[58]=Y(t[48]),e[59]=Y(t[49]),e[60]=Y(t[57]),e[61]=Y(t[58]),e[62]=Y(t[62]),e[63]=Y(t[63])}function C(t){const e=.5*Math.cos(.7853975),s=.5*Math.cos(3.14159/16),r=.5*Math.cos(3.14159/8),i=.5*Math.cos(3*3.14159/16),n=.5*Math.cos(.981746875),o=.5*Math.cos(3*3.14159/8),a=.5*Math.cos(1.374445625),h=new Array(4),c=new Array(4),l=new Array(4),u=new Array(4);for(let p=0;p<8;++p){const d=8*p;h[0]=r*t[d+2],h[1]=o*t[d+2],h[2]=r*t[d+6],h[3]=o*t[d+6],c[0]=s*t[d+1]+i*t[d+3]+n*t[d+5]+a*t[d+7],c[1]=i*t[d+1]-a*t[d+3]-s*t[d+5]-n*t[d+7],c[2]=n*t[d+1]-s*t[d+3]+a*t[d+5]+i*t[d+7],c[3]=a*t[d+1]-n*t[d+3]+i*t[d+5]-s*t[d+7],l[0]=e*(t[d+0]+t[d+4]),l[3]=e*(t[d+0]-t[d+4]),l[1]=h[0]+h[3],l[2]=h[1]-h[2],u[0]=l[0]+l[1],u[1]=l[3]+l[2],u[2]=l[3]-l[2],u[3]=l[0]-l[1],t[d+0]=u[0]+c[0],t[d+1]=u[1]+c[1],t[d+2]=u[2]+c[2],t[d+3]=u[3]+c[3],t[d+4]=u[3]-c[3],t[d+5]=u[2]-c[2],t[d+6]=u[1]-c[1],t[d+7]=u[0]-c[0]}for(let p=0;p<8;++p)h[0]=r*t[16+p],h[1]=o*t[16+p],h[2]=r*t[48+p],h[3]=o*t[48+p],c[0]=s*t[8+p]+i*t[24+p]+n*t[40+p]+a*t[56+p],c[1]=i*t[8+p]-a*t[24+p]-s*t[40+p]-n*t[56+p],c[2]=n*t[8+p]-s*t[24+p]+a*t[40+p]+i*t[56+p],c[3]=a*t[8+p]-n*t[24+p]+i*t[40+p]-s*t[56+p],l[0]=e*(t[p]+t[32+p]),l[3]=e*(t[p]-t[32+p]),l[1]=h[0]+h[3],l[2]=h[1]-h[2],u[0]=l[0]+l[1],u[1]=l[3]+l[2],u[2]=l[3]-l[2],u[3]=l[0]-l[1],t[0+p]=u[0]+c[0],t[8+p]=u[1]+c[1],t[16+p]=u[2]+c[2],t[24+p]=u[3]+c[3],t[32+p]=u[3]-c[3],t[40+p]=u[2]-c[2],t[48+p]=u[1]-c[1],t[56+p]=u[0]-c[0]}function O(t){for(let e=0;e<64;++e){const s=t[0][e],r=t[1][e],i=t[2][e];t[0][e]=s+1.5747*i,t[1][e]=s-.1873*r-.4682*i,t[2][e]=s+1.8556*r}}function _(t,e,s){for(let r=0;r<64;++r)e[s+r]=Ju.toHalfFloat(D(t[r]))}function D(t){return t<=1?Math.sign(t)*Math.pow(Math.abs(t),2.2):Math.sign(t)*Math.pow(n,Math.abs(t)-1)}function F(t){return new DataView(t.array.buffer,t.offset.value,t.size)}function M(t){const e=t.viewer.buffer.slice(t.offset.value,t.offset.value+t.size),s=new Uint8Array(S(e)),r=new Uint8Array(s.length);return I(s),E(s,r),new DataView(r.buffer)}function P(t){const e=t.array.slice(t.offset.value,t.offset.value+t.size);void 0===Sm&&console.error("THREE.EXRLoader: External library fflate.min.js required.");const s=$d(e),r=new Uint8Array(s.length);return I(s),E(s,r),new DataView(r.buffer)}function N(t){const s=t.viewer,r={value:t.offset.value},i=new Uint16Array(t.width*t.scanlineBlockSize*(t.channels*t.type)),n=new Uint8Array(8192);let o=0;const a=new Array(t.channels);for(let e=0;e<t.channels;e++)a[e]={},a[e].start=o,a[e].end=a[e].start,a[e].nx=t.width,a[e].ny=t.lines,a[e].size=t.type,o+=a[e].nx*a[e].ny*a[e].size;const h=X(s,r),c=X(s,r);if(c>=8192)throw new Error("Something is wrong with PIZ_COMPRESSION BITMAP_SIZE");if(h<=c)for(let t=0;t<c-h+1;t++)n[t+h]=j(s,r);const l=new Uint16Array(e),u=function(t,s){let r=0;for(let i=0;i<e;++i)(0==i||t[i>>3]&1<<(7&i))&&(s[r++]=i);const i=r-1;for(;r<e;)s[r++]=0;return i}(n,l),p=B(s,r);x(t.array,s,r,p,i,o);for(let e=0;e<t.channels;++e){const t=a[e];for(let s=0;s<a[e].size;++s)w(i,t.start+s,t.nx,t.size,t.ny,t.nx*t.size,u)}!function(t,e,s){for(let r=0;r<s;++r)e[r]=t[e[r]]}(l,i,o);let d=0;const m=new Uint8Array(i.buffer.byteLength);for(let e=0;e<t.lines;e++)for(let e=0;e<t.channels;e++){const t=a[e],s=t.nx*t.size,r=new Uint8Array(i.buffer,2*t.end,2*s);m.set(r,d),d+=2*s,t.end+=s}return new DataView(m.buffer)}function L(t){const e=t.array.slice(t.offset.value,t.offset.value+t.size);void 0===Sm&&console.error("THREE.EXRLoader: External library fflate.min.js required.");const s=$d(e),r=t.lines*t.channels*t.width,i=1==t.type?new Uint16Array(r):new Uint32Array(r);let n=0,o=0;const a=new Array(4);for(let e=0;e<t.lines;e++)for(let e=0;e<t.channels;e++){let e=0;switch(t.type){case 1:a[0]=n,a[1]=a[0]+t.width,n=a[1]+t.width;for(let r=0;r<t.width;++r){e+=s[a[0]++]<<8|s[a[1]++],i[o]=e,o++}break;case 2:a[0]=n,a[1]=a[0]+t.width,a[2]=a[1]+t.width,n=a[2]+t.width;for(let r=0;r<t.width;++r){e+=s[a[0]++]<<24|s[a[1]++]<<16|s[a[2]++]<<8,i[o]=e,o++}}}return new DataView(i.buffer)}function k(t){const e=t.viewer,s={value:t.offset.value},r=new Uint8Array(t.width*t.lines*(t.channels*t.type*2)),i={version:z(e,s),unknownUncompressedSize:z(e,s),unknownCompressedSize:z(e,s),acCompressedSize:z(e,s),dcCompressedSize:z(e,s),rleCompressedSize:z(e,s),rleUncompressedSize:z(e,s),rleRawSize:z(e,s),totalAcUncompressedCount:z(e,s),totalDcUncompressedCount:z(e,s),acCompression:z(e,s)};if(i.version<2)throw new Error("EXRLoader.parse: "+et.compression+" version "+i.version+" is unsupported");const n=new Array;let o=X(e,s)-2;for(;o>0;){const t=U(e.buffer,s),r=j(e,s),i=r>>2&3,a=new Int8Array([(r>>4)-1])[0],h=j(e,s);n.push({name:t,index:a,type:h,compression:i}),o-=t.length+3}const a=et.channels,h=new Array(t.channels);for(let e=0;e<t.channels;++e){const s=h[e]={},r=a[e];s.name=r.name,s.compression=0,s.decoded=!1,s.type=r.pixelType,s.pLinear=r.pLinear,s.width=t.width,s.height=t.lines}const c={idx:new Array(3)};for(let e=0;e<t.channels;++e){const t=h[e];for(let s=0;s<n.length;++s){const r=n[s];t.name==r.name&&(t.compression=r.compression,r.index>=0&&(c.idx[r.index]=e),t.offset=e)}}let l,u,p;if(i.acCompressedSize>0)switch(i.acCompression){case 0:l=new Uint16Array(i.totalAcUncompressedCount),x(t.array,e,s,i.acCompressedSize,l,i.totalAcUncompressedCount);break;case 1:const r=$d(t.array.slice(s.value,s.value+i.totalAcUncompressedCount));l=new Uint16Array(r.buffer),s.value+=i.totalAcUncompressedCount}if(i.dcCompressedSize>0){const e={array:t.array,offset:s,size:i.dcCompressedSize};u=new Uint16Array(P(e).buffer),s.value+=i.dcCompressedSize}if(i.rleRawSize>0){p=S($d(t.array.slice(s.value,s.value+i.rleCompressedSize)).buffer),s.value+=i.rleCompressedSize}let d=0;const m=new Array(h.length);for(let t=0;t<m.length;++t)m[t]=new Array;for(let e=0;e<t.lines;++e)for(let e=0;e<h.length;++e)m[e].push(d),d+=h[e].width*t.type*2;!function(t,e,s,r,i,n){let o=new DataView(n.buffer);const a=s[t.idx[0]].width,h=s[t.idx[0]].height,c=Math.floor(a/8),l=Math.ceil(a/8),u=Math.ceil(h/8),p=a-8*(l-1),d=h-8*(u-1),m={value:0},f=new Array(3),g=new Array(3),y=new Array(3),T=new Array(3),v=new Array(3);for(let s=0;s<3;++s)v[s]=e[t.idx[s]],f[s]=s<1?0:f[s-1]+l*u,g[s]=new Float32Array(64),y[s]=new Uint16Array(64),T[s]=new Uint16Array(64*l);for(let e=0;e<u;++e){let n=8;e==u-1&&(n=d);let a=8;for(let t=0;t<l;++t){t==l-1&&(a=p);for(let t=0;t<3;++t)y[t].fill(0),y[t][0]=i[f[t]++],A(m,r,y[t]),R(y[t],g[t]),C(g[t]);O(g);for(let e=0;e<3;++e)_(g[e],T[e],64*t)}let h=0;for(let r=0;r<3;++r){const i=s[t.idx[r]].type;for(let t=8*e;t<8*e+n;++t){h=v[r][t];for(let e=0;e<c;++e){const s=64*e+8*(7&t);o.setUint16(h+0*i,T[r][s+0],!0),o.setUint16(h+2*i,T[r][s+1],!0),o.setUint16(h+4*i,T[r][s+2],!0),o.setUint16(h+6*i,T[r][s+3],!0),o.setUint16(h+8*i,T[r][s+4],!0),o.setUint16(h+10*i,T[r][s+5],!0),o.setUint16(h+12*i,T[r][s+6],!0),o.setUint16(h+14*i,T[r][s+7],!0),h+=16*i}}if(c!=l)for(let t=8*e;t<8*e+n;++t){const e=v[r][t]+8*c*2*i,s=64*c+8*(7&t);for(let t=0;t<a;++t)o.setUint16(e+2*t*i,T[r][s+t],!0)}}}const b=new Uint16Array(a);o=new DataView(n.buffer);for(let e=0;e<3;++e){s[t.idx[e]].decoded=!0;const r=s[t.idx[e]].type;if(2==s[e].type)for(let t=0;t<h;++t){const s=v[e][t];for(let t=0;t<a;++t)b[t]=o.getUint16(s+2*t*r,!0);for(let t=0;t<a;++t)o.setFloat32(s+2*t*r,Y(b[t]),!0)}}}(c,m,h,l,u,r);for(let e=0;e<h.length;++e){const s=h[e];if(!s.decoded)switch(s.compression){case 2:let i=0,n=0;for(let o=0;o<t.lines;++o){let t=m[e][i];for(let e=0;e<s.width;++e){for(let e=0;e<2*s.type;++e)r[t++]=p[n+e*s.width*s.height];n++}i++}break;case 1:default:throw new Error("EXRLoader.parse: unsupported channel compression")}}return new DataView(r.buffer)}function U(t,e){const s=new Uint8Array(t);let r=0;for(;0!=s[e.value+r];)r+=1;const i=(new TextDecoder).decode(s.slice(e.value,e.value+r));return e.value=e.value+r+1,i}function H(t,e){const s=t.getInt32(e.value,!0);return e.value=e.value+4,s}function B(t,e){const s=t.getUint32(e.value,!0);return e.value=e.value+4,s}function G(t,e){const s=t[e.value];return e.value=e.value+1,s}function j(t,e){const s=t.getUint8(e.value);return e.value=e.value+1,s}const z=function(t,e){let s;return s="getBigInt64"in DataView.prototype?Number(t.getBigInt64(e.value,!0)):t.getUint32(e.value+4,!0)+Number(t.getUint32(e.value,!0)<<32),e.value+=8,s};function V(t,e){const s=t.getFloat32(e.value,!0);return e.value+=4,s}function W(t,e){return Ju.toHalfFloat(V(t,e))}function Y(t){const e=(31744&t)>>10,s=1023&t;return(t>>15?-1:1)*(e?31===e?s?NaN:1/0:Math.pow(2,e-15)*(1+s/1024):s/1024*6103515625e-14)}function X(t,e){const s=t.getUint16(e.value,!0);return e.value+=2,s}function q(t,e){return Y(X(t,e))}function K(t,e,s,r,i){return"string"===r||"stringvector"===r||"iccProfile"===r?function(t,e,s){const r=(new TextDecoder).decode(new Uint8Array(t).slice(e.value,e.value+s));return e.value=e.value+s,r}(e,s,i):"chlist"===r?function(t,e,s,r){const i=s.value,n=[];for(;s.value<i+r-1;){const r=U(e,s),i=H(t,s),o=j(t,s);s.value+=3;const a=H(t,s),h=H(t,s);n.push({name:r,pixelType:i,pLinear:o,xSampling:a,ySampling:h})}return s.value+=1,n}(t,e,s,i):"chromaticities"===r?function(t,e){return{redX:V(t,e),redY:V(t,e),greenX:V(t,e),greenY:V(t,e),blueX:V(t,e),blueY:V(t,e),whiteX:V(t,e),whiteY:V(t,e)}}(t,s):"compression"===r?function(t,e){return["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"][j(t,e)]}(t,s):"box2i"===r?function(t,e){return{xMin:B(t,e),yMin:B(t,e),xMax:B(t,e),yMax:B(t,e)}}(t,s):"lineOrder"===r?function(t,e){return["INCREASING_Y"][j(t,e)]}(t,s):"float"===r?V(t,s):"v2f"===r?function(t,e){return[V(t,e),V(t,e)]}(t,s):"v3f"===r?function(t,e){return[V(t,e),V(t,e),V(t,e)]}(t,s):"int"===r?H(t,s):"rational"===r?function(t,e){return[H(t,e),B(t,e)]}(t,s):"timecode"===r?function(t,e){return[B(t,e),B(t,e)]}(t,s):"preview"===r?(s.value+=i,"skipped"):void(s.value+=i)}const J=new DataView(t),$=new Uint8Array(t),Z={value:0},et=function(t,e,s){const r={};if(20000630!=t.getUint32(0,!0))throw new Error("THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.");r.version=t.getUint8(4);const i=t.getUint8(5);r.spec={singleTile:!!(2&i),longName:!!(4&i),deepFormat:!!(8&i),multiPart:!!(16&i)},s.value=8;let n=!0;for(;n;){const i=U(e,s);if(0==i)n=!1;else{const n=U(e,s),o=K(t,e,s,n,B(t,s));void 0===o?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${n}'.`):r[i]=o}}if(0!=i)throw console.error("EXRHeader:",r),new Error("THREE.EXRLoader: provided file is currently unsupported.");return r}(J,t,Z),rt=function(t,e,s,r,i){const n={size:0,viewer:e,array:s,offset:r,width:t.dataWindow.xMax-t.dataWindow.xMin+1,height:t.dataWindow.yMax-t.dataWindow.yMin+1,channels:t.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:t.channels[0].pixelType,uncompress:null,getter:null,format:null,encoding:null};switch(t.compression){case"NO_COMPRESSION":n.lines=1,n.uncompress=F;break;case"RLE_COMPRESSION":n.lines=1,n.uncompress=M;break;case"ZIPS_COMPRESSION":n.lines=1,n.uncompress=P;break;case"ZIP_COMPRESSION":n.lines=16,n.uncompress=P;break;case"PIZ_COMPRESSION":n.lines=32,n.uncompress=N;break;case"PXR24_COMPRESSION":n.lines=16,n.uncompress=L;break;case"DWAA_COMPRESSION":n.lines=32,n.uncompress=k;break;case"DWAB_COMPRESSION":n.lines=256,n.uncompress=k;break;default:throw new Error("EXRLoader.parse: "+t.compression+" is unsupported")}if(n.scanlineBlockSize=n.lines,1==n.type)switch(i){case Q:n.getter=q,n.inputSize=2;break;case tt:n.getter=X,n.inputSize=2}else{if(2!=n.type)throw new Error("EXRLoader.parse: unsupported pixelType "+n.type+" for "+t.compression+".");switch(i){case Q:n.getter=V,n.inputSize=4;break;case tt:n.getter=W,n.inputSize=4}}n.blockCount=(t.dataWindow.yMax+1)/n.scanlineBlockSize;for(let t=0;t<n.blockCount;t++)z(e,r);n.outputChannels=3==n.channels?4:n.channels;const o=n.width*n.height*n.outputChannels;switch(i){case Q:n.byteArray=new Float32Array(o),n.channels<n.outputChannels&&n.byteArray.fill(1,0,o);break;case tt:n.byteArray=new Uint16Array(o),n.channels<n.outputChannels&&n.byteArray.fill(15360,0,o);break;default:console.error("THREE.EXRLoader: unsupported type: ",i)}return n.bytesPerLine=n.width*n.inputSize*n.channels,4==n.outputChannels?(n.format=st,n.encoding=jt):(n.format=nt,n.encoding=jt),n}(et,J,$,Z,this.type),it={value:0},ot={R:0,G:1,B:2,A:3,Y:0};for(let t=0;t<rt.height/rt.scanlineBlockSize;t++){const e=B(J,Z);rt.size=B(J,Z),rt.lines=e+rt.scanlineBlockSize>rt.height?rt.height-e:rt.scanlineBlockSize;const s=rt.size<rt.lines*rt.bytesPerLine?rt.uncompress(rt):F(rt);Z.value+=rt.size;for(let e=0;e<rt.scanlineBlockSize;e++){const r=e+t*rt.scanlineBlockSize;if(r>=rt.height)break;for(let t=0;t<rt.channels;t++){const i=ot[et.channels[t].name];for(let n=0;n<rt.width;n++){it.value=(e*(rt.channels*rt.width)+t*rt.width+n)*rt.inputSize;const o=(rt.height-1-r)*(rt.width*rt.outputChannels)+n*rt.outputChannels+i;rt.byteArray[o]=rt.getter(s,it)}}}}return{header:et,width:rt.width,height:rt.height,data:rt.byteArray,format:rt.format,encoding:rt.encoding,type:this.type}}setDataType(t){return this.type=t,this}load(t,e,s,r){return super.load(t,(function(t,s){t.encoding=s.encoding,t.minFilter=X,t.magFilter=X,t.generateMipmaps=!1,t.flipY=!1,e&&e(t,s)}),s,r)}}function Lm(t,e,s){const r=s.length-t-1;if(e>=s[r])return r-1;if(e<=s[t])return t;let i=t,n=r,o=Math.floor((i+n)/2);for(;e<s[o]||e>=s[o+1];)e<s[o]?n=o:i=o,o=Math.floor((i+n)/2);return o}function km(t,e){let s=1;for(let e=2;e<=t;++e)s*=e;let r=1;for(let t=2;t<=e;++t)r*=t;for(let s=2;s<=t-e;++s)r*=s;return s/r}function Um(t,e,s,r,i){return function(t){const e=t.length,s=[],r=[];for(let i=0;i<e;++i){const e=t[i];s[i]=new Ge(e.x,e.y,e.z),r[i]=e.w}const i=[];for(let t=0;t<e;++t){const e=s[t].clone();for(let s=1;s<=t;++s)e.sub(i[t-s].clone().multiplyScalar(km(t,s)*r[s]));i[t]=e.divideScalar(r[0])}return i}(function(t,e,s,r,i){const n=i<t?i:t,o=[],a=Lm(t,r,e),h=function(t,e,s,r,i){const n=[];for(let t=0;t<=s;++t)n[t]=0;const o=[];for(let t=0;t<=r;++t)o[t]=n.slice(0);const a=[];for(let t=0;t<=s;++t)a[t]=n.slice(0);a[0][0]=1;const h=n.slice(0),c=n.slice(0);for(let r=1;r<=s;++r){h[r]=e-i[t+1-r],c[r]=i[t+r]-e;let s=0;for(let t=0;t<r;++t){const e=c[t+1],i=h[r-t];a[r][t]=e+i;const n=a[t][r-1]/a[r][t];a[t][r]=s+e*n,s=i*n}a[r][r]=s}for(let t=0;t<=s;++t)o[0][t]=a[t][s];for(let t=0;t<=s;++t){let e=0,i=1;const h=[];for(let t=0;t<=s;++t)h[t]=n.slice(0);h[0][0]=1;for(let n=1;n<=r;++n){let r=0;const c=t-n,l=s-n;t>=n&&(h[i][0]=h[e][0]/a[l+1][c],r=h[i][0]*a[c][l]);const u=t-1<=l?n-1:s-t;for(let t=c>=-1?1:-c;t<=u;++t)h[i][t]=(h[e][t]-h[e][t-1])/a[l+1][c+t],r+=h[i][t]*a[c+t][l];t<=l&&(h[i][n]=-h[e][n-1]/a[l+1][t],r+=h[i][n]*a[t][l]),o[n][t]=r;const p=e;e=i,i=p}}let l=s;for(let t=1;t<=r;++t){for(let e=0;e<=s;++e)o[t][e]*=l;l*=s-t}return o}(a,r,t,n,e),c=[];for(let t=0;t<s.length;++t){const e=s[t].clone(),r=e.w;e.x*=r,e.y*=r,e.z*=r,c[t]=e}for(let e=0;e<=n;++e){const s=c[a-t].clone().multiplyScalar(h[e][0]);for(let r=1;r<=t;++r)s.add(c[a-t+r].clone().multiplyScalar(h[e][r]));o[e]=s}for(let t=n+1;t<=i+1;++t)o[t]=new Me(0,0,0);return o}(t,e,s,r,i))}class Hm extends eh{constructor(t,e,s,r,i){super(),this.degree=t,this.knots=e,this.controlPoints=[],this.startKnot=r||0,this.endKnot=i||this.knots.length-1;for(let t=0;t<s.length;++t){const e=s[t];this.controlPoints[t]=new Me(e.x,e.y,e.z,e.w)}}getPoint(t,e=new Ge){const s=e,r=this.knots[this.startKnot]+t*(this.knots[this.endKnot]-this.knots[this.startKnot]),i=function(t,e,s,r){const i=Lm(t,r,e),n=function(t,e,s,r){const i=[],n=[],o=[];i[0]=1;for(let a=1;a<=s;++a){n[a]=e-r[t+1-a],o[a]=r[t+a]-e;let s=0;for(let t=0;t<a;++t){const e=o[t+1],r=n[a-t],h=i[t]/(e+r);i[t]=s+e*h,s=r*h}i[a]=s}return i}(i,r,t,e),o=new Me(0,0,0,0);for(let e=0;e<=t;++e){const r=s[i-t+e],a=n[e],h=r.w*a;o.x+=r.x*h,o.y+=r.y*h,o.z+=r.z*h,o.w+=r.w*a}return o}(this.degree,this.knots,this.controlPoints,r);return 1!==i.w&&i.divideScalar(i.w),s.set(i.x,i.y,i.z)}getTangent(t,e=new Ge){const s=e,r=this.knots[0]+t*(this.knots[this.knots.length-1]-this.knots[0]),i=Um(this.degree,this.knots,this.controlPoints,r,1);return s.copy(i[1]).normalize(),s}}let Bm,Gm,jm;class zm extends Qc{constructor(t){super(t)}load(t,e,s,r){const i=this,n=""===i.path?Rl.extractUrlBase(t):i.path,o=new el(this.manager);o.setPath(i.path),o.setResponseType("arraybuffer"),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(t,(function(s){try{e(i.parse(s,n))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),s,r)}parse(t,e){if(function(t){const e="Kaydara FBX Binary  \0";return t.byteLength>=e.length&&e===af(t,0,e.length)}(t))Bm=(new qm).parse(t);else{const e=af(t);if(!function(t){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let s=0;function r(e){const r=t[e-1];return t=t.slice(s+e),s++,r}for(let t=0;t<e.length;++t){if(r(1)===e[t])return!1}return!0}(e))throw new Error("THREE.FBXLoader: Unknown format.");if($m(e)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+$m(e));Bm=(new Xm).parse(e)}const s=new ol(this.manager).setPath(this.resourcePath||e).setCrossOrigin(this.crossOrigin);return new Vm(s,this.manager).parse(Bm)}}class Vm{constructor(t,e){this.textureLoader=t,this.manager=e}parse(){Gm=this.parseConnections();const t=this.parseImages(),e=this.parseTextures(t),s=this.parseMaterials(e),r=this.parseDeformers(),i=(new Wm).parse(r);return this.parseScene(r,i,s),jm}parseConnections(){const t=new Map;if("Connections"in Bm){Bm.Connections.connections.forEach((function(e){const s=e[0],r=e[1],i=e[2];t.has(s)||t.set(s,{parents:[],children:[]});const n={ID:r,relationship:i};t.get(s).parents.push(n),t.has(r)||t.set(r,{parents:[],children:[]});const o={ID:s,relationship:i};t.get(r).children.push(o)}))}return t}parseImages(){const t={},e={};if("Video"in Bm.Objects){const s=Bm.Objects.Video;for(const r in s){const i=s[r];if(t[parseInt(r)]=i.RelativeFilename||i.Filename,"Content"in i){const t=i.Content instanceof ArrayBuffer&&i.Content.byteLength>0,n="string"==typeof i.Content&&""!==i.Content;if(t||n){const t=this.parseImage(s[r]);e[i.RelativeFilename||i.Filename]=t}}}}for(const s in t){const r=t[s];void 0!==e[r]?t[s]=e[r]:t[s]=t[s].split("\\").pop()}return t}parseImage(t){const e=t.Content,s=t.RelativeFilename||t.Filename,r=s.slice(s.lastIndexOf(".")+1).toLowerCase();let i;switch(r){case"bmp":i="image/bmp";break;case"jpg":case"jpeg":i="image/jpeg";break;case"png":i="image/png";break;case"tif":i="image/tiff";break;case"tga":null===this.manager.getHandler(".tga")&&console.warn("FBXLoader: TGA loader not found, skipping ",s),i="image/tga";break;default:return void console.warn('FBXLoader: Image type "'+r+'" is not supported.')}if("string"==typeof e)return"data:"+i+";base64,"+e;{const t=new Uint8Array(e);return window.URL.createObjectURL(new Blob([t],{type:i}))}}parseTextures(t){const e=new Map;if("Texture"in Bm.Objects){const s=Bm.Objects.Texture;for(const r in s){const i=this.parseTexture(s[r],t);e.set(parseInt(r),i)}}return e}parseTexture(t,e){const s=this.loadTexture(t,e);s.ID=t.id,s.name=t.attrName;const r=t.WrapModeU,i=t.WrapModeV,n=void 0!==r?r.value:0,o=void 0!==i?i.value:0;if(s.wrapS=0===n?G:j,s.wrapT=0===o?G:j,"Scaling"in t){const e=t.Scaling.value;s.repeat.x=e[0],s.repeat.y=e[1]}if("Translation"in t){const e=t.Translation.value;s.offset.x=e[0],s.offset.y=e[1]}return s}loadTexture(t,e){let s;const r=this.textureLoader.path,i=Gm.get(t.id).children;let n;void 0!==i&&i.length>0&&void 0!==e[i[0].ID]&&(s=e[i[0].ID],0!==s.indexOf("blob:")&&0!==s.indexOf("data:")||this.textureLoader.setPath(void 0));const o=t.FileName.slice(-3).toLowerCase();if("tga"===o){const e=this.manager.getHandler(".tga");null===e?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",t.RelativeFilename),n=new Fe):(e.setPath(this.textureLoader.path),n=e.load(s))}else"psd"===o?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",t.RelativeFilename),n=new Fe):n=this.textureLoader.load(s);return this.textureLoader.setPath(r),n}parseMaterials(t){const e=new Map;if("Material"in Bm.Objects){const s=Bm.Objects.Material;for(const r in s){const i=this.parseMaterial(s[r],t);null!==i&&e.set(parseInt(r),i)}}return e}parseMaterial(t,e){const s=t.id,r=t.attrName;let i=t.ShadingModel;if("object"==typeof i&&(i=i.value),!Gm.has(s))return null;const n=this.parseParameters(t,e,s);let o;switch(i.toLowerCase()){case"phong":o=new Cc;break;case"lambert":o=new Dc;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',i),o=new Cc}return o.setValues(n),o.name=r,o}parseParameters(t,e,s){const r={};t.BumpFactor&&(r.bumpScale=t.BumpFactor.value),t.Diffuse?r.color=(new Ae).fromArray(t.Diffuse.value):!t.DiffuseColor||"Color"!==t.DiffuseColor.type&&"ColorRGB"!==t.DiffuseColor.type||(r.color=(new Ae).fromArray(t.DiffuseColor.value)),t.DisplacementFactor&&(r.displacementScale=t.DisplacementFactor.value),t.Emissive?r.emissive=(new Ae).fromArray(t.Emissive.value):!t.EmissiveColor||"Color"!==t.EmissiveColor.type&&"ColorRGB"!==t.EmissiveColor.type||(r.emissive=(new Ae).fromArray(t.EmissiveColor.value)),t.EmissiveFactor&&(r.emissiveIntensity=parseFloat(t.EmissiveFactor.value)),t.Opacity&&(r.opacity=parseFloat(t.Opacity.value)),r.opacity<1&&(r.transparent=!0),t.ReflectionFactor&&(r.reflectivity=t.ReflectionFactor.value),t.Shininess&&(r.shininess=t.Shininess.value),t.Specular?r.specular=(new Ae).fromArray(t.Specular.value):t.SpecularColor&&"Color"===t.SpecularColor.type&&(r.specular=(new Ae).fromArray(t.SpecularColor.value));const i=this;return Gm.get(s).children.forEach((function(t){const s=t.relationship;switch(s){case"Bump":r.bumpMap=i.getTexture(e,t.ID);break;case"Maya|TEX_ao_map":r.aoMap=i.getTexture(e,t.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":r.map=i.getTexture(e,t.ID),void 0!==r.map&&(r.map.encoding=zt);break;case"DisplacementColor":r.displacementMap=i.getTexture(e,t.ID);break;case"EmissiveColor":r.emissiveMap=i.getTexture(e,t.ID),void 0!==r.emissiveMap&&(r.emissiveMap.encoding=zt);break;case"NormalMap":case"Maya|TEX_normal_map":r.normalMap=i.getTexture(e,t.ID);break;case"ReflectionColor":r.envMap=i.getTexture(e,t.ID),void 0!==r.envMap&&(r.envMap.mapping=U,r.envMap.encoding=zt);break;case"SpecularColor":r.specularMap=i.getTexture(e,t.ID),void 0!==r.specularMap&&(r.specularMap.encoding=zt);break;case"TransparentColor":case"TransparencyFactor":r.alphaMap=i.getTexture(e,t.ID),r.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",s)}})),r}getTexture(t,e){return"LayeredTexture"in Bm.Objects&&e in Bm.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),e=Gm.get(e).children[0].ID),t.get(e)}parseDeformers(){const t={},e={};if("Deformer"in Bm.Objects){const s=Bm.Objects.Deformer;for(const r in s){const i=s[r],n=Gm.get(parseInt(r));if("Skin"===i.attrType){const e=this.parseSkeleton(n,s);e.ID=r,n.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),e.geometryID=n.parents[0].ID,t[r]=e}else if("BlendShape"===i.attrType){const t={id:r};t.rawTargets=this.parseMorphTargets(n,s),t.id=r,n.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),e[r]=t}}}return{skeletons:t,morphTargets:e}}parseSkeleton(t,e){const s=[];return t.children.forEach((function(t){const r=e[t.ID];if("Cluster"!==r.attrType)return;const i={ID:t.ID,indices:[],weights:[],transformLink:(new Ts).fromArray(r.TransformLink.a)};"Indexes"in r&&(i.indices=r.Indexes.a,i.weights=r.Weights.a),s.push(i)})),{rawBones:s,bones:[]}}parseMorphTargets(t,e){const s=[];for(let r=0;r<t.children.length;r++){const i=t.children[r],n=e[i.ID],o={name:n.attrName,initialWeight:n.DeformPercent,id:n.id,fullWeights:n.FullWeights.a};if("BlendShapeChannel"!==n.attrType)return;o.geoID=Gm.get(parseInt(i.ID)).children.filter((function(t){return void 0===t.relationship}))[0].ID,s.push(o)}return s}parseScene(t,e,s){jm=new ko;const r=this.parseModels(t.skeletons,e,s),i=Bm.Objects.Model,n=this;r.forEach((function(t){const e=i[t.ID];n.setLookAtProperties(t,e);Gm.get(t.ID).parents.forEach((function(e){const s=r.get(e.ID);void 0!==s&&s.add(t)})),null===t.parent&&jm.add(t)})),this.bindSkeleton(t.skeletons,e,r),this.createAmbientLight(),jm.traverse((function(t){if(t.userData.transformData){t.parent&&(t.userData.transformData.parentMatrix=t.parent.matrix,t.userData.transformData.parentMatrixWorld=t.parent.matrixWorld);const e=rf(t.userData.transformData);t.applyMatrix4(e),t.updateWorldMatrix()}}));const o=(new Ym).parse();1===jm.children.length&&jm.children[0].isGroup&&(jm.children[0].animations=o,jm=jm.children[0]),jm.animations=o}parseModels(t,e,s){const r=new Map,i=Bm.Objects.Model;for(const n in i){const o=parseInt(n),a=i[n],h=Gm.get(o);let c=this.buildSkeleton(h,t,o,a.attrName);if(!c){switch(a.attrType){case"Camera":c=this.createCamera(h);break;case"Light":c=this.createLight(h);break;case"Mesh":c=this.createMesh(h,e,s);break;case"NurbsCurve":c=this.createCurve(h,e);break;case"LimbNode":case"Root":c=new xa;break;case"Null":default:c=new ko}c.name=a.attrName?uu.sanitizeNodeName(a.attrName):"",c.ID=o}this.getTransformData(c,a),r.set(o,c)}return r}buildSkeleton(t,e,s,r){let i=null;return t.parents.forEach((function(t){for(const n in e){const o=e[n];o.rawBones.forEach((function(e,n){if(e.ID===t.ID){const t=i;i=new xa,i.matrixWorld.copy(e.transformLink),i.name=r?uu.sanitizeNodeName(r):"",i.ID=s,o.bones[n]=i,null!==t&&i.add(t)}}))}})),i}createCamera(t){let e,s;if(t.children.forEach((function(t){const e=Bm.Objects.NodeAttribute[t.ID];void 0!==e&&(s=e)})),void 0===s)e=new zs;else{let t=0;void 0!==s.CameraProjectionType&&1===s.CameraProjectionType.value&&(t=1);let r=1;void 0!==s.NearPlane&&(r=s.NearPlane.value/1e3);let i=1e3;void 0!==s.FarPlane&&(i=s.FarPlane.value/1e3);let n=window.innerWidth,o=window.innerHeight;void 0!==s.AspectWidth&&void 0!==s.AspectHeight&&(n=s.AspectWidth.value,o=s.AspectHeight.value);const a=n/o;let h=45;void 0!==s.FieldOfView&&(h=s.FieldOfView.value);const c=s.FocalLength?s.FocalLength.value:null;switch(t){case 0:e=new Jr(h,a,r,i),null!==c&&e.setFocalLength(c);break;case 1:e=new bi(-n/2,n/2,o/2,-o/2,r,i);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+t+"."),e=new zs}}return e}createLight(t){let e,s;if(t.children.forEach((function(t){const e=Bm.Objects.NodeAttribute[t.ID];void 0!==e&&(s=e)})),void 0===s)e=new zs;else{let t;t=void 0===s.LightType?0:s.LightType.value;let r=16777215;void 0!==s.Color&&(r=(new Ae).fromArray(s.Color.value));let i=void 0===s.Intensity?1:s.Intensity.value/100;void 0!==s.CastLightOnObject&&0===s.CastLightOnObject.value&&(i=0);let n=0;void 0!==s.FarAttenuationEnd&&(n=void 0!==s.EnableFarAttenuation&&0===s.EnableFarAttenuation.value?0:s.FarAttenuationEnd.value);const o=1;switch(t){case 0:e=new vl(r,i,n,o);break;case 1:e=new wl(r,i);break;case 2:let t=Math.PI/3;void 0!==s.InnerAngle&&(t=ce.degToRad(s.InnerAngle.value));let a=0;void 0!==s.OuterAngle&&(a=ce.degToRad(s.OuterAngle.value),a=Math.max(a,1)),e=new ml(r,i,n,t,a,o);break;default:console.warn("THREE.FBXLoader: Unknown light type "+s.LightType.value+", defaulting to a PointLight."),e=new vl(r,i)}void 0!==s.CastShadows&&1===s.CastShadows.value&&(e.castShadow=!0)}return e}createMesh(t,e,s){let r,i=null,n=null;const o=[];return t.children.forEach((function(t){e.has(t.ID)&&(i=e.get(t.ID)),s.has(t.ID)&&o.push(s.get(t.ID))})),o.length>1?n=o:o.length>0?n=o[0]:(n=new Cc({color:13421772}),o.push(n)),"color"in i.attributes&&o.forEach((function(t){t.vertexColors=!0})),i.FBX_Deformer?(r=new wa(i,n),r.normalizeSkinWeights()):r=new jr(i,n),r}createCurve(t,e){const s=t.children.reduce((function(t,s){return e.has(s.ID)&&(t=e.get(s.ID)),t}),null),r=new Ma({color:3342591,linewidth:1});return new Ha(s,r)}getTransformData(t,e){const s={};"InheritType"in e&&(s.inheritType=parseInt(e.InheritType.value)),s.eulerOrder="RotationOrder"in e?nf(e.RotationOrder.value):"ZYX","Lcl_Translation"in e&&(s.translation=e.Lcl_Translation.value),"PreRotation"in e&&(s.preRotation=e.PreRotation.value),"Lcl_Rotation"in e&&(s.rotation=e.Lcl_Rotation.value),"PostRotation"in e&&(s.postRotation=e.PostRotation.value),"Lcl_Scaling"in e&&(s.scale=e.Lcl_Scaling.value),"ScalingOffset"in e&&(s.scalingOffset=e.ScalingOffset.value),"ScalingPivot"in e&&(s.scalingPivot=e.ScalingPivot.value),"RotationOffset"in e&&(s.rotationOffset=e.RotationOffset.value),"RotationPivot"in e&&(s.rotationPivot=e.RotationPivot.value),t.userData.transformData=s}setLookAtProperties(t,e){if("LookAtProperty"in e){Gm.get(t.ID).children.forEach((function(e){if("LookAtProperty"===e.relationship){const s=Bm.Objects.Model[e.ID];if("Lcl_Translation"in s){const e=s.Lcl_Translation.value;void 0!==t.target?(t.target.position.fromArray(e),jm.add(t.target)):t.lookAt((new Ge).fromArray(e))}}}))}}bindSkeleton(t,e,s){const r=this.parsePoseNodes();for(const i in t){const n=t[i];Gm.get(parseInt(n.ID)).parents.forEach((function(t){if(e.has(t.ID)){const e=t.ID;Gm.get(e).parents.forEach((function(t){if(s.has(t.ID)){s.get(t.ID).bind(new Aa(n.bones),r[t.ID])}}))}}))}}parsePoseNodes(){const t={};if("Pose"in Bm.Objects){const e=Bm.Objects.Pose;for(const s in e)if("BindPose"===e[s].attrType&&e[s].NbPoseNodes>0){const r=e[s].PoseNode;Array.isArray(r)?r.forEach((function(e){t[e.Node]=(new Ts).fromArray(e.Matrix.a)})):t[r.Node]=(new Ts).fromArray(r.Matrix.a)}}return t}createAmbientLight(){if("GlobalSettings"in Bm&&"AmbientColor"in Bm.GlobalSettings){const t=Bm.GlobalSettings.AmbientColor.value,e=t[0],s=t[1],r=t[2];if(0!==e||0!==s||0!==r){const t=new Ae(e,s,r);jm.add(new xl(t,1))}}}}class Wm{parse(t){const e=new Map;if("Geometry"in Bm.Objects){const s=Bm.Objects.Geometry;for(const r in s){const i=Gm.get(parseInt(r)),n=this.parseGeometry(i,s[r],t);e.set(parseInt(r),n)}}return e}parseGeometry(t,e,s){switch(e.attrType){case"Mesh":return this.parseMeshGeometry(t,e,s);case"NurbsCurve":return this.parseNurbsGeometry(e)}}parseMeshGeometry(t,e,s){const r=s.skeletons,i=[],n=t.parents.map((function(t){return Bm.Objects.Model[t.ID]}));if(0===n.length)return;const o=t.children.reduce((function(t,e){return void 0!==r[e.ID]&&(t=r[e.ID]),t}),null);t.children.forEach((function(t){void 0!==s.morphTargets[t.ID]&&i.push(s.morphTargets[t.ID])}));const a=n[0],h={};"RotationOrder"in a&&(h.eulerOrder=nf(a.RotationOrder.value)),"InheritType"in a&&(h.inheritType=parseInt(a.InheritType.value)),"GeometricTranslation"in a&&(h.translation=a.GeometricTranslation.value),"GeometricRotation"in a&&(h.rotation=a.GeometricRotation.value),"GeometricScaling"in a&&(h.scale=a.GeometricScaling.value);const c=rf(h);return this.genGeometry(e,o,i,c)}genGeometry(t,e,s,r){const i=new Er;t.attrName&&(i.name=t.attrName);const n=this.parseGeoNode(t,e),o=this.genBuffers(n),a=new fr(o.vertex,3);if(a.applyMatrix4(r),i.setAttribute("position",a),o.colors.length>0&&i.setAttribute("color",new fr(o.colors,3)),e&&(i.setAttribute("skinIndex",new ur(o.weightsIndices,4)),i.setAttribute("skinWeight",new fr(o.vertexWeights,4)),i.FBX_Deformer=e),o.normal.length>0){const t=(new ue).getNormalMatrix(r),e=new fr(o.normal,3);e.applyNormalMatrix(t),i.setAttribute("normal",e)}if(o.uvs.forEach((function(t,e){let s="uv"+(e+1).toString();0===e&&(s="uv"),i.setAttribute(s,new fr(o.uvs[e],2))})),n.material&&"AllSame"!==n.material.mappingType){let t=o.materialIndex[0],e=0;if(o.materialIndex.forEach((function(s,r){s!==t&&(i.addGroup(e,r-e,t),t=s,e=r)})),i.groups.length>0){const e=i.groups[i.groups.length-1],s=e.start+e.count;s!==o.materialIndex.length&&i.addGroup(s,o.materialIndex.length-s,t)}0===i.groups.length&&i.addGroup(0,o.materialIndex.length,o.materialIndex[0])}return this.addMorphTargets(i,t,s,r),i}parseGeoNode(t,e){const s={};if(s.vertexPositions=void 0!==t.Vertices?t.Vertices.a:[],s.vertexIndices=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],t.LayerElementColor&&(s.color=this.parseVertexColors(t.LayerElementColor[0])),t.LayerElementMaterial&&(s.material=this.parseMaterialIndices(t.LayerElementMaterial[0])),t.LayerElementNormal&&(s.normal=this.parseNormals(t.LayerElementNormal[0])),t.LayerElementUV){s.uv=[];let e=0;for(;t.LayerElementUV[e];)t.LayerElementUV[e].UV&&s.uv.push(this.parseUVs(t.LayerElementUV[e])),e++}return s.weightTable={},null!==e&&(s.skeleton=e,e.rawBones.forEach((function(t,e){t.indices.forEach((function(r,i){void 0===s.weightTable[r]&&(s.weightTable[r]=[]),s.weightTable[r].push({id:e,weight:t.weights[i]})}))}))),s}genBuffers(t){const e={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let s=0,r=0,i=!1,n=[],o=[],a=[],h=[],c=[],l=[];const u=this;return t.vertexIndices.forEach((function(p,d){let m,f=!1;p<0&&(p^=-1,f=!0);let g=[],y=[];if(n.push(3*p,3*p+1,3*p+2),t.color){const e=tf(d,s,p,t.color);a.push(e[0],e[1],e[2])}if(t.skeleton){if(void 0!==t.weightTable[p]&&t.weightTable[p].forEach((function(t){y.push(t.weight),g.push(t.id)})),y.length>4){i||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),i=!0);const t=[0,0,0,0],e=[0,0,0,0];y.forEach((function(s,r){let i=s,n=g[r];e.forEach((function(e,s,r){if(i>e){r[s]=i,i=e;const o=t[s];t[s]=n,n=o}}))})),g=t,y=e}for(;y.length<4;)y.push(0),g.push(0);for(let t=0;t<4;++t)c.push(y[t]),l.push(g[t])}if(t.normal){const e=tf(d,s,p,t.normal);o.push(e[0],e[1],e[2])}t.material&&"AllSame"!==t.material.mappingType&&(m=tf(d,s,p,t.material)[0]),t.uv&&t.uv.forEach((function(t,e){const r=tf(d,s,p,t);void 0===h[e]&&(h[e]=[]),h[e].push(r[0]),h[e].push(r[1])})),r++,f&&(u.genFace(e,t,n,m,o,a,h,c,l,r),s++,r=0,n=[],o=[],a=[],h=[],c=[],l=[])})),e}genFace(t,e,s,r,i,n,o,a,h,c){for(let l=2;l<c;l++)t.vertex.push(e.vertexPositions[s[0]]),t.vertex.push(e.vertexPositions[s[1]]),t.vertex.push(e.vertexPositions[s[2]]),t.vertex.push(e.vertexPositions[s[3*(l-1)]]),t.vertex.push(e.vertexPositions[s[3*(l-1)+1]]),t.vertex.push(e.vertexPositions[s[3*(l-1)+2]]),t.vertex.push(e.vertexPositions[s[3*l]]),t.vertex.push(e.vertexPositions[s[3*l+1]]),t.vertex.push(e.vertexPositions[s[3*l+2]]),e.skeleton&&(t.vertexWeights.push(a[0]),t.vertexWeights.push(a[1]),t.vertexWeights.push(a[2]),t.vertexWeights.push(a[3]),t.vertexWeights.push(a[4*(l-1)]),t.vertexWeights.push(a[4*(l-1)+1]),t.vertexWeights.push(a[4*(l-1)+2]),t.vertexWeights.push(a[4*(l-1)+3]),t.vertexWeights.push(a[4*l]),t.vertexWeights.push(a[4*l+1]),t.vertexWeights.push(a[4*l+2]),t.vertexWeights.push(a[4*l+3]),t.weightsIndices.push(h[0]),t.weightsIndices.push(h[1]),t.weightsIndices.push(h[2]),t.weightsIndices.push(h[3]),t.weightsIndices.push(h[4*(l-1)]),t.weightsIndices.push(h[4*(l-1)+1]),t.weightsIndices.push(h[4*(l-1)+2]),t.weightsIndices.push(h[4*(l-1)+3]),t.weightsIndices.push(h[4*l]),t.weightsIndices.push(h[4*l+1]),t.weightsIndices.push(h[4*l+2]),t.weightsIndices.push(h[4*l+3])),e.color&&(t.colors.push(n[0]),t.colors.push(n[1]),t.colors.push(n[2]),t.colors.push(n[3*(l-1)]),t.colors.push(n[3*(l-1)+1]),t.colors.push(n[3*(l-1)+2]),t.colors.push(n[3*l]),t.colors.push(n[3*l+1]),t.colors.push(n[3*l+2])),e.material&&"AllSame"!==e.material.mappingType&&(t.materialIndex.push(r),t.materialIndex.push(r),t.materialIndex.push(r)),e.normal&&(t.normal.push(i[0]),t.normal.push(i[1]),t.normal.push(i[2]),t.normal.push(i[3*(l-1)]),t.normal.push(i[3*(l-1)+1]),t.normal.push(i[3*(l-1)+2]),t.normal.push(i[3*l]),t.normal.push(i[3*l+1]),t.normal.push(i[3*l+2])),e.uv&&e.uv.forEach((function(e,s){void 0===t.uvs[s]&&(t.uvs[s]=[]),t.uvs[s].push(o[s][0]),t.uvs[s].push(o[s][1]),t.uvs[s].push(o[s][2*(l-1)]),t.uvs[s].push(o[s][2*(l-1)+1]),t.uvs[s].push(o[s][2*l]),t.uvs[s].push(o[s][2*l+1])}))}addMorphTargets(t,e,s,r){if(0===s.length)return;t.morphTargetsRelative=!0,t.morphAttributes.position=[];const i=this;s.forEach((function(s){s.rawTargets.forEach((function(s){const n=Bm.Objects.Geometry[s.geoID];void 0!==n&&i.genMorphGeometry(t,e,n,r,s.name)}))}))}genMorphGeometry(t,e,s,r,i){const n=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],o=void 0!==s.Vertices?s.Vertices.a:[],a=void 0!==s.Indexes?s.Indexes.a:[],h=3*t.attributes.position.count,c=new Float32Array(h);for(let t=0;t<a.length;t++){const e=3*a[t];c[e]=o[3*t],c[e+1]=o[3*t+1],c[e+2]=o[3*t+2]}const l={vertexIndices:n,vertexPositions:c},u=this.genBuffers(l),p=new fr(u.vertex,3);p.name=i||s.attrName,p.applyMatrix4(r),t.morphAttributes.position.push(p)}parseNormals(t){const e=t.MappingInformationType,s=t.ReferenceInformationType,r=t.Normals.a;let i=[];return"IndexToDirect"===s&&("NormalIndex"in t?i=t.NormalIndex.a:"NormalsIndex"in t&&(i=t.NormalsIndex.a)),{dataSize:3,buffer:r,indices:i,mappingType:e,referenceType:s}}parseUVs(t){const e=t.MappingInformationType,s=t.ReferenceInformationType,r=t.UV.a;let i=[];return"IndexToDirect"===s&&(i=t.UVIndex.a),{dataSize:2,buffer:r,indices:i,mappingType:e,referenceType:s}}parseVertexColors(t){const e=t.MappingInformationType,s=t.ReferenceInformationType,r=t.Colors.a;let i=[];return"IndexToDirect"===s&&(i=t.ColorIndex.a),{dataSize:4,buffer:r,indices:i,mappingType:e,referenceType:s}}parseMaterialIndices(t){const e=t.MappingInformationType,s=t.ReferenceInformationType;if("NoMappingInformation"===e)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:s};const r=t.Materials.a,i=[];for(let t=0;t<r.length;++t)i.push(t);return{dataSize:1,buffer:r,indices:i,mappingType:e,referenceType:s}}parseNurbsGeometry(t){if(void 0===Hm)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new Er;const e=parseInt(t.Order);if(isNaN(e))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",t.Order,t.id),new Er;const s=e-1,r=t.KnotVector.a,i=[],n=t.Points.a;for(let t=0,e=n.length;t<e;t+=4)i.push((new Me).fromArray(n,t));let o,a;if("Closed"===t.Form)i.push(i[0]);else if("Periodic"===t.Form){o=s,a=r.length-1-o;for(let t=0;t<s;++t)i.push(i[t])}const h=new Hm(s,r,i,o,a).getPoints(12*i.length);return(new Er).setFromPoints(h)}}class Ym{parse(){const t=[],e=this.parseClips();if(void 0!==e)for(const s in e){const r=e[s],i=this.addClip(r);t.push(i)}return t}parseClips(){if(void 0===Bm.Objects.AnimationCurve)return;const t=this.parseAnimationCurveNodes();this.parseAnimationCurves(t);const e=this.parseAnimationLayers(t);return this.parseAnimStacks(e)}parseAnimationCurveNodes(){const t=Bm.Objects.AnimationCurveNode,e=new Map;for(const s in t){const r=t[s];if(null!==r.attrName.match(/S|R|T|DeformPercent/)){const t={id:r.id,attr:r.attrName,curves:{}};e.set(t.id,t)}}return e}parseAnimationCurves(t){const e=Bm.Objects.AnimationCurve;for(const s in e){const r={id:e[s].id,times:e[s].KeyTime.a.map(Zm),values:e[s].KeyValueFloat.a},i=Gm.get(r.id);if(void 0!==i){const e=i.parents[0].ID,s=i.parents[0].relationship;s.match(/X/)?t.get(e).curves.x=r:s.match(/Y/)?t.get(e).curves.y=r:s.match(/Z/)?t.get(e).curves.z=r:s.match(/d|DeformPercent/)&&t.has(e)&&(t.get(e).curves.morph=r)}}}parseAnimationLayers(t){const e=Bm.Objects.AnimationLayer,s=new Map;for(const r in e){const e=[],i=Gm.get(parseInt(r));if(void 0!==i){i.children.forEach((function(s,r){if(t.has(s.ID)){const i=t.get(s.ID);if(void 0!==i.curves.x||void 0!==i.curves.y||void 0!==i.curves.z){if(void 0===e[r]){const t=Gm.get(s.ID).parents.filter((function(t){return void 0!==t.relationship}))[0].ID;if(void 0!==t){const i=Bm.Objects.Model[t.toString()];if(void 0===i)return void console.warn("THREE.FBXLoader: Encountered a unused curve.",s);const n={modelName:i.attrName?uu.sanitizeNodeName(i.attrName):"",ID:i.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};jm.traverse((function(t){t.ID===i.id&&(n.transform=t.matrix,t.userData.transformData&&(n.eulerOrder=t.userData.transformData.eulerOrder))})),n.transform||(n.transform=new Ts),"PreRotation"in i&&(n.preRotation=i.PreRotation.value),"PostRotation"in i&&(n.postRotation=i.PostRotation.value),e[r]=n}}e[r]&&(e[r][i.attr]=i)}else if(void 0!==i.curves.morph){if(void 0===e[r]){const t=Gm.get(s.ID).parents.filter((function(t){return void 0!==t.relationship}))[0].ID,i=Gm.get(t).parents[0].ID,n=Gm.get(i).parents[0].ID,o=Gm.get(n).parents[0].ID,a=Bm.Objects.Model[o],h={modelName:a.attrName?uu.sanitizeNodeName(a.attrName):"",morphName:Bm.Objects.Deformer[t].attrName};e[r]=h}e[r][i.attr]=i}}})),s.set(parseInt(r),e)}}return s}parseAnimStacks(t){const e=Bm.Objects.AnimationStack,s={};for(const r in e){const i=Gm.get(parseInt(r)).children;i.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const n=t.get(i[0].ID);s[r]={name:e[r].attrName,layer:n}}return s}addClip(t){let e=[];const s=this;return t.layer.forEach((function(t){e=e.concat(s.generateTracks(t))})),new qc(t.name,-1,e)}generateTracks(t){const e=[];let s=new Ge,r=new Be,i=new Ge;if(t.transform&&t.transform.decompose(s,r,i),s=s.toArray(),r=(new Cs).setFromQuaternion(r,t.eulerOrder).toArray(),i=i.toArray(),void 0!==t.T&&Object.keys(t.T.curves).length>0){const r=this.generateVectorTrack(t.modelName,t.T.curves,s,"position");void 0!==r&&e.push(r)}if(void 0!==t.R&&Object.keys(t.R.curves).length>0){const s=this.generateRotationTrack(t.modelName,t.R.curves,r,t.preRotation,t.postRotation,t.eulerOrder);void 0!==s&&e.push(s)}if(void 0!==t.S&&Object.keys(t.S.curves).length>0){const s=this.generateVectorTrack(t.modelName,t.S.curves,i,"scale");void 0!==s&&e.push(s)}if(void 0!==t.DeformPercent){const s=this.generateMorphTrack(t);void 0!==s&&e.push(s)}return e}generateVectorTrack(t,e,s,r){const i=this.getTimesForAllAxes(e),n=this.getKeyframeTrackValues(i,e,s);return new Xc(t+"."+r,i,n)}generateRotationTrack(t,e,s,r,i,n){void 0!==e.x&&(this.interpolateRotations(e.x),e.x.values=e.x.values.map(ce.degToRad)),void 0!==e.y&&(this.interpolateRotations(e.y),e.y.values=e.y.values.map(ce.degToRad)),void 0!==e.z&&(this.interpolateRotations(e.z),e.z.values=e.z.values.map(ce.degToRad));const o=this.getTimesForAllAxes(e),a=this.getKeyframeTrackValues(o,e,s);void 0!==r&&((r=r.map(ce.degToRad)).push(n),r=(new Cs).fromArray(r),r=(new Be).setFromEuler(r)),void 0!==i&&((i=i.map(ce.degToRad)).push(n),i=(new Cs).fromArray(i),i=(new Be).setFromEuler(i).invert());const h=new Be,c=new Cs,l=[];for(let t=0;t<a.length;t+=3)c.set(a[t],a[t+1],a[t+2],n),h.setFromEuler(c),void 0!==r&&h.premultiply(r),void 0!==i&&h.multiply(i),h.toArray(l,t/3*4);return new Wc(t+".quaternion",o,l)}generateMorphTrack(t){const e=t.DeformPercent.curves.morph,s=e.values.map((function(t){return t/100})),r=jm.getObjectByName(t.modelName).morphTargetDictionary[t.morphName];return new zc(t.modelName+".morphTargetInfluences["+r+"]",e.times,s)}getTimesForAllAxes(t){let e=[];if(void 0!==t.x&&(e=e.concat(t.x.times)),void 0!==t.y&&(e=e.concat(t.y.times)),void 0!==t.z&&(e=e.concat(t.z.times)),e=e.sort((function(t,e){return t-e})),e.length>1){let t=1,s=e[0];for(let r=1;r<e.length;r++){const i=e[r];i!==s&&(e[t]=i,s=i,t++)}e=e.slice(0,t)}return e}getKeyframeTrackValues(t,e,s){const r=s,i=[];let n=-1,o=-1,a=-1;return t.forEach((function(t){if(e.x&&(n=e.x.times.indexOf(t)),e.y&&(o=e.y.times.indexOf(t)),e.z&&(a=e.z.times.indexOf(t)),-1!==n){const t=e.x.values[n];i.push(t),r[0]=t}else i.push(r[0]);if(-1!==o){const t=e.y.values[o];i.push(t),r[1]=t}else i.push(r[1]);if(-1!==a){const t=e.z.values[a];i.push(t),r[2]=t}else i.push(r[2])})),i}interpolateRotations(t){for(let e=1;e<t.values.length;e++){const s=t.values[e-1],r=t.values[e]-s,i=Math.abs(r);if(i>=180){const n=i/180,o=r/n;let a=s+o;const h=t.times[e-1],c=(t.times[e]-h)/n;let l=h+c;const u=[],p=[];for(;l<t.times[e];)u.push(l),l+=c,p.push(a),a+=o;t.times=hf(t.times,e,u),t.values=hf(t.values,e,p)}}}}class Xm{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(t){this.nodeStack.push(t),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(t,e){this.currentProp=t,this.currentPropName=e}parse(t){this.currentIndent=0,this.allNodes=new Jm,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const e=this,s=t.split(/[\r\n]+/);return s.forEach((function(t,r){const i=t.match(/^[\s\t]*;/),n=t.match(/^[\s\t]*$/);if(i||n)return;const o=t.match("^\\t{"+e.currentIndent+"}(\\w+):(.*){",""),a=t.match("^\\t{"+e.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),h=t.match("^\\t{"+(e.currentIndent-1)+"}}");o?e.parseNodeBegin(t,o):a?e.parseNodeProperty(t,a,s[++r]):h?e.popStack():t.match(/^[^\s\t}]/)&&e.parseNodePropertyContinued(t)})),this.allNodes}parseNodeBegin(t,e){const s=e[1].trim().replace(/^"/,"").replace(/"$/,""),r=e[2].split(",").map((function(t){return t.trim().replace(/^"/,"").replace(/"$/,"")})),i={name:s},n=this.parseNodeAttr(r),o=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(s,i):s in o?("PoseNode"===s?o.PoseNode.push(i):void 0!==o[s].id&&(o[s]={},o[s][o[s].id]=o[s]),""!==n.id&&(o[s][n.id]=i)):"number"==typeof n.id?(o[s]={},o[s][n.id]=i):"Properties70"!==s&&(o[s]="PoseNode"===s?[i]:i),"number"==typeof n.id&&(i.id=n.id),""!==n.name&&(i.attrName=n.name),""!==n.type&&(i.attrType=n.type),this.pushStack(i)}parseNodeAttr(t){let e=t[0];""!==t[0]&&(e=parseInt(t[0]),isNaN(e)&&(e=t[0]));let s="",r="";return t.length>1&&(s=t[1].replace(/^(\w+)::/,""),r=t[2]),{id:e,name:s,type:r}}parseNodeProperty(t,e,s){let r=e[1].replace(/^"/,"").replace(/"$/,"").trim(),i=e[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===r&&","===i&&(i=s.replace(/"/g,"").replace(/,$/,"").trim());const n=this.getCurrentNode();if("Properties70"!==n.name){if("C"===r){const t=i.split(",").slice(1),e=parseInt(t[0]),s=parseInt(t[1]);let o=i.split(",").slice(3);o=o.map((function(t){return t.trim().replace(/^"/,"")})),r="connections",i=[e,s],function(t,e){for(let s=0,r=t.length,i=e.length;s<i;s++,r++)t[r]=e[s]}(i,o),void 0===n[r]&&(n[r]=[])}"Node"===r&&(n.id=i),r in n&&Array.isArray(n[r])?n[r].push(i):"a"!==r?n[r]=i:n.a=i,this.setCurrentProp(n,r),"a"===r&&","!==i.slice(-1)&&(n.a=of(i))}else this.parseNodeSpecialProperty(t,r,i)}parseNodePropertyContinued(t){const e=this.getCurrentNode();e.a+=t,","!==t.slice(-1)&&(e.a=of(e.a))}parseNodeSpecialProperty(t,e,s){const r=s.split('",').map((function(t){return t.trim().replace(/^\"/,"").replace(/\s/,"_")})),i=r[0],n=r[1],o=r[2],a=r[3];let h=r[4];switch(n){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":h=parseFloat(h);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":h=of(h)}this.getPrevNode()[i]={type:n,type2:o,flag:a,value:h},this.setCurrentProp(this.getPrevNode(),i)}}class qm{parse(t){const e=new Km(t);e.skip(23);const s=e.getUint32();if(s<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+s);const r=new Jm;for(;!this.endOfContent(e);){const t=this.parseNode(e,s);null!==t&&r.add(t.name,t)}return r}endOfContent(t){return t.size()%16==0?(t.getOffset()+160+16&-16)>=t.size():t.getOffset()+160+16>=t.size()}parseNode(t,e){const s={},r=e>=7500?t.getUint64():t.getUint32(),i=e>=7500?t.getUint64():t.getUint32();e>=7500?t.getUint64():t.getUint32();const n=t.getUint8(),o=t.getString(n);if(0===r)return null;const a=[];for(let e=0;e<i;e++)a.push(this.parseProperty(t));const h=a.length>0?a[0]:"",c=a.length>1?a[1]:"",l=a.length>2?a[2]:"";for(s.singleProperty=1===i&&t.getOffset()===r;r>t.getOffset();){const r=this.parseNode(t,e);null!==r&&this.parseSubNode(o,s,r)}return s.propertyList=a,"number"==typeof h&&(s.id=h),""!==c&&(s.attrName=c),""!==l&&(s.attrType=l),""!==o&&(s.name=o),s}parseSubNode(t,e,s){if(!0===s.singleProperty){const t=s.propertyList[0];Array.isArray(t)?(e[s.name]=s,s.a=t):e[s.name]=t}else if("Connections"===t&&"C"===s.name){const t=[];s.propertyList.forEach((function(e,s){0!==s&&t.push(e)})),void 0===e.connections&&(e.connections=[]),e.connections.push(t)}else if("Properties70"===s.name){Object.keys(s).forEach((function(t){e[t]=s[t]}))}else if("Properties70"===t&&"P"===s.name){let t=s.propertyList[0],r=s.propertyList[1];const i=s.propertyList[2],n=s.propertyList[3];let o;0===t.indexOf("Lcl ")&&(t=t.replace("Lcl ","Lcl_")),0===r.indexOf("Lcl ")&&(r=r.replace("Lcl ","Lcl_")),o="Color"===r||"ColorRGB"===r||"Vector"===r||"Vector3D"===r||0===r.indexOf("Lcl_")?[s.propertyList[4],s.propertyList[5],s.propertyList[6]]:s.propertyList[4],e[t]={type:r,type2:i,flag:n,value:o}}else void 0===e[s.name]?"number"==typeof s.id?(e[s.name]={},e[s.name][s.id]=s):e[s.name]=s:"PoseNode"===s.name?(Array.isArray(e[s.name])||(e[s.name]=[e[s.name]]),e[s.name].push(s)):void 0===e[s.name][s.id]&&(e[s.name][s.id]=s)}parseProperty(t){const e=t.getString(1);let s;switch(e){case"C":return t.getBoolean();case"D":return t.getFloat64();case"F":return t.getFloat32();case"I":return t.getInt32();case"L":return t.getInt64();case"R":return s=t.getUint32(),t.getArrayBuffer(s);case"S":return s=t.getUint32(),t.getString(s);case"Y":return t.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const r=t.getUint32(),i=t.getUint32(),n=t.getUint32();if(0===i)switch(e){case"b":case"c":return t.getBooleanArray(r);case"d":return t.getFloat64Array(r);case"f":return t.getFloat32Array(r);case"i":return t.getInt32Array(r);case"l":return t.getInt64Array(r)}void 0===Sm&&console.error("THREE.FBXLoader: External library fflate.min.js required.");const o=$d(new Uint8Array(t.getArrayBuffer(n))),a=new Km(o.buffer);switch(e){case"b":case"c":return a.getBooleanArray(r);case"d":return a.getFloat64Array(r);case"f":return a.getFloat32Array(r);case"i":return a.getInt32Array(r);case"l":return a.getInt64Array(r)}default:throw new Error("THREE.FBXLoader: Unknown property type "+e)}}}class Km{constructor(t,e){this.dv=new DataView(t),this.offset=0,this.littleEndian=void 0===e||e}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(t){this.offset+=t}getBoolean(){return 1==(1&this.getUint8())}getBooleanArray(t){const e=[];for(let s=0;s<t;s++)e.push(this.getBoolean());return e}getUint8(){const t=this.dv.getUint8(this.offset);return this.offset+=1,t}getInt16(){const t=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}getInt32(){const t=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}getInt32Array(t){const e=[];for(let s=0;s<t;s++)e.push(this.getInt32());return e}getUint32(){const t=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}getInt64(){let t,e;return this.littleEndian?(t=this.getUint32(),e=this.getUint32()):(e=this.getUint32(),t=this.getUint32()),2147483648&e?(e=4294967295&~e,t=4294967295&~t,4294967295===t&&(e=e+1&4294967295),t=t+1&4294967295,-(4294967296*e+t)):4294967296*e+t}getInt64Array(t){const e=[];for(let s=0;s<t;s++)e.push(this.getInt64());return e}getUint64(){let t,e;return this.littleEndian?(t=this.getUint32(),e=this.getUint32()):(e=this.getUint32(),t=this.getUint32()),4294967296*e+t}getFloat32(){const t=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}getFloat32Array(t){const e=[];for(let s=0;s<t;s++)e.push(this.getFloat32());return e}getFloat64(){const t=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}getFloat64Array(t){const e=[];for(let s=0;s<t;s++)e.push(this.getFloat64());return e}getArrayBuffer(t){const e=this.dv.buffer.slice(this.offset,this.offset+t);return this.offset+=t,e}getString(t){let e=[];for(let s=0;s<t;s++)e[s]=this.getUint8();const s=e.indexOf(0);return s>=0&&(e=e.slice(0,s)),Rl.decodeText(new Uint8Array(e))}}class Jm{add(t,e){this[t]=e}}function $m(t){const e=t.match(/FBXVersion: (\d+)/);if(e){return parseInt(e[1])}throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Zm(t){return t/46186158e3}const Qm=[];function tf(t,e,s,r){let i;switch(r.mappingType){case"ByPolygonVertex":i=t;break;case"ByPolygon":i=e;break;case"ByVertice":i=s;break;case"AllSame":i=r.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+r.mappingType)}"IndexToDirect"===r.referenceType&&(i=r.indices[i]);const n=i*r.dataSize,o=n+r.dataSize;return function(t,e,s,r){for(let i=s,n=0;i<r;i++,n++)t[n]=e[i];return t}(Qm,r.buffer,n,o)}const ef=new Cs,sf=new Ge;function rf(t){const e=new Ts,s=new Ts,r=new Ts,i=new Ts,n=new Ts,o=new Ts,a=new Ts,h=new Ts,c=new Ts,l=new Ts,u=new Ts,p=new Ts,d=t.inheritType?t.inheritType:0;if(t.translation&&e.setPosition(sf.fromArray(t.translation)),t.preRotation){const e=t.preRotation.map(ce.degToRad);e.push(t.eulerOrder),s.makeRotationFromEuler(ef.fromArray(e))}if(t.rotation){const e=t.rotation.map(ce.degToRad);e.push(t.eulerOrder),r.makeRotationFromEuler(ef.fromArray(e))}if(t.postRotation){const e=t.postRotation.map(ce.degToRad);e.push(t.eulerOrder),i.makeRotationFromEuler(ef.fromArray(e)),i.invert()}t.scale&&n.scale(sf.fromArray(t.scale)),t.scalingOffset&&a.setPosition(sf.fromArray(t.scalingOffset)),t.scalingPivot&&o.setPosition(sf.fromArray(t.scalingPivot)),t.rotationOffset&&h.setPosition(sf.fromArray(t.rotationOffset)),t.rotationPivot&&c.setPosition(sf.fromArray(t.rotationPivot)),t.parentMatrixWorld&&(u.copy(t.parentMatrix),l.copy(t.parentMatrixWorld));const m=s.clone().multiply(r).multiply(i),f=new Ts;f.extractRotation(l);const g=new Ts;g.copyPosition(l);const y=g.clone().invert().multiply(l),T=f.clone().invert().multiply(y),v=n,b=new Ts;if(0===d)b.copy(f).multiply(m).multiply(T).multiply(v);else if(1===d)b.copy(f).multiply(T).multiply(m).multiply(v);else{const t=(new Ts).scale((new Ge).setFromMatrixScale(u)).clone().invert(),e=T.clone().multiply(t);b.copy(f).multiply(m).multiply(e).multiply(v)}const w=c.clone().invert(),x=o.clone().invert();let I=e.clone().multiply(h).multiply(c).multiply(s).multiply(r).multiply(i).multiply(w).multiply(a).multiply(o).multiply(n).multiply(x);const E=(new Ts).copyPosition(I),S=l.clone().multiply(E);return p.copyPosition(S),I=p.clone().multiply(b),I.premultiply(l.invert()),I}function nf(t){const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return 6===(t=t||0)?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[t]}function of(t){return t.split(",").map((function(t){return parseFloat(t)}))}function af(t,e,s){return void 0===e&&(e=0),void 0===s&&(s=t.byteLength),Rl.decodeText(new Uint8Array(t,e,s))}function hf(t,e,s){return t.slice(0,e).concat(s).concat(t.slice(e))}class cf extends Qc{constructor(t){super(t)}load(t,e,s,r){const i=this,n=new el(this.manager);n.setPath(this.path),n.setRequestHeader(this.requestHeader),n.setWithCredentials(i.withCredentials),n.load(t,(function(t){let s;try{s=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),s=JSON.parse(t.substring(65,t.length-2))}const r=i.parse(s);e&&e(r)}),s,r)}parse(t){return new lf(t)}}class lf{constructor(t){this.type="Font",this.data=t}generateShapes(t,e=100){const s=[],r=function(t,e,s){const r=Array.from(t),i=e/s.resolution,n=(s.boundingBox.yMax-s.boundingBox.yMin+s.underlineThickness)*i,o=[];let a=0,h=0;for(let t=0;t<r.length;t++){const e=r[t];if("\n"===e)a=0,h-=n;else{const t=uf(e,i,a,h,s);a+=t.offsetX,o.push(t.path)}}return o}(t,e,this.data);for(let t=0,e=r.length;t<e;t++)Array.prototype.push.apply(s,r[t].toShapes());return s}}function uf(t,e,s,r,i){const n=i.glyphs[t]||i.glyphs["?"];if(!n)return void console.error('THREE.Font: character "'+t+'" does not exists in font family '+i.familyName+".");const o=new Ku;let a,h,c,l,u,p,d,m;if(n.o){const t=n._cachedOutline||(n._cachedOutline=n.o.split(" "));for(let i=0,n=t.length;i<n;){switch(t[i++]){case"m":a=t[i++]*e+s,h=t[i++]*e+r,o.moveTo(a,h);break;case"l":a=t[i++]*e+s,h=t[i++]*e+r,o.lineTo(a,h);break;case"q":c=t[i++]*e+s,l=t[i++]*e+r,u=t[i++]*e+s,p=t[i++]*e+r,o.quadraticCurveTo(u,p,c,l);break;case"b":c=t[i++]*e+s,l=t[i++]*e+r,u=t[i++]*e+s,p=t[i++]*e+r,d=t[i++]*e+s,m=t[i++]*e+r,o.bezierCurveTo(u,p,d,m,c,l)}}}return{offsetX:n.ha*e,path:o}}lf.prototype.isFont=!0;class pf extends Qc{constructor(t){super(t),this.splitLayer=!1}load(t,e,s,r){const i=this,n=new el(i.manager);n.setPath(i.path),n.setRequestHeader(i.requestHeader),n.setWithCredentials(i.withCredentials),n.load(t,(function(s){try{e(i.parse(s))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),s,r)}parse(t){let e={x:0,y:0,z:0,e:0,f:0,extruding:!1,relative:!1};const s=[];let r;const i=new Ma({color:16711680});i.name="path";const n=new Ma({color:65280});function o(t){r={vertex:[],pathVertex:[],z:t.z},s.push(r)}function a(t,s){return e.relative?s:s-t}function h(t,s){return e.relative?t+s:s}n.name="extruded";const c=t.replace(/;.+/g,"").split("\n");for(let t=0;t<c.length;t++){const s=c[t].split(" "),i=s[0].toUpperCase(),n={};if(s.splice(1).forEach((function(t){if(void 0!==t[0]){const e=t[0].toLowerCase(),s=parseFloat(t.substring(1));n[e]=s}})),"G0"===i||"G1"===i){const t={x:void 0!==n.x?h(e.x,n.x):e.x,y:void 0!==n.y?h(e.y,n.y):e.y,z:void 0!==n.z?h(e.z,n.z):e.z,e:void 0!==n.e?h(e.e,n.e):e.e,f:void 0!==n.f?h(e.f,n.f):e.f};a(e.e,t.e)>0&&(e.extruding=a(e.e,t.e)>0,null!=r&&t.z==r.z||o(t)),l=e,u=t,void 0===r&&o(l),e.extruding?(r.vertex.push(l.x,l.y,l.z),r.vertex.push(u.x,u.y,u.z)):(r.pathVertex.push(l.x,l.y,l.z),r.pathVertex.push(u.x,u.y,u.z)),e=t}else if("G2"===i||"G3"===i);else if("G90"===i)e.relative=!1;else if("G91"===i)e.relative=!0;else if("G92"===i){const t=e;t.x=void 0!==n.x?n.x:t.x,t.y=void 0!==n.y?n.y:t.y,t.z=void 0!==n.z?n.z:t.z,t.e=void 0!==n.e?n.e:t.e}}var l,u;function p(t,e,s){const r=new Er;r.setAttribute("position",new fr(t,3));const o=new ja(r,e?n:i);o.name="layer"+s,d.add(o)}const d=new ko;if(d.name="gcode",this.splitLayer)for(let t=0;t<s.length;t++){const e=s[t];p(e.vertex,!0,t),p(e.pathVertex,!1,t)}else{const t=[],e=[];for(let r=0;r<s.length;r++){const i=s[r],n=i.vertex,o=i.pathVertex;for(let e=0;e<n.length;e++)t.push(n[e]);for(let t=0;t<o.length;t++)e.push(o[t])}p(t,!0,s.length),p(e,!1,s.length)}return d.quaternion.setFromEuler(new Cs(-Math.PI/2,0,0)),d}}class df extends Qc{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(t){return new vf(t)})),this.register((function(t){return new Sf(t)})),this.register((function(t){return new Af(t)})),this.register((function(t){return new bf(t)})),this.register((function(t){return new wf(t)})),this.register((function(t){return new xf(t)})),this.register((function(t){return new If(t)})),this.register((function(t){return new Tf(t)})),this.register((function(t){return new Ef(t)})),this.register((function(t){return new gf(t)})),this.register((function(t){return new Rf(t)}))}load(t,e,s,r){const i=this;let n;n=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:Rl.extractUrlBase(t),this.manager.itemStart(t);const o=function(e){r?r(e):console.error(e),i.manager.itemError(t),i.manager.itemEnd(t)},a=new el(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,(function(s){try{i.parse(s,n,(function(s){e(s),i.manager.itemEnd(t)}),o)}catch(t){o(t)}}),s,o)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return-1===this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.push(t),this}unregister(t){return-1!==this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,s,r){let i;const n={},o={};if("string"==typeof t)i=t;else{if(Rl.decodeText(new Uint8Array(t,0,4))===Cf){try{n[ff.KHR_BINARY_GLTF]=new Df(t)}catch(t){return void(r&&r(t))}i=n[ff.KHR_BINARY_GLTF].content}else i=Rl.decodeText(new Uint8Array(t))}const a=JSON.parse(i);if(void 0===a.asset||a.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const h=new cg(a,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});h.fileLoader.setRequestHeader(this.requestHeader);for(let t=0;t<this.pluginCallbacks.length;t++){const e=this.pluginCallbacks[t](h);o[e.name]=e,n[e.name]=!0}if(a.extensionsUsed)for(let t=0;t<a.extensionsUsed.length;++t){const e=a.extensionsUsed[t],s=a.extensionsRequired||[];switch(e){case ff.KHR_MATERIALS_UNLIT:n[e]=new yf;break;case ff.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:n[e]=new Nf;break;case ff.KHR_DRACO_MESH_COMPRESSION:n[e]=new Ff(a,this.dracoLoader);break;case ff.KHR_TEXTURE_TRANSFORM:n[e]=new Mf;break;case ff.KHR_MESH_QUANTIZATION:n[e]=new Lf;break;default:s.indexOf(e)>=0&&void 0===o[e]&&console.warn('THREE.GLTFLoader: Unknown extension "'+e+'".')}}h.setExtensions(n),h.setPlugins(o),h.parse(s,r)}parseAsync(t,e){const s=this;return new Promise((function(r,i){s.parse(t,e,r,i)}))}}function mf(){let t={};return{get:function(e){return t[e]},add:function(e,s){t[e]=s},remove:function(e){delete t[e]},removeAll:function(){t={}}}}const ff={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class gf{constructor(t){this.parser=t,this.name=ff.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,e=this.parser.json.nodes||[];for(let s=0,r=e.length;s<r;s++){const r=e[s];r.extensions&&r.extensions[this.name]&&void 0!==r.extensions[this.name].light&&t._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(t){const e=this.parser,s="light:"+t;let r=e.cache.get(s);if(r)return r;const i=e.json,n=((i.extensions&&i.extensions[this.name]||{}).lights||[])[t];let o;const a=new Ae(16777215);void 0!==n.color&&a.fromArray(n.color);const h=void 0!==n.range?n.range:0;switch(n.type){case"directional":o=new wl(a),o.target.position.set(0,0,-1),o.add(o.target);break;case"point":o=new vl(a),o.distance=h;break;case"spot":o=new ml(a),o.distance=h,n.spot=n.spot||{},n.spot.innerConeAngle=void 0!==n.spot.innerConeAngle?n.spot.innerConeAngle:0,n.spot.outerConeAngle=void 0!==n.spot.outerConeAngle?n.spot.outerConeAngle:Math.PI/4,o.angle=n.spot.outerConeAngle,o.penumbra=1-n.spot.innerConeAngle/n.spot.outerConeAngle,o.target.position.set(0,0,-1),o.add(o.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+n.type)}return o.position.set(0,0,0),o.decay=2,void 0!==n.intensity&&(o.intensity=n.intensity),o.name=e.createUniqueName(n.name||"light_"+t),r=Promise.resolve(o),e.cache.add(s,r),r}createNodeAttachment(t){const e=this,s=this.parser,r=s.json.nodes[t],i=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then((function(t){return s._getNodeRef(e.cache,i,t)}))}}class yf{constructor(){this.name=ff.KHR_MATERIALS_UNLIT}getMaterialType(){return rr}extendParams(t,e,s){const r=[];t.color=new Ae(1,1,1),t.opacity=1;const i=e.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){const e=i.baseColorFactor;t.color.fromArray(e),t.opacity=e[3]}void 0!==i.baseColorTexture&&r.push(s.assignTexture(t,"map",i.baseColorTexture,zt))}return Promise.all(r)}}class Tf{constructor(t){this.parser=t,this.name=ff.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,e){const s=this.parser.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name].emissiveStrength;return void 0!==r&&(e.emissiveIntensity=r),Promise.resolve()}}class vf{constructor(t){this.parser=t,this.name=ff.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?Rc:null}extendMaterialParams(t,e){const s=this.parser,r=s.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],n=r.extensions[this.name];if(void 0!==n.clearcoatFactor&&(e.clearcoat=n.clearcoatFactor),void 0!==n.clearcoatTexture&&i.push(s.assignTexture(e,"clearcoatMap",n.clearcoatTexture)),void 0!==n.clearcoatRoughnessFactor&&(e.clearcoatRoughness=n.clearcoatRoughnessFactor),void 0!==n.clearcoatRoughnessTexture&&i.push(s.assignTexture(e,"clearcoatRoughnessMap",n.clearcoatRoughnessTexture)),void 0!==n.clearcoatNormalTexture&&(i.push(s.assignTexture(e,"clearcoatNormalMap",n.clearcoatNormalTexture)),void 0!==n.clearcoatNormalTexture.scale)){const t=n.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new le(t,t)}return Promise.all(i)}}class bf{constructor(t){this.parser=t,this.name=ff.KHR_MATERIALS_SHEEN}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?Rc:null}extendMaterialParams(t,e){const s=this.parser,r=s.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[];e.sheenColor=new Ae(0,0,0),e.sheenRoughness=0,e.sheen=1;const n=r.extensions[this.name];return void 0!==n.sheenColorFactor&&e.sheenColor.fromArray(n.sheenColorFactor),void 0!==n.sheenRoughnessFactor&&(e.sheenRoughness=n.sheenRoughnessFactor),void 0!==n.sheenColorTexture&&i.push(s.assignTexture(e,"sheenColorMap",n.sheenColorTexture,zt)),void 0!==n.sheenRoughnessTexture&&i.push(s.assignTexture(e,"sheenRoughnessMap",n.sheenRoughnessTexture)),Promise.all(i)}}class wf{constructor(t){this.parser=t,this.name=ff.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?Rc:null}extendMaterialParams(t,e){const s=this.parser,r=s.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],n=r.extensions[this.name];return void 0!==n.transmissionFactor&&(e.transmission=n.transmissionFactor),void 0!==n.transmissionTexture&&i.push(s.assignTexture(e,"transmissionMap",n.transmissionTexture)),Promise.all(i)}}class xf{constructor(t){this.parser=t,this.name=ff.KHR_MATERIALS_VOLUME}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?Rc:null}extendMaterialParams(t,e){const s=this.parser,r=s.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],n=r.extensions[this.name];e.thickness=void 0!==n.thicknessFactor?n.thicknessFactor:0,void 0!==n.thicknessTexture&&i.push(s.assignTexture(e,"thicknessMap",n.thicknessTexture)),e.attenuationDistance=n.attenuationDistance||0;const o=n.attenuationColor||[1,1,1];return e.attenuationColor=new Ae(o[0],o[1],o[2]),Promise.all(i)}}class If{constructor(t){this.parser=t,this.name=ff.KHR_MATERIALS_IOR}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?Rc:null}extendMaterialParams(t,e){const s=this.parser.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return e.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}class Ef{constructor(t){this.parser=t,this.name=ff.KHR_MATERIALS_SPECULAR}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?Rc:null}extendMaterialParams(t,e){const s=this.parser,r=s.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],n=r.extensions[this.name];e.specularIntensity=void 0!==n.specularFactor?n.specularFactor:1,void 0!==n.specularTexture&&i.push(s.assignTexture(e,"specularIntensityMap",n.specularTexture));const o=n.specularColorFactor||[1,1,1];return e.specularColor=new Ae(o[0],o[1],o[2]),void 0!==n.specularColorTexture&&i.push(s.assignTexture(e,"specularColorMap",n.specularColorTexture,zt)),Promise.all(i)}}class Sf{constructor(t){this.parser=t,this.name=ff.KHR_TEXTURE_BASISU}loadTexture(t){const e=this.parser,s=e.json,r=s.textures[t];if(!r.extensions||!r.extensions[this.name])return null;const i=r.extensions[this.name],n=e.options.ktx2Loader;if(!n){if(s.extensionsRequired&&s.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,i.source,n)}}class Af{constructor(t){this.parser=t,this.name=ff.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const e=this.name,s=this.parser,r=s.json,i=r.textures[t];if(!i.extensions||!i.extensions[e])return null;const n=i.extensions[e],o=r.images[n.source];let a=s.textureLoader;if(o.uri){const t=s.options.manager.getHandler(o.uri);null!==t&&(a=t)}return this.detectSupport().then((function(i){if(i)return s.loadTextureImage(t,n.source,a);if(r.extensionsRequired&&r.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return s.loadTexture(t)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(t){const e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){t(1===e.height)}}))),this.isSupported}}class Rf{constructor(t){this.name=ff.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const e=this.parser.json,s=e.bufferViews[t];if(s.extensions&&s.extensions[this.name]){const t=s.extensions[this.name],r=this.parser.getDependency("buffer",t.buffer),i=this.parser.options.meshoptDecoder;if(!i||!i.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([r,i.ready]).then((function(e){const s=t.byteOffset||0,r=t.byteLength||0,n=t.count,o=t.byteStride,a=new ArrayBuffer(n*o),h=new Uint8Array(e[0],s,r);return i.decodeGltfBuffer(new Uint8Array(a),n,o,h,t.mode,t.filter),a}))}return null}}const Cf="glTF",Of=1313821514,_f=5130562;class Df{constructor(t){this.name=ff.KHR_BINARY_GLTF,this.content=null,this.body=null;const e=new DataView(t,0,12);if(this.header={magic:Rl.decodeText(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==Cf)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const s=this.header.length-12,r=new DataView(t,12);let i=0;for(;i<s;){const e=r.getUint32(i,!0);i+=4;const s=r.getUint32(i,!0);if(i+=4,s===Of){const s=new Uint8Array(t,12+i,e);this.content=Rl.decodeText(s)}else if(s===_f){const s=12+i;this.body=t.slice(s,s+e)}i+=e}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Ff{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=ff.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){const s=this.json,r=this.dracoLoader,i=t.extensions[this.name].bufferView,n=t.extensions[this.name].attributes,o={},a={},h={};for(const t in n){const e=$f[t]||t.toLowerCase();o[e]=n[t]}for(const e in t.attributes){const r=$f[e]||e.toLowerCase();if(void 0!==n[e]){const i=s.accessors[t.attributes[e]],n=Xf[i.componentType];h[r]=n,a[r]=!0===i.normalized}}return e.getDependency("bufferView",i).then((function(t){return new Promise((function(e){r.decodeDracoFile(t,(function(t){for(const e in t.attributes){const s=t.attributes[e],r=a[e];void 0!==r&&(s.normalized=r)}e(t)}),o,h)}))}))}}class Mf{constructor(){this.name=ff.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return void 0!==e.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===e.offset&&void 0===e.rotation&&void 0===e.scale||(t=t.clone(),void 0!==e.offset&&t.offset.fromArray(e.offset),void 0!==e.rotation&&(t.rotation=e.rotation),void 0!==e.scale&&t.repeat.fromArray(e.scale),t.needsUpdate=!0),t}}class Pf extends Ac{constructor(t){super(),this.isGLTFSpecularGlossinessMaterial=!0;const e=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),s=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),i=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),n=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),o={specular:{value:(new Ae).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=o,this.onBeforeCompile=function(t){for(const e in o)t.uniforms[e]=o[e];t.fragmentShader=t.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",e).replace("#include <metalnessmap_pars_fragment>",s).replace("#include <roughnessmap_fragment>",r).replace("#include <metalnessmap_fragment>",i).replace("#include <lights_physical_fragment>",n)},Object.defineProperties(this,{specular:{get:function(){return o.specular.value},set:function(t){o.specular.value=t}},specularMap:{get:function(){return o.specularMap.value},set:function(t){o.specularMap.value=t,t?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return o.glossiness.value},set:function(t){o.glossiness.value=t}},glossinessMap:{get:function(){return o.glossinessMap.value},set:function(t){o.glossinessMap.value=t,t?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(t)}copy(t){return super.copy(t),this.specularMap=t.specularMap,this.specular.copy(t.specular),this.glossinessMap=t.glossinessMap,this.glossiness=t.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class Nf{constructor(){this.name=ff.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return Pf}extendParams(t,e,s){const r=e.extensions[this.name];t.color=new Ae(1,1,1),t.opacity=1;const i=[];if(Array.isArray(r.diffuseFactor)){const e=r.diffuseFactor;t.color.fromArray(e),t.opacity=e[3]}if(void 0!==r.diffuseTexture&&i.push(s.assignTexture(t,"map",r.diffuseTexture,zt)),t.emissive=new Ae(0,0,0),t.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,t.specular=new Ae(1,1,1),Array.isArray(r.specularFactor)&&t.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){const e=r.specularGlossinessTexture;i.push(s.assignTexture(t,"glossinessMap",e)),i.push(s.assignTexture(t,"specularMap",e,zt))}return Promise.all(i)}createMaterial(t){const e=new Pf(t);return e.fog=!0,e.color=t.color,e.map=void 0===t.map?null:t.map,e.lightMap=null,e.lightMapIntensity=1,e.aoMap=void 0===t.aoMap?null:t.aoMap,e.aoMapIntensity=1,e.emissive=t.emissive,e.emissiveIntensity=void 0===t.emissiveIntensity?1:t.emissiveIntensity,e.emissiveMap=void 0===t.emissiveMap?null:t.emissiveMap,e.bumpMap=void 0===t.bumpMap?null:t.bumpMap,e.bumpScale=1,e.normalMap=void 0===t.normalMap?null:t.normalMap,e.normalMapType=0,t.normalScale&&(e.normalScale=t.normalScale),e.displacementMap=null,e.displacementScale=1,e.displacementBias=0,e.specularMap=void 0===t.specularMap?null:t.specularMap,e.specular=t.specular,e.glossinessMap=void 0===t.glossinessMap?null:t.glossinessMap,e.glossiness=t.glossiness,e.alphaMap=null,e.envMap=void 0===t.envMap?null:t.envMap,e.envMapIntensity=1,e}}class Lf{constructor(){this.name=ff.KHR_MESH_QUANTIZATION}}class kf extends Lc{constructor(t,e,s,r){super(t,e,s,r)}copySampleValue_(t){const e=this.resultBuffer,s=this.sampleValues,r=this.valueSize,i=t*r*3+r;for(let t=0;t!==r;t++)e[t]=s[i+t];return e}}kf.prototype.beforeStart_=kf.prototype.copySampleValue_,kf.prototype.afterEnd_=kf.prototype.copySampleValue_,kf.prototype.interpolate_=function(t,e,s,r){const i=this.resultBuffer,n=this.sampleValues,o=this.valueSize,a=2*o,h=3*o,c=r-e,l=(s-e)/c,u=l*l,p=u*l,d=t*h,m=d-h,f=-2*p+3*u,g=p-u,y=1-f,T=g-u+l;for(let t=0;t!==o;t++){const e=n[m+t+o],s=n[m+t+a]*c,r=n[d+t+o],h=n[d+t]*c;i[t]=y*e+T*s+f*r+g*h}return i};const Uf=new Be;class Hf extends kf{interpolate_(t,e,s,r){const i=super.interpolate_(t,e,s,r);return Uf.fromArray(i).normalize().toArray(i),i}}const Bf=0,Gf=1,jf=2,zf=3,Vf=4,Wf=5,Yf=6,Xf={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},qf={9728:V,9729:X,9984:W,9985:q,9986:Y,9987:K},Kf={33071:j,33648:z,10497:G},Jf={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},$f={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Zf={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Qf={CUBICSPLINE:void 0,LINEAR:Nt,STEP:Pt},tg="OPAQUE",eg="MASK",sg="BLEND";function rg(t,e,s){for(const r in s.extensions)void 0===t[r]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=s.extensions[r])}function ig(t,e){void 0!==e.extras&&("object"==typeof e.extras?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function ng(t,e){if(t.updateMorphTargets(),void 0!==e.weights)for(let s=0,r=e.weights.length;s<r;s++)t.morphTargetInfluences[s]=e.weights[s];if(e.extras&&Array.isArray(e.extras.targetNames)){const s=e.extras.targetNames;if(t.morphTargetInfluences.length===s.length){t.morphTargetDictionary={};for(let e=0,r=s.length;e<r;e++)t.morphTargetDictionary[s[e]]=e}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function og(t){const e=t.extensions&&t.extensions[ff.KHR_DRACO_MESH_COMPRESSION];let s;return s=e?"draco:"+e.bufferView+":"+e.indices+":"+ag(e.attributes):t.indices+":"+ag(t.attributes)+":"+t.mode,s}function ag(t){let e="";const s=Object.keys(t).sort();for(let r=0,i=s.length;r<i;r++)e+=s[r]+":"+t[s[r]]+";";return e}function hg(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class cg{constructor(t={},e={}){this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new mf,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const s=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=navigator.userAgent.indexOf("Firefox")>-1,i=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;"undefined"==typeof createImageBitmap||s||r&&i<98?this.textureLoader=new ol(this.options.manager):this.textureLoader=new Ml(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new el(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,e){const s=this,r=this.json,i=this.extensions;this.cache.removeAll(),this._invokeAll((function(t){return t._markDefs&&t._markDefs()})),Promise.all(this._invokeAll((function(t){return t.beforeRoot&&t.beforeRoot()}))).then((function(){return Promise.all([s.getDependencies("scene"),s.getDependencies("animation"),s.getDependencies("camera")])})).then((function(e){const n={scene:e[0][r.scene||0],scenes:e[0],animations:e[1],cameras:e[2],asset:r.asset,parser:s,userData:{}};rg(i,n,r),ig(n,r),Promise.all(s._invokeAll((function(t){return t.afterRoot&&t.afterRoot(n)}))).then((function(){t(n)}))})).catch(e)}_markDefs(){const t=this.json.nodes||[],e=this.json.skins||[],s=this.json.meshes||[];for(let s=0,r=e.length;s<r;s++){const r=e[s].joints;for(let e=0,s=r.length;e<s;e++)t[r[e]].isBone=!0}for(let e=0,r=t.length;e<r;e++){const r=t[e];void 0!==r.mesh&&(this._addNodeRef(this.meshCache,r.mesh),void 0!==r.skin&&(s[r.mesh].isSkinnedMesh=!0)),void 0!==r.camera&&this._addNodeRef(this.cameraCache,r.camera)}}_addNodeRef(t,e){void 0!==e&&(void 0===t.refs[e]&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,s){if(t.refs[e]<=1)return s;const r=s.clone(),i=(t,e)=>{const s=this.associations.get(t);null!=s&&this.associations.set(e,s);for(const[s,r]of t.children.entries())i(r,e.children[s])};return i(s,r),r.name+="_instance_"+t.uses[e]++,r}_invokeOne(t){const e=Object.values(this.plugins);e.push(this);for(let s=0;s<e.length;s++){const r=t(e[s]);if(r)return r}return null}_invokeAll(t){const e=Object.values(this.plugins);e.unshift(this);const s=[];for(let r=0;r<e.length;r++){const i=t(e[r]);i&&s.push(i)}return s}getDependency(t,e){const s=t+":"+e;let r=this.cache.get(s);if(!r){switch(t){case"scene":r=this.loadScene(e);break;case"node":r=this.loadNode(e);break;case"mesh":r=this._invokeOne((function(t){return t.loadMesh&&t.loadMesh(e)}));break;case"accessor":r=this.loadAccessor(e);break;case"bufferView":r=this._invokeOne((function(t){return t.loadBufferView&&t.loadBufferView(e)}));break;case"buffer":r=this.loadBuffer(e);break;case"material":r=this._invokeOne((function(t){return t.loadMaterial&&t.loadMaterial(e)}));break;case"texture":r=this._invokeOne((function(t){return t.loadTexture&&t.loadTexture(e)}));break;case"skin":r=this.loadSkin(e);break;case"animation":r=this._invokeOne((function(t){return t.loadAnimation&&t.loadAnimation(e)}));break;case"camera":r=this.loadCamera(e);break;default:throw new Error("Unknown type: "+t)}this.cache.add(s,r)}return r}getDependencies(t){let e=this.cache.get(t);if(!e){const s=this,r=this.json[t+("mesh"===t?"es":"s")]||[];e=Promise.all(r.map((function(e,r){return s.getDependency(t,r)}))),this.cache.add(t,e)}return e}loadBuffer(t){const e=this.json.buffers[t],s=this.fileLoader;if(e.type&&"arraybuffer"!==e.type)throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(void 0===e.uri&&0===t)return Promise.resolve(this.extensions[ff.KHR_BINARY_GLTF].body);const r=this.options;return new Promise((function(t,i){s.load(Rl.resolveURL(e.uri,r.path),t,void 0,(function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))}))}))}loadBufferView(t){const e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then((function(t){const s=e.byteLength||0,r=e.byteOffset||0;return t.slice(r,r+s)}))}loadAccessor(t){const e=this,s=this.json,r=this.json.accessors[t];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);const i=[];return void 0!==r.bufferView?i.push(this.getDependency("bufferView",r.bufferView)):i.push(null),void 0!==r.sparse&&(i.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(i).then((function(t){const i=t[0],n=Jf[r.type],o=Xf[r.componentType],a=o.BYTES_PER_ELEMENT,h=a*n,c=r.byteOffset||0,l=void 0!==r.bufferView?s.bufferViews[r.bufferView].byteStride:void 0,u=!0===r.normalized;let p,d;if(l&&l!==h){const t=Math.floor(c/l),s="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+t+":"+r.count;let h=e.cache.get(s);h||(p=new o(i,t*l,r.count*l/a),h=new qo(p,l/a),e.cache.add(s,h)),d=new Jo(h,n,c%l/a,u)}else p=null===i?new o(r.count*n):new o(i,c,r.count*n),d=new or(p,n,u);if(void 0!==r.sparse){const e=Jf.SCALAR,s=Xf[r.sparse.indices.componentType],a=r.sparse.indices.byteOffset||0,h=r.sparse.values.byteOffset||0,c=new s(t[1],a,r.sparse.count*e),l=new o(t[2],h,r.sparse.count*n);null!==i&&(d=new or(d.array.slice(),d.itemSize,d.normalized));for(let t=0,e=c.length;t<e;t++){const e=c[t];if(d.setX(e,l[t*n]),n>=2&&d.setY(e,l[t*n+1]),n>=3&&d.setZ(e,l[t*n+2]),n>=4&&d.setW(e,l[t*n+3]),n>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return d}))}loadTexture(t){const e=this.json,s=this.options,r=e.textures[t].source,i=e.images[r];let n=this.textureLoader;if(i.uri){const t=s.manager.getHandler(i.uri);null!==t&&(n=t)}return this.loadTextureImage(t,r,n)}loadTextureImage(t,e,s){const r=this,i=this.json,n=i.textures[t],o=i.images[e],a=(o.uri||o.bufferView)+":"+n.sampler;if(this.textureCache[a])return this.textureCache[a];const h=this.loadImageSource(e,s).then((function(e){e.flipY=!1,n.name&&(e.name=n.name);const s=(i.samplers||{})[n.sampler]||{};return e.magFilter=qf[s.magFilter]||X,e.minFilter=qf[s.minFilter]||K,e.wrapS=Kf[s.wrapS]||G,e.wrapT=Kf[s.wrapT]||G,r.associations.set(e,{textures:t}),e})).catch((function(){return null}));return this.textureCache[a]=h,h}loadImageSource(t,e){const s=this,r=this.json,i=this.options;if(void 0!==this.sourceCache[t])return this.sourceCache[t].then((t=>t.clone()));const n=r.images[t],o=self.URL||self.webkitURL;let a=n.uri||"",h=!1;if(void 0!==n.bufferView)a=s.getDependency("bufferView",n.bufferView).then((function(t){h=!0;const e=new Blob([t],{type:n.mimeType});return a=o.createObjectURL(e),a}));else if(void 0===n.uri)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const c=Promise.resolve(a).then((function(t){return new Promise((function(s,r){let n=s;!0===e.isImageBitmapLoader&&(n=function(t){const e=new Fe(t);e.needsUpdate=!0,s(e)}),e.load(Rl.resolveURL(t,i.path),n,void 0,r)}))})).then((function(t){var e;return!0===h&&o.revokeObjectURL(a),t.userData.mimeType=n.mimeType||((e=n.uri).search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/)?"image/jpeg":e.search(/\.webp($|\?)/i)>0||0===e.search(/^data\:image\/webp/)?"image/webp":"image/png"),t})).catch((function(t){throw console.error("THREE.GLTFLoader: Couldn't load texture",a),t}));return this.sourceCache[t]=c,c}assignTexture(t,e,s,r){const i=this;return this.getDependency("texture",s.index).then((function(n){if(void 0===s.texCoord||0==s.texCoord||"aoMap"===e&&1==s.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+s.texCoord+" for texture "+e+" not yet supported."),i.extensions[ff.KHR_TEXTURE_TRANSFORM]){const t=void 0!==s.extensions?s.extensions[ff.KHR_TEXTURE_TRANSFORM]:void 0;if(t){const e=i.associations.get(n);n=i.extensions[ff.KHR_TEXTURE_TRANSFORM].extendTexture(n,t),i.associations.set(n,e)}}return void 0!==r&&(n.encoding=r),t[e]=n,n}))}assignFinalMaterial(t){const e=t.geometry;let s=t.material;const r=void 0===e.attributes.tangent,i=void 0!==e.attributes.color,n=void 0===e.attributes.normal;if(t.isPoints){const t="PointsMaterial:"+s.uuid;let e=this.cache.get(t);e||(e=new Va,sr.prototype.copy.call(e,s),e.color.copy(s.color),e.map=s.map,e.sizeAttenuation=!1,this.cache.add(t,e)),s=e}else if(t.isLine){const t="LineBasicMaterial:"+s.uuid;let e=this.cache.get(t);e||(e=new Ma,sr.prototype.copy.call(e,s),e.color.copy(s.color),this.cache.add(t,e)),s=e}if(r||i||n){let t="ClonedMaterial:"+s.uuid+":";s.isGLTFSpecularGlossinessMaterial&&(t+="specular-glossiness:"),r&&(t+="derivative-tangents:"),i&&(t+="vertex-colors:"),n&&(t+="flat-shading:");let e=this.cache.get(t);e||(e=s.clone(),i&&(e.vertexColors=!0),n&&(e.flatShading=!0),r&&(e.normalScale&&(e.normalScale.y*=-1),e.clearcoatNormalScale&&(e.clearcoatNormalScale.y*=-1)),this.cache.add(t,e),this.associations.set(e,this.associations.get(s))),s=e}s.aoMap&&void 0===e.attributes.uv2&&void 0!==e.attributes.uv&&e.setAttribute("uv2",e.attributes.uv),t.material=s}getMaterialType(){return Ac}loadMaterial(t){const e=this,s=this.json,r=this.extensions,i=s.materials[t];let n;const o={},a=i.extensions||{},h=[];if(a[ff.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const t=r[ff.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];n=t.getMaterialType(),h.push(t.extendParams(o,i,e))}else if(a[ff.KHR_MATERIALS_UNLIT]){const t=r[ff.KHR_MATERIALS_UNLIT];n=t.getMaterialType(),h.push(t.extendParams(o,i,e))}else{const s=i.pbrMetallicRoughness||{};if(o.color=new Ae(1,1,1),o.opacity=1,Array.isArray(s.baseColorFactor)){const t=s.baseColorFactor;o.color.fromArray(t),o.opacity=t[3]}void 0!==s.baseColorTexture&&h.push(e.assignTexture(o,"map",s.baseColorTexture,zt)),o.metalness=void 0!==s.metallicFactor?s.metallicFactor:1,o.roughness=void 0!==s.roughnessFactor?s.roughnessFactor:1,void 0!==s.metallicRoughnessTexture&&(h.push(e.assignTexture(o,"metalnessMap",s.metallicRoughnessTexture)),h.push(e.assignTexture(o,"roughnessMap",s.metallicRoughnessTexture))),n=this._invokeOne((function(e){return e.getMaterialType&&e.getMaterialType(t)})),h.push(Promise.all(this._invokeAll((function(e){return e.extendMaterialParams&&e.extendMaterialParams(t,o)}))))}!0===i.doubleSided&&(o.side=2);const c=i.alphaMode||tg;if(c===sg?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,c===eg&&(o.alphaTest=void 0!==i.alphaCutoff?i.alphaCutoff:.5)),void 0!==i.normalTexture&&n!==rr&&(h.push(e.assignTexture(o,"normalMap",i.normalTexture)),o.normalScale=new le(1,1),void 0!==i.normalTexture.scale)){const t=i.normalTexture.scale;o.normalScale.set(t,t)}return void 0!==i.occlusionTexture&&n!==rr&&(h.push(e.assignTexture(o,"aoMap",i.occlusionTexture)),void 0!==i.occlusionTexture.strength&&(o.aoMapIntensity=i.occlusionTexture.strength)),void 0!==i.emissiveFactor&&n!==rr&&(o.emissive=(new Ae).fromArray(i.emissiveFactor)),void 0!==i.emissiveTexture&&n!==rr&&h.push(e.assignTexture(o,"emissiveMap",i.emissiveTexture,zt)),Promise.all(h).then((function(){let s;return s=n===Pf?r[ff.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(o):new n(o),i.name&&(s.name=i.name),ig(s,i),e.associations.set(s,{materials:t}),i.extensions&&rg(r,s,i),s}))}createUniqueName(t){const e=uu.sanitizeNodeName(t||"");let s=e;for(let t=1;this.nodeNamesUsed[s];++t)s=e+"_"+t;return this.nodeNamesUsed[s]=!0,s}loadGeometries(t){const e=this,s=this.extensions,r=this.primitiveCache;function i(t){return s[ff.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(t,e).then((function(s){return ug(s,t,e)}))}const n=[];for(let s=0,o=t.length;s<o;s++){const o=t[s],a=og(o),h=r[a];if(h)n.push(h.promise);else{let t;t=o.extensions&&o.extensions[ff.KHR_DRACO_MESH_COMPRESSION]?i(o):ug(new Er,o,e),r[a]={primitive:o,promise:t},n.push(t)}}return Promise.all(n)}loadMesh(t){const e=this,s=this.json,r=this.extensions,i=s.meshes[t],n=i.primitives,o=[];for(let t=0,e=n.length;t<e;t++){const e=void 0===n[t].material?(void 0===(a=this.cache).DefaultMaterial&&(a.DefaultMaterial=new Ac({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),a.DefaultMaterial):this.getDependency("material",n[t].material);o.push(e)}var a;return o.push(e.loadGeometries(n)),Promise.all(o).then((function(s){const o=s.slice(0,s.length-1),a=s[s.length-1],h=[];for(let s=0,c=a.length;s<c;s++){const c=a[s],l=n[s];let u;const p=o[s];if(l.mode===Vf||l.mode===Wf||l.mode===Yf||void 0===l.mode)u=!0===i.isSkinnedMesh?new wa(c,p):new jr(c,p),!0!==u.isSkinnedMesh||u.geometry.attributes.skinWeight.normalized||u.normalizeSkinWeights(),l.mode===Wf?u.geometry=pg(u.geometry,1):l.mode===Yf&&(u.geometry=pg(u.geometry,2));else if(l.mode===Gf)u=new ja(c,p);else if(l.mode===zf)u=new Ha(c,p);else if(l.mode===jf)u=new za(c,p);else{if(l.mode!==Bf)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+l.mode);u=new Ka(c,p)}Object.keys(u.geometry.morphAttributes).length>0&&ng(u,i),u.name=e.createUniqueName(i.name||"mesh_"+t),ig(u,i),l.extensions&&rg(r,u,l),e.assignFinalMaterial(u),h.push(u)}for(let s=0,r=h.length;s<r;s++)e.associations.set(h[s],{meshes:t,primitives:s});if(1===h.length)return h[0];const c=new ko;e.associations.set(c,{meshes:t});for(let t=0,e=h.length;t<e;t++)c.add(h[t]);return c}))}loadCamera(t){let e;const s=this.json.cameras[t],r=s[s.type];if(r)return"perspective"===s.type?e=new Jr(ce.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===s.type&&(e=new bi(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),s.name&&(e.name=this.createUniqueName(s.name)),ig(e,s),Promise.resolve(e);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(t){const e=this.json.skins[t],s={joints:e.joints};return void 0===e.inverseBindMatrices?Promise.resolve(s):this.getDependency("accessor",e.inverseBindMatrices).then((function(t){return s.inverseBindMatrices=t,s}))}loadAnimation(t){const e=this.json.animations[t],s=[],r=[],i=[],n=[],o=[];for(let t=0,a=e.channels.length;t<a;t++){const a=e.channels[t],h=e.samplers[a.sampler],c=a.target,l=void 0!==c.node?c.node:c.id,u=void 0!==e.parameters?e.parameters[h.input]:h.input,p=void 0!==e.parameters?e.parameters[h.output]:h.output;s.push(this.getDependency("node",l)),r.push(this.getDependency("accessor",u)),i.push(this.getDependency("accessor",p)),n.push(h),o.push(c)}return Promise.all([Promise.all(s),Promise.all(r),Promise.all(i),Promise.all(n),Promise.all(o)]).then((function(s){const r=s[0],i=s[1],n=s[2],o=s[3],a=s[4],h=[];for(let t=0,e=r.length;t<e;t++){const e=r[t],s=i[t],c=n[t],l=o[t],u=a[t];if(void 0===e)continue;let p;switch(e.updateMatrix(),e.matrixAutoUpdate=!0,Zf[u.path]){case Zf.weights:p=zc;break;case Zf.rotation:p=Wc;break;case Zf.position:case Zf.scale:default:p=Xc}const d=e.name?e.name:e.uuid,m=void 0!==l.interpolation?Qf[l.interpolation]:Nt,f=[];Zf[u.path]===Zf.weights?e.traverse((function(t){t.morphTargetInfluences&&f.push(t.name?t.name:t.uuid)})):f.push(d);let g=c.array;if(c.normalized){const t=hg(g.constructor),e=new Float32Array(g.length);for(let s=0,r=g.length;s<r;s++)e[s]=g[s]*t;g=e}for(let t=0,e=f.length;t<e;t++){const e=new p(f[t]+"."+Zf[u.path],s.array,g,m);"CUBICSPLINE"===l.interpolation&&(e.createInterpolant=function(t){return new(this instanceof Wc?Hf:kf)(this.times,this.values,this.getValueSize()/3,t)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),h.push(e)}}const c=e.name?e.name:"animation_"+t;return new qc(c,void 0,h)}))}createNodeMesh(t){const e=this.json,s=this,r=e.nodes[t];return void 0===r.mesh?null:s.getDependency("mesh",r.mesh).then((function(t){const e=s._getNodeRef(s.meshCache,r.mesh,t);return void 0!==r.weights&&e.traverse((function(t){if(t.isMesh)for(let e=0,s=r.weights.length;e<s;e++)t.morphTargetInfluences[e]=r.weights[e]})),e}))}loadNode(t){const e=this.json,s=this.extensions,r=this,i=e.nodes[t],n=i.name?r.createUniqueName(i.name):"";return function(){const e=[],s=r._invokeOne((function(e){return e.createNodeMesh&&e.createNodeMesh(t)}));return s&&e.push(s),void 0!==i.camera&&e.push(r.getDependency("camera",i.camera).then((function(t){return r._getNodeRef(r.cameraCache,i.camera,t)}))),r._invokeAll((function(e){return e.createNodeAttachment&&e.createNodeAttachment(t)})).forEach((function(t){e.push(t)})),Promise.all(e)}().then((function(e){let o;if(o=!0===i.isBone?new xa:e.length>1?new ko:1===e.length?e[0]:new zs,o!==e[0])for(let t=0,s=e.length;t<s;t++)o.add(e[t]);if(i.name&&(o.userData.name=i.name,o.name=n),ig(o,i),i.extensions&&rg(s,o,i),void 0!==i.matrix){const t=new Ts;t.fromArray(i.matrix),o.applyMatrix4(t)}else void 0!==i.translation&&o.position.fromArray(i.translation),void 0!==i.rotation&&o.quaternion.fromArray(i.rotation),void 0!==i.scale&&o.scale.fromArray(i.scale);return r.associations.has(o)||r.associations.set(o,{}),r.associations.get(o).nodes=t,o}))}loadScene(t){const e=this.json,s=this.extensions,r=this.json.scenes[t],i=this,n=new ko;r.name&&(n.name=i.createUniqueName(r.name)),ig(n,r),r.extensions&&rg(s,n,r);const o=r.nodes||[],a=[];for(let t=0,s=o.length;t<s;t++)a.push(lg(o[t],n,e,i));return Promise.all(a).then((function(){return i.associations=(t=>{const e=new Map;for(const[t,s]of i.associations)(t instanceof sr||t instanceof Fe)&&e.set(t,s);return t.traverse((t=>{const s=i.associations.get(t);null!=s&&e.set(t,s)})),e})(n),n}))}}function lg(t,e,s,r){const i=s.nodes[t];return r.getDependency("node",t).then((function(t){if(void 0===i.skin)return t;let e;return r.getDependency("skin",i.skin).then((function(t){e=t;const s=[];for(let t=0,i=e.joints.length;t<i;t++)s.push(r.getDependency("node",e.joints[t]));return Promise.all(s)})).then((function(s){return t.traverse((function(t){if(!t.isMesh)return;const r=[],i=[];for(let t=0,n=s.length;t<n;t++){const n=s[t];if(n){r.push(n);const s=new Ts;void 0!==e.inverseBindMatrices&&s.fromArray(e.inverseBindMatrices.array,16*t),i.push(s)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[t])}t.bind(new Aa(r,i),t.matrixWorld)})),t}))})).then((function(t){e.add(t);const n=[];if(i.children){const e=i.children;for(let i=0,o=e.length;i<o;i++){const o=e[i];n.push(lg(o,t,s,r))}}return Promise.all(n)}))}function ug(t,e,s){const r=e.attributes,i=[];function n(e,r){return s.getDependency("accessor",e).then((function(e){t.setAttribute(r,e)}))}for(const e in r){const s=$f[e]||e.toLowerCase();s in t.attributes||i.push(n(r[e],s))}if(void 0!==e.indices&&!t.index){const r=s.getDependency("accessor",e.indices).then((function(e){t.setIndex(e)}));i.push(r)}return ig(t,e),function(t,e,s){const r=e.attributes,i=new Ve;if(void 0===r.POSITION)return;{const t=s.json.accessors[r.POSITION],e=t.min,n=t.max;if(void 0===e||void 0===n)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(i.set(new Ge(e[0],e[1],e[2]),new Ge(n[0],n[1],n[2])),t.normalized){const e=hg(Xf[t.componentType]);i.min.multiplyScalar(e),i.max.multiplyScalar(e)}}const n=e.targets;if(void 0!==n){const t=new Ge,e=new Ge;for(let r=0,i=n.length;r<i;r++){const i=n[r];if(void 0!==i.POSITION){const r=s.json.accessors[i.POSITION],n=r.min,o=r.max;if(void 0!==n&&void 0!==o){if(e.setX(Math.max(Math.abs(n[0]),Math.abs(o[0]))),e.setY(Math.max(Math.abs(n[1]),Math.abs(o[1]))),e.setZ(Math.max(Math.abs(n[2]),Math.abs(o[2]))),r.normalized){const t=hg(Xf[r.componentType]);e.multiplyScalar(t)}t.max(e)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(t)}t.boundingBox=i;const o=new cs;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,t.boundingSphere=o}(t,e,s),Promise.all(i).then((function(){return void 0!==e.targets?function(t,e,s){let r=!1,i=!1,n=!1;for(let t=0,s=e.length;t<s;t++){const s=e[t];if(void 0!==s.POSITION&&(r=!0),void 0!==s.NORMAL&&(i=!0),void 0!==s.COLOR_0&&(n=!0),r&&i&&n)break}if(!r&&!i&&!n)return Promise.resolve(t);const o=[],a=[],h=[];for(let c=0,l=e.length;c<l;c++){const l=e[c];if(r){const e=void 0!==l.POSITION?s.getDependency("accessor",l.POSITION):t.attributes.position;o.push(e)}if(i){const e=void 0!==l.NORMAL?s.getDependency("accessor",l.NORMAL):t.attributes.normal;a.push(e)}if(n){const e=void 0!==l.COLOR_0?s.getDependency("accessor",l.COLOR_0):t.attributes.color;h.push(e)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(h)]).then((function(e){const s=e[0],o=e[1],a=e[2];return r&&(t.morphAttributes.position=s),i&&(t.morphAttributes.normal=o),n&&(t.morphAttributes.color=a),t.morphTargetsRelative=!0,t}))}(t,e.targets,s):t}))}function pg(t,e){let s=t.getIndex();if(null===s){const e=[],r=t.getAttribute("position");if(void 0===r)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t;for(let t=0;t<r.count;t++)e.push(t);t.setIndex(e),s=t.getIndex()}const r=s.count-2,i=[];if(2===e)for(let t=1;t<=r;t++)i.push(s.getX(0)),i.push(s.getX(t)),i.push(s.getX(t+1));else for(let t=0;t<r;t++)t%2==0?(i.push(s.getX(t)),i.push(s.getX(t+1)),i.push(s.getX(t+2))):(i.push(s.getX(t+2)),i.push(s.getX(t+1)),i.push(s.getX(t)));i.length/3!==r&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const n=t.clone();return n.setIndex(i),n}class dg extends nl{constructor(t){super(t),this.type=tt}parse(t){const e=function(t,e){switch(t){case 1:console.error("THREE.RGBELoader Read Error: "+(e||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(e||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(e||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(e||""))}return-1},s=function(t,e,s){e=e||1024;let r=t.pos,i=-1,n=0,o="",a=String.fromCharCode.apply(null,new Uint16Array(t.subarray(r,r+128)));for(;0>(i=a.indexOf("\n"))&&n<e&&r<t.byteLength;)o+=a,n+=a.length,r+=128,a+=String.fromCharCode.apply(null,new Uint16Array(t.subarray(r,r+128)));return-1<i&&(!1!==s&&(t.pos+=n+i+1),o+a.slice(0,i))},r=function(t,e,s,r){const i=t[e+3],n=Math.pow(2,i-128)/255;s[r+0]=t[e+0]*n,s[r+1]=t[e+1]*n,s[r+2]=t[e+2]*n,s[r+3]=1},i=function(t,e,s,r){const i=t[e+3],n=Math.pow(2,i-128)/255;s[r+0]=Ju.toHalfFloat(Math.min(t[e+0]*n,65504)),s[r+1]=Ju.toHalfFloat(Math.min(t[e+1]*n,65504)),s[r+2]=Ju.toHalfFloat(Math.min(t[e+2]*n,65504)),s[r+3]=Ju.toHalfFloat(1)},n=new Uint8Array(t);n.pos=0;const o=function(t){const r=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,i=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,n=/^\s*FORMAT=(\S+)\s*$/,o=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,a={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let h,c;if(t.pos>=t.byteLength||!(h=s(t)))return e(1,"no header found");if(!(c=h.match(/^#\?(\S+)/)))return e(3,"bad initial token");for(a.valid|=1,a.programtype=c[1],a.string+=h+"\n";h=s(t),!1!==h;)if(a.string+=h+"\n","#"!==h.charAt(0)){if((c=h.match(r))&&(a.gamma=parseFloat(c[1])),(c=h.match(i))&&(a.exposure=parseFloat(c[1])),(c=h.match(n))&&(a.valid|=2,a.format=c[1]),(c=h.match(o))&&(a.valid|=4,a.height=parseInt(c[1],10),a.width=parseInt(c[2],10)),2&a.valid&&4&a.valid)break}else a.comments+=h+"\n";return 2&a.valid?4&a.valid?a:e(3,"missing image size specifier"):e(3,"missing format specifier")}(n);if(-1!==o){const t=o.width,s=o.height,a=function(t,s,r){const i=s;if(i<8||i>32767||2!==t[0]||2!==t[1]||128&t[2])return new Uint8Array(t);if(i!==(t[2]<<8|t[3]))return e(3,"wrong scanline width");const n=new Uint8Array(4*s*r);if(!n.length)return e(4,"unable to allocate buffer space");let o=0,a=0;const h=4*i,c=new Uint8Array(4),l=new Uint8Array(h);let u=r;for(;u>0&&a<t.byteLength;){if(a+4>t.byteLength)return e(1);if(c[0]=t[a++],c[1]=t[a++],c[2]=t[a++],c[3]=t[a++],2!=c[0]||2!=c[1]||(c[2]<<8|c[3])!=i)return e(3,"bad rgbe scanline format");let s,r=0;for(;r<h&&a<t.byteLength;){s=t[a++];const i=s>128;if(i&&(s-=128),0===s||r+s>h)return e(3,"bad scanline data");if(i){const e=t[a++];for(let t=0;t<s;t++)l[r++]=e}else l.set(t.subarray(a,a+s),r),r+=s,a+=s}const p=i;for(let t=0;t<p;t++){let e=0;n[o]=l[t+e],e+=i,n[o+1]=l[t+e],e+=i,n[o+2]=l[t+e],e+=i,n[o+3]=l[t+e],o+=4}u--}return n}(n.subarray(n.pos),t,s);if(-1!==a){let e,n,h,c;switch(this.type){case Q:c=a.length/4;const t=new Float32Array(4*c);for(let e=0;e<c;e++)r(a,4*e,t,4*e);e=t,h=Q;break;case tt:c=a.length/4;const s=new Uint16Array(4*c);for(let t=0;t<c;t++)i(a,4*t,s,4*t);e=s,h=tt;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:t,height:s,data:e,header:o.string,gamma:o.gamma,exposure:o.exposure,format:n,type:h}}}return null}setDataType(t){return this.type=t,this}load(t,e,s,r){return super.load(t,(function(t,s){switch(t.type){case Q:case tt:t.encoding=jt,t.minFilter=X,t.magFilter=X,t.generateMipmaps=!1,t.flipY=!0}e&&e(t,s)}),s,r)}}class mg extends Qc{constructor(t){super(t),this.hdrLoader=new dg,this.type=tt}load(t,e,s,r){Array.isArray(t)||(console.warn("THREE.HDRCubeTextureLoader signature has changed. Use .setDataType() instead."),this.setDataType(t),t=e,e=s,s=r,r=arguments[4]);const i=new Qr;switch(i.type=this.type,i.type){case Q:case tt:i.encoding=jt,i.minFilter=X,i.magFilter=X,i.generateMipmaps=!1}const n=this;let o=0;function a(e,s,r,a){new el(n.manager).setPath(n.path).setResponseType("arraybuffer").setWithCredentials(n.withCredentials).load(t[e],(function(t){o++;const r=n.hdrLoader.parse(t);if(r){if(void 0!==r.data){const t=new Ia(r.data,r.width,r.height);t.type=i.type,t.encoding=i.encoding,t.format=i.format,t.minFilter=i.minFilter,t.magFilter=i.magFilter,t.generateMipmaps=i.generateMipmaps,i.images[e]=t}6===o&&(i.needsUpdate=!0,s&&s(i))}}),r,a)}for(let i=0;i<t.length;i++)a(i,e,s,r);return i}setDataType(t){return this.type=t,this.hdrLoader.setDataType(t),this}}var fg=Object.defineProperty,gg=Object.getOwnPropertySymbols,yg=Object.prototype.hasOwnProperty,Tg=Object.prototype.propertyIsEnumerable,vg=(t,e,s)=>e in t?fg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,bg=(t,e)=>{for(var s in e||(e={}))yg.call(e,s)&&vg(t,s,e[s]);if(gg)for(var s of gg(e))Tg.call(e,s)&&vg(t,s,e[s]);return t},wg=t=>{if("undefined"!=typeof require)return require(t);throw new Error('Dynamic require of "'+t+'" is not supported')},xg=(t,e)=>function(){return e||(0,t[Object.keys(t)[0]])((e={exports:{}}).exports,e),e.exports},Ig=xg({"(disabled):crypto"(){}}),Eg=xg({"dist/web-ifc.js"(t,e){var s,r=(s="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(s=s||__filename),function(t){var e,r,i=void 0!==(t=t||{})?t:{};i.ready=new Promise((function(t,s){e=t,r=s}));var n,o={};for(n in i)i.hasOwnProperty(n)&&(o[n]=i[n]);var a="./this.program",h=function(t,e){throw e},c=!1,l=!1,u=!1,p=!1;c="object"==typeof window,l="function"==typeof importScripts,u="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,p=!c&&!u&&!l;var d,m,f,g,y="";function T(t){return i.locateFile?i.locateFile(t,y):y+t}u?(y=l?wg("path").dirname(y)+"/":__dirname+"/",d=function(t,e){return f||(f=wg("fs")),g||(g=wg("path")),t=g.normalize(t),f.readFileSync(t,e?null:"utf8")},m=function(t){var e=d(t,!0);return e.buffer||(e=new Uint8Array(e)),R(e.buffer),e},process.argv.length>1&&(a=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof Lr))throw t})),process.on("unhandledRejection",gt),h=function(t){process.exit(t)},i.inspect=function(){return"[Emscripten Module object]"}):p?("undefined"!=typeof read&&(d=function(t){return read(t)}),m=function(t){var e;return"function"==typeof readbuffer?new Uint8Array(readbuffer(t)):(R("object"==typeof(e=read(t,"binary"))),e)},"undefined"!=typeof scriptArgs&&scriptArgs,"function"==typeof quit&&(h=function(t){quit(t)}),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(c||l)&&(l?y=self.location.href:"undefined"!=typeof document&&document.currentScript&&(y=document.currentScript.src),s&&(y=s),y=0!==y.indexOf("blob:")?y.slice(0,y.lastIndexOf("/")+1):"",d=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},l&&(m=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}));var v=i.print||console.log.bind(console),b=i.printErr||console.warn.bind(console);for(n in o)o.hasOwnProperty(n)&&(i[n]=o[n]);o=null,i.arguments&&i.arguments,i.thisProgram&&(a=i.thisProgram),i.quit&&(h=i.quit);var w,x,I,E=16;function S(t,e){return e||(e=E),Math.ceil(t/e)*e}i.wasmBinary&&(w=i.wasmBinary),i.noExitRuntime&&(x=i.noExitRuntime),"object"!=typeof WebAssembly&&gt("no native wasm support detected");var A=!1;function R(t,e){t||gt("Assertion failed: "+e)}var C="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function O(t,e,s){for(var r=(e>>>=0)+s,i=e;t[i>>>0]&&!(i>=r);)++i;if(i-e>16&&t.subarray&&C)return C.decode(t.subarray(e>>>0,i>>>0));for(var n="";e<i;){var o=t[e++>>>0];if(128&o){var a=63&t[e++>>>0];if(192!=(224&o)){var h=63&t[e++>>>0];if((o=224==(240&o)?(15&o)<<12|a<<6|h:(7&o)<<18|a<<12|h<<6|63&t[e++>>>0])<65536)n+=String.fromCharCode(o);else{var c=o-65536;n+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else n+=String.fromCharCode((31&o)<<6|a)}else n+=String.fromCharCode(o)}return n}function _(t,e){return(t>>>=0)?O(L,t,e):""}function D(t,e,s,r){if(!(r>0))return 0;for(var i=s>>>=0,n=s+r-1,o=0;o<t.length;++o){var a=t.charCodeAt(o);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&t.charCodeAt(++o)),a<=127){if(s>=n)break;e[s++>>>0]=a}else if(a<=2047){if(s+1>=n)break;e[s++>>>0]=192|a>>6,e[s++>>>0]=128|63&a}else if(a<=65535){if(s+2>=n)break;e[s++>>>0]=224|a>>12,e[s++>>>0]=128|a>>6&63,e[s++>>>0]=128|63&a}else{if(s+3>=n)break;e[s++>>>0]=240|a>>18,e[s++>>>0]=128|a>>12&63,e[s++>>>0]=128|a>>6&63,e[s++>>>0]=128|63&a}}return e[s>>>0]=0,s-i}function F(t,e,s){return D(t,L,e,s)}function M(t){for(var e=0,s=0;s<t.length;++s){var r=t.charCodeAt(s);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&t.charCodeAt(++s)),r<=127?++e:e+=r<=2047?2:r<=65535?3:4}return e}var P,N,L,k,U,H,B,G,j,z="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function V(t,e){for(var s=t,r=s>>1,i=r+e/2;!(r>=i)&&U[r>>>0];)++r;if((s=r<<1)-t>32&&z)return z.decode(L.subarray(t>>>0,s>>>0));for(var n="",o=0;!(o>=e/2);++o){var a=k[t+2*o>>>1];if(0==a)break;n+=String.fromCharCode(a)}return n}function W(t,e,s){if(void 0===s&&(s=2147483647),s<2)return 0;for(var r=e,i=(s-=2)<2*t.length?s/2:t.length,n=0;n<i;++n){var o=t.charCodeAt(n);k[e>>>1]=o,e+=2}return k[e>>>1]=0,e-r}function Y(t){return 2*t.length}function X(t,e){for(var s=0,r="";!(s>=e/4);){var i=H[t+4*s>>>2];if(0==i)break;if(++s,i>=65536){var n=i-65536;r+=String.fromCharCode(55296|n>>10,56320|1023&n)}else r+=String.fromCharCode(i)}return r}function q(t,e,s){if(void 0===s&&(s=2147483647),s<4)return 0;for(var r=e>>>=0,i=r+s-4,n=0;n<t.length;++n){var o=t.charCodeAt(n);if(o>=55296&&o<=57343&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++n)),H[e>>>2]=o,(e+=4)+4>i)break}return H[e>>>2]=0,e-r}function K(t){for(var e=0,s=0;s<t.length;++s){var r=t.charCodeAt(s);r>=55296&&r<=57343&&++s,e+=4}return e}function J(t,e){N.set(t,e>>>0)}function $(t,e,s){for(var r=0;r<t.length;++r)N[e++>>>0]=t.charCodeAt(r);s||(N[e>>>0]=0)}function Z(t,e){return t%e>0&&(t+=e-t%e),t}function Q(t){P=t,i.HEAP8=N=new Int8Array(t),i.HEAP16=k=new Int16Array(t),i.HEAP32=H=new Int32Array(t),i.HEAPU8=L=new Uint8Array(t),i.HEAPU16=U=new Uint16Array(t),i.HEAPU32=B=new Uint32Array(t),i.HEAPF32=G=new Float32Array(t),i.HEAPF64=j=new Float64Array(t)}var tt,et=i.INITIAL_MEMORY||16777216;(I=i.wasmMemory?i.wasmMemory:new WebAssembly.Memory({initial:et/65536,maximum:65536}))&&(P=I.buffer),et=P.byteLength,Q(P);var st=[],rt=[],it=[],nt=[];function ot(){if(i.preRun)for("function"==typeof i.preRun&&(i.preRun=[i.preRun]);i.preRun.length;)lt(i.preRun.shift());Ct(st)}function at(){i.noFSInit||Ht.init.initialized||Ht.init(),Lt.init(),Ct(rt)}function ht(){Ht.ignorePermissions=!1,Ct(it)}function ct(){if(i.postRun)for("function"==typeof i.postRun&&(i.postRun=[i.postRun]);i.postRun.length;)ut(i.postRun.shift());Ct(nt)}function lt(t){st.unshift(t)}function ut(t){nt.unshift(t)}var pt=0,dt=null;function mt(t){pt++,i.monitorRunDependencies&&i.monitorRunDependencies(pt)}function ft(t){if(pt--,i.monitorRunDependencies&&i.monitorRunDependencies(pt),0==pt&&dt){var e=dt;dt=null,e()}}function gt(t){i.onAbort&&i.onAbort(t),b(t+=""),A=!0,t="abort("+t+"). Build with -s ASSERTIONS=1 for more info.";var e=new WebAssembly.RuntimeError(t);throw r(e),e}function yt(t,e){return String.prototype.startsWith?t.startsWith(e):0===t.indexOf(e)}i.preloadedImages={},i.preloadedAudios={};var Tt="data:application/octet-stream;base64,";function vt(t){return yt(t,Tt)}var bt="file://";function wt(t){return yt(t,bt)}var xt,It,Et=BD+"web-ifc.wasm";function St(){try{if(w)return new Uint8Array(w);if(m)return m(Et);throw"both async and sync fetching of the wasm failed"}catch(t){gt(t)}}function At(){return w||!c&&!l||"function"!=typeof fetch||wt(Et)?Promise.resolve().then(St):fetch(Et,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+Et+"'";return t.arrayBuffer()})).catch((function(){return St()}))}function Rt(){var t={a:_r};function e(t,e){var s=t.exports;i.asm=s,tt=i.asm.X,ft()}function s(t){e(t.instance)}function n(e){return At().then((function(e){return WebAssembly.instantiate(e,t)})).then(e,(function(t){b("failed to asynchronously prepare wasm: "+t),gt(t)}))}if(mt(),i.instantiateWasm)try{return i.instantiateWasm(t,e)}catch(t){return b("Module.instantiateWasm callback failed with error: "+t),!1}return(w||"function"!=typeof WebAssembly.instantiateStreaming||vt(Et)||wt(Et)||"function"!=typeof fetch?n(s):fetch(Et,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,t).then(s,(function(t){return b("wasm streaming compile failed: "+t),b("falling back to ArrayBuffer instantiation"),n(s)}))}))).catch(r),{}}function Ct(t){for(;t.length>0;){var e=t.shift();if("function"!=typeof e){var s=e.func;"number"==typeof s?void 0===e.arg?tt.get(s)():tt.get(s)(e.arg):s(void 0===e.arg?null:e.arg)}else e(i)}}function Ot(t,e,s){return s&&s.length?i["dynCall_"+t].apply(null,[e].concat(s)):i["dynCall_"+t].call(null,e)}function _t(t,e,s){return-1!=t.indexOf("j")?Ot(t,e,s):tt.get(e).apply(null,s)}function Dt(t,e,s,r){gt("Assertion failed: "+_(t)+", at: "+[e?_(e):"unknown filename",s,r?_(r):"unknown function"])}function Ft(t){return H[Pr()>>>2]=t,t}vt(Et)||(Et=T(Et));var Mt={splitPath:function(t){return/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(t).slice(1)},normalizeArray:function(t,e){for(var s=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),s++):s&&(t.splice(r,1),s--)}if(e)for(;s;s--)t.unshift("..");return t},normalize:function(t){var e="/"===t.charAt(0),s="/"===t.slice(-1);return(t=Mt.normalizeArray(t.split("/").filter((function(t){return!!t})),!e).join("/"))||e||(t="."),t&&s&&(t+="/"),(e?"/":"")+t},dirname:function(t){var e=Mt.splitPath(t),s=e[0],r=e[1];return s||r?(r&&(r=r.slice(0,r.length-1)),s+r):"."},basename:function(t){if("/"===t)return"/";var e=(t=(t=Mt.normalize(t)).replace(/\/$/,"")).lastIndexOf("/");return-1===e?t:t.slice(e+1)},extname:function(t){return Mt.splitPath(t)[3]},join:function(){var t=Array.prototype.slice.call(arguments,0);return Mt.normalize(t.join("/"))},join2:function(t,e){return Mt.normalize(t+"/"+e)}};function Pt(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return function(){return crypto.getRandomValues(t),t[0]}}if(u)try{var e=Ig();return function(){return e.randomBytes(1)[0]}}catch(t){}return function(){gt("randomDevice")}}var Nt={resolve:function(){for(var t="",e=!1,s=arguments.length-1;s>=-1&&!e;s--){var r=s>=0?arguments[s]:Ht.cwd();if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";t=r+"/"+t,e="/"===r.charAt(0)}return(e?"/":"")+(t=Mt.normalizeArray(t.split("/").filter((function(t){return!!t})),!e).join("/"))||"."},relative:function(t,e){function s(t){for(var e=0;e<t.length&&""===t[e];e++);for(var s=t.length-1;s>=0&&""===t[s];s--);return e>s?[]:t.slice(e,s-e+1)}t=Nt.resolve(t).slice(1),e=Nt.resolve(e).slice(1);for(var r=s(t.split("/")),i=s(e.split("/")),n=Math.min(r.length,i.length),o=n,a=0;a<n;a++)if(r[a]!==i[a]){o=a;break}var h=[];for(a=o;a<r.length;a++)h.push("..");return(h=h.concat(i.slice(o))).join("/")}},Lt={ttys:[],init:function(){},shutdown:function(){},register:function(t,e){Lt.ttys[t]={input:[],output:[],ops:e},Ht.registerDevice(t,Lt.stream_ops)},stream_ops:{open:function(t){var e=Lt.ttys[t.node.rdev];if(!e)throw new Ht.ErrnoError(43);t.tty=e,t.seekable=!1},close:function(t){t.tty.ops.flush(t.tty)},flush:function(t){t.tty.ops.flush(t.tty)},read:function(t,e,s,r,i){if(!t.tty||!t.tty.ops.get_char)throw new Ht.ErrnoError(60);for(var n=0,o=0;o<r;o++){var a;try{a=t.tty.ops.get_char(t.tty)}catch(t){throw new Ht.ErrnoError(29)}if(void 0===a&&0===n)throw new Ht.ErrnoError(6);if(null==a)break;n++,e[s+o]=a}return n&&(t.node.timestamp=Date.now()),n},write:function(t,e,s,r,i){if(!t.tty||!t.tty.ops.put_char)throw new Ht.ErrnoError(60);try{for(var n=0;n<r;n++)t.tty.ops.put_char(t.tty,e[s+n])}catch(t){throw new Ht.ErrnoError(29)}return r&&(t.node.timestamp=Date.now()),n}},default_tty_ops:{get_char:function(t){if(!t.input.length){var e=null;if(u){var s=Buffer.alloc?Buffer.alloc(256):new Buffer(256),r=0;try{r=f.readSync(process.stdin.fd,s,0,256,null)}catch(t){if(-1==t.toString().indexOf("EOF"))throw t;r=0}e=r>0?s.slice(0,r).toString("utf-8"):null}else"undefined"!=typeof window&&"function"==typeof window.prompt?null!==(e=window.prompt("Input: "))&&(e+="\n"):"function"==typeof readline&&null!==(e=readline())&&(e+="\n");if(!e)return null;t.input=Cr(e,!0)}return t.input.shift()},put_char:function(t,e){null===e||10===e?(v(O(t.output,0)),t.output=[]):0!=e&&t.output.push(e)},flush:function(t){t.output&&t.output.length>0&&(v(O(t.output,0)),t.output=[])}},default_tty1_ops:{put_char:function(t,e){null===e||10===e?(b(O(t.output,0)),t.output=[]):0!=e&&t.output.push(e)},flush:function(t){t.output&&t.output.length>0&&(b(O(t.output,0)),t.output=[])}}};function kt(t){for(var e=S(t,16384),s=Fr(e);t<e;)N[s+t++>>>0]=0;return s}var Ut={ops_table:null,mount:function(t){return Ut.createNode(null,"/",16895,0)},createNode:function(t,e,s,r){if(Ht.isBlkdev(s)||Ht.isFIFO(s))throw new Ht.ErrnoError(63);Ut.ops_table||(Ut.ops_table={dir:{node:{getattr:Ut.node_ops.getattr,setattr:Ut.node_ops.setattr,lookup:Ut.node_ops.lookup,mknod:Ut.node_ops.mknod,rename:Ut.node_ops.rename,unlink:Ut.node_ops.unlink,rmdir:Ut.node_ops.rmdir,readdir:Ut.node_ops.readdir,symlink:Ut.node_ops.symlink},stream:{llseek:Ut.stream_ops.llseek}},file:{node:{getattr:Ut.node_ops.getattr,setattr:Ut.node_ops.setattr},stream:{llseek:Ut.stream_ops.llseek,read:Ut.stream_ops.read,write:Ut.stream_ops.write,allocate:Ut.stream_ops.allocate,mmap:Ut.stream_ops.mmap,msync:Ut.stream_ops.msync}},link:{node:{getattr:Ut.node_ops.getattr,setattr:Ut.node_ops.setattr,readlink:Ut.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Ut.node_ops.getattr,setattr:Ut.node_ops.setattr},stream:Ht.chrdev_stream_ops}});var i=Ht.createNode(t,e,s,r);return Ht.isDir(i.mode)?(i.node_ops=Ut.ops_table.dir.node,i.stream_ops=Ut.ops_table.dir.stream,i.contents={}):Ht.isFile(i.mode)?(i.node_ops=Ut.ops_table.file.node,i.stream_ops=Ut.ops_table.file.stream,i.usedBytes=0,i.contents=null):Ht.isLink(i.mode)?(i.node_ops=Ut.ops_table.link.node,i.stream_ops=Ut.ops_table.link.stream):Ht.isChrdev(i.mode)&&(i.node_ops=Ut.ops_table.chrdev.node,i.stream_ops=Ut.ops_table.chrdev.stream),i.timestamp=Date.now(),t&&(t.contents[e]=i),i},getFileDataAsRegularArray:function(t){if(t.contents&&t.contents.subarray){for(var e=[],s=0;s<t.usedBytes;++s)e.push(t.contents[s]);return e}return t.contents},getFileDataAsTypedArray:function(t){return t.contents?t.contents.subarray?t.contents.subarray(0,t.usedBytes):new Uint8Array(t.contents):new Uint8Array(0)},expandFileStorage:function(t,e){e>>>=0;var s=t.contents?t.contents.length:0;if(!(s>=e)){e=Math.max(e,s*(s<1048576?2:1.125)>>>0),0!=s&&(e=Math.max(e,256));var r=t.contents;t.contents=new Uint8Array(e),t.usedBytes>0&&t.contents.set(r.subarray(0,t.usedBytes),0)}},resizeFileStorage:function(t,e){if(e>>>=0,t.usedBytes!=e){if(0==e)return t.contents=null,void(t.usedBytes=0);if(!t.contents||t.contents.subarray){var s=t.contents;return t.contents=new Uint8Array(e),s&&t.contents.set(s.subarray(0,Math.min(e,t.usedBytes))),void(t.usedBytes=e)}if(t.contents||(t.contents=[]),t.contents.length>e)t.contents.length=e;else for(;t.contents.length<e;)t.contents.push(0);t.usedBytes=e}},node_ops:{getattr:function(t){var e={};return e.dev=Ht.isChrdev(t.mode)?t.id:1,e.ino=t.id,e.mode=t.mode,e.nlink=1,e.uid=0,e.gid=0,e.rdev=t.rdev,Ht.isDir(t.mode)?e.size=4096:Ht.isFile(t.mode)?e.size=t.usedBytes:Ht.isLink(t.mode)?e.size=t.link.length:e.size=0,e.atime=new Date(t.timestamp),e.mtime=new Date(t.timestamp),e.ctime=new Date(t.timestamp),e.blksize=4096,e.blocks=Math.ceil(e.size/e.blksize),e},setattr:function(t,e){void 0!==e.mode&&(t.mode=e.mode),void 0!==e.timestamp&&(t.timestamp=e.timestamp),void 0!==e.size&&Ut.resizeFileStorage(t,e.size)},lookup:function(t,e){throw Ht.genericErrors[44]},mknod:function(t,e,s,r){return Ut.createNode(t,e,s,r)},rename:function(t,e,s){if(Ht.isDir(t.mode)){var r;try{r=Ht.lookupNode(e,s)}catch(t){}if(r)for(var i in r.contents)throw new Ht.ErrnoError(55)}delete t.parent.contents[t.name],t.name=s,e.contents[s]=t,t.parent=e},unlink:function(t,e){delete t.contents[e]},rmdir:function(t,e){var s=Ht.lookupNode(t,e);for(var r in s.contents)throw new Ht.ErrnoError(55);delete t.contents[e]},readdir:function(t){var e=[".",".."];for(var s in t.contents)t.contents.hasOwnProperty(s)&&e.push(s);return e},symlink:function(t,e,s){var r=Ut.createNode(t,e,41471,0);return r.link=s,r},readlink:function(t){if(!Ht.isLink(t.mode))throw new Ht.ErrnoError(28);return t.link}},stream_ops:{read:function(t,e,s,r,i){var n=t.node.contents;if(i>=t.node.usedBytes)return 0;var o=Math.min(t.node.usedBytes-i,r);if(o>8&&n.subarray)e.set(n.subarray(i,i+o),s);else for(var a=0;a<o;a++)e[s+a]=n[i+a];return o},write:function(t,e,s,r,i,n){if(e.buffer===N.buffer&&(n=!1),!r)return 0;var o=t.node;if(o.timestamp=Date.now(),e.subarray&&(!o.contents||o.contents.subarray)){if(n)return o.contents=e.subarray(s,s+r),o.usedBytes=r,r;if(0===o.usedBytes&&0===i)return o.contents=e.slice(s,s+r),o.usedBytes=r,r;if(i+r<=o.usedBytes)return o.contents.set(e.subarray(s,s+r),i),r}if(Ut.expandFileStorage(o,i+r),o.contents.subarray&&e.subarray)o.contents.set(e.subarray(s,s+r),i);else for(var a=0;a<r;a++)o.contents[i+a]=e[s+a];return o.usedBytes=Math.max(o.usedBytes,i+r),r},llseek:function(t,e,s){var r=e;if(1===s?r+=t.position:2===s&&Ht.isFile(t.node.mode)&&(r+=t.node.usedBytes),r<0)throw new Ht.ErrnoError(28);return r},allocate:function(t,e,s){Ut.expandFileStorage(t.node,e+s),t.node.usedBytes=Math.max(t.node.usedBytes,e+s)},mmap:function(t,e,s,r,i,n){if(R(0===e),!Ht.isFile(t.node.mode))throw new Ht.ErrnoError(43);var o,a,h=t.node.contents;if(2&n||h.buffer!==P){if((r>0||r+s<h.length)&&(h=h.subarray?h.subarray(r,r+s):Array.prototype.slice.call(h,r,r+s)),a=!0,!(o=kt(s)))throw new Ht.ErrnoError(48);o>>>=0,N.set(h,o>>>0)}else a=!1,o=h.byteOffset;return{ptr:o,allocated:a}},msync:function(t,e,s,r,i){if(!Ht.isFile(t.node.mode))throw new Ht.ErrnoError(43);return 2&i||Ut.stream_ops.write(t,e,0,r,s,!1),0}}},Ht={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:function(t,e){if(e=e||{},!(t=Nt.resolve(Ht.cwd(),t)))return{path:"",node:null};var s={follow_mount:!0,recurse_count:0};for(var r in s)void 0===e[r]&&(e[r]=s[r]);if(e.recurse_count>8)throw new Ht.ErrnoError(32);for(var i=Mt.normalizeArray(t.split("/").filter((function(t){return!!t})),!1),n=Ht.root,o="/",a=0;a<i.length;a++){var h=a===i.length-1;if(h&&e.parent)break;if(n=Ht.lookupNode(n,i[a]),o=Mt.join2(o,i[a]),Ht.isMountpoint(n)&&(!h||h&&e.follow_mount)&&(n=n.mounted.root),!h||e.follow)for(var c=0;Ht.isLink(n.mode);){var l=Ht.readlink(o);if(o=Nt.resolve(Mt.dirname(o),l),n=Ht.lookupPath(o,{recurse_count:e.recurse_count}).node,c++>40)throw new Ht.ErrnoError(32)}}return{path:o,node:n}},getPath:function(t){for(var e;;){if(Ht.isRoot(t)){var s=t.mount.mountpoint;return e?"/"!==s[s.length-1]?s+"/"+e:s+e:s}e=e?t.name+"/"+e:t.name,t=t.parent}},hashName:function(t,e){for(var s=0,r=0;r<e.length;r++)s=(s<<5)-s+e.charCodeAt(r)|0;return(t+s>>>0)%Ht.nameTable.length},hashAddNode:function(t){var e=Ht.hashName(t.parent.id,t.name);t.name_next=Ht.nameTable[e],Ht.nameTable[e]=t},hashRemoveNode:function(t){var e=Ht.hashName(t.parent.id,t.name);if(Ht.nameTable[e]===t)Ht.nameTable[e]=t.name_next;else for(var s=Ht.nameTable[e];s;){if(s.name_next===t){s.name_next=t.name_next;break}s=s.name_next}},lookupNode:function(t,e){var s=Ht.mayLookup(t);if(s)throw new Ht.ErrnoError(s,t);for(var r=Ht.hashName(t.id,e),i=Ht.nameTable[r];i;i=i.name_next){var n=i.name;if(i.parent.id===t.id&&n===e)return i}return Ht.lookup(t,e)},createNode:function(t,e,s,r){var i=new Ht.FSNode(t,e,s,r);return Ht.hashAddNode(i),i},destroyNode:function(t){Ht.hashRemoveNode(t)},isRoot:function(t){return t===t.parent},isMountpoint:function(t){return!!t.mounted},isFile:function(t){return 32768==(61440&t)},isDir:function(t){return 16384==(61440&t)},isLink:function(t){return 40960==(61440&t)},isChrdev:function(t){return 8192==(61440&t)},isBlkdev:function(t){return 24576==(61440&t)},isFIFO:function(t){return 4096==(61440&t)},isSocket:function(t){return 49152==(49152&t)},flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:function(t){var e=Ht.flagModes[t];if(void 0===e)throw new Error("Unknown file open mode: "+t);return e},flagsToPermissionString:function(t){var e=["r","w","rw"][3&t];return 512&t&&(e+="w"),e},nodePermissions:function(t,e){return Ht.ignorePermissions||(-1===e.indexOf("r")||292&t.mode)&&(-1===e.indexOf("w")||146&t.mode)&&(-1===e.indexOf("x")||73&t.mode)?0:2},mayLookup:function(t){var e=Ht.nodePermissions(t,"x");return e||(t.node_ops.lookup?0:2)},mayCreate:function(t,e){try{return Ht.lookupNode(t,e),20}catch(t){}return Ht.nodePermissions(t,"wx")},mayDelete:function(t,e,s){var r;try{r=Ht.lookupNode(t,e)}catch(t){return t.errno}var i=Ht.nodePermissions(t,"wx");if(i)return i;if(s){if(!Ht.isDir(r.mode))return 54;if(Ht.isRoot(r)||Ht.getPath(r)===Ht.cwd())return 10}else if(Ht.isDir(r.mode))return 31;return 0},mayOpen:function(t,e){return t?Ht.isLink(t.mode)?32:Ht.isDir(t.mode)&&("r"!==Ht.flagsToPermissionString(e)||512&e)?31:Ht.nodePermissions(t,Ht.flagsToPermissionString(e)):44},MAX_OPEN_FDS:4096,nextfd:function(t,e){t=t||0,e=e||Ht.MAX_OPEN_FDS;for(var s=t;s<=e;s++)if(!Ht.streams[s])return s;throw new Ht.ErrnoError(33)},getStream:function(t){return Ht.streams[t]},createStream:function(t,e,s){Ht.FSStream||(Ht.FSStream=function(){},Ht.FSStream.prototype={object:{get:function(){return this.node},set:function(t){this.node=t}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return 0!=(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}});var r=new Ht.FSStream;for(var i in t)r[i]=t[i];t=r;var n=Ht.nextfd(e,s);return t.fd=n,Ht.streams[n]=t,t},closeStream:function(t){Ht.streams[t]=null},chrdev_stream_ops:{open:function(t){var e=Ht.getDevice(t.node.rdev);t.stream_ops=e.stream_ops,t.stream_ops.open&&t.stream_ops.open(t)},llseek:function(){throw new Ht.ErrnoError(70)}},major:function(t){return t>>8},minor:function(t){return 255&t},makedev:function(t,e){return t<<8|e},registerDevice:function(t,e){Ht.devices[t]={stream_ops:e}},getDevice:function(t){return Ht.devices[t]},getMounts:function(t){for(var e=[],s=[t];s.length;){var r=s.pop();e.push(r),s.push.apply(s,r.mounts)}return e},syncfs:function(t,e){"function"==typeof t&&(e=t,t=!1),Ht.syncFSRequests++,Ht.syncFSRequests>1&&b("warning: "+Ht.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var s=Ht.getMounts(Ht.root.mount),r=0;function i(t){return Ht.syncFSRequests--,e(t)}function n(t){if(t)return n.errored?void 0:(n.errored=!0,i(t));++r>=s.length&&i(null)}s.forEach((function(e){if(!e.type.syncfs)return n(null);e.type.syncfs(e,t,n)}))},mount:function(t,e,s){var r,i="/"===s,n=!s;if(i&&Ht.root)throw new Ht.ErrnoError(10);if(!i&&!n){var o=Ht.lookupPath(s,{follow_mount:!1});if(s=o.path,r=o.node,Ht.isMountpoint(r))throw new Ht.ErrnoError(10);if(!Ht.isDir(r.mode))throw new Ht.ErrnoError(54)}var a={type:t,opts:e,mountpoint:s,mounts:[]},h=t.mount(a);return h.mount=a,a.root=h,i?Ht.root=h:r&&(r.mounted=a,r.mount&&r.mount.mounts.push(a)),h},unmount:function(t){var e=Ht.lookupPath(t,{follow_mount:!1});if(!Ht.isMountpoint(e.node))throw new Ht.ErrnoError(28);var s=e.node,r=s.mounted,i=Ht.getMounts(r);Object.keys(Ht.nameTable).forEach((function(t){for(var e=Ht.nameTable[t];e;){var s=e.name_next;-1!==i.indexOf(e.mount)&&Ht.destroyNode(e),e=s}})),s.mounted=null;var n=s.mount.mounts.indexOf(r);s.mount.mounts.splice(n,1)},lookup:function(t,e){return t.node_ops.lookup(t,e)},mknod:function(t,e,s){var r=Ht.lookupPath(t,{parent:!0}).node,i=Mt.basename(t);if(!i||"."===i||".."===i)throw new Ht.ErrnoError(28);var n=Ht.mayCreate(r,i);if(n)throw new Ht.ErrnoError(n);if(!r.node_ops.mknod)throw new Ht.ErrnoError(63);return r.node_ops.mknod(r,i,e,s)},create:function(t,e){return e=void 0!==e?e:438,e&=4095,e|=32768,Ht.mknod(t,e,0)},mkdir:function(t,e){return e=void 0!==e?e:511,e&=1023,e|=16384,Ht.mknod(t,e,0)},mkdirTree:function(t,e){for(var s=t.split("/"),r="",i=0;i<s.length;++i)if(s[i]){r+="/"+s[i];try{Ht.mkdir(r,e)}catch(t){if(20!=t.errno)throw t}}},mkdev:function(t,e,s){return void 0===s&&(s=e,e=438),e|=8192,Ht.mknod(t,e,s)},symlink:function(t,e){if(!Nt.resolve(t))throw new Ht.ErrnoError(44);var s=Ht.lookupPath(e,{parent:!0}).node;if(!s)throw new Ht.ErrnoError(44);var r=Mt.basename(e),i=Ht.mayCreate(s,r);if(i)throw new Ht.ErrnoError(i);if(!s.node_ops.symlink)throw new Ht.ErrnoError(63);return s.node_ops.symlink(s,r,t)},rename:function(t,e){var s,r,i=Mt.dirname(t),n=Mt.dirname(e),o=Mt.basename(t),a=Mt.basename(e);if(s=Ht.lookupPath(t,{parent:!0}).node,r=Ht.lookupPath(e,{parent:!0}).node,!s||!r)throw new Ht.ErrnoError(44);if(s.mount!==r.mount)throw new Ht.ErrnoError(75);var h,c=Ht.lookupNode(s,o),l=Nt.relative(t,n);if("."!==l.charAt(0))throw new Ht.ErrnoError(28);if("."!==(l=Nt.relative(e,i)).charAt(0))throw new Ht.ErrnoError(55);try{h=Ht.lookupNode(r,a)}catch(t){}if(c!==h){var u=Ht.isDir(c.mode),p=Ht.mayDelete(s,o,u);if(p)throw new Ht.ErrnoError(p);if(p=h?Ht.mayDelete(r,a,u):Ht.mayCreate(r,a))throw new Ht.ErrnoError(p);if(!s.node_ops.rename)throw new Ht.ErrnoError(63);if(Ht.isMountpoint(c)||h&&Ht.isMountpoint(h))throw new Ht.ErrnoError(10);if(r!==s&&(p=Ht.nodePermissions(s,"w")))throw new Ht.ErrnoError(p);try{Ht.trackingDelegate.willMovePath&&Ht.trackingDelegate.willMovePath(t,e)}catch(s){b("FS.trackingDelegate['willMovePath']('"+t+"', '"+e+"') threw an exception: "+s.message)}Ht.hashRemoveNode(c);try{s.node_ops.rename(c,r,a)}catch(t){throw t}finally{Ht.hashAddNode(c)}try{Ht.trackingDelegate.onMovePath&&Ht.trackingDelegate.onMovePath(t,e)}catch(s){b("FS.trackingDelegate['onMovePath']('"+t+"', '"+e+"') threw an exception: "+s.message)}}},rmdir:function(t){var e=Ht.lookupPath(t,{parent:!0}).node,s=Mt.basename(t),r=Ht.lookupNode(e,s),i=Ht.mayDelete(e,s,!0);if(i)throw new Ht.ErrnoError(i);if(!e.node_ops.rmdir)throw new Ht.ErrnoError(63);if(Ht.isMountpoint(r))throw new Ht.ErrnoError(10);try{Ht.trackingDelegate.willDeletePath&&Ht.trackingDelegate.willDeletePath(t)}catch(e){b("FS.trackingDelegate['willDeletePath']('"+t+"') threw an exception: "+e.message)}e.node_ops.rmdir(e,s),Ht.destroyNode(r);try{Ht.trackingDelegate.onDeletePath&&Ht.trackingDelegate.onDeletePath(t)}catch(e){b("FS.trackingDelegate['onDeletePath']('"+t+"') threw an exception: "+e.message)}},readdir:function(t){var e=Ht.lookupPath(t,{follow:!0}).node;if(!e.node_ops.readdir)throw new Ht.ErrnoError(54);return e.node_ops.readdir(e)},unlink:function(t){var e=Ht.lookupPath(t,{parent:!0}).node,s=Mt.basename(t),r=Ht.lookupNode(e,s),i=Ht.mayDelete(e,s,!1);if(i)throw new Ht.ErrnoError(i);if(!e.node_ops.unlink)throw new Ht.ErrnoError(63);if(Ht.isMountpoint(r))throw new Ht.ErrnoError(10);try{Ht.trackingDelegate.willDeletePath&&Ht.trackingDelegate.willDeletePath(t)}catch(e){b("FS.trackingDelegate['willDeletePath']('"+t+"') threw an exception: "+e.message)}e.node_ops.unlink(e,s),Ht.destroyNode(r);try{Ht.trackingDelegate.onDeletePath&&Ht.trackingDelegate.onDeletePath(t)}catch(e){b("FS.trackingDelegate['onDeletePath']('"+t+"') threw an exception: "+e.message)}},readlink:function(t){var e=Ht.lookupPath(t).node;if(!e)throw new Ht.ErrnoError(44);if(!e.node_ops.readlink)throw new Ht.ErrnoError(28);return Nt.resolve(Ht.getPath(e.parent),e.node_ops.readlink(e))},stat:function(t,e){var s=Ht.lookupPath(t,{follow:!e}).node;if(!s)throw new Ht.ErrnoError(44);if(!s.node_ops.getattr)throw new Ht.ErrnoError(63);return s.node_ops.getattr(s)},lstat:function(t){return Ht.stat(t,!0)},chmod:function(t,e,s){var r;if(!(r="string"==typeof t?Ht.lookupPath(t,{follow:!s}).node:t).node_ops.setattr)throw new Ht.ErrnoError(63);r.node_ops.setattr(r,{mode:4095&e|-4096&r.mode,timestamp:Date.now()})},lchmod:function(t,e){Ht.chmod(t,e,!0)},fchmod:function(t,e){var s=Ht.getStream(t);if(!s)throw new Ht.ErrnoError(8);Ht.chmod(s.node,e)},chown:function(t,e,s,r){var i;if(!(i="string"==typeof t?Ht.lookupPath(t,{follow:!r}).node:t).node_ops.setattr)throw new Ht.ErrnoError(63);i.node_ops.setattr(i,{timestamp:Date.now()})},lchown:function(t,e,s){Ht.chown(t,e,s,!0)},fchown:function(t,e,s){var r=Ht.getStream(t);if(!r)throw new Ht.ErrnoError(8);Ht.chown(r.node,e,s)},truncate:function(t,e){if(e<0)throw new Ht.ErrnoError(28);var s;if(!(s="string"==typeof t?Ht.lookupPath(t,{follow:!0}).node:t).node_ops.setattr)throw new Ht.ErrnoError(63);if(Ht.isDir(s.mode))throw new Ht.ErrnoError(31);if(!Ht.isFile(s.mode))throw new Ht.ErrnoError(28);var r=Ht.nodePermissions(s,"w");if(r)throw new Ht.ErrnoError(r);s.node_ops.setattr(s,{size:e,timestamp:Date.now()})},ftruncate:function(t,e){var s=Ht.getStream(t);if(!s)throw new Ht.ErrnoError(8);if(0==(2097155&s.flags))throw new Ht.ErrnoError(28);Ht.truncate(s.node,e)},utime:function(t,e,s){var r=Ht.lookupPath(t,{follow:!0}).node;r.node_ops.setattr(r,{timestamp:Math.max(e,s)})},open:function(t,e,s,r,n){if(""===t)throw new Ht.ErrnoError(44);var o;if(s=void 0===s?438:s,s=64&(e="string"==typeof e?Ht.modeStringToFlags(e):e)?4095&s|32768:0,"object"==typeof t)o=t;else{t=Mt.normalize(t);try{o=Ht.lookupPath(t,{follow:!(131072&e)}).node}catch(t){}}var a=!1;if(64&e)if(o){if(128&e)throw new Ht.ErrnoError(20)}else o=Ht.mknod(t,s,0),a=!0;if(!o)throw new Ht.ErrnoError(44);if(Ht.isChrdev(o.mode)&&(e&=-513),65536&e&&!Ht.isDir(o.mode))throw new Ht.ErrnoError(54);if(!a){var h=Ht.mayOpen(o,e);if(h)throw new Ht.ErrnoError(h)}512&e&&Ht.truncate(o,0),e&=-131713;var c=Ht.createStream({node:o,path:Ht.getPath(o),flags:e,seekable:!0,position:0,stream_ops:o.stream_ops,ungotten:[],error:!1},r,n);c.stream_ops.open&&c.stream_ops.open(c),!i.logReadFiles||1&e||(Ht.readFiles||(Ht.readFiles={}),t in Ht.readFiles||(Ht.readFiles[t]=1,b("FS.trackingDelegate error on read file: "+t)));try{if(Ht.trackingDelegate.onOpenFile){var l=0;1!=(2097155&e)&&(l|=Ht.tracking.openFlags.READ),0!=(2097155&e)&&(l|=Ht.tracking.openFlags.WRITE),Ht.trackingDelegate.onOpenFile(t,l)}}catch(e){b("FS.trackingDelegate['onOpenFile']('"+t+"', flags) threw an exception: "+e.message)}return c},close:function(t){if(Ht.isClosed(t))throw new Ht.ErrnoError(8);t.getdents&&(t.getdents=null);try{t.stream_ops.close&&t.stream_ops.close(t)}catch(t){throw t}finally{Ht.closeStream(t.fd)}t.fd=null},isClosed:function(t){return null===t.fd},llseek:function(t,e,s){if(Ht.isClosed(t))throw new Ht.ErrnoError(8);if(!t.seekable||!t.stream_ops.llseek)throw new Ht.ErrnoError(70);if(0!=s&&1!=s&&2!=s)throw new Ht.ErrnoError(28);return t.position=t.stream_ops.llseek(t,e,s),t.ungotten=[],t.position},read:function(t,e,s,r,i){if(s>>>=0,r<0||i<0)throw new Ht.ErrnoError(28);if(Ht.isClosed(t))throw new Ht.ErrnoError(8);if(1==(2097155&t.flags))throw new Ht.ErrnoError(8);if(Ht.isDir(t.node.mode))throw new Ht.ErrnoError(31);if(!t.stream_ops.read)throw new Ht.ErrnoError(28);var n=void 0!==i;if(n){if(!t.seekable)throw new Ht.ErrnoError(70)}else i=t.position;var o=t.stream_ops.read(t,e,s,r,i);return n||(t.position+=o),o},write:function(t,e,s,r,i,n){if(s>>>=0,r<0||i<0)throw new Ht.ErrnoError(28);if(Ht.isClosed(t))throw new Ht.ErrnoError(8);if(0==(2097155&t.flags))throw new Ht.ErrnoError(8);if(Ht.isDir(t.node.mode))throw new Ht.ErrnoError(31);if(!t.stream_ops.write)throw new Ht.ErrnoError(28);t.seekable&&1024&t.flags&&Ht.llseek(t,0,2);var o=void 0!==i;if(o){if(!t.seekable)throw new Ht.ErrnoError(70)}else i=t.position;var a=t.stream_ops.write(t,e,s,r,i,n);o||(t.position+=a);try{t.path&&Ht.trackingDelegate.onWriteToFile&&Ht.trackingDelegate.onWriteToFile(t.path)}catch(e){b("FS.trackingDelegate['onWriteToFile']('"+t.path+"') threw an exception: "+e.message)}return a},allocate:function(t,e,s){if(Ht.isClosed(t))throw new Ht.ErrnoError(8);if(e<0||s<=0)throw new Ht.ErrnoError(28);if(0==(2097155&t.flags))throw new Ht.ErrnoError(8);if(!Ht.isFile(t.node.mode)&&!Ht.isDir(t.node.mode))throw new Ht.ErrnoError(43);if(!t.stream_ops.allocate)throw new Ht.ErrnoError(138);t.stream_ops.allocate(t,e,s)},mmap:function(t,e,s,r,i,n){if(e>>>=0,0!=(2&i)&&0==(2&n)&&2!=(2097155&t.flags))throw new Ht.ErrnoError(2);if(1==(2097155&t.flags))throw new Ht.ErrnoError(2);if(!t.stream_ops.mmap)throw new Ht.ErrnoError(43);return t.stream_ops.mmap(t,e,s,r,i,n)},msync:function(t,e,s,r,i){return s>>>=0,t&&t.stream_ops.msync?t.stream_ops.msync(t,e,s,r,i):0},munmap:function(t){return 0},ioctl:function(t,e,s){if(!t.stream_ops.ioctl)throw new Ht.ErrnoError(59);return t.stream_ops.ioctl(t,e,s)},readFile:function(t,e){if((e=e||{}).flags=e.flags||0,e.encoding=e.encoding||"binary","utf8"!==e.encoding&&"binary"!==e.encoding)throw new Error('Invalid encoding type "'+e.encoding+'"');var s,r=Ht.open(t,e.flags),i=Ht.stat(t).size,n=new Uint8Array(i);return Ht.read(r,n,0,i,0),"utf8"===e.encoding?s=O(n,0):"binary"===e.encoding&&(s=n),Ht.close(r),s},writeFile:function(t,e,s){(s=s||{}).flags=s.flags||577;var r=Ht.open(t,s.flags,s.mode);if("string"==typeof e){var i=new Uint8Array(M(e)+1),n=D(e,i,0,i.length);Ht.write(r,i,0,n,void 0,s.canOwn)}else{if(!ArrayBuffer.isView(e))throw new Error("Unsupported data type");Ht.write(r,e,0,e.byteLength,void 0,s.canOwn)}Ht.close(r)},cwd:function(){return Ht.currentPath},chdir:function(t){var e=Ht.lookupPath(t,{follow:!0});if(null===e.node)throw new Ht.ErrnoError(44);if(!Ht.isDir(e.node.mode))throw new Ht.ErrnoError(54);var s=Ht.nodePermissions(e.node,"x");if(s)throw new Ht.ErrnoError(s);Ht.currentPath=e.path},createDefaultDirectories:function(){Ht.mkdir("/tmp"),Ht.mkdir("/home"),Ht.mkdir("/home/web_user")},createDefaultDevices:function(){Ht.mkdir("/dev"),Ht.registerDevice(Ht.makedev(1,3),{read:function(){return 0},write:function(t,e,s,r,i){return r}}),Ht.mkdev("/dev/null",Ht.makedev(1,3)),Lt.register(Ht.makedev(5,0),Lt.default_tty_ops),Lt.register(Ht.makedev(6,0),Lt.default_tty1_ops),Ht.mkdev("/dev/tty",Ht.makedev(5,0)),Ht.mkdev("/dev/tty1",Ht.makedev(6,0));var t=Pt();Ht.createDevice("/dev","random",t),Ht.createDevice("/dev","urandom",t),Ht.mkdir("/dev/shm"),Ht.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){Ht.mkdir("/proc"),Ht.mkdir("/proc/self"),Ht.mkdir("/proc/self/fd"),Ht.mount({mount:function(){var t=Ht.createNode("/proc/self","fd",16895,73);return t.node_ops={lookup:function(t,e){var s=+e,r=Ht.getStream(s);if(!r)throw new Ht.ErrnoError(8);var i={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return r.path}}};return i.parent=i,i}},t}},{},"/proc/self/fd")},createStandardStreams:function(){i.stdin?Ht.createDevice("/dev","stdin",i.stdin):Ht.symlink("/dev/tty","/dev/stdin"),i.stdout?Ht.createDevice("/dev","stdout",null,i.stdout):Ht.symlink("/dev/tty","/dev/stdout"),i.stderr?Ht.createDevice("/dev","stderr",null,i.stderr):Ht.symlink("/dev/tty1","/dev/stderr"),Ht.open("/dev/stdin",0),Ht.open("/dev/stdout",1),Ht.open("/dev/stderr",1)},ensureErrnoError:function(){Ht.ErrnoError||(Ht.ErrnoError=function(t,e){this.node=e,this.setErrno=function(t){this.errno=t},this.setErrno(t),this.message="FS error"},Ht.ErrnoError.prototype=new Error,Ht.ErrnoError.prototype.constructor=Ht.ErrnoError,[44].forEach((function(t){Ht.genericErrors[t]=new Ht.ErrnoError(t),Ht.genericErrors[t].stack="<generic error, no stack>"})))},staticInit:function(){Ht.ensureErrnoError(),Ht.nameTable=new Array(4096),Ht.mount(Ut,{},"/"),Ht.createDefaultDirectories(),Ht.createDefaultDevices(),Ht.createSpecialDirectories(),Ht.filesystems={MEMFS:Ut}},init:function(t,e,s){Ht.init.initialized=!0,Ht.ensureErrnoError(),i.stdin=t||i.stdin,i.stdout=e||i.stdout,i.stderr=s||i.stderr,Ht.createStandardStreams()},quit:function(){Ht.init.initialized=!1;var t=i._fflush;t&&t(0);for(var e=0;e<Ht.streams.length;e++){var s=Ht.streams[e];s&&Ht.close(s)}},getMode:function(t,e){var s=0;return t&&(s|=365),e&&(s|=146),s},findObject:function(t,e){var s=Ht.analyzePath(t,e);return s.exists?s.object:null},analyzePath:function(t,e){try{t=(r=Ht.lookupPath(t,{follow:!e})).path}catch(t){}var s={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var r=Ht.lookupPath(t,{parent:!0});s.parentExists=!0,s.parentPath=r.path,s.parentObject=r.node,s.name=Mt.basename(t),r=Ht.lookupPath(t,{follow:!e}),s.exists=!0,s.path=r.path,s.object=r.node,s.name=r.node.name,s.isRoot="/"===r.path}catch(t){s.error=t.errno}return s},createPath:function(t,e,s,r){t="string"==typeof t?t:Ht.getPath(t);for(var i=e.split("/").reverse();i.length;){var n=i.pop();if(n){var o=Mt.join2(t,n);try{Ht.mkdir(o)}catch(t){}t=o}}return o},createFile:function(t,e,s,r,i){var n=Mt.join2("string"==typeof t?t:Ht.getPath(t),e),o=Ht.getMode(r,i);return Ht.create(n,o)},createDataFile:function(t,e,s,r,i,n){var o=e?Mt.join2("string"==typeof t?t:Ht.getPath(t),e):t,a=Ht.getMode(r,i),h=Ht.create(o,a);if(s){if("string"==typeof s){for(var c=new Array(s.length),l=0,u=s.length;l<u;++l)c[l]=s.charCodeAt(l);s=c}Ht.chmod(h,146|a);var p=Ht.open(h,577);Ht.write(p,s,0,s.length,0,n),Ht.close(p),Ht.chmod(h,a)}return h},createDevice:function(t,e,s,r){var i=Mt.join2("string"==typeof t?t:Ht.getPath(t),e),n=Ht.getMode(!!s,!!r);Ht.createDevice.major||(Ht.createDevice.major=64);var o=Ht.makedev(Ht.createDevice.major++,0);return Ht.registerDevice(o,{open:function(t){t.seekable=!1},close:function(t){r&&r.buffer&&r.buffer.length&&r(10)},read:function(t,e,r,i,n){for(var o=0,a=0;a<i;a++){var h;try{h=s()}catch(t){throw new Ht.ErrnoError(29)}if(void 0===h&&0===o)throw new Ht.ErrnoError(6);if(null==h)break;o++,e[r+a]=h}return o&&(t.node.timestamp=Date.now()),o},write:function(t,e,s,i,n){for(var o=0;o<i;o++)try{r(e[s+o])}catch(t){throw new Ht.ErrnoError(29)}return i&&(t.node.timestamp=Date.now()),o}}),Ht.mkdev(i,n,o)},forceLoadFile:function(t){if(t.isDevice||t.isFolder||t.link||t.contents)return!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!d)throw new Error("Cannot load without read() or XMLHttpRequest.");try{t.contents=Cr(d(t.url),!0),t.usedBytes=t.contents.length}catch(t){throw new Ht.ErrnoError(29)}},createLazyFile:function(t,e,s,r,i){function n(){this.lengthKnown=!1,this.chunks=[]}if(n.prototype.get=function(t){if(!(t>this.length-1||t<0)){var e=t%this.chunkSize,s=t/this.chunkSize|0;return this.getter(s)[e]}},n.prototype.setDataGetter=function(t){this.getter=t},n.prototype.cacheLength=function(){var t=new XMLHttpRequest;if(t.open("HEAD",s,!1),t.send(null),!(t.status>=200&&t.status<300||304===t.status))throw new Error("Couldn't load "+s+". Status: "+t.status);var e,r=Number(t.getResponseHeader("Content-length")),i=(e=t.getResponseHeader("Accept-Ranges"))&&"bytes"===e,n=(e=t.getResponseHeader("Content-Encoding"))&&"gzip"===e,o=1048576;i||(o=r);var a=this;a.setDataGetter((function(t){var e=t*o,i=(t+1)*o-1;if(i=Math.min(i,r-1),void 0===a.chunks[t]&&(a.chunks[t]=function(t,e){if(t>e)throw new Error("invalid range ("+t+", "+e+") or no bytes requested!");if(e>r-1)throw new Error("only "+r+" bytes available! programmer error!");var i=new XMLHttpRequest;if(i.open("GET",s,!1),r!==o&&i.setRequestHeader("Range","bytes="+t+"-"+e),"undefined"!=typeof Uint8Array&&(i.responseType="arraybuffer"),i.overrideMimeType&&i.overrideMimeType("text/plain; charset=x-user-defined"),i.send(null),!(i.status>=200&&i.status<300||304===i.status))throw new Error("Couldn't load "+s+". Status: "+i.status);return void 0!==i.response?new Uint8Array(i.response||[]):Cr(i.responseText||"",!0)}(e,i)),void 0===a.chunks[t])throw new Error("doXHR failed!");return a.chunks[t]})),!n&&r||(o=r=1,r=this.getter(0).length,o=r,v("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=r,this._chunkSize=o,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest){if(!l)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var o=new n;Object.defineProperties(o,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var a={isDevice:!1,contents:o}}else a={isDevice:!1,url:s};var h=Ht.createFile(t,e,a,r,i);a.contents?h.contents=a.contents:a.url&&(h.contents=null,h.url=a.url),Object.defineProperties(h,{usedBytes:{get:function(){return this.contents.length}}});var c={};return Object.keys(h.stream_ops).forEach((function(t){var e=h.stream_ops[t];c[t]=function(){return Ht.forceLoadFile(h),e.apply(null,arguments)}})),c.read=function(t,e,s,r,i){Ht.forceLoadFile(h);var n=t.node.contents;if(i>=n.length)return 0;var o=Math.min(n.length-i,r);if(n.slice)for(var a=0;a<o;a++)e[s+a]=n[i+a];else for(a=0;a<o;a++)e[s+a]=n.get(i+a);return o},h.stream_ops=c,h},createPreloadedFile:function(t,e,s,r,n,o,a,h,c,l){Browser.init();var u=e?Nt.resolve(Mt.join2(t,e)):t;function p(s){function p(s){l&&l(),h||Ht.createDataFile(t,e,s,r,n,c),o&&o(),ft()}var d=!1;i.preloadPlugins.forEach((function(t){d||t.canHandle(u)&&(t.handle(s,u,p,(function(){a&&a(),ft()})),d=!0)})),d||p(s)}mt(),"string"==typeof s?Browser.asyncLoad(s,(function(t){p(t)}),a):p(s)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(t,e,s){e=e||function(){},s=s||function(){};var r=Ht.indexedDB();try{var i=r.open(Ht.DB_NAME(),Ht.DB_VERSION)}catch(t){return s(t)}i.onupgradeneeded=function(){v("creating db"),i.result.createObjectStore(Ht.DB_STORE_NAME)},i.onsuccess=function(){var r=i.result.transaction([Ht.DB_STORE_NAME],"readwrite"),n=r.objectStore(Ht.DB_STORE_NAME),o=0,a=0,h=t.length;function c(){0==a?e():s()}t.forEach((function(t){var e=n.put(Ht.analyzePath(t).object.contents,t);e.onsuccess=function(){++o+a==h&&c()},e.onerror=function(){a++,o+a==h&&c()}})),r.onerror=s},i.onerror=s},loadFilesFromDB:function(t,e,s){e=e||function(){},s=s||function(){};var r=Ht.indexedDB();try{var i=r.open(Ht.DB_NAME(),Ht.DB_VERSION)}catch(t){return s(t)}i.onupgradeneeded=s,i.onsuccess=function(){var r=i.result;try{var n=r.transaction([Ht.DB_STORE_NAME],"readonly")}catch(t){return void s(t)}var o=n.objectStore(Ht.DB_STORE_NAME),a=0,h=0,c=t.length;function l(){0==h?e():s()}t.forEach((function(t){var e=o.get(t);e.onsuccess=function(){Ht.analyzePath(t).exists&&Ht.unlink(t),Ht.createDataFile(Mt.dirname(t),Mt.basename(t),e.result,!0,!0,!0),++a+h==c&&l()},e.onerror=function(){h++,a+h==c&&l()}})),n.onerror=s},i.onerror=s}},Bt={mappings:{},DEFAULT_POLLMASK:5,umask:511,calculateAt:function(t,e){if("/"!==e[0]){var s;if(-100===t)s=Ht.cwd();else{var r=Ht.getStream(t);if(!r)throw new Ht.ErrnoError(8);s=r.path}e=Mt.join2(s,e)}return e},doStat:function(t,e,s){try{var r=t(e)}catch(t){if(t&&t.node&&Mt.normalize(e)!==Mt.normalize(Ht.getPath(t.node)))return-54;throw t}return H[s>>>2]=r.dev,H[s+4>>>2]=0,H[s+8>>>2]=r.ino,H[s+12>>>2]=r.mode,H[s+16>>>2]=r.nlink,H[s+20>>>2]=r.uid,H[s+24>>>2]=r.gid,H[s+28>>>2]=r.rdev,H[s+32>>>2]=0,It=[r.size>>>0,(xt=r.size,+Math.abs(xt)>=1?xt>0?(0|Math.min(+Math.floor(xt/4294967296),4294967295))>>>0:~~+Math.ceil((xt-+(~~xt>>>0))/4294967296)>>>0:0)],H[s+40>>>2]=It[0],H[s+44>>>2]=It[1],H[s+48>>>2]=4096,H[s+52>>>2]=r.blocks,H[s+56>>>2]=r.atime.getTime()/1e3|0,H[s+60>>>2]=0,H[s+64>>>2]=r.mtime.getTime()/1e3|0,H[s+68>>>2]=0,H[s+72>>>2]=r.ctime.getTime()/1e3|0,H[s+76>>>2]=0,It=[r.ino>>>0,(xt=r.ino,+Math.abs(xt)>=1?xt>0?(0|Math.min(+Math.floor(xt/4294967296),4294967295))>>>0:~~+Math.ceil((xt-+(~~xt>>>0))/4294967296)>>>0:0)],H[s+80>>>2]=It[0],H[s+84>>>2]=It[1],0},doMsync:function(t,e,s,r,i){var n=L.slice(t,t+s);Ht.msync(e,n,i,s,r)},doMkdir:function(t,e){return"/"===(t=Mt.normalize(t))[t.length-1]&&(t=t.slice(0,t.length-1)),Ht.mkdir(t,e,0),0},doMknod:function(t,e,s){switch(61440&e){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return Ht.mknod(t,e,s),0},doReadlink:function(t,e,s){if(s<=0)return-28;var r=Ht.readlink(t),i=Math.min(s,M(r)),n=N[e+i>>>0];return F(r,e,s+1),N[e+i>>>0]=n,i},doAccess:function(t,e){if(-8&e)return-28;var s;if(!(s=Ht.lookupPath(t,{follow:!0}).node))return-44;var r="";return 4&e&&(r+="r"),2&e&&(r+="w"),1&e&&(r+="x"),r&&Ht.nodePermissions(s,r)?-2:0},doDup:function(t,e,s){var r=Ht.getStream(s);return r&&Ht.close(r),Ht.open(t,e,0,s,s).fd},doReadv:function(t,e,s,r){for(var i=0,n=0;n<s;n++){var o=H[e+8*n>>>2],a=H[e+(8*n+4)>>>2],h=Ht.read(t,N,o,a,r);if(h<0)return-1;if(i+=h,h<a)break}return i},doWritev:function(t,e,s,r){for(var i=0,n=0;n<s;n++){var o=H[e+8*n>>>2],a=H[e+(8*n+4)>>>2],h=Ht.write(t,N,o,a,r);if(h<0)return-1;i+=h}return i},varargs:void 0,get:function(){return Bt.varargs+=4,H[Bt.varargs-4>>>2]},getStr:function(t){return _(t)},getStreamFromFD:function(t){var e=Ht.getStream(t);if(!e)throw new Ht.ErrnoError(8);return e},get64:function(t,e){return t}};function Gt(t,e,s){Bt.varargs=s;try{var r=Bt.getStreamFromFD(t);switch(e){case 0:return(i=Bt.get())<0?-28:Ht.open(r.path,r.flags,0,i).fd;case 1:case 2:return 0;case 3:return r.flags;case 4:var i=Bt.get();return r.flags|=i,0;case 12:return i=Bt.get(),k[i+0>>>1]=2,0;case 13:case 14:return 0;case 16:case 8:return-28;case 9:return Ft(28),-1;default:return-28}}catch(t){return void 0!==Ht&&t instanceof Ht.ErrnoError||gt(t),-t.errno}}function jt(t,e,s){Bt.varargs=s;try{var r=Bt.getStreamFromFD(t);switch(e){case 21509:case 21505:return r.tty?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return r.tty?0:-59;case 21519:if(!r.tty)return-59;var i=Bt.get();return H[i>>>2]=0,0;case 21520:return r.tty?-28:-59;case 21531:return i=Bt.get(),Ht.ioctl(r,e,i);case 21523:case 21524:return r.tty?0:-59;default:gt("bad ioctl syscall "+e)}}catch(t){return void 0!==Ht&&t instanceof Ht.ErrnoError||gt(t),-t.errno}}function zt(t,e,s){Bt.varargs=s;try{var r=Bt.getStr(t),i=Bt.get();return Ht.open(r,e,i).fd}catch(t){return void 0!==Ht&&t instanceof Ht.ErrnoError||gt(t),-t.errno}}var Vt={};function Wt(t){for(;t.length;){var e=t.pop();t.pop()(e)}}function Yt(t){return this.fromWireType(B[t>>>2])}var Xt={},qt={},Kt={},Jt=48,$t=57;function Zt(t){if(void 0===t)return"_unknown";var e=(t=t.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return e>=Jt&&e<=$t?"_"+t:t}function Qt(t,e){return t=Zt(t),new Function("body","return function "+t+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(e)}function te(t,e){var s=Qt(e,(function(t){this.name=e,this.message=t;var s=new Error(t).stack;void 0!==s&&(this.stack=this.toString()+"\n"+s.replace(/^Error(:[^\n]*)?\n/,""))}));return s.prototype=Object.create(t.prototype),s.prototype.constructor=s,s.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},s}var ee=void 0;function se(t){throw new ee(t)}function re(t,e,s){function r(e){var r=s(e);r.length!==t.length&&se("Mismatched type converter count");for(var i=0;i<t.length;++i)de(t[i],r[i])}t.forEach((function(t){Kt[t]=e}));var i=new Array(e.length),n=[],o=0;e.forEach((function(t,e){qt.hasOwnProperty(t)?i[e]=qt[t]:(n.push(t),Xt.hasOwnProperty(t)||(Xt[t]=[]),Xt[t].push((function(){i[e]=qt[t],++o===n.length&&r(i)})))})),0===n.length&&r(i)}function ie(t){var e=Vt[t];delete Vt[t];var s=e.elements,r=s.length,i=s.map((function(t){return t.getterReturnType})).concat(s.map((function(t){return t.setterArgumentType}))),n=e.rawConstructor,o=e.rawDestructor;re([t],i,(function(t){return s.forEach((function(e,s){var i=t[s],n=e.getter,o=e.getterContext,a=t[s+r],h=e.setter,c=e.setterContext;e.read=function(t){return i.fromWireType(n(o,t))},e.write=function(t,e){var s=[];h(c,t,a.toWireType(s,e)),Wt(s)}})),[{name:e.name,fromWireType:function(t){for(var e=new Array(r),i=0;i<r;++i)e[i]=s[i].read(t);return o(t),e},toWireType:function(t,i){if(r!==i.length)throw new TypeError("Incorrect number of tuple elements for "+e.name+": expected="+r+", actual="+i.length);for(var a=n(),h=0;h<r;++h)s[h].write(a,i[h]);return null!==t&&t.push(o,a),a},argPackAdvance:8,readValueFromPointer:Yt,destructorFunction:o}]}))}var ne={};function oe(t){var e=ne[t];delete ne[t];var s=e.rawConstructor,r=e.rawDestructor,i=e.fields;re([t],i.map((function(t){return t.getterReturnType})).concat(i.map((function(t){return t.setterArgumentType}))),(function(t){var n={};return i.forEach((function(e,s){var r=e.fieldName,o=t[s],a=e.getter,h=e.getterContext,c=t[s+i.length],l=e.setter,u=e.setterContext;n[r]={read:function(t){return o.fromWireType(a(h,t))},write:function(t,e){var s=[];l(u,t,c.toWireType(s,e)),Wt(s)}}})),[{name:e.name,fromWireType:function(t){var e={};for(var s in n)e[s]=n[s].read(t);return r(t),e},toWireType:function(t,e){for(var i in n)if(!(i in e))throw new TypeError('Missing field:  "'+i+'"');var o=s();for(i in n)n[i].write(o,e[i]);return null!==t&&t.push(r,o),o},argPackAdvance:8,readValueFromPointer:Yt,destructorFunction:r}]}))}function ae(t){switch(t){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+t)}}function he(){for(var t=new Array(256),e=0;e<256;++e)t[e]=String.fromCharCode(e);ce=t}var ce=void 0;function le(t){for(var e="",s=t;L[s>>>0];)e+=ce[L[s++>>>0]];return e}var ue=void 0;function pe(t){throw new ue(t)}function de(t,e,s){if(s=s||{},!("argPackAdvance"in e))throw new TypeError("registerType registeredInstance requires argPackAdvance");var r=e.name;if(t||pe('type "'+r+'" must have a positive integer typeid pointer'),qt.hasOwnProperty(t)){if(s.ignoreDuplicateRegistrations)return;pe("Cannot register type '"+r+"' twice")}if(qt[t]=e,delete Kt[t],Xt.hasOwnProperty(t)){var i=Xt[t];delete Xt[t],i.forEach((function(t){t()}))}}function me(t,e,s,r,i){var n=ae(s);de(t,{name:e=le(e),fromWireType:function(t){return!!t},toWireType:function(t,e){return e?r:i},argPackAdvance:8,readValueFromPointer:function(t){var r;if(1===s)r=N;else if(2===s)r=k;else{if(4!==s)throw new TypeError("Unknown boolean type size: "+e);r=H}return this.fromWireType(r[t>>>n])},destructorFunction:null})}function fe(t){if(!(this instanceof De))return!1;if(!(t instanceof De))return!1;for(var e=this.$$.ptrType.registeredClass,s=this.$$.ptr,r=t.$$.ptrType.registeredClass,i=t.$$.ptr;e.baseClass;)s=e.upcast(s),e=e.baseClass;for(;r.baseClass;)i=r.upcast(i),r=r.baseClass;return e===r&&s===i}function ge(t){return{count:t.count,deleteScheduled:t.deleteScheduled,preservePointerOnDelete:t.preservePointerOnDelete,ptr:t.ptr,ptrType:t.ptrType,smartPtr:t.smartPtr,smartPtrType:t.smartPtrType}}function ye(t){pe(t.$$.ptrType.registeredClass.name+" instance already deleted")}var Te=!1;function ve(t){}function be(t){t.smartPtr?t.smartPtrType.rawDestructor(t.smartPtr):t.ptrType.registeredClass.rawDestructor(t.ptr)}function we(t){t.count.value-=1,0===t.count.value&&be(t)}function xe(t){return"undefined"==typeof FinalizationGroup?(xe=function(t){return t},t):(Te=new FinalizationGroup((function(t){for(var e=t.next();!e.done;e=t.next()){var s=e.value;s.ptr?we(s):console.warn("object already deleted: "+s.ptr)}})),ve=function(t){Te.unregister(t.$$)},(xe=function(t){return Te.register(t,t.$$,t.$$),t})(t))}function Ie(){if(this.$$.ptr||ye(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var t=xe(Object.create(Object.getPrototypeOf(this),{$$:{value:ge(this.$$)}}));return t.$$.count.value+=1,t.$$.deleteScheduled=!1,t}function Ee(){this.$$.ptr||ye(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&pe("Object already scheduled for deletion"),ve(this),we(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function Se(){return!this.$$.ptr}var Ae=void 0,Re=[];function Ce(){for(;Re.length;){var t=Re.pop();t.$$.deleteScheduled=!1,t.delete()}}function Oe(){return this.$$.ptr||ye(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&pe("Object already scheduled for deletion"),Re.push(this),1===Re.length&&Ae&&Ae(Ce),this.$$.deleteScheduled=!0,this}function _e(){De.prototype.isAliasOf=fe,De.prototype.clone=Ie,De.prototype.delete=Ee,De.prototype.isDeleted=Se,De.prototype.deleteLater=Oe}function De(){}var Fe={};function Me(t,e,s){if(void 0===t[e].overloadTable){var r=t[e];t[e]=function(){return t[e].overloadTable.hasOwnProperty(arguments.length)||pe("Function '"+s+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+t[e].overloadTable+")!"),t[e].overloadTable[arguments.length].apply(this,arguments)},t[e].overloadTable=[],t[e].overloadTable[r.argCount]=r}}function Pe(t,e,s){i.hasOwnProperty(t)?((void 0===s||void 0!==i[t].overloadTable&&void 0!==i[t].overloadTable[s])&&pe("Cannot register public name '"+t+"' twice"),Me(i,t,t),i.hasOwnProperty(s)&&pe("Cannot register multiple overloads of a function with the same number of arguments ("+s+")!"),i[t].overloadTable[s]=e):(i[t]=e,void 0!==s&&(i[t].numArguments=s))}function Ne(t,e,s,r,i,n,o,a){this.name=t,this.constructor=e,this.instancePrototype=s,this.rawDestructor=r,this.baseClass=i,this.getActualType=n,this.upcast=o,this.downcast=a,this.pureVirtualFunctions=[]}function Le(t,e,s){for(;e!==s;)e.upcast||pe("Expected null or instance of "+s.name+", got an instance of "+e.name),t=e.upcast(t),e=e.baseClass;return t}function ke(t,e){if(null===e)return this.isReference&&pe("null is not a valid "+this.name),0;e.$$||pe('Cannot pass "'+ws(e)+'" as a '+this.name),e.$$.ptr||pe("Cannot pass deleted object as a pointer of type "+this.name);var s=e.$$.ptrType.registeredClass;return Le(e.$$.ptr,s,this.registeredClass)}function Ue(t,e){var s;if(null===e)return this.isReference&&pe("null is not a valid "+this.name),this.isSmartPointer?(s=this.rawConstructor(),null!==t&&t.push(this.rawDestructor,s),s):0;e.$$||pe('Cannot pass "'+ws(e)+'" as a '+this.name),e.$$.ptr||pe("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&e.$$.ptrType.isConst&&pe("Cannot convert argument of type "+(e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name)+" to parameter type "+this.name);var r=e.$$.ptrType.registeredClass;if(s=Le(e.$$.ptr,r,this.registeredClass),this.isSmartPointer)switch(void 0===e.$$.smartPtr&&pe("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:e.$$.smartPtrType===this?s=e.$$.smartPtr:pe("Cannot convert argument of type "+(e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:s=e.$$.smartPtr;break;case 2:if(e.$$.smartPtrType===this)s=e.$$.smartPtr;else{var i=e.clone();s=this.rawShare(s,vs((function(){i.delete()}))),null!==t&&t.push(this.rawDestructor,s)}break;default:pe("Unsupporting sharing policy")}return s}function He(t,e){if(null===e)return this.isReference&&pe("null is not a valid "+this.name),0;e.$$||pe('Cannot pass "'+ws(e)+'" as a '+this.name),e.$$.ptr||pe("Cannot pass deleted object as a pointer of type "+this.name),e.$$.ptrType.isConst&&pe("Cannot convert argument of type "+e.$$.ptrType.name+" to parameter type "+this.name);var s=e.$$.ptrType.registeredClass;return Le(e.$$.ptr,s,this.registeredClass)}function Be(t){return this.rawGetPointee&&(t=this.rawGetPointee(t)),t}function Ge(t){this.rawDestructor&&this.rawDestructor(t)}function je(t){null!==t&&t.delete()}function ze(t,e,s){if(e===s)return t;if(void 0===s.baseClass)return null;var r=ze(t,e,s.baseClass);return null===r?null:s.downcast(r)}function Ve(){return Object.keys(qe).length}function We(){var t=[];for(var e in qe)qe.hasOwnProperty(e)&&t.push(qe[e]);return t}function Ye(t){Ae=t,Re.length&&Ae&&Ae(Ce)}function Xe(){i.getInheritedInstanceCount=Ve,i.getLiveInheritedInstances=We,i.flushPendingDeletes=Ce,i.setDelayFunction=Ye}var qe={};function Ke(t,e){for(void 0===e&&pe("ptr should not be undefined");t.baseClass;)e=t.upcast(e),t=t.baseClass;return e}function Je(t,e){return e=Ke(t,e),qe[e]}function $e(t,e){return e.ptrType&&e.ptr||se("makeClassHandle requires ptr and ptrType"),!!e.smartPtrType!=!!e.smartPtr&&se("Both smartPtrType and smartPtr must be specified"),e.count={value:1},xe(Object.create(t,{$$:{value:e}}))}function Ze(t){var e=this.getPointee(t);if(!e)return this.destructor(t),null;var s=Je(this.registeredClass,e);if(void 0!==s){if(0===s.$$.count.value)return s.$$.ptr=e,s.$$.smartPtr=t,s.clone();var r=s.clone();return this.destructor(t),r}function i(){return this.isSmartPointer?$e(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:e,smartPtrType:this,smartPtr:t}):$e(this.registeredClass.instancePrototype,{ptrType:this,ptr:t})}var n,o=this.registeredClass.getActualType(e),a=Fe[o];if(!a)return i.call(this);n=this.isConst?a.constPointerType:a.pointerType;var h=ze(e,this.registeredClass,n.registeredClass);return null===h?i.call(this):this.isSmartPointer?$e(n.registeredClass.instancePrototype,{ptrType:n,ptr:h,smartPtrType:this,smartPtr:t}):$e(n.registeredClass.instancePrototype,{ptrType:n,ptr:h})}function Qe(){ts.prototype.getPointee=Be,ts.prototype.destructor=Ge,ts.prototype.argPackAdvance=8,ts.prototype.readValueFromPointer=Yt,ts.prototype.deleteObject=je,ts.prototype.fromWireType=Ze}function ts(t,e,s,r,i,n,o,a,h,c,l){this.name=t,this.registeredClass=e,this.isReference=s,this.isConst=r,this.isSmartPointer=i,this.pointeeType=n,this.sharingPolicy=o,this.rawGetPointee=a,this.rawConstructor=h,this.rawShare=c,this.rawDestructor=l,i||void 0!==e.baseClass?this.toWireType=Ue:r?(this.toWireType=ke,this.destructorFunction=null):(this.toWireType=He,this.destructorFunction=null)}function es(t,e,s){i.hasOwnProperty(t)||se("Replacing nonexistant public symbol"),void 0!==i[t].overloadTable&&void 0!==s?i[t].overloadTable[s]=e:(i[t]=e,i[t].argCount=s)}function ss(t,e){R(t.indexOf("j")>=0,"getDynCaller should only be called with i64 sigs");var s=[];return function(){s.length=arguments.length;for(var r=0;r<arguments.length;r++)s[r]=arguments[r];return _t(t,e,s)}}function rs(t,e){var s=-1!=(t=le(t)).indexOf("j")?ss(t,e):tt.get(e);return"function"!=typeof s&&pe("unknown function pointer with signature "+t+": "+e),s}var is=void 0;function ns(t){var e=Mr(t),s=le(e);return Nr(e),s}function os(t,e){var s=[],r={};throw e.forEach((function t(e){r[e]||qt[e]||(Kt[e]?Kt[e].forEach(t):(s.push(e),r[e]=!0))})),new is(t+": "+s.map(ns).join([", "]))}function as(t,e,s,r,i,n,o,a,h,c,l,u,p){l=le(l),n=rs(i,n),a&&(a=rs(o,a)),c&&(c=rs(h,c)),p=rs(u,p);var d=Zt(l);Pe(d,(function(){os("Cannot construct "+l+" due to unbound types",[r])})),re([t,e,s],r?[r]:[],(function(e){var s,i;e=e[0],i=r?(s=e.registeredClass).instancePrototype:De.prototype;var o=Qt(d,(function(){if(Object.getPrototypeOf(this)!==h)throw new ue("Use 'new' to construct "+l);if(void 0===u.constructor_body)throw new ue(l+" has no accessible constructor");var t=u.constructor_body[arguments.length];if(void 0===t)throw new ue("Tried to invoke ctor of "+l+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(u.constructor_body).toString()+") parameters instead!");return t.apply(this,arguments)})),h=Object.create(i,{constructor:{value:o}});o.prototype=h;var u=new Ne(l,o,h,p,s,n,a,c),m=new ts(l,u,!0,!1,!1),f=new ts(l+"*",u,!1,!1,!1),g=new ts(l+" const*",u,!1,!0,!1);return Fe[t]={pointerType:f,constPointerType:g},es(d,o),[m,f,g]}))}function hs(t,e){for(var s=[],r=0;r<t;r++)s.push(H[(e>>2)+r>>>0]);return s}function cs(t,e,s,r,i,n){R(e>0);var o=hs(e,s);i=rs(r,i);var a=[n],h=[];re([],[t],(function(t){var s="constructor "+(t=t[0]).name;if(void 0===t.registeredClass.constructor_body&&(t.registeredClass.constructor_body=[]),void 0!==t.registeredClass.constructor_body[e-1])throw new ue("Cannot register multiple constructors with identical number of parameters ("+(e-1)+") for class '"+t.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return t.registeredClass.constructor_body[e-1]=function(){os("Cannot construct "+t.name+" due to unbound types",o)},re([],o,(function(r){return t.registeredClass.constructor_body[e-1]=function(){arguments.length!==e-1&&pe(s+" called with "+arguments.length+" arguments, expected "+(e-1)),h.length=0,a.length=e;for(var t=1;t<e;++t)a[t]=r[t].toWireType(h,arguments[t-1]);var n=i.apply(null,a);return Wt(h),r[0].fromWireType(n)},[]})),[]}))}function ls(t,e){if(!(t instanceof Function))throw new TypeError("new_ called with constructor type "+typeof t+" which is not a function");var s=Qt(t.name||"unknownFunctionName",(function(){}));s.prototype=t.prototype;var r=new s,i=t.apply(r,e);return i instanceof Object?i:r}function us(t,e,s,r,i){var n=e.length;n<2&&pe("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var o=null!==e[1]&&null!==s,a=!1,h=1;h<e.length;++h)if(null!==e[h]&&void 0===e[h].destructorFunction){a=!0;break}var c="void"!==e[0].name,l="",u="";for(h=0;h<n-2;++h)l+=(0!==h?", ":"")+"arg"+h,u+=(0!==h?", ":"")+"arg"+h+"Wired";var p="return function "+Zt(t)+"("+l+") {\nif (arguments.length !== "+(n-2)+") {\nthrowBindingError('function "+t+" called with ' + arguments.length + ' arguments, expected "+(n-2)+" args!');\n}\n";a&&(p+="var destructors = [];\n");var d=a?"destructors":"null",m=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],f=[pe,r,i,Wt,e[0],e[1]];for(o&&(p+="var thisWired = classParam.toWireType("+d+", this);\n"),h=0;h<n-2;++h)p+="var arg"+h+"Wired = argType"+h+".toWireType("+d+", arg"+h+"); // "+e[h+2].name+"\n",m.push("argType"+h),f.push(e[h+2]);if(o&&(u="thisWired"+(u.length>0?", ":"")+u),p+=(c?"var rv = ":"")+"invoker(fn"+(u.length>0?", ":"")+u+");\n",a)p+="runDestructors(destructors);\n";else for(h=o?1:2;h<e.length;++h){var g=1===h?"thisWired":"arg"+(h-2)+"Wired";null!==e[h].destructorFunction&&(p+=g+"_dtor("+g+"); // "+e[h].name+"\n",m.push(g+"_dtor"),f.push(e[h].destructorFunction))}return c&&(p+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),p+="}\n",m.push(p),ls(Function,m).apply(null,f)}function ps(t,e,s,r,i,n,o,a){var h=hs(s,r);e=le(e),n=rs(i,n),re([],[t],(function(t){var r=(t=t[0]).name+"."+e;function i(){os("Cannot call "+r+" due to unbound types",h)}a&&t.registeredClass.pureVirtualFunctions.push(e);var c=t.registeredClass.instancePrototype,l=c[e];return void 0===l||void 0===l.overloadTable&&l.className!==t.name&&l.argCount===s-2?(i.argCount=s-2,i.className=t.name,c[e]=i):(Me(c,e,r),c[e].overloadTable[s-2]=i),re([],h,(function(i){var a=us(r,i,t,n,o);return void 0===c[e].overloadTable?(a.argCount=s-2,c[e]=a):c[e].overloadTable[s-2]=a,[]})),[]}))}var ds=[],ms=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function fs(t){t>4&&0==--ms[t].refcount&&(ms[t]=void 0,ds.push(t))}function gs(){for(var t=0,e=5;e<ms.length;++e)void 0!==ms[e]&&++t;return t}function ys(){for(var t=5;t<ms.length;++t)if(void 0!==ms[t])return ms[t];return null}function Ts(){i.count_emval_handles=gs,i.get_first_emval=ys}function vs(t){switch(t){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var e=ds.length?ds.pop():ms.length;return ms[e]={refcount:1,value:t},e}}function bs(t,e){de(t,{name:e=le(e),fromWireType:function(t){var e=ms[t].value;return fs(t),e},toWireType:function(t,e){return vs(e)},argPackAdvance:8,readValueFromPointer:Yt,destructorFunction:null})}function ws(t){if(null===t)return"null";var e=typeof t;return"object"===e||"array"===e||"function"===e?t.toString():""+t}function xs(t,e){switch(e){case 2:return function(t){return this.fromWireType(G[t>>>2])};case 3:return function(t){return this.fromWireType(j[t>>>3])};default:throw new TypeError("Unknown float type: "+t)}}function Is(t,e,s){var r=ae(s);de(t,{name:e=le(e),fromWireType:function(t){return t},toWireType:function(t,e){if("number"!=typeof e&&"boolean"!=typeof e)throw new TypeError('Cannot convert "'+ws(e)+'" to '+this.name);return e},argPackAdvance:8,readValueFromPointer:xs(e,r),destructorFunction:null})}function Es(t,e,s,r,i,n){var o=hs(e,s);t=le(t),i=rs(r,i),Pe(t,(function(){os("Cannot call "+t+" due to unbound types",o)}),e-1),re([],o,(function(s){var r=[s[0],null].concat(s.slice(1));return es(t,us(t,r,null,i,n),e-1),[]}))}function Ss(t,e,s){switch(e){case 0:return s?function(t){return N[t>>>0]}:function(t){return L[t>>>0]};case 1:return s?function(t){return k[t>>>1]}:function(t){return U[t>>>1]};case 2:return s?function(t){return H[t>>>2]}:function(t){return B[t>>>2]};default:throw new TypeError("Unknown integer type: "+t)}}function As(t,e,s,r,i){e=le(e),-1===i&&(i=4294967295);var n=ae(s),o=function(t){return t};if(0===r){var a=32-8*s;o=function(t){return t<<a>>>a}}var h=-1!=e.indexOf("unsigned");de(t,{name:e,fromWireType:o,toWireType:function(t,s){if("number"!=typeof s&&"boolean"!=typeof s)throw new TypeError('Cannot convert "'+ws(s)+'" to '+this.name);if(s<r||s>i)throw new TypeError('Passing a number "'+ws(s)+'" from JS side to C/C++ side to an argument of type "'+e+'", which is outside the valid range ['+r+", "+i+"]!");return h?s>>>0:0|s},argPackAdvance:8,readValueFromPointer:Ss(e,n,0!==r),destructorFunction:null})}function Rs(t,e,s){var r=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][e];function i(t){var e=B,s=e[(t>>=2)>>>0],i=e[t+1>>>0];return new r(P,i,s)}de(t,{name:s=le(s),fromWireType:i,argPackAdvance:8,readValueFromPointer:i},{ignoreDuplicateRegistrations:!0})}function Cs(t,e){var s="std::string"===(e=le(e));de(t,{name:e,fromWireType:function(t){var e,r=B[t>>>2];if(s)for(var i=t+4,n=0;n<=r;++n){var o=t+4+n;if(n==r||0==L[o>>>0]){var a=_(i,o-i);void 0===e?e=a:(e+=String.fromCharCode(0),e+=a),i=o+1}}else{var h=new Array(r);for(n=0;n<r;++n)h[n]=String.fromCharCode(L[t+4+n>>>0]);e=h.join("")}return Nr(t),e},toWireType:function(t,e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));var r="string"==typeof e;r||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int8Array||pe("Cannot pass non-string to std::string");var i=(s&&r?function(){return M(e)}:function(){return e.length})(),n=Fr(4+i+1);if(B[(n>>>=0)>>>2]=i,s&&r)F(e,n+4,i+1);else if(r)for(var o=0;o<i;++o){var a=e.charCodeAt(o);a>255&&(Nr(n),pe("String has UTF-16 code units that do not fit in 8 bits")),L[n+4+o>>>0]=a}else for(o=0;o<i;++o)L[n+4+o>>>0]=e[o];return null!==t&&t.push(Nr,n),n},argPackAdvance:8,readValueFromPointer:Yt,destructorFunction:function(t){Nr(t)}})}function Os(t,e,s){var r,i,n,o,a;s=le(s),2===e?(r=V,i=W,o=Y,n=function(){return U},a=1):4===e&&(r=X,i=q,o=K,n=function(){return B},a=2),de(t,{name:s,fromWireType:function(t){for(var s,i=B[t>>>2],o=n(),h=t+4,c=0;c<=i;++c){var l=t+4+c*e;if(c==i||0==o[l>>>a]){var u=r(h,l-h);void 0===s?s=u:(s+=String.fromCharCode(0),s+=u),h=l+e}}return Nr(t),s},toWireType:function(t,r){"string"!=typeof r&&pe("Cannot pass non-string to C++ string type "+s);var n=o(r),h=Fr(4+n+e);return B[(h>>>=0)>>>2]=n>>a,i(r,h+4,n+e),null!==t&&t.push(Nr,h),h},argPackAdvance:8,readValueFromPointer:Yt,destructorFunction:function(t){Nr(t)}})}function _s(t,e,s,r,i,n){Vt[t]={name:le(e),rawConstructor:rs(s,r),rawDestructor:rs(i,n),elements:[]}}function Ds(t,e,s,r,i,n,o,a,h){Vt[t].elements.push({getterReturnType:e,getter:rs(s,r),getterContext:i,setterArgumentType:n,setter:rs(o,a),setterContext:h})}function Fs(t,e,s,r,i,n){ne[t]={name:le(e),rawConstructor:rs(s,r),rawDestructor:rs(i,n),fields:[]}}function Ms(t,e,s,r,i,n,o,a,h,c){ne[t].fields.push({fieldName:le(e),getterReturnType:s,getter:rs(r,i),getterContext:n,setterArgumentType:o,setter:rs(a,h),setterContext:c})}function Ps(t,e){de(t,{isVoid:!0,name:e=le(e),argPackAdvance:0,fromWireType:function(){},toWireType:function(t,e){}})}function Ns(t){return t||pe("Cannot use deleted val. handle = "+t),ms[t].value}function Ls(t,e){var s=qt[t];return void 0===s&&pe(e+" has unknown type "+ns(t)),s}function ks(t,e,s){t=Ns(t),e=Ls(e,"emval::as");var r=[],i=vs(r);return H[s>>>2]=i,e.toWireType(r,t)}function Us(t,e){for(var s=new Array(t),r=0;r<t;++r)s[r]=Ls(H[(e>>2)+r>>>0],"parameter "+r);return s}function Hs(t,e,s,r){t=Ns(t);for(var i=Us(e,s),n=new Array(e),o=0;o<e;++o){var a=i[o];n[o]=a.readValueFromPointer(r),r+=a.argPackAdvance}return vs(t.apply(void 0,n))}var Bs,Gs={};function js(t){var e=Gs[t];return void 0===e?le(t):e}function zs(){return"object"==typeof globalThis?globalThis:Function("return this")()}function Vs(t){return 0===t?vs(zs()):(t=js(t),vs(zs()[t]))}function Ws(t,e){return vs((t=Ns(t))[e=Ns(e)])}function Ys(t){t>4&&(ms[t].refcount+=1)}function Xs(t,e){return(t=Ns(t))instanceof(e=Ns(e))}function qs(t){return"number"==typeof(t=Ns(t))}function Ks(){return vs([])}function Js(t){return vs(js(t))}function $s(){return vs({})}function Zs(t){Wt(ms[t].value),fs(t)}function Qs(t,e,s){t=Ns(t),e=Ns(e),s=Ns(s),t[e]=s}function tr(t,e){return vs((t=Ls(t,"_emval_take_value")).readValueFromPointer(e))}function er(){gt()}Bs=u?function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:"undefined"!=typeof dateNow?dateNow:function(){return performance.now()};var sr=!0;function rr(t,e){var s;if(0===t)s=Date.now();else{if(1!==t&&4!==t||!sr)return Ft(28),-1;s=Bs()}return H[e>>>2]=s/1e3|0,H[e+4>>>2]=s%1e3*1e3*1e3|0,0}function ir(t,e,s){L.copyWithin(t>>>0,e>>>0,e+s>>>0)}function nr(){return L.length}function or(t){try{return I.grow(t-P.byteLength+65535>>>16),Q(I.buffer),1}catch(t){}}function ar(t){t>>>=0;var e=nr(),s=4294967296;if(t>s)return!1;for(var r=1;r<=4;r*=2){var i=e*(1+.2/r);if(i=Math.min(i,t+100663296),or(Math.min(s,Z(Math.max(16777216,t,i),65536))))return!0}return!1}var hr={};function cr(){return a||"./this.program"}function lr(){if(!lr.strings){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:cr()};for(var e in hr)t[e]=hr[e];var s=[];for(var e in t)s.push(e+"="+t[e]);lr.strings=s}return lr.strings}function ur(t,e){try{var s=0;return lr().forEach((function(r,i){var n=e+s;H[t+4*i>>>2]=n,$(r,n),s+=r.length+1})),0}catch(t){return void 0!==Ht&&t instanceof Ht.ErrnoError||gt(t),t.errno}}function pr(t,e){try{var s=lr();H[t>>>2]=s.length;var r=0;return s.forEach((function(t){r+=t.length+1})),H[e>>>2]=r,0}catch(t){return void 0!==Ht&&t instanceof Ht.ErrnoError||gt(t),t.errno}}function dr(t){try{var e=Bt.getStreamFromFD(t);return Ht.close(e),0}catch(t){return void 0!==Ht&&t instanceof Ht.ErrnoError||gt(t),t.errno}}function mr(t,e,s,r){try{var i=Bt.getStreamFromFD(t),n=Bt.doReadv(i,e,s);return H[r>>>2]=n,0}catch(t){return void 0!==Ht&&t instanceof Ht.ErrnoError||gt(t),t.errno}}function fr(t,e,s,r,i){try{var n=Bt.getStreamFromFD(t),o=4294967296*s+(e>>>0),a=9007199254740992;return o<=-a||o>=a?-61:(Ht.llseek(n,o,r),It=[n.position>>>0,(xt=n.position,+Math.abs(xt)>=1?xt>0?(0|Math.min(+Math.floor(xt/4294967296),4294967295))>>>0:~~+Math.ceil((xt-+(~~xt>>>0))/4294967296)>>>0:0)],H[i>>>2]=It[0],H[i+4>>>2]=It[1],n.getdents&&0===o&&0===r&&(n.getdents=null),0)}catch(t){return void 0!==Ht&&t instanceof Ht.ErrnoError||gt(t),t.errno}}function gr(t,e,s,r){try{var i=Bt.getStreamFromFD(t),n=Bt.doWritev(i,e,s);return H[r>>>2]=n,0}catch(t){return void 0!==Ht&&t instanceof Ht.ErrnoError||gt(t),t.errno}}function yr(t){}function Tr(t){return t%4==0&&(t%100!=0||t%400==0)}function vr(t,e){for(var s=0,r=0;r<=e;s+=t[r++]);return s}var br=[31,29,31,30,31,30,31,31,30,31,30,31],wr=[31,28,31,30,31,30,31,31,30,31,30,31];function xr(t,e){for(var s=new Date(t.getTime());e>0;){var r=Tr(s.getFullYear()),i=s.getMonth(),n=(r?br:wr)[i];if(!(e>n-s.getDate()))return s.setDate(s.getDate()+e),s;e-=n-s.getDate()+1,s.setDate(1),i<11?s.setMonth(i+1):(s.setMonth(0),s.setFullYear(s.getFullYear()+1))}return s}function Ir(t,e,s,r){var i=H[r+40>>>2],n={tm_sec:H[r>>>2],tm_min:H[r+4>>>2],tm_hour:H[r+8>>>2],tm_mday:H[r+12>>>2],tm_mon:H[r+16>>>2],tm_year:H[r+20>>>2],tm_wday:H[r+24>>>2],tm_yday:H[r+28>>>2],tm_isdst:H[r+32>>>2],tm_gmtoff:H[r+36>>>2],tm_zone:i?_(i):""},o=_(s),a={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var h in a)o=o.replace(new RegExp(h,"g"),a[h]);var c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l=["January","February","March","April","May","June","July","August","September","October","November","December"];function u(t,e,s){for(var r="number"==typeof t?t.toString():t||"";r.length<e;)r=s[0]+r;return r}function p(t,e){return u(t,e,"0")}function d(t,e){function s(t){return t<0?-1:t>0?1:0}var r;return 0===(r=s(t.getFullYear()-e.getFullYear()))&&0===(r=s(t.getMonth()-e.getMonth()))&&(r=s(t.getDate()-e.getDate())),r}function m(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function f(t){var e=xr(new Date(t.tm_year+1900,0,1),t.tm_yday),s=new Date(e.getFullYear(),0,4),r=new Date(e.getFullYear()+1,0,4),i=m(s),n=m(r);return d(i,e)<=0?d(n,e)<=0?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}var g={"%a":function(t){return c[t.tm_wday].substring(0,3)},"%A":function(t){return c[t.tm_wday]},"%b":function(t){return l[t.tm_mon].substring(0,3)},"%B":function(t){return l[t.tm_mon]},"%C":function(t){return p((t.tm_year+1900)/100|0,2)},"%d":function(t){return p(t.tm_mday,2)},"%e":function(t){return u(t.tm_mday,2," ")},"%g":function(t){return f(t).toString().substring(2)},"%G":function(t){return f(t)},"%H":function(t){return p(t.tm_hour,2)},"%I":function(t){var e=t.tm_hour;return 0==e?e=12:e>12&&(e-=12),p(e,2)},"%j":function(t){return p(t.tm_mday+vr(Tr(t.tm_year+1900)?br:wr,t.tm_mon-1),3)},"%m":function(t){return p(t.tm_mon+1,2)},"%M":function(t){return p(t.tm_min,2)},"%n":function(){return"\n"},"%p":function(t){return t.tm_hour>=0&&t.tm_hour<12?"AM":"PM"},"%S":function(t){return p(t.tm_sec,2)},"%t":function(){return"\t"},"%u":function(t){return t.tm_wday||7},"%U":function(t){var e=new Date(t.tm_year+1900,0,1),s=0===e.getDay()?e:xr(e,7-e.getDay()),r=new Date(t.tm_year+1900,t.tm_mon,t.tm_mday);if(d(s,r)<0){var i=vr(Tr(r.getFullYear())?br:wr,r.getMonth()-1)-31,n=31-s.getDate()+i+r.getDate();return p(Math.ceil(n/7),2)}return 0===d(s,e)?"01":"00"},"%V":function(t){var e,s=new Date(t.tm_year+1900,0,4),r=new Date(t.tm_year+1901,0,4),i=m(s),n=m(r),o=xr(new Date(t.tm_year+1900,0,1),t.tm_yday);return d(o,i)<0?"53":d(n,o)<=0?"01":(e=i.getFullYear()<t.tm_year+1900?t.tm_yday+32-i.getDate():t.tm_yday+1-i.getDate(),p(Math.ceil(e/7),2))},"%w":function(t){return t.tm_wday},"%W":function(t){var e=new Date(t.tm_year,0,1),s=1===e.getDay()?e:xr(e,0===e.getDay()?1:7-e.getDay()+1),r=new Date(t.tm_year+1900,t.tm_mon,t.tm_mday);if(d(s,r)<0){var i=vr(Tr(r.getFullYear())?br:wr,r.getMonth()-1)-31,n=31-s.getDate()+i+r.getDate();return p(Math.ceil(n/7),2)}return 0===d(s,e)?"01":"00"},"%y":function(t){return(t.tm_year+1900).toString().substring(2)},"%Y":function(t){return t.tm_year+1900},"%z":function(t){var e=t.tm_gmtoff,s=e>=0;return e=(e=Math.abs(e)/60)/60*100+e%60,(s?"+":"-")+String("0000"+e).slice(-4)},"%Z":function(t){return t.tm_zone},"%%":function(){return"%"}};for(var h in g)o.indexOf(h)>=0&&(o=o.replace(new RegExp(h,"g"),g[h](n)));var y=Cr(o,!1);return y.length>e?0:(J(y,t),y.length-1)}function Er(t,e,s,r){return Ir(t,e,s,r)}var Sr=function(t,e,s,r){t||(t=this),this.parent=t,this.mount=t.mount,this.mounted=null,this.id=Ht.nextInode++,this.name=e,this.mode=s,this.node_ops={},this.stream_ops={},this.rdev=r},Ar=365,Rr=146;function Cr(t,e,s){var r=s>0?s:M(t)+1,i=new Array(r),n=D(t,i,0,i.length);return e&&(i.length=n),i}Object.defineProperties(Sr.prototype,{read:{get:function(){return(this.mode&Ar)===Ar},set:function(t){t?this.mode|=Ar:this.mode&=~Ar}},write:{get:function(){return(this.mode&Rr)===Rr},set:function(t){t?this.mode|=Rr:this.mode&=~Rr}},isFolder:{get:function(){return Ht.isDir(this.mode)}},isDevice:{get:function(){return Ht.isChrdev(this.mode)}}}),Ht.FSNode=Sr,Ht.staticInit(),i.FS_createPath=Ht.createPath,i.FS_createDataFile=Ht.createDataFile,i.FS_createPreloadedFile=Ht.createPreloadedFile,i.FS_createLazyFile=Ht.createLazyFile,i.FS_createDevice=Ht.createDevice,i.FS_unlink=Ht.unlink,ee=i.InternalError=te(Error,"InternalError"),he(),ue=i.BindingError=te(Error,"BindingError"),_e(),Qe(),Xe(),is=i.UnboundTypeError=te(Error,"UnboundTypeError"),Ts(),rt.push({func:function(){Dr()}});var Or,_r={x:Dt,A:Gt,P:jt,Q:zt,U:ie,s:oe,S:me,v:as,u:cs,d:ps,R:bs,C:Is,h:Es,m:As,k:Rs,D:Cs,w:Os,V:_s,g:Ds,t:Fs,j:Ms,T:Ps,q:ks,W:Hs,b:fs,F:Vs,n:Ws,l:Ys,N:Xs,E:qs,y:Ks,f:Js,r:$s,p:Zs,i:Qs,e:tr,c:er,M:rr,I:ir,o:ar,K:ur,L:pr,B:dr,O:mr,G:fr,z:gr,a:I,H:yr,J:Er},Dr=(Rt(),i.___wasm_call_ctors=function(){return(Dr=i.___wasm_call_ctors=i.asm.Y).apply(null,arguments)}),Fr=(i._main=function(){return(i._main=i.asm.Z).apply(null,arguments)},i._malloc=function(){return(Fr=i._malloc=i.asm._).apply(null,arguments)}),Mr=i.___getTypeName=function(){return(Mr=i.___getTypeName=i.asm.$).apply(null,arguments)},Pr=(i.___embind_register_native_and_builtin_types=function(){return(i.___embind_register_native_and_builtin_types=i.asm.aa).apply(null,arguments)},i.___errno_location=function(){return(Pr=i.___errno_location=i.asm.ba).apply(null,arguments)}),Nr=i._free=function(){return(Nr=i._free=i.asm.ca).apply(null,arguments)};function Lr(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function kr(t){var e=i._main;try{Hr(e(0,0),!0)}catch(t){if(t instanceof Lr)return;if("unwind"==t)return void(x=!0);var s=t;t&&"object"==typeof t&&t.stack&&(s=[t,t.stack]),b("exception thrown: "+s),h(1,t)}}function Ur(t){function s(){Or||(Or=!0,i.calledRun=!0,A||(at(),ht(),e(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),Br&&kr(),ct()))}pt>0||(ot(),pt>0||(i.setStatus?(i.setStatus("Running..."),setTimeout((function(){setTimeout((function(){i.setStatus("")}),1),s()}),1)):s()))}function Hr(t,e){e&&x&&0===t||(x||(i.onExit&&i.onExit(t),A=!0),h(t,new Lr(t)))}if(i.dynCall_jiji=function(){return(i.dynCall_jiji=i.asm.da).apply(null,arguments)},i.dynCall_viijii=function(){return(i.dynCall_viijii=i.asm.ea).apply(null,arguments)},i.dynCall_iiiiiijj=function(){return(i.dynCall_iiiiiijj=i.asm.fa).apply(null,arguments)},i.dynCall_iiiiij=function(){return(i.dynCall_iiiiij=i.asm.ga).apply(null,arguments)},i.dynCall_iiiiijj=function(){return(i.dynCall_iiiiijj=i.asm.ha).apply(null,arguments)},i.addRunDependency=mt,i.removeRunDependency=ft,i.FS_createPath=Ht.createPath,i.FS_createDataFile=Ht.createDataFile,i.FS_createPreloadedFile=Ht.createPreloadedFile,i.FS_createLazyFile=Ht.createLazyFile,i.FS_createDevice=Ht.createDevice,i.FS_unlink=Ht.unlink,i.FS=Ht,dt=function t(){Or||Ur(),Or||(dt=t)},i.run=Ur,i.preInit)for("function"==typeof i.preInit&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();var Br=!0;return i.noInitialRun&&(Br=!1),x=!0,Ur(),t.ready});"object"==typeof t&&"object"==typeof e?e.exports=r:"function"==typeof define&&define.amd?define([],(function(){return r})):"object"==typeof t&&(t.WebIFCWasm=r)}}),Sg=103090709,Ag=160246688,Rg=2655215786,Cg=3242617779,Og=4186316022,_g=781010003,Dg={3821786052:t=>Fg.FromTape(t.ID,t.type,t.arguments),2296667514:t=>Mg.FromTape(t.ID,t.type,t.arguments),3630933823:t=>Pg.FromTape(t.ID,t.type,t.arguments),4288193352:t=>Ng.FromTape(t.ID,t.type,t.arguments),2874132201:t=>Lg.FromTape(t.ID,t.type,t.arguments),618182010:t=>kg.FromTape(t.ID,t.type,t.arguments),1635779807:t=>Ug.FromTape(t.ID,t.type,t.arguments),2603310189:t=>Hg.FromTape(t.ID,t.type,t.arguments),3406155212:t=>Bg.FromTape(t.ID,t.type,t.arguments),1634111441:t=>Gg.FromTape(t.ID,t.type,t.arguments),177149247:t=>jg.FromTape(t.ID,t.type,t.arguments),1411407467:t=>zg.FromTape(t.ID,t.type,t.arguments),3352864051:t=>Vg.FromTape(t.ID,t.type,t.arguments),2056796094:t=>Wg.FromTape(t.ID,t.type,t.arguments),1871374353:t=>Yg.FromTape(t.ID,t.type,t.arguments),3087945054:t=>Xg.FromTape(t.ID,t.type,t.arguments),3001207471:t=>qg.FromTape(t.ID,t.type,t.arguments),325726236:t=>Kg.FromTape(t.ID,t.type,t.arguments),749761778:t=>Jg.FromTape(t.ID,t.type,t.arguments),3199563722:t=>$g.FromTape(t.ID,t.type,t.arguments),2483840362:t=>Zg.FromTape(t.ID,t.type,t.arguments),3379348081:t=>Qg.FromTape(t.ID,t.type,t.arguments),3239324667:t=>ty.FromTape(t.ID,t.type,t.arguments),4263986512:t=>ey.FromTape(t.ID,t.type,t.arguments),53199957:t=>sy.FromTape(t.ID,t.type,t.arguments),2029264950:t=>ry.FromTape(t.ID,t.type,t.arguments),3512275521:t=>iy.FromTape(t.ID,t.type,t.arguments),1674181508:t=>ny.FromTape(t.ID,t.type,t.arguments),669184980:t=>oy.FromTape(t.ID,t.type,t.arguments),639542469:t=>ay.FromTape(t.ID,t.type,t.arguments),411424972:t=>hy.FromTape(t.ID,t.type,t.arguments),130549933:t=>cy.FromTape(t.ID,t.type,t.arguments),3869604511:t=>ly.FromTape(t.ID,t.type,t.arguments),3798115385:t=>uy.FromTape(t.ID,t.type,t.arguments),1310608509:t=>py.FromTape(t.ID,t.type,t.arguments),2705031697:t=>dy.FromTape(t.ID,t.type,t.arguments),3460190687:t=>my.FromTape(t.ID,t.type,t.arguments),3207858831:t=>fy.FromTape(t.ID,t.type,t.arguments),277319702:t=>gy.FromTape(t.ID,t.type,t.arguments),1532957894:t=>yy.FromTape(t.ID,t.type,t.arguments),4261334040:t=>Ty.FromTape(t.ID,t.type,t.arguments),3125803723:t=>vy.FromTape(t.ID,t.type,t.arguments),2740243338:t=>by.FromTape(t.ID,t.type,t.arguments),1967976161:t=>wy.FromTape(t.ID,t.type,t.arguments),2461110595:t=>xy.FromTape(t.ID,t.type,t.arguments),2887950389:t=>Iy.FromTape(t.ID,t.type,t.arguments),167062518:t=>Ey.FromTape(t.ID,t.type,t.arguments),753842376:t=>Sy.FromTape(t.ID,t.type,t.arguments),2906023776:t=>Ay.FromTape(t.ID,t.type,t.arguments),819618141:t=>Ry.FromTape(t.ID,t.type,t.arguments),4196446775:t=>Cy.FromTape(t.ID,t.type,t.arguments),3649138523:t=>Oy.FromTape(t.ID,t.type,t.arguments),616511568:t=>_y.FromTape(t.ID,t.type,t.arguments),1334484129:t=>Dy.FromTape(t.ID,t.type,t.arguments),32344328:t=>Fy.FromTape(t.ID,t.type,t.arguments),231477066:t=>My.FromTape(t.ID,t.type,t.arguments),3649129432:t=>Py.FromTape(t.ID,t.type,t.arguments),2736907675:t=>Ny.FromTape(t.ID,t.type,t.arguments),4037036970:t=>Ly.FromTape(t.ID,t.type,t.arguments),1136057603:t=>ky.FromTape(t.ID,t.type,t.arguments),1560379544:t=>Uy.FromTape(t.ID,t.type,t.arguments),3367102660:t=>Hy.FromTape(t.ID,t.type,t.arguments),1387855156:t=>By.FromTape(t.ID,t.type,t.arguments),2069777674:t=>Gy.FromTape(t.ID,t.type,t.arguments),1260505505:t=>jy.FromTape(t.ID,t.type,t.arguments),4182860854:t=>zy.FromTape(t.ID,t.type,t.arguments),2581212453:t=>Vy.FromTape(t.ID,t.type,t.arguments),2713105998:t=>Wy.FromTape(t.ID,t.type,t.arguments),644574406:t=>Yy.FromTape(t.ID,t.type,t.arguments),963979645:t=>Xy.FromTape(t.ID,t.type,t.arguments),4031249490:t=>qy.FromTape(t.ID,t.type,t.arguments),3299480353:t=>Ky.FromTape(t.ID,t.type,t.arguments),2979338954:t=>Jy.FromTape(t.ID,t.type,t.arguments),39481116:t=>$y.FromTape(t.ID,t.type,t.arguments),1095909175:t=>Zy.FromTape(t.ID,t.type,t.arguments),1909888760:t=>Qy.FromTape(t.ID,t.type,t.arguments),1950629157:t=>tT.FromTape(t.ID,t.type,t.arguments),3124254112:t=>eT.FromTape(t.ID,t.type,t.arguments),1177604601:t=>sT.FromTape(t.ID,t.type,t.arguments),2938176219:t=>rT.FromTape(t.ID,t.type,t.arguments),2188180465:t=>iT.FromTape(t.ID,t.type,t.arguments),2898889636:t=>nT.FromTape(t.ID,t.type,t.arguments),635142910:t=>oT.FromTape(t.ID,t.type,t.arguments),395041908:t=>aT.FromTape(t.ID,t.type,t.arguments),3758799889:t=>hT.FromTape(t.ID,t.type,t.arguments),3293546465:t=>cT.FromTape(t.ID,t.type,t.arguments),1051757585:t=>lT.FromTape(t.ID,t.type,t.arguments),2674252688:t=>uT.FromTape(t.ID,t.type,t.arguments),4217484030:t=>pT.FromTape(t.ID,t.type,t.arguments),1285652485:t=>dT.FromTape(t.ID,t.type,t.arguments),3999819293:t=>mT.FromTape(t.ID,t.type,t.arguments),3203706013:t=>fT.FromTape(t.ID,t.type,t.arguments),1123145078:t=>gT.FromTape(t.ID,t.type,t.arguments),574549367:t=>yT.FromTape(t.ID,t.type,t.arguments),1675464909:t=>TT.FromTape(t.ID,t.type,t.arguments),2059837836:t=>vT.FromTape(t.ID,t.type,t.arguments),59481748:t=>bT.FromTape(t.ID,t.type,t.arguments),3749851601:t=>wT.FromTape(t.ID,t.type,t.arguments),3486308946:t=>xT.FromTape(t.ID,t.type,t.arguments),3331915920:t=>IT.FromTape(t.ID,t.type,t.arguments),1416205885:t=>ET.FromTape(t.ID,t.type,t.arguments),3150382593:t=>ST.FromTape(t.ID,t.type,t.arguments),3902619387:t=>AT.FromTape(t.ID,t.type,t.arguments),2951183804:t=>RT.FromTape(t.ID,t.type,t.arguments),3296154744:t=>CT.FromTape(t.ID,t.type,t.arguments),2197970202:t=>OT.FromTape(t.ID,t.type,t.arguments),2611217952:t=>_T.FromTape(t.ID,t.type,t.arguments),2937912522:t=>DT.FromTape(t.ID,t.type,t.arguments),1383045692:t=>FT.FromTape(t.ID,t.type,t.arguments),1062206242:t=>MT.FromTape(t.ID,t.type,t.arguments),1677625105:t=>PT.FromTape(t.ID,t.type,t.arguments),3893394355:t=>NT.FromTape(t.ID,t.type,t.arguments),747523909:t=>LT.FromTape(t.ID,t.type,t.arguments),647927063:t=>kT.FromTape(t.ID,t.type,t.arguments),2205249479:t=>UT.FromTape(t.ID,t.type,t.arguments),639361253:t=>HT.FromTape(t.ID,t.type,t.arguments),2301859152:t=>BT.FromTape(t.ID,t.type,t.arguments),776857604:t=>GT.FromTape(t.ID,t.type,t.arguments),3285139300:t=>jT.FromTape(t.ID,t.type,t.arguments),3264961684:t=>zT.FromTape(t.ID,t.type,t.arguments),843113511:t=>VT.FromTape(t.ID,t.type,t.arguments),905975707:t=>WT.FromTape(t.ID,t.type,t.arguments),300633059:t=>YT.FromTape(t.ID,t.type,t.arguments),3221913625:t=>XT.FromTape(t.ID,t.type,t.arguments),400855858:t=>qT.FromTape(t.ID,t.type,t.arguments),2542286263:t=>KT.FromTape(t.ID,t.type,t.arguments),3875453745:t=>JT.FromTape(t.ID,t.type,t.arguments),3732776249:t=>$T.FromTape(t.ID,t.type,t.arguments),15328376:t=>ZT.FromTape(t.ID,t.type,t.arguments),2485617015:t=>QT.FromTape(t.ID,t.type,t.arguments),1485152156:t=>tv.FromTape(t.ID,t.type,t.arguments),3571504051:t=>ev.FromTape(t.ID,t.type,t.arguments),3850581409:t=>sv.FromTape(t.ID,t.type,t.arguments),2272882330:t=>rv.FromTape(t.ID,t.type,t.arguments),2816379211:t=>iv.FromTape(t.ID,t.type,t.arguments),2510884976:t=>nv.FromTape(t.ID,t.type,t.arguments),370225590:t=>ov.FromTape(t.ID,t.type,t.arguments),1981873012:t=>av.FromTape(t.ID,t.type,t.arguments),2859738748:t=>hv.FromTape(t.ID,t.type,t.arguments),45288368:t=>cv.FromTape(t.ID,t.type,t.arguments),2614616156:t=>lv.FromTape(t.ID,t.type,t.arguments),2732653382:t=>uv.FromTape(t.ID,t.type,t.arguments),775493141:t=>pv.FromTape(t.ID,t.type,t.arguments),1959218052:t=>dv.FromTape(t.ID,t.type,t.arguments),3898045240:t=>mv.FromTape(t.ID,t.type,t.arguments),2185764099:t=>fv.FromTape(t.ID,t.type,t.arguments),1060000209:t=>gv.FromTape(t.ID,t.type,t.arguments),4105962743:t=>yv.FromTape(t.ID,t.type,t.arguments),488727124:t=>Tv.FromTape(t.ID,t.type,t.arguments),1525564444:t=>vv.FromTape(t.ID,t.type,t.arguments),2559216714:t=>bv.FromTape(t.ID,t.type,t.arguments),2574617495:t=>wv.FromTape(t.ID,t.type,t.arguments),3419103109:t=>xv.FromTape(t.ID,t.type,t.arguments),3050246964:t=>Iv.FromTape(t.ID,t.type,t.arguments),3293443760:t=>Ev.FromTape(t.ID,t.type,t.arguments),25142252:t=>Sv.FromTape(t.ID,t.type,t.arguments),578613899:t=>Av.FromTape(t.ID,t.type,t.arguments),2889183280:t=>Rv.FromTape(t.ID,t.type,t.arguments),2713554722:t=>Cv.FromTape(t.ID,t.type,t.arguments),4136498852:t=>Ov.FromTape(t.ID,t.type,t.arguments),335055490:t=>_v.FromTape(t.ID,t.type,t.arguments),3640358203:t=>Dv.FromTape(t.ID,t.type,t.arguments),2954562838:t=>Fv.FromTape(t.ID,t.type,t.arguments),1785450214:t=>Mv.FromTape(t.ID,t.type,t.arguments),1466758467:t=>Pv.FromTape(t.ID,t.type,t.arguments),3895139033:t=>Nv.FromTape(t.ID,t.type,t.arguments),1419761937:t=>Lv.FromTape(t.ID,t.type,t.arguments),602808272:t=>kv.FromTape(t.ID,t.type,t.arguments),1973544240:t=>Uv.FromTape(t.ID,t.type,t.arguments),1916426348:t=>Hv.FromTape(t.ID,t.type,t.arguments),3295246426:t=>Bv.FromTape(t.ID,t.type,t.arguments),1815067380:t=>Gv.FromTape(t.ID,t.type,t.arguments),2506170314:t=>jv.FromTape(t.ID,t.type,t.arguments),2147822146:t=>zv.FromTape(t.ID,t.type,t.arguments),539742890:t=>Vv.FromTape(t.ID,t.type,t.arguments),3495092785:t=>Wv.FromTape(t.ID,t.type,t.arguments),1457835157:t=>Yv.FromTape(t.ID,t.type,t.arguments),2601014836:t=>Xv.FromTape(t.ID,t.type,t.arguments),2827736869:t=>qv.FromTape(t.ID,t.type,t.arguments),2629017746:t=>Kv.FromTape(t.ID,t.type,t.arguments),1186437898:t=>Jv.FromTape(t.ID,t.type,t.arguments),3800577675:t=>$v.FromTape(t.ID,t.type,t.arguments),1105321065:t=>Zv.FromTape(t.ID,t.type,t.arguments),2367409068:t=>Qv.FromTape(t.ID,t.type,t.arguments),3510044353:t=>tb.FromTape(t.ID,t.type,t.arguments),1213902940:t=>eb.FromTape(t.ID,t.type,t.arguments),4074379575:t=>sb.FromTape(t.ID,t.type,t.arguments),3961806047:t=>rb.FromTape(t.ID,t.type,t.arguments),3426335179:t=>ib.FromTape(t.ID,t.type,t.arguments),1306400036:t=>nb.FromTape(t.ID,t.type,t.arguments),3632507154:t=>ob.FromTape(t.ID,t.type,t.arguments),1765591967:t=>ab.FromTape(t.ID,t.type,t.arguments),1045800335:t=>hb.FromTape(t.ID,t.type,t.arguments),2949456006:t=>cb.FromTape(t.ID,t.type,t.arguments),32440307:t=>lb.FromTape(t.ID,t.type,t.arguments),1335981549:t=>ub.FromTape(t.ID,t.type,t.arguments),2635815018:t=>pb.FromTape(t.ID,t.type,t.arguments),1945343521:t=>db.FromTape(t.ID,t.type,t.arguments),1052013943:t=>mb.FromTape(t.ID,t.type,t.arguments),1599208980:t=>fb.FromTape(t.ID,t.type,t.arguments),562808652:t=>gb.FromTape(t.ID,t.type,t.arguments),1062813311:t=>yb.FromTape(t.ID,t.type,t.arguments),2063403501:t=>Tb.FromTape(t.ID,t.type,t.arguments),1945004755:t=>vb.FromTape(t.ID,t.type,t.arguments),3256556792:t=>bb.FromTape(t.ID,t.type,t.arguments),3040386961:t=>wb.FromTape(t.ID,t.type,t.arguments),3849074793:t=>xb.FromTape(t.ID,t.type,t.arguments),3041715199:t=>Ib.FromTape(t.ID,t.type,t.arguments),3205830791:t=>Eb.FromTape(t.ID,t.type,t.arguments),1154170062:t=>Sb.FromTape(t.ID,t.type,t.arguments),770865208:t=>Ab.FromTape(t.ID,t.type,t.arguments),3732053477:t=>Rb.FromTape(t.ID,t.type,t.arguments),395920057:t=>Cb.FromTape(t.ID,t.type,t.arguments),2963535650:t=>Ob.FromTape(t.ID,t.type,t.arguments),1714330368:t=>_b.FromTape(t.ID,t.type,t.arguments),3242481149:t=>Db.FromTape(t.ID,t.type,t.arguments),526551008:t=>Fb.FromTape(t.ID,t.type,t.arguments),2323601079:t=>Mb.FromTape(t.ID,t.type,t.arguments),445594917:t=>Pb.FromTape(t.ID,t.type,t.arguments),4006246654:t=>Nb.FromTape(t.ID,t.type,t.arguments),342316401:t=>Lb.FromTape(t.ID,t.type,t.arguments),869906466:t=>kb.FromTape(t.ID,t.type,t.arguments),3518393246:t=>Ub.FromTape(t.ID,t.type,t.arguments),3760055223:t=>Hb.FromTape(t.ID,t.type,t.arguments),1360408905:t=>Bb.FromTape(t.ID,t.type,t.arguments),2030761528:t=>Gb.FromTape(t.ID,t.type,t.arguments),3900360178:t=>jb.FromTape(t.ID,t.type,t.arguments),476780140:t=>zb.FromTape(t.ID,t.type,t.arguments),1472233963:t=>Vb.FromTape(t.ID,t.type,t.arguments),1904799276:t=>Wb.FromTape(t.ID,t.type,t.arguments),663422040:t=>Yb.FromTape(t.ID,t.type,t.arguments),862014818:t=>Xb.FromTape(t.ID,t.type,t.arguments),2417008758:t=>qb.FromTape(t.ID,t.type,t.arguments),3310460725:t=>Kb.FromTape(t.ID,t.type,t.arguments),3277789161:t=>Jb.FromTape(t.ID,t.type,t.arguments),264262732:t=>$b.FromTape(t.ID,t.type,t.arguments),1534661035:t=>Zb.FromTape(t.ID,t.type,t.arguments),402227799:t=>Qb.FromTape(t.ID,t.type,t.arguments),1217240411:t=>tw.FromTape(t.ID,t.type,t.arguments),1003880860:t=>ew.FromTape(t.ID,t.type,t.arguments),712377611:t=>sw.FromTape(t.ID,t.type,t.arguments),1758889154:t=>rw.FromTape(t.ID,t.type,t.arguments),4123344466:t=>iw.FromTape(t.ID,t.type,t.arguments),2397081782:t=>nw.FromTape(t.ID,t.type,t.arguments),1623761950:t=>ow.FromTape(t.ID,t.type,t.arguments),2590856083:t=>aw.FromTape(t.ID,t.type,t.arguments),1883228015:t=>hw.FromTape(t.ID,t.type,t.arguments),339256511:t=>cw.FromTape(t.ID,t.type,t.arguments),2777663545:t=>lw.FromTape(t.ID,t.type,t.arguments),1704287377:t=>uw.FromTape(t.ID,t.type,t.arguments),2835456948:t=>pw.FromTape(t.ID,t.type,t.arguments),1658829314:t=>dw.FromTape(t.ID,t.type,t.arguments),2107101300:t=>mw.FromTape(t.ID,t.type,t.arguments),2814081492:t=>fw.FromTape(t.ID,t.type,t.arguments),132023988:t=>gw.FromTape(t.ID,t.type,t.arguments),3747195512:t=>yw.FromTape(t.ID,t.type,t.arguments),3174744832:t=>Tw.FromTape(t.ID,t.type,t.arguments),484807127:t=>vw.FromTape(t.ID,t.type,t.arguments),3390157468:t=>bw.FromTape(t.ID,t.type,t.arguments),4148101412:t=>ww.FromTape(t.ID,t.type,t.arguments),211053100:t=>xw.FromTape(t.ID,t.type,t.arguments),4024345920:t=>Iw.FromTape(t.ID,t.type,t.arguments),297599258:t=>Ew.FromTape(t.ID,t.type,t.arguments),4294318154:t=>Sw.FromTape(t.ID,t.type,t.arguments),3200245327:t=>Aw.FromTape(t.ID,t.type,t.arguments),1437805879:t=>Rw.FromTape(t.ID,t.type,t.arguments),1209101575:t=>Cw.FromTape(t.ID,t.type,t.arguments),2853485674:t=>Ow.FromTape(t.ID,t.type,t.arguments),2242383968:t=>_w.FromTape(t.ID,t.type,t.arguments),1040185647:t=>Dw.FromTape(t.ID,t.type,t.arguments),3548104201:t=>Fw.FromTape(t.ID,t.type,t.arguments),477187591:t=>Mw.FromTape(t.ID,t.type,t.arguments),2804161546:t=>Pw.FromTape(t.ID,t.type,t.arguments),2556980723:t=>Nw.FromTape(t.ID,t.type,t.arguments),2047409740:t=>Lw.FromTape(t.ID,t.type,t.arguments),1809719519:t=>kw.FromTape(t.ID,t.type,t.arguments),803316827:t=>Uw.FromTape(t.ID,t.type,t.arguments),3008276851:t=>Hw.FromTape(t.ID,t.type,t.arguments),807026263:t=>Bw.FromTape(t.ID,t.type,t.arguments),3737207727:t=>Gw.FromTape(t.ID,t.type,t.arguments),24185140:t=>jw.FromTape(t.ID,t.type,t.arguments),1310830890:t=>zw.FromTape(t.ID,t.type,t.arguments),4219587988:t=>Vw.FromTape(t.ID,t.type,t.arguments),3415622556:t=>Ww.FromTape(t.ID,t.type,t.arguments),346874300:t=>Yw.FromTape(t.ID,t.type,t.arguments),647756555:t=>Xw.FromTape(t.ID,t.type,t.arguments),2489546625:t=>qw.FromTape(t.ID,t.type,t.arguments),2827207264:t=>Kw.FromTape(t.ID,t.type,t.arguments),2143335405:t=>Jw.FromTape(t.ID,t.type,t.arguments),1287392070:t=>$w.FromTape(t.ID,t.type,t.arguments),738692330:t=>Zw.FromTape(t.ID,t.type,t.arguments),374418227:t=>Qw.FromTape(t.ID,t.type,t.arguments),315944413:t=>tx.FromTape(t.ID,t.type,t.arguments),819412036:t=>ex.FromTape(t.ID,t.type,t.arguments),1810631287:t=>sx.FromTape(t.ID,t.type,t.arguments),1426591983:t=>rx.FromTape(t.ID,t.type,t.arguments),4222183408:t=>ix.FromTape(t.ID,t.type,t.arguments),2652556860:t=>nx.FromTape(t.ID,t.type,t.arguments),2058353004:t=>ox.FromTape(t.ID,t.type,t.arguments),3907093117:t=>ax.FromTape(t.ID,t.type,t.arguments),4278956645:t=>hx.FromTape(t.ID,t.type,t.arguments),3198132628:t=>cx.FromTape(t.ID,t.type,t.arguments),182646315:t=>lx.FromTape(t.ID,t.type,t.arguments),4037862832:t=>ux.FromTape(t.ID,t.type,t.arguments),2188021234:t=>px.FromTape(t.ID,t.type,t.arguments),3815607619:t=>dx.FromTape(t.ID,t.type,t.arguments),3132237377:t=>mx.FromTape(t.ID,t.type,t.arguments),1482959167:t=>fx.FromTape(t.ID,t.type,t.arguments),987401354:t=>gx.FromTape(t.ID,t.type,t.arguments),1834744321:t=>yx.FromTape(t.ID,t.type,t.arguments),707683696:t=>Tx.FromTape(t.ID,t.type,t.arguments),1339347760:t=>vx.FromTape(t.ID,t.type,t.arguments),2223149337:t=>bx.FromTape(t.ID,t.type,t.arguments),2297155007:t=>wx.FromTape(t.ID,t.type,t.arguments),3508470533:t=>xx.FromTape(t.ID,t.type,t.arguments),3009222698:t=>Ix.FromTape(t.ID,t.type,t.arguments),900683007:t=>Ex.FromTape(t.ID,t.type,t.arguments),1893162501:t=>Sx.FromTape(t.ID,t.type,t.arguments),263784265:t=>Ax.FromTape(t.ID,t.type,t.arguments),4238390223:t=>Rx.FromTape(t.ID,t.type,t.arguments),1509553395:t=>Cx.FromTape(t.ID,t.type,t.arguments),1268542332:t=>Ox.FromTape(t.ID,t.type,t.arguments),3493046030:t=>_x.FromTape(t.ID,t.type,t.arguments),4095422895:t=>Dx.FromTape(t.ID,t.type,t.arguments),987898635:t=>Fx.FromTape(t.ID,t.type,t.arguments),3448662350:t=>Mx.FromTape(t.ID,t.type,t.arguments),2453401579:t=>Px.FromTape(t.ID,t.type,t.arguments),4142052618:t=>Nx.FromTape(t.ID,t.type,t.arguments),3590301190:t=>Lx.FromTape(t.ID,t.type,t.arguments),3009204131:t=>kx.FromTape(t.ID,t.type,t.arguments),852622518:t=>Ux.FromTape(t.ID,t.type,t.arguments),178086475:t=>Hx.FromTape(t.ID,t.type,t.arguments),2706460486:t=>Bx.FromTape(t.ID,t.type,t.arguments),812098782:t=>Gx.FromTape(t.ID,t.type,t.arguments),3319311131:t=>jx.FromTape(t.ID,t.type,t.arguments),1251058090:t=>zx.FromTape(t.ID,t.type,t.arguments),2068733104:t=>Vx.FromTape(t.ID,t.type,t.arguments),1806887404:t=>Wx.FromTape(t.ID,t.type,t.arguments),1484403080:t=>Yx.FromTape(t.ID,t.type,t.arguments),3905492369:t=>Xx.FromTape(t.ID,t.type,t.arguments),3570813810:t=>qx.FromTape(t.ID,t.type,t.arguments),2571569899:t=>Kx.FromTape(t.ID,t.type,t.arguments),178912537:t=>Jx.FromTape(t.ID,t.type,t.arguments),2294589976:t=>$x.FromTape(t.ID,t.type,t.arguments),1437953363:t=>Zx.FromTape(t.ID,t.type,t.arguments),2133299955:t=>Qx.FromTape(t.ID,t.type,t.arguments),4175244083:t=>tI.FromTape(t.ID,t.type,t.arguments),3946677679:t=>eI.FromTape(t.ID,t.type,t.arguments),3113134337:t=>sI.FromTape(t.ID,t.type,t.arguments),2391368822:t=>rI.FromTape(t.ID,t.type,t.arguments),3741457305:t=>iI.FromTape(t.ID,t.type,t.arguments),3020489413:t=>nI.FromTape(t.ID,t.type,t.arguments),2176052936:t=>oI.FromTape(t.ID,t.type,t.arguments),4288270099:t=>aI.FromTape(t.ID,t.type,t.arguments),572779678:t=>hI.FromTape(t.ID,t.type,t.arguments),3827777499:t=>cI.FromTape(t.ID,t.type,t.arguments),428585644:t=>lI.FromTape(t.ID,t.type,t.arguments),1585845231:t=>uI.FromTape(t.ID,t.type,t.arguments),76236018:t=>pI.FromTape(t.ID,t.type,t.arguments),1051575348:t=>dI.FromTape(t.ID,t.type,t.arguments),2655187982:t=>mI.FromTape(t.ID,t.type,t.arguments),3452421091:t=>fI.FromTape(t.ID,t.type,t.arguments),4162380809:t=>gI.FromTape(t.ID,t.type,t.arguments),629592764:t=>yI.FromTape(t.ID,t.type,t.arguments),1161773419:t=>TI.FromTape(t.ID,t.type,t.arguments),1566485204:t=>vI.FromTape(t.ID,t.type,t.arguments),1402838566:t=>bI.FromTape(t.ID,t.type,t.arguments),125510826:t=>wI.FromTape(t.ID,t.type,t.arguments),2604431987:t=>xI.FromTape(t.ID,t.type,t.arguments),4266656042:t=>II.FromTape(t.ID,t.type,t.arguments),1520743889:t=>EI.FromTape(t.ID,t.type,t.arguments),3422422726:t=>SI.FromTape(t.ID,t.type,t.arguments),1281925730:t=>AI.FromTape(t.ID,t.type,t.arguments),3092502836:t=>RI.FromTape(t.ID,t.type,t.arguments),388784114:t=>CI.FromTape(t.ID,t.type,t.arguments),1154579445:t=>OI.FromTape(t.ID,t.type,t.arguments),2624227202:t=>_I.FromTape(t.ID,t.type,t.arguments),1008929658:t=>DI.FromTape(t.ID,t.type,t.arguments),1425443689:t=>FI.FromTape(t.ID,t.type,t.arguments),3057273783:t=>MI.FromTape(t.ID,t.type,t.arguments),2347385850:t=>PI.FromTape(t.ID,t.type,t.arguments),1838606355:t=>NI.FromTape(t.ID,t.type,t.arguments),1847130766:t=>LI.FromTape(t.ID,t.type,t.arguments),3708119e3:t=>kI.FromTape(t.ID,t.type,t.arguments),2852063980:t=>UI.FromTape(t.ID,t.type,t.arguments),760658860:t=>HI.FromTape(t.ID,t.type,t.arguments),2022407955:t=>BI.FromTape(t.ID,t.type,t.arguments),248100487:t=>GI.FromTape(t.ID,t.type,t.arguments),3303938423:t=>jI.FromTape(t.ID,t.type,t.arguments),1303795690:t=>zI.FromTape(t.ID,t.type,t.arguments),1847252529:t=>VI.FromTape(t.ID,t.type,t.arguments),2199411900:t=>WI.FromTape(t.ID,t.type,t.arguments),2235152071:t=>YI.FromTape(t.ID,t.type,t.arguments),164193824:t=>XI.FromTape(t.ID,t.type,t.arguments),3079605661:t=>qI.FromTape(t.ID,t.type,t.arguments),3404854881:t=>KI.FromTape(t.ID,t.type,t.arguments),552965576:t=>JI.FromTape(t.ID,t.type,t.arguments),3265635763:t=>$I.FromTape(t.ID,t.type,t.arguments),853536259:t=>ZI.FromTape(t.ID,t.type,t.arguments),1507914824:t=>QI.FromTape(t.ID,t.type,t.arguments),2597039031:t=>tE.FromTape(t.ID,t.type,t.arguments),377706215:t=>eE.FromTape(t.ID,t.type,t.arguments),2108223431:t=>sE.FromTape(t.ID,t.type,t.arguments),1437502449:t=>rE.FromTape(t.ID,t.type,t.arguments),1114901282:t=>iE.FromTape(t.ID,t.type,t.arguments),1073191201:t=>nE.FromTape(t.ID,t.type,t.arguments),1911478936:t=>oE.FromTape(t.ID,t.type,t.arguments),3181161470:t=>aE.FromTape(t.ID,t.type,t.arguments),3368373690:t=>hE.FromTape(t.ID,t.type,t.arguments),2998442950:t=>cE.FromTape(t.ID,t.type,t.arguments),2706619895:t=>lE.FromTape(t.ID,t.type,t.arguments),2474470126:t=>uE.FromTape(t.ID,t.type,t.arguments),977012517:t=>pE.FromTape(t.ID,t.type,t.arguments),1918398963:t=>dE.FromTape(t.ID,t.type,t.arguments),3888040117:t=>mE.FromTape(t.ID,t.type,t.arguments),219451334:t=>fE.FromTape(t.ID,t.type,t.arguments),3701648758:t=>gE.FromTape(t.ID,t.type,t.arguments),2251480897:t=>yE.FromTape(t.ID,t.type,t.arguments),4143007308:t=>TE.FromTape(t.ID,t.type,t.arguments),590820931:t=>vE.FromTape(t.ID,t.type,t.arguments),3388369263:t=>bE.FromTape(t.ID,t.type,t.arguments),3505215534:t=>wE.FromTape(t.ID,t.type,t.arguments),2485787929:t=>xE.FromTape(t.ID,t.type,t.arguments),2665983363:t=>IE.FromTape(t.ID,t.type,t.arguments),3588315303:t=>EE.FromTape(t.ID,t.type,t.arguments),3079942009:t=>SE.FromTape(t.ID,t.type,t.arguments),4251960020:t=>AE.FromTape(t.ID,t.type,t.arguments),1411181986:t=>RE.FromTape(t.ID,t.type,t.arguments),643959842:t=>CE.FromTape(t.ID,t.type,t.arguments),1029017970:t=>OE.FromTape(t.ID,t.type,t.arguments),144952367:t=>_E.FromTape(t.ID,t.type,t.arguments),3694346114:t=>DE.FromTape(t.ID,t.type,t.arguments),2837617999:t=>FE.FromTape(t.ID,t.type,t.arguments),1207048766:t=>ME.FromTape(t.ID,t.type,t.arguments),2529465313:t=>PE.FromTape(t.ID,t.type,t.arguments),2519244187:t=>NE.FromTape(t.ID,t.type,t.arguments),1682466193:t=>LE.FromTape(t.ID,t.type,t.arguments),2382730787:t=>kE.FromTape(t.ID,t.type,t.arguments),3566463478:t=>UE.FromTape(t.ID,t.type,t.arguments),3327091369:t=>HE.FromTape(t.ID,t.type,t.arguments),2077209135:t=>BE.FromTape(t.ID,t.type,t.arguments),101040310:t=>GE.FromTape(t.ID,t.type,t.arguments),3021840470:t=>jE.FromTape(t.ID,t.type,t.arguments),2483315170:t=>zE.FromTape(t.ID,t.type,t.arguments),2226359599:t=>VE.FromTape(t.ID,t.type,t.arguments),1687234759:t=>WE.FromTape(t.ID,t.type,t.arguments),1158309216:t=>YE.FromTape(t.ID,t.type,t.arguments),310824031:t=>XE.FromTape(t.ID,t.type,t.arguments),804291784:t=>qE.FromTape(t.ID,t.type,t.arguments),3612865200:t=>KE.FromTape(t.ID,t.type,t.arguments),4231323485:t=>JE.FromTape(t.ID,t.type,t.arguments),597895409:t=>$E.FromTape(t.ID,t.type,t.arguments),2004835150:t=>ZE.FromTape(t.ID,t.type,t.arguments),603570806:t=>QE.FromTape(t.ID,t.type,t.arguments),1663979128:t=>tS.FromTape(t.ID,t.type,t.arguments),220341763:t=>eS.FromTape(t.ID,t.type,t.arguments),3171933400:t=>sS.FromTape(t.ID,t.type,t.arguments),1156407060:t=>rS.FromTape(t.ID,t.type,t.arguments),4017108033:t=>iS.FromTape(t.ID,t.type,t.arguments),2067069095:t=>nS.FromTape(t.ID,t.type,t.arguments),4022376103:t=>oS.FromTape(t.ID,t.type,t.arguments),1423911732:t=>aS.FromTape(t.ID,t.type,t.arguments),2924175390:t=>hS.FromTape(t.ID,t.type,t.arguments),2775532180:t=>cS.FromTape(t.ID,t.type,t.arguments),2839578677:t=>lS.FromTape(t.ID,t.type,t.arguments),3724593414:t=>uS.FromTape(t.ID,t.type,t.arguments),3740093272:t=>pS.FromTape(t.ID,t.type,t.arguments),1946335990:t=>dS.FromTape(t.ID,t.type,t.arguments),3355820592:t=>mS.FromTape(t.ID,t.type,t.arguments),759155922:t=>fS.FromTape(t.ID,t.type,t.arguments),2559016684:t=>gS.FromTape(t.ID,t.type,t.arguments),3727388367:t=>yS.FromTape(t.ID,t.type,t.arguments),3778827333:t=>TS.FromTape(t.ID,t.type,t.arguments),3967405729:t=>vS.FromTape(t.ID,t.type,t.arguments),1775413392:t=>bS.FromTape(t.ID,t.type,t.arguments),677532197:t=>wS.FromTape(t.ID,t.type,t.arguments),2022622350:t=>xS.FromTape(t.ID,t.type,t.arguments),1304840413:t=>IS.FromTape(t.ID,t.type,t.arguments),3119450353:t=>ES.FromTape(t.ID,t.type,t.arguments),2417041796:t=>SS.FromTape(t.ID,t.type,t.arguments),2744685151:t=>AS.FromTape(t.ID,t.type,t.arguments),569719735:t=>RS.FromTape(t.ID,t.type,t.arguments),2945172077:t=>CS.FromTape(t.ID,t.type,t.arguments),4208778838:t=>OS.FromTape(t.ID,t.type,t.arguments),673634403:t=>_S.FromTape(t.ID,t.type,t.arguments),2095639259:t=>DS.FromTape(t.ID,t.type,t.arguments),3958567839:t=>FS.FromTape(t.ID,t.type,t.arguments),2802850158:t=>MS.FromTape(t.ID,t.type,t.arguments),103090709:t=>PS.FromTape(t.ID,t.type,t.arguments),653396225:t=>NS.FromTape(t.ID,t.type,t.arguments),2904328755:t=>LS.FromTape(t.ID,t.type,t.arguments),3843373140:t=>kS.FromTape(t.ID,t.type,t.arguments),3651124850:t=>US.FromTape(t.ID,t.type,t.arguments),2598011224:t=>HS.FromTape(t.ID,t.type,t.arguments),986844984:t=>BS.FromTape(t.ID,t.type,t.arguments),871118103:t=>GS.FromTape(t.ID,t.type,t.arguments),1680319473:t=>jS.FromTape(t.ID,t.type,t.arguments),148025276:t=>zS.FromTape(t.ID,t.type,t.arguments),4166981789:t=>VS.FromTape(t.ID,t.type,t.arguments),3710013099:t=>WS.FromTape(t.ID,t.type,t.arguments),2752243245:t=>YS.FromTape(t.ID,t.type,t.arguments),941946838:t=>XS.FromTape(t.ID,t.type,t.arguments),1451395588:t=>qS.FromTape(t.ID,t.type,t.arguments),3357820518:t=>KS.FromTape(t.ID,t.type,t.arguments),492091185:t=>JS.FromTape(t.ID,t.type,t.arguments),3650150729:t=>$S.FromTape(t.ID,t.type,t.arguments),110355661:t=>ZS.FromTape(t.ID,t.type,t.arguments),3521284610:t=>QS.FromTape(t.ID,t.type,t.arguments),1482703590:t=>tA.FromTape(t.ID,t.type,t.arguments),738039164:t=>eA.FromTape(t.ID,t.type,t.arguments),2295281155:t=>sA.FromTape(t.ID,t.type,t.arguments),655969474:t=>rA.FromTape(t.ID,t.type,t.arguments),1842657554:t=>iA.FromTape(t.ID,t.type,t.arguments),3219374653:t=>nA.FromTape(t.ID,t.type,t.arguments),90941305:t=>oA.FromTape(t.ID,t.type,t.arguments),2250791053:t=>aA.FromTape(t.ID,t.type,t.arguments),2044713172:t=>hA.FromTape(t.ID,t.type,t.arguments),2093928680:t=>cA.FromTape(t.ID,t.type,t.arguments),931644368:t=>lA.FromTape(t.ID,t.type,t.arguments),2090586900:t=>uA.FromTape(t.ID,t.type,t.arguments),3252649465:t=>pA.FromTape(t.ID,t.type,t.arguments),2405470396:t=>dA.FromTape(t.ID,t.type,t.arguments),825690147:t=>mA.FromTape(t.ID,t.type,t.arguments),2262370178:t=>fA.FromTape(t.ID,t.type,t.arguments),2893384427:t=>gA.FromTape(t.ID,t.type,t.arguments),3024970846:t=>yA.FromTape(t.ID,t.type,t.arguments),3283111854:t=>TA.FromTape(t.ID,t.type,t.arguments),2324767716:t=>vA.FromTape(t.ID,t.type,t.arguments),1469900589:t=>bA.FromTape(t.ID,t.type,t.arguments),1232101972:t=>wA.FromTape(t.ID,t.type,t.arguments),683857671:t=>xA.FromTape(t.ID,t.type,t.arguments),2770003689:t=>IA.FromTape(t.ID,t.type,t.arguments),3615266464:t=>EA.FromTape(t.ID,t.type,t.arguments),2798486643:t=>SA.FromTape(t.ID,t.type,t.arguments),3454111270:t=>AA.FromTape(t.ID,t.type,t.arguments),3915482550:t=>RA.FromTape(t.ID,t.type,t.arguments),2433181523:t=>CA.FromTape(t.ID,t.type,t.arguments),4021432810:t=>OA.FromTape(t.ID,t.type,t.arguments),3413951693:t=>_A.FromTape(t.ID,t.type,t.arguments),1580146022:t=>DA.FromTape(t.ID,t.type,t.arguments),3765753017:t=>FA.FromTape(t.ID,t.type,t.arguments),979691226:t=>MA.FromTape(t.ID,t.type,t.arguments),2572171363:t=>PA.FromTape(t.ID,t.type,t.arguments),3027567501:t=>NA.FromTape(t.ID,t.type,t.arguments),964333572:t=>LA.FromTape(t.ID,t.type,t.arguments),2320036040:t=>kA.FromTape(t.ID,t.type,t.arguments),2310774935:t=>UA.FromTape(t.ID,t.type,t.arguments),160246688:t=>HA.FromTape(t.ID,t.type,t.arguments),3939117080:t=>BA.FromTape(t.ID,t.type,t.arguments),1683148259:t=>GA.FromTape(t.ID,t.type,t.arguments),2495723537:t=>jA.FromTape(t.ID,t.type,t.arguments),1307041759:t=>zA.FromTape(t.ID,t.type,t.arguments),1027710054:t=>VA.FromTape(t.ID,t.type,t.arguments),4278684876:t=>WA.FromTape(t.ID,t.type,t.arguments),2857406711:t=>YA.FromTape(t.ID,t.type,t.arguments),205026976:t=>XA.FromTape(t.ID,t.type,t.arguments),1865459582:t=>qA.FromTape(t.ID,t.type,t.arguments),4095574036:t=>KA.FromTape(t.ID,t.type,t.arguments),919958153:t=>JA.FromTape(t.ID,t.type,t.arguments),2728634034:t=>$A.FromTape(t.ID,t.type,t.arguments),982818633:t=>ZA.FromTape(t.ID,t.type,t.arguments),3840914261:t=>QA.FromTape(t.ID,t.type,t.arguments),2655215786:t=>tR.FromTape(t.ID,t.type,t.arguments),826625072:t=>eR.FromTape(t.ID,t.type,t.arguments),1204542856:t=>sR.FromTape(t.ID,t.type,t.arguments),3945020480:t=>rR.FromTape(t.ID,t.type,t.arguments),4201705270:t=>iR.FromTape(t.ID,t.type,t.arguments),3190031847:t=>nR.FromTape(t.ID,t.type,t.arguments),2127690289:t=>oR.FromTape(t.ID,t.type,t.arguments),1638771189:t=>aR.FromTape(t.ID,t.type,t.arguments),504942748:t=>hR.FromTape(t.ID,t.type,t.arguments),3678494232:t=>cR.FromTape(t.ID,t.type,t.arguments),3242617779:t=>lR.FromTape(t.ID,t.type,t.arguments),886880790:t=>uR.FromTape(t.ID,t.type,t.arguments),2802773753:t=>pR.FromTape(t.ID,t.type,t.arguments),2565941209:t=>dR.FromTape(t.ID,t.type,t.arguments),2551354335:t=>mR.FromTape(t.ID,t.type,t.arguments),693640335:t=>fR.FromTape(t.ID,t.type,t.arguments),1462361463:t=>gR.FromTape(t.ID,t.type,t.arguments),4186316022:t=>yR.FromTape(t.ID,t.type,t.arguments),307848117:t=>TR.FromTape(t.ID,t.type,t.arguments),781010003:t=>vR.FromTape(t.ID,t.type,t.arguments),3940055652:t=>bR.FromTape(t.ID,t.type,t.arguments),279856033:t=>wR.FromTape(t.ID,t.type,t.arguments),427948657:t=>xR.FromTape(t.ID,t.type,t.arguments),3268803585:t=>IR.FromTape(t.ID,t.type,t.arguments),1441486842:t=>ER.FromTape(t.ID,t.type,t.arguments),750771296:t=>SR.FromTape(t.ID,t.type,t.arguments),1245217292:t=>AR.FromTape(t.ID,t.type,t.arguments),4122056220:t=>RR.FromTape(t.ID,t.type,t.arguments),366585022:t=>CR.FromTape(t.ID,t.type,t.arguments),3451746338:t=>OR.FromTape(t.ID,t.type,t.arguments),3523091289:t=>_R.FromTape(t.ID,t.type,t.arguments),1521410863:t=>DR.FromTape(t.ID,t.type,t.arguments),1401173127:t=>FR.FromTape(t.ID,t.type,t.arguments),478536968:t=>MR.FromTape(t.ID,t.type,t.arguments),816062949:t=>PR.FromTape(t.ID,t.type,t.arguments),1076942058:t=>NR.FromTape(t.ID,t.type,t.arguments),3377609919:t=>LR.FromTape(t.ID,t.type,t.arguments),3008791417:t=>kR.FromTape(t.ID,t.type,t.arguments),1660063152:t=>UR.FromTape(t.ID,t.type,t.arguments),2914609552:t=>HR.FromTape(t.ID,t.type,t.arguments),2943643501:t=>BR.FromTape(t.ID,t.type,t.arguments),1608871552:t=>GR.FromTape(t.ID,t.type,t.arguments),2439245199:t=>jR.FromTape(t.ID,t.type,t.arguments),1042787934:t=>zR.FromTape(t.ID,t.type,t.arguments),1856042241:t=>VR.FromTape(t.ID,t.type,t.arguments),3243963512:t=>WR.FromTape(t.ID,t.type,t.arguments),4158566097:t=>YR.FromTape(t.ID,t.type,t.arguments),3626867408:t=>XR.FromTape(t.ID,t.type,t.arguments),2016517767:t=>qR.FromTape(t.ID,t.type,t.arguments),2781568857:t=>KR.FromTape(t.ID,t.type,t.arguments),2341007311:t=>JR.FromTape(t.ID,t.type,t.arguments),2778083089:t=>$R.FromTape(t.ID,t.type,t.arguments),448429030:t=>ZR.FromTape(t.ID,t.type,t.arguments),3053780830:t=>QR.FromTape(t.ID,t.type,t.arguments),1768891740:t=>tC.FromTape(t.ID,t.type,t.arguments),1054537805:t=>eC.FromTape(t.ID,t.type,t.arguments),2157484638:t=>sC.FromTape(t.ID,t.type,t.arguments),2042790032:t=>rC.FromTape(t.ID,t.type,t.arguments),4165799628:t=>iC.FromTape(t.ID,t.type,t.arguments),1862484736:t=>nC.FromTape(t.ID,t.type,t.arguments),1290935644:t=>oC.FromTape(t.ID,t.type,t.arguments),1509187699:t=>aC.FromTape(t.ID,t.type,t.arguments),4086658281:t=>hC.FromTape(t.ID,t.type,t.arguments),1783015770:t=>cC.FromTape(t.ID,t.type,t.arguments),1329646415:t=>lC.FromTape(t.ID,t.type,t.arguments),4074543187:t=>uC.FromTape(t.ID,t.type,t.arguments),867548509:t=>pC.FromTape(t.ID,t.type,t.arguments),3982875396:t=>dC.FromTape(t.ID,t.type,t.arguments),4240577450:t=>mC.FromTape(t.ID,t.type,t.arguments),4124623270:t=>fC.FromTape(t.ID,t.type,t.arguments),3692461612:t=>gC.FromTape(t.ID,t.type,t.arguments),3663146110:t=>yC.FromTape(t.ID,t.type,t.arguments),4097777520:t=>TC.FromTape(t.ID,t.type,t.arguments),1529196076:t=>vC.FromTape(t.ID,t.type,t.arguments),3127900445:t=>bC.FromTape(t.ID,t.type,t.arguments),3027962421:t=>wC.FromTape(t.ID,t.type,t.arguments),2533589738:t=>xC.FromTape(t.ID,t.type,t.arguments),2609359061:t=>IC.FromTape(t.ID,t.type,t.arguments),3420628829:t=>EC.FromTape(t.ID,t.type,t.arguments),1072016465:t=>SC.FromTape(t.ID,t.type,t.arguments),723233188:t=>AC.FromTape(t.ID,t.type,t.arguments),3856911033:t=>RC.FromTape(t.ID,t.type,t.arguments),1999602285:t=>CC.FromTape(t.ID,t.type,t.arguments),1305183839:t=>OC.FromTape(t.ID,t.type,t.arguments),3812236995:t=>_C.FromTape(t.ID,t.type,t.arguments),1412071761:t=>DC.FromTape(t.ID,t.type,t.arguments),710998568:t=>FC.FromTape(t.ID,t.type,t.arguments),2706606064:t=>MC.FromTape(t.ID,t.type,t.arguments),3893378262:t=>PC.FromTape(t.ID,t.type,t.arguments),463610769:t=>NC.FromTape(t.ID,t.type,t.arguments),2481509218:t=>LC.FromTape(t.ID,t.type,t.arguments),451544542:t=>kC.FromTape(t.ID,t.type,t.arguments),4015995234:t=>UC.FromTape(t.ID,t.type,t.arguments),1404847402:t=>HC.FromTape(t.ID,t.type,t.arguments),3112655638:t=>BC.FromTape(t.ID,t.type,t.arguments),331165859:t=>GC.FromTape(t.ID,t.type,t.arguments),4252922144:t=>jC.FromTape(t.ID,t.type,t.arguments),1039846685:t=>zC.FromTape(t.ID,t.type,t.arguments),338393293:t=>VC.FromTape(t.ID,t.type,t.arguments),682877961:t=>WC.FromTape(t.ID,t.type,t.arguments),3544373492:t=>YC.FromTape(t.ID,t.type,t.arguments),2515109513:t=>XC.FromTape(t.ID,t.type,t.arguments),1179482911:t=>qC.FromTape(t.ID,t.type,t.arguments),2273995522:t=>KC.FromTape(t.ID,t.type,t.arguments),1004757350:t=>JC.FromTape(t.ID,t.type,t.arguments),4243806635:t=>$C.FromTape(t.ID,t.type,t.arguments),214636428:t=>ZC.FromTape(t.ID,t.type,t.arguments),2445595289:t=>QC.FromTape(t.ID,t.type,t.arguments),2757150158:t=>tO.FromTape(t.ID,t.type,t.arguments),3136571912:t=>eO.FromTape(t.ID,t.type,t.arguments),1807405624:t=>sO.FromTape(t.ID,t.type,t.arguments),2162789131:t=>rO.FromTape(t.ID,t.type,t.arguments),385403989:t=>iO.FromTape(t.ID,t.type,t.arguments),3478079324:t=>nO.FromTape(t.ID,t.type,t.arguments),1252848954:t=>oO.FromTape(t.ID,t.type,t.arguments),1595516126:t=>aO.FromTape(t.ID,t.type,t.arguments),609421318:t=>hO.FromTape(t.ID,t.type,t.arguments),2668620305:t=>cO.FromTape(t.ID,t.type,t.arguments),2473145415:t=>lO.FromTape(t.ID,t.type,t.arguments),1973038258:t=>uO.FromTape(t.ID,t.type,t.arguments),1597423693:t=>pO.FromTape(t.ID,t.type,t.arguments),1190533807:t=>dO.FromTape(t.ID,t.type,t.arguments),2525727697:t=>mO.FromTape(t.ID,t.type,t.arguments),3408363356:t=>fO.FromTape(t.ID,t.type,t.arguments),530289379:t=>gO.FromTape(t.ID,t.type,t.arguments),1621171031:t=>yO.FromTape(t.ID,t.type,t.arguments),2082059205:t=>TO.FromTape(t.ID,t.type,t.arguments),734778138:t=>vO.FromTape(t.ID,t.type,t.arguments),1235345126:t=>bO.FromTape(t.ID,t.type,t.arguments),3689010777:t=>wO.FromTape(t.ID,t.type,t.arguments),2986769608:t=>xO.FromTape(t.ID,t.type,t.arguments),3657597509:t=>IO.FromTape(t.ID,t.type,t.arguments),1975003073:t=>EO.FromTape(t.ID,t.type,t.arguments),3979015343:t=>SO.FromTape(t.ID,t.type,t.arguments),2218152070:t=>AO.FromTape(t.ID,t.type,t.arguments),603775116:t=>RO.FromTape(t.ID,t.type,t.arguments),2830218821:t=>CO.FromTape(t.ID,t.type,t.arguments),3958052878:t=>OO.FromTape(t.ID,t.type,t.arguments),3049322572:t=>_O.FromTape(t.ID,t.type,t.arguments),148013059:t=>DO.FromTape(t.ID,t.type,t.arguments),4095615324:t=>FO.FromTape(t.ID,t.type,t.arguments),2233826070:t=>MO.FromTape(t.ID,t.type,t.arguments),2513912981:t=>PO.FromTape(t.ID,t.type,t.arguments),699246055:t=>NO.FromTape(t.ID,t.type,t.arguments),2028607225:t=>LO.FromTape(t.ID,t.type,t.arguments),3101698114:t=>kO.FromTape(t.ID,t.type,t.arguments),2809605785:t=>UO.FromTape(t.ID,t.type,t.arguments),4124788165:t=>HO.FromTape(t.ID,t.type,t.arguments),2934153892:t=>BO.FromTape(t.ID,t.type,t.arguments),1300840506:t=>GO.FromTape(t.ID,t.type,t.arguments),3303107099:t=>jO.FromTape(t.ID,t.type,t.arguments),1607154358:t=>zO.FromTape(t.ID,t.type,t.arguments),1878645084:t=>VO.FromTape(t.ID,t.type,t.arguments),846575682:t=>WO.FromTape(t.ID,t.type,t.arguments),1351298697:t=>YO.FromTape(t.ID,t.type,t.arguments),626085974:t=>XO.FromTape(t.ID,t.type,t.arguments),2247615214:t=>qO.FromTape(t.ID,t.type,t.arguments),1260650574:t=>KO.FromTape(t.ID,t.type,t.arguments),1096409881:t=>JO.FromTape(t.ID,t.type,t.arguments),230924584:t=>$O.FromTape(t.ID,t.type,t.arguments),1162798199:t=>ZO.FromTape(t.ID,t.type,t.arguments),2315554128:t=>QO.FromTape(t.ID,t.type,t.arguments),2254336722:t=>t_.FromTape(t.ID,t.type,t.arguments),413509423:t=>e_.FromTape(t.ID,t.type,t.arguments),1580310250:t=>s_.FromTape(t.ID,t.type,t.arguments),3071757647:t=>r_.FromTape(t.ID,t.type,t.arguments),985171141:t=>i_.FromTape(t.ID,t.type,t.arguments),2043862942:t=>n_.FromTape(t.ID,t.type,t.arguments),531007025:t=>o_.FromTape(t.ID,t.type,t.arguments),812556717:t=>a_.FromTape(t.ID,t.type,t.arguments),5716631:t=>h_.FromTape(t.ID,t.type,t.arguments),3473067441:t=>c_.FromTape(t.ID,t.type,t.arguments),1549132990:t=>l_.FromTape(t.ID,t.type,t.arguments),2771591690:t=>u_.FromTape(t.ID,t.type,t.arguments),3206491090:t=>p_.FromTape(t.ID,t.type,t.arguments),912023232:t=>d_.FromTape(t.ID,t.type,t.arguments),3824725483:t=>m_.FromTape(t.ID,t.type,t.arguments),2347447852:t=>f_.FromTape(t.ID,t.type,t.arguments),3081323446:t=>g_.FromTape(t.ID,t.type,t.arguments),3663046924:t=>y_.FromTape(t.ID,t.type,t.arguments),2281632017:t=>T_.FromTape(t.ID,t.type,t.arguments),2415094496:t=>v_.FromTape(t.ID,t.type,t.arguments),2387106220:t=>b_.FromTape(t.ID,t.type,t.arguments),901063453:t=>w_.FromTape(t.ID,t.type,t.arguments),4282788508:t=>x_.FromTape(t.ID,t.type,t.arguments),3124975700:t=>I_.FromTape(t.ID,t.type,t.arguments),1447204868:t=>E_.FromTape(t.ID,t.type,t.arguments),1983826977:t=>S_.FromTape(t.ID,t.type,t.arguments),2636378356:t=>A_.FromTape(t.ID,t.type,t.arguments),1640371178:t=>R_.FromTape(t.ID,t.type,t.arguments),280115917:t=>C_.FromTape(t.ID,t.type,t.arguments),1742049831:t=>O_.FromTape(t.ID,t.type,t.arguments),2552916305:t=>__.FromTape(t.ID,t.type,t.arguments),1210645708:t=>D_.FromTape(t.ID,t.type,t.arguments),3611470254:t=>F_.FromTape(t.ID,t.type,t.arguments),1199560280:t=>M_.FromTape(t.ID,t.type,t.arguments),3101149627:t=>P_.FromTape(t.ID,t.type,t.arguments),581633288:t=>N_.FromTape(t.ID,t.type,t.arguments),1377556343:t=>L_.FromTape(t.ID,t.type,t.arguments),1735638870:t=>k_.FromTape(t.ID,t.type,t.arguments),1935646853:t=>U_.FromTape(t.ID,t.type,t.arguments),3825984169:t=>H_.FromTape(t.ID,t.type,t.arguments),1692211062:t=>B_.FromTape(t.ID,t.type,t.arguments),2595432518:t=>G_.FromTape(t.ID,t.type,t.arguments),1620046519:t=>j_.FromTape(t.ID,t.type,t.arguments),2097647324:t=>z_.FromTape(t.ID,t.type,t.arguments),2715220739:t=>V_.FromTape(t.ID,t.type,t.arguments),2916149573:t=>W_.FromTape(t.ID,t.type,t.arguments),1229763772:t=>Y_.FromTape(t.ID,t.type,t.arguments),3593883385:t=>X_.FromTape(t.ID,t.type,t.arguments),3026737570:t=>q_.FromTape(t.ID,t.type,t.arguments),1600972822:t=>K_.FromTape(t.ID,t.type,t.arguments),1628702193:t=>J_.FromTape(t.ID,t.type,t.arguments),3736923433:t=>$_.FromTape(t.ID,t.type,t.arguments),2347495698:t=>Z_.FromTape(t.ID,t.type,t.arguments),3698973494:t=>Q_.FromTape(t.ID,t.type,t.arguments),427810014:t=>tD.FromTape(t.ID,t.type,t.arguments),180925521:t=>eD.FromTape(t.ID,t.type,t.arguments),630975310:t=>sD.FromTape(t.ID,t.type,t.arguments),3179687236:t=>rD.FromTape(t.ID,t.type,t.arguments),4292641817:t=>iD.FromTape(t.ID,t.type,t.arguments),1911125066:t=>nD.FromTape(t.ID,t.type,t.arguments),4207607924:t=>oD.FromTape(t.ID,t.type,t.arguments),728799441:t=>aD.FromTape(t.ID,t.type,t.arguments),1417489154:t=>hD.FromTape(t.ID,t.type,t.arguments),2799835756:t=>cD.FromTape(t.ID,t.type,t.arguments),2759199220:t=>lD.FromTape(t.ID,t.type,t.arguments),1907098498:t=>uD.FromTape(t.ID,t.type,t.arguments),1530820697:t=>pD.FromTape(t.ID,t.type,t.arguments),3956297820:t=>dD.FromTape(t.ID,t.type,t.arguments),2391383451:t=>mD.FromTape(t.ID,t.type,t.arguments),3313531582:t=>fD.FromTape(t.ID,t.type,t.arguments),2769231204:t=>gD.FromTape(t.ID,t.type,t.arguments),891718957:t=>yD.FromTape(t.ID,t.type,t.arguments),926996030:t=>TD.FromTape(t.ID,t.type,t.arguments),2391406946:t=>vD.FromTape(t.ID,t.type,t.arguments),4156078855:t=>bD.FromTape(t.ID,t.type,t.arguments),3512223829:t=>wD.FromTape(t.ID,t.type,t.arguments),1898987631:t=>xD.FromTape(t.ID,t.type,t.arguments),4237592921:t=>ID.FromTape(t.ID,t.type,t.arguments),1133259667:t=>ED.FromTape(t.ID,t.type,t.arguments),3304561284:t=>SD.FromTape(t.ID,t.type,t.arguments),336235671:t=>AD.FromTape(t.ID,t.type,t.arguments),512836454:t=>RD.FromTape(t.ID,t.type,t.arguments),486154966:t=>CD.FromTape(t.ID,t.type,t.arguments),1299126871:t=>OD.FromTape(t.ID,t.type,t.arguments),4009809668:t=>_D.FromTape(t.ID,t.type,t.arguments),4088093105:t=>DD.FromTape(t.ID,t.type,t.arguments),1028945134:t=>FD.FromTape(t.ID,t.type,t.arguments),4218914973:t=>MD.FromTape(t.ID,t.type,t.arguments),3342526732:t=>PD.FromTape(t.ID,t.type,t.arguments),1236880293:t=>ND.FromTape(t.ID,t.type,t.arguments),2543172580:t=>LD.FromTape(t.ID,t.type,t.arguments),1033361043:t=>kD.FromTape(t.ID,t.type,t.arguments)},Fg=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.Identification=a,this.PredefinedType=h,this.Status=c,this.LongDescription=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new Fg(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.PredefinedType),t.push(this.Status),t.push(this.LongDescription),t}},Mg=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.TheActor=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new Mg(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.TheActor),t}},Pg=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.Role=s,this.UserDefinedRole=r,this.Description=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new Pg(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.Role),t.push(this.UserDefinedRole),t.push(this.Description),t}},Ng=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new Ng(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Lg=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new Lg(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},kg=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.Purpose=s,this.Description=r,this.UserDefinedPurpose=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new kg(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.Purpose),t.push(this.Description),t.push(this.UserDefinedPurpose),t}},Ug=class{constructor(t,e,s){this.expressID=t,this.type=e,this.Outer=s}static FromTape(t,e,s){let r=0,i=s[r++];return new Ug(t,e,i)}ToTape(){let t=[];return t.push(this.Outer),t}},Hg=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.Outer=s,this.Voids=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new Hg(t,e,i,n)}ToTape(){let t=[];return t.push(this.Outer),t.push(this.Voids),t}},Bg=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.Bounds=s,this.FaceSurface=r,this.SameSense=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new Bg(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.Bounds),t.push(this.FaceSurface),t.push(this.SameSense),t}},Gg=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new Gg(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},jg=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new jg(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},zg=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new zg(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Vg=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new Vg(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Wg=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new Wg(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Yg=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new Yg(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Xg=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new Xg(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},qg=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new qg(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Kg=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Axis=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new Kg(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Axis),t.push(this.PredefinedType),t}},Jg=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.StartDistAlong=s,this.Segments=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new Jg(t,e,i,n)}ToTape(){let t=[];return t.push(this.StartDistAlong),t.push(this.Segments),t}},$g=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.TangentialContinuity=s,this.StartTag=r,this.EndTag=i,this.CurveGeometry=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new $g(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.TangentialContinuity),t.push(this.StartTag),t.push(this.EndTag),t.push(this.CurveGeometry),t}},Zg=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.TangentialContinuity=s,this.StartTag=r,this.EndTag=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new Zg(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.TangentialContinuity),t.push(this.StartTag),t.push(this.EndTag),t}},Qg=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.TangentialContinuity=s,this.StartTag=r,this.EndTag=i,this.StartDistAlong=n,this.HorizontalLength=o,this.StartHeight=a,this.StartGradient=h,this.Radius=c,this.IsConvex=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new Qg(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.TangentialContinuity),t.push(this.StartTag),t.push(this.EndTag),t.push(this.StartDistAlong),t.push(this.HorizontalLength),t.push(this.StartHeight),t.push(this.StartGradient),t.push(this.Radius),t.push(this.IsConvex),t}},ty=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.TangentialContinuity=s,this.StartTag=r,this.EndTag=i,this.StartDistAlong=n,this.HorizontalLength=o,this.StartHeight=a,this.StartGradient=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new ty(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.TangentialContinuity),t.push(this.StartTag),t.push(this.EndTag),t.push(this.StartDistAlong),t.push(this.HorizontalLength),t.push(this.StartHeight),t.push(this.StartGradient),t}},ey=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.TangentialContinuity=s,this.StartTag=r,this.EndTag=i,this.StartDistAlong=n,this.HorizontalLength=o,this.StartHeight=a,this.StartGradient=h,this.ParabolaConstant=c,this.IsConvex=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new ey(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.TangentialContinuity),t.push(this.StartTag),t.push(this.EndTag),t.push(this.StartDistAlong),t.push(this.HorizontalLength),t.push(this.StartHeight),t.push(this.StartGradient),t.push(this.ParabolaConstant),t.push(this.IsConvex),t}},sy=class{constructor(t,e,s){this.expressID=t,this.type=e,this.Segments=s}static FromTape(t,e,s){let r=0,i=s[r++];return new sy(t,e,i)}ToTape(){let t=[];return t.push(this.Segments),t}},ry=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.TangentialContinuity=s,this.StartTag=r,this.EndTag=i,this.StartDistAlong=n,this.HorizontalLength=o,this.StartHeight=a,this.StartGradient=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new ry(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.TangentialContinuity),t.push(this.StartTag),t.push(this.EndTag),t.push(this.StartDistAlong),t.push(this.HorizontalLength),t.push(this.StartHeight),t.push(this.StartGradient),t}},iy=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.Horizontal=s,this.Vertical=r,this.Tag=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new iy(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.Horizontal),t.push(this.Vertical),t.push(this.Tag),t}},ny=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new ny(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t}},oy=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.OuterBoundary=s,this.InnerBoundaries=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new oy(t,e,i,n)}ToTape(){let t=[];return t.push(this.OuterBoundary),t.push(this.InnerBoundaries),t}},ay=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.ApplicationDeveloper=s,this.Version=r,this.ApplicationFullName=i,this.ApplicationIdentifier=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new ay(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.ApplicationDeveloper),t.push(this.Version),t.push(this.ApplicationFullName),t.push(this.ApplicationIdentifier),t}},hy=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.AppliedValue=i,this.UnitBasis=n,this.ApplicableDate=o,this.FixedUntilDate=a,this.Category=h,this.Condition=c,this.ArithmeticOperator=l,this.Components=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new hy(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.AppliedValue),t.push(this.UnitBasis),t.push(this.ApplicableDate),t.push(this.FixedUntilDate),t.push(this.Category),t.push(this.Condition),t.push(this.ArithmeticOperator),t.push(this.Components),t}},cy=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.Identifier=s,this.Name=r,this.Description=i,this.TimeOfApproval=n,this.Status=o,this.Level=a,this.Qualifier=h,this.RequestingApproval=c,this.GivingApproval=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new cy(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.Identifier),t.push(this.Name),t.push(this.Description),t.push(this.TimeOfApproval),t.push(this.Status),t.push(this.Level),t.push(this.Qualifier),t.push(this.RequestingApproval),t.push(this.GivingApproval),t}},ly=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.RelatingApproval=i,this.RelatedApprovals=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new ly(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.RelatingApproval),t.push(this.RelatedApprovals),t}},uy=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.ProfileType=s,this.ProfileName=r,this.OuterCurve=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new uy(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.OuterCurve),t}},py=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.ProfileType=s,this.ProfileName=r,this.Curve=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new py(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Curve),t}},dy=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.ProfileType=s,this.ProfileName=r,this.OuterCurve=i,this.InnerCurves=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new dy(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.OuterCurve),t.push(this.InnerCurves),t}},my=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d,m,f){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.Identification=a,this.OriginalValue=h,this.CurrentValue=c,this.TotalReplacementCost=l,this.Owner=u,this.User=p,this.ResponsiblePerson=d,this.IncorporationDate=m,this.DepreciatedValue=f}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++],g=s[r++],y=s[r++];return new my(t,e,i,n,o,a,h,c,l,u,p,d,m,f,g,y)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.OriginalValue),t.push(this.CurrentValue),t.push(this.TotalReplacementCost),t.push(this.Owner),t.push(this.User),t.push(this.ResponsiblePerson),t.push(this.IncorporationDate),t.push(this.DepreciatedValue),t}},fy=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d,m,f,g){this.expressID=t,this.type=e,this.ProfileType=s,this.ProfileName=r,this.Position=i,this.BottomFlangeWidth=n,this.OverallDepth=o,this.WebThickness=a,this.BottomFlangeThickness=h,this.BottomFlangeFilletRadius=c,this.TopFlangeWidth=l,this.TopFlangeThickness=u,this.TopFlangeFilletRadius=p,this.BottomFlangeEdgeRadius=d,this.BottomFlangeSlope=m,this.TopFlangeEdgeRadius=f,this.TopFlangeSlope=g}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++],g=s[r++],y=s[r++],T=s[r++];return new fy(t,e,i,n,o,a,h,c,l,u,p,d,m,f,g,y,T)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t.push(this.BottomFlangeWidth),t.push(this.OverallDepth),t.push(this.WebThickness),t.push(this.BottomFlangeThickness),t.push(this.BottomFlangeFilletRadius),t.push(this.TopFlangeWidth),t.push(this.TopFlangeThickness),t.push(this.TopFlangeFilletRadius),t.push(this.BottomFlangeEdgeRadius),t.push(this.BottomFlangeSlope),t.push(this.TopFlangeEdgeRadius),t.push(this.TopFlangeSlope),t}},gy=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new gy(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},yy=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new yy(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Ty=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.Location=s,this.Axis=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new Ty(t,e,i,n)}ToTape(){let t=[];return t.push(this.Location),t.push(this.Axis),t}},vy=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.Location=s,this.RefDirection=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new vy(t,e,i,n)}ToTape(){let t=[];return t.push(this.Location),t.push(this.RefDirection),t}},by=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.Location=s,this.Axis=r,this.RefDirection=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new by(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.Location),t.push(this.Axis),t.push(this.RefDirection),t}},wy=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.Degree=s,this.ControlPointsList=r,this.CurveForm=i,this.ClosedCurve=n,this.SelfIntersect=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new wy(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.Degree),t.push(this.ControlPointsList),t.push(this.CurveForm),t.push(this.ClosedCurve),t.push(this.SelfIntersect),t}},xy=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.Degree=s,this.ControlPointsList=r,this.CurveForm=i,this.ClosedCurve=n,this.SelfIntersect=o,this.KnotMultiplicities=a,this.Knots=h,this.KnotSpec=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new xy(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.Degree),t.push(this.ControlPointsList),t.push(this.CurveForm),t.push(this.ClosedCurve),t.push(this.SelfIntersect),t.push(this.KnotMultiplicities),t.push(this.Knots),t.push(this.KnotSpec),t}},Iy=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.UDegree=s,this.VDegree=r,this.ControlPointsList=i,this.SurfaceForm=n,this.UClosed=o,this.VClosed=a,this.SelfIntersect=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new Iy(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.UDegree),t.push(this.VDegree),t.push(this.ControlPointsList),t.push(this.SurfaceForm),t.push(this.UClosed),t.push(this.VClosed),t.push(this.SelfIntersect),t}},Ey=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d){this.expressID=t,this.type=e,this.UDegree=s,this.VDegree=r,this.ControlPointsList=i,this.SurfaceForm=n,this.UClosed=o,this.VClosed=a,this.SelfIntersect=h,this.UMultiplicities=c,this.VMultiplicities=l,this.UKnots=u,this.VKnots=p,this.KnotSpec=d}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++];return new Ey(t,e,i,n,o,a,h,c,l,u,p,d,m,f)}ToTape(){let t=[];return t.push(this.UDegree),t.push(this.VDegree),t.push(this.ControlPointsList),t.push(this.SurfaceForm),t.push(this.UClosed),t.push(this.VClosed),t.push(this.SelfIntersect),t.push(this.UMultiplicities),t.push(this.VMultiplicities),t.push(this.UKnots),t.push(this.VKnots),t.push(this.KnotSpec),t}},Sy=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new Sy(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Ay=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new Ay(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Ry=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new Ry(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Cy=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new Cy(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Oy=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new Oy(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},_y=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.RepeatS=s,this.RepeatT=r,this.Mode=i,this.TextureTransform=n,this.Parameter=o,this.RasterFormat=a,this.RasterCode=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new _y(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.RepeatS),t.push(this.RepeatT),t.push(this.Mode),t.push(this.TextureTransform),t.push(this.Parameter),t.push(this.RasterFormat),t.push(this.RasterCode),t}},Dy=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.Position=s,this.XLength=r,this.YLength=i,this.ZLength=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new Dy(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.Position),t.push(this.XLength),t.push(this.YLength),t.push(this.ZLength),t}},Fy=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new Fy(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},My=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new My(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Py=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.Operator=s,this.FirstOperand=r,this.SecondOperand=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new Py(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.Operator),t.push(this.FirstOperand),t.push(this.SecondOperand),t}},Ny=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.Operator=s,this.FirstOperand=r,this.SecondOperand=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new Ny(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.Operator),t.push(this.FirstOperand),t.push(this.SecondOperand),t}},Ly=class{constructor(t,e,s){this.expressID=t,this.type=e,this.Name=s}static FromTape(t,e,s){let r=0,i=s[r++];return new Ly(t,e,i)}ToTape(){let t=[];return t.push(this.Name),t}},ky=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.Segments=s,this.SelfIntersect=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new ky(t,e,i,n)}ToTape(){let t=[];return t.push(this.Segments),t.push(this.SelfIntersect),t}},Uy=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.Name=s,this.TranslationalStiffnessByLengthX=r,this.TranslationalStiffnessByLengthY=i,this.TranslationalStiffnessByLengthZ=n,this.RotationalStiffnessByLengthX=o,this.RotationalStiffnessByLengthY=a,this.RotationalStiffnessByLengthZ=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new Uy(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.Name),t.push(this.TranslationalStiffnessByLengthX),t.push(this.TranslationalStiffnessByLengthY),t.push(this.TranslationalStiffnessByLengthZ),t.push(this.RotationalStiffnessByLengthX),t.push(this.RotationalStiffnessByLengthY),t.push(this.RotationalStiffnessByLengthZ),t}},Hy=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.Name=s,this.TranslationalStiffnessByAreaX=r,this.TranslationalStiffnessByAreaY=i,this.TranslationalStiffnessByAreaZ=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new Hy(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.TranslationalStiffnessByAreaX),t.push(this.TranslationalStiffnessByAreaY),t.push(this.TranslationalStiffnessByAreaZ),t}},By=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.Name=s,this.TranslationalStiffnessX=r,this.TranslationalStiffnessY=i,this.TranslationalStiffnessZ=n,this.RotationalStiffnessX=o,this.RotationalStiffnessY=a,this.RotationalStiffnessZ=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new By(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.Name),t.push(this.TranslationalStiffnessX),t.push(this.TranslationalStiffnessY),t.push(this.TranslationalStiffnessZ),t.push(this.RotationalStiffnessX),t.push(this.RotationalStiffnessY),t.push(this.RotationalStiffnessZ),t}},Gy=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.Name=s,this.TranslationalStiffnessX=r,this.TranslationalStiffnessY=i,this.TranslationalStiffnessZ=n,this.RotationalStiffnessX=o,this.RotationalStiffnessY=a,this.RotationalStiffnessZ=h,this.WarpingStiffness=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new Gy(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.Name),t.push(this.TranslationalStiffnessX),t.push(this.TranslationalStiffnessY),t.push(this.TranslationalStiffnessZ),t.push(this.RotationalStiffnessX),t.push(this.RotationalStiffnessY),t.push(this.RotationalStiffnessZ),t.push(this.WarpingStiffness),t}},jy=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,s){return new jy(t,e)}ToTape(){return[]}},zy=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,s){return new zy(t,e)}ToTape(){return[]}},Vy=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.Corner=s,this.XDim=r,this.YDim=i,this.ZDim=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new Vy(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.Corner),t.push(this.XDim),t.push(this.YDim),t.push(this.ZDim),t}},Wy=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.BaseSurface=s,this.AgreementFlag=r,this.Enclosure=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new Wy(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.BaseSurface),t.push(this.AgreementFlag),t.push(this.Enclosure),t}},Yy=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.LongName=c,this.CompositionType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new Yy(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.LongName),t.push(this.CompositionType),t.push(this.PredefinedType),t}},Xy=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.LongName=c,this.CompositionType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new Xy(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.LongName),t.push(this.CompositionType),t.push(this.PredefinedType),t}},qy=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.LongName=c,this.CompositionType=l,this.ElevationOfRefHeight=u,this.ElevationOfTerrain=p,this.BuildingAddress=d}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++];return new qy(t,e,i,n,o,a,h,c,l,u,p,d,m,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.LongName),t.push(this.CompositionType),t.push(this.ElevationOfRefHeight),t.push(this.ElevationOfTerrain),t.push(this.BuildingAddress),t}},Ky=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new Ky(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},Jy=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new Jy(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},$y=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new $y(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Zy=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new Zy(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Qy=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new Qy(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},tT=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new tT(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},eT=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.LongName=c,this.CompositionType=l,this.Elevation=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new eT(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.LongName),t.push(this.CompositionType),t.push(this.Elevation),t}},sT=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.PredefinedType=a,this.LongName=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new sT(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.PredefinedType),t.push(this.LongName),t}},rT=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new rT(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},iT=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new iT(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},nT=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.ProfileType=s,this.ProfileName=r,this.Position=i,this.Depth=n,this.Width=o,this.WallThickness=a,this.Girth=h,this.InternalFilletRadius=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new nT(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t.push(this.Depth),t.push(this.Width),t.push(this.WallThickness),t.push(this.Girth),t.push(this.InternalFilletRadius),t}},oT=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new oT(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},aT=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new aT(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},hT=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new hT(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},cT=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new cT(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},lT=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new lT(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},uT=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new uT(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},pT=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new pT(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},dT=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new dT(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},mT=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new mT(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},fT=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new fT(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},gT=class{constructor(t,e,s){this.expressID=t,this.type=e,this.Coordinates=s}static FromTape(t,e,s){let r=0,i=s[r++];return new gT(t,e,i)}ToTape(){let t=[];return t.push(this.Coordinates),t}},yT=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,s){return new yT(t,e)}ToTape(){return[]}},TT=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.CoordList=s,this.TagList=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new TT(t,e,i,n)}ToTape(){let t=[];return t.push(this.CoordList),t.push(this.TagList),t}},vT=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.CoordList=s,this.TagList=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new vT(t,e,i,n)}ToTape(){let t=[];return t.push(this.CoordList),t.push(this.TagList),t}},bT=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.Axis1=s,this.Axis2=r,this.LocalOrigin=i,this.Scale=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new bT(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.Axis1),t.push(this.Axis2),t.push(this.LocalOrigin),t.push(this.Scale),t}},wT=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.Axis1=s,this.Axis2=r,this.LocalOrigin=i,this.Scale=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new wT(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.Axis1),t.push(this.Axis2),t.push(this.LocalOrigin),t.push(this.Scale),t}},xT=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.Axis1=s,this.Axis2=r,this.LocalOrigin=i,this.Scale=n,this.Scale2=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new xT(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.Axis1),t.push(this.Axis2),t.push(this.LocalOrigin),t.push(this.Scale),t.push(this.Scale2),t}},IT=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.Axis1=s,this.Axis2=r,this.LocalOrigin=i,this.Scale=n,this.Axis3=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new IT(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.Axis1),t.push(this.Axis2),t.push(this.LocalOrigin),t.push(this.Scale),t.push(this.Axis3),t}},ET=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.Axis1=s,this.Axis2=r,this.LocalOrigin=i,this.Scale=n,this.Axis3=o,this.Scale2=a,this.Scale3=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new ET(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.Axis1),t.push(this.Axis2),t.push(this.LocalOrigin),t.push(this.Scale),t.push(this.Axis3),t.push(this.Scale2),t.push(this.Scale3),t}},ST=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.ProfileType=s,this.ProfileName=r,this.Curve=i,this.Thickness=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new ST(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Curve),t.push(this.Thickness),t}},AT=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new AT(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},RT=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new RT(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},CT=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new CT(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},OT=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new OT(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},_T=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.Position=s,this.Radius=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new _T(t,e,i,n)}ToTape(){let t=[];return t.push(this.Position),t.push(this.Radius),t}},DT=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.ProfileType=s,this.ProfileName=r,this.Position=i,this.Radius=n,this.WallThickness=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new DT(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t.push(this.Radius),t.push(this.WallThickness),t}},FT=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.ProfileType=s,this.ProfileName=r,this.Position=i,this.Radius=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new FT(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t.push(this.Radius),t}},MT=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.StartPoint=s,this.StartDirection=r,this.SegmentLength=i,this.Radius=n,this.IsCCW=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new MT(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.StartPoint),t.push(this.StartDirection),t.push(this.SegmentLength),t.push(this.Radius),t.push(this.IsCCW),t}},PT=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new PT(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},NT=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new NT(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},LT=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.Source=s,this.Edition=r,this.EditionDate=i,this.Name=n,this.Description=o,this.Location=a,this.ReferenceTokens=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new LT(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.Source),t.push(this.Edition),t.push(this.EditionDate),t.push(this.Name),t.push(this.Description),t.push(this.Location),t.push(this.ReferenceTokens),t}},kT=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.Location=s,this.Identification=r,this.Name=i,this.ReferencedSource=n,this.Description=o,this.Sort=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new kT(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.Location),t.push(this.Identification),t.push(this.Name),t.push(this.ReferencedSource),t.push(this.Description),t.push(this.Sort),t}},UT=class{constructor(t,e,s){this.expressID=t,this.type=e,this.CfsFaces=s}static FromTape(t,e,s){let r=0,i=s[r++];return new UT(t,e,i)}ToTape(){let t=[];return t.push(this.CfsFaces),t}},HT=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new HT(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},BT=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new BT(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},GT=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.Name=s,this.Red=r,this.Green=i,this.Blue=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new GT(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Red),t.push(this.Green),t.push(this.Blue),t}},jT=class{constructor(t,e,s){this.expressID=t,this.type=e,this.ColourList=s}static FromTape(t,e,s){let r=0,i=s[r++];return new jT(t,e,i)}ToTape(){let t=[];return t.push(this.ColourList),t}},zT=class{constructor(t,e,s){this.expressID=t,this.type=e,this.Name=s}static FromTape(t,e,s){let r=0,i=s[r++];return new zT(t,e,i)}ToTape(){let t=[];return t.push(this.Name),t}},VT=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new VT(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},WT=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new WT(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},YT=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new YT(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},XT=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new XT(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},qT=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new qT(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},KT=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.UsageName=i,this.HasProperties=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new KT(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.UsageName),t.push(this.HasProperties),t}},JT=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.UsageName=o,this.TemplateType=a,this.HasPropertyTemplates=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new JT(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.UsageName),t.push(this.TemplateType),t.push(this.HasPropertyTemplates),t}},$T=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.Segments=s,this.SelfIntersect=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new $T(t,e,i,n)}ToTape(){let t=[];return t.push(this.Segments),t.push(this.SelfIntersect),t}},ZT=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.Segments=s,this.SelfIntersect=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new ZT(t,e,i,n)}ToTape(){let t=[];return t.push(this.Segments),t.push(this.SelfIntersect),t}},QT=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.Transition=s,this.SameSense=r,this.ParentCurve=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new QT(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.Transition),t.push(this.SameSense),t.push(this.ParentCurve),t}},tv=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.ProfileType=s,this.ProfileName=r,this.Profiles=i,this.Label=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new tv(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Profiles),t.push(this.Label),t}},ev=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new ev(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},sv=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new sv(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},rv=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new rv(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},iv=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new iv(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},nv=class{constructor(t,e,s){this.expressID=t,this.type=e,this.Position=s}static FromTape(t,e,s){let r=0,i=s[r++];return new nv(t,e,i)}ToTape(){let t=[];return t.push(this.Position),t}},ov=class{constructor(t,e,s){this.expressID=t,this.type=e,this.CfsFaces=s}static FromTape(t,e,s){let r=0,i=s[r++];return new ov(t,e,i)}ToTape(){let t=[];return t.push(this.CfsFaces),t}},av=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.CurveOnRelatingElement=s,this.CurveOnRelatedElement=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new av(t,e,i,n)}ToTape(){let t=[];return t.push(this.CurveOnRelatingElement),t.push(this.CurveOnRelatedElement),t}},hv=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,s){return new hv(t,e)}ToTape(){return[]}},cv=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.PointOnRelatingElement=s,this.PointOnRelatedElement=r,this.EccentricityInX=i,this.EccentricityInY=n,this.EccentricityInZ=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new cv(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.PointOnRelatingElement),t.push(this.PointOnRelatedElement),t.push(this.EccentricityInX),t.push(this.EccentricityInY),t.push(this.EccentricityInZ),t}},lv=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.PointOnRelatingElement=s,this.PointOnRelatedElement=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new lv(t,e,i,n)}ToTape(){let t=[];return t.push(this.PointOnRelatingElement),t.push(this.PointOnRelatedElement),t}},uv=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.SurfaceOnRelatingElement=s,this.SurfaceOnRelatedElement=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new uv(t,e,i,n)}ToTape(){let t=[];return t.push(this.SurfaceOnRelatingElement),t.push(this.SurfaceOnRelatedElement),t}},pv=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.VolumeOnRelatingElement=s,this.VolumeOnRelatedElement=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new pv(t,e,i,n)}ToTape(){let t=[];return t.push(this.VolumeOnRelatingElement),t.push(this.VolumeOnRelatedElement),t}},dv=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.ConstraintGrade=i,this.ConstraintSource=n,this.CreatingActor=o,this.CreationTime=a,this.UserDefinedGrade=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new dv(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.ConstraintGrade),t.push(this.ConstraintSource),t.push(this.CreatingActor),t.push(this.CreationTime),t.push(this.UserDefinedGrade),t}},mv=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.Identification=a,this.LongDescription=h,this.Usage=c,this.BaseCosts=l,this.BaseQuantity=u,this.PredefinedType=p}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++];return new mv(t,e,i,n,o,a,h,c,l,u,p,d,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.LongDescription),t.push(this.Usage),t.push(this.BaseCosts),t.push(this.BaseQuantity),t.push(this.PredefinedType),t}},fv=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.Identification=h,this.LongDescription=c,this.ResourceType=l,this.BaseCosts=u,this.BaseQuantity=p,this.PredefinedType=d}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++];return new fv(t,e,i,n,o,a,h,c,l,u,p,d,m,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.Identification),t.push(this.LongDescription),t.push(this.ResourceType),t.push(this.BaseCosts),t.push(this.BaseQuantity),t.push(this.PredefinedType),t}},gv=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.Identification=a,this.LongDescription=h,this.Usage=c,this.BaseCosts=l,this.BaseQuantity=u,this.PredefinedType=p}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++];return new gv(t,e,i,n,o,a,h,c,l,u,p,d,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.LongDescription),t.push(this.Usage),t.push(this.BaseCosts),t.push(this.BaseQuantity),t.push(this.PredefinedType),t}},yv=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.Identification=h,this.LongDescription=c,this.ResourceType=l,this.BaseCosts=u,this.BaseQuantity=p,this.PredefinedType=d}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++];return new yv(t,e,i,n,o,a,h,c,l,u,p,d,m,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.Identification),t.push(this.LongDescription),t.push(this.ResourceType),t.push(this.BaseCosts),t.push(this.BaseQuantity),t.push(this.PredefinedType),t}},Tv=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.Identification=a,this.LongDescription=h,this.Usage=c,this.BaseCosts=l,this.BaseQuantity=u,this.PredefinedType=p}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++];return new Tv(t,e,i,n,o,a,h,c,l,u,p,d,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.LongDescription),t.push(this.Usage),t.push(this.BaseCosts),t.push(this.BaseQuantity),t.push(this.PredefinedType),t}},vv=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.Identification=h,this.LongDescription=c,this.ResourceType=l,this.BaseCosts=u,this.BaseQuantity=p,this.PredefinedType=d}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++];return new vv(t,e,i,n,o,a,h,c,l,u,p,d,m,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.Identification),t.push(this.LongDescription),t.push(this.ResourceType),t.push(this.BaseCosts),t.push(this.BaseQuantity),t.push(this.PredefinedType),t}},bv=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.Identification=a,this.LongDescription=h,this.Usage=c,this.BaseCosts=l,this.BaseQuantity=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new bv(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.LongDescription),t.push(this.Usage),t.push(this.BaseCosts),t.push(this.BaseQuantity),t}},wv=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.Identification=h,this.LongDescription=c,this.ResourceType=l,this.BaseCosts=u,this.BaseQuantity=p}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++];return new wv(t,e,i,n,o,a,h,c,l,u,p,d,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.Identification),t.push(this.LongDescription),t.push(this.ResourceType),t.push(this.BaseCosts),t.push(this.BaseQuantity),t}},xv=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.LongName=a,this.Phase=h,this.RepresentationContexts=c,this.UnitsInContext=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new xv(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.LongName),t.push(this.Phase),t.push(this.RepresentationContexts),t.push(this.UnitsInContext),t}},Iv=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.Dimensions=s,this.UnitType=r,this.Name=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new Iv(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.Dimensions),t.push(this.UnitType),t.push(this.Name),t}},Ev=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.Identification=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new Ev(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t}},Sv=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new Sv(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Av=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new Av(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Rv=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.Dimensions=s,this.UnitType=r,this.Name=i,this.ConversionFactor=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new Rv(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.Dimensions),t.push(this.UnitType),t.push(this.Name),t.push(this.ConversionFactor),t}},Cv=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.Dimensions=s,this.UnitType=r,this.Name=i,this.ConversionFactor=n,this.ConversionOffset=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new Cv(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.Dimensions),t.push(this.UnitType),t.push(this.Name),t.push(this.ConversionFactor),t.push(this.ConversionOffset),t}},Ov=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new Ov(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},_v=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new _v(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Dv=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new Dv(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Fv=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new Fv(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Mv=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.SourceCRS=s,this.TargetCRS=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new Mv(t,e,i,n)}ToTape(){let t=[];return t.push(this.SourceCRS),t.push(this.TargetCRS),t}},Pv=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.GeodeticDatum=i,this.VerticalDatum=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new Pv(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.GeodeticDatum),t.push(this.VerticalDatum),t}},Nv=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.Identification=a,this.PredefinedType=h,this.CostValues=c,this.CostQuantities=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new Nv(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.PredefinedType),t.push(this.CostValues),t.push(this.CostQuantities),t}},Lv=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.Identification=a,this.PredefinedType=h,this.Status=c,this.SubmittedOn=l,this.UpdateDate=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new Lv(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.PredefinedType),t.push(this.Status),t.push(this.SubmittedOn),t.push(this.UpdateDate),t}},kv=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.AppliedValue=i,this.UnitBasis=n,this.ApplicableDate=o,this.FixedUntilDate=a,this.Category=h,this.Condition=c,this.ArithmeticOperator=l,this.Components=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new kv(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.AppliedValue),t.push(this.UnitBasis),t.push(this.ApplicableDate),t.push(this.FixedUntilDate),t.push(this.Category),t.push(this.Condition),t.push(this.ArithmeticOperator),t.push(this.Components),t}},Uv=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new Uv(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Hv=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new Hv(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Bv=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.Identification=a,this.LongDescription=h,this.Usage=c,this.BaseCosts=l,this.BaseQuantity=u,this.PredefinedType=p}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++];return new Bv(t,e,i,n,o,a,h,c,l,u,p,d,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.LongDescription),t.push(this.Usage),t.push(this.BaseCosts),t.push(this.BaseQuantity),t.push(this.PredefinedType),t}},Gv=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.Identification=h,this.LongDescription=c,this.ResourceType=l,this.BaseCosts=u,this.BaseQuantity=p,this.PredefinedType=d}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++];return new Gv(t,e,i,n,o,a,h,c,l,u,p,d,m,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.Identification),t.push(this.LongDescription),t.push(this.ResourceType),t.push(this.BaseCosts),t.push(this.BaseQuantity),t.push(this.PredefinedType),t}},jv=class{constructor(t,e,s){this.expressID=t,this.type=e,this.Position=s}static FromTape(t,e,s){let r=0,i=s[r++];return new jv(t,e,i)}ToTape(){let t=[];return t.push(this.Position),t}},zv=class{constructor(t,e,s){this.expressID=t,this.type=e,this.TreeRootExpression=s}static FromTape(t,e,s){let r=0,i=s[r++];return new zv(t,e,i)}ToTape(){let t=[];return t.push(this.TreeRootExpression),t}},Vv=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.RelatingMonetaryUnit=i,this.RelatedMonetaryUnit=n,this.ExchangeRate=o,this.RateDateTime=a,this.RateSource=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new Vv(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.RelatingMonetaryUnit),t.push(this.RelatedMonetaryUnit),t.push(this.ExchangeRate),t.push(this.RateDateTime),t.push(this.RateSource),t}},Wv=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new Wv(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Yv=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new Yv(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Xv=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,s){return new Xv(t,e)}ToTape(){return[]}},qv=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.BasisSurface=s,this.OuterBoundary=r,this.InnerBoundaries=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new qv(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.BasisSurface),t.push(this.OuterBoundary),t.push(this.InnerBoundaries),t}},Kv=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.BasisSurface=s,this.Boundaries=r,this.ImplicitOuter=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new Kv(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.BasisSurface),t.push(this.Boundaries),t.push(this.ImplicitOuter),t}},Jv=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.StartPoint=s,this.StartDirection=r,this.SegmentLength=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new Jv(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.StartPoint),t.push(this.StartDirection),t.push(this.SegmentLength),t}},$v=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.Name=s,this.CurveFont=r,this.CurveWidth=i,this.CurveColour=n,this.ModelOrDraughting=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new $v(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.Name),t.push(this.CurveFont),t.push(this.CurveWidth),t.push(this.CurveColour),t.push(this.ModelOrDraughting),t}},Zv=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.Name=s,this.PatternList=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new Zv(t,e,i,n)}ToTape(){let t=[];return t.push(this.Name),t.push(this.PatternList),t}},Qv=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.Name=s,this.CurveFont=r,this.CurveFontScaling=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new Qv(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.Name),t.push(this.CurveFont),t.push(this.CurveFontScaling),t}},tb=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.VisibleSegmentLength=s,this.InvisibleSegmentLength=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new tb(t,e,i,n)}ToTape(){let t=[];return t.push(this.VisibleSegmentLength),t.push(this.InvisibleSegmentLength),t}},eb=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.Position=s,this.Radius=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new eb(t,e,i,n)}ToTape(){let t=[];return t.push(this.Position),t.push(this.Radius),t}},sb=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new sb(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},rb=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new rb(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},ib=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new ib(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},nb=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new nb(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},ob=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.ProfileType=s,this.ProfileName=r,this.ParentProfile=i,this.Operator=n,this.Label=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new ob(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.ParentProfile),t.push(this.Operator),t.push(this.Label),t}},ab=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.Elements=s,this.UnitType=r,this.UserDefinedType=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new ab(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.Elements),t.push(this.UnitType),t.push(this.UserDefinedType),t}},hb=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.Unit=s,this.Exponent=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new hb(t,e,i,n)}ToTape(){let t=[];return t.push(this.Unit),t.push(this.Exponent),t}},cb=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.LengthExponent=s,this.MassExponent=r,this.TimeExponent=i,this.ElectricCurrentExponent=n,this.ThermodynamicTemperatureExponent=o,this.AmountOfSubstanceExponent=a,this.LuminousIntensityExponent=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new cb(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.LengthExponent),t.push(this.MassExponent),t.push(this.TimeExponent),t.push(this.ElectricCurrentExponent),t.push(this.ThermodynamicTemperatureExponent),t.push(this.AmountOfSubstanceExponent),t.push(this.LuminousIntensityExponent),t}},lb=class{constructor(t,e,s){this.expressID=t,this.type=e,this.DirectionRatios=s}static FromTape(t,e,s){let r=0,i=s[r++];return new lb(t,e,i)}ToTape(){let t=[];return t.push(this.DirectionRatios),t}},ub=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new ub(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},pb=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new pb(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},db=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.DistanceAlong=s,this.OffsetLateral=r,this.OffsetVertical=i,this.OffsetLongitudinal=n,this.AlongHorizontal=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new db(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.DistanceAlong),t.push(this.OffsetLateral),t.push(this.OffsetVertical),t.push(this.OffsetLongitudinal),t.push(this.AlongHorizontal),t}},mb=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new mb(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},fb=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new fb(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},gb=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.LongName=a,this.PredefinedType=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new gb(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.LongName),t.push(this.PredefinedType),t}},yb=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new yb(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},Tb=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new Tb(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},vb=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new vb(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},bb=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new bb(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},wb=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new wb(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},xb=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new xb(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},Ib=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.FlowDirection=c,this.PredefinedType=l,this.SystemType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new Ib(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.FlowDirection),t.push(this.PredefinedType),t.push(this.SystemType),t}},Eb=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.LongName=a,this.PredefinedType=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new Eb(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.LongName),t.push(this.PredefinedType),t}},Sb=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d,m,f,g,y,T){this.expressID=t,this.type=e,this.Identification=s,this.Name=r,this.Description=i,this.Location=n,this.Purpose=o,this.IntendedUse=a,this.Scope=h,this.Revision=c,this.DocumentOwner=l,this.Editors=u,this.CreationTime=p,this.LastRevisionTime=d,this.ElectronicFormat=m,this.ValidFrom=f,this.ValidUntil=g,this.Confidentiality=y,this.Status=T}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++],g=s[r++],y=s[r++],T=s[r++],v=s[r++],b=s[r++];return new Sb(t,e,i,n,o,a,h,c,l,u,p,d,m,f,g,y,T,v,b)}ToTape(){let t=[];return t.push(this.Identification),t.push(this.Name),t.push(this.Description),t.push(this.Location),t.push(this.Purpose),t.push(this.IntendedUse),t.push(this.Scope),t.push(this.Revision),t.push(this.DocumentOwner),t.push(this.Editors),t.push(this.CreationTime),t.push(this.LastRevisionTime),t.push(this.ElectronicFormat),t.push(this.ValidFrom),t.push(this.ValidUntil),t.push(this.Confidentiality),t.push(this.Status),t}},Ab=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.RelatingDocument=i,this.RelatedDocuments=n,this.RelationshipType=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new Ab(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.RelatingDocument),t.push(this.RelatedDocuments),t.push(this.RelationshipType),t}},Rb=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.Location=s,this.Identification=r,this.Name=i,this.Description=n,this.ReferencedDocument=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new Rb(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.Location),t.push(this.Identification),t.push(this.Name),t.push(this.Description),t.push(this.ReferencedDocument),t}},Cb=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d,m){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.OverallHeight=l,this.OverallWidth=u,this.PredefinedType=p,this.OperationType=d,this.UserDefinedOperationType=m}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++],g=s[r++];return new Cb(t,e,i,n,o,a,h,c,l,u,p,d,m,f,g)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.OverallHeight),t.push(this.OverallWidth),t.push(this.PredefinedType),t.push(this.OperationType),t.push(this.UserDefinedOperationType),t}},Ob=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d,m,f,g,y,T){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.LiningDepth=o,this.LiningThickness=a,this.ThresholdDepth=h,this.ThresholdThickness=c,this.TransomThickness=l,this.TransomOffset=u,this.LiningOffset=p,this.ThresholdOffset=d,this.CasingThickness=m,this.CasingDepth=f,this.ShapeAspectStyle=g,this.LiningToPanelOffsetX=y,this.LiningToPanelOffsetY=T}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++],g=s[r++],y=s[r++],T=s[r++],v=s[r++],b=s[r++];return new Ob(t,e,i,n,o,a,h,c,l,u,p,d,m,f,g,y,T,v,b)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.LiningDepth),t.push(this.LiningThickness),t.push(this.ThresholdDepth),t.push(this.ThresholdThickness),t.push(this.TransomThickness),t.push(this.TransomOffset),t.push(this.LiningOffset),t.push(this.ThresholdOffset),t.push(this.CasingThickness),t.push(this.CasingDepth),t.push(this.ShapeAspectStyle),t.push(this.LiningToPanelOffsetX),t.push(this.LiningToPanelOffsetY),t}},_b=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.PanelDepth=o,this.PanelOperation=a,this.PanelWidth=h,this.PanelPosition=c,this.ShapeAspectStyle=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new _b(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.PanelDepth),t.push(this.PanelOperation),t.push(this.PanelWidth),t.push(this.PanelPosition),t.push(this.ShapeAspectStyle),t}},Db=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d,m){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.OverallHeight=l,this.OverallWidth=u,this.PredefinedType=p,this.OperationType=d,this.UserDefinedOperationType=m}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++],g=s[r++];return new Db(t,e,i,n,o,a,h,c,l,u,p,d,m,f,g)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.OverallHeight),t.push(this.OverallWidth),t.push(this.PredefinedType),t.push(this.OperationType),t.push(this.UserDefinedOperationType),t}},Fb=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.OperationType=l,this.ConstructionType=u,this.ParameterTakesPrecedence=p,this.Sizeable=d}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++];return new Fb(t,e,i,n,o,a,h,c,l,u,p,d,m,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.OperationType),t.push(this.ConstructionType),t.push(this.ParameterTakesPrecedence),t.push(this.Sizeable),t}},Mb=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d,m){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u,this.OperationType=p,this.ParameterTakesPrecedence=d,this.UserDefinedOperationType=m}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++],g=s[r++];return new Mb(t,e,i,n,o,a,h,c,l,u,p,d,m,f,g)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t.push(this.OperationType),t.push(this.ParameterTakesPrecedence),t.push(this.UserDefinedOperationType),t}},Pb=class{constructor(t,e,s){this.expressID=t,this.type=e,this.Name=s}static FromTape(t,e,s){let r=0,i=s[r++];return new Pb(t,e,i)}ToTape(){let t=[];return t.push(this.Name),t}},Nb=class{constructor(t,e,s){this.expressID=t,this.type=e,this.Name=s}static FromTape(t,e,s){let r=0,i=s[r++];return new Nb(t,e,i)}ToTape(){let t=[];return t.push(this.Name),t}},Lb=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new Lb(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},kb=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new kb(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Ub=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new Ub(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Hb=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new Hb(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Bb=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new Bb(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Gb=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new Gb(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},jb=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.EdgeStart=s,this.EdgeEnd=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new jb(t,e,i,n)}ToTape(){let t=[];return t.push(this.EdgeStart),t.push(this.EdgeEnd),t}},zb=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.EdgeStart=s,this.EdgeEnd=r,this.EdgeGeometry=i,this.SameSense=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new zb(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.EdgeStart),t.push(this.EdgeEnd),t.push(this.EdgeGeometry),t.push(this.SameSense),t}},Vb=class{constructor(t,e,s){this.expressID=t,this.type=e,this.EdgeList=s}static FromTape(t,e,s){let r=0,i=s[r++];return new Vb(t,e,i)}ToTape(){let t=[];return t.push(this.EdgeList),t}},Wb=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new Wb(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Yb=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new Yb(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Xb=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new Xb(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},qb=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new qb(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Kb=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new Kb(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Jb=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new Jb(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},$b=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new $b(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Zb=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new Zb(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Qb=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new Qb(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},tw=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new tw(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},ew=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new ew(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},sw=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new sw(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},rw=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new rw(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},iw=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.AssemblyPlace=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new iw(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.AssemblyPlace),t.push(this.PredefinedType),t}},nw=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new nw(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},ow=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new ow(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},aw=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new aw(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},hw=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.MethodOfMeasurement=o,this.Quantities=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new hw(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.MethodOfMeasurement),t.push(this.Quantities),t}},cw=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new cw(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},lw=class{constructor(t,e,s){this.expressID=t,this.type=e,this.Position=s}static FromTape(t,e,s){let r=0,i=s[r++];return new lw(t,e,i)}ToTape(){let t=[];return t.push(this.Position),t}},uw=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.Position=s,this.SemiAxis1=r,this.SemiAxis2=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new uw(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.Position),t.push(this.SemiAxis1),t.push(this.SemiAxis2),t}},pw=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.ProfileType=s,this.ProfileName=r,this.Position=i,this.SemiAxis1=n,this.SemiAxis2=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new pw(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t.push(this.SemiAxis1),t.push(this.SemiAxis2),t}},dw=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new dw(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},mw=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new mw(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},fw=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new fw(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},gw=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new gw(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},yw=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new yw(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Tw=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new Tw(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},vw=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new vw(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},bw=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new bw(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},ww=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.Identification=a,this.LongDescription=h,this.PredefinedType=c,this.EventTriggerType=l,this.UserDefinedEventTriggerType=u,this.EventOccurenceTime=p}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++];return new ww(t,e,i,n,o,a,h,c,l,u,p,d,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.LongDescription),t.push(this.PredefinedType),t.push(this.EventTriggerType),t.push(this.UserDefinedEventTriggerType),t.push(this.EventOccurenceTime),t}},xw=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.Name=s,this.DataOrigin=r,this.UserDefinedDataOrigin=i,this.ActualDate=n,this.EarlyDate=o,this.LateDate=a,this.ScheduleDate=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new xw(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.Name),t.push(this.DataOrigin),t.push(this.UserDefinedDataOrigin),t.push(this.ActualDate),t.push(this.EarlyDate),t.push(this.LateDate),t.push(this.ScheduleDate),t}},Iw=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.Identification=h,this.LongDescription=c,this.ProcessType=l,this.PredefinedType=u,this.EventTriggerType=p,this.UserDefinedEventTriggerType=d}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++];return new Iw(t,e,i,n,o,a,h,c,l,u,p,d,m,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.Identification),t.push(this.LongDescription),t.push(this.ProcessType),t.push(this.PredefinedType),t.push(this.EventTriggerType),t.push(this.UserDefinedEventTriggerType),t}},Ew=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.Properties=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new Ew(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Properties),t}},Sw=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,s){return new Sw(t,e)}ToTape(){return[]}},Aw=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.Location=s,this.Identification=r,this.Name=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new Aw(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.Location),t.push(this.Identification),t.push(this.Name),t}},Rw=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.RelatingReference=i,this.RelatedResourceObjects=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new Rw(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.RelatingReference),t.push(this.RelatedResourceObjects),t}},Cw=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.LongName=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new Cw(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.LongName),t.push(this.PredefinedType),t}},Ow=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.LongName=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new Ow(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.LongName),t}},_w=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.Location=s,this.Identification=r,this.Name=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new _w(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.Location),t.push(this.Identification),t.push(this.Name),t}},Dw=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.Location=s,this.Identification=r,this.Name=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new Dw(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.Location),t.push(this.Identification),t.push(this.Name),t}},Fw=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.Location=s,this.Identification=r,this.Name=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new Fw(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.Location),t.push(this.Identification),t.push(this.Name),t}},Mw=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.SweptArea=s,this.Position=r,this.ExtrudedDirection=i,this.Depth=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new Mw(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.SweptArea),t.push(this.Position),t.push(this.ExtrudedDirection),t.push(this.Depth),t}},Pw=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.SweptArea=s,this.Position=r,this.ExtrudedDirection=i,this.Depth=n,this.EndSweptArea=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new Pw(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.SweptArea),t.push(this.Position),t.push(this.ExtrudedDirection),t.push(this.Depth),t.push(this.EndSweptArea),t}},Nw=class{constructor(t,e,s){this.expressID=t,this.type=e,this.Bounds=s}static FromTape(t,e,s){let r=0,i=s[r++];return new Nw(t,e,i)}ToTape(){let t=[];return t.push(this.Bounds),t}},Lw=class{constructor(t,e,s){this.expressID=t,this.type=e,this.FbsmFaces=s}static FromTape(t,e,s){let r=0,i=s[r++];return new Lw(t,e,i)}ToTape(){let t=[];return t.push(this.FbsmFaces),t}},kw=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.Bound=s,this.Orientation=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new kw(t,e,i,n)}ToTape(){let t=[];return t.push(this.Bound),t.push(this.Orientation),t}},Uw=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.Bound=s,this.Orientation=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new Uw(t,e,i,n)}ToTape(){let t=[];return t.push(this.Bound),t.push(this.Orientation),t}},Hw=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.Bounds=s,this.FaceSurface=r,this.SameSense=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new Hw(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.Bounds),t.push(this.FaceSurface),t.push(this.SameSense),t}},Bw=class{constructor(t,e,s){this.expressID=t,this.type=e,this.Outer=s}static FromTape(t,e,s){let r=0,i=s[r++];return new Bw(t,e,i)}ToTape(){let t=[];return t.push(this.Outer),t}},Gw=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.Outer=s,this.Voids=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new Gw(t,e,i,n)}ToTape(){let t=[];return t.push(this.Outer),t.push(this.Voids),t}},jw=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.LongName=c,this.CompositionType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new jw(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.LongName),t.push(this.CompositionType),t}},zw=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.LongName=c,this.CompositionType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new zw(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.LongName),t.push(this.CompositionType),t}},Vw=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.Name=s,this.TensionFailureX=r,this.TensionFailureY=i,this.TensionFailureZ=n,this.CompressionFailureX=o,this.CompressionFailureY=a,this.CompressionFailureZ=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new Vw(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.Name),t.push(this.TensionFailureX),t.push(this.TensionFailureY),t.push(this.TensionFailureZ),t.push(this.CompressionFailureX),t.push(this.CompressionFailureY),t.push(this.CompressionFailureZ),t}},Ww=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new Ww(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Yw=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new Yw(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Xw=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new Xw(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},qw=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new qw(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Kw=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new Kw(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},Jw=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new Jw(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},$w=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new $w(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},Zw=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.Name=s,this.FillStyles=r,this.ModelorDraughting=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new Zw(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.Name),t.push(this.FillStyles),t.push(this.ModelorDraughting),t}},Qw=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.HatchLineAppearance=s,this.StartOfNextHatchLine=r,this.PointOfReferenceHatchLine=i,this.PatternStart=n,this.HatchLineAngle=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new Qw(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.HatchLineAppearance),t.push(this.StartOfNextHatchLine),t.push(this.PointOfReferenceHatchLine),t.push(this.PatternStart),t.push(this.HatchLineAngle),t}},tx=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.TilingPattern=s,this.Tiles=r,this.TilingScale=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new tx(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.TilingPattern),t.push(this.Tiles),t.push(this.TilingScale),t}},ex=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new ex(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},sx=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new sx(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},rx=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new rx(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},ix=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new ix(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},nx=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.SweptArea=s,this.Position=r,this.Directrix=i,this.StartParam=n,this.EndParam=o,this.FixedReference=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new nx(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.SweptArea),t.push(this.Position),t.push(this.Directrix),t.push(this.StartParam),t.push(this.EndParam),t.push(this.FixedReference),t}},ox=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new ox(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},ax=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new ax(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},hx=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new hx(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},cx=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new cx(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},lx=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new lx(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},ux=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new ux(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},px=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new px(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},dx=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new dx(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},mx=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new mx(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},fx=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new fx(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},gx=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new gx(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},yx=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new yx(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},Tx=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new Tx(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},vx=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new vx(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},bx=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new bx(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},wx=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new wx(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},xx=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new xx(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},Ix=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new Ix(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},Ex=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new Ex(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Sx=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new Sx(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Ax=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new Ax(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},Rx=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new Rx(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},Cx=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new Cx(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Ox=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.AssemblyPlace=u,this.PredefinedType=p}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++];return new Ox(t,e,i,n,o,a,h,c,l,u,p,d,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.AssemblyPlace),t.push(this.PredefinedType),t}},_x=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new _x(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Dx=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new Dx(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Fx=class{constructor(t,e,s){this.expressID=t,this.type=e,this.Elements=s}static FromTape(t,e,s){let r=0,i=s[r++];return new Fx(t,e,i)}ToTape(){let t=[];return t.push(this.Elements),t}},Mx=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.ContextIdentifier=s,this.ContextType=r,this.CoordinateSpaceDimension=i,this.Precision=n,this.WorldCoordinateSystem=o,this.TrueNorth=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new Mx(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.ContextIdentifier),t.push(this.ContextType),t.push(this.CoordinateSpaceDimension),t.push(this.Precision),t.push(this.WorldCoordinateSystem),t.push(this.TrueNorth),t}},Px=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,s){return new Px(t,e)}ToTape(){return[]}},Nx=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.ContextIdentifier=s,this.ContextType=r,this.CoordinateSpaceDimension=i,this.Precision=n,this.WorldCoordinateSystem=o,this.TrueNorth=a,this.ParentContext=h,this.TargetScale=c,this.TargetView=l,this.UserDefinedTargetView=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new Nx(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.ContextIdentifier),t.push(this.ContextType),t.push(this.CoordinateSpaceDimension),t.push(this.Precision),t.push(this.WorldCoordinateSystem),t.push(this.TrueNorth),t.push(this.ParentContext),t.push(this.TargetScale),t.push(this.TargetView),t.push(this.UserDefinedTargetView),t}},Lx=class{constructor(t,e,s){this.expressID=t,this.type=e,this.Elements=s}static FromTape(t,e,s){let r=0,i=s[r++];return new Lx(t,e,i)}ToTape(){let t=[];return t.push(this.Elements),t}},kx=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.UAxes=c,this.VAxes=l,this.WAxes=u,this.PredefinedType=p}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++];return new kx(t,e,i,n,o,a,h,c,l,u,p,d,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.UAxes),t.push(this.VAxes),t.push(this.WAxes),t.push(this.PredefinedType),t}},Ux=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.AxisTag=s,this.AxisCurve=r,this.SameSense=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new Ux(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.AxisTag),t.push(this.AxisCurve),t.push(this.SameSense),t}},Hx=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.PlacementRelTo=s,this.PlacementLocation=r,this.PlacementRefDirection=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new Hx(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.PlacementRelTo),t.push(this.PlacementLocation),t.push(this.PlacementRefDirection),t}},Bx=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new Bx(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t}},Gx=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.BaseSurface=s,this.AgreementFlag=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new Gx(t,e,i,n)}ToTape(){let t=[];return t.push(this.BaseSurface),t.push(this.AgreementFlag),t}},jx=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new jx(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},zx=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new zx(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Vx=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new Vx(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Wx=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new Wx(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Yx=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.ProfileType=s,this.ProfileName=r,this.Position=i,this.OverallWidth=n,this.OverallDepth=o,this.WebThickness=a,this.FlangeThickness=h,this.FilletRadius=c,this.FlangeEdgeRadius=l,this.FlangeSlope=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new Yx(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t.push(this.OverallWidth),t.push(this.OverallDepth),t.push(this.WebThickness),t.push(this.FlangeThickness),t.push(this.FilletRadius),t.push(this.FlangeEdgeRadius),t.push(this.FlangeSlope),t}},Xx=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.RepeatS=s,this.RepeatT=r,this.Mode=i,this.TextureTransform=n,this.Parameter=o,this.URLReference=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new Xx(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.RepeatS),t.push(this.RepeatT),t.push(this.Mode),t.push(this.TextureTransform),t.push(this.Parameter),t.push(this.URLReference),t}},qx=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.MappedTo=s,this.Opacity=r,this.Colours=i,this.ColourIndex=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new qx(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.MappedTo),t.push(this.Opacity),t.push(this.Colours),t.push(this.ColourIndex),t}},Kx=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.Points=s,this.Segments=r,this.SelfIntersect=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new Kx(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.Points),t.push(this.Segments),t.push(this.SelfIntersect),t}},Jx=class{constructor(t,e,s){this.expressID=t,this.type=e,this.CoordIndex=s}static FromTape(t,e,s){let r=0,i=s[r++];return new Jx(t,e,i)}ToTape(){let t=[];return t.push(this.CoordIndex),t}},$x=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.CoordIndex=s,this.InnerCoordIndices=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new $x(t,e,i,n)}ToTape(){let t=[];return t.push(this.CoordIndex),t.push(this.InnerCoordIndices),t}},Zx=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.Maps=s,this.MappedTo=r,this.TexCoords=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new Zx(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.Maps),t.push(this.MappedTo),t.push(this.TexCoords),t}},Qx=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.Maps=s,this.MappedTo=r,this.TexCoords=i,this.TexCoordIndex=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new Qx(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.Maps),t.push(this.MappedTo),t.push(this.TexCoords),t.push(this.TexCoordIndex),t}},tI=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new tI(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},eI=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new eI(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},sI=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.Curve3D=s,this.AssociatedGeometry=r,this.MasterRepresentation=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new sI(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.Curve3D),t.push(this.AssociatedGeometry),t.push(this.MasterRepresentation),t}},rI=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.PredefinedType=a,this.Jurisdiction=h,this.ResponsiblePersons=c,this.LastUpdateDate=l,this.CurrentValue=u,this.OriginalValue=p}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++];return new rI(t,e,i,n,o,a,h,c,l,u,p,d,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.PredefinedType),t.push(this.Jurisdiction),t.push(this.ResponsiblePersons),t.push(this.LastUpdateDate),t.push(this.CurrentValue),t.push(this.OriginalValue),t}},iI=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.StartTime=i,this.EndTime=n,this.TimeSeriesDataType=o,this.DataOrigin=a,this.UserDefinedDataOrigin=h,this.Unit=c,this.Values=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new iI(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.StartTime),t.push(this.EndTime),t.push(this.TimeSeriesDataType),t.push(this.DataOrigin),t.push(this.UserDefinedDataOrigin),t.push(this.Unit),t.push(this.Values),t}},nI=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.TimeStamp=s,this.ListValues=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new nI(t,e,i,n)}ToTape(){let t=[];return t.push(this.TimeStamp),t.push(this.ListValues),t}},oI=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new oI(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},aI=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new aI(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},hI=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.ProfileType=s,this.ProfileName=r,this.Position=i,this.Depth=n,this.Width=o,this.Thickness=a,this.FilletRadius=h,this.EdgeRadius=c,this.LegSlope=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new hI(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t.push(this.Depth),t.push(this.Width),t.push(this.Thickness),t.push(this.FilletRadius),t.push(this.EdgeRadius),t.push(this.LegSlope),t}},cI=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.Identification=a,this.LongDescription=h,this.Usage=c,this.BaseCosts=l,this.BaseQuantity=u,this.PredefinedType=p}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++];return new cI(t,e,i,n,o,a,h,c,l,u,p,d,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.LongDescription),t.push(this.Usage),t.push(this.BaseCosts),t.push(this.BaseQuantity),t.push(this.PredefinedType),t}},lI=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.Identification=h,this.LongDescription=c,this.ResourceType=l,this.BaseCosts=u,this.BaseQuantity=p,this.PredefinedType=d}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++];return new lI(t,e,i,n,o,a,h,c,l,u,p,d,m,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.Identification),t.push(this.LongDescription),t.push(this.ResourceType),t.push(this.BaseCosts),t.push(this.BaseQuantity),t.push(this.PredefinedType),t}},uI=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.Name=s,this.DataOrigin=r,this.UserDefinedDataOrigin=i,this.LagValue=n,this.DurationType=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new uI(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.Name),t.push(this.DataOrigin),t.push(this.UserDefinedDataOrigin),t.push(this.LagValue),t.push(this.DurationType),t}},pI=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new pI(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},dI=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new dI(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},mI=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.Name=s,this.Version=r,this.Publisher=i,this.VersionDate=n,this.Location=o,this.Description=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new mI(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Version),t.push(this.Publisher),t.push(this.VersionDate),t.push(this.Location),t.push(this.Description),t}},fI=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.Location=s,this.Identification=r,this.Name=i,this.Description=n,this.Language=o,this.ReferencedLibrary=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new fI(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.Location),t.push(this.Identification),t.push(this.Name),t.push(this.Description),t.push(this.Language),t.push(this.ReferencedLibrary),t}},gI=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.MainPlaneAngle=s,this.SecondaryPlaneAngle=r,this.LuminousIntensity=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new gI(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.MainPlaneAngle),t.push(this.SecondaryPlaneAngle),t.push(this.LuminousIntensity),t}},yI=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new yI(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},TI=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new TI(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},vI=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.LightDistributionCurve=s,this.DistributionData=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new vI(t,e,i,n)}ToTape(){let t=[];return t.push(this.LightDistributionCurve),t.push(this.DistributionData),t}},bI=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.Name=s,this.LightColour=r,this.AmbientIntensity=i,this.Intensity=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new bI(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.LightColour),t.push(this.AmbientIntensity),t.push(this.Intensity),t}},wI=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.Name=s,this.LightColour=r,this.AmbientIntensity=i,this.Intensity=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new wI(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.LightColour),t.push(this.AmbientIntensity),t.push(this.Intensity),t}},xI=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.Name=s,this.LightColour=r,this.AmbientIntensity=i,this.Intensity=n,this.Orientation=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new xI(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.Name),t.push(this.LightColour),t.push(this.AmbientIntensity),t.push(this.Intensity),t.push(this.Orientation),t}},II=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.Name=s,this.LightColour=r,this.AmbientIntensity=i,this.Intensity=n,this.Position=o,this.ColourAppearance=a,this.ColourTemperature=h,this.LuminousFlux=c,this.LightEmissionSource=l,this.LightDistributionDataSource=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new II(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.Name),t.push(this.LightColour),t.push(this.AmbientIntensity),t.push(this.Intensity),t.push(this.Position),t.push(this.ColourAppearance),t.push(this.ColourTemperature),t.push(this.LuminousFlux),t.push(this.LightEmissionSource),t.push(this.LightDistributionDataSource),t}},EI=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.Name=s,this.LightColour=r,this.AmbientIntensity=i,this.Intensity=n,this.Position=o,this.Radius=a,this.ConstantAttenuation=h,this.DistanceAttenuation=c,this.QuadricAttenuation=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new EI(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.Name),t.push(this.LightColour),t.push(this.AmbientIntensity),t.push(this.Intensity),t.push(this.Position),t.push(this.Radius),t.push(this.ConstantAttenuation),t.push(this.DistanceAttenuation),t.push(this.QuadricAttenuation),t}},SI=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d,m){this.expressID=t,this.type=e,this.Name=s,this.LightColour=r,this.AmbientIntensity=i,this.Intensity=n,this.Position=o,this.Radius=a,this.ConstantAttenuation=h,this.DistanceAttenuation=c,this.QuadricAttenuation=l,this.Orientation=u,this.ConcentrationExponent=p,this.SpreadAngle=d,this.BeamWidthAngle=m}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++],g=s[r++];return new SI(t,e,i,n,o,a,h,c,l,u,p,d,m,f,g)}ToTape(){let t=[];return t.push(this.Name),t.push(this.LightColour),t.push(this.AmbientIntensity),t.push(this.Intensity),t.push(this.Position),t.push(this.Radius),t.push(this.ConstantAttenuation),t.push(this.DistanceAttenuation),t.push(this.QuadricAttenuation),t.push(this.Orientation),t.push(this.ConcentrationExponent),t.push(this.SpreadAngle),t.push(this.BeamWidthAngle),t}},AI=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.Pnt=s,this.Dir=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new AI(t,e,i,n)}ToTape(){let t=[];return t.push(this.Pnt),t.push(this.Dir),t}},RI=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.StartPoint=s,this.StartDirection=r,this.SegmentLength=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new RI(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.StartPoint),t.push(this.StartDirection),t.push(this.SegmentLength),t}},CI=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.PlacementRelTo=s,this.PlacementMeasuredAlong=r,this.Distance=i,this.Orientation=n,this.CartesianPosition=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new CI(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.PlacementRelTo),t.push(this.PlacementMeasuredAlong),t.push(this.Distance),t.push(this.Orientation),t.push(this.CartesianPosition),t}},OI=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Axis=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new OI(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Axis),t}},_I=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.PlacementRelTo=s,this.RelativePlacement=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new _I(t,e,i,n)}ToTape(){let t=[];return t.push(this.PlacementRelTo),t.push(this.RelativePlacement),t}},DI=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,s){return new DI(t,e)}ToTape(){return[]}},FI=class{constructor(t,e,s){this.expressID=t,this.type=e,this.Outer=s}static FromTape(t,e,s){let r=0,i=s[r++];return new FI(t,e,i)}ToTape(){let t=[];return t.push(this.Outer),t}},MI=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.SourceCRS=s,this.TargetCRS=r,this.Eastings=i,this.Northings=n,this.OrthogonalHeight=o,this.XAxisAbscissa=a,this.XAxisOrdinate=h,this.Scale=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new MI(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.SourceCRS),t.push(this.TargetCRS),t.push(this.Eastings),t.push(this.Northings),t.push(this.OrthogonalHeight),t.push(this.XAxisAbscissa),t.push(this.XAxisOrdinate),t.push(this.Scale),t}},PI=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.MappingSource=s,this.MappingTarget=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new PI(t,e,i,n)}ToTape(){let t=[];return t.push(this.MappingSource),t.push(this.MappingTarget),t}},NI=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.Category=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new NI(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Category),t}},LI=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.MaterialClassifications=s,this.ClassifiedMaterial=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new LI(t,e,i,n)}ToTape(){let t=[];return t.push(this.MaterialClassifications),t.push(this.ClassifiedMaterial),t}},kI=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.Material=i,this.Fraction=n,this.Category=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new kI(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Material),t.push(this.Fraction),t.push(this.Category),t}},UI=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.MaterialConstituents=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new UI(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.MaterialConstituents),t}},HI=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,s){return new HI(t,e)}ToTape(){return[]}},BI=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.Representations=i,this.RepresentedMaterial=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new BI(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Representations),t.push(this.RepresentedMaterial),t}},GI=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.Material=s,this.LayerThickness=r,this.IsVentilated=i,this.Name=n,this.Description=o,this.Category=a,this.Priority=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new GI(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.Material),t.push(this.LayerThickness),t.push(this.IsVentilated),t.push(this.Name),t.push(this.Description),t.push(this.Category),t.push(this.Priority),t}},jI=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.MaterialLayers=s,this.LayerSetName=r,this.Description=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new jI(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.MaterialLayers),t.push(this.LayerSetName),t.push(this.Description),t}},zI=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.ForLayerSet=s,this.LayerSetDirection=r,this.DirectionSense=i,this.OffsetFromReferenceLine=n,this.ReferenceExtent=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new zI(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.ForLayerSet),t.push(this.LayerSetDirection),t.push(this.DirectionSense),t.push(this.OffsetFromReferenceLine),t.push(this.ReferenceExtent),t}},VI=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.Material=s,this.LayerThickness=r,this.IsVentilated=i,this.Name=n,this.Description=o,this.Category=a,this.Priority=h,this.OffsetDirection=c,this.OffsetValues=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new VI(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.Material),t.push(this.LayerThickness),t.push(this.IsVentilated),t.push(this.Name),t.push(this.Description),t.push(this.Category),t.push(this.Priority),t.push(this.OffsetDirection),t.push(this.OffsetValues),t}},WI=class{constructor(t,e,s){this.expressID=t,this.type=e,this.Materials=s}static FromTape(t,e,s){let r=0,i=s[r++];return new WI(t,e,i)}ToTape(){let t=[];return t.push(this.Materials),t}},YI=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.Material=i,this.Profile=n,this.Priority=o,this.Category=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new YI(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Material),t.push(this.Profile),t.push(this.Priority),t.push(this.Category),t}},XI=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.MaterialProfiles=i,this.CompositeProfile=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new XI(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.MaterialProfiles),t.push(this.CompositeProfile),t}},qI=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.ForProfileSet=s,this.CardinalPoint=r,this.ReferenceExtent=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new qI(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.ForProfileSet),t.push(this.CardinalPoint),t.push(this.ReferenceExtent),t}},KI=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.ForProfileSet=s,this.CardinalPoint=r,this.ReferenceExtent=i,this.ForProfileEndSet=n,this.CardinalEndPoint=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new KI(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.ForProfileSet),t.push(this.CardinalPoint),t.push(this.ReferenceExtent),t.push(this.ForProfileEndSet),t.push(this.CardinalEndPoint),t}},JI=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.Material=i,this.Profile=n,this.Priority=o,this.Category=a,this.OffsetValues=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new JI(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Material),t.push(this.Profile),t.push(this.Priority),t.push(this.Category),t.push(this.OffsetValues),t}},$I=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.Properties=i,this.Material=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new $I(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Properties),t.push(this.Material),t}},ZI=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.RelatingMaterial=i,this.RelatedMaterials=n,this.Expression=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new ZI(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.RelatingMaterial),t.push(this.RelatedMaterials),t.push(this.Expression),t}},QI=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,s){return new QI(t,e)}ToTape(){return[]}},tE=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.ValueComponent=s,this.UnitComponent=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new tE(t,e,i,n)}ToTape(){let t=[];return t.push(this.ValueComponent),t.push(this.UnitComponent),t}},eE=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.NominalDiameter=l,this.NominalLength=u,this.PredefinedType=p}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++];return new eE(t,e,i,n,o,a,h,c,l,u,p,d,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.NominalDiameter),t.push(this.NominalLength),t.push(this.PredefinedType),t}},sE=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u,this.NominalDiameter=p,this.NominalLength=d}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++];return new sE(t,e,i,n,o,a,h,c,l,u,p,d,m,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t.push(this.NominalDiameter),t.push(this.NominalLength),t}},rE=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new rE(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},iE=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new iE(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},nE=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new nE(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},oE=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new oE(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},aE=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new aE(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},hE=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.ConstraintGrade=i,this.ConstraintSource=n,this.CreatingActor=o,this.CreationTime=a,this.UserDefinedGrade=h,this.Benchmark=c,this.ValueSource=l,this.DataValue=u,this.ReferencePath=p}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++];return new hE(t,e,i,n,o,a,h,c,l,u,p,d,m)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.ConstraintGrade),t.push(this.ConstraintSource),t.push(this.CreatingActor),t.push(this.CreationTime),t.push(this.UserDefinedGrade),t.push(this.Benchmark),t.push(this.ValueSource),t.push(this.DataValue),t.push(this.ReferencePath),t}},cE=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.ProfileType=s,this.ProfileName=r,this.ParentProfile=i,this.Operator=n,this.Label=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new cE(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.ParentProfile),t.push(this.Operator),t.push(this.Label),t}},lE=class{constructor(t,e,s){this.expressID=t,this.type=e,this.Currency=s}static FromTape(t,e,s){let r=0,i=s[r++];return new lE(t,e,i)}ToTape(){let t=[];return t.push(this.Currency),t}},uE=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new uE(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},pE=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new pE(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},dE=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.Dimensions=s,this.UnitType=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new dE(t,e,i,n)}ToTape(){let t=[];return t.push(this.Dimensions),t.push(this.UnitType),t}},mE=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new mE(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t}},fE=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new fE(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t}},gE=class{constructor(t,e,s){this.expressID=t,this.type=e,this.PlacementRelTo=s}static FromTape(t,e,s){let r=0,i=s[r++];return new gE(t,e,i)}ToTape(){let t=[];return t.push(this.PlacementRelTo),t}},yE=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.ConstraintGrade=i,this.ConstraintSource=n,this.CreatingActor=o,this.CreationTime=a,this.UserDefinedGrade=h,this.BenchmarkValues=c,this.LogicalAggregator=l,this.ObjectiveQualifier=u,this.UserDefinedQualifier=p}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++];return new yE(t,e,i,n,o,a,h,c,l,u,p,d,m)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.ConstraintGrade),t.push(this.ConstraintSource),t.push(this.CreatingActor),t.push(this.CreationTime),t.push(this.UserDefinedGrade),t.push(this.BenchmarkValues),t.push(this.LogicalAggregator),t.push(this.ObjectiveQualifier),t.push(this.UserDefinedQualifier),t}},TE=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.TheActor=a,this.PredefinedType=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new TE(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.TheActor),t.push(this.PredefinedType),t}},vE=class{constructor(t,e,s){this.expressID=t,this.type=e,this.BasisCurve=s}static FromTape(t,e,s){let r=0,i=s[r++];return new vE(t,e,i)}ToTape(){let t=[];return t.push(this.BasisCurve),t}},bE=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.BasisCurve=s,this.Distance=r,this.SelfIntersect=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new bE(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.BasisCurve),t.push(this.Distance),t.push(this.SelfIntersect),t}},wE=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.BasisCurve=s,this.Distance=r,this.SelfIntersect=i,this.RefDirection=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new wE(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.BasisCurve),t.push(this.Distance),t.push(this.SelfIntersect),t.push(this.RefDirection),t}},xE=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.BasisCurve=s,this.OffsetValues=r,this.Tag=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new xE(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.BasisCurve),t.push(this.OffsetValues),t.push(this.Tag),t}},IE=class{constructor(t,e,s){this.expressID=t,this.type=e,this.CfsFaces=s}static FromTape(t,e,s){let r=0,i=s[r++];return new IE(t,e,i)}ToTape(){let t=[];return t.push(this.CfsFaces),t}},EE=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new EE(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},SE=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new SE(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},AE=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.Identification=s,this.Name=r,this.Description=i,this.Roles=n,this.Addresses=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new AE(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.Identification),t.push(this.Name),t.push(this.Description),t.push(this.Roles),t.push(this.Addresses),t}},RE=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.RelatingOrganization=i,this.RelatedOrganizations=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new RE(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.RelatingOrganization),t.push(this.RelatedOrganizations),t}},CE=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.LateralAxisDirection=s,this.VerticalAxisDirection=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new CE(t,e,i,n)}ToTape(){let t=[];return t.push(this.LateralAxisDirection),t.push(this.VerticalAxisDirection),t}},OE=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.EdgeStart=s,this.EdgeEnd=r,this.EdgeElement=i,this.Orientation=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new OE(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.EdgeStart),t.push(this.EdgeEnd),t.push(this.EdgeElement),t.push(this.Orientation),t}},_E=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.Segments=s,this.SelfIntersect=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new _E(t,e,i,n)}ToTape(){let t=[];return t.push(this.Segments),t.push(this.SelfIntersect),t}},DE=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new DE(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},FE=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new FE(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},ME=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.OwningUser=s,this.OwningApplication=r,this.State=i,this.ChangeAction=n,this.LastModifiedDate=o,this.LastModifyingUser=a,this.LastModifyingApplication=h,this.CreationDate=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new ME(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.OwningUser),t.push(this.OwningApplication),t.push(this.State),t.push(this.ChangeAction),t.push(this.LastModifiedDate),t.push(this.LastModifyingUser),t.push(this.LastModifyingApplication),t.push(this.CreationDate),t}},PE=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.ProfileType=s,this.ProfileName=r,this.Position=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new PE(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t}},NE=class{constructor(t,e,s){this.expressID=t,this.type=e,this.EdgeList=s}static FromTape(t,e,s){let r=0,i=s[r++];return new NE(t,e,i)}ToTape(){let t=[];return t.push(this.EdgeList),t}},LE=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.BasisSurface=s,this.ReferenceCurve=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new LE(t,e,i,n)}ToTape(){let t=[];return t.push(this.BasisSurface),t.push(this.ReferenceCurve),t}},kE=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.Identification=a,this.LifeCyclePhase=h,this.PredefinedType=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new kE(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.LifeCyclePhase),t.push(this.PredefinedType),t}},UE=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.OperationType=o,this.PanelPosition=a,this.FrameDepth=h,this.FrameThickness=c,this.ShapeAspectStyle=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new UE(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.OperationType),t.push(this.PanelPosition),t.push(this.FrameDepth),t.push(this.FrameThickness),t.push(this.ShapeAspectStyle),t}},HE=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.Identification=a,this.PredefinedType=h,this.Status=c,this.LongDescription=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new HE(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.PredefinedType),t.push(this.Status),t.push(this.LongDescription),t}},BE=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.Identification=s,this.FamilyName=r,this.GivenName=i,this.MiddleNames=n,this.PrefixTitles=o,this.SuffixTitles=a,this.Roles=h,this.Addresses=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new BE(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.Identification),t.push(this.FamilyName),t.push(this.GivenName),t.push(this.MiddleNames),t.push(this.PrefixTitles),t.push(this.SuffixTitles),t.push(this.Roles),t.push(this.Addresses),t}},GE=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.ThePerson=s,this.TheOrganization=r,this.Roles=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new GE(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.ThePerson),t.push(this.TheOrganization),t.push(this.Roles),t}},jE=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.HasQuantities=i,this.Discrimination=n,this.Quality=o,this.Usage=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new jE(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.HasQuantities),t.push(this.Discrimination),t.push(this.Quality),t.push(this.Usage),t}},zE=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.Name=s,this.Description=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new zE(t,e,i,n)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t}},VE=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.Unit=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new VE(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Unit),t}},WE=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l,this.ConstructionType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new WE(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t.push(this.ConstructionType),t}},YE=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new YE(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},XE=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new XE(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},qE=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new qE(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},KE=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new KE(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},JE=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new JE(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},$E=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.RepeatS=s,this.RepeatT=r,this.Mode=i,this.TextureTransform=n,this.Parameter=o,this.Width=a,this.Height=h,this.ColourComponents=c,this.Pixel=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new $E(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.RepeatS),t.push(this.RepeatT),t.push(this.Mode),t.push(this.TextureTransform),t.push(this.Parameter),t.push(this.Width),t.push(this.Height),t.push(this.ColourComponents),t.push(this.Pixel),t}},ZE=class{constructor(t,e,s){this.expressID=t,this.type=e,this.Location=s}static FromTape(t,e,s){let r=0,i=s[r++];return new ZE(t,e,i)}ToTape(){let t=[];return t.push(this.Location),t}},QE=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.SizeInX=s,this.SizeInY=r,this.Placement=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new QE(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.SizeInX),t.push(this.SizeInY),t.push(this.Placement),t}},tS=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.SizeInX=s,this.SizeInY=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new tS(t,e,i,n)}ToTape(){let t=[];return t.push(this.SizeInX),t.push(this.SizeInY),t}},eS=class{constructor(t,e,s){this.expressID=t,this.type=e,this.Position=s}static FromTape(t,e,s){let r=0,i=s[r++];return new eS(t,e,i)}ToTape(){let t=[];return t.push(this.Position),t}},sS=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new sS(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},rS=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new rS(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},iS=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new iS(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},nS=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,s){return new nS(t,e)}ToTape(){return[]}},oS=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.BasisCurve=s,this.PointParameter=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new oS(t,e,i,n)}ToTape(){let t=[];return t.push(this.BasisCurve),t.push(this.PointParameter),t}},aS=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.BasisSurface=s,this.PointParameterU=r,this.PointParameterV=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new aS(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.BasisSurface),t.push(this.PointParameterU),t.push(this.PointParameterV),t}},hS=class{constructor(t,e,s){this.expressID=t,this.type=e,this.Polygon=s}static FromTape(t,e,s){let r=0,i=s[r++];return new hS(t,e,i)}ToTape(){let t=[];return t.push(this.Polygon),t}},cS=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.BaseSurface=s,this.AgreementFlag=r,this.Position=i,this.PolygonalBoundary=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new cS(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.BaseSurface),t.push(this.AgreementFlag),t.push(this.Position),t.push(this.PolygonalBoundary),t}},lS=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.Coordinates=s,this.Closed=r,this.Faces=i,this.PnIndex=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new lS(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.Coordinates),t.push(this.Closed),t.push(this.Faces),t.push(this.PnIndex),t}},uS=class{constructor(t,e,s){this.expressID=t,this.type=e,this.Points=s}static FromTape(t,e,s){let r=0,i=s[r++];return new uS(t,e,i)}ToTape(){let t=[];return t.push(this.Points),t}},pS=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new pS(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t}},dS=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new dS(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t}},mS=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.Purpose=s,this.Description=r,this.UserDefinedPurpose=i,this.InternalLocation=n,this.AddressLines=o,this.PostalBox=a,this.Town=h,this.Region=c,this.PostalCode=l,this.Country=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new mS(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.Purpose),t.push(this.Description),t.push(this.UserDefinedPurpose),t.push(this.InternalLocation),t.push(this.AddressLines),t.push(this.PostalBox),t.push(this.Town),t.push(this.Region),t.push(this.PostalCode),t.push(this.Country),t}},fS=class{constructor(t,e,s){this.expressID=t,this.type=e,this.Name=s}static FromTape(t,e,s){let r=0,i=s[r++];return new fS(t,e,i)}ToTape(){let t=[];return t.push(this.Name),t}},gS=class{constructor(t,e,s){this.expressID=t,this.type=e,this.Name=s}static FromTape(t,e,s){let r=0,i=s[r++];return new gS(t,e,i)}ToTape(){let t=[];return t.push(this.Name),t}},yS=class{constructor(t,e,s){this.expressID=t,this.type=e,this.Name=s}static FromTape(t,e,s){let r=0,i=s[r++];return new yS(t,e,i)}ToTape(){let t=[];return t.push(this.Name),t}},TS=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,s){return new TS(t,e)}ToTape(){return[]}},vS=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new vS(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t}},bS=class{constructor(t,e,s){this.expressID=t,this.type=e,this.Name=s}static FromTape(t,e,s){let r=0,i=s[r++];return new bS(t,e,i)}ToTape(){let t=[];return t.push(this.Name),t}},wS=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,s){return new wS(t,e)}ToTape(){return[]}},xS=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.AssignedItems=i,this.Identifier=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new xS(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.AssignedItems),t.push(this.Identifier),t}},IS=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.AssignedItems=i,this.Identifier=n,this.LayerOn=o,this.LayerFrozen=a,this.LayerBlocked=h,this.LayerStyles=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new IS(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.AssignedItems),t.push(this.Identifier),t.push(this.LayerOn),t.push(this.LayerFrozen),t.push(this.LayerBlocked),t.push(this.LayerStyles),t}},ES=class{constructor(t,e,s){this.expressID=t,this.type=e,this.Name=s}static FromTape(t,e,s){let r=0,i=s[r++];return new ES(t,e,i)}ToTape(){let t=[];return t.push(this.Name),t}},SS=class{constructor(t,e,s){this.expressID=t,this.type=e,this.Styles=s}static FromTape(t,e,s){let r=0,i=s[r++];return new SS(t,e,i)}ToTape(){let t=[];return t.push(this.Styles),t}},AS=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.Identification=a,this.LongDescription=h,this.PredefinedType=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new AS(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.LongDescription),t.push(this.PredefinedType),t}},RS=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.Identification=h,this.LongDescription=c,this.ProcessType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new RS(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.Identification),t.push(this.LongDescription),t.push(this.ProcessType),t.push(this.PredefinedType),t}},CS=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.Identification=a,this.LongDescription=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new CS(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.LongDescription),t}},OS=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new OS(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t}},_S=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.Representations=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new _S(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Representations),t}},DS=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.Representations=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new DS(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Representations),t}},FS=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.ProfileType=s,this.ProfileName=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new FS(t,e,i,n)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t}},MS=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.Properties=i,this.ProfileDefinition=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new MS(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Properties),t.push(this.ProfileDefinition),t}},PS=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.LongName=a,this.Phase=h,this.RepresentationContexts=c,this.UnitsInContext=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new PS(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.LongName),t.push(this.Phase),t.push(this.RepresentationContexts),t.push(this.UnitsInContext),t}},NS=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.LongName=a,this.Phase=h,this.RepresentationContexts=c,this.UnitsInContext=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new NS(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.LongName),t.push(this.Phase),t.push(this.RepresentationContexts),t.push(this.UnitsInContext),t}},LS=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.Identification=a,this.PredefinedType=h,this.Status=c,this.LongDescription=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new LS(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.PredefinedType),t.push(this.Status),t.push(this.LongDescription),t}},kS=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.GeodeticDatum=i,this.VerticalDatum=n,this.MapProjection=o,this.MapZone=a,this.MapUnit=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new kS(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.GeodeticDatum),t.push(this.VerticalDatum),t.push(this.MapProjection),t.push(this.MapZone),t.push(this.MapUnit),t}},US=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new US(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},HS=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.Name=s,this.Description=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new HS(t,e,i,n)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t}},BS=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,s){return new BS(t,e)}ToTape(){return[]}},GS=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.UpperBoundValue=i,this.LowerBoundValue=n,this.Unit=o,this.SetPointValue=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new GS(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.UpperBoundValue),t.push(this.LowerBoundValue),t.push(this.Unit),t.push(this.SetPointValue),t}},jS=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new jS(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t}},zS=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.DependingProperty=i,this.DependantProperty=n,this.Expression=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new zS(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.DependingProperty),t.push(this.DependantProperty),t.push(this.Expression),t}},VS=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.EnumerationValues=i,this.EnumerationReference=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new VS(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.EnumerationValues),t.push(this.EnumerationReference),t}},WS=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.Name=s,this.EnumerationValues=r,this.Unit=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new WS(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.Name),t.push(this.EnumerationValues),t.push(this.Unit),t}},YS=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.ListValues=i,this.Unit=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new YS(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.ListValues),t.push(this.Unit),t}},XS=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.UsageName=i,this.PropertyReference=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new XS(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.UsageName),t.push(this.PropertyReference),t}},qS=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.HasProperties=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new qS(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.HasProperties),t}},KS=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new KS(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t}},JS=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.TemplateType=o,this.ApplicableEntity=a,this.HasPropertyTemplates=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new JS(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.TemplateType),t.push(this.ApplicableEntity),t.push(this.HasPropertyTemplates),t}},$S=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.NominalValue=i,this.Unit=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new $S(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.NominalValue),t.push(this.Unit),t}},ZS=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.DefiningValues=i,this.DefinedValues=n,this.Expression=o,this.DefiningUnit=a,this.DefinedUnit=h,this.CurveInterpolation=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new ZS(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.DefiningValues),t.push(this.DefinedValues),t.push(this.Expression),t.push(this.DefiningUnit),t.push(this.DefinedUnit),t.push(this.CurveInterpolation),t}},QS=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new QS(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t}},tA=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new tA(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t}},eA=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new eA(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},sA=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new sA(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},rA=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new rA(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},iA=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new iA(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},nA=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.ProxyType=c,this.Tag=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new nA(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.ProxyType),t.push(this.Tag),t}},oA=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new oA(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},aA=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new aA(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},hA=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.Unit=i,this.AreaValue=n,this.Formula=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new hA(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Unit),t.push(this.AreaValue),t.push(this.Formula),t}},cA=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.Unit=i,this.CountValue=n,this.Formula=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new cA(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Unit),t.push(this.CountValue),t.push(this.Formula),t}},lA=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.Unit=i,this.LengthValue=n,this.Formula=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new lA(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Unit),t.push(this.LengthValue),t.push(this.Formula),t}},uA=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new uA(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t}},pA=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.Unit=i,this.TimeValue=n,this.Formula=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new pA(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Unit),t.push(this.TimeValue),t.push(this.Formula),t}},dA=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.Unit=i,this.VolumeValue=n,this.Formula=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new dA(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Unit),t.push(this.VolumeValue),t.push(this.Formula),t}},mA=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.Unit=i,this.WeightValue=n,this.Formula=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new mA(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Unit),t.push(this.WeightValue),t.push(this.Formula),t}},fA=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new fA(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},gA=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new gA(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},yA=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new yA(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},TA=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new TA(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},vA=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new vA(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},bA=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new bA(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},wA=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.Degree=s,this.ControlPointsList=r,this.CurveForm=i,this.ClosedCurve=n,this.SelfIntersect=o,this.KnotMultiplicities=a,this.Knots=h,this.KnotSpec=c,this.WeightsData=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new wA(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.Degree),t.push(this.ControlPointsList),t.push(this.CurveForm),t.push(this.ClosedCurve),t.push(this.SelfIntersect),t.push(this.KnotMultiplicities),t.push(this.Knots),t.push(this.KnotSpec),t.push(this.WeightsData),t}},xA=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d,m){this.expressID=t,this.type=e,this.UDegree=s,this.VDegree=r,this.ControlPointsList=i,this.SurfaceForm=n,this.UClosed=o,this.VClosed=a,this.SelfIntersect=h,this.UMultiplicities=c,this.VMultiplicities=l,this.UKnots=u,this.VKnots=p,this.KnotSpec=d,this.WeightsData=m}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++],g=s[r++];return new xA(t,e,i,n,o,a,h,c,l,u,p,d,m,f,g)}ToTape(){let t=[];return t.push(this.UDegree),t.push(this.VDegree),t.push(this.ControlPointsList),t.push(this.SurfaceForm),t.push(this.UClosed),t.push(this.VClosed),t.push(this.SelfIntersect),t.push(this.UMultiplicities),t.push(this.VMultiplicities),t.push(this.UKnots),t.push(this.VKnots),t.push(this.KnotSpec),t.push(this.WeightsData),t}},IA=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.ProfileType=s,this.ProfileName=r,this.Position=i,this.XDim=n,this.YDim=o,this.WallThickness=a,this.InnerFilletRadius=h,this.OuterFilletRadius=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new IA(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t.push(this.XDim),t.push(this.YDim),t.push(this.WallThickness),t.push(this.InnerFilletRadius),t.push(this.OuterFilletRadius),t}},EA=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.ProfileType=s,this.ProfileName=r,this.Position=i,this.XDim=n,this.YDim=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new EA(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t.push(this.XDim),t.push(this.YDim),t}},SA=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.Position=s,this.XLength=r,this.YLength=i,this.Height=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new SA(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.Position),t.push(this.XLength),t.push(this.YLength),t.push(this.Height),t}},AA=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.BasisSurface=s,this.U1=r,this.V1=i,this.U2=n,this.V2=o,this.Usense=a,this.Vsense=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new AA(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.BasisSurface),t.push(this.U1),t.push(this.V1),t.push(this.U2),t.push(this.V2),t.push(this.Usense),t.push(this.Vsense),t}},RA=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.RecurrenceType=s,this.DayComponent=r,this.WeekdayComponent=i,this.MonthComponent=n,this.Position=o,this.Interval=a,this.Occurrences=h,this.TimePeriods=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new RA(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.RecurrenceType),t.push(this.DayComponent),t.push(this.WeekdayComponent),t.push(this.MonthComponent),t.push(this.Position),t.push(this.Interval),t.push(this.Occurrences),t.push(this.TimePeriods),t}},CA=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.TypeIdentifier=s,this.AttributeIdentifier=r,this.InstanceName=i,this.ListPositions=n,this.InnerReference=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new CA(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.TypeIdentifier),t.push(this.AttributeIdentifier),t.push(this.InstanceName),t.push(this.ListPositions),t.push(this.InnerReference),t}},OA=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.PredefinedType=c,this.RestartDistance=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new OA(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.PredefinedType),t.push(this.RestartDistance),t}},_A=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.StartTime=i,this.EndTime=n,this.TimeSeriesDataType=o,this.DataOrigin=a,this.UserDefinedDataOrigin=h,this.Unit=c,this.TimeStep=l,this.Values=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new _A(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.StartTime),t.push(this.EndTime),t.push(this.TimeSeriesDataType),t.push(this.DataOrigin),t.push(this.UserDefinedDataOrigin),t.push(this.Unit),t.push(this.TimeStep),t.push(this.Values),t}},DA=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.TotalCrossSectionArea=s,this.SteelGrade=r,this.BarSurface=i,this.EffectiveDepth=n,this.NominalBarDiameter=o,this.BarCount=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new DA(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.TotalCrossSectionArea),t.push(this.SteelGrade),t.push(this.BarSurface),t.push(this.EffectiveDepth),t.push(this.NominalBarDiameter),t.push(this.BarCount),t}},FA=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.DefinitionType=o,this.ReinforcementSectionDefinitions=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new FA(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.DefinitionType),t.push(this.ReinforcementSectionDefinitions),t}},MA=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d,m,f){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.SteelGrade=l,this.NominalDiameter=u,this.CrossSectionArea=p,this.BarLength=d,this.PredefinedType=m,this.BarSurface=f}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++],g=s[r++],y=s[r++];return new MA(t,e,i,n,o,a,h,c,l,u,p,d,m,f,g,y)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.SteelGrade),t.push(this.NominalDiameter),t.push(this.CrossSectionArea),t.push(this.BarLength),t.push(this.PredefinedType),t.push(this.BarSurface),t}},PA=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d,m,f,g,y){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u,this.NominalDiameter=p,this.CrossSectionArea=d,this.BarLength=m,this.BarSurface=f,this.BendingShapeCode=g,this.BendingParameters=y}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++],g=s[r++],y=s[r++],T=s[r++],v=s[r++];return new PA(t,e,i,n,o,a,h,c,l,u,p,d,m,f,g,y,T,v)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t.push(this.NominalDiameter),t.push(this.CrossSectionArea),t.push(this.BarLength),t.push(this.BarSurface),t.push(this.BendingShapeCode),t.push(this.BendingParameters),t}},NA=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.SteelGrade=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new NA(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.SteelGrade),t}},LA=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new LA(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},kA=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d,m,f,g,y,T,v){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.SteelGrade=l,this.MeshLength=u,this.MeshWidth=p,this.LongitudinalBarNominalDiameter=d,this.TransverseBarNominalDiameter=m,this.LongitudinalBarCrossSectionArea=f,this.TransverseBarCrossSectionArea=g,this.LongitudinalBarSpacing=y,this.TransverseBarSpacing=T,this.PredefinedType=v}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++],g=s[r++],y=s[r++],T=s[r++],v=s[r++],b=s[r++],w=s[r++];return new kA(t,e,i,n,o,a,h,c,l,u,p,d,m,f,g,y,T,v,b,w)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.SteelGrade),t.push(this.MeshLength),t.push(this.MeshWidth),t.push(this.LongitudinalBarNominalDiameter),t.push(this.TransverseBarNominalDiameter),t.push(this.LongitudinalBarCrossSectionArea),t.push(this.TransverseBarCrossSectionArea),t.push(this.LongitudinalBarSpacing),t.push(this.TransverseBarSpacing),t.push(this.PredefinedType),t}},UA=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d,m,f,g,y,T,v,b,w){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u,this.MeshLength=p,this.MeshWidth=d,this.LongitudinalBarNominalDiameter=m,this.TransverseBarNominalDiameter=f,this.LongitudinalBarCrossSectionArea=g,this.TransverseBarCrossSectionArea=y,this.LongitudinalBarSpacing=T,this.TransverseBarSpacing=v,this.BendingShapeCode=b,this.BendingParameters=w}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++],g=s[r++],y=s[r++],T=s[r++],v=s[r++],b=s[r++],w=s[r++],x=s[r++],I=s[r++];return new UA(t,e,i,n,o,a,h,c,l,u,p,d,m,f,g,y,T,v,b,w,x,I)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t.push(this.MeshLength),t.push(this.MeshWidth),t.push(this.LongitudinalBarNominalDiameter),t.push(this.TransverseBarNominalDiameter),t.push(this.LongitudinalBarCrossSectionArea),t.push(this.TransverseBarCrossSectionArea),t.push(this.LongitudinalBarSpacing),t.push(this.TransverseBarSpacing),t.push(this.BendingShapeCode),t.push(this.BendingParameters),t}},HA=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.RelatingObject=o,this.RelatedObjects=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new HA(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingObject),t.push(this.RelatedObjects),t}},BA=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.RelatedObjects=o,this.RelatedObjectsType=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new BA(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatedObjectsType),t}},GA=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.RelatedObjects=o,this.RelatedObjectsType=a,this.RelatingActor=h,this.ActingRole=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new GA(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatedObjectsType),t.push(this.RelatingActor),t.push(this.ActingRole),t}},jA=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.RelatedObjects=o,this.RelatedObjectsType=a,this.RelatingControl=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new jA(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatedObjectsType),t.push(this.RelatingControl),t}},zA=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.RelatedObjects=o,this.RelatedObjectsType=a,this.RelatingGroup=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new zA(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatedObjectsType),t.push(this.RelatingGroup),t}},VA=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.RelatedObjects=o,this.RelatedObjectsType=a,this.RelatingGroup=h,this.Factor=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new VA(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatedObjectsType),t.push(this.RelatingGroup),t.push(this.Factor),t}},WA=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.RelatedObjects=o,this.RelatedObjectsType=a,this.RelatingProcess=h,this.QuantityInProcess=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new WA(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatedObjectsType),t.push(this.RelatingProcess),t.push(this.QuantityInProcess),t}},YA=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.RelatedObjects=o,this.RelatedObjectsType=a,this.RelatingProduct=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new YA(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatedObjectsType),t.push(this.RelatingProduct),t}},XA=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.RelatedObjects=o,this.RelatedObjectsType=a,this.RelatingResource=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new XA(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatedObjectsType),t.push(this.RelatingResource),t}},qA=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.RelatedObjects=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new qA(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t}},KA=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.RelatedObjects=o,this.RelatingApproval=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new KA(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatingApproval),t}},JA=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.RelatedObjects=o,this.RelatingClassification=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new JA(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatingClassification),t}},$A=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.RelatedObjects=o,this.Intent=a,this.RelatingConstraint=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new $A(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.Intent),t.push(this.RelatingConstraint),t}},ZA=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.RelatedObjects=o,this.RelatingDocument=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new ZA(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatingDocument),t}},QA=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.RelatedObjects=o,this.RelatingLibrary=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new QA(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatingLibrary),t}},tR=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.RelatedObjects=o,this.RelatingMaterial=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new tR(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatingMaterial),t}},eR=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new eR(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t}},sR=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ConnectionGeometry=o,this.RelatingElement=a,this.RelatedElement=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new sR(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ConnectionGeometry),t.push(this.RelatingElement),t.push(this.RelatedElement),t}},rR=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ConnectionGeometry=o,this.RelatingElement=a,this.RelatedElement=h,this.RelatingPriorities=c,this.RelatedPriorities=l,this.RelatedConnectionType=u,this.RelatingConnectionType=p}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++];return new rR(t,e,i,n,o,a,h,c,l,u,p,d,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ConnectionGeometry),t.push(this.RelatingElement),t.push(this.RelatedElement),t.push(this.RelatingPriorities),t.push(this.RelatedPriorities),t.push(this.RelatedConnectionType),t.push(this.RelatingConnectionType),t}},iR=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.RelatingPort=o,this.RelatedElement=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new iR(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingPort),t.push(this.RelatedElement),t}},nR=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.RelatingPort=o,this.RelatedPort=a,this.RealizingElement=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new nR(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingPort),t.push(this.RelatedPort),t.push(this.RealizingElement),t}},oR=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.RelatingElement=o,this.RelatedStructuralActivity=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new oR(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingElement),t.push(this.RelatedStructuralActivity),t}},aR=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.RelatingStructuralMember=o,this.RelatedStructuralConnection=a,this.AppliedCondition=h,this.AdditionalConditions=c,this.SupportedLength=l,this.ConditionCoordinateSystem=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new aR(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingStructuralMember),t.push(this.RelatedStructuralConnection),t.push(this.AppliedCondition),t.push(this.AdditionalConditions),t.push(this.SupportedLength),t.push(this.ConditionCoordinateSystem),t}},hR=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.RelatingStructuralMember=o,this.RelatedStructuralConnection=a,this.AppliedCondition=h,this.AdditionalConditions=c,this.SupportedLength=l,this.ConditionCoordinateSystem=u,this.ConnectionConstraint=p}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++];return new hR(t,e,i,n,o,a,h,c,l,u,p,d,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingStructuralMember),t.push(this.RelatedStructuralConnection),t.push(this.AppliedCondition),t.push(this.AdditionalConditions),t.push(this.SupportedLength),t.push(this.ConditionCoordinateSystem),t.push(this.ConnectionConstraint),t}},cR=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ConnectionGeometry=o,this.RelatingElement=a,this.RelatedElement=h,this.RealizingElements=c,this.ConnectionType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new cR(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ConnectionGeometry),t.push(this.RelatingElement),t.push(this.RelatedElement),t.push(this.RealizingElements),t.push(this.ConnectionType),t}},lR=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.RelatedElements=o,this.RelatingStructure=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new lR(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedElements),t.push(this.RelatingStructure),t}},uR=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.RelatingBuildingElement=o,this.RelatedCoverings=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new uR(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingBuildingElement),t.push(this.RelatedCoverings),t}},pR=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.RelatingSpace=o,this.RelatedCoverings=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new pR(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingSpace),t.push(this.RelatedCoverings),t}},dR=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.RelatingContext=o,this.RelatedDefinitions=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new dR(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingContext),t.push(this.RelatedDefinitions),t}},mR=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new mR(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t}},fR=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new fR(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t}},gR=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.RelatedObjects=o,this.RelatingObject=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new gR(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatingObject),t}},yR=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.RelatedObjects=o,this.RelatingPropertyDefinition=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new yR(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatingPropertyDefinition),t}},TR=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.RelatedPropertySets=o,this.RelatingTemplate=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new TR(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedPropertySets),t.push(this.RelatingTemplate),t}},vR=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.RelatedObjects=o,this.RelatingType=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new vR(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatingType),t}},bR=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.RelatingOpeningElement=o,this.RelatedBuildingElement=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new bR(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingOpeningElement),t.push(this.RelatedBuildingElement),t}},wR=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.RelatedControlElements=o,this.RelatingFlowElement=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new wR(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedControlElements),t.push(this.RelatingFlowElement),t}},xR=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.RelatingElement=o,this.RelatedElement=a,this.InterferenceGeometry=h,this.InterferenceType=c,this.ImpliedOrder=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new xR(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingElement),t.push(this.RelatedElement),t.push(this.InterferenceGeometry),t.push(this.InterferenceType),t.push(this.ImpliedOrder),t}},IR=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.RelatingObject=o,this.RelatedObjects=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new IR(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingObject),t.push(this.RelatedObjects),t}},ER=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.RelatingPositioningElement=o,this.RelatedProducts=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new ER(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingPositioningElement),t.push(this.RelatedProducts),t}},SR=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.RelatingElement=o,this.RelatedFeatureElement=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new SR(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingElement),t.push(this.RelatedFeatureElement),t}},AR=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.RelatedElements=o,this.RelatingStructure=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new AR(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedElements),t.push(this.RelatingStructure),t}},RR=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.RelatingProcess=o,this.RelatedProcess=a,this.TimeLag=h,this.SequenceType=c,this.UserDefinedSequenceType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new RR(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingProcess),t.push(this.RelatedProcess),t.push(this.TimeLag),t.push(this.SequenceType),t.push(this.UserDefinedSequenceType),t}},CR=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.RelatingSystem=o,this.RelatedBuildings=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new CR(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingSystem),t.push(this.RelatedBuildings),t}},OR=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.RelatingSpace=o,this.RelatedBuildingElement=a,this.ConnectionGeometry=h,this.PhysicalOrVirtualBoundary=c,this.InternalOrExternalBoundary=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new OR(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingSpace),t.push(this.RelatedBuildingElement),t.push(this.ConnectionGeometry),t.push(this.PhysicalOrVirtualBoundary),t.push(this.InternalOrExternalBoundary),t}},_R=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.RelatingSpace=o,this.RelatedBuildingElement=a,this.ConnectionGeometry=h,this.PhysicalOrVirtualBoundary=c,this.InternalOrExternalBoundary=l,this.ParentBoundary=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new _R(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingSpace),t.push(this.RelatedBuildingElement),t.push(this.ConnectionGeometry),t.push(this.PhysicalOrVirtualBoundary),t.push(this.InternalOrExternalBoundary),t.push(this.ParentBoundary),t}},DR=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.RelatingSpace=o,this.RelatedBuildingElement=a,this.ConnectionGeometry=h,this.PhysicalOrVirtualBoundary=c,this.InternalOrExternalBoundary=l,this.ParentBoundary=u,this.CorrespondingBoundary=p}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++];return new DR(t,e,i,n,o,a,h,c,l,u,p,d,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingSpace),t.push(this.RelatedBuildingElement),t.push(this.ConnectionGeometry),t.push(this.PhysicalOrVirtualBoundary),t.push(this.InternalOrExternalBoundary),t.push(this.ParentBoundary),t.push(this.CorrespondingBoundary),t}},FR=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.RelatingBuildingElement=o,this.RelatedOpeningElement=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new FR(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingBuildingElement),t.push(this.RelatedOpeningElement),t}},MR=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new MR(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t}},PR=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.Transition=s,this.SameSense=r,this.ParentCurve=i,this.ParamLength=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new PR(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.Transition),t.push(this.SameSense),t.push(this.ParentCurve),t.push(this.ParamLength),t}},NR=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.ContextOfItems=s,this.RepresentationIdentifier=r,this.RepresentationType=i,this.Items=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new NR(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.ContextOfItems),t.push(this.RepresentationIdentifier),t.push(this.RepresentationType),t.push(this.Items),t}},LR=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.ContextIdentifier=s,this.ContextType=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new LR(t,e,i,n)}ToTape(){let t=[];return t.push(this.ContextIdentifier),t.push(this.ContextType),t}},kR=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,s){return new kR(t,e)}ToTape(){return[]}},UR=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.MappingOrigin=s,this.MappedRepresentation=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new UR(t,e,i,n)}ToTape(){let t=[];return t.push(this.MappingOrigin),t.push(this.MappedRepresentation),t}},HR=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.Identification=a,this.LongDescription=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new HR(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.LongDescription),t}},BR=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.RelatedResourceObjects=i,this.RelatingApproval=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new BR(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.RelatedResourceObjects),t.push(this.RelatingApproval),t}},GR=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.RelatingConstraint=i,this.RelatedResourceObjects=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new GR(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.RelatingConstraint),t.push(this.RelatedResourceObjects),t}},jR=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.Name=s,this.Description=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new jR(t,e,i,n)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t}},zR=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d,m,f,g,y,T,v){this.expressID=t,this.type=e,this.Name=s,this.DataOrigin=r,this.UserDefinedDataOrigin=i,this.ScheduleWork=n,this.ScheduleUsage=o,this.ScheduleStart=a,this.ScheduleFinish=h,this.ScheduleContour=c,this.LevelingDelay=l,this.IsOverAllocated=u,this.StatusTime=p,this.ActualWork=d,this.ActualUsage=m,this.ActualStart=f,this.ActualFinish=g,this.RemainingWork=y,this.RemainingUsage=T,this.Completion=v}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++],g=s[r++],y=s[r++],T=s[r++],v=s[r++],b=s[r++],w=s[r++];return new zR(t,e,i,n,o,a,h,c,l,u,p,d,m,f,g,y,T,v,b,w)}ToTape(){let t=[];return t.push(this.Name),t.push(this.DataOrigin),t.push(this.UserDefinedDataOrigin),t.push(this.ScheduleWork),t.push(this.ScheduleUsage),t.push(this.ScheduleStart),t.push(this.ScheduleFinish),t.push(this.ScheduleContour),t.push(this.LevelingDelay),t.push(this.IsOverAllocated),t.push(this.StatusTime),t.push(this.ActualWork),t.push(this.ActualUsage),t.push(this.ActualStart),t.push(this.ActualFinish),t.push(this.RemainingWork),t.push(this.RemainingUsage),t.push(this.Completion),t}},VR=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.SweptArea=s,this.Position=r,this.Axis=i,this.Angle=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new VR(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.SweptArea),t.push(this.Position),t.push(this.Axis),t.push(this.Angle),t}},WR=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.SweptArea=s,this.Position=r,this.Axis=i,this.Angle=n,this.EndSweptArea=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new WR(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.SweptArea),t.push(this.Position),t.push(this.Axis),t.push(this.Angle),t.push(this.EndSweptArea),t}},YR=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.Position=s,this.Height=r,this.BottomRadius=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new YR(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.Position),t.push(this.Height),t.push(this.BottomRadius),t}},XR=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.Position=s,this.Height=r,this.Radius=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new XR(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.Position),t.push(this.Height),t.push(this.Radius),t}},qR=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new qR(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},KR=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new KR(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},JR=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new JR(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t}},$R=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.ProfileType=s,this.ProfileName=r,this.Position=i,this.XDim=n,this.YDim=o,this.RoundingRadius=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new $R(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t.push(this.XDim),t.push(this.YDim),t.push(this.RoundingRadius),t}},ZR=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.Dimensions=s,this.UnitType=r,this.Prefix=i,this.Name=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new ZR(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.Dimensions),t.push(this.UnitType),t.push(this.Prefix),t.push(this.Name),t}},QR=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new QR(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},tC=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new tC(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},eC=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.Name=s,this.DataOrigin=r,this.UserDefinedDataOrigin=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new eC(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.Name),t.push(this.DataOrigin),t.push(this.UserDefinedDataOrigin),t}},sC=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.Curve3D=s,this.AssociatedGeometry=r,this.MasterRepresentation=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new sC(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.Curve3D),t.push(this.AssociatedGeometry),t.push(this.MasterRepresentation),t}},rC=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.SectionType=s,this.StartProfile=r,this.EndProfile=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new rC(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.SectionType),t.push(this.StartProfile),t.push(this.EndProfile),t}},iC=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.LongitudinalStartPosition=s,this.LongitudinalEndPosition=r,this.TransversePosition=i,this.ReinforcementRole=n,this.SectionDefinition=o,this.CrossSectionReinforcementDefinitions=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new iC(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.LongitudinalStartPosition),t.push(this.LongitudinalEndPosition),t.push(this.TransversePosition),t.push(this.ReinforcementRole),t.push(this.SectionDefinition),t.push(this.CrossSectionReinforcementDefinitions),t}},nC=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.Directrix=s,this.CrossSections=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new nC(t,e,i,n)}ToTape(){let t=[];return t.push(this.Directrix),t.push(this.CrossSections),t}},oC=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.Directrix=s,this.CrossSections=r,this.CrossSectionPositions=i,this.FixedAxisVertical=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new oC(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.Directrix),t.push(this.CrossSections),t.push(this.CrossSectionPositions),t.push(this.FixedAxisVertical),t}},aC=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.SpineCurve=s,this.CrossSections=r,this.CrossSectionPositions=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new aC(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.SpineCurve),t.push(this.CrossSections),t.push(this.CrossSectionPositions),t}},hC=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new hC(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},cC=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new cC(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},lC=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new lC(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},uC=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new uC(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},pC=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.ShapeRepresentations=s,this.Name=r,this.Description=i,this.ProductDefinitional=n,this.PartOfProductDefinitionShape=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new pC(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.ShapeRepresentations),t.push(this.Name),t.push(this.Description),t.push(this.ProductDefinitional),t.push(this.PartOfProductDefinitionShape),t}},dC=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.ContextOfItems=s,this.RepresentationIdentifier=r,this.RepresentationType=i,this.Items=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new dC(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.ContextOfItems),t.push(this.RepresentationIdentifier),t.push(this.RepresentationType),t.push(this.Items),t}},mC=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.ContextOfItems=s,this.RepresentationIdentifier=r,this.RepresentationType=i,this.Items=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new mC(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.ContextOfItems),t.push(this.RepresentationIdentifier),t.push(this.RepresentationType),t.push(this.Items),t}},fC=class{constructor(t,e,s){this.expressID=t,this.type=e,this.SbsmBoundary=s}static FromTape(t,e,s){let r=0,i=s[r++];return new fC(t,e,i)}ToTape(){let t=[];return t.push(this.SbsmBoundary),t}},gC=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.Name=s,this.Description=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new gC(t,e,i,n)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t}},yC=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.TemplateType=o,this.PrimaryMeasureType=a,this.SecondaryMeasureType=h,this.Enumerators=c,this.PrimaryUnit=l,this.SecondaryUnit=u,this.Expression=p,this.AccessState=d}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++];return new yC(t,e,i,n,o,a,h,c,l,u,p,d,m,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.TemplateType),t.push(this.PrimaryMeasureType),t.push(this.SecondaryMeasureType),t.push(this.Enumerators),t.push(this.PrimaryUnit),t.push(this.SecondaryUnit),t.push(this.Expression),t.push(this.AccessState),t}},TC=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d,m,f){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.LongName=c,this.CompositionType=l,this.RefLatitude=u,this.RefLongitude=p,this.RefElevation=d,this.LandTitleNumber=m,this.SiteAddress=f}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++],g=s[r++],y=s[r++];return new TC(t,e,i,n,o,a,h,c,l,u,p,d,m,f,g,y)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.LongName),t.push(this.CompositionType),t.push(this.RefLatitude),t.push(this.RefLongitude),t.push(this.RefElevation),t.push(this.LandTitleNumber),t.push(this.SiteAddress),t}},vC=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new vC(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},bC=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new bC(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},wC=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new wC(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},xC=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new xC(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},IC=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.Name=s,this.SlippageX=r,this.SlippageY=i,this.SlippageZ=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new IC(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.SlippageX),t.push(this.SlippageY),t.push(this.SlippageZ),t}},EC=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new EC(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},SC=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new SC(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},AC=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,s){return new AC(t,e)}ToTape(){return[]}},RC=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.LongName=c,this.CompositionType=l,this.PredefinedType=u,this.ElevationWithFlooring=p}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++];return new RC(t,e,i,n,o,a,h,c,l,u,p,d,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.LongName),t.push(this.CompositionType),t.push(this.PredefinedType),t.push(this.ElevationWithFlooring),t}},CC=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new CC(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},OC=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new OC(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},_C=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u,this.LongName=p}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++];return new _C(t,e,i,n,o,a,h,c,l,u,p,d,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t.push(this.LongName),t}},DC=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.LongName=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new DC(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.LongName),t}},FC=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new FC(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},MC=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.LongName=c,this.CompositionType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new MC(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.LongName),t.push(this.CompositionType),t}},PC=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new PC(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},NC=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.LongName=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new NC(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.LongName),t.push(this.PredefinedType),t}},LC=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u,this.LongName=p}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++];return new LC(t,e,i,n,o,a,h,c,l,u,p,d,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t.push(this.LongName),t}},kC=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.Position=s,this.Radius=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new kC(t,e,i,n)}ToTape(){let t=[];return t.push(this.Position),t.push(this.Radius),t}},UC=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.Position=s,this.Radius=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new UC(t,e,i,n)}ToTape(){let t=[];return t.push(this.Position),t.push(this.Radius),t}},HC=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new HC(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},BC=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new BC(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},GC=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new GC(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},jC=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d,m){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.NumberOfRisers=l,this.NumberOfTreads=u,this.RiserHeight=p,this.TreadLength=d,this.PredefinedType=m}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++],g=s[r++];return new jC(t,e,i,n,o,a,h,c,l,u,p,d,m,f,g)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.NumberOfRisers),t.push(this.NumberOfTreads),t.push(this.RiserHeight),t.push(this.TreadLength),t.push(this.PredefinedType),t}},zC=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new zC(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},VC=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new VC(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},WC=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.AppliedLoad=c,this.GlobalOrLocal=l,this.DestabilizingLoad=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new WC(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedLoad),t.push(this.GlobalOrLocal),t.push(this.DestabilizingLoad),t}},YC=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.AppliedLoad=c,this.GlobalOrLocal=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new YC(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedLoad),t.push(this.GlobalOrLocal),t}},XC=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.PredefinedType=a,this.OrientationOf2DPlane=h,this.LoadedBy=c,this.HasResults=l,this.SharedPlacement=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new XC(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.PredefinedType),t.push(this.OrientationOf2DPlane),t.push(this.LoadedBy),t.push(this.HasResults),t.push(this.SharedPlacement),t}},qC=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.AppliedCondition=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new qC(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedCondition),t}},KC=class{constructor(t,e,s){this.expressID=t,this.type=e,this.Name=s}static FromTape(t,e,s){let r=0,i=s[r++];return new KC(t,e,i)}ToTape(){let t=[];return t.push(this.Name),t}},JC=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.AppliedLoad=c,this.GlobalOrLocal=l,this.DestabilizingLoad=u,this.ProjectedOrTrue=p,this.PredefinedType=d}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++];return new JC(t,e,i,n,o,a,h,c,l,u,p,d,m,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedLoad),t.push(this.GlobalOrLocal),t.push(this.DestabilizingLoad),t.push(this.ProjectedOrTrue),t.push(this.PredefinedType),t}},$C=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.AppliedCondition=c,this.Axis=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new $C(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedCondition),t.push(this.Axis),t}},ZC=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.PredefinedType=c,this.Axis=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new ZC(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.PredefinedType),t.push(this.Axis),t}},QC=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.PredefinedType=c,this.Axis=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new QC(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.PredefinedType),t.push(this.Axis),t}},tO=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.AppliedLoad=c,this.GlobalOrLocal=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new tO(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedLoad),t.push(this.GlobalOrLocal),t.push(this.PredefinedType),t}},eO=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new eO(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t}},sO=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.AppliedLoad=c,this.GlobalOrLocal=l,this.DestabilizingLoad=u,this.ProjectedOrTrue=p,this.PredefinedType=d}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++];return new sO(t,e,i,n,o,a,h,c,l,u,p,d,m,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedLoad),t.push(this.GlobalOrLocal),t.push(this.DestabilizingLoad),t.push(this.ProjectedOrTrue),t.push(this.PredefinedType),t}},rO=class{constructor(t,e,s){this.expressID=t,this.type=e,this.Name=s}static FromTape(t,e,s){let r=0,i=s[r++];return new rO(t,e,i)}ToTape(){let t=[];return t.push(this.Name),t}},iO=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.PredefinedType=a,this.ActionType=h,this.ActionSource=c,this.Coefficient=l,this.Purpose=u,this.SelfWeightCoefficients=p}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++];return new iO(t,e,i,n,o,a,h,c,l,u,p,d,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.PredefinedType),t.push(this.ActionType),t.push(this.ActionSource),t.push(this.Coefficient),t.push(this.Purpose),t.push(this.SelfWeightCoefficients),t}},nO=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.Name=s,this.Values=r,this.Locations=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new nO(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Values),t.push(this.Locations),t}},oO=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.PredefinedType=a,this.ActionType=h,this.ActionSource=c,this.Coefficient=l,this.Purpose=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new oO(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.PredefinedType),t.push(this.ActionType),t.push(this.ActionSource),t.push(this.Coefficient),t.push(this.Purpose),t}},aO=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.Name=s,this.LinearForceX=r,this.LinearForceY=i,this.LinearForceZ=n,this.LinearMomentX=o,this.LinearMomentY=a,this.LinearMomentZ=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new aO(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.Name),t.push(this.LinearForceX),t.push(this.LinearForceY),t.push(this.LinearForceZ),t.push(this.LinearMomentX),t.push(this.LinearMomentY),t.push(this.LinearMomentZ),t}},hO=class{constructor(t,e,s){this.expressID=t,this.type=e,this.Name=s}static FromTape(t,e,s){let r=0,i=s[r++];return new hO(t,e,i)}ToTape(){let t=[];return t.push(this.Name),t}},cO=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.Name=s,this.PlanarForceX=r,this.PlanarForceY=i,this.PlanarForceZ=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new cO(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.PlanarForceX),t.push(this.PlanarForceY),t.push(this.PlanarForceZ),t}},lO=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.Name=s,this.DisplacementX=r,this.DisplacementY=i,this.DisplacementZ=n,this.RotationalDisplacementRX=o,this.RotationalDisplacementRY=a,this.RotationalDisplacementRZ=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new lO(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.Name),t.push(this.DisplacementX),t.push(this.DisplacementY),t.push(this.DisplacementZ),t.push(this.RotationalDisplacementRX),t.push(this.RotationalDisplacementRY),t.push(this.RotationalDisplacementRZ),t}},uO=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.Name=s,this.DisplacementX=r,this.DisplacementY=i,this.DisplacementZ=n,this.RotationalDisplacementRX=o,this.RotationalDisplacementRY=a,this.RotationalDisplacementRZ=h,this.Distortion=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new uO(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.Name),t.push(this.DisplacementX),t.push(this.DisplacementY),t.push(this.DisplacementZ),t.push(this.RotationalDisplacementRX),t.push(this.RotationalDisplacementRY),t.push(this.RotationalDisplacementRZ),t.push(this.Distortion),t}},pO=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.Name=s,this.ForceX=r,this.ForceY=i,this.ForceZ=n,this.MomentX=o,this.MomentY=a,this.MomentZ=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new pO(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.Name),t.push(this.ForceX),t.push(this.ForceY),t.push(this.ForceZ),t.push(this.MomentX),t.push(this.MomentY),t.push(this.MomentZ),t}},dO=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.Name=s,this.ForceX=r,this.ForceY=i,this.ForceZ=n,this.MomentX=o,this.MomentY=a,this.MomentZ=h,this.WarpingMoment=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new dO(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.Name),t.push(this.ForceX),t.push(this.ForceY),t.push(this.ForceZ),t.push(this.MomentX),t.push(this.MomentY),t.push(this.MomentZ),t.push(this.WarpingMoment),t}},mO=class{constructor(t,e,s){this.expressID=t,this.type=e,this.Name=s}static FromTape(t,e,s){let r=0,i=s[r++];return new mO(t,e,i)}ToTape(){let t=[];return t.push(this.Name),t}},fO=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.Name=s,this.DeltaTConstant=r,this.DeltaTY=i,this.DeltaTZ=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new fO(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.DeltaTConstant),t.push(this.DeltaTY),t.push(this.DeltaTZ),t}},gO=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new gO(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t}},yO=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.AppliedLoad=c,this.GlobalOrLocal=l,this.DestabilizingLoad=u,this.ProjectedOrTrue=p,this.PredefinedType=d}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++];return new yO(t,e,i,n,o,a,h,c,l,u,p,d,m,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedLoad),t.push(this.GlobalOrLocal),t.push(this.DestabilizingLoad),t.push(this.ProjectedOrTrue),t.push(this.PredefinedType),t}},TO=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.AppliedLoad=c,this.GlobalOrLocal=l,this.DestabilizingLoad=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new TO(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedLoad),t.push(this.GlobalOrLocal),t.push(this.DestabilizingLoad),t}},vO=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.AppliedCondition=c,this.ConditionCoordinateSystem=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new vO(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedCondition),t.push(this.ConditionCoordinateSystem),t}},bO=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.AppliedLoad=c,this.GlobalOrLocal=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new bO(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedLoad),t.push(this.GlobalOrLocal),t}},wO=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.AppliedLoad=c,this.GlobalOrLocal=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new wO(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedLoad),t.push(this.GlobalOrLocal),t}},xO=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.TheoryType=a,this.ResultForLoadGroup=h,this.IsLinear=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new xO(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.TheoryType),t.push(this.ResultForLoadGroup),t.push(this.IsLinear),t}},IO=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.AppliedLoad=c,this.GlobalOrLocal=l,this.DestabilizingLoad=u,this.ProjectedOrTrue=p,this.PredefinedType=d}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++];return new IO(t,e,i,n,o,a,h,c,l,u,p,d,m,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedLoad),t.push(this.GlobalOrLocal),t.push(this.DestabilizingLoad),t.push(this.ProjectedOrTrue),t.push(this.PredefinedType),t}},EO=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.AppliedCondition=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new EO(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedCondition),t}},SO=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.PredefinedType=c,this.Thickness=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new SO(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.PredefinedType),t.push(this.Thickness),t}},AO=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.PredefinedType=c,this.Thickness=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new AO(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.PredefinedType),t.push(this.Thickness),t}},RO=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.AppliedLoad=c,this.GlobalOrLocal=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new RO(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedLoad),t.push(this.GlobalOrLocal),t.push(this.PredefinedType),t}},CO=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.ContextOfItems=s,this.RepresentationIdentifier=r,this.RepresentationType=i,this.Items=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new CO(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.ContextOfItems),t.push(this.RepresentationIdentifier),t.push(this.RepresentationType),t.push(this.Items),t}},OO=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.Item=s,this.Styles=r,this.Name=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new OO(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.Item),t.push(this.Styles),t.push(this.Name),t}},_O=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.ContextOfItems=s,this.RepresentationIdentifier=r,this.RepresentationType=i,this.Items=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new _O(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.ContextOfItems),t.push(this.RepresentationIdentifier),t.push(this.RepresentationType),t.push(this.Items),t}},DO=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.Identification=a,this.LongDescription=h,this.Usage=c,this.BaseCosts=l,this.BaseQuantity=u,this.PredefinedType=p}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++];return new DO(t,e,i,n,o,a,h,c,l,u,p,d,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.LongDescription),t.push(this.Usage),t.push(this.BaseCosts),t.push(this.BaseQuantity),t.push(this.PredefinedType),t}},FO=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.Identification=h,this.LongDescription=c,this.ResourceType=l,this.BaseCosts=u,this.BaseQuantity=p,this.PredefinedType=d}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++];return new FO(t,e,i,n,o,a,h,c,l,u,p,d,m,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.Identification),t.push(this.LongDescription),t.push(this.ResourceType),t.push(this.BaseCosts),t.push(this.BaseQuantity),t.push(this.PredefinedType),t}},MO=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.EdgeStart=s,this.EdgeEnd=r,this.ParentEdge=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new MO(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.EdgeStart),t.push(this.EdgeEnd),t.push(this.ParentEdge),t}},PO=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,s){return new PO(t,e)}ToTape(){return[]}},NO=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.Curve3D=s,this.AssociatedGeometry=r,this.MasterRepresentation=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new NO(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.Curve3D),t.push(this.AssociatedGeometry),t.push(this.MasterRepresentation),t}},LO=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.SweptArea=s,this.Position=r,this.Directrix=i,this.StartParam=n,this.EndParam=o,this.ReferenceSurface=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new LO(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.SweptArea),t.push(this.Position),t.push(this.Directrix),t.push(this.StartParam),t.push(this.EndParam),t.push(this.ReferenceSurface),t}},kO=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new kO(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},UO=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.SweptCurve=s,this.Position=r,this.ExtrudedDirection=i,this.Depth=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new UO(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.SweptCurve),t.push(this.Position),t.push(this.ExtrudedDirection),t.push(this.Depth),t}},HO=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.SweptCurve=s,this.Position=r,this.AxisPosition=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new HO(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.SweptCurve),t.push(this.Position),t.push(this.AxisPosition),t}},BO=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.Name=s,this.SurfaceReinforcement1=r,this.SurfaceReinforcement2=i,this.ShearReinforcement=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new BO(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.SurfaceReinforcement1),t.push(this.SurfaceReinforcement2),t.push(this.ShearReinforcement),t}},GO=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.Name=s,this.Side=r,this.Styles=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new GO(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Side),t.push(this.Styles),t}},jO=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.DiffuseTransmissionColour=s,this.DiffuseReflectionColour=r,this.TransmissionColour=i,this.ReflectanceColour=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new jO(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.DiffuseTransmissionColour),t.push(this.DiffuseReflectionColour),t.push(this.TransmissionColour),t.push(this.ReflectanceColour),t}},zO=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.RefractionIndex=s,this.DispersionFactor=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new zO(t,e,i,n)}ToTape(){let t=[];return t.push(this.RefractionIndex),t.push(this.DispersionFactor),t}},VO=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.SurfaceColour=s,this.Transparency=r,this.DiffuseColour=i,this.TransmissionColour=n,this.DiffuseTransmissionColour=o,this.ReflectionColour=a,this.SpecularColour=h,this.SpecularHighlight=c,this.ReflectanceMethod=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new VO(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.SurfaceColour),t.push(this.Transparency),t.push(this.DiffuseColour),t.push(this.TransmissionColour),t.push(this.DiffuseTransmissionColour),t.push(this.ReflectionColour),t.push(this.SpecularColour),t.push(this.SpecularHighlight),t.push(this.ReflectanceMethod),t}},WO=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.SurfaceColour=s,this.Transparency=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new WO(t,e,i,n)}ToTape(){let t=[];return t.push(this.SurfaceColour),t.push(this.Transparency),t}},YO=class{constructor(t,e,s){this.expressID=t,this.type=e,this.Textures=s}static FromTape(t,e,s){let r=0,i=s[r++];return new YO(t,e,i)}ToTape(){let t=[];return t.push(this.Textures),t}},XO=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.RepeatS=s,this.RepeatT=r,this.Mode=i,this.TextureTransform=n,this.Parameter=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new XO(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.RepeatS),t.push(this.RepeatT),t.push(this.Mode),t.push(this.TextureTransform),t.push(this.Parameter),t}},qO=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.SweptArea=s,this.Position=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new qO(t,e,i,n)}ToTape(){let t=[];return t.push(this.SweptArea),t.push(this.Position),t}},KO=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.Directrix=s,this.Radius=r,this.InnerRadius=i,this.StartParam=n,this.EndParam=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new KO(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.Directrix),t.push(this.Radius),t.push(this.InnerRadius),t.push(this.StartParam),t.push(this.EndParam),t}},JO=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.Directrix=s,this.Radius=r,this.InnerRadius=i,this.StartParam=n,this.EndParam=o,this.FilletRadius=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new JO(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.Directrix),t.push(this.Radius),t.push(this.InnerRadius),t.push(this.StartParam),t.push(this.EndParam),t.push(this.FilletRadius),t}},$O=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.SweptCurve=s,this.Position=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new $O(t,e,i,n)}ToTape(){let t=[];return t.push(this.SweptCurve),t.push(this.Position),t}},ZO=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new ZO(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},QO=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new QO(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},t_=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new t_(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t}},e_=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new e_(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},s_=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new s_(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},r_=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d){this.expressID=t,this.type=e,this.ProfileType=s,this.ProfileName=r,this.Position=i,this.Depth=n,this.FlangeWidth=o,this.WebThickness=a,this.FlangeThickness=h,this.FilletRadius=c,this.FlangeEdgeRadius=l,this.WebEdgeRadius=u,this.WebSlope=p,this.FlangeSlope=d}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++];return new r_(t,e,i,n,o,a,h,c,l,u,p,d,m,f)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t.push(this.Depth),t.push(this.FlangeWidth),t.push(this.WebThickness),t.push(this.FlangeThickness),t.push(this.FilletRadius),t.push(this.FlangeEdgeRadius),t.push(this.WebEdgeRadius),t.push(this.WebSlope),t.push(this.FlangeSlope),t}},i_=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.Name=s,this.Rows=r,this.Columns=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new i_(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Rows),t.push(this.Columns),t}},n_=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.Identifier=s,this.Name=r,this.Description=i,this.Unit=n,this.ReferencePath=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new n_(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.Identifier),t.push(this.Name),t.push(this.Description),t.push(this.Unit),t.push(this.ReferencePath),t}},o_=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.RowCells=s,this.IsHeading=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new o_(t,e,i,n)}ToTape(){let t=[];return t.push(this.RowCells),t.push(this.IsHeading),t}},a_=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new a_(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},h_=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new h_(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},c_=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d,m){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.Identification=a,this.LongDescription=h,this.Status=c,this.WorkMethod=l,this.IsMilestone=u,this.Priority=p,this.TaskTime=d,this.PredefinedType=m}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++],g=s[r++];return new c_(t,e,i,n,o,a,h,c,l,u,p,d,m,f,g)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.LongDescription),t.push(this.Status),t.push(this.WorkMethod),t.push(this.IsMilestone),t.push(this.Priority),t.push(this.TaskTime),t.push(this.PredefinedType),t}},l_=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d,m,f,g,y,T,v,b,w){this.expressID=t,this.type=e,this.Name=s,this.DataOrigin=r,this.UserDefinedDataOrigin=i,this.DurationType=n,this.ScheduleDuration=o,this.ScheduleStart=a,this.ScheduleFinish=h,this.EarlyStart=c,this.EarlyFinish=l,this.LateStart=u,this.LateFinish=p,this.FreeFloat=d,this.TotalFloat=m,this.IsCritical=f,this.StatusTime=g,this.ActualDuration=y,this.ActualStart=T,this.ActualFinish=v,this.RemainingTime=b,this.Completion=w}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++],g=s[r++],y=s[r++],T=s[r++],v=s[r++],b=s[r++],w=s[r++],x=s[r++],I=s[r++];return new l_(t,e,i,n,o,a,h,c,l,u,p,d,m,f,g,y,T,v,b,w,x,I)}ToTape(){let t=[];return t.push(this.Name),t.push(this.DataOrigin),t.push(this.UserDefinedDataOrigin),t.push(this.DurationType),t.push(this.ScheduleDuration),t.push(this.ScheduleStart),t.push(this.ScheduleFinish),t.push(this.EarlyStart),t.push(this.EarlyFinish),t.push(this.LateStart),t.push(this.LateFinish),t.push(this.FreeFloat),t.push(this.TotalFloat),t.push(this.IsCritical),t.push(this.StatusTime),t.push(this.ActualDuration),t.push(this.ActualStart),t.push(this.ActualFinish),t.push(this.RemainingTime),t.push(this.Completion),t}},u_=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d,m,f,g,y,T,v,b,w,x){this.expressID=t,this.type=e,this.Name=s,this.DataOrigin=r,this.UserDefinedDataOrigin=i,this.DurationType=n,this.ScheduleDuration=o,this.ScheduleStart=a,this.ScheduleFinish=h,this.EarlyStart=c,this.EarlyFinish=l,this.LateStart=u,this.LateFinish=p,this.FreeFloat=d,this.TotalFloat=m,this.IsCritical=f,this.StatusTime=g,this.ActualDuration=y,this.ActualStart=T,this.ActualFinish=v,this.RemainingTime=b,this.Completion=w,this.Recurrence=x}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++],g=s[r++],y=s[r++],T=s[r++],v=s[r++],b=s[r++],w=s[r++],x=s[r++],I=s[r++],E=s[r++];return new u_(t,e,i,n,o,a,h,c,l,u,p,d,m,f,g,y,T,v,b,w,x,I,E)}ToTape(){let t=[];return t.push(this.Name),t.push(this.DataOrigin),t.push(this.UserDefinedDataOrigin),t.push(this.DurationType),t.push(this.ScheduleDuration),t.push(this.ScheduleStart),t.push(this.ScheduleFinish),t.push(this.EarlyStart),t.push(this.EarlyFinish),t.push(this.LateStart),t.push(this.LateFinish),t.push(this.FreeFloat),t.push(this.TotalFloat),t.push(this.IsCritical),t.push(this.StatusTime),t.push(this.ActualDuration),t.push(this.ActualStart),t.push(this.ActualFinish),t.push(this.RemainingTime),t.push(this.Completion),t.push(this.Recurrence),t}},p_=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.Identification=h,this.LongDescription=c,this.ProcessType=l,this.PredefinedType=u,this.WorkMethod=p}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++];return new p_(t,e,i,n,o,a,h,c,l,u,p,d,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.Identification),t.push(this.LongDescription),t.push(this.ProcessType),t.push(this.PredefinedType),t.push(this.WorkMethod),t}},d_=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.Purpose=s,this.Description=r,this.UserDefinedPurpose=i,this.TelephoneNumbers=n,this.FacsimileNumbers=o,this.PagerNumber=a,this.ElectronicMailAddresses=h,this.WWWHomePageURL=c,this.MessagingIDs=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new d_(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.Purpose),t.push(this.Description),t.push(this.UserDefinedPurpose),t.push(this.TelephoneNumbers),t.push(this.FacsimileNumbers),t.push(this.PagerNumber),t.push(this.ElectronicMailAddresses),t.push(this.WWWHomePageURL),t.push(this.MessagingIDs),t}},m_=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d,m,f,g,y,T){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.SteelGrade=l,this.PredefinedType=u,this.NominalDiameter=p,this.CrossSectionArea=d,this.TensionForce=m,this.PreStress=f,this.FrictionCoefficient=g,this.AnchorageSlip=y,this.MinCurvatureRadius=T}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++],g=s[r++],y=s[r++],T=s[r++],v=s[r++],b=s[r++];return new m_(t,e,i,n,o,a,h,c,l,u,p,d,m,f,g,y,T,v,b)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.SteelGrade),t.push(this.PredefinedType),t.push(this.NominalDiameter),t.push(this.CrossSectionArea),t.push(this.TensionForce),t.push(this.PreStress),t.push(this.FrictionCoefficient),t.push(this.AnchorageSlip),t.push(this.MinCurvatureRadius),t}},f_=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.SteelGrade=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new f_(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.SteelGrade),t.push(this.PredefinedType),t}},g_=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new g_(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},y_=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.SteelGrade=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new y_(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.SteelGrade),t.push(this.PredefinedType),t}},T_=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new T_(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},v_=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d,m){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u,this.NominalDiameter=p,this.CrossSectionArea=d,this.SheathDiameter=m}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++],g=s[r++];return new v_(t,e,i,n,o,a,h,c,l,u,p,d,m,f,g)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t.push(this.NominalDiameter),t.push(this.CrossSectionArea),t.push(this.SheathDiameter),t}},b_=class{constructor(t,e,s){this.expressID=t,this.type=e,this.Coordinates=s}static FromTape(t,e,s){let r=0,i=s[r++];return new b_(t,e,i)}ToTape(){let t=[];return t.push(this.Coordinates),t}},w_=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,s){return new w_(t,e)}ToTape(){return[]}},x_=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.Literal=s,this.Placement=r,this.Path=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new x_(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.Literal),t.push(this.Placement),t.push(this.Path),t}},I_=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.Literal=s,this.Placement=r,this.Path=i,this.Extent=n,this.BoxAlignment=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new I_(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.Literal),t.push(this.Placement),t.push(this.Path),t.push(this.Extent),t.push(this.BoxAlignment),t}},E_=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.Name=s,this.TextCharacterAppearance=r,this.TextStyle=i,this.TextFontStyle=n,this.ModelOrDraughting=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new E_(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.Name),t.push(this.TextCharacterAppearance),t.push(this.TextStyle),t.push(this.TextFontStyle),t.push(this.ModelOrDraughting),t}},S_=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.Name=s,this.FontFamily=r,this.FontStyle=i,this.FontVariant=n,this.FontWeight=o,this.FontSize=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new S_(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.Name),t.push(this.FontFamily),t.push(this.FontStyle),t.push(this.FontVariant),t.push(this.FontWeight),t.push(this.FontSize),t}},A_=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.Colour=s,this.BackgroundColour=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new A_(t,e,i,n)}ToTape(){let t=[];return t.push(this.Colour),t.push(this.BackgroundColour),t}},R_=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.TextIndent=s,this.TextAlign=r,this.TextDecoration=i,this.LetterSpacing=n,this.WordSpacing=o,this.TextTransform=a,this.LineHeight=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new R_(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.TextIndent),t.push(this.TextAlign),t.push(this.TextDecoration),t.push(this.LetterSpacing),t.push(this.WordSpacing),t.push(this.TextTransform),t.push(this.LineHeight),t}},C_=class{constructor(t,e,s){this.expressID=t,this.type=e,this.Maps=s}static FromTape(t,e,s){let r=0,i=s[r++];return new C_(t,e,i)}ToTape(){let t=[];return t.push(this.Maps),t}},O_=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.Maps=s,this.Mode=r,this.Parameter=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new O_(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.Maps),t.push(this.Mode),t.push(this.Parameter),t}},__=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.Maps=s,this.Vertices=r,this.MappedTo=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new __(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.Maps),t.push(this.Vertices),t.push(this.MappedTo),t}},D_=class{constructor(t,e,s){this.expressID=t,this.type=e,this.Coordinates=s}static FromTape(t,e,s){let r=0,i=s[r++];return new D_(t,e,i)}ToTape(){let t=[];return t.push(this.Coordinates),t}},F_=class{constructor(t,e,s){this.expressID=t,this.type=e,this.TexCoordsList=s}static FromTape(t,e,s){let r=0,i=s[r++];return new F_(t,e,i)}ToTape(){let t=[];return t.push(this.TexCoordsList),t}},M_=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.StartTime=s,this.EndTime=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new M_(t,e,i,n)}ToTape(){let t=[];return t.push(this.StartTime),t.push(this.EndTime),t}},P_=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.Name=s,this.Description=r,this.StartTime=i,this.EndTime=n,this.TimeSeriesDataType=o,this.DataOrigin=a,this.UserDefinedDataOrigin=h,this.Unit=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new P_(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.StartTime),t.push(this.EndTime),t.push(this.TimeSeriesDataType),t.push(this.DataOrigin),t.push(this.UserDefinedDataOrigin),t.push(this.Unit),t}},N_=class{constructor(t,e,s){this.expressID=t,this.type=e,this.ListValues=s}static FromTape(t,e,s){let r=0,i=s[r++];return new N_(t,e,i)}ToTape(){let t=[];return t.push(this.ListValues),t}},L_=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,s){return new L_(t,e)}ToTape(){return[]}},k_=class{constructor(t,e,s,r,i,n){this.expressID=t,this.type=e,this.ContextOfItems=s,this.RepresentationIdentifier=r,this.RepresentationType=i,this.Items=n}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++];return new k_(t,e,i,n,o,a)}ToTape(){let t=[];return t.push(this.ContextOfItems),t.push(this.RepresentationIdentifier),t.push(this.RepresentationType),t.push(this.Items),t}},U_=class{constructor(t,e,s,r,i){this.expressID=t,this.type=e,this.Position=s,this.MajorRadius=r,this.MinorRadius=i}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++];return new U_(t,e,i,n,o)}ToTape(){let t=[];return t.push(this.Position),t.push(this.MajorRadius),t.push(this.MinorRadius),t}},H_=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new H_(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},B_=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new B_(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},G_=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.StartPoint=s,this.StartDirection=r,this.SegmentLength=i,this.StartRadius=n,this.EndRadius=o,this.IsStartRadiusCCW=a,this.IsEndRadiusCCW=h,this.TransitionCurveType=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new G_(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.StartPoint),t.push(this.StartDirection),t.push(this.SegmentLength),t.push(this.StartRadius),t.push(this.EndRadius),t.push(this.IsStartRadiusCCW),t.push(this.IsEndRadiusCCW),t.push(this.TransitionCurveType),t}},j_=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new j_(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},z_=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new z_(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},V_=class{constructor(t,e,s,r,i,n,o,a,h){this.expressID=t,this.type=e,this.ProfileType=s,this.ProfileName=r,this.Position=i,this.BottomXDim=n,this.TopXDim=o,this.YDim=a,this.TopXOffset=h}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++];return new V_(t,e,i,n,o,a,h,c,l)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t.push(this.BottomXDim),t.push(this.TopXDim),t.push(this.YDim),t.push(this.TopXOffset),t}},W_=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.Coordinates=s,this.Normals=r,this.Closed=i,this.CoordIndex=n,this.PnIndex=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new W_(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.Coordinates),t.push(this.Normals),t.push(this.Closed),t.push(this.CoordIndex),t.push(this.PnIndex),t}},Y_=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.Coordinates=s,this.Normals=r,this.Closed=i,this.CoordIndex=n,this.PnIndex=o,this.Flags=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new Y_(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.Coordinates),t.push(this.Normals),t.push(this.Closed),t.push(this.CoordIndex),t.push(this.PnIndex),t.push(this.Flags),t}},X_=class{constructor(t,e,s,r,i,n,o){this.expressID=t,this.type=e,this.BasisCurve=s,this.Trim1=r,this.Trim2=i,this.SenseAgreement=n,this.MasterRepresentation=o}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++];return new X_(t,e,i,n,o,a,h)}ToTape(){let t=[];return t.push(this.BasisCurve),t.push(this.Trim1),t.push(this.Trim2),t.push(this.SenseAgreement),t.push(this.MasterRepresentation),t}},q_=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new q_(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},K_=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new K_(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},J_=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new J_(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t}},$_=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.Identification=h,this.LongDescription=c,this.ProcessType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new $_(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.Identification),t.push(this.LongDescription),t.push(this.ProcessType),t}},Z_=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new Z_(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t}},Q_=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.Identification=h,this.LongDescription=c,this.ResourceType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new Q_(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.Identification),t.push(this.LongDescription),t.push(this.ResourceType),t}},tD=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.ProfileType=s,this.ProfileName=r,this.Position=i,this.Depth=n,this.FlangeWidth=o,this.WebThickness=a,this.FlangeThickness=h,this.FilletRadius=c,this.EdgeRadius=l,this.FlangeSlope=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new tD(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t.push(this.Depth),t.push(this.FlangeWidth),t.push(this.WebThickness),t.push(this.FlangeThickness),t.push(this.FilletRadius),t.push(this.EdgeRadius),t.push(this.FlangeSlope),t}},eD=class{constructor(t,e,s){this.expressID=t,this.type=e,this.Units=s}static FromTape(t,e,s){let r=0,i=s[r++];return new eD(t,e,i)}ToTape(){let t=[];return t.push(this.Units),t}},sD=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new sD(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},rD=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new rD(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},iD=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new iD(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},nD=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new nD(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},oD=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new oD(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},aD=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new aD(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},hD=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.Orientation=s,this.Magnitude=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new hD(t,e,i,n)}ToTape(){let t=[];return t.push(this.Orientation),t.push(this.Magnitude),t}},cD=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,s){return new cD(t,e)}ToTape(){return[]}},lD=class{constructor(t,e,s){this.expressID=t,this.type=e,this.LoopVertex=s}static FromTape(t,e,s){let r=0,i=s[r++];return new lD(t,e,i)}ToTape(){let t=[];return t.push(this.LoopVertex),t}},uD=class{constructor(t,e,s){this.expressID=t,this.type=e,this.VertexGeometry=s}static FromTape(t,e,s){let r=0,i=s[r++];return new uD(t,e,i)}ToTape(){let t=[];return t.push(this.VertexGeometry),t}},pD=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new pD(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},dD=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new dD(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},mD=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new mD(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},fD=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new fD(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},gD=class{constructor(t,e,s,r,i,n,o,a,h,c){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++];return new gD(t,e,i,n,o,a,h,c,l,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},yD=class{constructor(t,e,s,r){this.expressID=t,this.type=e,this.IntersectingAxes=s,this.OffsetDistances=r}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++];return new yD(t,e,i,n)}ToTape(){let t=[];return t.push(this.IntersectingAxes),t.push(this.OffsetDistances),t}},TD=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new TD(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},vD=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new vD(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},bD=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new bD(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},wD=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new wD(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},xD=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new xD(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},ID=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new ID(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},ED=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++];return new ED(t,e,i,n,o,a,h,c,l,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},SD=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d,m){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.OverallHeight=l,this.OverallWidth=u,this.PredefinedType=p,this.PartitioningType=d,this.UserDefinedPartitioningType=m}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++],g=s[r++];return new SD(t,e,i,n,o,a,h,c,l,u,p,d,m,f,g)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.OverallHeight),t.push(this.OverallWidth),t.push(this.PredefinedType),t.push(this.PartitioningType),t.push(this.UserDefinedPartitioningType),t}},AD=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d,m,f,g,y){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.LiningDepth=o,this.LiningThickness=a,this.TransomThickness=h,this.MullionThickness=c,this.FirstTransomOffset=l,this.SecondTransomOffset=u,this.FirstMullionOffset=p,this.SecondMullionOffset=d,this.ShapeAspectStyle=m,this.LiningOffset=f,this.LiningToPanelOffsetX=g,this.LiningToPanelOffsetY=y}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++],g=s[r++],y=s[r++],T=s[r++],v=s[r++];return new AD(t,e,i,n,o,a,h,c,l,u,p,d,m,f,g,y,T,v)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.LiningDepth),t.push(this.LiningThickness),t.push(this.TransomThickness),t.push(this.MullionThickness),t.push(this.FirstTransomOffset),t.push(this.SecondTransomOffset),t.push(this.FirstMullionOffset),t.push(this.SecondMullionOffset),t.push(this.ShapeAspectStyle),t.push(this.LiningOffset),t.push(this.LiningToPanelOffsetX),t.push(this.LiningToPanelOffsetY),t}},RD=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.OperationType=o,this.PanelPosition=a,this.FrameDepth=h,this.FrameThickness=c,this.ShapeAspectStyle=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new RD(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.OperationType),t.push(this.PanelPosition),t.push(this.FrameDepth),t.push(this.FrameThickness),t.push(this.ShapeAspectStyle),t}},CD=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d,m){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=h,this.Tag=c,this.OverallHeight=l,this.OverallWidth=u,this.PredefinedType=p,this.PartitioningType=d,this.UserDefinedPartitioningType=m}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++],g=s[r++];return new CD(t,e,i,n,o,a,h,c,l,u,p,d,m,f,g)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.OverallHeight),t.push(this.OverallWidth),t.push(this.PredefinedType),t.push(this.PartitioningType),t.push(this.UserDefinedPartitioningType),t}},OD=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ConstructionType=l,this.OperationType=u,this.ParameterTakesPrecedence=p,this.Sizeable=d}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++];return new OD(t,e,i,n,o,a,h,c,l,u,p,d,m,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ConstructionType),t.push(this.OperationType),t.push(this.ParameterTakesPrecedence),t.push(this.Sizeable),t}},_D=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d,m){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=h,this.Tag=c,this.ElementType=l,this.PredefinedType=u,this.PartitioningType=p,this.ParameterTakesPrecedence=d,this.UserDefinedPartitioningType=m}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++],g=s[r++];return new _D(t,e,i,n,o,a,h,c,l,u,p,d,m,f,g)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t.push(this.PartitioningType),t.push(this.ParameterTakesPrecedence),t.push(this.UserDefinedPartitioningType),t}},DD=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.Identification=a,this.WorkingTimes=h,this.ExceptionTimes=c,this.PredefinedType=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new DD(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.WorkingTimes),t.push(this.ExceptionTimes),t.push(this.PredefinedType),t}},FD=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d,m){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.Identification=a,this.CreationDate=h,this.Creators=c,this.Purpose=l,this.Duration=u,this.TotalFloat=p,this.StartTime=d,this.FinishTime=m}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++],g=s[r++];return new FD(t,e,i,n,o,a,h,c,l,u,p,d,m,f,g)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.CreationDate),t.push(this.Creators),t.push(this.Purpose),t.push(this.Duration),t.push(this.TotalFloat),t.push(this.StartTime),t.push(this.FinishTime),t}},MD=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d,m,f){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.Identification=a,this.CreationDate=h,this.Creators=c,this.Purpose=l,this.Duration=u,this.TotalFloat=p,this.StartTime=d,this.FinishTime=m,this.PredefinedType=f}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++],g=s[r++],y=s[r++];return new MD(t,e,i,n,o,a,h,c,l,u,p,d,m,f,g,y)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.CreationDate),t.push(this.Creators),t.push(this.Purpose),t.push(this.Duration),t.push(this.TotalFloat),t.push(this.StartTime),t.push(this.FinishTime),t.push(this.PredefinedType),t}},PD=class{constructor(t,e,s,r,i,n,o,a,h,c,l,u,p,d,m,f){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.Identification=a,this.CreationDate=h,this.Creators=c,this.Purpose=l,this.Duration=u,this.TotalFloat=p,this.StartTime=d,this.FinishTime=m,this.PredefinedType=f}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++],d=s[r++],m=s[r++],f=s[r++],g=s[r++],y=s[r++];return new PD(t,e,i,n,o,a,h,c,l,u,p,d,m,f,g,y)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.CreationDate),t.push(this.Creators),t.push(this.Purpose),t.push(this.Duration),t.push(this.TotalFloat),t.push(this.StartTime),t.push(this.FinishTime),t.push(this.PredefinedType),t}},ND=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.Name=s,this.DataOrigin=r,this.UserDefinedDataOrigin=i,this.RecurrencePattern=n,this.Start=o,this.Finish=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new ND(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.Name),t.push(this.DataOrigin),t.push(this.UserDefinedDataOrigin),t.push(this.RecurrencePattern),t.push(this.Start),t.push(this.Finish),t}},LD=class{constructor(t,e,s,r,i,n,o,a,h,c,l){this.expressID=t,this.type=e,this.ProfileType=s,this.ProfileName=r,this.Position=i,this.Depth=n,this.FlangeWidth=o,this.WebThickness=a,this.FlangeThickness=h,this.FilletRadius=c,this.EdgeRadius=l}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++],l=s[r++],u=s[r++],p=s[r++];return new LD(t,e,i,n,o,a,h,c,l,u,p)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t.push(this.Depth),t.push(this.FlangeWidth),t.push(this.WebThickness),t.push(this.FlangeThickness),t.push(this.FilletRadius),t.push(this.EdgeRadius),t}},kD=class{constructor(t,e,s,r,i,n,o,a){this.expressID=t,this.type=e,this.GlobalId=s,this.OwnerHistory=r,this.Name=i,this.Description=n,this.ObjectType=o,this.LongName=a}static FromTape(t,e,s){let r=0,i=s[r++],n=s[r++],o=s[r++],a=s[r++],h=s[r++],c=s[r++];return new kD(t,e,i,n,o,a,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.LongName),t}},UD=Eg(),HD=class{constructor(){this.wasmModule=void 0,this.fs=void 0}Init(){return t=this,e=null,s=function*(){UD?(this.wasmModule=yield UD({noInitialRun:!0}),this.fs=this.wasmModule.FS):console.error("Could not find wasm module at './web-ifc' from web-ifc-api.ts")},new Promise(((r,i)=>{var n=t=>{try{a(s.next(t))}catch(t){i(t)}},o=t=>{try{a(s.throw(t))}catch(t){i(t)}},a=t=>t.done?r(t.value):Promise.resolve(t.value).then(n,o);a((s=s.apply(t,e)).next())}));var t,e,s}OpenModel(t,e){this.wasmModule.FS_createDataFile("/","filename",t,!0,!0,!0);let s=bg({COORDINATE_TO_ORIGIN:!1,USE_FAST_BOOLS:!1,CIRCLE_SEGMENTS_LOW:5,CIRCLE_SEGMENTS_MEDIUM:8,CIRCLE_SEGMENTS_HIGH:12},e),r=this.wasmModule.OpenModel(s);return this.wasmModule.FS_unlink("/filename"),r}CreateModel(t){let e=bg({COORDINATE_TO_ORIGIN:!1,USE_FAST_BOOLS:!1,CIRCLE_SEGMENTS_LOW:5,CIRCLE_SEGMENTS_MEDIUM:8,CIRCLE_SEGMENTS_HIGH:12},t);return this.wasmModule.CreateModel(e)}ExportFileAsIFC(t){this.wasmModule.ExportFileAsIFC(t);let e=this.fs.readFile("/export.ifc");return this.wasmModule.FS_unlink("/export.ifc"),e}GetGeometry(t,e){return this.wasmModule.GetGeometry(t,e)}GetLine(t,e,s=!1){let r=this.GetRawLineData(t,e),i=Dg[r.type](r);return s&&this.FlattenLine(t,i),i}WriteLine(t,e){Object.keys(e).forEach((s=>{let r=e[s];if(r&&void 0!==r.expressID)this.WriteLine(t,r),e[s]={type:5,value:r.expressID};else if(Array.isArray(r)&&r.length>0)for(let i=0;i<r.length;i++)void 0!==r[i].expressID&&(this.WriteLine(t,r[i]),e[s][i]={type:5,value:r[i].expressID})}));let s={ID:e.expressID,type:e.type,arguments:e.ToTape()};this.WriteRawLineData(t,s)}FlattenLine(t,e){Object.keys(e).forEach((s=>{let r=e[s];if(r&&5===r.type)e[s]=this.GetLine(t,r.value,!0);else if(Array.isArray(r)&&r.length>0&&5===r[0].type)for(let i=0;i<r.length;i++)e[s][i]=this.GetLine(t,r[i].value,!0)}))}GetRawLineData(t,e){return this.wasmModule.GetLine(t,e)}WriteRawLineData(t,e){return this.wasmModule.WriteLine(t,e.ID,e.type,e.arguments)}GetLineIDsWithType(t,e){return this.wasmModule.GetLineIDsWithType(t,e)}GetAllLines(t){return this.wasmModule.GetAllLines(t)}SetGeometryTransformation(t,e){16==e.length?this.wasmModule.SetGeometryTransformation(t,e):console.log(`Bad transformation matrix size: ${e.length}`)}GetVertexArray(t,e){return this.getSubArray(this.wasmModule.HEAPF32,t,e)}GetIndexArray(t,e){return this.getSubArray(this.wasmModule.HEAPU32,t,e)}getSubArray(t,e,s){return t.subarray(e/4,e/4+s).slice(0)}CloseModel(t){this.wasmModule.CloseModel(t)}StreamAllMeshes(t,e){this.wasmModule.StreamAllMeshes(t,e)}IsModelOpen(t){return this.wasmModule.IsModelOpen(t)}LoadAllGeometry(t){return this.wasmModule.LoadAllGeometry(t)}GetFlatMesh(t,e){return this.wasmModule.GetFlatMesh(t,e)}SetWasmPath(t){BD=t}},BD="";function GD(t,e=!1){const s=null!==t[0].index,r=new Set(Object.keys(t[0].attributes)),i=new Set(Object.keys(t[0].morphAttributes)),n={},o={},a=t[0].morphTargetsRelative,h=new Er;let c=0;for(let l=0;l<t.length;++l){const u=t[l];let p=0;if(s!==(null!==u.index))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+l+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const t in u.attributes){if(!r.has(t))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+l+'. All geometries must have compatible attributes; make sure "'+t+'" attribute exists among all geometries, or in none of them.'),null;void 0===n[t]&&(n[t]=[]),n[t].push(u.attributes[t]),p++}if(p!==r.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+l+". Make sure all geometries have the same number of attributes."),null;if(a!==u.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+l+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const t in u.morphAttributes){if(!i.has(t))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+l+".  .morphAttributes must be consistent throughout all geometries."),null;void 0===o[t]&&(o[t]=[]),o[t].push(u.morphAttributes[t])}if(h.userData.mergedUserData=h.userData.mergedUserData||[],h.userData.mergedUserData.push(u.userData),e){let t;if(s)t=u.index.count;else{if(void 0===u.attributes.position)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+l+". The geometry must have either an index or a position attribute"),null;t=u.attributes.position.count}h.addGroup(c,t,l),c+=t}}if(s){let e=0;const s=[];for(let r=0;r<t.length;++r){const i=t[r].index;for(let t=0;t<i.count;++t)s.push(i.getX(t)+e);e+=t[r].attributes.position.count}h.setIndex(s)}for(const t in n){const e=jD(n[t]);if(!e)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+t+" attribute."),null;h.setAttribute(t,e)}for(const t in o){const e=o[t][0].length;if(0===e)break;h.morphAttributes=h.morphAttributes||{},h.morphAttributes[t]=[];for(let s=0;s<e;++s){const e=[];for(let r=0;r<o[t].length;++r)e.push(o[t][r][s]);const r=jD(e);if(!r)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+t+" morphAttribute."),null;h.morphAttributes[t].push(r)}}return h}function jD(t){let e,s,r,i=0;for(let n=0;n<t.length;++n){const o=t[n];if(o.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(void 0===e&&(e=o.array.constructor),e!==o.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(void 0===s&&(s=o.itemSize),s!==o.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(void 0===r&&(r=o.normalized),r!==o.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;i+=o.array.length}const n=new e(i);let o=0;for(let e=0;e<t.length;++e)n.set(t[e].array,o),o+=t[e].array.length;return new or(n,s,r)}const zD="expressID",VD=(t,e=!1)=>GD(t,e),WD=(t,e)=>new or(new Float32Array(t),e),YD="default",XD={aggregates:{name:Ag,relating:"RelatingObject",related:"RelatedObjects",key:"children"},spatial:{name:Cg,relating:"RelatingStructure",related:"RelatedElements",key:"children"},psets:{name:Og,relating:"RelatingPropertyDefinition",related:"RelatedObjects",key:"hasPsets"},materials:{name:Rg,relating:"RelatingMaterial",related:"RelatedObjects",key:"hasMaterial"},type:{name:_g,relating:"RelatingType",related:"RelatedObjects",key:"hasType"}};class qD{constructor(t,e){this.state=t,this.BVH=e,this.loadedModels=0,this.currentWebIfcID=-1,this.currentModelID=-1}async parse(t){return void 0===this.state.api.wasmModule&&await this.state.api.Init(),this.newIfcModel(t),this.loadedModels++,this.loadAllGeometry()}newIfcModel(t){const e=new Uint8Array(t);this.currentWebIfcID=this.state.api.OpenModel(e,this.state.webIfcSettings),this.currentModelID=this.state.useJSON?this.loadedModels:this.currentWebIfcID,this.state.models[this.currentModelID]={modelID:this.currentModelID,mesh:{},items:{},types:{},jsonData:{}}}loadAllGeometry(){return this.saveAllPlacedGeometriesByMaterial(),this.generateAllGeometriesByMaterial()}generateAllGeometriesByMaterial(){const{geometry:t,materials:e}=this.getGeometryAndMaterials();this.BVH.applyThreeMeshBVH(t);const s=new jr(t,e);return s.modelID=this.currentModelID,this.state.models[this.currentModelID].mesh=s,s}getGeometryAndMaterials(){const t=this.state.models[this.currentModelID].items,e=[],s=[];for(const r in t){s.push(t[r].material);const i=Object.values(t[r].geometries);e.push(VD(i))}return{geometry:VD(e,!0),materials:s}}saveAllPlacedGeometriesByMaterial(){const t=this.state.api.LoadAllGeometry(this.currentWebIfcID);for(let e=0;e<t.size();e++){const s=t.get(e),r=s.geometries;for(let t=0;t<r.size();t++)this.savePlacedGeometry(r.get(t),s.expressID)}}savePlacedGeometry(t,e){const s=this.getBufferGeometry(t);s.computeVertexNormals();const r=this.getMeshMatrix(t.flatTransformation);s.applyMatrix4(r),this.saveGeometryByMaterial(s,t,e)}getBufferGeometry(t){const e=this.state.api.GetGeometry(this.currentWebIfcID,t.geometryExpressID),s=this.getVertices(e),r=this.getIndices(e),{vertices:i,normals:n}=this.extractVertexData(s);return this.ifcGeomToBufferGeom(i,n,r)}getVertices(t){const e=t.GetVertexData(),s=t.GetVertexDataSize();return this.state.api.GetVertexArray(e,s)}getIndices(t){const e=t.GetIndexData(),s=t.GetIndexDataSize();return this.state.api.GetIndexArray(e,s)}getMeshMatrix(t){const e=new Ts;return e.fromArray(t),e}ifcGeomToBufferGeom(t,e,s){const r=new Er;return r.setAttribute("position",WD(t,3)),r.setAttribute("normal",WD(e,3)),r.setIndex(new or(s,1)),r}extractVertexData(t){const e=[],s=[];let r=!1;for(let i=0;i<t.length;i++)r?s.push(t[i]):e.push(t[i]),(i+1)%3==0&&(r=!r);return{vertices:e,normals:s}}saveGeometryByMaterial(t,e,s){const r=e.color,i=`${r.x}${r.y}${r.z}${r.w}`;this.storeGeometryAttribute(s,t),this.createMaterial(i,r);const n=this.state.models[this.currentModelID].items[i],o=n.geometries[s];if(!o)return n.geometries[s]=t;const a=VD([o,t]);n.geometries[s]=a}storeGeometryAttribute(t,e){const s=e.attributes.position.count,r=new Array(s).fill(t);e.setAttribute(zD,((t,e)=>new or(new Uint32Array(t),e))(r,1))}createMaterial(t,e){const s=this.state.models[this.currentModelID].items;if(s[t])return;const r=new Ae(e.x,e.y,e.z),i=new Dc({color:r,side:2});i.transparent=1!==e.w,i.transparent&&(i.opacity=e.w),s[t]={material:i,geometries:{}}}}class KD{constructor(t,e){this.selected={},this.state=t,this.BVH=e}getSubset(t,e){const s=this.matIDNoConfig(t,e);return this.selected[s]?this.selected[s].mesh:null}removeSubset(t,e,s){const r=this.matIDNoConfig(t,s);this.selected[r]&&(e&&e.remove(this.selected[r].mesh),delete this.selected[r])}createSubset(t){if(this.isConfigValid(t)&&!this.isPreviousSelection(t))return this.isEasySelection(t)?this.addToPreviousSelection(t):(this.updatePreviousSelection(t.scene,t),this.createSelectionInScene(t))}createSelectionInScene(t){const e=this.filter(t),{geomsByMaterial:s,materials:r}=this.getGeomAndMat(e),i=this.isDefaultMat(t),n=this.getMergedGeometry(s,i),o=i?r:t.material;this.BVH.applyThreeMeshBVH(n);const a=new jr(n,o);return this.selected[this.matID(t)].mesh=a,a.modelID=t.modelID,t.scene.add(a),a}getMergedGeometry(t,e){return t.length>0?VD(t,e):new Er}isConfigValid(t){return this.isValid(t.scene)&&this.isValid(t.modelID)&&this.isValid(t.ids)&&this.isValid(t.removePrevious)}isValid(t){return null!=t&&null!=t}getGeomAndMat(t){const e=[],s=[];for(const r in t){const i=Object.values(t[r].geometries);i.length&&(s.push(t[r].material),i.length>1?e.push(VD(i)):e.push(...i))}return{geomsByMaterial:e,materials:s}}updatePreviousSelection(t,e){const s=this.selected[this.matID(e)];if(!s)return this.newSelectionGroup(e);t.remove(s.mesh),e.removePrevious?s.ids=new Set(e.ids):e.ids.forEach((t=>s.ids.add(t)))}newSelectionGroup(t){this.selected[this.matID(t)]={ids:new Set(t.ids),mesh:{}}}isPreviousSelection(t){if(!this.selected[this.matID(t)])return!1;if(this.containsIds(t))return!0;const e=this.selected[this.matID(t)].ids;return JSON.stringify(t.ids)===JSON.stringify(e)}containsIds(t){const e=t.ids,s=Array.from(this.selected[this.matID(t)].ids);return e.every((t=>e=>t=s.indexOf(e,t)+1)(0))}addToPreviousSelection(t){const e=this.selected[this.matID(t)],s=this.filter(t),r=Object.values(s).map((t=>Object.values(t.geometries))).flat(),i=e.mesh.geometry;e.mesh.geometry=VD([i,...r]),t.ids.forEach((t=>e.ids.add(t)))}filter(t){const e=this.selected[this.matID(t)].ids,s=this.state.models[t.modelID].items,r={};for(const t in s)r[t]={material:s[t].material,geometries:this.filterGeometries(e,s[t].geometries)};return r}filterGeometries(t,e){const s=Array.from(t);return Object.keys(e).filter((t=>s.includes(parseInt(t,10)))).reduce(((t,s)=>({...t,[s]:e[s]})),{})}isEasySelection(t){const e=this.matID(t);if(!t.removePrevious&&!this.isDefaultMat(t)&&this.selected[e])return!0}isDefaultMat(t){return this.matIDNoConfig(t.modelID)===this.matID(t)}matID(t){let e;return e=t.material&&t.material.uuid||YD,e.concat(" - ").concat(t.modelID.toString())}matIDNoConfig(t,e){let s=YD;return e&&(s=e.uuid),s.concat(" - ").concat(t.toString())}}const JD={103090709:"IFCPROJECT",4097777520:"IFCSITE",4031249490:"IFCBUILDING",3124254112:"IFCBUILDINGSTOREY",3856911033:"IFCSPACE",1674181508:"IFCANNOTATION",25142252:"IFCCONTROLLER",32344328:"IFCBOILER",76236018:"IFCLAMP",90941305:"IFCPUMP",177149247:"IFCAIRTERMINALBOX",182646315:"IFCFLOWINSTRUMENT",263784265:"IFCFURNISHINGELEMENT",264262732:"IFCELECTRICGENERATOR",277319702:"IFCAUDIOVISUALAPPLIANCE",310824031:"IFCPIPEFITTING",331165859:"IFCSTAIR",342316401:"IFCDUCTFITTING",377706215:"IFCMECHANICALFASTENER",395920057:"IFCDOOR",402227799:"IFCELECTRICMOTOR",413509423:"IFCSYSTEMFURNITUREELEMENT",484807127:"IFCEVAPORATOR",486154966:"IFCWINDOWSTANDARDCASE",629592764:"IFCLIGHTFIXTURE",630975310:"IFCUNITARYCONTROLELEMENT",635142910:"IFCCABLECARRIERFITTING",639361253:"IFCCOIL",647756555:"IFCFASTENER",707683696:"IFCFLOWSTORAGEDEVICE",738039164:"IFCPROTECTIVEDEVICE",753842376:"IFCBEAM",812556717:"IFCTANK",819412036:"IFCFILTER",843113511:"IFCCOLUMN",862014818:"IFCELECTRICDISTRIBUTIONBOARD",900683007:"IFCFOOTING",905975707:"IFCCOLUMNSTANDARDCASE",926996030:"IFCVOIDINGFEATURE",979691226:"IFCREINFORCINGBAR",987401354:"IFCFLOWSEGMENT",1003880860:"IFCELECTRICTIMECONTROL",1051757585:"IFCCABLEFITTING",1052013943:"IFCDISTRIBUTIONCHAMBERELEMENT",1062813311:"IFCDISTRIBUTIONCONTROLELEMENT",1073191201:"IFCMEMBER",1095909175:"IFCBUILDINGELEMENTPROXY",1156407060:"IFCPLATESTANDARDCASE",1162798199:"IFCSWITCHINGDEVICE",1329646415:"IFCSHADINGDEVICE",1335981549:"IFCDISCRETEACCESSORY",1360408905:"IFCDUCTSILENCER",1404847402:"IFCSTACKTERMINAL",1426591983:"IFCFIRESUPPRESSIONTERMINAL",1437502449:"IFCMEDICALDEVICE",1509553395:"IFCFURNITURE",1529196076:"IFCSLAB",1620046519:"IFCTRANSPORTELEMENT",1634111441:"IFCAIRTERMINAL",1658829314:"IFCENERGYCONVERSIONDEVICE",1677625105:"IFCCIVILELEMENT",1687234759:"IFCPILE",1904799276:"IFCELECTRICAPPLIANCE",1911478936:"IFCMEMBERSTANDARDCASE",1945004755:"IFCDISTRIBUTIONELEMENT",1973544240:"IFCCOVERING",1999602285:"IFCSPACEHEATER",2016517767:"IFCROOF",2056796094:"IFCAIRTOAIRHEATRECOVERY",2058353004:"IFCFLOWCONTROLLER",2068733104:"IFCHUMIDIFIER",2176052936:"IFCJUNCTIONBOX",2188021234:"IFCFLOWMETER",2223149337:"IFCFLOWTERMINAL",2262370178:"IFCRAILING",2272882330:"IFCCONDENSER",2295281155:"IFCPROTECTIVEDEVICETRIPPINGUNIT",2320036040:"IFCREINFORCINGMESH",2347447852:"IFCTENDONANCHOR",2391383451:"IFCVIBRATIONISOLATOR",2391406946:"IFCWALL",2474470126:"IFCMOTORCONNECTION",2769231204:"IFCVIRTUALELEMENT",2814081492:"IFCENGINE",2906023776:"IFCBEAMSTANDARDCASE",2938176219:"IFCBURNER",2979338954:"IFCBUILDINGELEMENTPART",3024970846:"IFCRAMP",3026737570:"IFCTUBEBUNDLE",3027962421:"IFCSLABSTANDARDCASE",3040386961:"IFCDISTRIBUTIONFLOWELEMENT",3053780830:"IFCSANITARYTERMINAL",3079942009:"IFCOPENINGSTANDARDCASE",3087945054:"IFCALARM",3101698114:"IFCSURFACEFEATURE",3127900445:"IFCSLABELEMENTEDCASE",3132237377:"IFCFLOWMOVINGDEVICE",3171933400:"IFCPLATE",3221913625:"IFCCOMMUNICATIONSAPPLIANCE",3242481149:"IFCDOORSTANDARDCASE",3283111854:"IFCRAMPFLIGHT",3296154744:"IFCCHIMNEY",3304561284:"IFCWINDOW",3310460725:"IFCELECTRICFLOWSTORAGEDEVICE",3319311131:"IFCHEATEXCHANGER",3415622556:"IFCFAN",3420628829:"IFCSOLARDEVICE",3493046030:"IFCGEOGRAPHICELEMENT",3495092785:"IFCCURTAINWALL",3508470533:"IFCFLOWTREATMENTDEVICE",3512223829:"IFCWALLSTANDARDCASE",3518393246:"IFCDUCTSEGMENT",3571504051:"IFCCOMPRESSOR",3588315303:"IFCOPENINGELEMENT",3612865200:"IFCPIPESEGMENT",3640358203:"IFCCOOLINGTOWER",3651124850:"IFCPROJECTIONELEMENT",3694346114:"IFCOUTLET",3747195512:"IFCEVAPORATIVECOOLER",3758799889:"IFCCABLECARRIERSEGMENT",3824725483:"IFCTENDON",3825984169:"IFCTRANSFORMER",3902619387:"IFCCHILLER",4074379575:"IFCDAMPER",4086658281:"IFCSENSOR",4123344466:"IFCELEMENTASSEMBLY",4136498852:"IFCCOOLEDBEAM",4156078855:"IFCWALLELEMENTEDCASE",4175244083:"IFCINTERCEPTOR",4207607924:"IFCVALVE",4217484030:"IFCCABLESEGMENT",4237592921:"IFCWASTETERMINAL",4252922144:"IFCSTAIRFLIGHT",4278956645:"IFCFLOWFITTING",4288193352:"IFCACTUATOR",4292641817:"IFCUNITARYEQUIPMENT",3009204131:"IFCGRID"},$D={3821786052:"IFCACTIONREQUEST",2296667514:"IFCACTOR",3630933823:"IFCACTORROLE",4288193352:"IFCACTUATOR",2874132201:"IFCACTUATORTYPE",618182010:"IFCADDRESS",1635779807:"IFCADVANCEDBREP",2603310189:"IFCADVANCEDBREPWITHVOIDS",3406155212:"IFCADVANCEDFACE",1634111441:"IFCAIRTERMINAL",177149247:"IFCAIRTERMINALBOX",1411407467:"IFCAIRTERMINALBOXTYPE",3352864051:"IFCAIRTERMINALTYPE",2056796094:"IFCAIRTOAIRHEATRECOVERY",1871374353:"IFCAIRTOAIRHEATRECOVERYTYPE",3087945054:"IFCALARM",3001207471:"IFCALARMTYPE",325726236:"IFCALIGNMENT",749761778:"IFCALIGNMENT2DHORIZONTAL",3199563722:"IFCALIGNMENT2DHORIZONTALSEGMENT",2483840362:"IFCALIGNMENT2DSEGMENT",3379348081:"IFCALIGNMENT2DVERSEGCIRCULARARC",3239324667:"IFCALIGNMENT2DVERSEGLINE",4263986512:"IFCALIGNMENT2DVERSEGPARABOLICARC",53199957:"IFCALIGNMENT2DVERTICAL",2029264950:"IFCALIGNMENT2DVERTICALSEGMENT",3512275521:"IFCALIGNMENTCURVE",1674181508:"IFCANNOTATION",669184980:"IFCANNOTATIONFILLAREA",639542469:"IFCAPPLICATION",411424972:"IFCAPPLIEDVALUE",130549933:"IFCAPPROVAL",3869604511:"IFCAPPROVALRELATIONSHIP",3798115385:"IFCARBITRARYCLOSEDPROFILEDEF",1310608509:"IFCARBITRARYOPENPROFILEDEF",2705031697:"IFCARBITRARYPROFILEDEFWITHVOIDS",3460190687:"IFCASSET",3207858831:"IFCASYMMETRICISHAPEPROFILEDEF",277319702:"IFCAUDIOVISUALAPPLIANCE",1532957894:"IFCAUDIOVISUALAPPLIANCETYPE",4261334040:"IFCAXIS1PLACEMENT",3125803723:"IFCAXIS2PLACEMENT2D",2740243338:"IFCAXIS2PLACEMENT3D",1967976161:"IFCBSPLINECURVE",2461110595:"IFCBSPLINECURVEWITHKNOTS",2887950389:"IFCBSPLINESURFACE",167062518:"IFCBSPLINESURFACEWITHKNOTS",753842376:"IFCBEAM",2906023776:"IFCBEAMSTANDARDCASE",819618141:"IFCBEAMTYPE",4196446775:"IFCBEARING",3649138523:"IFCBEARINGTYPE",616511568:"IFCBLOBTEXTURE",1334484129:"IFCBLOCK",32344328:"IFCBOILER",231477066:"IFCBOILERTYPE",3649129432:"IFCBOOLEANCLIPPINGRESULT",2736907675:"IFCBOOLEANRESULT",4037036970:"IFCBOUNDARYCONDITION",1136057603:"IFCBOUNDARYCURVE",1560379544:"IFCBOUNDARYEDGECONDITION",3367102660:"IFCBOUNDARYFACECONDITION",1387855156:"IFCBOUNDARYNODECONDITION",2069777674:"IFCBOUNDARYNODECONDITIONWARPING",1260505505:"IFCBOUNDEDCURVE",4182860854:"IFCBOUNDEDSURFACE",2581212453:"IFCBOUNDINGBOX",2713105998:"IFCBOXEDHALFSPACE",644574406:"IFCBRIDGE",963979645:"IFCBRIDGEPART",4031249490:"IFCBUILDING",3299480353:"IFCBUILDINGELEMENT",2979338954:"IFCBUILDINGELEMENTPART",39481116:"IFCBUILDINGELEMENTPARTTYPE",1095909175:"IFCBUILDINGELEMENTPROXY",1909888760:"IFCBUILDINGELEMENTPROXYTYPE",1950629157:"IFCBUILDINGELEMENTTYPE",3124254112:"IFCBUILDINGSTOREY",1177604601:"IFCBUILDINGSYSTEM",2938176219:"IFCBURNER",2188180465:"IFCBURNERTYPE",2898889636:"IFCCSHAPEPROFILEDEF",635142910:"IFCCABLECARRIERFITTING",395041908:"IFCCABLECARRIERFITTINGTYPE",3758799889:"IFCCABLECARRIERSEGMENT",3293546465:"IFCCABLECARRIERSEGMENTTYPE",1051757585:"IFCCABLEFITTING",2674252688:"IFCCABLEFITTINGTYPE",4217484030:"IFCCABLESEGMENT",1285652485:"IFCCABLESEGMENTTYPE",3999819293:"IFCCAISSONFOUNDATION",3203706013:"IFCCAISSONFOUNDATIONTYPE",1123145078:"IFCCARTESIANPOINT",574549367:"IFCCARTESIANPOINTLIST",1675464909:"IFCCARTESIANPOINTLIST2D",2059837836:"IFCCARTESIANPOINTLIST3D",59481748:"IFCCARTESIANTRANSFORMATIONOPERATOR",3749851601:"IFCCARTESIANTRANSFORMATIONOPERATOR2D",3486308946:"IFCCARTESIANTRANSFORMATIONOPERATOR2DNONUNIFORM",3331915920:"IFCCARTESIANTRANSFORMATIONOPERATOR3D",1416205885:"IFCCARTESIANTRANSFORMATIONOPERATOR3DNONUNIFORM",3150382593:"IFCCENTERLINEPROFILEDEF",3902619387:"IFCCHILLER",2951183804:"IFCCHILLERTYPE",3296154744:"IFCCHIMNEY",2197970202:"IFCCHIMNEYTYPE",2611217952:"IFCCIRCLE",2937912522:"IFCCIRCLEHOLLOWPROFILEDEF",1383045692:"IFCCIRCLEPROFILEDEF",1062206242:"IFCCIRCULARARCSEGMENT2D",1677625105:"IFCCIVILELEMENT",3893394355:"IFCCIVILELEMENTTYPE",747523909:"IFCCLASSIFICATION",647927063:"IFCCLASSIFICATIONREFERENCE",2205249479:"IFCCLOSEDSHELL",639361253:"IFCCOIL",2301859152:"IFCCOILTYPE",776857604:"IFCCOLOURRGB",3285139300:"IFCCOLOURRGBLIST",3264961684:"IFCCOLOURSPECIFICATION",843113511:"IFCCOLUMN",905975707:"IFCCOLUMNSTANDARDCASE",300633059:"IFCCOLUMNTYPE",3221913625:"IFCCOMMUNICATIONSAPPLIANCE",400855858:"IFCCOMMUNICATIONSAPPLIANCETYPE",2542286263:"IFCCOMPLEXPROPERTY",3875453745:"IFCCOMPLEXPROPERTYTEMPLATE",3732776249:"IFCCOMPOSITECURVE",15328376:"IFCCOMPOSITECURVEONSURFACE",2485617015:"IFCCOMPOSITECURVESEGMENT",1485152156:"IFCCOMPOSITEPROFILEDEF",3571504051:"IFCCOMPRESSOR",3850581409:"IFCCOMPRESSORTYPE",2272882330:"IFCCONDENSER",2816379211:"IFCCONDENSERTYPE",2510884976:"IFCCONIC",370225590:"IFCCONNECTEDFACESET",1981873012:"IFCCONNECTIONCURVEGEOMETRY",2859738748:"IFCCONNECTIONGEOMETRY",45288368:"IFCCONNECTIONPOINTECCENTRICITY",2614616156:"IFCCONNECTIONPOINTGEOMETRY",2732653382:"IFCCONNECTIONSURFACEGEOMETRY",775493141:"IFCCONNECTIONVOLUMEGEOMETRY",1959218052:"IFCCONSTRAINT",3898045240:"IFCCONSTRUCTIONEQUIPMENTRESOURCE",2185764099:"IFCCONSTRUCTIONEQUIPMENTRESOURCETYPE",1060000209:"IFCCONSTRUCTIONMATERIALRESOURCE",4105962743:"IFCCONSTRUCTIONMATERIALRESOURCETYPE",488727124:"IFCCONSTRUCTIONPRODUCTRESOURCE",1525564444:"IFCCONSTRUCTIONPRODUCTRESOURCETYPE",2559216714:"IFCCONSTRUCTIONRESOURCE",2574617495:"IFCCONSTRUCTIONRESOURCETYPE",3419103109:"IFCCONTEXT",3050246964:"IFCCONTEXTDEPENDENTUNIT",3293443760:"IFCCONTROL",25142252:"IFCCONTROLLER",578613899:"IFCCONTROLLERTYPE",2889183280:"IFCCONVERSIONBASEDUNIT",2713554722:"IFCCONVERSIONBASEDUNITWITHOFFSET",4136498852:"IFCCOOLEDBEAM",335055490:"IFCCOOLEDBEAMTYPE",3640358203:"IFCCOOLINGTOWER",2954562838:"IFCCOOLINGTOWERTYPE",1785450214:"IFCCOORDINATEOPERATION",1466758467:"IFCCOORDINATEREFERENCESYSTEM",3895139033:"IFCCOSTITEM",1419761937:"IFCCOSTSCHEDULE",602808272:"IFCCOSTVALUE",1973544240:"IFCCOVERING",1916426348:"IFCCOVERINGTYPE",3295246426:"IFCCREWRESOURCE",1815067380:"IFCCREWRESOURCETYPE",2506170314:"IFCCSGPRIMITIVE3D",2147822146:"IFCCSGSOLID",539742890:"IFCCURRENCYRELATIONSHIP",3495092785:"IFCCURTAINWALL",1457835157:"IFCCURTAINWALLTYPE",2601014836:"IFCCURVE",2827736869:"IFCCURVEBOUNDEDPLANE",2629017746:"IFCCURVEBOUNDEDSURFACE",1186437898:"IFCCURVESEGMENT2D",3800577675:"IFCCURVESTYLE",1105321065:"IFCCURVESTYLEFONT",2367409068:"IFCCURVESTYLEFONTANDSCALING",3510044353:"IFCCURVESTYLEFONTPATTERN",1213902940:"IFCCYLINDRICALSURFACE",4074379575:"IFCDAMPER",3961806047:"IFCDAMPERTYPE",3426335179:"IFCDEEPFOUNDATION",1306400036:"IFCDEEPFOUNDATIONTYPE",3632507154:"IFCDERIVEDPROFILEDEF",1765591967:"IFCDERIVEDUNIT",1045800335:"IFCDERIVEDUNITELEMENT",2949456006:"IFCDIMENSIONALEXPONENTS",32440307:"IFCDIRECTION",1335981549:"IFCDISCRETEACCESSORY",2635815018:"IFCDISCRETEACCESSORYTYPE",1945343521:"IFCDISTANCEEXPRESSION",1052013943:"IFCDISTRIBUTIONCHAMBERELEMENT",1599208980:"IFCDISTRIBUTIONCHAMBERELEMENTTYPE",562808652:"IFCDISTRIBUTIONCIRCUIT",1062813311:"IFCDISTRIBUTIONCONTROLELEMENT",2063403501:"IFCDISTRIBUTIONCONTROLELEMENTTYPE",1945004755:"IFCDISTRIBUTIONELEMENT",3256556792:"IFCDISTRIBUTIONELEMENTTYPE",3040386961:"IFCDISTRIBUTIONFLOWELEMENT",3849074793:"IFCDISTRIBUTIONFLOWELEMENTTYPE",3041715199:"IFCDISTRIBUTIONPORT",3205830791:"IFCDISTRIBUTIONSYSTEM",1154170062:"IFCDOCUMENTINFORMATION",770865208:"IFCDOCUMENTINFORMATIONRELATIONSHIP",3732053477:"IFCDOCUMENTREFERENCE",395920057:"IFCDOOR",2963535650:"IFCDOORLININGPROPERTIES",1714330368:"IFCDOORPANELPROPERTIES",3242481149:"IFCDOORSTANDARDCASE",526551008:"IFCDOORSTYLE",2323601079:"IFCDOORTYPE",445594917:"IFCDRAUGHTINGPREDEFINEDCOLOUR",4006246654:"IFCDRAUGHTINGPREDEFINEDCURVEFONT",342316401:"IFCDUCTFITTING",869906466:"IFCDUCTFITTINGTYPE",3518393246:"IFCDUCTSEGMENT",3760055223:"IFCDUCTSEGMENTTYPE",1360408905:"IFCDUCTSILENCER",2030761528:"IFCDUCTSILENCERTYPE",3900360178:"IFCEDGE",476780140:"IFCEDGECURVE",1472233963:"IFCEDGELOOP",1904799276:"IFCELECTRICAPPLIANCE",663422040:"IFCELECTRICAPPLIANCETYPE",862014818:"IFCELECTRICDISTRIBUTIONBOARD",2417008758:"IFCELECTRICDISTRIBUTIONBOARDTYPE",3310460725:"IFCELECTRICFLOWSTORAGEDEVICE",3277789161:"IFCELECTRICFLOWSTORAGEDEVICETYPE",264262732:"IFCELECTRICGENERATOR",1534661035:"IFCELECTRICGENERATORTYPE",402227799:"IFCELECTRICMOTOR",1217240411:"IFCELECTRICMOTORTYPE",1003880860:"IFCELECTRICTIMECONTROL",712377611:"IFCELECTRICTIMECONTROLTYPE",1758889154:"IFCELEMENT",4123344466:"IFCELEMENTASSEMBLY",2397081782:"IFCELEMENTASSEMBLYTYPE",1623761950:"IFCELEMENTCOMPONENT",2590856083:"IFCELEMENTCOMPONENTTYPE",1883228015:"IFCELEMENTQUANTITY",339256511:"IFCELEMENTTYPE",2777663545:"IFCELEMENTARYSURFACE",1704287377:"IFCELLIPSE",2835456948:"IFCELLIPSEPROFILEDEF",1658829314:"IFCENERGYCONVERSIONDEVICE",2107101300:"IFCENERGYCONVERSIONDEVICETYPE",2814081492:"IFCENGINE",132023988:"IFCENGINETYPE",3747195512:"IFCEVAPORATIVECOOLER",3174744832:"IFCEVAPORATIVECOOLERTYPE",484807127:"IFCEVAPORATOR",3390157468:"IFCEVAPORATORTYPE",4148101412:"IFCEVENT",211053100:"IFCEVENTTIME",4024345920:"IFCEVENTTYPE",297599258:"IFCEXTENDEDPROPERTIES",4294318154:"IFCEXTERNALINFORMATION",3200245327:"IFCEXTERNALREFERENCE",1437805879:"IFCEXTERNALREFERENCERELATIONSHIP",1209101575:"IFCEXTERNALSPATIALELEMENT",2853485674:"IFCEXTERNALSPATIALSTRUCTUREELEMENT",2242383968:"IFCEXTERNALLYDEFINEDHATCHSTYLE",1040185647:"IFCEXTERNALLYDEFINEDSURFACESTYLE",3548104201:"IFCEXTERNALLYDEFINEDTEXTFONT",477187591:"IFCEXTRUDEDAREASOLID",2804161546:"IFCEXTRUDEDAREASOLIDTAPERED",2556980723:"IFCFACE",2047409740:"IFCFACEBASEDSURFACEMODEL",1809719519:"IFCFACEBOUND",803316827:"IFCFACEOUTERBOUND",3008276851:"IFCFACESURFACE",807026263:"IFCFACETEDBREP",3737207727:"IFCFACETEDBREPWITHVOIDS",24185140:"IFCFACILITY",1310830890:"IFCFACILITYPART",4219587988:"IFCFAILURECONNECTIONCONDITION",3415622556:"IFCFAN",346874300:"IFCFANTYPE",647756555:"IFCFASTENER",2489546625:"IFCFASTENERTYPE",2827207264:"IFCFEATUREELEMENT",2143335405:"IFCFEATUREELEMENTADDITION",1287392070:"IFCFEATUREELEMENTSUBTRACTION",738692330:"IFCFILLAREASTYLE",374418227:"IFCFILLAREASTYLEHATCHING",315944413:"IFCFILLAREASTYLETILES",819412036:"IFCFILTER",1810631287:"IFCFILTERTYPE",1426591983:"IFCFIRESUPPRESSIONTERMINAL",4222183408:"IFCFIRESUPPRESSIONTERMINALTYPE",2652556860:"IFCFIXEDREFERENCESWEPTAREASOLID",2058353004:"IFCFLOWCONTROLLER",3907093117:"IFCFLOWCONTROLLERTYPE",4278956645:"IFCFLOWFITTING",3198132628:"IFCFLOWFITTINGTYPE",182646315:"IFCFLOWINSTRUMENT",4037862832:"IFCFLOWINSTRUMENTTYPE",2188021234:"IFCFLOWMETER",3815607619:"IFCFLOWMETERTYPE",3132237377:"IFCFLOWMOVINGDEVICE",1482959167:"IFCFLOWMOVINGDEVICETYPE",987401354:"IFCFLOWSEGMENT",1834744321:"IFCFLOWSEGMENTTYPE",707683696:"IFCFLOWSTORAGEDEVICE",1339347760:"IFCFLOWSTORAGEDEVICETYPE",2223149337:"IFCFLOWTERMINAL",2297155007:"IFCFLOWTERMINALTYPE",3508470533:"IFCFLOWTREATMENTDEVICE",3009222698:"IFCFLOWTREATMENTDEVICETYPE",900683007:"IFCFOOTING",1893162501:"IFCFOOTINGTYPE",263784265:"IFCFURNISHINGELEMENT",4238390223:"IFCFURNISHINGELEMENTTYPE",1509553395:"IFCFURNITURE",1268542332:"IFCFURNITURETYPE",3493046030:"IFCGEOGRAPHICELEMENT",4095422895:"IFCGEOGRAPHICELEMENTTYPE",987898635:"IFCGEOMETRICCURVESET",3448662350:"IFCGEOMETRICREPRESENTATIONCONTEXT",2453401579:"IFCGEOMETRICREPRESENTATIONITEM",4142052618:"IFCGEOMETRICREPRESENTATIONSUBCONTEXT",3590301190:"IFCGEOMETRICSET",3009204131:"IFCGRID",852622518:"IFCGRIDAXIS",178086475:"IFCGRIDPLACEMENT",2706460486:"IFCGROUP",812098782:"IFCHALFSPACESOLID",3319311131:"IFCHEATEXCHANGER",1251058090:"IFCHEATEXCHANGERTYPE",2068733104:"IFCHUMIDIFIER",1806887404:"IFCHUMIDIFIERTYPE",1484403080:"IFCISHAPEPROFILEDEF",3905492369:"IFCIMAGETEXTURE",3570813810:"IFCINDEXEDCOLOURMAP",2571569899:"IFCINDEXEDPOLYCURVE",178912537:"IFCINDEXEDPOLYGONALFACE",2294589976:"IFCINDEXEDPOLYGONALFACEWITHVOIDS",1437953363:"IFCINDEXEDTEXTUREMAP",2133299955:"IFCINDEXEDTRIANGLETEXTUREMAP",4175244083:"IFCINTERCEPTOR",3946677679:"IFCINTERCEPTORTYPE",3113134337:"IFCINTERSECTIONCURVE",2391368822:"IFCINVENTORY",3741457305:"IFCIRREGULARTIMESERIES",3020489413:"IFCIRREGULARTIMESERIESVALUE",2176052936:"IFCJUNCTIONBOX",4288270099:"IFCJUNCTIONBOXTYPE",572779678:"IFCLSHAPEPROFILEDEF",3827777499:"IFCLABORRESOURCE",428585644:"IFCLABORRESOURCETYPE",1585845231:"IFCLAGTIME",76236018:"IFCLAMP",1051575348:"IFCLAMPTYPE",2655187982:"IFCLIBRARYINFORMATION",3452421091:"IFCLIBRARYREFERENCE",4162380809:"IFCLIGHTDISTRIBUTIONDATA",629592764:"IFCLIGHTFIXTURE",1161773419:"IFCLIGHTFIXTURETYPE",1566485204:"IFCLIGHTINTENSITYDISTRIBUTION",1402838566:"IFCLIGHTSOURCE",125510826:"IFCLIGHTSOURCEAMBIENT",2604431987:"IFCLIGHTSOURCEDIRECTIONAL",4266656042:"IFCLIGHTSOURCEGONIOMETRIC",1520743889:"IFCLIGHTSOURCEPOSITIONAL",3422422726:"IFCLIGHTSOURCESPOT",1281925730:"IFCLINE",3092502836:"IFCLINESEGMENT2D",388784114:"IFCLINEARPLACEMENT",1154579445:"IFCLINEARPOSITIONINGELEMENT",2624227202:"IFCLOCALPLACEMENT",1008929658:"IFCLOOP",1425443689:"IFCMANIFOLDSOLIDBREP",3057273783:"IFCMAPCONVERSION",2347385850:"IFCMAPPEDITEM",1838606355:"IFCMATERIAL",1847130766:"IFCMATERIALCLASSIFICATIONRELATIONSHIP",3708119e3:"IFCMATERIALCONSTITUENT",2852063980:"IFCMATERIALCONSTITUENTSET",760658860:"IFCMATERIALDEFINITION",2022407955:"IFCMATERIALDEFINITIONREPRESENTATION",248100487:"IFCMATERIALLAYER",3303938423:"IFCMATERIALLAYERSET",1303795690:"IFCMATERIALLAYERSETUSAGE",1847252529:"IFCMATERIALLAYERWITHOFFSETS",2199411900:"IFCMATERIALLIST",2235152071:"IFCMATERIALPROFILE",164193824:"IFCMATERIALPROFILESET",3079605661:"IFCMATERIALPROFILESETUSAGE",3404854881:"IFCMATERIALPROFILESETUSAGETAPERING",552965576:"IFCMATERIALPROFILEWITHOFFSETS",3265635763:"IFCMATERIALPROPERTIES",853536259:"IFCMATERIALRELATIONSHIP",1507914824:"IFCMATERIALUSAGEDEFINITION",2597039031:"IFCMEASUREWITHUNIT",377706215:"IFCMECHANICALFASTENER",2108223431:"IFCMECHANICALFASTENERTYPE",1437502449:"IFCMEDICALDEVICE",1114901282:"IFCMEDICALDEVICETYPE",1073191201:"IFCMEMBER",1911478936:"IFCMEMBERSTANDARDCASE",3181161470:"IFCMEMBERTYPE",3368373690:"IFCMETRIC",2998442950:"IFCMIRROREDPROFILEDEF",2706619895:"IFCMONETARYUNIT",2474470126:"IFCMOTORCONNECTION",977012517:"IFCMOTORCONNECTIONTYPE",1918398963:"IFCNAMEDUNIT",3888040117:"IFCOBJECT",219451334:"IFCOBJECTDEFINITION",3701648758:"IFCOBJECTPLACEMENT",2251480897:"IFCOBJECTIVE",4143007308:"IFCOCCUPANT",590820931:"IFCOFFSETCURVE",3388369263:"IFCOFFSETCURVE2D",3505215534:"IFCOFFSETCURVE3D",2485787929:"IFCOFFSETCURVEBYDISTANCES",2665983363:"IFCOPENSHELL",3588315303:"IFCOPENINGELEMENT",3079942009:"IFCOPENINGSTANDARDCASE",4251960020:"IFCORGANIZATION",1411181986:"IFCORGANIZATIONRELATIONSHIP",643959842:"IFCORIENTATIONEXPRESSION",1029017970:"IFCORIENTEDEDGE",144952367:"IFCOUTERBOUNDARYCURVE",3694346114:"IFCOUTLET",2837617999:"IFCOUTLETTYPE",1207048766:"IFCOWNERHISTORY",2529465313:"IFCPARAMETERIZEDPROFILEDEF",2519244187:"IFCPATH",1682466193:"IFCPCURVE",2382730787:"IFCPERFORMANCEHISTORY",3566463478:"IFCPERMEABLECOVERINGPROPERTIES",3327091369:"IFCPERMIT",2077209135:"IFCPERSON",101040310:"IFCPERSONANDORGANIZATION",3021840470:"IFCPHYSICALCOMPLEXQUANTITY",2483315170:"IFCPHYSICALQUANTITY",2226359599:"IFCPHYSICALSIMPLEQUANTITY",1687234759:"IFCPILE",1158309216:"IFCPILETYPE",310824031:"IFCPIPEFITTING",804291784:"IFCPIPEFITTINGTYPE",3612865200:"IFCPIPESEGMENT",4231323485:"IFCPIPESEGMENTTYPE",597895409:"IFCPIXELTEXTURE",2004835150:"IFCPLACEMENT",603570806:"IFCPLANARBOX",1663979128:"IFCPLANAREXTENT",220341763:"IFCPLANE",3171933400:"IFCPLATE",1156407060:"IFCPLATESTANDARDCASE",4017108033:"IFCPLATETYPE",2067069095:"IFCPOINT",4022376103:"IFCPOINTONCURVE",1423911732:"IFCPOINTONSURFACE",2924175390:"IFCPOLYLOOP",2775532180:"IFCPOLYGONALBOUNDEDHALFSPACE",2839578677:"IFCPOLYGONALFACESET",3724593414:"IFCPOLYLINE",3740093272:"IFCPORT",1946335990:"IFCPOSITIONINGELEMENT",3355820592:"IFCPOSTALADDRESS",759155922:"IFCPREDEFINEDCOLOUR",2559016684:"IFCPREDEFINEDCURVEFONT",3727388367:"IFCPREDEFINEDITEM",3778827333:"IFCPREDEFINEDPROPERTIES",3967405729:"IFCPREDEFINEDPROPERTYSET",1775413392:"IFCPREDEFINEDTEXTFONT",677532197:"IFCPRESENTATIONITEM",2022622350:"IFCPRESENTATIONLAYERASSIGNMENT",1304840413:"IFCPRESENTATIONLAYERWITHSTYLE",3119450353:"IFCPRESENTATIONSTYLE",2417041796:"IFCPRESENTATIONSTYLEASSIGNMENT",2744685151:"IFCPROCEDURE",569719735:"IFCPROCEDURETYPE",2945172077:"IFCPROCESS",4208778838:"IFCPRODUCT",673634403:"IFCPRODUCTDEFINITIONSHAPE",2095639259:"IFCPRODUCTREPRESENTATION",3958567839:"IFCPROFILEDEF",2802850158:"IFCPROFILEPROPERTIES",103090709:"IFCPROJECT",653396225:"IFCPROJECTLIBRARY",2904328755:"IFCPROJECTORDER",3843373140:"IFCPROJECTEDCRS",3651124850:"IFCPROJECTIONELEMENT",2598011224:"IFCPROPERTY",986844984:"IFCPROPERTYABSTRACTION",871118103:"IFCPROPERTYBOUNDEDVALUE",1680319473:"IFCPROPERTYDEFINITION",148025276:"IFCPROPERTYDEPENDENCYRELATIONSHIP",4166981789:"IFCPROPERTYENUMERATEDVALUE",3710013099:"IFCPROPERTYENUMERATION",2752243245:"IFCPROPERTYLISTVALUE",941946838:"IFCPROPERTYREFERENCEVALUE",1451395588:"IFCPROPERTYSET",3357820518:"IFCPROPERTYSETDEFINITION",492091185:"IFCPROPERTYSETTEMPLATE",3650150729:"IFCPROPERTYSINGLEVALUE",110355661:"IFCPROPERTYTABLEVALUE",3521284610:"IFCPROPERTYTEMPLATE",1482703590:"IFCPROPERTYTEMPLATEDEFINITION",738039164:"IFCPROTECTIVEDEVICE",2295281155:"IFCPROTECTIVEDEVICETRIPPINGUNIT",655969474:"IFCPROTECTIVEDEVICETRIPPINGUNITTYPE",1842657554:"IFCPROTECTIVEDEVICETYPE",3219374653:"IFCPROXY",90941305:"IFCPUMP",2250791053:"IFCPUMPTYPE",2044713172:"IFCQUANTITYAREA",2093928680:"IFCQUANTITYCOUNT",931644368:"IFCQUANTITYLENGTH",2090586900:"IFCQUANTITYSET",3252649465:"IFCQUANTITYTIME",2405470396:"IFCQUANTITYVOLUME",825690147:"IFCQUANTITYWEIGHT",2262370178:"IFCRAILING",2893384427:"IFCRAILINGTYPE",3024970846:"IFCRAMP",3283111854:"IFCRAMPFLIGHT",2324767716:"IFCRAMPFLIGHTTYPE",1469900589:"IFCRAMPTYPE",1232101972:"IFCRATIONALBSPLINECURVEWITHKNOTS",683857671:"IFCRATIONALBSPLINESURFACEWITHKNOTS",2770003689:"IFCRECTANGLEHOLLOWPROFILEDEF",3615266464:"IFCRECTANGLEPROFILEDEF",2798486643:"IFCRECTANGULARPYRAMID",3454111270:"IFCRECTANGULARTRIMMEDSURFACE",3915482550:"IFCRECURRENCEPATTERN",2433181523:"IFCREFERENCE",4021432810:"IFCREFERENT",3413951693:"IFCREGULARTIMESERIES",1580146022:"IFCREINFORCEMENTBARPROPERTIES",3765753017:"IFCREINFORCEMENTDEFINITIONPROPERTIES",979691226:"IFCREINFORCINGBAR",2572171363:"IFCREINFORCINGBARTYPE",3027567501:"IFCREINFORCINGELEMENT",964333572:"IFCREINFORCINGELEMENTTYPE",2320036040:"IFCREINFORCINGMESH",2310774935:"IFCREINFORCINGMESHTYPE",160246688:"IFCRELAGGREGATES",3939117080:"IFCRELASSIGNS",1683148259:"IFCRELASSIGNSTOACTOR",2495723537:"IFCRELASSIGNSTOCONTROL",1307041759:"IFCRELASSIGNSTOGROUP",1027710054:"IFCRELASSIGNSTOGROUPBYFACTOR",4278684876:"IFCRELASSIGNSTOPROCESS",2857406711:"IFCRELASSIGNSTOPRODUCT",205026976:"IFCRELASSIGNSTORESOURCE",1865459582:"IFCRELASSOCIATES",4095574036:"IFCRELASSOCIATESAPPROVAL",919958153:"IFCRELASSOCIATESCLASSIFICATION",2728634034:"IFCRELASSOCIATESCONSTRAINT",982818633:"IFCRELASSOCIATESDOCUMENT",3840914261:"IFCRELASSOCIATESLIBRARY",2655215786:"IFCRELASSOCIATESMATERIAL",826625072:"IFCRELCONNECTS",1204542856:"IFCRELCONNECTSELEMENTS",3945020480:"IFCRELCONNECTSPATHELEMENTS",4201705270:"IFCRELCONNECTSPORTTOELEMENT",3190031847:"IFCRELCONNECTSPORTS",2127690289:"IFCRELCONNECTSSTRUCTURALACTIVITY",1638771189:"IFCRELCONNECTSSTRUCTURALMEMBER",504942748:"IFCRELCONNECTSWITHECCENTRICITY",3678494232:"IFCRELCONNECTSWITHREALIZINGELEMENTS",3242617779:"IFCRELCONTAINEDINSPATIALSTRUCTURE",886880790:"IFCRELCOVERSBLDGELEMENTS",2802773753:"IFCRELCOVERSSPACES",2565941209:"IFCRELDECLARES",2551354335:"IFCRELDECOMPOSES",693640335:"IFCRELDEFINES",1462361463:"IFCRELDEFINESBYOBJECT",4186316022:"IFCRELDEFINESBYPROPERTIES",307848117:"IFCRELDEFINESBYTEMPLATE",781010003:"IFCRELDEFINESBYTYPE",3940055652:"IFCRELFILLSELEMENT",279856033:"IFCRELFLOWCONTROLELEMENTS",427948657:"IFCRELINTERFERESELEMENTS",3268803585:"IFCRELNESTS",1441486842:"IFCRELPOSITIONS",750771296:"IFCRELPROJECTSELEMENT",1245217292:"IFCRELREFERENCEDINSPATIALSTRUCTURE",4122056220:"IFCRELSEQUENCE",366585022:"IFCRELSERVICESBUILDINGS",3451746338:"IFCRELSPACEBOUNDARY",3523091289:"IFCRELSPACEBOUNDARY1STLEVEL",1521410863:"IFCRELSPACEBOUNDARY2NDLEVEL",1401173127:"IFCRELVOIDSELEMENT",478536968:"IFCRELATIONSHIP",816062949:"IFCREPARAMETRISEDCOMPOSITECURVESEGMENT",1076942058:"IFCREPRESENTATION",3377609919:"IFCREPRESENTATIONCONTEXT",3008791417:"IFCREPRESENTATIONITEM",1660063152:"IFCREPRESENTATIONMAP",2914609552:"IFCRESOURCE",2943643501:"IFCRESOURCEAPPROVALRELATIONSHIP",1608871552:"IFCRESOURCECONSTRAINTRELATIONSHIP",2439245199:"IFCRESOURCELEVELRELATIONSHIP",1042787934:"IFCRESOURCETIME",1856042241:"IFCREVOLVEDAREASOLID",3243963512:"IFCREVOLVEDAREASOLIDTAPERED",4158566097:"IFCRIGHTCIRCULARCONE",3626867408:"IFCRIGHTCIRCULARCYLINDER",2016517767:"IFCROOF",2781568857:"IFCROOFTYPE",2341007311:"IFCROOT",2778083089:"IFCROUNDEDRECTANGLEPROFILEDEF",448429030:"IFCSIUNIT",3053780830:"IFCSANITARYTERMINAL",1768891740:"IFCSANITARYTERMINALTYPE",1054537805:"IFCSCHEDULINGTIME",2157484638:"IFCSEAMCURVE",2042790032:"IFCSECTIONPROPERTIES",4165799628:"IFCSECTIONREINFORCEMENTPROPERTIES",1862484736:"IFCSECTIONEDSOLID",1290935644:"IFCSECTIONEDSOLIDHORIZONTAL",1509187699:"IFCSECTIONEDSPINE",4086658281:"IFCSENSOR",1783015770:"IFCSENSORTYPE",1329646415:"IFCSHADINGDEVICE",4074543187:"IFCSHADINGDEVICETYPE",867548509:"IFCSHAPEASPECT",3982875396:"IFCSHAPEMODEL",4240577450:"IFCSHAPEREPRESENTATION",4124623270:"IFCSHELLBASEDSURFACEMODEL",3692461612:"IFCSIMPLEPROPERTY",3663146110:"IFCSIMPLEPROPERTYTEMPLATE",4097777520:"IFCSITE",1529196076:"IFCSLAB",3127900445:"IFCSLABELEMENTEDCASE",3027962421:"IFCSLABSTANDARDCASE",2533589738:"IFCSLABTYPE",2609359061:"IFCSLIPPAGECONNECTIONCONDITION",3420628829:"IFCSOLARDEVICE",1072016465:"IFCSOLARDEVICETYPE",723233188:"IFCSOLIDMODEL",3856911033:"IFCSPACE",1999602285:"IFCSPACEHEATER",1305183839:"IFCSPACEHEATERTYPE",3812236995:"IFCSPACETYPE",1412071761:"IFCSPATIALELEMENT",710998568:"IFCSPATIALELEMENTTYPE",2706606064:"IFCSPATIALSTRUCTUREELEMENT",3893378262:"IFCSPATIALSTRUCTUREELEMENTTYPE",463610769:"IFCSPATIALZONE",2481509218:"IFCSPATIALZONETYPE",451544542:"IFCSPHERE",4015995234:"IFCSPHERICALSURFACE",1404847402:"IFCSTACKTERMINAL",3112655638:"IFCSTACKTERMINALTYPE",331165859:"IFCSTAIR",4252922144:"IFCSTAIRFLIGHT",1039846685:"IFCSTAIRFLIGHTTYPE",338393293:"IFCSTAIRTYPE",682877961:"IFCSTRUCTURALACTION",3544373492:"IFCSTRUCTURALACTIVITY",2515109513:"IFCSTRUCTURALANALYSISMODEL",1179482911:"IFCSTRUCTURALCONNECTION",2273995522:"IFCSTRUCTURALCONNECTIONCONDITION",1004757350:"IFCSTRUCTURALCURVEACTION",4243806635:"IFCSTRUCTURALCURVECONNECTION",214636428:"IFCSTRUCTURALCURVEMEMBER",2445595289:"IFCSTRUCTURALCURVEMEMBERVARYING",2757150158:"IFCSTRUCTURALCURVEREACTION",3136571912:"IFCSTRUCTURALITEM",1807405624:"IFCSTRUCTURALLINEARACTION",2162789131:"IFCSTRUCTURALLOAD",385403989:"IFCSTRUCTURALLOADCASE",3478079324:"IFCSTRUCTURALLOADCONFIGURATION",1252848954:"IFCSTRUCTURALLOADGROUP",1595516126:"IFCSTRUCTURALLOADLINEARFORCE",609421318:"IFCSTRUCTURALLOADORRESULT",2668620305:"IFCSTRUCTURALLOADPLANARFORCE",2473145415:"IFCSTRUCTURALLOADSINGLEDISPLACEMENT",1973038258:"IFCSTRUCTURALLOADSINGLEDISPLACEMENTDISTORTION",1597423693:"IFCSTRUCTURALLOADSINGLEFORCE",1190533807:"IFCSTRUCTURALLOADSINGLEFORCEWARPING",2525727697:"IFCSTRUCTURALLOADSTATIC",3408363356:"IFCSTRUCTURALLOADTEMPERATURE",530289379:"IFCSTRUCTURALMEMBER",1621171031:"IFCSTRUCTURALPLANARACTION",2082059205:"IFCSTRUCTURALPOINTACTION",734778138:"IFCSTRUCTURALPOINTCONNECTION",1235345126:"IFCSTRUCTURALPOINTREACTION",3689010777:"IFCSTRUCTURALREACTION",2986769608:"IFCSTRUCTURALRESULTGROUP",3657597509:"IFCSTRUCTURALSURFACEACTION",1975003073:"IFCSTRUCTURALSURFACECONNECTION",3979015343:"IFCSTRUCTURALSURFACEMEMBER",2218152070:"IFCSTRUCTURALSURFACEMEMBERVARYING",603775116:"IFCSTRUCTURALSURFACEREACTION",2830218821:"IFCSTYLEMODEL",3958052878:"IFCSTYLEDITEM",3049322572:"IFCSTYLEDREPRESENTATION",148013059:"IFCSUBCONTRACTRESOURCE",4095615324:"IFCSUBCONTRACTRESOURCETYPE",2233826070:"IFCSUBEDGE",2513912981:"IFCSURFACE",699246055:"IFCSURFACECURVE",2028607225:"IFCSURFACECURVESWEPTAREASOLID",3101698114:"IFCSURFACEFEATURE",2809605785:"IFCSURFACEOFLINEAREXTRUSION",4124788165:"IFCSURFACEOFREVOLUTION",2934153892:"IFCSURFACEREINFORCEMENTAREA",1300840506:"IFCSURFACESTYLE",3303107099:"IFCSURFACESTYLELIGHTING",1607154358:"IFCSURFACESTYLEREFRACTION",1878645084:"IFCSURFACESTYLERENDERING",846575682:"IFCSURFACESTYLESHADING",1351298697:"IFCSURFACESTYLEWITHTEXTURES",626085974:"IFCSURFACETEXTURE",2247615214:"IFCSWEPTAREASOLID",1260650574:"IFCSWEPTDISKSOLID",1096409881:"IFCSWEPTDISKSOLIDPOLYGONAL",230924584:"IFCSWEPTSURFACE",1162798199:"IFCSWITCHINGDEVICE",2315554128:"IFCSWITCHINGDEVICETYPE",2254336722:"IFCSYSTEM",413509423:"IFCSYSTEMFURNITUREELEMENT",1580310250:"IFCSYSTEMFURNITUREELEMENTTYPE",3071757647:"IFCTSHAPEPROFILEDEF",985171141:"IFCTABLE",2043862942:"IFCTABLECOLUMN",531007025:"IFCTABLEROW",812556717:"IFCTANK",5716631:"IFCTANKTYPE",3473067441:"IFCTASK",1549132990:"IFCTASKTIME",2771591690:"IFCTASKTIMERECURRING",3206491090:"IFCTASKTYPE",912023232:"IFCTELECOMADDRESS",3824725483:"IFCTENDON",2347447852:"IFCTENDONANCHOR",3081323446:"IFCTENDONANCHORTYPE",3663046924:"IFCTENDONCONDUIT",2281632017:"IFCTENDONCONDUITTYPE",2415094496:"IFCTENDONTYPE",2387106220:"IFCTESSELLATEDFACESET",901063453:"IFCTESSELLATEDITEM",4282788508:"IFCTEXTLITERAL",3124975700:"IFCTEXTLITERALWITHEXTENT",1447204868:"IFCTEXTSTYLE",1983826977:"IFCTEXTSTYLEFONTMODEL",2636378356:"IFCTEXTSTYLEFORDEFINEDFONT",1640371178:"IFCTEXTSTYLETEXTMODEL",280115917:"IFCTEXTURECOORDINATE",1742049831:"IFCTEXTURECOORDINATEGENERATOR",2552916305:"IFCTEXTUREMAP",1210645708:"IFCTEXTUREVERTEX",3611470254:"IFCTEXTUREVERTEXLIST",1199560280:"IFCTIMEPERIOD",3101149627:"IFCTIMESERIES",581633288:"IFCTIMESERIESVALUE",1377556343:"IFCTOPOLOGICALREPRESENTATIONITEM",1735638870:"IFCTOPOLOGYREPRESENTATION",1935646853:"IFCTOROIDALSURFACE",3825984169:"IFCTRANSFORMER",1692211062:"IFCTRANSFORMERTYPE",2595432518:"IFCTRANSITIONCURVESEGMENT2D",1620046519:"IFCTRANSPORTELEMENT",2097647324:"IFCTRANSPORTELEMENTTYPE",2715220739:"IFCTRAPEZIUMPROFILEDEF",2916149573:"IFCTRIANGULATEDFACESET",1229763772:"IFCTRIANGULATEDIRREGULARNETWORK",3593883385:"IFCTRIMMEDCURVE",3026737570:"IFCTUBEBUNDLE",1600972822:"IFCTUBEBUNDLETYPE",1628702193:"IFCTYPEOBJECT",3736923433:"IFCTYPEPROCESS",2347495698:"IFCTYPEPRODUCT",3698973494:"IFCTYPERESOURCE",427810014:"IFCUSHAPEPROFILEDEF",180925521:"IFCUNITASSIGNMENT",630975310:"IFCUNITARYCONTROLELEMENT",3179687236:"IFCUNITARYCONTROLELEMENTTYPE",4292641817:"IFCUNITARYEQUIPMENT",1911125066:"IFCUNITARYEQUIPMENTTYPE",4207607924:"IFCVALVE",728799441:"IFCVALVETYPE",1417489154:"IFCVECTOR",2799835756:"IFCVERTEX",2759199220:"IFCVERTEXLOOP",1907098498:"IFCVERTEXPOINT",1530820697:"IFCVIBRATIONDAMPER",3956297820:"IFCVIBRATIONDAMPERTYPE",2391383451:"IFCVIBRATIONISOLATOR",3313531582:"IFCVIBRATIONISOLATORTYPE",2769231204:"IFCVIRTUALELEMENT",891718957:"IFCVIRTUALGRIDINTERSECTION",926996030:"IFCVOIDINGFEATURE",2391406946:"IFCWALL",4156078855:"IFCWALLELEMENTEDCASE",3512223829:"IFCWALLSTANDARDCASE",1898987631:"IFCWALLTYPE",4237592921:"IFCWASTETERMINAL",1133259667:"IFCWASTETERMINALTYPE",3304561284:"IFCWINDOW",336235671:"IFCWINDOWLININGPROPERTIES",512836454:"IFCWINDOWPANELPROPERTIES",486154966:"IFCWINDOWSTANDARDCASE",1299126871:"IFCWINDOWSTYLE",4009809668:"IFCWINDOWTYPE",4088093105:"IFCWORKCALENDAR",1028945134:"IFCWORKCONTROL",4218914973:"IFCWORKPLAN",3342526732:"IFCWORKSCHEDULE",1236880293:"IFCWORKTIME",2543172580:"IFCZSHAPEPROFILEDEF",1033361043:"IFCZONE"};class ZD{constructor(t){this.state=t}getExpressId(t,e){if(!t.index)return;const s=t.index.array;return t.attributes.expressID.getX(s[3*e])}getItemProperties(t,e,s=!1){return this.state.useJSON?{...this.state.models[t].jsonData[e]}:this.state.api.GetLine(t,e,s)}getAllItemsOfType(t,e,s){return this.state.useJSON?this.getAllItemsOfTypeJSON(t,e,s):this.getAllItemsOfTypeWebIfcAPI(t,e,s)}getPropertySets(t,e,s=!1){return this.state.useJSON?this.getPropertyJSON(t,e,s,XD.psets):this.getPropertyWebIfcAPI(t,e,s,XD.psets)}getTypeProperties(t,e,s=!1){return this.state.useJSON?this.getPropertyJSON(t,e,s,XD.type):this.getPropertyWebIfcAPI(t,e,s,XD.type)}getMaterialsProperties(t,e,s=!1){return this.state.useJSON?this.getPropertyJSON(t,e,s,XD.materials):this.getPropertyWebIfcAPI(t,e,s,XD.materials)}getSpatialStructure(t){return this.state.useJSON?this.getSpatialStructureJSON(t):this.getSpatialStructureWebIfcAPI(t)}getSpatialStructureJSON(t){const e=this.getSpatialTreeChunks(t),s=this.getAllItemsOfTypeJSON(t,Sg,!1)[0],r=this.newIfcProject(s);return this.getSpatialNode(t,r,e),{...r}}getSpatialStructureWebIfcAPI(t){const e=this.getSpatialTreeChunks(t),s=this.state.api.GetLineIDsWithType(t,Sg).get(0),r=this.newIfcProject(s);return this.getSpatialNode(t,r,e),r}getAllItemsOfTypeJSON(t,e,s){const r=this.state.models[t].jsonData,i=$D[e];if(!i)throw new Error(`Type not found: ${e}`);return this.filterJSONItemsByType(r,i,s)}filterJSONItemsByType(t,e,s){const r=[];return Object.keys(t).forEach((i=>{const n=parseInt(i);t[n].type.toUpperCase()===e&&r.push(s?{...t[n]}:n)})),r}getItemsByIDJSON(t,e){const s=this.state.models[t].jsonData,r=[];return e.forEach((t=>r.push({...s[t]}))),r}getPropertyJSON(t,e,s=!1,r){const i=this.getAllRelatedItemsOfTypeJSON(t,e,r),n=this.getItemsByIDJSON(t,i);return s&&n.forEach((e=>this.getJSONReferencesRecursively(t,e))),n}getJSONReferencesRecursively(t,e){if(null==e)return;const s=Object.keys(e);for(let r=0;r<s.length;r++){const i=s[r];this.getJSONItem(t,e,i)}}getJSONItem(t,e,s){if(Array.isArray(e[s]))return this.getMultipleJSONItems(t,e,s);e[s]&&5===e[s].type&&(e[s]=this.getItemsByIDJSON(t,[e[s].value])[0],this.getJSONReferencesRecursively(t,e[s]))}getMultipleJSONItems(t,e,s){e[s]=e[s].map((e=>(5===e.type&&(e=this.getItemsByIDJSON(t,[e.value])[0],this.getJSONReferencesRecursively(t,e)),e)))}getPropertyWebIfcAPI(t,e,s=!1,r){return this.getAllRelatedItemsOfTypeWebIfcAPI(t,e,r).map((e=>this.state.api.GetLine(t,e,s)))}getAllItemsOfTypeWebIfcAPI(t,e,s){const r=[],i=this.state.api.GetLineIDsWithType(t,e);for(let t=0;t<i.size();t++)r.push(i.get(t));return s?r.map((e=>this.state.api.GetLine(t,e))):r}newIfcProject(t){return{expressID:t,type:"IFCPROJECT",children:[]}}getSpatialTreeChunks(t){const e={};return this.state.useJSON?(this.getChunksJSON(t,e,XD.aggregates),this.getChunksJSON(t,e,XD.spatial)):(this.getChunksWebIfcAPI(t,e,XD.aggregates),this.getChunksWebIfcAPI(t,e,XD.spatial)),e}getChunksJSON(t,e,s){this.getAllItemsOfTypeJSON(t,s.name,!0).forEach((t=>{this.saveChunk(e,s,t)}))}getChunksWebIfcAPI(t,e,s){const r=this.state.api.GetLineIDsWithType(t,s.name);for(let i=0;i<r.size();i++){const n=this.state.api.GetLine(t,r.get(i),!1);this.saveChunk(e,s,n)}}saveChunk(t,e,s){const r=s[e.relating].value,i=s[e.related].map((t=>t.value));null==t[r]?t[r]=i:t[r]=t[r].concat(i)}getSpatialNode(t,e,s){this.getChildren(t,e,s,XD.aggregates),this.getChildren(t,e,s,XD.spatial)}getChildren(t,e,s,r){const i=s[e.expressID];if(null==i)return;e[r.key]=i.map((e=>{const r=this.newNode(t,e);return this.getSpatialNode(t,r,s),r}))}newNode(t,e){return{expressID:e,type:this.getNodeType(t,e),children:[]}}getNodeType(t,e){if(this.state.useJSON)return this.state.models[t].jsonData[e].type;const s=this.state.models[t].types[e];return JD[s]}getAllRelatedItemsOfTypeJSON(t,e,s){const r=this.getAllItemsOfTypeJSON(t,s.name,!0),i=[];return r.forEach((t=>{this.isRelated(e,t,s)&&this.getRelated(t,s,i)})),i}getAllRelatedItemsOfTypeWebIfcAPI(t,e,s){const r=this.state.api.GetLineIDsWithType(t,s.name),i=[];for(let n=0;n<r.size();n++){const o=this.state.api.GetLine(t,r.get(n));this.isRelated(e,o,s)&&this.getRelated(o,s,i)}return i}getRelated(t,e,s){const r=t[e.relating];Array.isArray(r)?r.forEach((t=>s.push(t.value))):s.push(r.value)}isRelated(t,e,s){const r=e[s.related];if(Array.isArray(r)){return r.map((t=>t.value)).includes(t)}return r.value===t}}class QD{constructor(t){this.state=t}getAllTypes(){for(const t in this.state.models){const e=this.state.models[t].types;0==Object.keys(e).length&&this.getAllTypesOfModel(parseInt(t))}}getAllTypesOfModel(t){this.state.models[t].types;const e=Object.keys(JD).map((t=>parseInt(t))),s=this.state.models[t].types;e.forEach((e=>{const r=this.state.api.GetLineIDsWithType(t,e);for(let t=0;t<r.size();t++)s[r.get(t)]=e}))}}let tF=0;const eF="IfcManager is null!";class sF extends jr{constructor(){super(...arguments),this.modelID=tF++,this.ifcManager=null,this.mesh=this}setIFCManager(t){this.ifcManager=t}setWasmPath(t){if(null===this.ifcManager)throw new Error(eF);this.ifcManager.setWasmPath(t)}close(t){if(null===this.ifcManager)throw new Error(eF);this.ifcManager.close(this.modelID,t)}getExpressId(t,e){if(null===this.ifcManager)throw new Error(eF);return this.ifcManager.getExpressId(t,e)}getAllItemsOfType(t,e){if(null===this.ifcManager)throw new Error(eF);return this.ifcManager.getAllItemsOfType(this.modelID,t,e)}getItemProperties(t,e=!1){if(null===this.ifcManager)throw new Error(eF);return this.ifcManager.getItemProperties(this.modelID,t,e)}getPropertySets(t,e=!1){if(null===this.ifcManager)throw new Error(eF);return this.ifcManager.getPropertySets(this.modelID,t,e)}getTypeProperties(t,e=!1){if(null===this.ifcManager)throw new Error(eF);return this.ifcManager.getTypeProperties(this.modelID,t,e)}getIfcType(t){if(null===this.ifcManager)throw new Error(eF);return this.ifcManager.getIfcType(this.modelID,t)}getSpatialStructure(){if(null===this.ifcManager)throw new Error(eF);return this.ifcManager.getSpatialStructure(this.modelID)}getSubset(t){if(null===this.ifcManager)throw new Error(eF);return this.ifcManager.getSubset(this.modelID,t)}removeSubset(t,e){if(null===this.ifcManager)throw new Error(eF);this.ifcManager.removeSubset(this.modelID,t,e)}createSubset(t){if(null===this.ifcManager)throw new Error(eF);const e={...t,modelID:this.modelID};return this.ifcManager.createSubset(e)}hideItems(t){if(null===this.ifcManager)throw new Error(eF);this.ifcManager.hideItems(this.modelID,t)}hideAllItems(){if(null===this.ifcManager)throw new Error(eF);this.ifcManager.hideAllItems(this.modelID)}showItems(t){if(null===this.ifcManager)throw new Error(eF);this.ifcManager.showItems(this.modelID,t)}showAllItems(){if(null===this.ifcManager)throw new Error(eF);this.ifcManager.showAllItems(this.modelID)}}class rF{initializeMeshBVH(t,e,s){this.computeBoundsTree=t,this.disposeBoundsTree=e,this.acceleratedRaycast=s,this.setupThreeMeshBVH()}applyThreeMeshBVH(t){this.computeBoundsTree&&t.computeBoundsTree()}setupThreeMeshBVH(){this.computeBoundsTree&&this.disposeBoundsTree&&this.acceleratedRaycast&&(Er.prototype.computeBoundsTree=this.computeBoundsTree,Er.prototype.disposeBoundsTree=this.disposeBoundsTree,jr.prototype.raycast=this.acceleratedRaycast)}}class iF{constructor(t){this.modelCoordinates={},this.expressIDCoordinatesMap={},this.state=t}processCoordinates(t){const e=this.getAttributes(t),s=Array.from(e.expressID.array);this.expressIDCoordinatesMap[t]={};for(let e=0;e<s.length;e++){this.expressIDCoordinatesMap[t][s[e]]||(this.expressIDCoordinatesMap[t][s[e]]=[]);this.expressIDCoordinatesMap[t][s[e]].push(3*e)}this.initializeCoordinates(t)}hideItems(t,e){this.editCoordinates(t,e,!0)}showItems(t,e){this.editCoordinates(t,e,!1)}editCoordinates(t,e,s){const r=this.expressIDCoordinatesMap[t],i=[];e.forEach((t=>{r[t]&&i.push(...r[t])}));const n=this.getCoordinates(t),o=this.modelCoordinates[t];s?i.forEach((t=>n.set([0,0,0],t))):i.forEach((t=>n.set([o[t],o[t+1],o[t+2]],t))),this.getAttributes(t).position.needsUpdate=!0}showAllItems(t){this.modelCoordinates[t]&&(this.resetCoordinates(t),this.getAttributes(t).position.needsUpdate=!0)}hideAllItems(t){this.getCoordinates(t).fill(0),this.getAttributes(t).position.needsUpdate=!0}initializeCoordinates(t){const e=this.getCoordinates(t);this.modelCoordinates[t]||(this.modelCoordinates[t]=new Float32Array(e))}resetCoordinates(t){const e=this.modelCoordinates[t];this.getCoordinates(t).set(e)}getCoordinates(t){return this.getAttributes(t).position.array}getAttributes(t){return this.state.models[t].mesh.geometry.attributes}}class nF{constructor(){this.state={models:[],api:new HD,useJSON:!1},this.BVH=new rF,this.parser=new qD(this.state,this.BVH),this.subsets=new KD(this.state,this.BVH),this.properties=new ZD(this.state),this.types=new QD(this.state),this.hider=new iF(this.state)}async parse(t){const e=await this.parser.parse(t);this.state.useJSON?this.disposeMemory():this.types.getAllTypes(),this.hider.processCoordinates(e.modelID);const s=new sF(e.geometry,e.material);return s.setIFCManager(this),s}setWasmPath(t){this.state.api.SetWasmPath(t)}applyWebIfcConfig(t){this.state.webIfcSettings=t}useJSONData(t=!0){this.state.useJSON=t,this.disposeMemory()}addModelJSONData(t,e){const s=this.state.models[t];s&&(s.jsonData=e)}disposeMemory(){this.state.api=null,this.state.api=new HD}setupThreeMeshBVH(t,e,s){this.BVH.initializeMeshBVH(t,e,s)}close(t,e){this.state.api.CloseModel(t),e&&e.remove(this.state.models[t].mesh),delete this.state.models[t]}getExpressId(t,e){return this.properties.getExpressId(t,e)}getAllItemsOfType(t,e,s){return this.properties.getAllItemsOfType(t,e,s)}getItemProperties(t,e,s=!1){return this.properties.getItemProperties(t,e,s)}getPropertySets(t,e,s=!1){return this.properties.getPropertySets(t,e,s)}getTypeProperties(t,e,s=!1){return this.properties.getTypeProperties(t,e,s)}getMaterialsProperties(t,e,s=!1){return this.properties.getMaterialsProperties(t,e,s)}getIfcType(t,e){const s=this.state.models[t].types[e];return JD[s]}getSpatialStructure(t){return this.properties.getSpatialStructure(t)}getSubset(t,e){return this.subsets.getSubset(t,e)}removeSubset(t,e,s){this.subsets.removeSubset(t,e,s)}createSubset(t){return this.subsets.createSubset(t)}hideItems(t,e){this.hider.hideItems(t,e)}hideAllItems(t){this.hider.hideAllItems(t)}showItems(t,e){this.hider.showItems(t,e)}showAllItems(t){this.hider.showAllItems(t)}}class oF extends Qc{constructor(t){super(t),this.ifcManager=new nF}load(t,e,s,r){const i=this,n=new el(i.manager);n.setPath(i.path),n.setResponseType("arraybuffer"),n.setRequestHeader(i.requestHeader),n.setWithCredentials(i.withCredentials),n.load(t,(async function(s){try{if("string"==typeof s)throw new Error("IFC files must be given as a buffer!");e(await i.parse(s))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),s,r)}parse(t){return this.ifcManager.parse(t)}}class aF extends Qc{constructor(t){super(t)}load(t,e,s,r){const i=this,n=new el(i.manager);n.setPath(i.path),n.setResponseType("arraybuffer"),n.setRequestHeader(i.requestHeader),n.setWithCredentials(i.withCredentials),n.load(t,(function(s){try{e(i.parse(s))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),s,r)}parse(t){const e=new $c;e.setURLModifier((function(t){const e=function(t){for(const e in s)if(e.slice(-t.length)===t)return s[e]}(t);if(e){console.log("Loading",t);const s=new Blob([e.buffer],{type:"application/octet-stream"});return URL.createObjectURL(s)}return t}));const s=Em(new Uint8Array(t));if(s["doc.kml"]){const t=(new DOMParser).parseFromString(hm(s["doc.kml"]),"application/xml").querySelector("Placemark Model Link href");if(t){return new _m(e).parse(hm(s[t.textContent]))}}else{console.warn("KMZLoader: Missing doc.kml file.");for(const t in s){if("dae"===t.split(".").pop().toLowerCase()){return new _m(e).parse(hm(s[t]))}}}return console.error("KMZLoader: Couldn't find .dae file."),{scene:new ko}}}class hF{constructor(t=4){this.pool=t,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(t){if(!this.workers[t]){const e=this.workerCreator();e.addEventListener("message",this._onMessage.bind(this,t)),this.workers[t]=e}}_getIdleWorker(){for(let t=0;t<this.pool;t++)if(!(this.workerStatus&1<<t))return t;return-1}_onMessage(t,e){const s=this.workersResolve[t];if(s&&s(e),this.queue.length){const{resolve:e,msg:s,transfer:r}=this.queue.shift();this.workersResolve[t]=e,this.workers[t].postMessage(s,r)}else this.workerStatus^=1<<t}setWorkerCreator(t){this.workerCreator=t}setWorkerLimit(t){this.pool=t}postMessage(t,e){return new Promise((s=>{const r=this._getIdleWorker();-1!==r?(this._initWorker(r),this.workerStatus|=1<<r,this.workersResolve[r]=s,this.workers[r].postMessage(t,e)):this.queue.push({resolve:s,msg:t,transfer:e})}))}dispose(){this.workers.forEach((t=>t.terminate())),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}const cF=new WeakMap;let lF=0;class uF extends Qc{constructor(t){super(t),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new hF,this.workerSourceURL="",this.workerConfig=null,"undefined"!=typeof MSC_TRANSCODER&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(t){return this.transcoderPath=t,this}setWorkerLimit(t){return this.workerPool.setWorkerLimit(t),this}detectSupport(t){return this.workerConfig={astcSupported:t.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:t.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:t.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:t.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:t.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:t.extensions.has("WEBGL_compressed_texture_pvrtc")||t.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},t.capabilities.isWebGL2&&(this.workerConfig.etc1Supported=!1),this}init(){if(!this.transcoderPending){const t=new el(this.manager);t.setPath(this.transcoderPath),t.setWithCredentials(this.withCredentials);const e=t.loadAsync("basis_transcoder.js"),s=new el(this.manager);s.setPath(this.transcoderPath),s.setResponseType("arraybuffer"),s.setWithCredentials(this.withCredentials);const r=s.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([e,r]).then((([t,e])=>{const s=uF.BasisWorker.toString(),r=["/* constants */","let _EngineFormat = "+JSON.stringify(uF.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(uF.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(uF.BasisFormat),"/* basis_transcoder.js */",t,"/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([r])),this.transcoderBinary=e,this.workerPool.setWorkerCreator((()=>{const t=new Worker(this.workerSourceURL),e=this.transcoderBinary.slice(0);return t.postMessage({type:"init",config:this.workerConfig,transcoderBinary:e},[e]),t}))})),lF>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),lF++}return this.transcoderPending}load(t,e,s,r){if(null===this.workerConfig)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const i=new el(this.manager);i.setResponseType("arraybuffer"),i.setWithCredentials(this.withCredentials);const n=new Qa;return i.load(t,(t=>{if(cF.has(t)){return cF.get(t).promise.then(e).catch(r)}this._createTexture([t]).then((function(t){n.copy(t),n.needsUpdate=!0,e&&e(n)})).catch(r)}),s,r),n}_createTextureFrom(t){const{mipmaps:e,width:s,height:r,format:i,type:n,error:o,dfdTransferFn:a,dfdFlags:h}=t;if("error"===n)return Promise.reject(o);const c=new Qa(e,s,r,i,J);return c.minFilter=1===e.length?X:K,c.magFilter=X,c.generateMipmaps=!1,c.needsUpdate=!0,c.encoding=2===a?zt:jt,c.premultiplyAlpha=!!(1&h),c}_createTexture(t,e={}){const s=e,r=this.init().then((()=>this.workerPool.postMessage({type:"transcode",buffers:t,taskConfig:s},t))).then((t=>this._createTextureFrom(t.data)));return cF.set(t[0],{promise:r}),r}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),lF--,this}}uF.BasisFormat={ETC1S:0,UASTC_4x4:1},uF.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16},uF.EngineFormat={RGBAFormat:st,RGBA_ASTC_4x4_Format:yt,RGBA_BPTC_Format:Dt,RGBA_ETC2_EAC_Format:gt,RGBA_PVRTC_4BPPV1_Format:pt,RGBA_S3TC_DXT5_Format:ct,RGB_ETC1_Format:mt,RGB_ETC2_Format:ft,RGB_PVRTC_4BPPV1_Format:lt,RGB_S3TC_DXT1_Format:ot},uF.BasisWorker=function(){let t,e,s;const r=_EngineFormat,i=_TranscoderFormat,n=_BasisFormat;self.addEventListener("message",(function(o){const l=o.data;switch(l.type){case"init":t=l.config,u=l.transcoderBinary,e=new Promise((t=>{s={wasmBinary:u,onRuntimeInitialized:t},BASIS(s)})).then((()=>{s.initializeBasis(),void 0===s.KTX2File&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")}));break;case"transcode":e.then((()=>{try{const{width:e,height:o,hasAlpha:u,mipmaps:p,format:d,dfdTransferFn:m,dfdFlags:f}=function(e){const o=new s.KTX2File(new Uint8Array(e));function l(){o.close(),o.delete()}if(!o.isValid())throw l(),new Error("THREE.KTX2Loader:\tInvalid or unsupported .ktx2 file");const u=o.isUASTC()?n.UASTC_4x4:n.ETC1S,p=o.getWidth(),d=o.getHeight(),m=o.getLevels(),f=o.getHasAlpha(),g=o.getDFDTransferFunc(),y=o.getDFDFlags(),{transcoderFormat:T,engineFormat:v}=function(e,s,o,l){let u,p;const d=e===n.ETC1S?a:h;for(let r=0;r<d.length;r++){const i=d[r];if(t[i.if]&&(i.basisFormat.includes(e)&&!(l&&i.transcoderFormat.length<2)&&(!i.needsPowerOfTwo||c(s)&&c(o))))return u=i.transcoderFormat[l?1:0],p=i.engineFormat[l?1:0],{transcoderFormat:u,engineFormat:p}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),u=i.RGBA32,p=r.RGBAFormat,{transcoderFormat:u,engineFormat:p}}(u,p,d,f);if(!p||!d||!m)throw l(),new Error("THREE.KTX2Loader:\tInvalid texture");if(!o.startTranscoding())throw l(),new Error("THREE.KTX2Loader: .startTranscoding failed");const b=[];for(let t=0;t<m;t++){const e=o.getImageLevelInfo(t,0,0),s=e.origWidth,r=e.origHeight,i=new Uint8Array(o.getImageTranscodedSizeInBytes(t,0,0,T));if(!o.transcodeImage(i,t,0,0,T,0,-1,-1))throw l(),new Error("THREE.KTX2Loader: .transcodeImage failed.");b.push({data:i,width:s,height:r})}return l(),{width:p,height:d,hasAlpha:f,mipmaps:b,format:v,dfdTransferFn:g,dfdFlags:y}}(l.buffers[0]),g=[];for(let t=0;t<p.length;++t)g.push(p[t].data.buffer);self.postMessage({type:"transcode",id:l.id,width:e,height:o,hasAlpha:u,mipmaps:p,format:d,dfdTransferFn:m,dfdFlags:f},g)}catch(t){console.error(t),self.postMessage({type:"error",id:l.id,error:t.message})}}))}var u}));const o=[{if:"astcSupported",basisFormat:[n.UASTC_4x4],transcoderFormat:[i.ASTC_4x4,i.ASTC_4x4],engineFormat:[r.RGBA_ASTC_4x4_Format,r.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[n.ETC1S,n.UASTC_4x4],transcoderFormat:[i.BC7_M5,i.BC7_M5],engineFormat:[r.RGBA_BPTC_Format,r.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[n.ETC1S,n.UASTC_4x4],transcoderFormat:[i.BC1,i.BC3],engineFormat:[r.RGB_S3TC_DXT1_Format,r.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[n.ETC1S,n.UASTC_4x4],transcoderFormat:[i.ETC1,i.ETC2],engineFormat:[r.RGB_ETC2_Format,r.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[n.ETC1S,n.UASTC_4x4],transcoderFormat:[i.ETC1],engineFormat:[r.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[n.ETC1S,n.UASTC_4x4],transcoderFormat:[i.PVRTC1_4_RGB,i.PVRTC1_4_RGBA],engineFormat:[r.RGB_PVRTC_4BPPV1_Format,r.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],a=o.sort((function(t,e){return t.priorityETC1S-e.priorityETC1S})),h=o.sort((function(t,e){return t.priorityUASTC-e.priorityUASTC}));function c(t){return t<=2||0==(t&t-1)&&0!==t}};const pF="16",dF="24",mF=new Ge,fF=new Ge;class gF extends qr{constructor(t){super({uniforms:Xr.merge([pi.fog,{diffuse:{value:new Ae},opacity:{value:1}}]),vertexShader:"\n\t\t\t\tattribute vec3 control0;\n\t\t\t\tattribute vec3 control1;\n\t\t\t\tattribute vec3 direction;\n\t\t\t\tvarying float discardFlag;\n\n\t\t\t\t#include <common>\n\t\t\t\t#include <color_pars_vertex>\n\t\t\t\t#include <fog_pars_vertex>\n\t\t\t\t#include <logdepthbuf_pars_vertex>\n\t\t\t\t#include <clipping_planes_pars_vertex>\n\t\t\t\tvoid main() {\n\t\t\t\t\t#include <color_vertex>\n\n\t\t\t\t\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t\tgl_Position = projectionMatrix * mvPosition;\n\n\t\t\t\t\t// Transform the line segment ends and control points into camera clip space\n\t\t\t\t\tvec4 c0 = projectionMatrix * modelViewMatrix * vec4( control0, 1.0 );\n\t\t\t\t\tvec4 c1 = projectionMatrix * modelViewMatrix * vec4( control1, 1.0 );\n\t\t\t\t\tvec4 p0 = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t\tvec4 p1 = projectionMatrix * modelViewMatrix * vec4( position + direction, 1.0 );\n\n\t\t\t\t\tc0.xy /= c0.w;\n\t\t\t\t\tc1.xy /= c1.w;\n\t\t\t\t\tp0.xy /= p0.w;\n\t\t\t\t\tp1.xy /= p1.w;\n\n\t\t\t\t\t// Get the direction of the segment and an orthogonal vector\n\t\t\t\t\tvec2 dir = p1.xy - p0.xy;\n\t\t\t\t\tvec2 norm = vec2( -dir.y, dir.x );\n\n\t\t\t\t\t// Get control point directions from the line\n\t\t\t\t\tvec2 c0dir = c0.xy - p1.xy;\n\t\t\t\t\tvec2 c1dir = c1.xy - p1.xy;\n\n\t\t\t\t\t// If the vectors to the controls points are pointed in different directions away\n\t\t\t\t\t// from the line segment then the line should not be drawn.\n\t\t\t\t\tfloat d0 = dot( normalize( norm ), normalize( c0dir ) );\n\t\t\t\t\tfloat d1 = dot( normalize( norm ), normalize( c1dir ) );\n\t\t\t\t\tdiscardFlag = float( sign( d0 ) != sign( d1 ) );\n\n\t\t\t\t\t#include <logdepthbuf_vertex>\n\t\t\t\t\t#include <clipping_planes_vertex>\n\t\t\t\t\t#include <fog_vertex>\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\t\t\tuniform vec3 diffuse;\n\t\t\tuniform float opacity;\n\t\t\tvarying float discardFlag;\n\n\t\t\t#include <common>\n\t\t\t#include <color_pars_fragment>\n\t\t\t#include <fog_pars_fragment>\n\t\t\t#include <logdepthbuf_pars_fragment>\n\t\t\t#include <clipping_planes_pars_fragment>\n\t\t\tvoid main() {\n\n\t\t\t\tif ( discardFlag > 0.5 ) discard;\n\n\t\t\t\t#include <clipping_planes_fragment>\n\t\t\t\tvec3 outgoingLight = vec3( 0.0 );\n\t\t\t\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t\t\t\t#include <logdepthbuf_fragment>\n\t\t\t\t#include <color_fragment>\n\t\t\t\toutgoingLight = diffuseColor.rgb; // simple shader\n\t\t\t\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t\t\t\t#include <tonemapping_fragment>\n\t\t\t\t#include <encodings_fragment>\n\t\t\t\t#include <fog_fragment>\n\t\t\t\t#include <premultiplied_alpha_fragment>\n\t\t\t}\n\t\t\t"}),Object.defineProperties(this,{opacity:{get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}},color:{get:function(){return this.uniforms.diffuse.value}}}),this.setValues(t),this.isLDrawConditionalLineMaterial=!0}}class yF extends ja{constructor(t,e){super(t,e),this.isConditionalLine=!0}}const TF=new ys;function vF(t){return"Part"===t||"Unofficial_Part"===t}class bF{constructor(t,e){this.line=t,this.lineLength=t.length,this.currentCharIndex=0,this.currentChar=" ",this.lineNumber=e}seekNonSpace(){for(;this.currentCharIndex<this.lineLength;){if(this.currentChar=this.line.charAt(this.currentCharIndex)," "!==this.currentChar&&"\t"!==this.currentChar)return;this.currentCharIndex++}}getToken(){const t=this.currentCharIndex++;for(;this.currentCharIndex<this.lineLength&&(this.currentChar=this.line.charAt(this.currentCharIndex)," "!==this.currentChar&&"\t"!==this.currentChar);)this.currentCharIndex++;const e=this.currentCharIndex;return this.seekNonSpace(),this.line.substring(t,e)}getVector(){return new Ge(parseFloat(this.getToken()),parseFloat(this.getToken()),parseFloat(this.getToken()))}getRemainingString(){return this.line.substring(this.currentCharIndex,this.lineLength)}isAtTheEnd(){return this.currentCharIndex>=this.lineLength}setToEnd(){this.currentCharIndex=this.lineLength}getLineNumberString(){return this.lineNumber>=0?" at line "+this.lineNumber:""}}class wF{constructor(t){this.loader=t,this._cache={}}cloneResult(t){const e={};return e.faces=t.faces.map((t=>({colorCode:t.colorCode,material:t.material,vertices:t.vertices.map((t=>t.clone())),normals:t.normals.map((()=>null)),faceNormal:null}))),e.conditionalSegments=t.conditionalSegments.map((t=>({colorCode:t.colorCode,material:t.material,vertices:t.vertices.map((t=>t.clone())),controlPoints:t.controlPoints.map((t=>t.clone()))}))),e.lineSegments=t.lineSegments.map((t=>({colorCode:t.colorCode,material:t.material,vertices:t.vertices.map((t=>t.clone()))}))),e.type=t.type,e.category=t.category,e.keywords=t.keywords,e.subobjects=t.subobjects,e.totalFaces=t.totalFaces,e.startingConstructionStep=t.startingConstructionStep,e.materials=t.materials,e.group=null,e}async fetchData(t){let e=!1,s=0;for(;6!==s;){let r=t;switch(s){case 0:s+=1;break;case 1:r="parts/"+r,s+=1;break;case 2:r="p/"+r,s+=1;break;case 3:r="models/"+r,s+=1;break;case 4:r=t.substring(0,t.lastIndexOf("/")+1)+r,s+=1;break;case 5:e?s=6:(r=t=t.toLowerCase(),e=!0,s=0)}const i=this.loader,n=new el(i.manager);n.setPath(i.partsLibraryPath),n.setRequestHeader(i.requestHeader),n.setWithCredentials(i.withCredentials);try{return await n.loadAsync(r)}catch{continue}}throw new Error('LDrawLoader: Subobject "'+t+'" could not be loaded.')}parse(t,e=null){const s=this.loader,r=[],i=[],n=[],o=[],a={},h=t=>a[t]||null;let c="Model",l=null,u=null,p=0;-1!==t.indexOf("\r\n")&&(t=t.replace(/\r\n/g,"\n"));const d=t.split("\n"),m=d.length;let f=!1,g=null,y=null,T=!1,v=!0,b=!1,w=!0,x=!1;for(let t=0;t<m;t++){const e=d[t];if(0===e.length)continue;if(f){e.startsWith("0 FILE ")?(this.setData(g,y),g=e.substring(7),y=""):y+=e+"\n";continue}const m=new bF(e,t+1);if(m.seekNonSpace(),m.isAtTheEnd())continue;const I=m.getToken();let E,S,A,R,C,O,_,D,F,M,P;switch(I){case"0":const e=m.getToken();if(e)switch(e){case"!LDRAW_ORG":c=m.getToken();break;case"!COLOUR":E=s.parseColorMetaDirective(m),E?a[E.userData.code]=E:console.warn("LDrawLoader: Error parsing material"+m.getLineNumberString());break;case"!CATEGORY":l=m.getToken();break;case"!KEYWORDS":const e=m.getRemainingString().split(",");e.length>0&&(u||(u=[]),e.forEach((function(t){u.push(t.trim())})));break;case"FILE":t>0&&(f=!0,g=m.getRemainingString(),y="",T=!1,v=!0);break;case"BFC":for(;!m.isAtTheEnd();){const t=m.getToken();switch(t){case"CERTIFY":case"NOCERTIFY":T="CERTIFY"===t,v=!0;break;case"CW":case"CCW":v="CCW"===t;break;case"INVERTNEXT":b=!0;break;case"CLIP":case"NOCLIP":w="CLIP"===t;break;default:console.warn('THREE.LDrawLoader: BFC directive "'+t+'" is unknown.')}}break;case"STEP":x=!0}break;case"1":S=m.getToken(),E=h(S);const d=parseFloat(m.getToken()),N=parseFloat(m.getToken()),L=parseFloat(m.getToken()),k=parseFloat(m.getToken()),U=parseFloat(m.getToken()),H=parseFloat(m.getToken()),B=parseFloat(m.getToken()),G=parseFloat(m.getToken()),j=parseFloat(m.getToken()),z=parseFloat(m.getToken()),V=parseFloat(m.getToken()),W=parseFloat(m.getToken()),Y=(new Ts).set(k,U,H,d,B,G,j,N,z,V,W,L,0,0,0,1);let X=m.getRemainingString().trim().replace(/\\/g,"/");s.fileMap[X]?X=s.fileMap[X]:X.startsWith("s/")?X="parts/"+X:X.startsWith("48/")&&(X="p/"+X),o.push({material:E,colorCode:S,matrix:Y,fileName:X,inverted:b,startingConstructionStep:x}),b=!1;break;case"2":S=m.getToken(),E=h(S),O=m.getVector(),_=m.getVector(),A={material:E,colorCode:S,vertices:[O,_]},i.push(A);break;case"5":S=m.getToken(),E=h(S),O=m.getVector(),_=m.getVector(),M=m.getVector(),P=m.getVector(),A={material:E,colorCode:S,vertices:[O,_],controlPoints:[M,P]},n.push(A);break;case"3":S=m.getToken(),E=h(S),R=v,C=!T||!w,!0===R?(O=m.getVector(),_=m.getVector(),D=m.getVector()):(D=m.getVector(),_=m.getVector(),O=m.getVector()),r.push({material:E,colorCode:S,faceNormal:null,vertices:[O,_,D],normals:[null,null,null]}),p++,!0===C&&(r.push({material:E,colorCode:S,faceNormal:null,vertices:[D,_,O],normals:[null,null,null]}),p++);break;case"4":S=m.getToken(),E=h(S),R=v,C=!T||!w,!0===R?(O=m.getVector(),_=m.getVector(),D=m.getVector(),F=m.getVector()):(F=m.getVector(),D=m.getVector(),_=m.getVector(),O=m.getVector()),r.push({material:E,colorCode:S,faceNormal:null,vertices:[O,_,D,F],normals:[null,null,null,null]}),p+=2,!0===C&&(r.push({material:E,colorCode:S,faceNormal:null,vertices:[F,D,_,O],normals:[null,null,null,null]}),p+=2);break;default:throw new Error('LDrawLoader: Unknown line type "'+I+'"'+m.getLineNumberString()+".")}}return f&&this.setData(g,y),{faces:r,conditionalSegments:n,lineSegments:i,type:c,category:l,keywords:u,subobjects:o,totalFaces:p,startingConstructionStep:x,materials:a,fileName:e,group:null}}getData(t,e=!0){const s=t.toLowerCase(),r=this._cache[s];return null===r||r instanceof Promise?null:e?this.cloneResult(r):r}async ensureDataLoaded(t){const e=t.toLowerCase();e in this._cache||(this._cache[e]=this.fetchData(t).then((s=>{const r=this.parse(s,t);return this._cache[e]=r,r}))),await this._cache[e]}setData(t,e){const s=t.toLowerCase();this._cache[s]=this.parse(e,t)}}function xF(t,e,s,r){return(!r&&t===pF||r&&t===dF)&&(t=e),s[t]||null}class IF{constructor(t){this.loader=t,this.parseCache=new wF(t),this._cache={}}async processIntoMesh(t){const e=this.loader,s=this.parseCache,r=new Set,i=async(t,n=null)=>{const o=t.subobjects,a=[];for(let t=0,e=o.length;t<e;t++){const e=o[t],r=s.ensureDataLoaded(e.fileName).then((()=>{const t=s.getData(e.fileName,!1);return r=t.type,/primitive/i.test(r)||"Subpart"===r?i(s.getData(e.fileName),e):this.loadModel(e.fileName).catch((t=>(console.warn(t),null)));var r}));a.push(r)}const h=new ko;h.userData.category=t.category,h.userData.keywords=t.keywords,t.group=h;const c=await Promise.all(a);for(let s=0,i=c.length;s<i;s++){const i=t.subobjects[s],n=c[s];if(null===n)continue;if(n.isGroup){const s=n;i.matrix.decompose(s.position,s.quaternion,s.scale),s.userData.startingConstructionStep=i.startingConstructionStep,s.name=i.fileName,e.applyMaterialsToMesh(s,i.colorCode,t.materials),h.add(s);continue}n.group.children.length&&h.add(n.group);const o=t.lineSegments,a=t.conditionalSegments,l=t.faces,u=n.lineSegments,p=n.conditionalSegments,d=n.faces,m=i.matrix,f=i.inverted,g=m.determinant()<0,y=i.colorCode,T=y===pF?dF:y;for(let e=0,s=u.length;e<s;e++){const s=u[e],r=s.vertices;r[0].applyMatrix4(m),r[1].applyMatrix4(m),s.colorCode=s.colorCode===dF?T:s.colorCode,s.material=s.material||xF(s.colorCode,s.colorCode,t.materials,!0),o.push(s)}for(let e=0,s=p.length;e<s;e++){const s=p[e],r=s.vertices,i=s.controlPoints;r[0].applyMatrix4(m),r[1].applyMatrix4(m),i[0].applyMatrix4(m),i[1].applyMatrix4(m),s.colorCode=s.colorCode===dF?T:s.colorCode,s.material=s.material||xF(s.colorCode,s.colorCode,t.materials,!0),a.push(s)}for(let e=0,s=d.length;e<s;e++){const s=d[e],i=s.vertices;for(let t=0,e=i.length;t<e;t++)i[t].applyMatrix4(m);s.colorCode=s.colorCode===pF?y:s.colorCode,s.material=s.material||xF(s.colorCode,y,t.materials,!1),r.add(s.colorCode),g!==f&&i.reverse(),l.push(s)}t.totalFaces+=n.totalFaces}return n&&e.applyMaterialsToMesh(h,n.colorCode,t.materials),t};for(let e=0,s=t.faces;e<s;e++)r.add(t.faces[e].colorCode);if(await i(t),e.smoothNormals){const e=r.size>1;!function(t){for(let e=0,s=t.length;e<s;e++){const s=t[e],r=s.vertices,i=r[0],n=r[1],o=r[2];mF.subVectors(n,i),fF.subVectors(o,n),s.faceNormal=(new Ge).crossVectors(mF,fF).normalize()}}(t.faces),function(t,e,s=!1){const r=100*(1+1e-10);function i(t){return`${~~(t.x*r)},${~~(t.y*r)},${~~(t.z*r)}`}function n(t,e){return`${i(t)}_${i(e)}`}function o(t,e,s){s.direction.subVectors(e,t).normalize();const r=t.dot(s.direction);return s.origin.copy(t).addScaledVector(s.direction,-r),s}function a(t){return n(t.origin,t.direction)}const h=new Set,c=new Map,l={},u=[];for(let t=0,r=e.length;t<r;t++){const r=e[t].vertices,i=r[0],l=r[1];if(h.add(n(i,l)),h.add(n(l,i)),s){const t=o(i,l,new ys),e=a(t);if(!c.has(e)){o(l,i,t);const s=a(t),r={ray:t,distances:[]};c.set(e,r),c.set(s,r)}const s=c.get(e);let r=s.ray.direction.dot(i),n=s.ray.direction.dot(l);r>n&&([r,n]=[n,r]),s.distances.push(r,n)}}for(let e=0,r=t.length;e<r;e++){const r=t[e],i=r.vertices,u=i.length;for(let t=0;t<u;t++){const e=t,p=(t+1)%u,d=i[e],m=i[p],f=n(d,m);if(h.has(f))continue;if(s){o(d,m,TF);const t=a(TF);if(c.has(t)){const e=c.get(t),{ray:s,distances:r}=e;let i=s.direction.dot(d),n=s.direction.dot(m);i>n&&([i,n]=[n,i]);let o=!1;for(let t=0,e=r.length;t<e;t+=2)if(i>=r[t]&&n<=r[t+1]){o=!0;break}if(o)continue}}const g={index:e,tri:r};l[f]=g}}for(;;){let t=null;for(const e in l){t=l[e];break}if(null===t)break;const e=[t];for(;e.length>0;){const t=e.pop().tri,s=t.vertices,r=t.normals,i=t.faceNormal,o=s.length;for(let a=0;a<o;a++){const h=a,c=(a+1)%o,p=s[h],d=s[c];delete l[n(p,d)];const m=n(d,p),f=l[m];if(f){const s=f.tri,n=f.index,o=s.normals,a=o.length,p=s.faceNormal;if(Math.abs(s.faceNormal.dot(t.faceNormal))<.25)continue;m in l&&(e.push(f),delete l[m]);const d=(n+1)%a;r[h]&&o[d]&&r[h]!==o[d]&&(o[d].norm.add(r[h].norm),r[h].norm=o[d].norm);let g=r[h]||o[d];null===g&&(g={norm:new Ge},u.push(g.norm)),null===r[h]&&(r[h]=g,g.norm.add(i)),null===o[d]&&(o[d]=g,g.norm.add(p)),r[c]&&o[n]&&r[c]!==o[n]&&(o[n].norm.add(r[c].norm),r[c].norm=o[n].norm);let y=r[c]||o[n];null===y&&(y={norm:new Ge},u.push(y.norm)),null===r[c]&&(r[c]=y,y.norm.add(i)),null===o[n]&&(o[n]=y,y.norm.add(p))}}}}for(let t=0,e=u.length;t<e;t++)u[t].normalize()}(t.faces,t.lineSegments,e)}const n=t.group;return t.faces.length>0&&n.add(SF(t.faces,3,!1,t.totalFaces)),t.lineSegments.length>0&&n.add(SF(t.lineSegments,2)),t.conditionalSegments.length>0&&n.add(SF(t.conditionalSegments,2,!0)),n}hasCachedModel(t){return null!==t&&t.toLowerCase()in this._cache}async getCachedModel(t){if(null!==t&&this.hasCachedModel(t)){const e=t.toLowerCase();return(await this._cache[e]).clone()}return null}async loadModel(t){const e=this.parseCache,s=t.toLowerCase();if(this.hasCachedModel(t))return this.getCachedModel(t);{await e.ensureDataLoaded(t);const r=e.getData(t),i=this.processIntoMesh(r);if(this.hasCachedModel(t))return this.getCachedModel(t);vF(r.type)&&(this._cache[s]=i);return(await i).clone()}}async parseModel(t){const e=this.parseCache.parse(t);return vF(e.type)&&this.hasCachedModel(e.fileName)?this.getCachedModel(e.fileName):this.processIntoMesh(e)}}function EF(t,e){return t.colorCode===e.colorCode?0:t.colorCode<e.colorCode?-1:1}function SF(t,e,s=!1,r=null){t.sort(EF),null===r&&(r=t.length);const i=new Float32Array(e*r*3),n=3===e?new Float32Array(e*r*3):null,o=[],a=new Array(6),h=new Er;let c=null,l=0,u=0,p=0;for(let r=0,d=t.length;r<d;r++){const d=t[r];let m=d.vertices;4===m.length&&(a[0]=m[0],a[1]=m[1],a[2]=m[2],a[3]=m[0],a[4]=m[2],a[5]=m[3],m=a);for(let t=0,e=m.length;t<e;t++){const e=m[t],s=p+3*t;i[s+0]=e.x,i[s+1]=e.y,i[s+2]=e.z}if(3===e){if(!d.faceNormal){const t=m[0],e=m[1],s=m[2];mF.subVectors(e,t),fF.subVectors(s,e),d.faceNormal=(new Ge).crossVectors(mF,fF).normalize()}let t=d.normals;4===t.length&&(a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[0],a[4]=t[2],a[5]=t[3],t=a);for(let e=0,s=t.length;e<s;e++){let s=d.faceNormal;t[e]&&(s=t[e].norm);const r=p+3*e;n[r+0]=s.x,n[r+1]=s.y,n[r+2]=s.z}}if(c!==d.colorCode){null!==c&&h.addGroup(l,u,o.length-1);const t=d.material;null!==t?3===e?o.push(t):2===e&&(s?o.push(t.userData.edgeMaterial.userData.conditionalEdgeMaterial):o.push(t.userData.edgeMaterial)):o.push(d.colorCode),c=d.colorCode,l=p/3,u=m.length}else u+=m.length;p+=3*m.length}u>0&&h.addGroup(l,1/0,o.length-1),h.setAttribute("position",new or(i,3)),null!==n&&h.setAttribute("normal",new or(n,3));let d=null;if(2===e?d=s?new yF(h,1===o.length?o[0]:o):new ja(h,1===o.length?o[0]:o):3===e&&(d=new jr(h,1===o.length?o[0]:o)),s){d.isConditionalLine=!0;const e=new Float32Array(3*t.length*2),s=new Float32Array(3*t.length*2),r=new Float32Array(3*t.length*2);for(let i=0,n=t.length;i<n;i++){const n=t[i],o=n.vertices,a=n.controlPoints,h=a[0],c=a[1],l=o[0],u=o[1],p=3*i*2;e[p+0]=h.x,e[p+1]=h.y,e[p+2]=h.z,e[p+3]=h.x,e[p+4]=h.y,e[p+5]=h.z,s[p+0]=c.x,s[p+1]=c.y,s[p+2]=c.z,s[p+3]=c.x,s[p+4]=c.y,s[p+5]=c.z,r[p+0]=u.x-l.x,r[p+1]=u.y-l.y,r[p+2]=u.z-l.z,r[p+3]=u.x-l.x,r[p+4]=u.y-l.y,r[p+5]=u.z-l.z}h.setAttribute("control0",new or(e,3,!1)),h.setAttribute("control1",new or(s,3,!1)),h.setAttribute("direction",new or(r,3,!1))}return d}class AF extends Qc{constructor(t){super(t),this.materials=[],this.materialLibrary={},this.partsCache=new IF(this),this.fileMap={},this.setMaterials([]),this.smoothNormals=!0,this.partsLibraryPath=""}setPartsLibraryPath(t){return this.partsLibraryPath=t,this}async preloadMaterials(t){const e=new el(this.manager);e.setPath(this.path),e.setRequestHeader(this.requestHeader),e.setWithCredentials(this.withCredentials);const s=/^0 !COLOUR/,r=(await e.loadAsync(t)).split(/[\n\r]/g),i=[];for(let t=0,e=r.length;t<e;t++){const e=r[t];if(s.test(e)){const t=e.replace(s,""),r=this.parseColorMetaDirective(new bF(t));i.push(r)}}this.setMaterials(i)}load(t,e,s,r){const i=new el(this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(t,(t=>{this.partsCache.parseModel(t,this.materialLibrary).then((t=>{this.applyMaterialsToMesh(t,pF,this.materialLibrary,!0),this.computeConstructionSteps(t),e(t)})).catch(r)}),s,r)}parse(t,e){this.partsCache.parseModel(t,this.materialLibrary).then((t=>{this.computeConstructionSteps(t),e(t)}))}setMaterials(t){this.materialLibrary={},this.materials=[];for(let e=0,s=t.length;e<s;e++)this.addMaterial(t[e]);return this.addMaterial(this.parseColorMetaDirective(new bF("Main_Colour CODE 16 VALUE #FF8080 EDGE #333333"))),this.addMaterial(this.parseColorMetaDirective(new bF("Edge_Colour CODE 24 VALUE #A0A0A0 EDGE #333333"))),this}setFileMap(t){return this.fileMap=t,this}addMaterial(t){const e=this.materialLibrary;return e[t.userData.code]||(this.materials.push(t),e[t.userData.code]=t),this}getMaterial(t){if(t.startsWith("0x2")){const e=t.substring(3);return this.parseColorMetaDirective(new bF("Direct_Color_"+e+" CODE -1 VALUE #"+e+" EDGE #"+e))}return this.materialLibrary[t]||null}applyMaterialsToMesh(t,e,s,r=!1){const i=this,n=e===pF;function o(t,o){if(n&&!(o in s)&&!r)return o;const a=t.isLineSegments||t.isConditionalLine;(!a&&o===pF||a&&o===dF)&&(o=e);let h=null;if(o in s)h=s[o];else{if(!r)return o;if(h=i.getMaterial(o),null===h)throw new Error(`LDrawLoader: Material properties for code ${o} not available.`)}return t.isLineSegments&&(h=h.userData.edgeMaterial,t.isConditionalLine&&(h=h.userData.conditionalEdgeMaterial)),h}t.traverse((t=>{if(t.isMesh||t.isLineSegments)if(Array.isArray(t.material))for(let e=0,s=t.material.length;e<s;e++)t.material[e].isMaterial||(t.material[e]=o(t,t.material[e]));else t.material.isMaterial||(t.material=o(t,t.material))}))}getMainMaterial(){return this.getMaterial(pF)}getMainEdgeMaterial(){const t=this.getMainMaterial();return t&&t.userData?t.userData.edgeMaterial:null}parseColorMetaDirective(t){let e=null,s=16711935,r=16711935,i=1,n=!1,o=0,a=0,h=null;const c=t.getToken();if(!c)throw new Error('LDrawLoader: Material name was expected after "!COLOUR tag'+t.getLineNumberString()+".");let l=null;for(;l=t.getToken(),l;)switch(l.toUpperCase()){case"CODE":e=t.getToken();break;case"VALUE":if(s=t.getToken(),s.startsWith("0x"))s="#"+s.substring(2);else if(!s.startsWith("#"))throw new Error("LDrawLoader: Invalid color while parsing material"+t.getLineNumberString()+".");break;case"EDGE":if(r=t.getToken(),r.startsWith("0x"))r="#"+r.substring(2);else if(!r.startsWith("#")){if(h=this.getMaterial(r),!h)throw new Error("LDrawLoader: Invalid edge color while parsing material"+t.getLineNumberString()+".");h=h.userData.edgeMaterial}break;case"ALPHA":if(i=parseInt(t.getToken()),isNaN(i))throw new Error("LDrawLoader: Invalid alpha value in material definition"+t.getLineNumberString()+".");i=Math.max(0,Math.min(1,i/255)),i<1&&(n=!0);break;case"LUMINANCE":if(o=parseInt(t.getToken()),isNaN(o))throw new Error("LDrawLoader: Invalid luminance value in material definition"+bF.getLineNumberString()+".");o=Math.max(0,Math.min(1,o/255));break;case"CHROME":a=1;break;case"PEARLESCENT":a=2;break;case"RUBBER":a=3;break;case"MATTE_METALLIC":a=4;break;case"METAL":a=5;break;case"MATERIAL":t.setToEnd();break;default:throw new Error('LDrawLoader: Unknown token "'+l+'" while parsing material'+t.getLineNumberString()+".")}let u=null;switch(a){case 0:u=new Ac({color:s,roughness:.3,metalness:0});break;case 2:u=new Ac({color:s,roughness:.3,metalness:.25});break;case 1:u=new Ac({color:s,roughness:0,metalness:1});break;case 3:u=new Ac({color:s,roughness:.9,metalness:0});break;case 4:u=new Ac({color:s,roughness:.8,metalness:.4});break;case 5:u=new Ac({color:s,roughness:.2,metalness:.85})}return u.transparent=n,u.premultipliedAlpha=!0,u.opacity=i,u.depthWrite=!n,u.color.convertSRGBToLinear(),u.polygonOffset=!0,u.polygonOffsetFactor=1,0!==o&&u.emissive.set(u.color).multiplyScalar(o),h||(h=new Ma({color:r,transparent:n,opacity:i,depthWrite:!n}),h.userData.code=e,h.name=c+" - Edge",h.color.convertSRGBToLinear(),h.userData.conditionalEdgeMaterial=new gF({fog:!0,transparent:n,depthWrite:!n,color:r,opacity:i}),h.userData.conditionalEdgeMaterial.color.convertSRGBToLinear()),u.userData.code=e,u.name=c,u.userData.edgeMaterial=h,this.addMaterial(u),u}computeConstructionSteps(t){let e=0;t.traverse((t=>{t.isGroup&&(t.userData.startingConstructionStep&&e++,t.userData.constructionStep=e)})),t.userData.numConstructionSteps=e+1}}class RF extends nl{constructor(t){super(t),this.type=tt}parse(t){const e=CF.decode(t);CF.decodeImage(t,e[0]);const s=CF.toRGBA(e[0],this.type);return{width:e[0].width,height:e[0].height,data:s,format:st,type:this.type,flipY:!0}}setDataType(t){return this.type=t,this}}const CF={decode:function(t,e){null==e&&(e={parseMN:!0,debug:!1});var s=new Uint8Array(t),r=0,i=CF._binBE.readASCII(s,r,2);r+=2;var n="II"==i?CF._binLE:CF._binBE;n.readUshort(s,r),r+=2;for(var o=n.readUint(s,r),a=[];;){var h=n.readUshort(s,o),c=n.readUshort(s,o+4);if(0!=h&&(c<1||13<c)){console.log("error in TIFF");break}if(CF._readIFD(n,s,o,a,0,e),0==(o=n.readUint(s,o+2+12*h)))break}return a},decodeImage:function(t,e,s){if(!e.data){var r=new Uint8Array(t),i=CF._binBE.readASCII(r,0,2);if(null!=e.t256){e.isLE="II"==i,e.width=e.t256[0],e.height=e.t257[0];var n,o=e.t259?e.t259[0]:1,a=e.t266?e.t266[0]:1;e.t284&&2==e.t284[0]&&console.log("PlanarConfiguration 2 should not be used!"),7==o&&e.t258&&e.t258.length>3&&(e.t258=e.t258.slice(0,3)),n=e.t258?Math.min(32,e.t258[0])*e.t258.length:e.t277?e.t277[0]:1,1==o&&null!=e.t279&&e.t278&&32803==e.t262[0]&&(n=Math.round(8*e.t279[0]/(e.width*e.t278[0])));var h=8*Math.ceil(e.width*n/8),c=e.t273;null==c&&(c=e.t324);var l=e.t279;1==o&&1==c.length&&(l=[e.height*(h>>>3)]),null==l&&(l=e.t325);var u=new Uint8Array(e.height*(h>>>3)),p=0;if(null!=e.t322){for(var d=e.t322[0],m=e.t323[0],f=Math.floor((e.width+d-1)/d),g=Math.floor((e.height+m-1)/m),y=new Uint8Array(0|Math.ceil(d*m*n/8)),T=0;T<g;T++)for(var v=0;v<f;v++){for(var b=T*f+v,w=0;w<y.length;w++)y[w]=0;CF.decode._decompress(e,s,r,c[b],l[b],o,y,0,a),6==o?u=y:CF._copyTile(y,0|Math.ceil(d*n/8),m,u,0|Math.ceil(e.width*n/8),e.height,0|Math.ceil(v*d*n/8),T*m)}p=8*u.length}else{var x=e.t278?e.t278[0]:e.height;x=Math.min(x,e.height);for(b=0;b<c.length;b++)CF.decode._decompress(e,s,r,c[b],l[b],o,u,0|Math.ceil(p/8),a),p+=h*x;p=Math.min(p,8*u.length)}e.data=new Uint8Array(u.buffer,0,0|Math.ceil(p/8))}}}};CF.decode._decompress=function(t,e,s,r,i,n,o,a){34676==n?CF.decode._decodeLogLuv32(t,s,r,i,o,a):console.log("Unsupported compression",n);var h=t.t258?Math.min(32,t.t258[0]):1,c=t.t277?t.t277[0]:1,l=h*c>>>3,u=t.t278?t.t278[0]:t.height,p=Math.ceil(h*c*t.width/8);if(16==h&&!t.isLE&&null==t.t33422)for(var d=0;d<u;d++)for(var m=a+d*p,f=1;f<p;f+=2){var g=o[m+f];o[m+f]=o[m+f-1],o[m+f-1]=g}if(t.t317&&2==t.t317[0])for(d=0;d<u;d++){var y=a+d*p;if(16==h)for(var T=l;T<p;T+=2){var v=(o[y+T+1]<<8|o[y+T])+(o[y+T-l+1]<<8|o[y+T-l]);o[y+T]=255&v,o[y+T+1]=v>>>8&255}else if(3==c)for(T=3;T<p;T+=3)o[y+T]=o[y+T]+o[y+T-3]&255,o[y+T+1]=o[y+T+1]+o[y+T-2]&255,o[y+T+2]=o[y+T+2]+o[y+T-1]&255;else for(T=l;T<p;T++)o[y+T]=o[y+T]+o[y+T-l]&255}},CF.decode._decodeLogLuv32=function(t,e,s,r,i,n){for(var o=t.width,a=4*o,h=0,c=new Uint8Array(a);h<r;){for(var l=0;l<a;){var u=e[s+h];if(h++,u<128){for(var p=0;p<u;p++)c[l+p]=e[s+h+p];l+=u,h+=u}else{u-=126;for(p=0;p<u;p++)c[l+p]=e[s+h];l+=u,h++}}for(var d=0;d<o;d++)i[n+0]=c[d],i[n+1]=c[d+o],i[n+2]=c[d+2*o],i[n+4]=c[d+3*o],n+=6}},CF.tags={},CF._types=function(){var t=new Array(250);t.fill(0);return{basic:{main:t=t.concat([0,0,0,0,4,3,3,3,3,3,0,0,3,0,0,0,3,0,0,2,2,2,2,4,3,0,0,3,4,4,3,3,5,5,3,2,5,5,0,0,0,0,4,4,0,0,3,3,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,0,2,2,3,5,5,3,0,3,3,4,4,4,3,4,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),rest:{33432:2,33434:5,33437:5,34665:4,34850:3,34853:4,34855:3,34864:3,34866:4,36864:7,36867:2,36868:2,37121:7,37377:10,37378:5,37380:10,37381:5,37383:3,37384:3,37385:3,37386:5,37510:7,37520:2,37521:2,37522:2,40960:7,40961:3,40962:4,40963:4,40965:4,41486:5,41487:5,41488:3,41985:3,41986:3,41987:3,41988:5,41989:3,41990:3,41993:3,41994:3,41995:7,41996:3,42032:2,42033:2,42034:5,42036:2,42037:2,59932:7}},gps:{main:[1,2,5,2,5,1,5,5,0,9],rest:{18:2,29:2}}}}(),CF._readIFD=function(t,e,s,r,i,n){var o=t.readUshort(e,s);s+=2;var a={};n.debug&&console.log("   ".repeat(i),r.length-1,">>>----------------");for(var h=0;h<o;h++){var c=t.readUshort(e,s);s+=2;var l=t.readUshort(e,s);s+=2;var u=t.readUint(e,s);s+=4;var p=t.readUint(e,s);s+=4;var d=[];if(1!=l&&7!=l||(d=new Uint8Array(e.buffer,u<5?s-4:p,u)),2==l){var m=u<5?s-4:p,f=e[m],g=Math.max(0,Math.min(u-1,e.length-m));f<128||0==g?d.push(t.readASCII(e,m,g)):d=new Uint8Array(e.buffer,m,g)}if(3==l)for(var y=0;y<u;y++)d.push(t.readUshort(e,(u<3?s-4:p)+2*y));if(4==l||13==l)for(y=0;y<u;y++)d.push(t.readUint(e,(u<2?s-4:p)+4*y));if(5==l||10==l){var T=5==l?t.readUint:t.readInt;for(y=0;y<u;y++)d.push([T(e,p+8*y),T(e,p+8*y+4)])}if(8==l)for(y=0;y<u;y++)d.push(t.readShort(e,(u<3?s-4:p)+2*y));if(9==l)for(y=0;y<u;y++)d.push(t.readInt(e,(u<2?s-4:p)+4*y));if(11==l)for(y=0;y<u;y++)d.push(t.readFloat(e,p+4*y));if(12==l)for(y=0;y<u;y++)d.push(t.readDouble(e,p+8*y));if(0==u||0!=d.length){if(n.debug&&console.log("   ".repeat(i),c,l,CF.tags[c],d),a["t"+c]=d,330==c||34665==c||34853==c||50740==c&&t.readUshort(e,t.readUint(d,0))<300||61440==c){var v=50740==c?[t.readUint(d,0)]:d,b=[];for(y=0;y<v.length;y++)CF._readIFD(t,e,v[y],b,i+1,n);330==c&&(a.subIFD=b),34665==c&&(a.exifIFD=b[0]),34853==c&&(a.gpsiIFD=b[0]),50740==c&&(a.dngPrvt=b[0]),61440==c&&(a.fujiIFD=b[0])}if(37500==c&&n.parseMN){var w=d;if("Nikon"==t.readASCII(w,0,5))a.makerNote=CF.decode(w.slice(10).buffer)[0];else if(t.readUshort(e,p)<300&&t.readUshort(e,p+4)<=12){var x=[];CF._readIFD(t,e,p,x,i+1,n),a.makerNote=x[0]}}}else if(console.log(c,"unknown TIFF tag type: ",l,"num:",u),0==h)return}return r.push(a),n.debug&&console.log("   ".repeat(i),"<<<---------------"),s},CF.toRGBA=function(t,e){const s=t.width,r=t.height,i=s*r,n=t.data;let o;switch(e){case tt:o=new Uint16Array(4*i);break;case Q:o=new Float32Array(4*i);break;default:console.error("THREE.LogLuvLoader: Unsupported texture data type:",e)}let a=t.t262?t.t262[0]:2;const h=t.t258?Math.min(32,t.t258[0]):1;if(null==t.t262&&1==h&&(a=0),32845==a)for(let t=0;t<r;t++)for(let r=0;r<s;r++){const i=6*(t*s+r),a=4*(t*s+r);let h=n[i+1]<<8|n[i];h=Math.pow(2,(h+.5)/256-64);const c=(n[i+3]+.5)/410,l=(n[i+5]+.5)/410,u=9*c/(6*c-16*l+12),p=4*l/(6*c-16*l+12),d=u*h/p,m=(1-u-p)*h/p,f=2.69*d-1.276*h-.414*m,g=-1.022*d+1.978*h+.044*m,y=.061*d-.224*h+1.163*m;e===tt?(o[a]=Ju.toHalfFloat(Math.min(f,65504)),o[a+1]=Ju.toHalfFloat(Math.min(g,65504)),o[a+2]=Ju.toHalfFloat(Math.min(y,65504)),o[a+3]=Ju.toHalfFloat(1)):(o[a]=f,o[a+1]=g,o[a+2]=y,o[a+3]=1)}else console.log("Unsupported Photometric interpretation: "+a);return o},CF._binBE={nextZero:function(t,e){for(;0!=t[e];)e++;return e},readUshort:function(t,e){return t[e]<<8|t[e+1]},readShort:function(t,e){var s=CF._binBE.ui8;return s[0]=t[e+1],s[1]=t[e+0],CF._binBE.i16[0]},readInt:function(t,e){var s=CF._binBE.ui8;return s[0]=t[e+3],s[1]=t[e+2],s[2]=t[e+1],s[3]=t[e+0],CF._binBE.i32[0]},readUint:function(t,e){var s=CF._binBE.ui8;return s[0]=t[e+3],s[1]=t[e+2],s[2]=t[e+1],s[3]=t[e+0],CF._binBE.ui32[0]},readASCII:function(t,e,s){for(var r="",i=0;i<s;i++)r+=String.fromCharCode(t[e+i]);return r},readFloat:function(t,e){for(var s=CF._binBE.ui8,r=0;r<4;r++)s[r]=t[e+3-r];return CF._binBE.fl32[0]},readDouble:function(t,e){for(var s=CF._binBE.ui8,r=0;r<8;r++)s[r]=t[e+7-r];return CF._binBE.fl64[0]},writeUshort:function(t,e,s){t[e]=s>>8&255,t[e+1]=255&s},writeInt:function(t,e,s){var r=CF._binBE.ui8;CF._binBE.i32[0]=s,t[e+3]=r[0],t[e+2]=r[1],t[e+1]=r[2],t[e+0]=r[3]},writeUint:function(t,e,s){t[e]=s>>24&255,t[e+1]=s>>16&255,t[e+2]=s>>8&255,t[e+3]=s>>0&255},writeASCII:function(t,e,s){for(var r=0;r<s.length;r++)t[e+r]=s.charCodeAt(r)},writeDouble:function(t,e,s){CF._binBE.fl64[0]=s;for(var r=0;r<8;r++)t[e+r]=CF._binBE.ui8[7-r]}},CF._binBE.ui8=new Uint8Array(8),CF._binBE.i16=new Int16Array(CF._binBE.ui8.buffer),CF._binBE.i32=new Int32Array(CF._binBE.ui8.buffer),CF._binBE.ui32=new Uint32Array(CF._binBE.ui8.buffer),CF._binBE.fl32=new Float32Array(CF._binBE.ui8.buffer),CF._binBE.fl64=new Float64Array(CF._binBE.ui8.buffer),CF._binLE={nextZero:CF._binBE.nextZero,readUshort:function(t,e){return t[e+1]<<8|t[e]},readShort:function(t,e){var s=CF._binBE.ui8;return s[0]=t[e+0],s[1]=t[e+1],CF._binBE.i16[0]},readInt:function(t,e){var s=CF._binBE.ui8;return s[0]=t[e+0],s[1]=t[e+1],s[2]=t[e+2],s[3]=t[e+3],CF._binBE.i32[0]},readUint:function(t,e){var s=CF._binBE.ui8;return s[0]=t[e+0],s[1]=t[e+1],s[2]=t[e+2],s[3]=t[e+3],CF._binBE.ui32[0]},readASCII:CF._binBE.readASCII,readFloat:function(t,e){for(var s=CF._binBE.ui8,r=0;r<4;r++)s[r]=t[e+r];return CF._binBE.fl32[0]},readDouble:function(t,e){for(var s=CF._binBE.ui8,r=0;r<8;r++)s[r]=t[e+r];return CF._binBE.fl64[0]},writeUshort:function(t,e,s){t[e]=255&s,t[e+1]=s>>8&255},writeInt:function(t,e,s){var r=CF._binBE.ui8;CF._binBE.i32[0]=s,t[e+0]=r[0],t[e+1]=r[1],t[e+2]=r[2],t[e+3]=r[3]},writeUint:function(t,e,s){t[e]=s>>>0&255,t[e+1]=s>>>8&255,t[e+2]=s>>>16&255,t[e+3]=s>>>24&255},writeASCII:CF._binBE.writeASCII},CF._copyTile=function(t,e,s,r,i,n,o,a){for(var h=Math.min(e,i-o),c=Math.min(s,n-a),l=0;l<c;l++)for(var u=(a+l)*i+o,p=l*e,d=0;d<h;d++)r[u+d]=t[p+d]};class OF extends Qc{setQuality(t){this._quality=t}load(t,e,s,r){const i=this._quality||1,n=new th;n.minFilter=V;const o=new el(this.manager);return o.setPath(this.path),o.setWithCredentials(this.withCredentials),o.load(t,(function(t){const s=JSON.parse(t),r=document.createElement("div");r.style.width=s.w+"px",r.style.height=s.h+"px",document.body.appendChild(r);const o=bodymovin.loadAnimation({container:r,animType:"canvas",loop:!0,autoplay:!0,animationData:s,rendererSettings:{dpr:i}});n.animation=o,n.image=o.container,o.addEventListener("enterFrame",(function(){n.needsUpdate=!0})),r.style.display="none",void 0!==e&&e(n)}),s,r),n}}class _F extends Qc{load(t,e,s,r){const i=new el(this.manager);i.setPath(this.path),i.setResponseType("text"),i.load(t,(s=>{try{e(this.parse(s))}catch(e){r?r(e):console.error(e),this.manager.itemError(t)}}),s,r)}parse(t){const e=(t=t.replace(/^#.*?(\n|\r)/gm,"").replace(/^\s*?(\n|\r)/gm,"").trim()).split(/[\n\r]+/g),s=e[0].trim().split(/\s+/g).map((t=>parseFloat(t))),r=s[1]-s[0],i=s.length;for(let t=1,e=s.length;t<e;t++)if(r!==s[t]-s[t-1])throw new Error("LUT3dlLoader: Inconsistent grid size not supported.");const n=new Array(i*i*i*4);let o=0,a=0;for(let t=1,s=e.length;t<s;t++){const s=e[t].trim().split(/\s/g),r=parseFloat(s[0]),h=parseFloat(s[1]),c=parseFloat(s[2]);a=Math.max(a,r,h,c);const l=o%i*i*i+Math.floor(o/i)%i*i+Math.floor(o/(i*i))%i;n[4*l+0]=r,n[4*l+1]=h,n[4*l+2]=c,n[4*l+3]=1,o+=1}const h=Math.ceil(Math.log2(a)),c=Math.pow(2,h);for(let t=0,e=n.length;t<e;t+=4){const e=n[t+0],s=n[t+1],r=n[t+2];n[t+0]=255*e/c,n[t+1]=255*s/c,n[t+2]=255*r/c}const l=new Uint8Array(n),u=new Ia;u.image.data=l,u.image.width=i,u.image.height=i*i,u.format=st,u.type=J,u.magFilter=X,u.minFilter=X,u.wrapS=j,u.wrapT=j,u.generateMipmaps=!1,u.needsUpdate=!0;const p=new ke;return p.image.data=l,p.image.width=i,p.image.height=i,p.image.depth=i,p.format=st,p.type=J,p.magFilter=X,p.minFilter=X,p.wrapS=j,p.wrapT=j,p.wrapR=j,p.generateMipmaps=!1,p.needsUpdate=!0,{size:i,texture:u,texture3D:p}}}class DF extends Qc{load(t,e,s,r){const i=new el(this.manager);i.setPath(this.path),i.setResponseType("text"),i.load(t,(s=>{try{e(this.parse(s))}catch(e){r?r(e):console.error(e),this.manager.itemError(t)}}),s,r)}parse(t){t=t.replace(/^#.*?(\n|\r)/gm,"").replace(/^\s*?(\n|\r)/gm,"").trim();let e=null,s=null;const r=new Ge(0,0,0),i=new Ge(1,1,1),n=t.split(/[\n\r]+/g);let o=null,a=0;for(let t=0,h=n.length;t<h;t++){const h=n[t].trim(),c=h.split(/\s/g);switch(c[0]){case"TITLE":e=h.substring(7,h.length-1);break;case"LUT_3D_SIZE":const t=c[1];s=parseFloat(t),o=new Uint8Array(s*s*s*4);break;case"DOMAIN_MIN":r.x=parseFloat(c[1]),r.y=parseFloat(c[2]),r.z=parseFloat(c[3]);break;case"DOMAIN_MAX":i.x=parseFloat(c[1]),i.y=parseFloat(c[2]),i.z=parseFloat(c[3]);break;default:const n=parseFloat(c[0]),l=parseFloat(c[1]),u=parseFloat(c[2]);if(n>1||n<0||l>1||l<0||u>1||u<0)throw new Error("LUTCubeLoader : Non normalized values not supported.");o[a+0]=255*n,o[a+1]=255*l,o[a+2]=255*u,o[a+3]=255,a+=4}}const h=new Ia;h.image.data=o,h.image.width=s,h.image.height=s*s,h.type=J,h.magFilter=X,h.minFilter=X,h.wrapS=j,h.wrapT=j,h.generateMipmaps=!1,h.needsUpdate=!0;const c=new ke;return c.image.data=o,c.image.width=s,c.image.height=s,c.image.depth=s,c.type=J,c.magFilter=X,c.minFilter=X,c.wrapS=j,c.wrapT=j,c.wrapR=j,c.generateMipmaps=!1,c.needsUpdate=!0,{title:e,size:s,domainMin:r,domainMax:i,texture:h,texture3D:c}}}function FF(t){this.IFF=t}function MF(t){this.IFF=t}function PF(){this.debugger=new LF}function NF(t){this.dv=new DataView(t),this.offset=0}function LF(){this.active=!1,this.depth=0,this.formList=[]}function kF(t){return t%2}function UF(t){return t.length+1+(kF(t.length+1)?1:0)}let HF;FF.prototype={constructor:FF,parseBlock:function(){this.IFF.debugger.offset=this.IFF.reader.offset,this.IFF.debugger.closeForms();const t=this.IFF.reader.getIDTag();let e=this.IFF.reader.getUint32();switch(e>this.IFF.reader.dv.byteLength-this.IFF.reader.offset&&(this.IFF.reader.offset-=4,e=this.IFF.reader.getUint16()),this.IFF.debugger.dataOffset=this.IFF.reader.offset,this.IFF.debugger.length=e,t){case"FORM":this.IFF.parseForm(e);break;case"ICON":case"VMPA":case"BBOX":case"NORM":case"PRE ":case"POST":case"KEY ":case"SPAN":case"TIME":case"CLRS":case"CLRA":case"FILT":case"DITH":case"CONT":case"BRIT":case"SATR":case"HUE ":case"GAMM":case"NEGA":case"IFLT":case"PFLT":case"PROJ":case"AXIS":case"AAST":case"PIXB":case"AUVO":case"STCK":case"PROC":case"VALU":case"FUNC":case"PNAM":case"INAM":case"GRST":case"GREN":case"GRPT":case"FKEY":case"IKEY":case"CSYS":case"OPAQ":case"CMAP":case"NLOC":case"NZOM":case"NVER":case"NSRV":case"NVSK":case"NCRD":case"WRPW":case"WRPH":case"NMOD":case"NSEL":case"NPRW":case"NPLA":case"NODS":case"VERS":case"ENUM":case"TAG ":case"OPAC":case"CGMD":case"CGTY":case"CGST":case"CGEN":case"CGTS":case"CGTE":case"OSMP":case"OMDE":case"OUTR":case"FLAG":case"TRNL":case"GLOW":case"GVAL":case"SHRP":case"RFOP":case"RSAN":case"TROP":case"RBLR":case"TBLR":case"CLRH":case"CLRF":case"ADTR":case"LINE":case"ALPH":case"VCOL":case"ENAB":this.IFF.debugger.skipped=!0,this.IFF.reader.skip(e);break;case"SURF":this.IFF.parseSurfaceLwo2(e);break;case"CLIP":this.IFF.parseClipLwo2(e);break;case"IPIX":case"IMIP":case"IMOD":case"AMOD":case"IINV":case"INCR":case"IAXS":case"IFOT":case"ITIM":case"IWRL":case"IUTI":case"IINX":case"IINY":case"IINZ":case"IREF":4===e?this.IFF.currentNode[t]=this.IFF.reader.getInt32():this.IFF.reader.skip(e);break;case"OTAG":this.IFF.parseObjectTag();break;case"LAYR":this.IFF.parseLayer(e);break;case"PNTS":this.IFF.parsePoints(e);break;case"VMAP":this.IFF.parseVertexMapping(e);break;case"AUVU":case"AUVN":this.IFF.reader.skip(e-1),this.IFF.reader.getVariableLengthIndex();break;case"POLS":this.IFF.parsePolygonList(e);break;case"TAGS":this.IFF.parseTagStrings(e);break;case"PTAG":this.IFF.parsePolygonTagMapping(e);break;case"VMAD":this.IFF.parseVertexMapping(e,!0);break;case"DESC":this.IFF.currentForm.description=this.IFF.reader.getString();break;case"TEXT":case"CMNT":case"NCOM":this.IFF.currentForm.comment=this.IFF.reader.getString();break;case"NAME":this.IFF.currentForm.channelName=this.IFF.reader.getString();break;case"WRAP":this.IFF.currentForm.wrap={w:this.IFF.reader.getUint16(),h:this.IFF.reader.getUint16()};break;case"IMAG":const s=this.IFF.reader.getVariableLengthIndex();this.IFF.currentForm.imageIndex=s;break;case"OREF":this.IFF.currentForm.referenceObject=this.IFF.reader.getString();break;case"ROID":this.IFF.currentForm.referenceObjectID=this.IFF.reader.getUint32();break;case"SSHN":this.IFF.currentSurface.surfaceShaderName=this.IFF.reader.getString();break;case"AOVN":this.IFF.currentSurface.surfaceCustomAOVName=this.IFF.reader.getString();break;case"NSTA":this.IFF.currentForm.disabled=this.IFF.reader.getUint16();break;case"NRNM":this.IFF.currentForm.realName=this.IFF.reader.getString();break;case"NNME":this.IFF.currentForm.refName=this.IFF.reader.getString(),this.IFF.currentSurface.nodes[this.IFF.currentForm.refName]=this.IFF.currentForm;break;case"INME":this.IFF.currentForm.nodeName||(this.IFF.currentForm.nodeName=[]),this.IFF.currentForm.nodeName.push(this.IFF.reader.getString());break;case"IINN":this.IFF.currentForm.inputNodeName||(this.IFF.currentForm.inputNodeName=[]),this.IFF.currentForm.inputNodeName.push(this.IFF.reader.getString());break;case"IINM":this.IFF.currentForm.inputName||(this.IFF.currentForm.inputName=[]),this.IFF.currentForm.inputName.push(this.IFF.reader.getString());break;case"IONM":this.IFF.currentForm.inputOutputName||(this.IFF.currentForm.inputOutputName=[]),this.IFF.currentForm.inputOutputName.push(this.IFF.reader.getString());break;case"FNAM":this.IFF.currentForm.fileName=this.IFF.reader.getString();break;case"CHAN":4===e?this.IFF.currentForm.textureChannel=this.IFF.reader.getIDTag():this.IFF.reader.skip(e);break;case"SMAN":const r=this.IFF.reader.getFloat32();this.IFF.currentSurface.attributes.smooth=!(r<0);break;case"COLR":this.IFF.currentSurface.attributes.Color={value:this.IFF.reader.getFloat32Array(3)},this.IFF.reader.skip(2);break;case"LUMI":this.IFF.currentSurface.attributes.Luminosity={value:this.IFF.reader.getFloat32()},this.IFF.reader.skip(2);break;case"SPEC":this.IFF.currentSurface.attributes.Specular={value:this.IFF.reader.getFloat32()},this.IFF.reader.skip(2);break;case"DIFF":this.IFF.currentSurface.attributes.Diffuse={value:this.IFF.reader.getFloat32()},this.IFF.reader.skip(2);break;case"REFL":this.IFF.currentSurface.attributes.Reflection={value:this.IFF.reader.getFloat32()},this.IFF.reader.skip(2);break;case"GLOS":this.IFF.currentSurface.attributes.Glossiness={value:this.IFF.reader.getFloat32()},this.IFF.reader.skip(2);break;case"TRAN":this.IFF.currentSurface.attributes.opacity=this.IFF.reader.getFloat32(),this.IFF.reader.skip(2);break;case"BUMP":this.IFF.currentSurface.attributes.bumpStrength=this.IFF.reader.getFloat32(),this.IFF.reader.skip(2);break;case"SIDE":this.IFF.currentSurface.attributes.side=this.IFF.reader.getUint16();break;case"RIMG":this.IFF.currentSurface.attributes.reflectionMap=this.IFF.reader.getVariableLengthIndex();break;case"RIND":this.IFF.currentSurface.attributes.refractiveIndex=this.IFF.reader.getFloat32(),this.IFF.reader.skip(2);break;case"TIMG":this.IFF.currentSurface.attributes.refractionMap=this.IFF.reader.getVariableLengthIndex();break;case"IMAP":this.IFF.reader.skip(2);break;case"TMAP":this.IFF.debugger.skipped=!0,this.IFF.reader.skip(e);break;case"IUVI":this.IFF.currentNode.UVChannel=this.IFF.reader.getString(e);break;case"IUTL":this.IFF.currentNode.widthWrappingMode=this.IFF.reader.getUint32();break;case"IVTL":this.IFF.currentNode.heightWrappingMode=this.IFF.reader.getUint32();break;case"BLOK":break;default:this.IFF.parseUnknownCHUNK(t,e)}"FORM"!=t&&(this.IFF.debugger.node=1,this.IFF.debugger.nodeID=t,this.IFF.debugger.log()),this.IFF.reader.offset>=this.IFF.currentFormEnd&&(this.IFF.currentForm=this.IFF.parentForm)}},MF.prototype={constructor:MF,parseBlock:function(){this.IFF.debugger.offset=this.IFF.reader.offset,this.IFF.debugger.closeForms();const t=this.IFF.reader.getIDTag(),e=this.IFF.reader.getUint32();switch(this.IFF.debugger.dataOffset=this.IFF.reader.offset,this.IFF.debugger.length=e,t){case"FORM":this.IFF.parseForm(e);break;case"ICON":case"VMPA":case"BBOX":case"NORM":case"PRE ":case"POST":case"KEY ":case"SPAN":case"TIME":case"CLRS":case"CLRA":case"FILT":case"DITH":case"CONT":case"BRIT":case"SATR":case"HUE ":case"GAMM":case"NEGA":case"IFLT":case"PFLT":case"PROJ":case"AXIS":case"AAST":case"PIXB":case"STCK":case"VALU":case"PNAM":case"INAM":case"GRST":case"GREN":case"GRPT":case"FKEY":case"IKEY":case"CSYS":case"OPAQ":case"CMAP":case"NLOC":case"NZOM":case"NVER":case"NSRV":case"NCRD":case"NMOD":case"NSEL":case"NPRW":case"NPLA":case"VERS":case"ENUM":case"TAG ":case"CGMD":case"CGTY":case"CGST":case"CGEN":case"CGTS":case"CGTE":case"OSMP":case"OMDE":case"OUTR":case"FLAG":case"TRNL":case"SHRP":case"RFOP":case"RSAN":case"TROP":case"RBLR":case"TBLR":case"CLRH":case"CLRF":case"ADTR":case"GLOW":case"LINE":case"ALPH":case"VCOL":case"ENAB":this.IFF.debugger.skipped=!0,this.IFF.reader.skip(e);break;case"IPIX":case"IMIP":case"IMOD":case"AMOD":case"IINV":case"INCR":case"IAXS":case"IFOT":case"ITIM":case"IWRL":case"IUTI":case"IINX":case"IINY":case"IINZ":case"IREF":4===e?this.IFF.currentNode[t]=this.IFF.reader.getInt32():this.IFF.reader.skip(e);break;case"OTAG":this.IFF.parseObjectTag();break;case"LAYR":this.IFF.parseLayer(e);break;case"PNTS":this.IFF.parsePoints(e);break;case"VMAP":this.IFF.parseVertexMapping(e);break;case"POLS":this.IFF.parsePolygonList(e);break;case"TAGS":this.IFF.parseTagStrings(e);break;case"PTAG":this.IFF.parsePolygonTagMapping(e);break;case"VMAD":this.IFF.parseVertexMapping(e,!0);break;case"DESC":this.IFF.currentForm.description=this.IFF.reader.getString();break;case"TEXT":case"CMNT":case"NCOM":this.IFF.currentForm.comment=this.IFF.reader.getString();break;case"NAME":this.IFF.currentForm.channelName=this.IFF.reader.getString();break;case"WRAP":this.IFF.currentForm.wrap={w:this.IFF.reader.getUint16(),h:this.IFF.reader.getUint16()};break;case"IMAG":const s=this.IFF.reader.getVariableLengthIndex();this.IFF.currentForm.imageIndex=s;break;case"OREF":this.IFF.currentForm.referenceObject=this.IFF.reader.getString();break;case"ROID":this.IFF.currentForm.referenceObjectID=this.IFF.reader.getUint32();break;case"SSHN":this.IFF.currentSurface.surfaceShaderName=this.IFF.reader.getString();break;case"AOVN":this.IFF.currentSurface.surfaceCustomAOVName=this.IFF.reader.getString();break;case"NSTA":this.IFF.currentForm.disabled=this.IFF.reader.getUint16();break;case"NRNM":this.IFF.currentForm.realName=this.IFF.reader.getString();break;case"NNME":this.IFF.currentForm.refName=this.IFF.reader.getString(),this.IFF.currentSurface.nodes[this.IFF.currentForm.refName]=this.IFF.currentForm;break;case"INME":this.IFF.currentForm.nodeName||(this.IFF.currentForm.nodeName=[]),this.IFF.currentForm.nodeName.push(this.IFF.reader.getString());break;case"IINN":this.IFF.currentForm.inputNodeName||(this.IFF.currentForm.inputNodeName=[]),this.IFF.currentForm.inputNodeName.push(this.IFF.reader.getString());break;case"IINM":this.IFF.currentForm.inputName||(this.IFF.currentForm.inputName=[]),this.IFF.currentForm.inputName.push(this.IFF.reader.getString());break;case"IONM":this.IFF.currentForm.inputOutputName||(this.IFF.currentForm.inputOutputName=[]),this.IFF.currentForm.inputOutputName.push(this.IFF.reader.getString());break;case"FNAM":this.IFF.currentForm.fileName=this.IFF.reader.getString();break;case"CHAN":4===e?this.IFF.currentForm.textureChannel=this.IFF.reader.getIDTag():this.IFF.reader.skip(e);break;case"SMAN":const r=this.IFF.reader.getFloat32();this.IFF.currentSurface.attributes.smooth=!(r<0);break;case"COLR":this.IFF.currentSurface.attributes.Color={value:this.IFF.reader.getFloat32Array(3)},this.IFF.reader.skip(2);break;case"LUMI":this.IFF.currentSurface.attributes.Luminosity={value:this.IFF.reader.getFloat32()},this.IFF.reader.skip(2);break;case"SPEC":this.IFF.currentSurface.attributes.Specular={value:this.IFF.reader.getFloat32()},this.IFF.reader.skip(2);break;case"DIFF":this.IFF.currentSurface.attributes.Diffuse={value:this.IFF.reader.getFloat32()},this.IFF.reader.skip(2);break;case"REFL":this.IFF.currentSurface.attributes.Reflection={value:this.IFF.reader.getFloat32()},this.IFF.reader.skip(2);break;case"GLOS":this.IFF.currentSurface.attributes.Glossiness={value:this.IFF.reader.getFloat32()},this.IFF.reader.skip(2);break;case"TRAN":this.IFF.currentSurface.attributes.opacity=this.IFF.reader.getFloat32(),this.IFF.reader.skip(2);break;case"BUMP":this.IFF.currentSurface.attributes.bumpStrength=this.IFF.reader.getFloat32(),this.IFF.reader.skip(2);break;case"SIDE":this.IFF.currentSurface.attributes.side=this.IFF.reader.getUint16();break;case"RIMG":this.IFF.currentSurface.attributes.reflectionMap=this.IFF.reader.getVariableLengthIndex();break;case"RIND":this.IFF.currentSurface.attributes.refractiveIndex=this.IFF.reader.getFloat32(),this.IFF.reader.skip(2);break;case"TIMG":this.IFF.currentSurface.attributes.refractionMap=this.IFF.reader.getVariableLengthIndex();break;case"IMAP":this.IFF.currentSurface.attributes.imageMapIndex=this.IFF.reader.getUint32();break;case"IUVI":this.IFF.currentNode.UVChannel=this.IFF.reader.getString(e);break;case"IUTL":this.IFF.currentNode.widthWrappingMode=this.IFF.reader.getUint32();break;case"IVTL":this.IFF.currentNode.heightWrappingMode=this.IFF.reader.getUint32();break;default:this.IFF.parseUnknownCHUNK(t,e)}"FORM"!=t&&(this.IFF.debugger.node=1,this.IFF.debugger.nodeID=t,this.IFF.debugger.log()),this.IFF.reader.offset>=this.IFF.currentFormEnd&&(this.IFF.currentForm=this.IFF.parentForm)}},PF.prototype={constructor:PF,parse:function(t){if(this.reader=new NF(t),this.tree={materials:{},layers:[],tags:[],textures:[]},this.currentLayer=this.tree,this.currentForm=this.tree,this.parseTopForm(),void 0!==this.tree.format){if("LWO2"===this.tree.format)for(this.parser=new FF(this);!this.reader.endOfFile();)this.parser.parseBlock();else if("LWO3"===this.tree.format)for(this.parser=new MF(this);!this.reader.endOfFile();)this.parser.parseBlock();return this.debugger.offset=this.reader.offset,this.debugger.closeForms(),this.tree}},parseTopForm(){if(this.debugger.offset=this.reader.offset,"FORM"===this.reader.getIDTag()){var t=this.reader.getUint32();this.debugger.dataOffset=this.reader.offset,this.debugger.length=t;var e=this.reader.getIDTag();("LWO2"===e||"LWO3"===e)&&(this.tree.format=e),this.debugger.node=0,this.debugger.nodeID=e,this.debugger.log()}else console.warn("LWOLoader: Top-level FORM missing.")},parseForm(t){var e=this.reader.getIDTag();switch(e){case"ISEQ":case"ANIM":case"STCC":case"VPVL":case"VPRM":case"NROT":case"WRPW":case"WRPH":case"FUNC":case"FALL":case"OPAC":case"GRAD":case"ENVS":case"VMOP":case"VMBG":case"OMAX":case"STEX":case"CKBG":case"CKEY":case"VMLA":case"VMLB":this.debugger.skipped=!0,this.skipForm(t);break;case"META":case"NNDS":case"NODS":case"NDTA":case"ADAT":case"AOVS":case"BLOK":case"IBGC":case"IOPC":case"IIMG":case"TXTR":this.debugger.length=4,this.debugger.skipped=!0;break;case"IFAL":case"ISCL":case"IPOS":case"IROT":case"IBMP":case"IUTD":case"IVTD":this.parseTextureNodeAttribute(e);break;case"ENVL":this.parseEnvelope(t);break;case"CLIP":"LWO2"===this.tree.format?this.parseForm(t):this.parseClip(t);break;case"STIL":this.parseImage();break;case"XREF":this.reader.skip(8),this.currentForm.referenceTexture={index:this.reader.getUint32(),refName:this.reader.getString()};break;case"IMST":this.parseImageStateForm(t);break;case"SURF":this.parseSurfaceForm(t);break;case"VALU":this.parseValueForm(t);break;case"NTAG":this.parseSubNode(t);break;case"ATTR":case"SATR":this.setupForm("attributes",t);break;case"NCON":this.parseConnections(t);break;case"SSHA":this.parentForm=this.currentForm,this.currentForm=this.currentSurface,this.setupForm("surfaceShader",t);break;case"SSHD":this.setupForm("surfaceShaderData",t);break;case"ENTR":this.parseEntryForm(t);break;case"IMAP":this.parseImageMap(t);break;case"TAMP":this.parseXVAL("amplitude",t);break;case"TMAP":this.setupForm("textureMap",t);break;case"CNTR":this.parseXVAL3("center",t);break;case"SIZE":this.parseXVAL3("scale",t);break;case"ROTA":this.parseXVAL3("rotation",t);break;default:this.parseUnknownForm(e,t)}this.debugger.node=0,this.debugger.nodeID=e,this.debugger.log()},setupForm(t,e){this.currentForm||(this.currentForm=this.currentNode),this.currentFormEnd=this.reader.offset+e,this.parentForm=this.currentForm,this.currentForm[t]?(console.warn("LWOLoader: form already exists on parent: ",t,this.currentForm),this.currentForm=this.currentForm[t]):(this.currentForm[t]={},this.currentForm=this.currentForm[t])},skipForm(t){this.reader.skip(t-4)},parseUnknownForm(t,e){var s,r,i;console.warn("LWOLoader: unknown FORM encountered: "+t,e),s=this.reader.dv.buffer,r=this.reader.offset,i=e-4,console.log(Rl.decodeText(new Uint8Array(s,r,i))),this.reader.skip(e-4)},parseSurfaceForm(t){this.reader.skip(8);var e=this.reader.getString(),s={attributes:{},connections:{},name:e,inputName:e,nodes:{},source:this.reader.getString()};this.tree.materials[e]=s,this.currentSurface=s,this.parentForm=this.tree.materials,this.currentForm=s,this.currentFormEnd=this.reader.offset+t},parseSurfaceLwo2(t){var e=this.reader.getString(),s={attributes:{},connections:{},name:e,nodes:{},source:this.reader.getString()};this.tree.materials[e]=s,this.currentSurface=s,this.parentForm=this.tree.materials,this.currentForm=s,this.currentFormEnd=this.reader.offset+t},parseSubNode(t){this.reader.skip(8);var e={name:this.reader.getString()};this.currentForm=e,this.currentNode=e,this.currentFormEnd=this.reader.offset+t},parseConnections(t){this.currentFormEnd=this.reader.offset+t,this.parentForm=this.currentForm,this.currentForm=this.currentSurface.connections},parseEntryForm(t){this.reader.skip(8);var e=this.reader.getString();this.currentForm=this.currentNode.attributes,this.setupForm(e,t)},parseValueForm(){this.reader.skip(8);var t=this.reader.getString();"double"===t?this.currentForm.value=this.reader.getUint64():"int"===t?this.currentForm.value=this.reader.getUint32():"vparam"===t?(this.reader.skip(24),this.currentForm.value=this.reader.getFloat64()):"vparam3"===t&&(this.reader.skip(24),this.currentForm.value=this.reader.getFloat64Array(3))},parseImageStateForm(){this.reader.skip(8),this.currentForm.mipMapLevel=this.reader.getFloat32()},parseImageMap(t){this.currentFormEnd=this.reader.offset+t,this.parentForm=this.currentForm,this.currentForm.maps||(this.currentForm.maps=[]);var e={};this.currentForm.maps.push(e),this.currentForm=e,this.reader.skip(10)},parseTextureNodeAttribute(t){switch(this.reader.skip(28),this.reader.skip(20),t){case"ISCL":this.currentNode.scale=this.reader.getFloat32Array(3);break;case"IPOS":this.currentNode.position=this.reader.getFloat32Array(3);break;case"IROT":this.currentNode.rotation=this.reader.getFloat32Array(3);break;case"IFAL":this.currentNode.falloff=this.reader.getFloat32Array(3);break;case"IBMP":this.currentNode.amplitude=this.reader.getFloat32();break;case"IUTD":this.currentNode.uTiles=this.reader.getFloat32();break;case"IVTD":this.currentNode.vTiles=this.reader.getFloat32()}this.reader.skip(2)},parseEnvelope(t){this.reader.skip(t-4)},parseClip(t){if("FORM"===this.reader.getIDTag())return this.reader.skip(16),void(this.currentNode.fileName=this.reader.getString());this.reader.setOffset(this.reader.offset-4),this.currentFormEnd=this.reader.offset+t,this.parentForm=this.currentForm,this.reader.skip(8);var e={index:this.reader.getUint32()};this.tree.textures.push(e),this.currentForm=e},parseClipLwo2(t){for(var e={index:this.reader.getUint32(),fileName:""};;){var s=this.reader.getIDTag(),r=this.reader.getUint16();if("STIL"===s){e.fileName=this.reader.getString();break}if(r>=t)break}this.tree.textures.push(e),this.currentForm=e},parseImage(){this.reader.skip(8),this.currentForm.fileName=this.reader.getString()},parseXVAL(t,e){var s=this.reader.offset+e-4;this.reader.skip(8),this.currentForm[t]=this.reader.getFloat32(),this.reader.setOffset(s)},parseXVAL3(t,e){var s=this.reader.offset+e-4;this.reader.skip(8),this.currentForm[t]={x:this.reader.getFloat32(),y:this.reader.getFloat32(),z:this.reader.getFloat32()},this.reader.setOffset(s)},parseObjectTag(){this.tree.objectTags||(this.tree.objectTags={}),this.tree.objectTags[this.reader.getIDTag()]={tagString:this.reader.getString()}},parseLayer(t){var e={number:this.reader.getUint16(),flags:this.reader.getUint16(),pivot:this.reader.getFloat32Array(3),name:this.reader.getString()};this.tree.layers.push(e),this.currentLayer=e;var s=16+UF(this.currentLayer.name);this.currentLayer.parent=s<t?this.reader.getUint16():-1},parsePoints(t){this.currentPoints=[];for(var e=0;e<t/4;e+=3)this.currentPoints.push(this.reader.getFloat32(),this.reader.getFloat32(),-this.reader.getFloat32())},parseVertexMapping(t,e){var s=this.reader.offset+t,r=this.reader.getString();if(this.reader.offset!==s){this.reader.setOffset(this.reader.offset-UF(r));var i=this.reader.getIDTag();this.reader.getUint16();var n=this.reader.getString(),o=t-6-UF(n);switch(i){case"TXUV":this.parseUVMapping(n,s,e);break;case"MORF":case"SPOT":this.parseMorphTargets(n,s,i);break;case"APSL":case"NORM":case"WGHT":case"MNVW":case"PICK":case"RGB ":case"RGBA":this.reader.skip(o);break;default:console.warn("LWOLoader: unknown vertex map type: "+i),this.reader.skip(o)}}else this.currentForm.UVChannel=r},parseUVMapping(t,e,s){for(var r=[],i=[],n=[];this.reader.offset<e;)r.push(this.reader.getVariableLengthIndex()),s&&i.push(this.reader.getVariableLengthIndex()),n.push(this.reader.getFloat32(),this.reader.getFloat32());s?(this.currentLayer.discontinuousUVs||(this.currentLayer.discontinuousUVs={}),this.currentLayer.discontinuousUVs[t]={uvIndices:r,polyIndices:i,uvs:n}):(this.currentLayer.uvs||(this.currentLayer.uvs={}),this.currentLayer.uvs[t]={uvIndices:r,uvs:n})},parseMorphTargets(t,e,s){var r=[],i=[];for(s="MORF"===s?"relative":"absolute";this.reader.offset<e;)r.push(this.reader.getVariableLengthIndex()),i.push(this.reader.getFloat32(),this.reader.getFloat32(),-this.reader.getFloat32());this.currentLayer.morphTargets||(this.currentLayer.morphTargets={}),this.currentLayer.morphTargets[t]={indices:r,points:i,type:s}},parsePolygonList(t){for(var e=this.reader.offset+t,s=this.reader.getIDTag(),r=[],i=[];this.reader.offset<e;){var n=this.reader.getUint16();n&=1023,i.push(n);for(var o=0;o<n;o++)r.push(this.reader.getVariableLengthIndex())}var a={type:s,vertexIndices:r,polygonDimensions:i,points:this.currentPoints};1===i[0]?a.type="points":2===i[0]&&(a.type="lines"),this.currentLayer.geometry=a},parseTagStrings(t){this.tree.tags=this.reader.getStringArray(t)},parsePolygonTagMapping(t){var e=this.reader.offset+t;"SURF"===this.reader.getIDTag()?this.parseMaterialIndices(e):this.reader.skip(t-4)},parseMaterialIndices(t){for(this.currentLayer.geometry.materialIndices=[];this.reader.offset<t;){var e=this.reader.getVariableLengthIndex(),s=this.reader.getUint16();this.currentLayer.geometry.materialIndices.push(e,s)}},parseUnknownCHUNK(t,e){console.warn("LWOLoader: unknown chunk type: "+t+" length: "+e);var s=this.reader.getString(e);this.currentForm[t]=s}},NF.prototype={constructor:NF,size:function(){return this.dv.buffer.byteLength},setOffset(t){t>0&&t<this.dv.buffer.byteLength?this.offset=t:console.error("LWOLoader: invalid buffer offset")},endOfFile:function(){return this.offset>=this.size()},skip:function(t){this.offset+=t},getUint8:function(){var t=this.dv.getUint8(this.offset);return this.offset+=1,t},getUint16:function(){var t=this.dv.getUint16(this.offset);return this.offset+=2,t},getInt32:function(){var t=this.dv.getInt32(this.offset,!1);return this.offset+=4,t},getUint32:function(){var t=this.dv.getUint32(this.offset,!1);return this.offset+=4,t},getUint64:function(){return 4294967296*this.getUint32()+this.getUint32()},getFloat32:function(){var t=this.dv.getFloat32(this.offset,!1);return this.offset+=4,t},getFloat32Array:function(t){for(var e=[],s=0;s<t;s++)e.push(this.getFloat32());return e},getFloat64:function(){var t=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t},getFloat64Array:function(t){for(var e=[],s=0;s<t;s++)e.push(this.getFloat64());return e},getVariableLengthIndex(){var t=this.getUint8();return 255===t?65536*this.getUint8()+256*this.getUint8()+this.getUint8():256*t+this.getUint8()},getIDTag(){return this.getString(4)},getString:function(t){if(0!==t){var e=[];if(t)for(var s=0;s<t;s++)e[s]=this.getUint8();else{for(var r,i=0;0!==r;)0!==(r=this.getUint8())&&e.push(r),i++;kF(i+1)||this.getUint8()}return Rl.decodeText(new Uint8Array(e))}},getStringArray:function(t){var e=this.getString(t);return(e=e.split("\0")).filter(Boolean)}},LF.prototype={constructor:LF,enable:function(){this.active=!0},log:function(){if(this.active){var t;switch(this.node){case 0:t="FORM";break;case 1:t="CHK";break;case 2:t="S-CHK"}console.log("| ".repeat(this.depth)+t,this.nodeID,`( ${this.offset} ) -> ( ${this.dataOffset+this.length} )`,0==this.node?" {":"",this.skipped?"SKIPPED":"",0==this.node&&this.skipped?"}":""),0!=this.node||this.skipped||(this.depth+=1,this.formList.push(this.dataOffset+this.length)),this.skipped=!1}},closeForms:function(){if(this.active)for(var t=this.formList.length-1;t>=0;t--)this.offset>=this.formList[t]&&(this.depth-=1,console.log("| ".repeat(this.depth)+"}"),this.formList.splice(-1,1))}};class BF extends Qc{constructor(t,e={}){super(t),this.resourcePath=void 0!==e.resourcePath?e.resourcePath:""}load(t,e,s,r){const i=this,n=""===i.path?function(t,e){const s=t.indexOf(e);return-1===s?"./":t.slice(0,s)}(t,"Objects"):i.path,o=t.split(n).pop().split(".")[0],a=new el(this.manager);a.setPath(i.path),a.setResponseType("arraybuffer"),a.load(t,(function(s){try{e(i.parse(s,n,o))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),s,r)}parse(t,e,s){HF=(new PF).parse(t);const r=new ol(this.manager).setPath(this.resourcePath||e).setCrossOrigin(this.crossOrigin);return new GF(r).parse(s)}}class GF{constructor(t){this.textureLoader=t}parse(t){return this.materials=new jF(this.textureLoader).parse(),this.defaultLayerName=t,this.meshes=this.parseLayers(),{materials:this.materials,meshes:this.meshes}}parseLayers(){const t=[],e=[],s=new zF,r=this;return HF.layers.forEach((function(i){const n=s.parse(i.geometry,i),o=r.parseMesh(n,i);t[i.number]=o,-1===i.parent?e.push(o):t[i.parent].add(o)})),this.applyPivots(e),e}parseMesh(t,e){let s;const r=this.getMaterials(t.userData.matNames,e.geometry.type);return this.duplicateUVs(t,r),s="points"===e.geometry.type?new Ka(t,r):"lines"===e.geometry.type?new ja(t,r):new jr(t,r),e.name?s.name=e.name:s.name=this.defaultLayerName+"_layer_"+e.number,s.userData.pivot=e.pivot,s}applyPivots(t){t.forEach((function(t){t.traverse((function(t){const e=t.userData.pivot;if(t.position.x+=e[0],t.position.y+=e[1],t.position.z+=e[2],t.parent){const e=t.parent.userData.pivot;t.position.x-=e[0],t.position.y-=e[1],t.position.z-=e[2]}}))}))}getMaterials(t,e){const s=[],r=this;t.forEach((function(t,e){s[e]=r.getMaterialByName(t)})),"points"!==e&&"lines"!==e||s.forEach((function(t,r){const i={color:t.color};"points"===e?(i.size=.1,i.map=t.map,s[r]=new Va(i)):"lines"===e&&(s[r]=new Ma(i))}));const i=s.filter(Boolean);return 1===i.length?i[0]:s}getMaterialByName(t){return this.materials.filter((function(e){return e.name===t}))[0]}duplicateUVs(t,e){let s=!1;Array.isArray(e)?e.forEach((function(t){t.aoMap&&(s=!0)})):e.aoMap&&(s=!0),s&&t.setAttribute("uv2",new or(t.attributes.uv.array,2))}}class jF{constructor(t){this.textureLoader=t}parse(){const t=[];this.textures={};for(const e in HF.materials)"LWO3"===HF.format?t.push(this.parseMaterial(HF.materials[e],e,HF.textures)):"LWO2"===HF.format&&t.push(this.parseMaterialLwo2(HF.materials[e],e,HF.textures));return t}parseMaterial(t,e,s){let r={name:e,side:this.getSide(t.attributes),flatShading:this.getSmooth(t.attributes)};const i=this.parseConnections(t.connections,t.nodes),n=this.parseTextureNodes(i.maps);this.parseAttributeImageMaps(i.attributes,s,n,t.maps);const o=this.parseAttributes(i.attributes,n);this.parseEnvMap(i,n,o),r=Object.assign(n,r),r=Object.assign(r,o);return new(this.getMaterialType(i.attributes))(r)}parseMaterialLwo2(t,e){let s={name:e,side:this.getSide(t.attributes),flatShading:this.getSmooth(t.attributes)};const r=this.parseAttributes(t.attributes,{});return s=Object.assign(s,r),new Cc(s)}getSide(t){if(!t.side)return 1;switch(t.side){case 0:case 1:return 1;case 2:return 0;case 3:return 2}}getSmooth(t){return!t.smooth||!t.smooth}parseConnections(t,e){const s={maps:{}},r=t.inputName,i=t.inputNodeName,n=t.nodeName,o=this;return r.forEach((function(t,r){if("Material"===t){const t=o.getNodeByRefName(i[r],e);s.attributes=t.attributes,s.envMap=t.fileName,s.name=i[r]}})),n.forEach((function(t,n){t===s.name&&(s.maps[r[n]]=o.getNodeByRefName(i[n],e))})),s}getNodeByRefName(t,e){for(const s in e)if(e[s].refName===t)return e[s]}parseTextureNodes(t){const e={};for(const s in t){const r=t[s],i=r.fileName;if(!i)return;const n=this.loadTexture(i);switch(void 0!==r.widthWrappingMode&&(n.wrapS=this.getWrappingType(r.widthWrappingMode)),void 0!==r.heightWrappingMode&&(n.wrapT=this.getWrappingType(r.heightWrappingMode)),s){case"Color":e.map=n;break;case"Roughness":e.roughnessMap=n,e.roughness=1;break;case"Specular":e.specularMap=n,e.specular=16777215;break;case"Luminous":e.emissiveMap=n,e.emissive=8421504;break;case"Luminous Color":e.emissive=8421504;break;case"Metallic":e.metalnessMap=n,e.metalness=1;break;case"Transparency":case"Alpha":e.alphaMap=n,e.transparent=!0;break;case"Normal":e.normalMap=n,void 0!==r.amplitude&&(e.normalScale=new le(r.amplitude,r.amplitude));break;case"Bump":e.bumpMap=n}}return e.roughnessMap&&e.specularMap&&delete e.specularMap,e}parseAttributeImageMaps(t,e,s){for(const r in t){const i=t[r];if(i.maps){const t=i.maps[0],n=this.getTexturePathByIndex(t.imageIndex,e);if(!n)return;const o=this.loadTexture(n);switch(void 0!==t.wrap&&(o.wrapS=this.getWrappingType(t.wrap.w)),void 0!==t.wrap&&(o.wrapT=this.getWrappingType(t.wrap.h)),r){case"Color":s.map=o;break;case"Diffuse":s.aoMap=o;break;case"Roughness":s.roughnessMap=o,s.roughness=1;break;case"Specular":s.specularMap=o,s.specular=16777215;break;case"Luminosity":s.emissiveMap=o,s.emissive=8421504;break;case"Metallic":s.metalnessMap=o,s.metalness=1;break;case"Transparency":case"Alpha":s.alphaMap=o,s.transparent=!0;break;case"Normal":s.normalMap=o;break;case"Bump":s.bumpMap=o}}}}parseAttributes(t,e){const s={};return t.Color&&!e.map?s.color=(new Ae).fromArray(t.Color.value):s.color=new Ae,t.Transparency&&0!==t.Transparency.value&&(s.opacity=1-t.Transparency.value,s.transparent=!0),t["Bump Height"]&&(s.bumpScale=.1*t["Bump Height"].value),t["Refraction Index"]&&(s.refractionRatio=.98/t["Refraction Index"].value),this.parsePhysicalAttributes(s,t,e),this.parseStandardAttributes(s,t,e),this.parsePhongAttributes(s,t,e),s}parsePhysicalAttributes(t,e){e.Clearcoat&&e.Clearcoat.value>0&&(t.clearcoat=e.Clearcoat.value,e["Clearcoat Gloss"]&&(t.clearcoatRoughness=.5*(1-e["Clearcoat Gloss"].value)))}parseStandardAttributes(t,e,s){e.Luminous&&(t.emissiveIntensity=e.Luminous.value,e["Luminous Color"]&&!s.emissive?t.emissive=(new Ae).fromArray(e["Luminous Color"].value):t.emissive=new Ae(8421504)),e.Roughness&&!s.roughnessMap&&(t.roughness=e.Roughness.value),e.Metallic&&!s.metalnessMap&&(t.metalness=e.Metallic.value)}parsePhongAttributes(t,e,s){e.Diffuse&&t.color.multiplyScalar(e.Diffuse.value),e.Reflection&&(t.reflectivity=e.Reflection.value,t.combine=2),e.Luminosity&&(t.emissiveIntensity=e.Luminosity.value,s.emissiveMap||s.map?t.emissive=new Ae(8421504):t.emissive=t.color),e.Roughness||!e.Specular||s.specularMap||(e["Color Highlight"]?t.specular=(new Ae).setScalar(e.Specular.value).lerp(t.color.clone().multiplyScalar(e.Specular.value),e["Color Highlight"].value):t.specular=(new Ae).setScalar(e.Specular.value)),t.specular&&e.Glossiness&&(t.shininess=7+Math.pow(2,12*e.Glossiness.value+2))}parseEnvMap(t,e,s){if(t.envMap){const r=this.loadTexture(t.envMap);s.transparent&&s.opacity<.999?(r.mapping=H,void 0!==s.reflectivity&&(delete s.reflectivity,delete s.combine),void 0!==s.metalness&&(s.metalness=1),s.opacity=1):r.mapping=U,e.envMap=r}}getTexturePathByIndex(t){let e="";return HF.textures?(HF.textures.forEach((function(s){s.index===t&&(e=s.fileName)})),e):e}loadTexture(t){if(!t)return null;return this.textureLoader.load(t,void 0,void 0,(function(){console.warn("LWOLoader: non-standard resource hierarchy. Use `resourcePath` parameter to specify root content directory.")}))}getWrappingType(t){switch(t){case 0:return console.warn('LWOLoader: "Reset" texture wrapping type is not supported in three.js'),j;case 1:return G;case 2:return z;case 3:return j}}getMaterialType(t){return t.Clearcoat&&t.Clearcoat.value>0?Rc:t.Roughness?Ac:Cc}}class zF{parse(t,e){const s=new Er;s.setAttribute("position",new fr(t.points,3));const r=this.splitIndices(t.vertexIndices,t.polygonDimensions);return s.setIndex(r),this.parseGroups(s,t),s.computeVertexNormals(),this.parseUVs(s,e,r),this.parseMorphTargets(s,e,r),s.translate(-e.pivot[0],-e.pivot[1],-e.pivot[2]),s}splitIndices(t,e){const s=[];let r=0;return e.forEach((function(e){if(e<4)for(let i=0;i<e;i++)s.push(t[r+i]);else if(4===e)s.push(t[r],t[r+1],t[r+2],t[r],t[r+2],t[r+3]);else if(e>4){for(let i=1;i<e-1;i++)s.push(t[r],t[r+i],t[r+i+1]);console.warn("LWOLoader: polygons with greater than 4 sides are not supported")}r+=e})),s}parseGroups(t,e){const s=HF.tags,r=[];let i=3;"lines"===e.type&&(i=2),"points"===e.type&&(i=1);const n=this.splitMaterialIndices(e.polygonDimensions,e.materialIndices);let o=0;const a={};let h,c,l=0,u=0;for(let e=0;e<n.length;e+=2){if(c=n[e+1],0===e&&(r[o]=s[c]),void 0===h&&(h=c),c!==h){let e;a[s[h]]?e=a[s[h]]:(e=o,a[s[h]]=o,r[o]=s[h],o++),t.addGroup(l,u,e),l+=u,h=c,u=0}u+=i}if(t.groups.length>0){let e;a[s[c]]?e=a[s[c]]:(e=o,a[s[c]]=o,r[o]=s[c]),t.addGroup(l,u,e)}t.userData.matNames=r}splitMaterialIndices(t,e){const s=[];return t.forEach((function(t,r){if(t<=3)s.push(e[2*r],e[2*r+1]);else if(4===t)s.push(e[2*r],e[2*r+1],e[2*r],e[2*r+1]);else for(let i=0;i<t-2;i++)s.push(e[2*r],e[2*r+1])})),s}parseUVs(t,e){const s=Array.from(Array(2*t.attributes.position.count),(function(){return 0}));for(const t in e.uvs){const r=e.uvs[t].uvs;e.uvs[t].uvIndices.forEach((function(t,e){s[2*t]=r[2*e],s[2*t+1]=r[2*e+1]}))}t.setAttribute("uv",new fr(s,2))}parseMorphTargets(t,e){let s=0;for(const r in e.morphTargets){const i=t.attributes.position.array.slice();t.morphAttributes.position||(t.morphAttributes.position=[]);const n=e.morphTargets[r].points,o=e.morphTargets[r].indices,a=e.morphTargets[r].type;o.forEach((function(t,e){"relative"===a?(i[3*t]+=n[3*e],i[3*t+1]+=n[3*e+1],i[3*t+2]+=n[3*e+2]):(i[3*t]=n[3*e],i[3*t+1]=n[3*e+1],i[3*t+2]=n[3*e+2])})),t.morphAttributes.position[s]=new fr(i,3),t.morphAttributes.position[s].name=r,s++}t.morphTargetsRelative=!1}}const VF=[[-.525731,0,.850651],[-.442863,.238856,.864188],[-.295242,0,.955423],[-.309017,.5,.809017],[-.16246,.262866,.951056],[0,0,1],[0,.850651,.525731],[-.147621,.716567,.681718],[.147621,.716567,.681718],[0,.525731,.850651],[.309017,.5,.809017],[.525731,0,.850651],[.295242,0,.955423],[.442863,.238856,.864188],[.16246,.262866,.951056],[-.681718,.147621,.716567],[-.809017,.309017,.5],[-.587785,.425325,.688191],[-.850651,.525731,0],[-.864188,.442863,.238856],[-.716567,.681718,.147621],[-.688191,.587785,.425325],[-.5,.809017,.309017],[-.238856,.864188,.442863],[-.425325,.688191,.587785],[-.716567,.681718,-.147621],[-.5,.809017,-.309017],[-.525731,.850651,0],[0,.850651,-.525731],[-.238856,.864188,-.442863],[0,.955423,-.295242],[-.262866,.951056,-.16246],[0,1,0],[0,.955423,.295242],[-.262866,.951056,.16246],[.238856,.864188,.442863],[.262866,.951056,.16246],[.5,.809017,.309017],[.238856,.864188,-.442863],[.262866,.951056,-.16246],[.5,.809017,-.309017],[.850651,.525731,0],[.716567,.681718,.147621],[.716567,.681718,-.147621],[.525731,.850651,0],[.425325,.688191,.587785],[.864188,.442863,.238856],[.688191,.587785,.425325],[.809017,.309017,.5],[.681718,.147621,.716567],[.587785,.425325,.688191],[.955423,.295242,0],[1,0,0],[.951056,.16246,.262866],[.850651,-.525731,0],[.955423,-.295242,0],[.864188,-.442863,.238856],[.951056,-.16246,.262866],[.809017,-.309017,.5],[.681718,-.147621,.716567],[.850651,0,.525731],[.864188,.442863,-.238856],[.809017,.309017,-.5],[.951056,.16246,-.262866],[.525731,0,-.850651],[.681718,.147621,-.716567],[.681718,-.147621,-.716567],[.850651,0,-.525731],[.809017,-.309017,-.5],[.864188,-.442863,-.238856],[.951056,-.16246,-.262866],[.147621,.716567,-.681718],[.309017,.5,-.809017],[.425325,.688191,-.587785],[.442863,.238856,-.864188],[.587785,.425325,-.688191],[.688191,.587785,-.425325],[-.147621,.716567,-.681718],[-.309017,.5,-.809017],[0,.525731,-.850651],[-.525731,0,-.850651],[-.442863,.238856,-.864188],[-.295242,0,-.955423],[-.16246,.262866,-.951056],[0,0,-1],[.295242,0,-.955423],[.16246,.262866,-.951056],[-.442863,-.238856,-.864188],[-.309017,-.5,-.809017],[-.16246,-.262866,-.951056],[0,-.850651,-.525731],[-.147621,-.716567,-.681718],[.147621,-.716567,-.681718],[0,-.525731,-.850651],[.309017,-.5,-.809017],[.442863,-.238856,-.864188],[.16246,-.262866,-.951056],[.238856,-.864188,-.442863],[.5,-.809017,-.309017],[.425325,-.688191,-.587785],[.716567,-.681718,-.147621],[.688191,-.587785,-.425325],[.587785,-.425325,-.688191],[0,-.955423,-.295242],[0,-1,0],[.262866,-.951056,-.16246],[0,-.850651,.525731],[0,-.955423,.295242],[.238856,-.864188,.442863],[.262866,-.951056,.16246],[.5,-.809017,.309017],[.716567,-.681718,.147621],[.525731,-.850651,0],[-.238856,-.864188,-.442863],[-.5,-.809017,-.309017],[-.262866,-.951056,-.16246],[-.850651,-.525731,0],[-.716567,-.681718,-.147621],[-.716567,-.681718,.147621],[-.525731,-.850651,0],[-.5,-.809017,.309017],[-.238856,-.864188,.442863],[-.262866,-.951056,.16246],[-.864188,-.442863,.238856],[-.809017,-.309017,.5],[-.688191,-.587785,.425325],[-.681718,-.147621,.716567],[-.442863,-.238856,.864188],[-.587785,-.425325,.688191],[-.309017,-.5,.809017],[-.147621,-.716567,.681718],[-.425325,-.688191,.587785],[-.16246,-.262866,.951056],[.442863,-.238856,.864188],[.16246,-.262866,.951056],[.309017,-.5,.809017],[.147621,-.716567,.681718],[0,-.525731,.850651],[.425325,-.688191,.587785],[.587785,-.425325,.688191],[.688191,-.587785,.425325],[-.955423,.295242,0],[-.951056,.16246,.262866],[-1,0,0],[-.850651,0,.525731],[-.955423,-.295242,0],[-.951056,-.16246,.262866],[-.864188,.442863,-.238856],[-.951056,.16246,-.262866],[-.809017,.309017,-.5],[-.864188,-.442863,-.238856],[-.951056,-.16246,-.262866],[-.809017,-.309017,-.5],[-.681718,.147621,-.716567],[-.681718,-.147621,-.716567],[-.850651,0,-.525731],[-.688191,.587785,-.425325],[-.587785,.425325,-.688191],[-.425325,.688191,-.587785],[-.425325,-.688191,-.587785],[-.587785,-.425325,-.688191],[-.688191,-.587785,-.425325]];class WF extends Qc{constructor(t){super(t)}load(t,e,s,r){const i=this,n=new el(i.manager);n.setPath(i.path),n.setResponseType("arraybuffer"),n.setRequestHeader(i.requestHeader),n.setWithCredentials(i.withCredentials),n.load(t,(function(s){try{e(i.parse(s))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),s,r)}parse(t){const e=new DataView(t),s={},r=["ident","version","skinwidth","skinheight","framesize","num_skins","num_vertices","num_st","num_tris","num_glcmds","num_frames","offset_skins","offset_st","offset_tris","offset_frames","offset_glcmds","offset_end"];for(let t=0;t<r.length;t++)s[r[t]]=e.getInt32(4*t,!0);if(844121161!==s.ident||8!==s.version)return void console.error("Not a valid MD2 file");if(s.offset_end!==e.byteLength)return void console.error("Corrupted MD2 file");const i=new Er,n=[];let o=s.offset_st;for(let t=0,r=s.num_st;t<r;t++){const t=e.getInt16(o+0,!0),r=e.getInt16(o+2,!0);n.push(t/s.skinwidth,1-r/s.skinheight),o+=4}o=s.offset_tris;const a=[],h=[];for(let t=0,r=s.num_tris;t<r;t++)a.push(e.getUint16(o+0,!0),e.getUint16(o+2,!0),e.getUint16(o+4,!0)),h.push(e.getUint16(o+6,!0),e.getUint16(o+8,!0),e.getUint16(o+10,!0)),o+=12;const c=new Ge,l=new Ge,u=[];o=s.offset_frames;for(let t=0,r=s.num_frames;t<r;t++){l.set(e.getFloat32(o+0,!0),e.getFloat32(o+4,!0),e.getFloat32(o+8,!0)),c.set(e.getFloat32(o+12,!0),e.getFloat32(o+16,!0),e.getFloat32(o+20,!0)),o+=24;const t=[];for(let s=0;s<16;s++){const r=e.getUint8(o+s);if(0===r)break;t[s]=r}const r={name:String.fromCharCode.apply(null,t),vertices:[],normals:[]};o+=16;for(let t=0;t<s.num_vertices;t++){let t=e.getUint8(o++),s=e.getUint8(o++),i=e.getUint8(o++);const n=VF[e.getUint8(o++)];t=t*l.x+c.x,s=s*l.y+c.y,i=i*l.z+c.z,r.vertices.push(t,i,s),r.normals.push(n[0],n[2],n[1])}u.push(r)}const p=[],d=[],m=[],f=u[0].vertices,g=u[0].normals;for(let t=0,e=a.length;t<e;t++){let e=3*a[t];const s=f[e],r=f[e+1],i=f[e+2];p.push(s,r,i);const o=g[e],c=g[e+1],l=g[e+2];d.push(o,c,l);e=2*h[t];const u=n[e],y=n[e+1];m.push(u,y)}i.setAttribute("position",new fr(p,3)),i.setAttribute("normal",new fr(d,3)),i.setAttribute("uv",new fr(m,2));const y=[],T=[];for(let t=0,e=u.length;t<e;t++){const e=u[t],s=e.name;if(e.vertices.length>0){const t=[];for(let s=0,r=a.length;s<r;s++){const r=3*a[s],i=e.vertices[r],n=e.vertices[r+1],o=e.vertices[r+2];t.push(i,n,o)}const r=new fr(t,3);r.name=s,y.push(r)}if(e.normals.length>0){const t=[];for(let s=0,r=a.length;s<r;s++){const r=3*a[s],i=e.normals[r],n=e.normals[r+1],o=e.normals[r+2];t.push(i,n,o)}const r=new fr(t,3);r.name=s,T.push(r)}}return i.morphAttributes.position=y,i.morphAttributes.normal=T,i.morphTargetsRelative=!1,i.animations=qc.CreateClipsFromMorphTargetSequences(u,10),i}}class YF extends Qc{constructor(t){super(t)}load(t,e,s,r){const i=this,n=new el(this.manager);n.setPath(this.path),n.setResponseType("arraybuffer"),n.load(t,(function(t){e(i.parse(t))}),s,r)}parse(t){const e=new DataView(t),s=e.getUint32(0),r=e.getUint32(4);let i=8;const n=new Float32Array(s),o=new Float32Array(s*s).fill(0);for(let t=0;t<s;t++)n[t]=e.getFloat32(i),i+=4,o[s*t+t]=1;const a=new zc(".morphTargetInfluences",n,o),h=new qc("default",n[n.length-1],[a]),c=[];for(let t=0;t<s;t++){const s=new Float32Array(3*r);for(let t=0;t<r;t++){const r=3*t;s[r+0]=e.getFloat32(i),i+=4,s[r+1]=e.getFloat32(i),i+=4,s[r+2]=e.getFloat32(i),i+=4}const n=new or(s,3);n.name="morph_"+t,c.push(n)}return{morphTargets:c,clip:h}}}const XF={defines:{TOON:!0,MATCAP:!0,MATCAP_BLENDING_ADD:!0},uniforms:Xr.merge([di.toon.uniforms,di.phong.uniforms,di.matcap.uniforms]),vertexShader:di.phong.vertexShader,fragmentShader:di.phong.fragmentShader.replace("#include <common>","\n\t\t\t\t\t#ifdef USE_MATCAP\n\t\t\t\t\t\tuniform sampler2D matcap;\n\t\t\t\t\t#endif\n\n\t\t\t\t\t#include <common>\n\t\t\t\t").replace("#include <envmap_common_pars_fragment>","\n\t\t\t\t\t#include <gradientmap_pars_fragment>\n\t\t\t\t\t#include <envmap_common_pars_fragment>\n\t\t\t\t").replace("#include <lights_phong_pars_fragment>","\nvarying vec3 vViewPosition;\n\nstruct BlinnPhongMaterial {\n\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n\n};\n\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n\n}\n\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n\n#define Material_LightProbeLOD( material )\t(0)\n").replace("#include <envmap_fragment>","\n\t\t\t\t\t#include <envmap_fragment>\n\t\t\t\t\t\n#ifdef USE_MATCAP\n\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks\n\tvec4 matcapColor = texture2D( matcap, uv );\n\n\t#ifdef MATCAP_BLENDING_MULTIPLY\n\n\t\toutgoingLight *= matcapColor.rgb;\n\n\t#elif defined( MATCAP_BLENDING_ADD )\n\n\t\toutgoingLight += matcapColor.rgb;\n\n\t#endif\n\n#endif\n\n\t\t\t\t")};function qF(){}function KF(t,e){this.dv=new DataView(t),this.offset=0,this.littleEndian=void 0===e||e,this.encoder=new qF}function JF(){}function $F(){}qF.prototype.s2u=function(t){for(var e=this.s2uTable,s="",r=0;r<t.length;){var i=t[r++];if(!(i>=0&&i<=126||i>=161&&i<=223)&&r<t.length&&(i=i<<8|t[r++]),void 0===e[i])return console.error("unknown char code "+i+"."),s;s+=String.fromCharCode(e[i])}return s},qF.prototype.s2uTable={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,11:11,12:12,13:13,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:21,22:22,23:23,24:24,25:25,26:26,27:27,28:28,29:29,30:30,31:31,32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:92,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125,126:126,161:65377,162:65378,163:65379,164:65380,165:65381,166:65382,167:65383,168:65384,169:65385,170:65386,171:65387,172:65388,173:65389,174:65390,175:65391,176:65392,177:65393,178:65394,179:65395,180:65396,181:65397,182:65398,183:65399,184:65400,185:65401,186:65402,187:65403,188:65404,189:65405,190:65406,191:65407,192:65408,193:65409,194:65410,195:65411,196:65412,197:65413,198:65414,199:65415,200:65416,201:65417,202:65418,203:65419,204:65420,205:65421,206:65422,207:65423,208:65424,209:65425,210:65426,211:65427,212:65428,213:65429,214:65430,215:65431,216:65432,217:65433,218:65434,219:65435,220:65436,221:65437,222:65438,223:65439,33088:12288,33089:12289,33090:12290,33091:65292,33092:65294,33093:12539,33094:65306,33095:65307,33096:65311,33097:65281,33098:12443,33099:12444,33100:180,33101:65344,33102:168,33103:65342,33104:65507,33105:65343,33106:12541,33107:12542,33108:12445,33109:12446,33110:12291,33111:20189,33112:12293,33113:12294,33114:12295,33115:12540,33116:8213,33117:8208,33118:65295,33119:65340,33120:65374,33121:8741,33122:65372,33123:8230,33124:8229,33125:8216,33126:8217,33127:8220,33128:8221,33129:65288,33130:65289,33131:12308,33132:12309,33133:65339,33134:65341,33135:65371,33136:65373,33137:12296,33138:12297,33139:12298,33140:12299,33141:12300,33142:12301,33143:12302,33144:12303,33145:12304,33146:12305,33147:65291,33148:65293,33149:177,33150:215,33152:247,33153:65309,33154:8800,33155:65308,33156:65310,33157:8806,33158:8807,33159:8734,33160:8756,33161:9794,33162:9792,33163:176,33164:8242,33165:8243,33166:8451,33167:65509,33168:65284,33169:65504,33170:65505,33171:65285,33172:65283,33173:65286,33174:65290,33175:65312,33176:167,33177:9734,33178:9733,33179:9675,33180:9679,33181:9678,33182:9671,33183:9670,33184:9633,33185:9632,33186:9651,33187:9650,33188:9661,33189:9660,33190:8251,33191:12306,33192:8594,33193:8592,33194:8593,33195:8595,33196:12307,33208:8712,33209:8715,33210:8838,33211:8839,33212:8834,33213:8835,33214:8746,33215:8745,33224:8743,33225:8744,33226:65506,33227:8658,33228:8660,33229:8704,33230:8707,33242:8736,33243:8869,33244:8978,33245:8706,33246:8711,33247:8801,33248:8786,33249:8810,33250:8811,33251:8730,33252:8765,33253:8733,33254:8757,33255:8747,33256:8748,33264:8491,33265:8240,33266:9839,33267:9837,33268:9834,33269:8224,33270:8225,33271:182,33276:9711,33359:65296,33360:65297,33361:65298,33362:65299,33363:65300,33364:65301,33365:65302,33366:65303,33367:65304,33368:65305,33376:65313,33377:65314,33378:65315,33379:65316,33380:65317,33381:65318,33382:65319,33383:65320,33384:65321,33385:65322,33386:65323,33387:65324,33388:65325,33389:65326,33390:65327,33391:65328,33392:65329,33393:65330,33394:65331,33395:65332,33396:65333,33397:65334,33398:65335,33399:65336,33400:65337,33401:65338,33409:65345,33410:65346,33411:65347,33412:65348,33413:65349,33414:65350,33415:65351,33416:65352,33417:65353,33418:65354,33419:65355,33420:65356,33421:65357,33422:65358,33423:65359,33424:65360,33425:65361,33426:65362,33427:65363,33428:65364,33429:65365,33430:65366,33431:65367,33432:65368,33433:65369,33434:65370,33439:12353,33440:12354,33441:12355,33442:12356,33443:12357,33444:12358,33445:12359,33446:12360,33447:12361,33448:12362,33449:12363,33450:12364,33451:12365,33452:12366,33453:12367,33454:12368,33455:12369,33456:12370,33457:12371,33458:12372,33459:12373,33460:12374,33461:12375,33462:12376,33463:12377,33464:12378,33465:12379,33466:12380,33467:12381,33468:12382,33469:12383,33470:12384,33471:12385,33472:12386,33473:12387,33474:12388,33475:12389,33476:12390,33477:12391,33478:12392,33479:12393,33480:12394,33481:12395,33482:12396,33483:12397,33484:12398,33485:12399,33486:12400,33487:12401,33488:12402,33489:12403,33490:12404,33491:12405,33492:12406,33493:12407,33494:12408,33495:12409,33496:12410,33497:12411,33498:12412,33499:12413,33500:12414,33501:12415,33502:12416,33503:12417,33504:12418,33505:12419,33506:12420,33507:12421,33508:12422,33509:12423,33510:12424,33511:12425,33512:12426,33513:12427,33514:12428,33515:12429,33516:12430,33517:12431,33518:12432,33519:12433,33520:12434,33521:12435,33600:12449,33601:12450,33602:12451,33603:12452,33604:12453,33605:12454,33606:12455,33607:12456,33608:12457,33609:12458,33610:12459,33611:12460,33612:12461,33613:12462,33614:12463,33615:12464,33616:12465,33617:12466,33618:12467,33619:12468,33620:12469,33621:12470,33622:12471,33623:12472,33624:12473,33625:12474,33626:12475,33627:12476,33628:12477,33629:12478,33630:12479,33631:12480,33632:12481,33633:12482,33634:12483,33635:12484,33636:12485,33637:12486,33638:12487,33639:12488,33640:12489,33641:12490,33642:12491,33643:12492,33644:12493,33645:12494,33646:12495,33647:12496,33648:12497,33649:12498,33650:12499,33651:12500,33652:12501,33653:12502,33654:12503,33655:12504,33656:12505,33657:12506,33658:12507,33659:12508,33660:12509,33661:12510,33662:12511,33664:12512,33665:12513,33666:12514,33667:12515,33668:12516,33669:12517,33670:12518,33671:12519,33672:12520,33673:12521,33674:12522,33675:12523,33676:12524,33677:12525,33678:12526,33679:12527,33680:12528,33681:12529,33682:12530,33683:12531,33684:12532,33685:12533,33686:12534,33695:913,33696:914,33697:915,33698:916,33699:917,33700:918,33701:919,33702:920,33703:921,33704:922,33705:923,33706:924,33707:925,33708:926,33709:927,33710:928,33711:929,33712:931,33713:932,33714:933,33715:934,33716:935,33717:936,33718:937,33727:945,33728:946,33729:947,33730:948,33731:949,33732:950,33733:951,33734:952,33735:953,33736:954,33737:955,33738:956,33739:957,33740:958,33741:959,33742:960,33743:961,33744:963,33745:964,33746:965,33747:966,33748:967,33749:968,33750:969,33856:1040,33857:1041,33858:1042,33859:1043,33860:1044,33861:1045,33862:1025,33863:1046,33864:1047,33865:1048,33866:1049,33867:1050,33868:1051,33869:1052,33870:1053,33871:1054,33872:1055,33873:1056,33874:1057,33875:1058,33876:1059,33877:1060,33878:1061,33879:1062,33880:1063,33881:1064,33882:1065,33883:1066,33884:1067,33885:1068,33886:1069,33887:1070,33888:1071,33904:1072,33905:1073,33906:1074,33907:1075,33908:1076,33909:1077,33910:1105,33911:1078,33912:1079,33913:1080,33914:1081,33915:1082,33916:1083,33917:1084,33918:1085,33920:1086,33921:1087,33922:1088,33923:1089,33924:1090,33925:1091,33926:1092,33927:1093,33928:1094,33929:1095,33930:1096,33931:1097,33932:1098,33933:1099,33934:1100,33935:1101,33936:1102,33937:1103,33951:9472,33952:9474,33953:9484,33954:9488,33955:9496,33956:9492,33957:9500,33958:9516,33959:9508,33960:9524,33961:9532,33962:9473,33963:9475,33964:9487,33965:9491,33966:9499,33967:9495,33968:9507,33969:9523,33970:9515,33971:9531,33972:9547,33973:9504,33974:9519,33975:9512,33976:9527,33977:9535,33978:9501,33979:9520,33980:9509,33981:9528,33982:9538,34624:9312,34625:9313,34626:9314,34627:9315,34628:9316,34629:9317,34630:9318,34631:9319,34632:9320,34633:9321,34634:9322,34635:9323,34636:9324,34637:9325,34638:9326,34639:9327,34640:9328,34641:9329,34642:9330,34643:9331,34644:8544,34645:8545,34646:8546,34647:8547,34648:8548,34649:8549,34650:8550,34651:8551,34652:8552,34653:8553,34655:13129,34656:13076,34657:13090,34658:13133,34659:13080,34660:13095,34661:13059,34662:13110,34663:13137,34664:13143,34665:13069,34666:13094,34667:13091,34668:13099,34669:13130,34670:13115,34671:13212,34672:13213,34673:13214,34674:13198,34675:13199,34676:13252,34677:13217,34686:13179,34688:12317,34689:12319,34690:8470,34691:13261,34692:8481,34693:12964,34694:12965,34695:12966,34696:12967,34697:12968,34698:12849,34699:12850,34700:12857,34701:13182,34702:13181,34703:13180,34704:8786,34705:8801,34706:8747,34707:8750,34708:8721,34709:8730,34710:8869,34711:8736,34712:8735,34713:8895,34714:8757,34715:8745,34716:8746,34975:20124,34976:21782,34977:23043,34978:38463,34979:21696,34980:24859,34981:25384,34982:23030,34983:36898,34984:33909,34985:33564,34986:31312,34987:24746,34988:25569,34989:28197,34990:26093,34991:33894,34992:33446,34993:39925,34994:26771,34995:22311,34996:26017,34997:25201,34998:23451,34999:22992,35e3:34427,35001:39156,35002:32098,35003:32190,35004:39822,35005:25110,35006:31903,35007:34999,35008:23433,35009:24245,35010:25353,35011:26263,35012:26696,35013:38343,35014:38797,35015:26447,35016:20197,35017:20234,35018:20301,35019:20381,35020:20553,35021:22258,35022:22839,35023:22996,35024:23041,35025:23561,35026:24799,35027:24847,35028:24944,35029:26131,35030:26885,35031:28858,35032:30031,35033:30064,35034:31227,35035:32173,35036:32239,35037:32963,35038:33806,35039:34915,35040:35586,35041:36949,35042:36986,35043:21307,35044:20117,35045:20133,35046:22495,35047:32946,35048:37057,35049:30959,35050:19968,35051:22769,35052:28322,35053:36920,35054:31282,35055:33576,35056:33419,35057:39983,35058:20801,35059:21360,35060:21693,35061:21729,35062:22240,35063:23035,35064:24341,35065:39154,35066:28139,35067:32996,35068:34093,35136:38498,35137:38512,35138:38560,35139:38907,35140:21515,35141:21491,35142:23431,35143:28879,35144:32701,35145:36802,35146:38632,35147:21359,35148:40284,35149:31418,35150:19985,35151:30867,35152:33276,35153:28198,35154:22040,35155:21764,35156:27421,35157:34074,35158:39995,35159:23013,35160:21417,35161:28006,35162:29916,35163:38287,35164:22082,35165:20113,35166:36939,35167:38642,35168:33615,35169:39180,35170:21473,35171:21942,35172:23344,35173:24433,35174:26144,35175:26355,35176:26628,35177:27704,35178:27891,35179:27945,35180:29787,35181:30408,35182:31310,35183:38964,35184:33521,35185:34907,35186:35424,35187:37613,35188:28082,35189:30123,35190:30410,35191:39365,35192:24742,35193:35585,35194:36234,35195:38322,35196:27022,35197:21421,35198:20870,35200:22290,35201:22576,35202:22852,35203:23476,35204:24310,35205:24616,35206:25513,35207:25588,35208:27839,35209:28436,35210:28814,35211:28948,35212:29017,35213:29141,35214:29503,35215:32257,35216:33398,35217:33489,35218:34199,35219:36960,35220:37467,35221:40219,35222:22633,35223:26044,35224:27738,35225:29989,35226:20985,35227:22830,35228:22885,35229:24448,35230:24540,35231:25276,35232:26106,35233:27178,35234:27431,35235:27572,35236:29579,35237:32705,35238:35158,35239:40236,35240:40206,35241:40644,35242:23713,35243:27798,35244:33659,35245:20740,35246:23627,35247:25014,35248:33222,35249:26742,35250:29281,35251:20057,35252:20474,35253:21368,35254:24681,35255:28201,35256:31311,35257:38899,35258:19979,35259:21270,35260:20206,35261:20309,35262:20285,35263:20385,35264:20339,35265:21152,35266:21487,35267:22025,35268:22799,35269:23233,35270:23478,35271:23521,35272:31185,35273:26247,35274:26524,35275:26550,35276:27468,35277:27827,35278:28779,35279:29634,35280:31117,35281:31166,35282:31292,35283:31623,35284:33457,35285:33499,35286:33540,35287:33655,35288:33775,35289:33747,35290:34662,35291:35506,35292:22057,35293:36008,35294:36838,35295:36942,35296:38686,35297:34442,35298:20420,35299:23784,35300:25105,35301:29273,35302:30011,35303:33253,35304:33469,35305:34558,35306:36032,35307:38597,35308:39187,35309:39381,35310:20171,35311:20250,35312:35299,35313:22238,35314:22602,35315:22730,35316:24315,35317:24555,35318:24618,35319:24724,35320:24674,35321:25040,35322:25106,35323:25296,35324:25913,35392:39745,35393:26214,35394:26800,35395:28023,35396:28784,35397:30028,35398:30342,35399:32117,35400:33445,35401:34809,35402:38283,35403:38542,35404:35997,35405:20977,35406:21182,35407:22806,35408:21683,35409:23475,35410:23830,35411:24936,35412:27010,35413:28079,35414:30861,35415:33995,35416:34903,35417:35442,35418:37799,35419:39608,35420:28012,35421:39336,35422:34521,35423:22435,35424:26623,35425:34510,35426:37390,35427:21123,35428:22151,35429:21508,35430:24275,35431:25313,35432:25785,35433:26684,35434:26680,35435:27579,35436:29554,35437:30906,35438:31339,35439:35226,35440:35282,35441:36203,35442:36611,35443:37101,35444:38307,35445:38548,35446:38761,35447:23398,35448:23731,35449:27005,35450:38989,35451:38990,35452:25499,35453:31520,35454:27179,35456:27263,35457:26806,35458:39949,35459:28511,35460:21106,35461:21917,35462:24688,35463:25324,35464:27963,35465:28167,35466:28369,35467:33883,35468:35088,35469:36676,35470:19988,35471:39993,35472:21494,35473:26907,35474:27194,35475:38788,35476:26666,35477:20828,35478:31427,35479:33970,35480:37340,35481:37772,35482:22107,35483:40232,35484:26658,35485:33541,35486:33841,35487:31909,35488:21e3,35489:33477,35490:29926,35491:20094,35492:20355,35493:20896,35494:23506,35495:21002,35496:21208,35497:21223,35498:24059,35499:21914,35500:22570,35501:23014,35502:23436,35503:23448,35504:23515,35505:24178,35506:24185,35507:24739,35508:24863,35509:24931,35510:25022,35511:25563,35512:25954,35513:26577,35514:26707,35515:26874,35516:27454,35517:27475,35518:27735,35519:28450,35520:28567,35521:28485,35522:29872,35523:29976,35524:30435,35525:30475,35526:31487,35527:31649,35528:31777,35529:32233,35530:32566,35531:32752,35532:32925,35533:33382,35534:33694,35535:35251,35536:35532,35537:36011,35538:36996,35539:37969,35540:38291,35541:38289,35542:38306,35543:38501,35544:38867,35545:39208,35546:33304,35547:20024,35548:21547,35549:23736,35550:24012,35551:29609,35552:30284,35553:30524,35554:23721,35555:32747,35556:36107,35557:38593,35558:38929,35559:38996,35560:39e3,35561:20225,35562:20238,35563:21361,35564:21916,35565:22120,35566:22522,35567:22855,35568:23305,35569:23492,35570:23696,35571:24076,35572:24190,35573:24524,35574:25582,35575:26426,35576:26071,35577:26082,35578:26399,35579:26827,35580:26820,35648:27231,35649:24112,35650:27589,35651:27671,35652:27773,35653:30079,35654:31048,35655:23395,35656:31232,35657:32e3,35658:24509,35659:35215,35660:35352,35661:36020,35662:36215,35663:36556,35664:36637,35665:39138,35666:39438,35667:39740,35668:20096,35669:20605,35670:20736,35671:22931,35672:23452,35673:25135,35674:25216,35675:25836,35676:27450,35677:29344,35678:30097,35679:31047,35680:32681,35681:34811,35682:35516,35683:35696,35684:25516,35685:33738,35686:38816,35687:21513,35688:21507,35689:21931,35690:26708,35691:27224,35692:35440,35693:30759,35694:26485,35695:40653,35696:21364,35697:23458,35698:33050,35699:34384,35700:36870,35701:19992,35702:20037,35703:20167,35704:20241,35705:21450,35706:21560,35707:23470,35708:24339,35709:24613,35710:25937,35712:26429,35713:27714,35714:27762,35715:27875,35716:28792,35717:29699,35718:31350,35719:31406,35720:31496,35721:32026,35722:31998,35723:32102,35724:26087,35725:29275,35726:21435,35727:23621,35728:24040,35729:25298,35730:25312,35731:25369,35732:28192,35733:34394,35734:35377,35735:36317,35736:37624,35737:28417,35738:31142,35739:39770,35740:20136,35741:20139,35742:20140,35743:20379,35744:20384,35745:20689,35746:20807,35747:31478,35748:20849,35749:20982,35750:21332,35751:21281,35752:21375,35753:21483,35754:21932,35755:22659,35756:23777,35757:24375,35758:24394,35759:24623,35760:24656,35761:24685,35762:25375,35763:25945,35764:27211,35765:27841,35766:29378,35767:29421,35768:30703,35769:33016,35770:33029,35771:33288,35772:34126,35773:37111,35774:37857,35775:38911,35776:39255,35777:39514,35778:20208,35779:20957,35780:23597,35781:26241,35782:26989,35783:23616,35784:26354,35785:26997,35786:29577,35787:26704,35788:31873,35789:20677,35790:21220,35791:22343,35792:24062,35793:37670,35794:26020,35795:27427,35796:27453,35797:29748,35798:31105,35799:31165,35800:31563,35801:32202,35802:33465,35803:33740,35804:34943,35805:35167,35806:35641,35807:36817,35808:37329,35809:21535,35810:37504,35811:20061,35812:20534,35813:21477,35814:21306,35815:29399,35816:29590,35817:30697,35818:33510,35819:36527,35820:39366,35821:39368,35822:39378,35823:20855,35824:24858,35825:34398,35826:21936,35827:31354,35828:20598,35829:23507,35830:36935,35831:38533,35832:20018,35833:27355,35834:37351,35835:23633,35836:23624,35904:25496,35905:31391,35906:27795,35907:38772,35908:36705,35909:31402,35910:29066,35911:38536,35912:31874,35913:26647,35914:32368,35915:26705,35916:37740,35917:21234,35918:21531,35919:34219,35920:35347,35921:32676,35922:36557,35923:37089,35924:21350,35925:34952,35926:31041,35927:20418,35928:20670,35929:21009,35930:20804,35931:21843,35932:22317,35933:29674,35934:22411,35935:22865,35936:24418,35937:24452,35938:24693,35939:24950,35940:24935,35941:25001,35942:25522,35943:25658,35944:25964,35945:26223,35946:26690,35947:28179,35948:30054,35949:31293,35950:31995,35951:32076,35952:32153,35953:32331,35954:32619,35955:33550,35956:33610,35957:34509,35958:35336,35959:35427,35960:35686,35961:36605,35962:38938,35963:40335,35964:33464,35965:36814,35966:39912,35968:21127,35969:25119,35970:25731,35971:28608,35972:38553,35973:26689,35974:20625,35975:27424,35976:27770,35977:28500,35978:31348,35979:32080,35980:34880,35981:35363,35982:26376,35983:20214,35984:20537,35985:20518,35986:20581,35987:20860,35988:21048,35989:21091,35990:21927,35991:22287,35992:22533,35993:23244,35994:24314,35995:25010,35996:25080,35997:25331,35998:25458,35999:26908,36e3:27177,36001:29309,36002:29356,36003:29486,36004:30740,36005:30831,36006:32121,36007:30476,36008:32937,36009:35211,36010:35609,36011:36066,36012:36562,36013:36963,36014:37749,36015:38522,36016:38997,36017:39443,36018:40568,36019:20803,36020:21407,36021:21427,36022:24187,36023:24358,36024:28187,36025:28304,36026:29572,36027:29694,36028:32067,36029:33335,36030:35328,36031:35578,36032:38480,36033:20046,36034:20491,36035:21476,36036:21628,36037:22266,36038:22993,36039:23396,36040:24049,36041:24235,36042:24359,36043:25144,36044:25925,36045:26543,36046:28246,36047:29392,36048:31946,36049:34996,36050:32929,36051:32993,36052:33776,36053:34382,36054:35463,36055:36328,36056:37431,36057:38599,36058:39015,36059:40723,36060:20116,36061:20114,36062:20237,36063:21320,36064:21577,36065:21566,36066:23087,36067:24460,36068:24481,36069:24735,36070:26791,36071:27278,36072:29786,36073:30849,36074:35486,36075:35492,36076:35703,36077:37264,36078:20062,36079:39881,36080:20132,36081:20348,36082:20399,36083:20505,36084:20502,36085:20809,36086:20844,36087:21151,36088:21177,36089:21246,36090:21402,36091:21475,36092:21521,36160:21518,36161:21897,36162:22353,36163:22434,36164:22909,36165:23380,36166:23389,36167:23439,36168:24037,36169:24039,36170:24055,36171:24184,36172:24195,36173:24218,36174:24247,36175:24344,36176:24658,36177:24908,36178:25239,36179:25304,36180:25511,36181:25915,36182:26114,36183:26179,36184:26356,36185:26477,36186:26657,36187:26775,36188:27083,36189:27743,36190:27946,36191:28009,36192:28207,36193:28317,36194:30002,36195:30343,36196:30828,36197:31295,36198:31968,36199:32005,36200:32024,36201:32094,36202:32177,36203:32789,36204:32771,36205:32943,36206:32945,36207:33108,36208:33167,36209:33322,36210:33618,36211:34892,36212:34913,36213:35611,36214:36002,36215:36092,36216:37066,36217:37237,36218:37489,36219:30783,36220:37628,36221:38308,36222:38477,36224:38917,36225:39321,36226:39640,36227:40251,36228:21083,36229:21163,36230:21495,36231:21512,36232:22741,36233:25335,36234:28640,36235:35946,36236:36703,36237:40633,36238:20811,36239:21051,36240:21578,36241:22269,36242:31296,36243:37239,36244:40288,36245:40658,36246:29508,36247:28425,36248:33136,36249:29969,36250:24573,36251:24794,36252:39592,36253:29403,36254:36796,36255:27492,36256:38915,36257:20170,36258:22256,36259:22372,36260:22718,36261:23130,36262:24680,36263:25031,36264:26127,36265:26118,36266:26681,36267:26801,36268:28151,36269:30165,36270:32058,36271:33390,36272:39746,36273:20123,36274:20304,36275:21449,36276:21766,36277:23919,36278:24038,36279:24046,36280:26619,36281:27801,36282:29811,36283:30722,36284:35408,36285:37782,36286:35039,36287:22352,36288:24231,36289:25387,36290:20661,36291:20652,36292:20877,36293:26368,36294:21705,36295:22622,36296:22971,36297:23472,36298:24425,36299:25165,36300:25505,36301:26685,36302:27507,36303:28168,36304:28797,36305:37319,36306:29312,36307:30741,36308:30758,36309:31085,36310:25998,36311:32048,36312:33756,36313:35009,36314:36617,36315:38555,36316:21092,36317:22312,36318:26448,36319:32618,36320:36001,36321:20916,36322:22338,36323:38442,36324:22586,36325:27018,36326:32948,36327:21682,36328:23822,36329:22524,36330:30869,36331:40442,36332:20316,36333:21066,36334:21643,36335:25662,36336:26152,36337:26388,36338:26613,36339:31364,36340:31574,36341:32034,36342:37679,36343:26716,36344:39853,36345:31545,36346:21273,36347:20874,36348:21047,36416:23519,36417:25334,36418:25774,36419:25830,36420:26413,36421:27578,36422:34217,36423:38609,36424:30352,36425:39894,36426:25420,36427:37638,36428:39851,36429:30399,36430:26194,36431:19977,36432:20632,36433:21442,36434:23665,36435:24808,36436:25746,36437:25955,36438:26719,36439:29158,36440:29642,36441:29987,36442:31639,36443:32386,36444:34453,36445:35715,36446:36059,36447:37240,36448:39184,36449:26028,36450:26283,36451:27531,36452:20181,36453:20180,36454:20282,36455:20351,36456:21050,36457:21496,36458:21490,36459:21987,36460:22235,36461:22763,36462:22987,36463:22985,36464:23039,36465:23376,36466:23629,36467:24066,36468:24107,36469:24535,36470:24605,36471:25351,36472:25903,36473:23388,36474:26031,36475:26045,36476:26088,36477:26525,36478:27490,36480:27515,36481:27663,36482:29509,36483:31049,36484:31169,36485:31992,36486:32025,36487:32043,36488:32930,36489:33026,36490:33267,36491:35222,36492:35422,36493:35433,36494:35430,36495:35468,36496:35566,36497:36039,36498:36060,36499:38604,36500:39164,36501:27503,36502:20107,36503:20284,36504:20365,36505:20816,36506:23383,36507:23546,36508:24904,36509:25345,36510:26178,36511:27425,36512:28363,36513:27835,36514:29246,36515:29885,36516:30164,36517:30913,36518:31034,36519:32780,36520:32819,36521:33258,36522:33940,36523:36766,36524:27728,36525:40575,36526:24335,36527:35672,36528:40235,36529:31482,36530:36600,36531:23437,36532:38635,36533:19971,36534:21489,36535:22519,36536:22833,36537:23241,36538:23460,36539:24713,36540:28287,36541:28422,36542:30142,36543:36074,36544:23455,36545:34048,36546:31712,36547:20594,36548:26612,36549:33437,36550:23649,36551:34122,36552:32286,36553:33294,36554:20889,36555:23556,36556:25448,36557:36198,36558:26012,36559:29038,36560:31038,36561:32023,36562:32773,36563:35613,36564:36554,36565:36974,36566:34503,36567:37034,36568:20511,36569:21242,36570:23610,36571:26451,36572:28796,36573:29237,36574:37196,36575:37320,36576:37675,36577:33509,36578:23490,36579:24369,36580:24825,36581:20027,36582:21462,36583:23432,36584:25163,36585:26417,36586:27530,36587:29417,36588:29664,36589:31278,36590:33131,36591:36259,36592:37202,36593:39318,36594:20754,36595:21463,36596:21610,36597:23551,36598:25480,36599:27193,36600:32172,36601:38656,36602:22234,36603:21454,36604:21608,36672:23447,36673:23601,36674:24030,36675:20462,36676:24833,36677:25342,36678:27954,36679:31168,36680:31179,36681:32066,36682:32333,36683:32722,36684:33261,36685:33311,36686:33936,36687:34886,36688:35186,36689:35728,36690:36468,36691:36655,36692:36913,36693:37195,36694:37228,36695:38598,36696:37276,36697:20160,36698:20303,36699:20805,36700:21313,36701:24467,36702:25102,36703:26580,36704:27713,36705:28171,36706:29539,36707:32294,36708:37325,36709:37507,36710:21460,36711:22809,36712:23487,36713:28113,36714:31069,36715:32302,36716:31899,36717:22654,36718:29087,36719:20986,36720:34899,36721:36848,36722:20426,36723:23803,36724:26149,36725:30636,36726:31459,36727:33308,36728:39423,36729:20934,36730:24490,36731:26092,36732:26991,36733:27529,36734:28147,36736:28310,36737:28516,36738:30462,36739:32020,36740:24033,36741:36981,36742:37255,36743:38918,36744:20966,36745:21021,36746:25152,36747:26257,36748:26329,36749:28186,36750:24246,36751:32210,36752:32626,36753:26360,36754:34223,36755:34295,36756:35576,36757:21161,36758:21465,36759:22899,36760:24207,36761:24464,36762:24661,36763:37604,36764:38500,36765:20663,36766:20767,36767:21213,36768:21280,36769:21319,36770:21484,36771:21736,36772:21830,36773:21809,36774:22039,36775:22888,36776:22974,36777:23100,36778:23477,36779:23558,36780:23567,36781:23569,36782:23578,36783:24196,36784:24202,36785:24288,36786:24432,36787:25215,36788:25220,36789:25307,36790:25484,36791:25463,36792:26119,36793:26124,36794:26157,36795:26230,36796:26494,36797:26786,36798:27167,36799:27189,36800:27836,36801:28040,36802:28169,36803:28248,36804:28988,36805:28966,36806:29031,36807:30151,36808:30465,36809:30813,36810:30977,36811:31077,36812:31216,36813:31456,36814:31505,36815:31911,36816:32057,36817:32918,36818:33750,36819:33931,36820:34121,36821:34909,36822:35059,36823:35359,36824:35388,36825:35412,36826:35443,36827:35937,36828:36062,36829:37284,36830:37478,36831:37758,36832:37912,36833:38556,36834:38808,36835:19978,36836:19976,36837:19998,36838:20055,36839:20887,36840:21104,36841:22478,36842:22580,36843:22732,36844:23330,36845:24120,36846:24773,36847:25854,36848:26465,36849:26454,36850:27972,36851:29366,36852:30067,36853:31331,36854:33976,36855:35698,36856:37304,36857:37664,36858:22065,36859:22516,36860:39166,36928:25325,36929:26893,36930:27542,36931:29165,36932:32340,36933:32887,36934:33394,36935:35302,36936:39135,36937:34645,36938:36785,36939:23611,36940:20280,36941:20449,36942:20405,36943:21767,36944:23072,36945:23517,36946:23529,36947:24515,36948:24910,36949:25391,36950:26032,36951:26187,36952:26862,36953:27035,36954:28024,36955:28145,36956:30003,36957:30137,36958:30495,36959:31070,36960:31206,36961:32051,36962:33251,36963:33455,36964:34218,36965:35242,36966:35386,36967:36523,36968:36763,36969:36914,36970:37341,36971:38663,36972:20154,36973:20161,36974:20995,36975:22645,36976:22764,36977:23563,36978:29978,36979:23613,36980:33102,36981:35338,36982:36805,36983:38499,36984:38765,36985:31525,36986:35535,36987:38920,36988:37218,36989:22259,36990:21416,36992:36887,36993:21561,36994:22402,36995:24101,36996:25512,36997:27700,36998:28810,36999:30561,37e3:31883,37001:32736,37002:34928,37003:36930,37004:37204,37005:37648,37006:37656,37007:38543,37008:29790,37009:39620,37010:23815,37011:23913,37012:25968,37013:26530,37014:36264,37015:38619,37016:25454,37017:26441,37018:26905,37019:33733,37020:38935,37021:38592,37022:35070,37023:28548,37024:25722,37025:23544,37026:19990,37027:28716,37028:30045,37029:26159,37030:20932,37031:21046,37032:21218,37033:22995,37034:24449,37035:24615,37036:25104,37037:25919,37038:25972,37039:26143,37040:26228,37041:26866,37042:26646,37043:27491,37044:28165,37045:29298,37046:29983,37047:30427,37048:31934,37049:32854,37050:22768,37051:35069,37052:35199,37053:35488,37054:35475,37055:35531,37056:36893,37057:37266,37058:38738,37059:38745,37060:25993,37061:31246,37062:33030,37063:38587,37064:24109,37065:24796,37066:25114,37067:26021,37068:26132,37069:26512,37070:30707,37071:31309,37072:31821,37073:32318,37074:33034,37075:36012,37076:36196,37077:36321,37078:36447,37079:30889,37080:20999,37081:25305,37082:25509,37083:25666,37084:25240,37085:35373,37086:31363,37087:31680,37088:35500,37089:38634,37090:32118,37091:33292,37092:34633,37093:20185,37094:20808,37095:21315,37096:21344,37097:23459,37098:23554,37099:23574,37100:24029,37101:25126,37102:25159,37103:25776,37104:26643,37105:26676,37106:27849,37107:27973,37108:27927,37109:26579,37110:28508,37111:29006,37112:29053,37113:26059,37114:31359,37115:31661,37116:32218,37184:32330,37185:32680,37186:33146,37187:33307,37188:33337,37189:34214,37190:35438,37191:36046,37192:36341,37193:36984,37194:36983,37195:37549,37196:37521,37197:38275,37198:39854,37199:21069,37200:21892,37201:28472,37202:28982,37203:20840,37204:31109,37205:32341,37206:33203,37207:31950,37208:22092,37209:22609,37210:23720,37211:25514,37212:26366,37213:26365,37214:26970,37215:29401,37216:30095,37217:30094,37218:30990,37219:31062,37220:31199,37221:31895,37222:32032,37223:32068,37224:34311,37225:35380,37226:38459,37227:36961,37228:40736,37229:20711,37230:21109,37231:21452,37232:21474,37233:20489,37234:21930,37235:22766,37236:22863,37237:29245,37238:23435,37239:23652,37240:21277,37241:24803,37242:24819,37243:25436,37244:25475,37245:25407,37246:25531,37248:25805,37249:26089,37250:26361,37251:24035,37252:27085,37253:27133,37254:28437,37255:29157,37256:20105,37257:30185,37258:30456,37259:31379,37260:31967,37261:32207,37262:32156,37263:32865,37264:33609,37265:33624,37266:33900,37267:33980,37268:34299,37269:35013,37270:36208,37271:36865,37272:36973,37273:37783,37274:38684,37275:39442,37276:20687,37277:22679,37278:24974,37279:33235,37280:34101,37281:36104,37282:36896,37283:20419,37284:20596,37285:21063,37286:21363,37287:24687,37288:25417,37289:26463,37290:28204,37291:36275,37292:36895,37293:20439,37294:23646,37295:36042,37296:26063,37297:32154,37298:21330,37299:34966,37300:20854,37301:25539,37302:23384,37303:23403,37304:23562,37305:25613,37306:26449,37307:36956,37308:20182,37309:22810,37310:22826,37311:27760,37312:35409,37313:21822,37314:22549,37315:22949,37316:24816,37317:25171,37318:26561,37319:33333,37320:26965,37321:38464,37322:39364,37323:39464,37324:20307,37325:22534,37326:23550,37327:32784,37328:23729,37329:24111,37330:24453,37331:24608,37332:24907,37333:25140,37334:26367,37335:27888,37336:28382,37337:32974,37338:33151,37339:33492,37340:34955,37341:36024,37342:36864,37343:36910,37344:38538,37345:40667,37346:39899,37347:20195,37348:21488,37349:22823,37350:31532,37351:37261,37352:38988,37353:40441,37354:28381,37355:28711,37356:21331,37357:21828,37358:23429,37359:25176,37360:25246,37361:25299,37362:27810,37363:28655,37364:29730,37365:35351,37366:37944,37367:28609,37368:35582,37369:33592,37370:20967,37371:34552,37372:21482,37440:21481,37441:20294,37442:36948,37443:36784,37444:22890,37445:33073,37446:24061,37447:31466,37448:36799,37449:26842,37450:35895,37451:29432,37452:40008,37453:27197,37454:35504,37455:20025,37456:21336,37457:22022,37458:22374,37459:25285,37460:25506,37461:26086,37462:27470,37463:28129,37464:28251,37465:28845,37466:30701,37467:31471,37468:31658,37469:32187,37470:32829,37471:32966,37472:34507,37473:35477,37474:37723,37475:22243,37476:22727,37477:24382,37478:26029,37479:26262,37480:27264,37481:27573,37482:30007,37483:35527,37484:20516,37485:30693,37486:22320,37487:24347,37488:24677,37489:26234,37490:27744,37491:30196,37492:31258,37493:32622,37494:33268,37495:34584,37496:36933,37497:39347,37498:31689,37499:30044,37500:31481,37501:31569,37502:33988,37504:36880,37505:31209,37506:31378,37507:33590,37508:23265,37509:30528,37510:20013,37511:20210,37512:23449,37513:24544,37514:25277,37515:26172,37516:26609,37517:27880,37518:34411,37519:34935,37520:35387,37521:37198,37522:37619,37523:39376,37524:27159,37525:28710,37526:29482,37527:33511,37528:33879,37529:36015,37530:19969,37531:20806,37532:20939,37533:21899,37534:23541,37535:24086,37536:24115,37537:24193,37538:24340,37539:24373,37540:24427,37541:24500,37542:25074,37543:25361,37544:26274,37545:26397,37546:28526,37547:29266,37548:30010,37549:30522,37550:32884,37551:33081,37552:33144,37553:34678,37554:35519,37555:35548,37556:36229,37557:36339,37558:37530,37559:38263,37560:38914,37561:40165,37562:21189,37563:25431,37564:30452,37565:26389,37566:27784,37567:29645,37568:36035,37569:37806,37570:38515,37571:27941,37572:22684,37573:26894,37574:27084,37575:36861,37576:37786,37577:30171,37578:36890,37579:22618,37580:26626,37581:25524,37582:27131,37583:20291,37584:28460,37585:26584,37586:36795,37587:34086,37588:32180,37589:37716,37590:26943,37591:28528,37592:22378,37593:22775,37594:23340,37595:32044,37596:29226,37597:21514,37598:37347,37599:40372,37600:20141,37601:20302,37602:20572,37603:20597,37604:21059,37605:35998,37606:21576,37607:22564,37608:23450,37609:24093,37610:24213,37611:24237,37612:24311,37613:24351,37614:24716,37615:25269,37616:25402,37617:25552,37618:26799,37619:27712,37620:30855,37621:31118,37622:31243,37623:32224,37624:33351,37625:35330,37626:35558,37627:36420,37628:36883,37696:37048,37697:37165,37698:37336,37699:40718,37700:27877,37701:25688,37702:25826,37703:25973,37704:28404,37705:30340,37706:31515,37707:36969,37708:37841,37709:28346,37710:21746,37711:24505,37712:25764,37713:36685,37714:36845,37715:37444,37716:20856,37717:22635,37718:22825,37719:23637,37720:24215,37721:28155,37722:32399,37723:29980,37724:36028,37725:36578,37726:39003,37727:28857,37728:20253,37729:27583,37730:28593,37731:3e4,37732:38651,37733:20814,37734:21520,37735:22581,37736:22615,37737:22956,37738:23648,37739:24466,37740:26007,37741:26460,37742:28193,37743:30331,37744:33759,37745:36077,37746:36884,37747:37117,37748:37709,37749:30757,37750:30778,37751:21162,37752:24230,37753:22303,37754:22900,37755:24594,37756:20498,37757:20826,37758:20908,37760:20941,37761:20992,37762:21776,37763:22612,37764:22616,37765:22871,37766:23445,37767:23798,37768:23947,37769:24764,37770:25237,37771:25645,37772:26481,37773:26691,37774:26812,37775:26847,37776:30423,37777:28120,37778:28271,37779:28059,37780:28783,37781:29128,37782:24403,37783:30168,37784:31095,37785:31561,37786:31572,37787:31570,37788:31958,37789:32113,37790:21040,37791:33891,37792:34153,37793:34276,37794:35342,37795:35588,37796:35910,37797:36367,37798:36867,37799:36879,37800:37913,37801:38518,37802:38957,37803:39472,37804:38360,37805:20685,37806:21205,37807:21516,37808:22530,37809:23566,37810:24999,37811:25758,37812:27934,37813:30643,37814:31461,37815:33012,37816:33796,37817:36947,37818:37509,37819:23776,37820:40199,37821:21311,37822:24471,37823:24499,37824:28060,37825:29305,37826:30563,37827:31167,37828:31716,37829:27602,37830:29420,37831:35501,37832:26627,37833:27233,37834:20984,37835:31361,37836:26932,37837:23626,37838:40182,37839:33515,37840:23493,37841:37193,37842:28702,37843:22136,37844:23663,37845:24775,37846:25958,37847:27788,37848:35930,37849:36929,37850:38931,37851:21585,37852:26311,37853:37389,37854:22856,37855:37027,37856:20869,37857:20045,37858:20970,37859:34201,37860:35598,37861:28760,37862:25466,37863:37707,37864:26978,37865:39348,37866:32260,37867:30071,37868:21335,37869:26976,37870:36575,37871:38627,37872:27741,37873:20108,37874:23612,37875:24336,37876:36841,37877:21250,37878:36049,37879:32905,37880:34425,37881:24319,37882:26085,37883:20083,37884:20837,37952:22914,37953:23615,37954:38894,37955:20219,37956:22922,37957:24525,37958:35469,37959:28641,37960:31152,37961:31074,37962:23527,37963:33905,37964:29483,37965:29105,37966:24180,37967:24565,37968:25467,37969:25754,37970:29123,37971:31896,37972:20035,37973:24316,37974:20043,37975:22492,37976:22178,37977:24745,37978:28611,37979:32013,37980:33021,37981:33075,37982:33215,37983:36786,37984:35223,37985:34468,37986:24052,37987:25226,37988:25773,37989:35207,37990:26487,37991:27874,37992:27966,37993:29750,37994:30772,37995:23110,37996:32629,37997:33453,37998:39340,37999:20467,38e3:24259,38001:25309,38002:25490,38003:25943,38004:26479,38005:30403,38006:29260,38007:32972,38008:32954,38009:36649,38010:37197,38011:20493,38012:22521,38013:23186,38014:26757,38016:26995,38017:29028,38018:29437,38019:36023,38020:22770,38021:36064,38022:38506,38023:36889,38024:34687,38025:31204,38026:30695,38027:33833,38028:20271,38029:21093,38030:21338,38031:25293,38032:26575,38033:27850,38034:30333,38035:31636,38036:31893,38037:33334,38038:34180,38039:36843,38040:26333,38041:28448,38042:29190,38043:32283,38044:33707,38045:39361,38046:40614,38047:20989,38048:31665,38049:30834,38050:31672,38051:32903,38052:31560,38053:27368,38054:24161,38055:32908,38056:30033,38057:30048,38058:20843,38059:37474,38060:28300,38061:30330,38062:37271,38063:39658,38064:20240,38065:32624,38066:25244,38067:31567,38068:38309,38069:40169,38070:22138,38071:22617,38072:34532,38073:38588,38074:20276,38075:21028,38076:21322,38077:21453,38078:21467,38079:24070,38080:25644,38081:26001,38082:26495,38083:27710,38084:27726,38085:29256,38086:29359,38087:29677,38088:30036,38089:32321,38090:33324,38091:34281,38092:36009,38093:31684,38094:37318,38095:29033,38096:38930,38097:39151,38098:25405,38099:26217,38100:30058,38101:30436,38102:30928,38103:34115,38104:34542,38105:21290,38106:21329,38107:21542,38108:22915,38109:24199,38110:24444,38111:24754,38112:25161,38113:25209,38114:25259,38115:26e3,38116:27604,38117:27852,38118:30130,38119:30382,38120:30865,38121:31192,38122:32203,38123:32631,38124:32933,38125:34987,38126:35513,38127:36027,38128:36991,38129:38750,38130:39131,38131:27147,38132:31800,38133:20633,38134:23614,38135:24494,38136:26503,38137:27608,38138:29749,38139:30473,38140:32654,38208:40763,38209:26570,38210:31255,38211:21305,38212:30091,38213:39661,38214:24422,38215:33181,38216:33777,38217:32920,38218:24380,38219:24517,38220:30050,38221:31558,38222:36924,38223:26727,38224:23019,38225:23195,38226:32016,38227:30334,38228:35628,38229:20469,38230:24426,38231:27161,38232:27703,38233:28418,38234:29922,38235:31080,38236:34920,38237:35413,38238:35961,38239:24287,38240:25551,38241:30149,38242:31186,38243:33495,38244:37672,38245:37618,38246:33948,38247:34541,38248:39981,38249:21697,38250:24428,38251:25996,38252:27996,38253:28693,38254:36007,38255:36051,38256:38971,38257:25935,38258:29942,38259:19981,38260:20184,38261:22496,38262:22827,38263:23142,38264:23500,38265:20904,38266:24067,38267:24220,38268:24598,38269:25206,38270:25975,38272:26023,38273:26222,38274:28014,38275:29238,38276:31526,38277:33104,38278:33178,38279:33433,38280:35676,38281:36e3,38282:36070,38283:36212,38284:38428,38285:38468,38286:20398,38287:25771,38288:27494,38289:33310,38290:33889,38291:34154,38292:37096,38293:23553,38294:26963,38295:39080,38296:33914,38297:34135,38298:20239,38299:21103,38300:24489,38301:24133,38302:26381,38303:31119,38304:33145,38305:35079,38306:35206,38307:28149,38308:24343,38309:25173,38310:27832,38311:20175,38312:29289,38313:39826,38314:20998,38315:21563,38316:22132,38317:22707,38318:24996,38319:25198,38320:28954,38321:22894,38322:31881,38323:31966,38324:32027,38325:38640,38326:25991,38327:32862,38328:19993,38329:20341,38330:20853,38331:22592,38332:24163,38333:24179,38334:24330,38335:26564,38336:20006,38337:34109,38338:38281,38339:38491,38340:31859,38341:38913,38342:20731,38343:22721,38344:30294,38345:30887,38346:21029,38347:30629,38348:34065,38349:31622,38350:20559,38351:22793,38352:29255,38353:31687,38354:32232,38355:36794,38356:36820,38357:36941,38358:20415,38359:21193,38360:23081,38361:24321,38362:38829,38363:20445,38364:33303,38365:37610,38366:22275,38367:25429,38368:27497,38369:29995,38370:35036,38371:36628,38372:31298,38373:21215,38374:22675,38375:24917,38376:25098,38377:26286,38378:27597,38379:31807,38380:33769,38381:20515,38382:20472,38383:21253,38384:21574,38385:22577,38386:22857,38387:23453,38388:23792,38389:23791,38390:23849,38391:24214,38392:25265,38393:25447,38394:25918,38395:26041,38396:26379,38464:27861,38465:27873,38466:28921,38467:30770,38468:32299,38469:32990,38470:33459,38471:33804,38472:34028,38473:34562,38474:35090,38475:35370,38476:35914,38477:37030,38478:37586,38479:39165,38480:40179,38481:40300,38482:20047,38483:20129,38484:20621,38485:21078,38486:22346,38487:22952,38488:24125,38489:24536,38490:24537,38491:25151,38492:26292,38493:26395,38494:26576,38495:26834,38496:20882,38497:32033,38498:32938,38499:33192,38500:35584,38501:35980,38502:36031,38503:37502,38504:38450,38505:21536,38506:38956,38507:21271,38508:20693,38509:21340,38510:22696,38511:25778,38512:26420,38513:29287,38514:30566,38515:31302,38516:37350,38517:21187,38518:27809,38519:27526,38520:22528,38521:24140,38522:22868,38523:26412,38524:32763,38525:20961,38526:30406,38528:25705,38529:30952,38530:39764,38531:40635,38532:22475,38533:22969,38534:26151,38535:26522,38536:27598,38537:21737,38538:27097,38539:24149,38540:33180,38541:26517,38542:39850,38543:26622,38544:40018,38545:26717,38546:20134,38547:20451,38548:21448,38549:25273,38550:26411,38551:27819,38552:36804,38553:20397,38554:32365,38555:40639,38556:19975,38557:24930,38558:28288,38559:28459,38560:34067,38561:21619,38562:26410,38563:39749,38564:24051,38565:31637,38566:23724,38567:23494,38568:34588,38569:28234,38570:34001,38571:31252,38572:33032,38573:22937,38574:31885,38575:27665,38576:30496,38577:21209,38578:22818,38579:28961,38580:29279,38581:30683,38582:38695,38583:40289,38584:26891,38585:23167,38586:23064,38587:20901,38588:21517,38589:21629,38590:26126,38591:30431,38592:36855,38593:37528,38594:40180,38595:23018,38596:29277,38597:28357,38598:20813,38599:26825,38600:32191,38601:32236,38602:38754,38603:40634,38604:25720,38605:27169,38606:33538,38607:22916,38608:23391,38609:27611,38610:29467,38611:30450,38612:32178,38613:32791,38614:33945,38615:20786,38616:26408,38617:40665,38618:30446,38619:26466,38620:21247,38621:39173,38622:23588,38623:25147,38624:31870,38625:36016,38626:21839,38627:24758,38628:32011,38629:38272,38630:21249,38631:20063,38632:20918,38633:22812,38634:29242,38635:32822,38636:37326,38637:24357,38638:30690,38639:21380,38640:24441,38641:32004,38642:34220,38643:35379,38644:36493,38645:38742,38646:26611,38647:34222,38648:37971,38649:24841,38650:24840,38651:27833,38652:30290,38720:35565,38721:36664,38722:21807,38723:20305,38724:20778,38725:21191,38726:21451,38727:23461,38728:24189,38729:24736,38730:24962,38731:25558,38732:26377,38733:26586,38734:28263,38735:28044,38736:29494,38737:29495,38738:30001,38739:31056,38740:35029,38741:35480,38742:36938,38743:37009,38744:37109,38745:38596,38746:34701,38747:22805,38748:20104,38749:20313,38750:19982,38751:35465,38752:36671,38753:38928,38754:20653,38755:24188,38756:22934,38757:23481,38758:24248,38759:25562,38760:25594,38761:25793,38762:26332,38763:26954,38764:27096,38765:27915,38766:28342,38767:29076,38768:29992,38769:31407,38770:32650,38771:32768,38772:33865,38773:33993,38774:35201,38775:35617,38776:36362,38777:36965,38778:38525,38779:39178,38780:24958,38781:25233,38782:27442,38784:27779,38785:28020,38786:32716,38787:32764,38788:28096,38789:32645,38790:34746,38791:35064,38792:26469,38793:33713,38794:38972,38795:38647,38796:27931,38797:32097,38798:33853,38799:37226,38800:20081,38801:21365,38802:23888,38803:27396,38804:28651,38805:34253,38806:34349,38807:35239,38808:21033,38809:21519,38810:23653,38811:26446,38812:26792,38813:29702,38814:29827,38815:30178,38816:35023,38817:35041,38818:37324,38819:38626,38820:38520,38821:24459,38822:29575,38823:31435,38824:33870,38825:25504,38826:30053,38827:21129,38828:27969,38829:28316,38830:29705,38831:30041,38832:30827,38833:31890,38834:38534,38835:31452,38836:40845,38837:20406,38838:24942,38839:26053,38840:34396,38841:20102,38842:20142,38843:20698,38844:20001,38845:20940,38846:23534,38847:26009,38848:26753,38849:28092,38850:29471,38851:30274,38852:30637,38853:31260,38854:31975,38855:33391,38856:35538,38857:36988,38858:37327,38859:38517,38860:38936,38861:21147,38862:32209,38863:20523,38864:21400,38865:26519,38866:28107,38867:29136,38868:29747,38869:33256,38870:36650,38871:38563,38872:40023,38873:40607,38874:29792,38875:22593,38876:28057,38877:32047,38878:39006,38879:20196,38880:20278,38881:20363,38882:20919,38883:21169,38884:23994,38885:24604,38886:29618,38887:31036,38888:33491,38889:37428,38890:38583,38891:38646,38892:38666,38893:40599,38894:40802,38895:26278,38896:27508,38897:21015,38898:21155,38899:28872,38900:35010,38901:24265,38902:24651,38903:24976,38904:28451,38905:29001,38906:31806,38907:32244,38908:32879,38976:34030,38977:36899,38978:37676,38979:21570,38980:39791,38981:27347,38982:28809,38983:36034,38984:36335,38985:38706,38986:21172,38987:23105,38988:24266,38989:24324,38990:26391,38991:27004,38992:27028,38993:28010,38994:28431,38995:29282,38996:29436,38997:31725,38998:32769,38999:32894,39e3:34635,39001:37070,39002:20845,39003:40595,39004:31108,39005:32907,39006:37682,39007:35542,39008:20525,39009:21644,39010:35441,39011:27498,39012:36036,39013:33031,39014:24785,39015:26528,39016:40434,39017:20121,39018:20120,39019:39952,39020:35435,39021:34241,39022:34152,39023:26880,39024:28286,39025:30871,39026:33109,39071:24332,39072:19984,39073:19989,39074:20010,39075:20017,39076:20022,39077:20028,39078:20031,39079:20034,39080:20054,39081:20056,39082:20098,39083:20101,39084:35947,39085:20106,39086:33298,39087:24333,39088:20110,39089:20126,39090:20127,39091:20128,39092:20130,39093:20144,39094:20147,39095:20150,39096:20174,39097:20173,39098:20164,39099:20166,39100:20162,39101:20183,39102:20190,39103:20205,39104:20191,39105:20215,39106:20233,39107:20314,39108:20272,39109:20315,39110:20317,39111:20311,39112:20295,39113:20342,39114:20360,39115:20367,39116:20376,39117:20347,39118:20329,39119:20336,39120:20369,39121:20335,39122:20358,39123:20374,39124:20760,39125:20436,39126:20447,39127:20430,39128:20440,39129:20443,39130:20433,39131:20442,39132:20432,39133:20452,39134:20453,39135:20506,39136:20520,39137:20500,39138:20522,39139:20517,39140:20485,39141:20252,39142:20470,39143:20513,39144:20521,39145:20524,39146:20478,39147:20463,39148:20497,39149:20486,39150:20547,39151:20551,39152:26371,39153:20565,39154:20560,39155:20552,39156:20570,39157:20566,39158:20588,39159:20600,39160:20608,39161:20634,39162:20613,39163:20660,39164:20658,39232:20681,39233:20682,39234:20659,39235:20674,39236:20694,39237:20702,39238:20709,39239:20717,39240:20707,39241:20718,39242:20729,39243:20725,39244:20745,39245:20737,39246:20738,39247:20758,39248:20757,39249:20756,39250:20762,39251:20769,39252:20794,39253:20791,39254:20796,39255:20795,39256:20799,39257:20800,39258:20818,39259:20812,39260:20820,39261:20834,39262:31480,39263:20841,39264:20842,39265:20846,39266:20864,39267:20866,39268:22232,39269:20876,39270:20873,39271:20879,39272:20881,39273:20883,39274:20885,39275:20886,39276:20900,39277:20902,39278:20898,39279:20905,39280:20906,39281:20907,39282:20915,39283:20913,39284:20914,39285:20912,39286:20917,39287:20925,39288:20933,39289:20937,39290:20955,39291:20960,39292:34389,39293:20969,39294:20973,39296:20976,39297:20981,39298:20990,39299:20996,39300:21003,39301:21012,39302:21006,39303:21031,39304:21034,39305:21038,39306:21043,39307:21049,39308:21071,39309:21060,39310:21067,39311:21068,39312:21086,39313:21076,39314:21098,39315:21108,39316:21097,39317:21107,39318:21119,39319:21117,39320:21133,39321:21140,39322:21138,39323:21105,39324:21128,39325:21137,39326:36776,39327:36775,39328:21164,39329:21165,39330:21180,39331:21173,39332:21185,39333:21197,39334:21207,39335:21214,39336:21219,39337:21222,39338:39149,39339:21216,39340:21235,39341:21237,39342:21240,39343:21241,39344:21254,39345:21256,39346:30008,39347:21261,39348:21264,39349:21263,39350:21269,39351:21274,39352:21283,39353:21295,39354:21297,39355:21299,39356:21304,39357:21312,39358:21318,39359:21317,39360:19991,39361:21321,39362:21325,39363:20950,39364:21342,39365:21353,39366:21358,39367:22808,39368:21371,39369:21367,39370:21378,39371:21398,39372:21408,39373:21414,39374:21413,39375:21422,39376:21424,39377:21430,39378:21443,39379:31762,39380:38617,39381:21471,39382:26364,39383:29166,39384:21486,39385:21480,39386:21485,39387:21498,39388:21505,39389:21565,39390:21568,39391:21548,39392:21549,39393:21564,39394:21550,39395:21558,39396:21545,39397:21533,39398:21582,39399:21647,39400:21621,39401:21646,39402:21599,39403:21617,39404:21623,39405:21616,39406:21650,39407:21627,39408:21632,39409:21622,39410:21636,39411:21648,39412:21638,39413:21703,39414:21666,39415:21688,39416:21669,39417:21676,39418:21700,39419:21704,39420:21672,39488:21675,39489:21698,39490:21668,39491:21694,39492:21692,39493:21720,39494:21733,39495:21734,39496:21775,39497:21780,39498:21757,39499:21742,39500:21741,39501:21754,39502:21730,39503:21817,39504:21824,39505:21859,39506:21836,39507:21806,39508:21852,39509:21829,39510:21846,39511:21847,39512:21816,39513:21811,39514:21853,39515:21913,39516:21888,39517:21679,39518:21898,39519:21919,39520:21883,39521:21886,39522:21912,39523:21918,39524:21934,39525:21884,39526:21891,39527:21929,39528:21895,39529:21928,39530:21978,39531:21957,39532:21983,39533:21956,39534:21980,39535:21988,39536:21972,39537:22036,39538:22007,39539:22038,39540:22014,39541:22013,39542:22043,39543:22009,39544:22094,39545:22096,39546:29151,39547:22068,39548:22070,39549:22066,39550:22072,39552:22123,39553:22116,39554:22063,39555:22124,39556:22122,39557:22150,39558:22144,39559:22154,39560:22176,39561:22164,39562:22159,39563:22181,39564:22190,39565:22198,39566:22196,39567:22210,39568:22204,39569:22209,39570:22211,39571:22208,39572:22216,39573:22222,39574:22225,39575:22227,39576:22231,39577:22254,39578:22265,39579:22272,39580:22271,39581:22276,39582:22281,39583:22280,39584:22283,39585:22285,39586:22291,39587:22296,39588:22294,39589:21959,39590:22300,39591:22310,39592:22327,39593:22328,39594:22350,39595:22331,39596:22336,39597:22351,39598:22377,39599:22464,39600:22408,39601:22369,39602:22399,39603:22409,39604:22419,39605:22432,39606:22451,39607:22436,39608:22442,39609:22448,39610:22467,39611:22470,39612:22484,39613:22482,39614:22483,39615:22538,39616:22486,39617:22499,39618:22539,39619:22553,39620:22557,39621:22642,39622:22561,39623:22626,39624:22603,39625:22640,39626:27584,39627:22610,39628:22589,39629:22649,39630:22661,39631:22713,39632:22687,39633:22699,39634:22714,39635:22750,39636:22715,39637:22712,39638:22702,39639:22725,39640:22739,39641:22737,39642:22743,39643:22745,39644:22744,39645:22757,39646:22748,39647:22756,39648:22751,39649:22767,39650:22778,39651:22777,39652:22779,39653:22780,39654:22781,39655:22786,39656:22794,39657:22800,39658:22811,39659:26790,39660:22821,39661:22828,39662:22829,39663:22834,39664:22840,39665:22846,39666:31442,39667:22869,39668:22864,39669:22862,39670:22874,39671:22872,39672:22882,39673:22880,39674:22887,39675:22892,39676:22889,39744:22904,39745:22913,39746:22941,39747:20318,39748:20395,39749:22947,39750:22962,39751:22982,39752:23016,39753:23004,39754:22925,39755:23001,39756:23002,39757:23077,39758:23071,39759:23057,39760:23068,39761:23049,39762:23066,39763:23104,39764:23148,39765:23113,39766:23093,39767:23094,39768:23138,39769:23146,39770:23194,39771:23228,39772:23230,39773:23243,39774:23234,39775:23229,39776:23267,39777:23255,39778:23270,39779:23273,39780:23254,39781:23290,39782:23291,39783:23308,39784:23307,39785:23318,39786:23346,39787:23248,39788:23338,39789:23350,39790:23358,39791:23363,39792:23365,39793:23360,39794:23377,39795:23381,39796:23386,39797:23387,39798:23397,39799:23401,39800:23408,39801:23411,39802:23413,39803:23416,39804:25992,39805:23418,39806:23424,39808:23427,39809:23462,39810:23480,39811:23491,39812:23495,39813:23497,39814:23508,39815:23504,39816:23524,39817:23526,39818:23522,39819:23518,39820:23525,39821:23531,39822:23536,39823:23542,39824:23539,39825:23557,39826:23559,39827:23560,39828:23565,39829:23571,39830:23584,39831:23586,39832:23592,39833:23608,39834:23609,39835:23617,39836:23622,39837:23630,39838:23635,39839:23632,39840:23631,39841:23409,39842:23660,39843:23662,39844:20066,39845:23670,39846:23673,39847:23692,39848:23697,39849:23700,39850:22939,39851:23723,39852:23739,39853:23734,39854:23740,39855:23735,39856:23749,39857:23742,39858:23751,39859:23769,39860:23785,39861:23805,39862:23802,39863:23789,39864:23948,39865:23786,39866:23819,39867:23829,39868:23831,39869:23900,39870:23839,39871:23835,39872:23825,39873:23828,39874:23842,39875:23834,39876:23833,39877:23832,39878:23884,39879:23890,39880:23886,39881:23883,39882:23916,39883:23923,39884:23926,39885:23943,39886:23940,39887:23938,39888:23970,39889:23965,39890:23980,39891:23982,39892:23997,39893:23952,39894:23991,39895:23996,39896:24009,39897:24013,39898:24019,39899:24018,39900:24022,39901:24027,39902:24043,39903:24050,39904:24053,39905:24075,39906:24090,39907:24089,39908:24081,39909:24091,39910:24118,39911:24119,39912:24132,39913:24131,39914:24128,39915:24142,39916:24151,39917:24148,39918:24159,39919:24162,39920:24164,39921:24135,39922:24181,39923:24182,39924:24186,39925:40636,39926:24191,39927:24224,39928:24257,39929:24258,39930:24264,39931:24272,39932:24271,4e4:24278,40001:24291,40002:24285,40003:24282,40004:24283,40005:24290,40006:24289,40007:24296,40008:24297,40009:24300,40010:24305,40011:24307,40012:24304,40013:24308,40014:24312,40015:24318,40016:24323,40017:24329,40018:24413,40019:24412,40020:24331,40021:24337,40022:24342,40023:24361,40024:24365,40025:24376,40026:24385,40027:24392,40028:24396,40029:24398,40030:24367,40031:24401,40032:24406,40033:24407,40034:24409,40035:24417,40036:24429,40037:24435,40038:24439,40039:24451,40040:24450,40041:24447,40042:24458,40043:24456,40044:24465,40045:24455,40046:24478,40047:24473,40048:24472,40049:24480,40050:24488,40051:24493,40052:24508,40053:24534,40054:24571,40055:24548,40056:24568,40057:24561,40058:24541,40059:24755,40060:24575,40061:24609,40062:24672,40064:24601,40065:24592,40066:24617,40067:24590,40068:24625,40069:24603,40070:24597,40071:24619,40072:24614,40073:24591,40074:24634,40075:24666,40076:24641,40077:24682,40078:24695,40079:24671,40080:24650,40081:24646,40082:24653,40083:24675,40084:24643,40085:24676,40086:24642,40087:24684,40088:24683,40089:24665,40090:24705,40091:24717,40092:24807,40093:24707,40094:24730,40095:24708,40096:24731,40097:24726,40098:24727,40099:24722,40100:24743,40101:24715,40102:24801,40103:24760,40104:24800,40105:24787,40106:24756,40107:24560,40108:24765,40109:24774,40110:24757,40111:24792,40112:24909,40113:24853,40114:24838,40115:24822,40116:24823,40117:24832,40118:24820,40119:24826,40120:24835,40121:24865,40122:24827,40123:24817,40124:24845,40125:24846,40126:24903,40127:24894,40128:24872,40129:24871,40130:24906,40131:24895,40132:24892,40133:24876,40134:24884,40135:24893,40136:24898,40137:24900,40138:24947,40139:24951,40140:24920,40141:24921,40142:24922,40143:24939,40144:24948,40145:24943,40146:24933,40147:24945,40148:24927,40149:24925,40150:24915,40151:24949,40152:24985,40153:24982,40154:24967,40155:25004,40156:24980,40157:24986,40158:24970,40159:24977,40160:25003,40161:25006,40162:25036,40163:25034,40164:25033,40165:25079,40166:25032,40167:25027,40168:25030,40169:25018,40170:25035,40171:32633,40172:25037,40173:25062,40174:25059,40175:25078,40176:25082,40177:25076,40178:25087,40179:25085,40180:25084,40181:25086,40182:25088,40183:25096,40184:25097,40185:25101,40186:25100,40187:25108,40188:25115,40256:25118,40257:25121,40258:25130,40259:25134,40260:25136,40261:25138,40262:25139,40263:25153,40264:25166,40265:25182,40266:25187,40267:25179,40268:25184,40269:25192,40270:25212,40271:25218,40272:25225,40273:25214,40274:25234,40275:25235,40276:25238,40277:25300,40278:25219,40279:25236,40280:25303,40281:25297,40282:25275,40283:25295,40284:25343,40285:25286,40286:25812,40287:25288,40288:25308,40289:25292,40290:25290,40291:25282,40292:25287,40293:25243,40294:25289,40295:25356,40296:25326,40297:25329,40298:25383,40299:25346,40300:25352,40301:25327,40302:25333,40303:25424,40304:25406,40305:25421,40306:25628,40307:25423,40308:25494,40309:25486,40310:25472,40311:25515,40312:25462,40313:25507,40314:25487,40315:25481,40316:25503,40317:25525,40318:25451,40320:25449,40321:25534,40322:25577,40323:25536,40324:25542,40325:25571,40326:25545,40327:25554,40328:25590,40329:25540,40330:25622,40331:25652,40332:25606,40333:25619,40334:25638,40335:25654,40336:25885,40337:25623,40338:25640,40339:25615,40340:25703,40341:25711,40342:25718,40343:25678,40344:25898,40345:25749,40346:25747,40347:25765,40348:25769,40349:25736,40350:25788,40351:25818,40352:25810,40353:25797,40354:25799,40355:25787,40356:25816,40357:25794,40358:25841,40359:25831,40360:33289,40361:25824,40362:25825,40363:25260,40364:25827,40365:25839,40366:25900,40367:25846,40368:25844,40369:25842,40370:25850,40371:25856,40372:25853,40373:25880,40374:25884,40375:25861,40376:25892,40377:25891,40378:25899,40379:25908,40380:25909,40381:25911,40382:25910,40383:25912,40384:30027,40385:25928,40386:25942,40387:25941,40388:25933,40389:25944,40390:25950,40391:25949,40392:25970,40393:25976,40394:25986,40395:25987,40396:35722,40397:26011,40398:26015,40399:26027,40400:26039,40401:26051,40402:26054,40403:26049,40404:26052,40405:26060,40406:26066,40407:26075,40408:26073,40409:26080,40410:26081,40411:26097,40412:26482,40413:26122,40414:26115,40415:26107,40416:26483,40417:26165,40418:26166,40419:26164,40420:26140,40421:26191,40422:26180,40423:26185,40424:26177,40425:26206,40426:26205,40427:26212,40428:26215,40429:26216,40430:26207,40431:26210,40432:26224,40433:26243,40434:26248,40435:26254,40436:26249,40437:26244,40438:26264,40439:26269,40440:26305,40441:26297,40442:26313,40443:26302,40444:26300,40512:26308,40513:26296,40514:26326,40515:26330,40516:26336,40517:26175,40518:26342,40519:26345,40520:26352,40521:26357,40522:26359,40523:26383,40524:26390,40525:26398,40526:26406,40527:26407,40528:38712,40529:26414,40530:26431,40531:26422,40532:26433,40533:26424,40534:26423,40535:26438,40536:26462,40537:26464,40538:26457,40539:26467,40540:26468,40541:26505,40542:26480,40543:26537,40544:26492,40545:26474,40546:26508,40547:26507,40548:26534,40549:26529,40550:26501,40551:26551,40552:26607,40553:26548,40554:26604,40555:26547,40556:26601,40557:26552,40558:26596,40559:26590,40560:26589,40561:26594,40562:26606,40563:26553,40564:26574,40565:26566,40566:26599,40567:27292,40568:26654,40569:26694,40570:26665,40571:26688,40572:26701,40573:26674,40574:26702,40576:26803,40577:26667,40578:26713,40579:26723,40580:26743,40581:26751,40582:26783,40583:26767,40584:26797,40585:26772,40586:26781,40587:26779,40588:26755,40589:27310,40590:26809,40591:26740,40592:26805,40593:26784,40594:26810,40595:26895,40596:26765,40597:26750,40598:26881,40599:26826,40600:26888,40601:26840,40602:26914,40603:26918,40604:26849,40605:26892,40606:26829,40607:26836,40608:26855,40609:26837,40610:26934,40611:26898,40612:26884,40613:26839,40614:26851,40615:26917,40616:26873,40617:26848,40618:26863,40619:26920,40620:26922,40621:26906,40622:26915,40623:26913,40624:26822,40625:27001,40626:26999,40627:26972,40628:27e3,40629:26987,40630:26964,40631:27006,40632:26990,40633:26937,40634:26996,40635:26941,40636:26969,40637:26928,40638:26977,40639:26974,40640:26973,40641:27009,40642:26986,40643:27058,40644:27054,40645:27088,40646:27071,40647:27073,40648:27091,40649:27070,40650:27086,40651:23528,40652:27082,40653:27101,40654:27067,40655:27075,40656:27047,40657:27182,40658:27025,40659:27040,40660:27036,40661:27029,40662:27060,40663:27102,40664:27112,40665:27138,40666:27163,40667:27135,40668:27402,40669:27129,40670:27122,40671:27111,40672:27141,40673:27057,40674:27166,40675:27117,40676:27156,40677:27115,40678:27146,40679:27154,40680:27329,40681:27171,40682:27155,40683:27204,40684:27148,40685:27250,40686:27190,40687:27256,40688:27207,40689:27234,40690:27225,40691:27238,40692:27208,40693:27192,40694:27170,40695:27280,40696:27277,40697:27296,40698:27268,40699:27298,40700:27299,40768:27287,40769:34327,40770:27323,40771:27331,40772:27330,40773:27320,40774:27315,40775:27308,40776:27358,40777:27345,40778:27359,40779:27306,40780:27354,40781:27370,40782:27387,40783:27397,40784:34326,40785:27386,40786:27410,40787:27414,40788:39729,40789:27423,40790:27448,40791:27447,40792:30428,40793:27449,40794:39150,40795:27463,40796:27459,40797:27465,40798:27472,40799:27481,40800:27476,40801:27483,40802:27487,40803:27489,40804:27512,40805:27513,40806:27519,40807:27520,40808:27524,40809:27523,40810:27533,40811:27544,40812:27541,40813:27550,40814:27556,40815:27562,40816:27563,40817:27567,40818:27570,40819:27569,40820:27571,40821:27575,40822:27580,40823:27590,40824:27595,40825:27603,40826:27615,40827:27628,40828:27627,40829:27635,40830:27631,40832:40638,40833:27656,40834:27667,40835:27668,40836:27675,40837:27684,40838:27683,40839:27742,40840:27733,40841:27746,40842:27754,40843:27778,40844:27789,40845:27802,40846:27777,40847:27803,40848:27774,40849:27752,40850:27763,40851:27794,40852:27792,40853:27844,40854:27889,40855:27859,40856:27837,40857:27863,40858:27845,40859:27869,40860:27822,40861:27825,40862:27838,40863:27834,40864:27867,40865:27887,40866:27865,40867:27882,40868:27935,40869:34893,40870:27958,40871:27947,40872:27965,40873:27960,40874:27929,40875:27957,40876:27955,40877:27922,40878:27916,40879:28003,40880:28051,40881:28004,40882:27994,40883:28025,40884:27993,40885:28046,40886:28053,40887:28644,40888:28037,40889:28153,40890:28181,40891:28170,40892:28085,40893:28103,40894:28134,40895:28088,40896:28102,40897:28140,40898:28126,40899:28108,40900:28136,40901:28114,40902:28101,40903:28154,40904:28121,40905:28132,40906:28117,40907:28138,40908:28142,40909:28205,40910:28270,40911:28206,40912:28185,40913:28274,40914:28255,40915:28222,40916:28195,40917:28267,40918:28203,40919:28278,40920:28237,40921:28191,40922:28227,40923:28218,40924:28238,40925:28196,40926:28415,40927:28189,40928:28216,40929:28290,40930:28330,40931:28312,40932:28361,40933:28343,40934:28371,40935:28349,40936:28335,40937:28356,40938:28338,40939:28372,40940:28373,40941:28303,40942:28325,40943:28354,40944:28319,40945:28481,40946:28433,40947:28748,40948:28396,40949:28408,40950:28414,40951:28479,40952:28402,40953:28465,40954:28399,40955:28466,40956:28364,57408:28478,57409:28435,57410:28407,57411:28550,57412:28538,57413:28536,57414:28545,57415:28544,57416:28527,57417:28507,57418:28659,57419:28525,57420:28546,57421:28540,57422:28504,57423:28558,57424:28561,57425:28610,57426:28518,57427:28595,57428:28579,57429:28577,57430:28580,57431:28601,57432:28614,57433:28586,57434:28639,57435:28629,57436:28652,57437:28628,57438:28632,57439:28657,57440:28654,57441:28635,57442:28681,57443:28683,57444:28666,57445:28689,57446:28673,57447:28687,57448:28670,57449:28699,57450:28698,57451:28532,57452:28701,57453:28696,57454:28703,57455:28720,57456:28734,57457:28722,57458:28753,57459:28771,57460:28825,57461:28818,57462:28847,57463:28913,57464:28844,57465:28856,57466:28851,57467:28846,57468:28895,57469:28875,57470:28893,57472:28889,57473:28937,57474:28925,57475:28956,57476:28953,57477:29029,57478:29013,57479:29064,57480:29030,57481:29026,57482:29004,57483:29014,57484:29036,57485:29071,57486:29179,57487:29060,57488:29077,57489:29096,57490:29100,57491:29143,57492:29113,57493:29118,57494:29138,57495:29129,57496:29140,57497:29134,57498:29152,57499:29164,57500:29159,57501:29173,57502:29180,57503:29177,57504:29183,57505:29197,57506:29200,57507:29211,57508:29224,57509:29229,57510:29228,57511:29232,57512:29234,57513:29243,57514:29244,57515:29247,57516:29248,57517:29254,57518:29259,57519:29272,57520:29300,57521:29310,57522:29314,57523:29313,57524:29319,57525:29330,57526:29334,57527:29346,57528:29351,57529:29369,57530:29362,57531:29379,57532:29382,57533:29380,57534:29390,57535:29394,57536:29410,57537:29408,57538:29409,57539:29433,57540:29431,57541:20495,57542:29463,57543:29450,57544:29468,57545:29462,57546:29469,57547:29492,57548:29487,57549:29481,57550:29477,57551:29502,57552:29518,57553:29519,57554:40664,57555:29527,57556:29546,57557:29544,57558:29552,57559:29560,57560:29557,57561:29563,57562:29562,57563:29640,57564:29619,57565:29646,57566:29627,57567:29632,57568:29669,57569:29678,57570:29662,57571:29858,57572:29701,57573:29807,57574:29733,57575:29688,57576:29746,57577:29754,57578:29781,57579:29759,57580:29791,57581:29785,57582:29761,57583:29788,57584:29801,57585:29808,57586:29795,57587:29802,57588:29814,57589:29822,57590:29835,57591:29854,57592:29863,57593:29898,57594:29903,57595:29908,57596:29681,57664:29920,57665:29923,57666:29927,57667:29929,57668:29934,57669:29938,57670:29936,57671:29937,57672:29944,57673:29943,57674:29956,57675:29955,57676:29957,57677:29964,57678:29966,57679:29965,57680:29973,57681:29971,57682:29982,57683:29990,57684:29996,57685:30012,57686:30020,57687:30029,57688:30026,57689:30025,57690:30043,57691:30022,57692:30042,57693:30057,57694:30052,57695:30055,57696:30059,57697:30061,57698:30072,57699:30070,57700:30086,57701:30087,57702:30068,57703:30090,57704:30089,57705:30082,57706:30100,57707:30106,57708:30109,57709:30117,57710:30115,57711:30146,57712:30131,57713:30147,57714:30133,57715:30141,57716:30136,57717:30140,57718:30129,57719:30157,57720:30154,57721:30162,57722:30169,57723:30179,57724:30174,57725:30206,57726:30207,57728:30204,57729:30209,57730:30192,57731:30202,57732:30194,57733:30195,57734:30219,57735:30221,57736:30217,57737:30239,57738:30247,57739:30240,57740:30241,57741:30242,57742:30244,57743:30260,57744:30256,57745:30267,57746:30279,57747:30280,57748:30278,57749:30300,57750:30296,57751:30305,57752:30306,57753:30312,57754:30313,57755:30314,57756:30311,57757:30316,57758:30320,57759:30322,57760:30326,57761:30328,57762:30332,57763:30336,57764:30339,57765:30344,57766:30347,57767:30350,57768:30358,57769:30355,57770:30361,57771:30362,57772:30384,57773:30388,57774:30392,57775:30393,57776:30394,57777:30402,57778:30413,57779:30422,57780:30418,57781:30430,57782:30433,57783:30437,57784:30439,57785:30442,57786:34351,57787:30459,57788:30472,57789:30471,57790:30468,57791:30505,57792:30500,57793:30494,57794:30501,57795:30502,57796:30491,57797:30519,57798:30520,57799:30535,57800:30554,57801:30568,57802:30571,57803:30555,57804:30565,57805:30591,57806:30590,57807:30585,57808:30606,57809:30603,57810:30609,57811:30624,57812:30622,57813:30640,57814:30646,57815:30649,57816:30655,57817:30652,57818:30653,57819:30651,57820:30663,57821:30669,57822:30679,57823:30682,57824:30684,57825:30691,57826:30702,57827:30716,57828:30732,57829:30738,57830:31014,57831:30752,57832:31018,57833:30789,57834:30862,57835:30836,57836:30854,57837:30844,57838:30874,57839:30860,57840:30883,57841:30901,57842:30890,57843:30895,57844:30929,57845:30918,57846:30923,57847:30932,57848:30910,57849:30908,57850:30917,57851:30922,57852:30956,57920:30951,57921:30938,57922:30973,57923:30964,57924:30983,57925:30994,57926:30993,57927:31001,57928:31020,57929:31019,57930:31040,57931:31072,57932:31063,57933:31071,57934:31066,57935:31061,57936:31059,57937:31098,57938:31103,57939:31114,57940:31133,57941:31143,57942:40779,57943:31146,57944:31150,57945:31155,57946:31161,57947:31162,57948:31177,57949:31189,57950:31207,57951:31212,57952:31201,57953:31203,57954:31240,57955:31245,57956:31256,57957:31257,57958:31264,57959:31263,57960:31104,57961:31281,57962:31291,57963:31294,57964:31287,57965:31299,57966:31319,57967:31305,57968:31329,57969:31330,57970:31337,57971:40861,57972:31344,57973:31353,57974:31357,57975:31368,57976:31383,57977:31381,57978:31384,57979:31382,57980:31401,57981:31432,57982:31408,57984:31414,57985:31429,57986:31428,57987:31423,57988:36995,57989:31431,57990:31434,57991:31437,57992:31439,57993:31445,57994:31443,57995:31449,57996:31450,57997:31453,57998:31457,57999:31458,58e3:31462,58001:31469,58002:31472,58003:31490,58004:31503,58005:31498,58006:31494,58007:31539,58008:31512,58009:31513,58010:31518,58011:31541,58012:31528,58013:31542,58014:31568,58015:31610,58016:31492,58017:31565,58018:31499,58019:31564,58020:31557,58021:31605,58022:31589,58023:31604,58024:31591,58025:31600,58026:31601,58027:31596,58028:31598,58029:31645,58030:31640,58031:31647,58032:31629,58033:31644,58034:31642,58035:31627,58036:31634,58037:31631,58038:31581,58039:31641,58040:31691,58041:31681,58042:31692,58043:31695,58044:31668,58045:31686,58046:31709,58047:31721,58048:31761,58049:31764,58050:31718,58051:31717,58052:31840,58053:31744,58054:31751,58055:31763,58056:31731,58057:31735,58058:31767,58059:31757,58060:31734,58061:31779,58062:31783,58063:31786,58064:31775,58065:31799,58066:31787,58067:31805,58068:31820,58069:31811,58070:31828,58071:31823,58072:31808,58073:31824,58074:31832,58075:31839,58076:31844,58077:31830,58078:31845,58079:31852,58080:31861,58081:31875,58082:31888,58083:31908,58084:31917,58085:31906,58086:31915,58087:31905,58088:31912,58089:31923,58090:31922,58091:31921,58092:31918,58093:31929,58094:31933,58095:31936,58096:31941,58097:31938,58098:31960,58099:31954,58100:31964,58101:31970,58102:39739,58103:31983,58104:31986,58105:31988,58106:31990,58107:31994,58108:32006,58176:32002,58177:32028,58178:32021,58179:32010,58180:32069,58181:32075,58182:32046,58183:32050,58184:32063,58185:32053,58186:32070,58187:32115,58188:32086,58189:32078,58190:32114,58191:32104,58192:32110,58193:32079,58194:32099,58195:32147,58196:32137,58197:32091,58198:32143,58199:32125,58200:32155,58201:32186,58202:32174,58203:32163,58204:32181,58205:32199,58206:32189,58207:32171,58208:32317,58209:32162,58210:32175,58211:32220,58212:32184,58213:32159,58214:32176,58215:32216,58216:32221,58217:32228,58218:32222,58219:32251,58220:32242,58221:32225,58222:32261,58223:32266,58224:32291,58225:32289,58226:32274,58227:32305,58228:32287,58229:32265,58230:32267,58231:32290,58232:32326,58233:32358,58234:32315,58235:32309,58236:32313,58237:32323,58238:32311,58240:32306,58241:32314,58242:32359,58243:32349,58244:32342,58245:32350,58246:32345,58247:32346,58248:32377,58249:32362,58250:32361,58251:32380,58252:32379,58253:32387,58254:32213,58255:32381,58256:36782,58257:32383,58258:32392,58259:32393,58260:32396,58261:32402,58262:32400,58263:32403,58264:32404,58265:32406,58266:32398,58267:32411,58268:32412,58269:32568,58270:32570,58271:32581,58272:32588,58273:32589,58274:32590,58275:32592,58276:32593,58277:32597,58278:32596,58279:32600,58280:32607,58281:32608,58282:32616,58283:32617,58284:32615,58285:32632,58286:32642,58287:32646,58288:32643,58289:32648,58290:32647,58291:32652,58292:32660,58293:32670,58294:32669,58295:32666,58296:32675,58297:32687,58298:32690,58299:32697,58300:32686,58301:32694,58302:32696,58303:35697,58304:32709,58305:32710,58306:32714,58307:32725,58308:32724,58309:32737,58310:32742,58311:32745,58312:32755,58313:32761,58314:39132,58315:32774,58316:32772,58317:32779,58318:32786,58319:32792,58320:32793,58321:32796,58322:32801,58323:32808,58324:32831,58325:32827,58326:32842,58327:32838,58328:32850,58329:32856,58330:32858,58331:32863,58332:32866,58333:32872,58334:32883,58335:32882,58336:32880,58337:32886,58338:32889,58339:32893,58340:32895,58341:32900,58342:32902,58343:32901,58344:32923,58345:32915,58346:32922,58347:32941,58348:20880,58349:32940,58350:32987,58351:32997,58352:32985,58353:32989,58354:32964,58355:32986,58356:32982,58357:33033,58358:33007,58359:33009,58360:33051,58361:33065,58362:33059,58363:33071,58364:33099,58432:38539,58433:33094,58434:33086,58435:33107,58436:33105,58437:33020,58438:33137,58439:33134,58440:33125,58441:33126,58442:33140,58443:33155,58444:33160,58445:33162,58446:33152,58447:33154,58448:33184,58449:33173,58450:33188,58451:33187,58452:33119,58453:33171,58454:33193,58455:33200,58456:33205,58457:33214,58458:33208,58459:33213,58460:33216,58461:33218,58462:33210,58463:33225,58464:33229,58465:33233,58466:33241,58467:33240,58468:33224,58469:33242,58470:33247,58471:33248,58472:33255,58473:33274,58474:33275,58475:33278,58476:33281,58477:33282,58478:33285,58479:33287,58480:33290,58481:33293,58482:33296,58483:33302,58484:33321,58485:33323,58486:33336,58487:33331,58488:33344,58489:33369,58490:33368,58491:33373,58492:33370,58493:33375,58494:33380,58496:33378,58497:33384,58498:33386,58499:33387,58500:33326,58501:33393,58502:33399,58503:33400,58504:33406,58505:33421,58506:33426,58507:33451,58508:33439,58509:33467,58510:33452,58511:33505,58512:33507,58513:33503,58514:33490,58515:33524,58516:33523,58517:33530,58518:33683,58519:33539,58520:33531,58521:33529,58522:33502,58523:33542,58524:33500,58525:33545,58526:33497,58527:33589,58528:33588,58529:33558,58530:33586,58531:33585,58532:33600,58533:33593,58534:33616,58535:33605,58536:33583,58537:33579,58538:33559,58539:33560,58540:33669,58541:33690,58542:33706,58543:33695,58544:33698,58545:33686,58546:33571,58547:33678,58548:33671,58549:33674,58550:33660,58551:33717,58552:33651,58553:33653,58554:33696,58555:33673,58556:33704,58557:33780,58558:33811,58559:33771,58560:33742,58561:33789,58562:33795,58563:33752,58564:33803,58565:33729,58566:33783,58567:33799,58568:33760,58569:33778,58570:33805,58571:33826,58572:33824,58573:33725,58574:33848,58575:34054,58576:33787,58577:33901,58578:33834,58579:33852,58580:34138,58581:33924,58582:33911,58583:33899,58584:33965,58585:33902,58586:33922,58587:33897,58588:33862,58589:33836,58590:33903,58591:33913,58592:33845,58593:33994,58594:33890,58595:33977,58596:33983,58597:33951,58598:34009,58599:33997,58600:33979,58601:34010,58602:34e3,58603:33985,58604:33990,58605:34006,58606:33953,58607:34081,58608:34047,58609:34036,58610:34071,58611:34072,58612:34092,58613:34079,58614:34069,58615:34068,58616:34044,58617:34112,58618:34147,58619:34136,58620:34120,58688:34113,58689:34306,58690:34123,58691:34133,58692:34176,58693:34212,58694:34184,58695:34193,58696:34186,58697:34216,58698:34157,58699:34196,58700:34203,58701:34282,58702:34183,58703:34204,58704:34167,58705:34174,58706:34192,58707:34249,58708:34234,58709:34255,58710:34233,58711:34256,58712:34261,58713:34269,58714:34277,58715:34268,58716:34297,58717:34314,58718:34323,58719:34315,58720:34302,58721:34298,58722:34310,58723:34338,58724:34330,58725:34352,58726:34367,58727:34381,58728:20053,58729:34388,58730:34399,58731:34407,58732:34417,58733:34451,58734:34467,58735:34473,58736:34474,58737:34443,58738:34444,58739:34486,58740:34479,58741:34500,58742:34502,58743:34480,58744:34505,58745:34851,58746:34475,58747:34516,58748:34526,58749:34537,58750:34540,58752:34527,58753:34523,58754:34543,58755:34578,58756:34566,58757:34568,58758:34560,58759:34563,58760:34555,58761:34577,58762:34569,58763:34573,58764:34553,58765:34570,58766:34612,58767:34623,58768:34615,58769:34619,58770:34597,58771:34601,58772:34586,58773:34656,58774:34655,58775:34680,58776:34636,58777:34638,58778:34676,58779:34647,58780:34664,58781:34670,58782:34649,58783:34643,58784:34659,58785:34666,58786:34821,58787:34722,58788:34719,58789:34690,58790:34735,58791:34763,58792:34749,58793:34752,58794:34768,58795:38614,58796:34731,58797:34756,58798:34739,58799:34759,58800:34758,58801:34747,58802:34799,58803:34802,58804:34784,58805:34831,58806:34829,58807:34814,58808:34806,58809:34807,58810:34830,58811:34770,58812:34833,58813:34838,58814:34837,58815:34850,58816:34849,58817:34865,58818:34870,58819:34873,58820:34855,58821:34875,58822:34884,58823:34882,58824:34898,58825:34905,58826:34910,58827:34914,58828:34923,58829:34945,58830:34942,58831:34974,58832:34933,58833:34941,58834:34997,58835:34930,58836:34946,58837:34967,58838:34962,58839:34990,58840:34969,58841:34978,58842:34957,58843:34980,58844:34992,58845:35007,58846:34993,58847:35011,58848:35012,58849:35028,58850:35032,58851:35033,58852:35037,58853:35065,58854:35074,58855:35068,58856:35060,58857:35048,58858:35058,58859:35076,58860:35084,58861:35082,58862:35091,58863:35139,58864:35102,58865:35109,58866:35114,58867:35115,58868:35137,58869:35140,58870:35131,58871:35126,58872:35128,58873:35148,58874:35101,58875:35168,58876:35166,58944:35174,58945:35172,58946:35181,58947:35178,58948:35183,58949:35188,58950:35191,58951:35198,58952:35203,58953:35208,58954:35210,58955:35219,58956:35224,58957:35233,58958:35241,58959:35238,58960:35244,58961:35247,58962:35250,58963:35258,58964:35261,58965:35263,58966:35264,58967:35290,58968:35292,58969:35293,58970:35303,58971:35316,58972:35320,58973:35331,58974:35350,58975:35344,58976:35340,58977:35355,58978:35357,58979:35365,58980:35382,58981:35393,58982:35419,58983:35410,58984:35398,58985:35400,58986:35452,58987:35437,58988:35436,58989:35426,58990:35461,58991:35458,58992:35460,58993:35496,58994:35489,58995:35473,58996:35493,58997:35494,58998:35482,58999:35491,59e3:35524,59001:35533,59002:35522,59003:35546,59004:35563,59005:35571,59006:35559,59008:35556,59009:35569,59010:35604,59011:35552,59012:35554,59013:35575,59014:35550,59015:35547,59016:35596,59017:35591,59018:35610,59019:35553,59020:35606,59021:35600,59022:35607,59023:35616,59024:35635,59025:38827,59026:35622,59027:35627,59028:35646,59029:35624,59030:35649,59031:35660,59032:35663,59033:35662,59034:35657,59035:35670,59036:35675,59037:35674,59038:35691,59039:35679,59040:35692,59041:35695,59042:35700,59043:35709,59044:35712,59045:35724,59046:35726,59047:35730,59048:35731,59049:35734,59050:35737,59051:35738,59052:35898,59053:35905,59054:35903,59055:35912,59056:35916,59057:35918,59058:35920,59059:35925,59060:35938,59061:35948,59062:35960,59063:35962,59064:35970,59065:35977,59066:35973,59067:35978,59068:35981,59069:35982,59070:35988,59071:35964,59072:35992,59073:25117,59074:36013,59075:36010,59076:36029,59077:36018,59078:36019,59079:36014,59080:36022,59081:36040,59082:36033,59083:36068,59084:36067,59085:36058,59086:36093,59087:36090,59088:36091,59089:36100,59090:36101,59091:36106,59092:36103,59093:36111,59094:36109,59095:36112,59096:40782,59097:36115,59098:36045,59099:36116,59100:36118,59101:36199,59102:36205,59103:36209,59104:36211,59105:36225,59106:36249,59107:36290,59108:36286,59109:36282,59110:36303,59111:36314,59112:36310,59113:36300,59114:36315,59115:36299,59116:36330,59117:36331,59118:36319,59119:36323,59120:36348,59121:36360,59122:36361,59123:36351,59124:36381,59125:36382,59126:36368,59127:36383,59128:36418,59129:36405,59130:36400,59131:36404,59132:36426,59200:36423,59201:36425,59202:36428,59203:36432,59204:36424,59205:36441,59206:36452,59207:36448,59208:36394,59209:36451,59210:36437,59211:36470,59212:36466,59213:36476,59214:36481,59215:36487,59216:36485,59217:36484,59218:36491,59219:36490,59220:36499,59221:36497,59222:36500,59223:36505,59224:36522,59225:36513,59226:36524,59227:36528,59228:36550,59229:36529,59230:36542,59231:36549,59232:36552,59233:36555,59234:36571,59235:36579,59236:36604,59237:36603,59238:36587,59239:36606,59240:36618,59241:36613,59242:36629,59243:36626,59244:36633,59245:36627,59246:36636,59247:36639,59248:36635,59249:36620,59250:36646,59251:36659,59252:36667,59253:36665,59254:36677,59255:36674,59256:36670,59257:36684,59258:36681,59259:36678,59260:36686,59261:36695,59262:36700,59264:36706,59265:36707,59266:36708,59267:36764,59268:36767,59269:36771,59270:36781,59271:36783,59272:36791,59273:36826,59274:36837,59275:36834,59276:36842,59277:36847,59278:36999,59279:36852,59280:36869,59281:36857,59282:36858,59283:36881,59284:36885,59285:36897,59286:36877,59287:36894,59288:36886,59289:36875,59290:36903,59291:36918,59292:36917,59293:36921,59294:36856,59295:36943,59296:36944,59297:36945,59298:36946,59299:36878,59300:36937,59301:36926,59302:36950,59303:36952,59304:36958,59305:36968,59306:36975,59307:36982,59308:38568,59309:36978,59310:36994,59311:36989,59312:36993,59313:36992,59314:37002,59315:37001,59316:37007,59317:37032,59318:37039,59319:37041,59320:37045,59321:37090,59322:37092,59323:25160,59324:37083,59325:37122,59326:37138,59327:37145,59328:37170,59329:37168,59330:37194,59331:37206,59332:37208,59333:37219,59334:37221,59335:37225,59336:37235,59337:37234,59338:37259,59339:37257,59340:37250,59341:37282,59342:37291,59343:37295,59344:37290,59345:37301,59346:37300,59347:37306,59348:37312,59349:37313,59350:37321,59351:37323,59352:37328,59353:37334,59354:37343,59355:37345,59356:37339,59357:37372,59358:37365,59359:37366,59360:37406,59361:37375,59362:37396,59363:37420,59364:37397,59365:37393,59366:37470,59367:37463,59368:37445,59369:37449,59370:37476,59371:37448,59372:37525,59373:37439,59374:37451,59375:37456,59376:37532,59377:37526,59378:37523,59379:37531,59380:37466,59381:37583,59382:37561,59383:37559,59384:37609,59385:37647,59386:37626,59387:37700,59388:37678,59456:37657,59457:37666,59458:37658,59459:37667,59460:37690,59461:37685,59462:37691,59463:37724,59464:37728,59465:37756,59466:37742,59467:37718,59468:37808,59469:37804,59470:37805,59471:37780,59472:37817,59473:37846,59474:37847,59475:37864,59476:37861,59477:37848,59478:37827,59479:37853,59480:37840,59481:37832,59482:37860,59483:37914,59484:37908,59485:37907,59486:37891,59487:37895,59488:37904,59489:37942,59490:37931,59491:37941,59492:37921,59493:37946,59494:37953,59495:37970,59496:37956,59497:37979,59498:37984,59499:37986,59500:37982,59501:37994,59502:37417,59503:38e3,59504:38005,59505:38007,59506:38013,59507:37978,59508:38012,59509:38014,59510:38017,59511:38015,59512:38274,59513:38279,59514:38282,59515:38292,59516:38294,59517:38296,59518:38297,59520:38304,59521:38312,59522:38311,59523:38317,59524:38332,59525:38331,59526:38329,59527:38334,59528:38346,59529:28662,59530:38339,59531:38349,59532:38348,59533:38357,59534:38356,59535:38358,59536:38364,59537:38369,59538:38373,59539:38370,59540:38433,59541:38440,59542:38446,59543:38447,59544:38466,59545:38476,59546:38479,59547:38475,59548:38519,59549:38492,59550:38494,59551:38493,59552:38495,59553:38502,59554:38514,59555:38508,59556:38541,59557:38552,59558:38549,59559:38551,59560:38570,59561:38567,59562:38577,59563:38578,59564:38576,59565:38580,59566:38582,59567:38584,59568:38585,59569:38606,59570:38603,59571:38601,59572:38605,59573:35149,59574:38620,59575:38669,59576:38613,59577:38649,59578:38660,59579:38662,59580:38664,59581:38675,59582:38670,59583:38673,59584:38671,59585:38678,59586:38681,59587:38692,59588:38698,59589:38704,59590:38713,59591:38717,59592:38718,59593:38724,59594:38726,59595:38728,59596:38722,59597:38729,59598:38748,59599:38752,59600:38756,59601:38758,59602:38760,59603:21202,59604:38763,59605:38769,59606:38777,59607:38789,59608:38780,59609:38785,59610:38778,59611:38790,59612:38795,59613:38799,59614:38800,59615:38812,59616:38824,59617:38822,59618:38819,59619:38835,59620:38836,59621:38851,59622:38854,59623:38856,59624:38859,59625:38876,59626:38893,59627:40783,59628:38898,59629:31455,59630:38902,59631:38901,59632:38927,59633:38924,59634:38968,59635:38948,59636:38945,59637:38967,59638:38973,59639:38982,59640:38991,59641:38987,59642:39019,59643:39023,59644:39024,59712:39025,59713:39028,59714:39027,59715:39082,59716:39087,59717:39089,59718:39094,59719:39108,59720:39107,59721:39110,59722:39145,59723:39147,59724:39171,59725:39177,59726:39186,59727:39188,59728:39192,59729:39201,59730:39197,59731:39198,59732:39204,59733:39200,59734:39212,59735:39214,59736:39229,59737:39230,59738:39234,59739:39241,59740:39237,59741:39248,59742:39243,59743:39249,59744:39250,59745:39244,59746:39253,59747:39319,59748:39320,59749:39333,59750:39341,59751:39342,59752:39356,59753:39391,59754:39387,59755:39389,59756:39384,59757:39377,59758:39405,59759:39406,59760:39409,59761:39410,59762:39419,59763:39416,59764:39425,59765:39439,59766:39429,59767:39394,59768:39449,59769:39467,59770:39479,59771:39493,59772:39490,59773:39488,59774:39491,59776:39486,59777:39509,59778:39501,59779:39515,59780:39511,59781:39519,59782:39522,59783:39525,59784:39524,59785:39529,59786:39531,59787:39530,59788:39597,59789:39600,59790:39612,59791:39616,59792:39631,59793:39633,59794:39635,59795:39636,59796:39646,59797:39647,59798:39650,59799:39651,59800:39654,59801:39663,59802:39659,59803:39662,59804:39668,59805:39665,59806:39671,59807:39675,59808:39686,59809:39704,59810:39706,59811:39711,59812:39714,59813:39715,59814:39717,59815:39719,59816:39720,59817:39721,59818:39722,59819:39726,59820:39727,59821:39730,59822:39748,59823:39747,59824:39759,59825:39757,59826:39758,59827:39761,59828:39768,59829:39796,59830:39827,59831:39811,59832:39825,59833:39830,59834:39831,59835:39839,59836:39840,59837:39848,59838:39860,59839:39872,59840:39882,59841:39865,59842:39878,59843:39887,59844:39889,59845:39890,59846:39907,59847:39906,59848:39908,59849:39892,59850:39905,59851:39994,59852:39922,59853:39921,59854:39920,59855:39957,59856:39956,59857:39945,59858:39955,59859:39948,59860:39942,59861:39944,59862:39954,59863:39946,59864:39940,59865:39982,59866:39963,59867:39973,59868:39972,59869:39969,59870:39984,59871:40007,59872:39986,59873:40006,59874:39998,59875:40026,59876:40032,59877:40039,59878:40054,59879:40056,59880:40167,59881:40172,59882:40176,59883:40201,59884:40200,59885:40171,59886:40195,59887:40198,59888:40234,59889:40230,59890:40367,59891:40227,59892:40223,59893:40260,59894:40213,59895:40210,59896:40257,59897:40255,59898:40254,59899:40262,59900:40264,59968:40285,59969:40286,59970:40292,59971:40273,59972:40272,59973:40281,59974:40306,59975:40329,59976:40327,59977:40363,59978:40303,59979:40314,59980:40346,59981:40356,59982:40361,59983:40370,59984:40388,59985:40385,59986:40379,59987:40376,59988:40378,59989:40390,59990:40399,59991:40386,59992:40409,59993:40403,59994:40440,59995:40422,59996:40429,59997:40431,59998:40445,59999:40474,6e4:40475,60001:40478,60002:40565,60003:40569,60004:40573,60005:40577,60006:40584,60007:40587,60008:40588,60009:40594,60010:40597,60011:40593,60012:40605,60013:40613,60014:40617,60015:40632,60016:40618,60017:40621,60018:38753,60019:40652,60020:40654,60021:40655,60022:40656,60023:40660,60024:40668,60025:40670,60026:40669,60027:40672,60028:40677,60029:40680,60030:40687,60032:40692,60033:40694,60034:40695,60035:40697,60036:40699,60037:40700,60038:40701,60039:40711,60040:40712,60041:30391,60042:40725,60043:40737,60044:40748,60045:40766,60046:40778,60047:40786,60048:40788,60049:40803,60050:40799,60051:40800,60052:40801,60053:40806,60054:40807,60055:40812,60056:40810,60057:40823,60058:40818,60059:40822,60060:40853,60061:40860,60062:40864,60063:22575,60064:27079,60065:36953,60066:29796,60067:20956,60068:29081,60736:32394,60737:35100,60738:37704,60739:37512,60740:34012,60741:20425,60742:28859,60743:26161,60744:26824,60745:37625,60746:26363,60747:24389,60748:20008,60749:20193,60750:20220,60751:20224,60752:20227,60753:20281,60754:20310,60755:20370,60756:20362,60757:20378,60758:20372,60759:20429,60760:20544,60761:20514,60762:20479,60763:20510,60764:20550,60765:20592,60766:20546,60767:20628,60768:20724,60769:20696,60770:20810,60771:20836,60772:20893,60773:20926,60774:20972,60775:21013,60776:21148,60777:21158,60778:21184,60779:21211,60780:21248,60781:21255,60782:21284,60783:21362,60784:21395,60785:21426,60786:21469,60787:64014,60788:21660,60789:21642,60790:21673,60791:21759,60792:21894,60793:22361,60794:22373,60795:22444,60796:22472,60797:22471,60798:64015,60800:64016,60801:22686,60802:22706,60803:22795,60804:22867,60805:22875,60806:22877,60807:22883,60808:22948,60809:22970,60810:23382,60811:23488,60812:29999,60813:23512,60814:23532,60815:23582,60816:23718,60817:23738,60818:23797,60819:23847,60820:23891,60821:64017,60822:23874,60823:23917,60824:23992,60825:23993,60826:24016,60827:24353,60828:24372,60829:24423,60830:24503,60831:24542,60832:24669,60833:24709,60834:24714,60835:24798,60836:24789,60837:24864,60838:24818,60839:24849,60840:24887,60841:24880,60842:24984,60843:25107,60844:25254,60845:25589,60846:25696,60847:25757,60848:25806,60849:25934,60850:26112,60851:26133,60852:26171,60853:26121,60854:26158,60855:26142,60856:26148,60857:26213,60858:26199,60859:26201,60860:64018,60861:26227,60862:26265,60863:26272,60864:26290,60865:26303,60866:26362,60867:26382,60868:63785,60869:26470,60870:26555,60871:26706,60872:26560,60873:26625,60874:26692,60875:26831,60876:64019,60877:26984,60878:64020,60879:27032,60880:27106,60881:27184,60882:27243,60883:27206,60884:27251,60885:27262,60886:27362,60887:27364,60888:27606,60889:27711,60890:27740,60891:27782,60892:27759,60893:27866,60894:27908,60895:28039,60896:28015,60897:28054,60898:28076,60899:28111,60900:28152,60901:28146,60902:28156,60903:28217,60904:28252,60905:28199,60906:28220,60907:28351,60908:28552,60909:28597,60910:28661,60911:28677,60912:28679,60913:28712,60914:28805,60915:28843,60916:28943,60917:28932,60918:29020,60919:28998,60920:28999,60921:64021,60922:29121,60923:29182,60924:29361,60992:29374,60993:29476,60994:64022,60995:29559,60996:29629,60997:29641,60998:29654,60999:29667,61e3:29650,61001:29703,61002:29685,61003:29734,61004:29738,61005:29737,61006:29742,61007:29794,61008:29833,61009:29855,61010:29953,61011:30063,61012:30338,61013:30364,61014:30366,61015:30363,61016:30374,61017:64023,61018:30534,61019:21167,61020:30753,61021:30798,61022:30820,61023:30842,61024:31024,61025:64024,61026:64025,61027:64026,61028:31124,61029:64027,61030:31131,61031:31441,61032:31463,61033:64028,61034:31467,61035:31646,61036:64029,61037:32072,61038:32092,61039:32183,61040:32160,61041:32214,61042:32338,61043:32583,61044:32673,61045:64030,61046:33537,61047:33634,61048:33663,61049:33735,61050:33782,61051:33864,61052:33972,61053:34131,61054:34137,61056:34155,61057:64031,61058:34224,61059:64032,61060:64033,61061:34823,61062:35061,61063:35346,61064:35383,61065:35449,61066:35495,61067:35518,61068:35551,61069:64034,61070:35574,61071:35667,61072:35711,61073:36080,61074:36084,61075:36114,61076:36214,61077:64035,61078:36559,61079:64036,61080:64037,61081:36967,61082:37086,61083:64038,61084:37141,61085:37159,61086:37338,61087:37335,61088:37342,61089:37357,61090:37358,61091:37348,61092:37349,61093:37382,61094:37392,61095:37386,61096:37434,61097:37440,61098:37436,61099:37454,61100:37465,61101:37457,61102:37433,61103:37479,61104:37543,61105:37495,61106:37496,61107:37607,61108:37591,61109:37593,61110:37584,61111:64039,61112:37589,61113:37600,61114:37587,61115:37669,61116:37665,61117:37627,61118:64040,61119:37662,61120:37631,61121:37661,61122:37634,61123:37744,61124:37719,61125:37796,61126:37830,61127:37854,61128:37880,61129:37937,61130:37957,61131:37960,61132:38290,61133:63964,61134:64041,61135:38557,61136:38575,61137:38707,61138:38715,61139:38723,61140:38733,61141:38735,61142:38737,61143:38741,61144:38999,61145:39013,61146:64042,61147:64043,61148:39207,61149:64044,61150:39326,61151:39502,61152:39641,61153:39644,61154:39797,61155:39794,61156:39823,61157:39857,61158:39867,61159:39936,61160:40304,61161:40299,61162:64045,61163:40473,61164:40657,61167:8560,61168:8561,61169:8562,61170:8563,61171:8564,61172:8565,61173:8566,61174:8567,61175:8568,61176:8569,61177:65506,61178:65508,61179:65287,61180:65282,61504:57344,61505:57345,61506:57346,61507:57347,61508:57348,61509:57349,61510:57350,61511:57351,61512:57352,61513:57353,61514:57354,61515:57355,61516:57356,61517:57357,61518:57358,61519:57359,61520:57360,61521:57361,61522:57362,61523:57363,61524:57364,61525:57365,61526:57366,61527:57367,61528:57368,61529:57369,61530:57370,61531:57371,61532:57372,61533:57373,61534:57374,61535:57375,61536:57376,61537:57377,61538:57378,61539:57379,61540:57380,61541:57381,61542:57382,61543:57383,61544:57384,61545:57385,61546:57386,61547:57387,61548:57388,61549:57389,61550:57390,61551:57391,61552:57392,61553:57393,61554:57394,61555:57395,61556:57396,61557:57397,61558:57398,61559:57399,61560:57400,61561:57401,61562:57402,61563:57403,61564:57404,61565:57405,61566:57406,61568:57407,61569:57408,61570:57409,61571:57410,61572:57411,61573:57412,61574:57413,61575:57414,61576:57415,61577:57416,61578:57417,61579:57418,61580:57419,61581:57420,61582:57421,61583:57422,61584:57423,61585:57424,61586:57425,61587:57426,61588:57427,61589:57428,61590:57429,61591:57430,61592:57431,61593:57432,61594:57433,61595:57434,61596:57435,61597:57436,61598:57437,61599:57438,61600:57439,61601:57440,61602:57441,61603:57442,61604:57443,61605:57444,61606:57445,61607:57446,61608:57447,61609:57448,61610:57449,61611:57450,61612:57451,61613:57452,61614:57453,61615:57454,61616:57455,61617:57456,61618:57457,61619:57458,61620:57459,61621:57460,61622:57461,61623:57462,61624:57463,61625:57464,61626:57465,61627:57466,61628:57467,61629:57468,61630:57469,61631:57470,61632:57471,61633:57472,61634:57473,61635:57474,61636:57475,61637:57476,61638:57477,61639:57478,61640:57479,61641:57480,61642:57481,61643:57482,61644:57483,61645:57484,61646:57485,61647:57486,61648:57487,61649:57488,61650:57489,61651:57490,61652:57491,61653:57492,61654:57493,61655:57494,61656:57495,61657:57496,61658:57497,61659:57498,61660:57499,61661:57500,61662:57501,61663:57502,61664:57503,61665:57504,61666:57505,61667:57506,61668:57507,61669:57508,61670:57509,61671:57510,61672:57511,61673:57512,61674:57513,61675:57514,61676:57515,61677:57516,61678:57517,61679:57518,61680:57519,61681:57520,61682:57521,61683:57522,61684:57523,61685:57524,61686:57525,61687:57526,61688:57527,61689:57528,61690:57529,61691:57530,61692:57531,61760:57532,61761:57533,61762:57534,61763:57535,61764:57536,61765:57537,61766:57538,61767:57539,61768:57540,61769:57541,61770:57542,61771:57543,61772:57544,61773:57545,61774:57546,61775:57547,61776:57548,61777:57549,61778:57550,61779:57551,61780:57552,61781:57553,61782:57554,61783:57555,61784:57556,61785:57557,61786:57558,61787:57559,61788:57560,61789:57561,61790:57562,61791:57563,61792:57564,61793:57565,61794:57566,61795:57567,61796:57568,61797:57569,61798:57570,61799:57571,61800:57572,61801:57573,61802:57574,61803:57575,61804:57576,61805:57577,61806:57578,61807:57579,61808:57580,61809:57581,61810:57582,61811:57583,61812:57584,61813:57585,61814:57586,61815:57587,61816:57588,61817:57589,61818:57590,61819:57591,61820:57592,61821:57593,61822:57594,61824:57595,61825:57596,61826:57597,61827:57598,61828:57599,61829:57600,61830:57601,61831:57602,61832:57603,61833:57604,61834:57605,61835:57606,61836:57607,61837:57608,61838:57609,61839:57610,61840:57611,61841:57612,61842:57613,61843:57614,61844:57615,61845:57616,61846:57617,61847:57618,61848:57619,61849:57620,61850:57621,61851:57622,61852:57623,61853:57624,61854:57625,61855:57626,61856:57627,61857:57628,61858:57629,61859:57630,61860:57631,61861:57632,61862:57633,61863:57634,61864:57635,61865:57636,61866:57637,61867:57638,61868:57639,61869:57640,61870:57641,61871:57642,61872:57643,61873:57644,61874:57645,61875:57646,61876:57647,61877:57648,61878:57649,61879:57650,61880:57651,61881:57652,61882:57653,61883:57654,61884:57655,61885:57656,61886:57657,61887:57658,61888:57659,61889:57660,61890:57661,61891:57662,61892:57663,61893:57664,61894:57665,61895:57666,61896:57667,61897:57668,61898:57669,61899:57670,61900:57671,61901:57672,61902:57673,61903:57674,61904:57675,61905:57676,61906:57677,61907:57678,61908:57679,61909:57680,61910:57681,61911:57682,61912:57683,61913:57684,61914:57685,61915:57686,61916:57687,61917:57688,61918:57689,61919:57690,61920:57691,61921:57692,61922:57693,61923:57694,61924:57695,61925:57696,61926:57697,61927:57698,61928:57699,61929:57700,61930:57701,61931:57702,61932:57703,61933:57704,61934:57705,61935:57706,61936:57707,61937:57708,61938:57709,61939:57710,61940:57711,61941:57712,61942:57713,61943:57714,61944:57715,61945:57716,61946:57717,61947:57718,61948:57719,62016:57720,62017:57721,62018:57722,62019:57723,62020:57724,62021:57725,62022:57726,62023:57727,62024:57728,62025:57729,62026:57730,62027:57731,62028:57732,62029:57733,62030:57734,62031:57735,62032:57736,62033:57737,62034:57738,62035:57739,62036:57740,62037:57741,62038:57742,62039:57743,62040:57744,62041:57745,62042:57746,62043:57747,62044:57748,62045:57749,62046:57750,62047:57751,62048:57752,62049:57753,62050:57754,62051:57755,62052:57756,62053:57757,62054:57758,62055:57759,62056:57760,62057:57761,62058:57762,62059:57763,62060:57764,62061:57765,62062:57766,62063:57767,62064:57768,62065:57769,62066:57770,62067:57771,62068:57772,62069:57773,62070:57774,62071:57775,62072:57776,62073:57777,62074:57778,62075:57779,62076:57780,62077:57781,62078:57782,62080:57783,62081:57784,62082:57785,62083:57786,62084:57787,62085:57788,62086:57789,62087:57790,62088:57791,62089:57792,62090:57793,62091:57794,62092:57795,62093:57796,62094:57797,62095:57798,62096:57799,62097:57800,62098:57801,62099:57802,62100:57803,62101:57804,62102:57805,62103:57806,62104:57807,62105:57808,62106:57809,62107:57810,62108:57811,62109:57812,62110:57813,62111:57814,62112:57815,62113:57816,62114:57817,62115:57818,62116:57819,62117:57820,62118:57821,62119:57822,62120:57823,62121:57824,62122:57825,62123:57826,62124:57827,62125:57828,62126:57829,62127:57830,62128:57831,62129:57832,62130:57833,62131:57834,62132:57835,62133:57836,62134:57837,62135:57838,62136:57839,62137:57840,62138:57841,62139:57842,62140:57843,62141:57844,62142:57845,62143:57846,62144:57847,62145:57848,62146:57849,62147:57850,62148:57851,62149:57852,62150:57853,62151:57854,62152:57855,62153:57856,62154:57857,62155:57858,62156:57859,62157:57860,62158:57861,62159:57862,62160:57863,62161:57864,62162:57865,62163:57866,62164:57867,62165:57868,62166:57869,62167:57870,62168:57871,62169:57872,62170:57873,62171:57874,62172:57875,62173:57876,62174:57877,62175:57878,62176:57879,62177:57880,62178:57881,62179:57882,62180:57883,62181:57884,62182:57885,62183:57886,62184:57887,62185:57888,62186:57889,62187:57890,62188:57891,62189:57892,62190:57893,62191:57894,62192:57895,62193:57896,62194:57897,62195:57898,62196:57899,62197:57900,62198:57901,62199:57902,62200:57903,62201:57904,62202:57905,62203:57906,62204:57907,62272:57908,62273:57909,62274:57910,62275:57911,62276:57912,62277:57913,62278:57914,62279:57915,62280:57916,62281:57917,62282:57918,62283:57919,62284:57920,62285:57921,62286:57922,62287:57923,62288:57924,62289:57925,62290:57926,62291:57927,62292:57928,62293:57929,62294:57930,62295:57931,62296:57932,62297:57933,62298:57934,62299:57935,62300:57936,62301:57937,62302:57938,62303:57939,62304:57940,62305:57941,62306:57942,62307:57943,62308:57944,62309:57945,62310:57946,62311:57947,62312:57948,62313:57949,62314:57950,62315:57951,62316:57952,62317:57953,62318:57954,62319:57955,62320:57956,62321:57957,62322:57958,62323:57959,62324:57960,62325:57961,62326:57962,62327:57963,62328:57964,62329:57965,62330:57966,62331:57967,62332:57968,62333:57969,62334:57970,62336:57971,62337:57972,62338:57973,62339:57974,62340:57975,62341:57976,62342:57977,62343:57978,62344:57979,62345:57980,62346:57981,62347:57982,62348:57983,62349:57984,62350:57985,62351:57986,62352:57987,62353:57988,62354:57989,62355:57990,62356:57991,62357:57992,62358:57993,62359:57994,62360:57995,62361:57996,62362:57997,62363:57998,62364:57999,62365:58e3,62366:58001,62367:58002,62368:58003,62369:58004,62370:58005,62371:58006,62372:58007,62373:58008,62374:58009,62375:58010,62376:58011,62377:58012,62378:58013,62379:58014,62380:58015,62381:58016,62382:58017,62383:58018,62384:58019,62385:58020,62386:58021,62387:58022,62388:58023,62389:58024,62390:58025,62391:58026,62392:58027,62393:58028,62394:58029,62395:58030,62396:58031,62397:58032,62398:58033,62399:58034,62400:58035,62401:58036,62402:58037,62403:58038,62404:58039,62405:58040,62406:58041,62407:58042,62408:58043,62409:58044,62410:58045,62411:58046,62412:58047,62413:58048,62414:58049,62415:58050,62416:58051,62417:58052,62418:58053,62419:58054,62420:58055,62421:58056,62422:58057,62423:58058,62424:58059,62425:58060,62426:58061,62427:58062,62428:58063,62429:58064,62430:58065,62431:58066,62432:58067,62433:58068,62434:58069,62435:58070,62436:58071,62437:58072,62438:58073,62439:58074,62440:58075,62441:58076,62442:58077,62443:58078,62444:58079,62445:58080,62446:58081,62447:58082,62448:58083,62449:58084,62450:58085,62451:58086,62452:58087,62453:58088,62454:58089,62455:58090,62456:58091,62457:58092,62458:58093,62459:58094,62460:58095,62528:58096,62529:58097,62530:58098,62531:58099,62532:58100,62533:58101,62534:58102,62535:58103,62536:58104,62537:58105,62538:58106,62539:58107,62540:58108,62541:58109,62542:58110,62543:58111,62544:58112,62545:58113,62546:58114,62547:58115,62548:58116,62549:58117,62550:58118,62551:58119,62552:58120,62553:58121,62554:58122,62555:58123,62556:58124,62557:58125,62558:58126,62559:58127,62560:58128,62561:58129,62562:58130,62563:58131,62564:58132,62565:58133,62566:58134,62567:58135,62568:58136,62569:58137,62570:58138,62571:58139,62572:58140,62573:58141,62574:58142,62575:58143,62576:58144,62577:58145,62578:58146,62579:58147,62580:58148,62581:58149,62582:58150,62583:58151,62584:58152,62585:58153,62586:58154,62587:58155,62588:58156,62589:58157,62590:58158,62592:58159,62593:58160,62594:58161,62595:58162,62596:58163,62597:58164,62598:58165,62599:58166,62600:58167,62601:58168,62602:58169,62603:58170,62604:58171,62605:58172,62606:58173,62607:58174,62608:58175,62609:58176,62610:58177,62611:58178,62612:58179,62613:58180,62614:58181,62615:58182,62616:58183,62617:58184,62618:58185,62619:58186,62620:58187,62621:58188,62622:58189,62623:58190,62624:58191,62625:58192,62626:58193,62627:58194,62628:58195,62629:58196,62630:58197,62631:58198,62632:58199,62633:58200,62634:58201,62635:58202,62636:58203,62637:58204,62638:58205,62639:58206,62640:58207,62641:58208,62642:58209,62643:58210,62644:58211,62645:58212,62646:58213,62647:58214,62648:58215,62649:58216,62650:58217,62651:58218,62652:58219,62653:58220,62654:58221,62655:58222,62656:58223,62657:58224,62658:58225,62659:58226,62660:58227,62661:58228,62662:58229,62663:58230,62664:58231,62665:58232,62666:58233,62667:58234,62668:58235,62669:58236,62670:58237,62671:58238,62672:58239,62673:58240,62674:58241,62675:58242,62676:58243,62677:58244,62678:58245,62679:58246,62680:58247,62681:58248,62682:58249,62683:58250,62684:58251,62685:58252,62686:58253,62687:58254,62688:58255,62689:58256,62690:58257,62691:58258,62692:58259,62693:58260,62694:58261,62695:58262,62696:58263,62697:58264,62698:58265,62699:58266,62700:58267,62701:58268,62702:58269,62703:58270,62704:58271,62705:58272,62706:58273,62707:58274,62708:58275,62709:58276,62710:58277,62711:58278,62712:58279,62713:58280,62714:58281,62715:58282,62716:58283,62784:58284,62785:58285,62786:58286,62787:58287,62788:58288,62789:58289,62790:58290,62791:58291,62792:58292,62793:58293,62794:58294,62795:58295,62796:58296,62797:58297,62798:58298,62799:58299,62800:58300,62801:58301,62802:58302,62803:58303,62804:58304,62805:58305,62806:58306,62807:58307,62808:58308,62809:58309,62810:58310,62811:58311,62812:58312,62813:58313,62814:58314,62815:58315,62816:58316,62817:58317,62818:58318,62819:58319,62820:58320,62821:58321,62822:58322,62823:58323,62824:58324,62825:58325,62826:58326,62827:58327,62828:58328,62829:58329,62830:58330,62831:58331,62832:58332,62833:58333,62834:58334,62835:58335,62836:58336,62837:58337,62838:58338,62839:58339,62840:58340,62841:58341,62842:58342,62843:58343,62844:58344,62845:58345,62846:58346,62848:58347,62849:58348,62850:58349,62851:58350,62852:58351,62853:58352,62854:58353,62855:58354,62856:58355,62857:58356,62858:58357,62859:58358,62860:58359,62861:58360,62862:58361,62863:58362,62864:58363,62865:58364,62866:58365,62867:58366,62868:58367,62869:58368,62870:58369,62871:58370,62872:58371,62873:58372,62874:58373,62875:58374,62876:58375,62877:58376,62878:58377,62879:58378,62880:58379,62881:58380,62882:58381,62883:58382,62884:58383,62885:58384,62886:58385,62887:58386,62888:58387,62889:58388,62890:58389,62891:58390,62892:58391,62893:58392,62894:58393,62895:58394,62896:58395,62897:58396,62898:58397,62899:58398,62900:58399,62901:58400,62902:58401,62903:58402,62904:58403,62905:58404,62906:58405,62907:58406,62908:58407,62909:58408,62910:58409,62911:58410,62912:58411,62913:58412,62914:58413,62915:58414,62916:58415,62917:58416,62918:58417,62919:58418,62920:58419,62921:58420,62922:58421,62923:58422,62924:58423,62925:58424,62926:58425,62927:58426,62928:58427,62929:58428,62930:58429,62931:58430,62932:58431,62933:58432,62934:58433,62935:58434,62936:58435,62937:58436,62938:58437,62939:58438,62940:58439,62941:58440,62942:58441,62943:58442,62944:58443,62945:58444,62946:58445,62947:58446,62948:58447,62949:58448,62950:58449,62951:58450,62952:58451,62953:58452,62954:58453,62955:58454,62956:58455,62957:58456,62958:58457,62959:58458,62960:58459,62961:58460,62962:58461,62963:58462,62964:58463,62965:58464,62966:58465,62967:58466,62968:58467,62969:58468,62970:58469,62971:58470,62972:58471,63040:58472,63041:58473,63042:58474,63043:58475,63044:58476,63045:58477,63046:58478,63047:58479,63048:58480,63049:58481,63050:58482,63051:58483,63052:58484,63053:58485,63054:58486,63055:58487,63056:58488,63057:58489,63058:58490,63059:58491,63060:58492,63061:58493,63062:58494,63063:58495,63064:58496,63065:58497,63066:58498,63067:58499,63068:58500,63069:58501,63070:58502,63071:58503,63072:58504,63073:58505,63074:58506,63075:58507,63076:58508,63077:58509,63078:58510,63079:58511,63080:58512,63081:58513,63082:58514,63083:58515,63084:58516,63085:58517,63086:58518,63087:58519,63088:58520,63089:58521,63090:58522,63091:58523,63092:58524,63093:58525,63094:58526,63095:58527,63096:58528,63097:58529,63098:58530,63099:58531,63100:58532,63101:58533,63102:58534,63104:58535,63105:58536,63106:58537,63107:58538,63108:58539,63109:58540,63110:58541,63111:58542,63112:58543,63113:58544,63114:58545,63115:58546,63116:58547,63117:58548,63118:58549,63119:58550,63120:58551,63121:58552,63122:58553,63123:58554,63124:58555,63125:58556,63126:58557,63127:58558,63128:58559,63129:58560,63130:58561,63131:58562,63132:58563,63133:58564,63134:58565,63135:58566,63136:58567,63137:58568,63138:58569,63139:58570,63140:58571,63141:58572,63142:58573,63143:58574,63144:58575,63145:58576,63146:58577,63147:58578,63148:58579,63149:58580,63150:58581,63151:58582,63152:58583,63153:58584,63154:58585,63155:58586,63156:58587,63157:58588,63158:58589,63159:58590,63160:58591,63161:58592,63162:58593,63163:58594,63164:58595,63165:58596,63166:58597,63167:58598,63168:58599,63169:58600,63170:58601,63171:58602,63172:58603,63173:58604,63174:58605,63175:58606,63176:58607,63177:58608,63178:58609,63179:58610,63180:58611,63181:58612,63182:58613,63183:58614,63184:58615,63185:58616,63186:58617,63187:58618,63188:58619,63189:58620,63190:58621,63191:58622,63192:58623,63193:58624,63194:58625,63195:58626,63196:58627,63197:58628,63198:58629,63199:58630,63200:58631,63201:58632,63202:58633,63203:58634,63204:58635,63205:58636,63206:58637,63207:58638,63208:58639,63209:58640,63210:58641,63211:58642,63212:58643,63213:58644,63214:58645,63215:58646,63216:58647,63217:58648,63218:58649,63219:58650,63220:58651,63221:58652,63222:58653,63223:58654,63224:58655,63225:58656,63226:58657,63227:58658,63228:58659,63296:58660,63297:58661,63298:58662,63299:58663,63300:58664,63301:58665,63302:58666,63303:58667,63304:58668,63305:58669,63306:58670,63307:58671,63308:58672,63309:58673,63310:58674,63311:58675,63312:58676,63313:58677,63314:58678,63315:58679,63316:58680,63317:58681,63318:58682,63319:58683,63320:58684,63321:58685,63322:58686,63323:58687,63324:58688,63325:58689,63326:58690,63327:58691,63328:58692,63329:58693,63330:58694,63331:58695,63332:58696,63333:58697,63334:58698,63335:58699,63336:58700,63337:58701,63338:58702,63339:58703,63340:58704,63341:58705,63342:58706,63343:58707,63344:58708,63345:58709,63346:58710,63347:58711,63348:58712,63349:58713,63350:58714,63351:58715,63352:58716,63353:58717,63354:58718,63355:58719,63356:58720,63357:58721,63358:58722,63360:58723,63361:58724,63362:58725,63363:58726,63364:58727,63365:58728,63366:58729,63367:58730,63368:58731,63369:58732,63370:58733,63371:58734,63372:58735,63373:58736,63374:58737,63375:58738,63376:58739,63377:58740,63378:58741,63379:58742,63380:58743,63381:58744,63382:58745,63383:58746,63384:58747,63385:58748,63386:58749,63387:58750,63388:58751,63389:58752,63390:58753,63391:58754,63392:58755,63393:58756,63394:58757,63395:58758,63396:58759,63397:58760,63398:58761,63399:58762,63400:58763,63401:58764,63402:58765,63403:58766,63404:58767,63405:58768,63406:58769,63407:58770,63408:58771,63409:58772,63410:58773,63411:58774,63412:58775,63413:58776,63414:58777,63415:58778,63416:58779,63417:58780,63418:58781,63419:58782,63420:58783,63421:58784,63422:58785,63423:58786,63424:58787,63425:58788,63426:58789,63427:58790,63428:58791,63429:58792,63430:58793,63431:58794,63432:58795,63433:58796,63434:58797,63435:58798,63436:58799,63437:58800,63438:58801,63439:58802,63440:58803,63441:58804,63442:58805,63443:58806,63444:58807,63445:58808,63446:58809,63447:58810,63448:58811,63449:58812,63450:58813,63451:58814,63452:58815,63453:58816,63454:58817,63455:58818,63456:58819,63457:58820,63458:58821,63459:58822,63460:58823,63461:58824,63462:58825,63463:58826,63464:58827,63465:58828,63466:58829,63467:58830,63468:58831,63469:58832,63470:58833,63471:58834,63472:58835,63473:58836,63474:58837,63475:58838,63476:58839,63477:58840,63478:58841,63479:58842,63480:58843,63481:58844,63482:58845,63483:58846,63484:58847,63552:58848,63553:58849,63554:58850,63555:58851,63556:58852,63557:58853,63558:58854,63559:58855,63560:58856,63561:58857,63562:58858,63563:58859,63564:58860,63565:58861,63566:58862,63567:58863,63568:58864,63569:58865,63570:58866,63571:58867,63572:58868,63573:58869,63574:58870,63575:58871,63576:58872,63577:58873,63578:58874,63579:58875,63580:58876,63581:58877,63582:58878,63583:58879,63584:58880,63585:58881,63586:58882,63587:58883,63588:58884,63589:58885,63590:58886,63591:58887,63592:58888,63593:58889,63594:58890,63595:58891,63596:58892,63597:58893,63598:58894,63599:58895,63600:58896,63601:58897,63602:58898,63603:58899,63604:58900,63605:58901,63606:58902,63607:58903,63608:58904,63609:58905,63610:58906,63611:58907,63612:58908,63613:58909,63614:58910,63616:58911,63617:58912,63618:58913,63619:58914,63620:58915,63621:58916,63622:58917,63623:58918,63624:58919,63625:58920,63626:58921,63627:58922,63628:58923,63629:58924,63630:58925,63631:58926,63632:58927,63633:58928,63634:58929,63635:58930,63636:58931,63637:58932,63638:58933,63639:58934,63640:58935,63641:58936,63642:58937,63643:58938,63644:58939,63645:58940,63646:58941,63647:58942,63648:58943,63649:58944,63650:58945,63651:58946,63652:58947,63653:58948,63654:58949,63655:58950,63656:58951,63657:58952,63658:58953,63659:58954,63660:58955,63661:58956,63662:58957,63663:58958,63664:58959,63665:58960,63666:58961,63667:58962,63668:58963,63669:58964,63670:58965,63671:58966,63672:58967,63673:58968,63674:58969,63675:58970,63676:58971,63677:58972,63678:58973,63679:58974,63680:58975,63681:58976,63682:58977,63683:58978,63684:58979,63685:58980,63686:58981,63687:58982,63688:58983,63689:58984,63690:58985,63691:58986,63692:58987,63693:58988,63694:58989,63695:58990,63696:58991,63697:58992,63698:58993,63699:58994,63700:58995,63701:58996,63702:58997,63703:58998,63704:58999,63705:59e3,63706:59001,63707:59002,63708:59003,63709:59004,63710:59005,63711:59006,63712:59007,63713:59008,63714:59009,63715:59010,63716:59011,63717:59012,63718:59013,63719:59014,63720:59015,63721:59016,63722:59017,63723:59018,63724:59019,63725:59020,63726:59021,63727:59022,63728:59023,63729:59024,63730:59025,63731:59026,63732:59027,63733:59028,63734:59029,63735:59030,63736:59031,63737:59032,63738:59033,63739:59034,63740:59035,64064:8560,64065:8561,64066:8562,64067:8563,64068:8564,64069:8565,64070:8566,64071:8567,64072:8568,64073:8569,64074:8544,64075:8545,64076:8546,64077:8547,64078:8548,64079:8549,64080:8550,64081:8551,64082:8552,64083:8553,64084:65506,64085:65508,64086:65287,64087:65282,64088:12849,64089:8470,64090:8481,64091:8757,64092:32394,64093:35100,64094:37704,64095:37512,64096:34012,64097:20425,64098:28859,64099:26161,64100:26824,64101:37625,64102:26363,64103:24389,64104:20008,64105:20193,64106:20220,64107:20224,64108:20227,64109:20281,64110:20310,64111:20370,64112:20362,64113:20378,64114:20372,64115:20429,64116:20544,64117:20514,64118:20479,64119:20510,64120:20550,64121:20592,64122:20546,64123:20628,64124:20724,64125:20696,64126:20810,64128:20836,64129:20893,64130:20926,64131:20972,64132:21013,64133:21148,64134:21158,64135:21184,64136:21211,64137:21248,64138:21255,64139:21284,64140:21362,64141:21395,64142:21426,64143:21469,64144:64014,64145:21660,64146:21642,64147:21673,64148:21759,64149:21894,64150:22361,64151:22373,64152:22444,64153:22472,64154:22471,64155:64015,64156:64016,64157:22686,64158:22706,64159:22795,64160:22867,64161:22875,64162:22877,64163:22883,64164:22948,64165:22970,64166:23382,64167:23488,64168:29999,64169:23512,64170:23532,64171:23582,64172:23718,64173:23738,64174:23797,64175:23847,64176:23891,64177:64017,64178:23874,64179:23917,64180:23992,64181:23993,64182:24016,64183:24353,64184:24372,64185:24423,64186:24503,64187:24542,64188:24669,64189:24709,64190:24714,64191:24798,64192:24789,64193:24864,64194:24818,64195:24849,64196:24887,64197:24880,64198:24984,64199:25107,64200:25254,64201:25589,64202:25696,64203:25757,64204:25806,64205:25934,64206:26112,64207:26133,64208:26171,64209:26121,64210:26158,64211:26142,64212:26148,64213:26213,64214:26199,64215:26201,64216:64018,64217:26227,64218:26265,64219:26272,64220:26290,64221:26303,64222:26362,64223:26382,64224:63785,64225:26470,64226:26555,64227:26706,64228:26560,64229:26625,64230:26692,64231:26831,64232:64019,64233:26984,64234:64020,64235:27032,64236:27106,64237:27184,64238:27243,64239:27206,64240:27251,64241:27262,64242:27362,64243:27364,64244:27606,64245:27711,64246:27740,64247:27782,64248:27759,64249:27866,64250:27908,64251:28039,64252:28015,64320:28054,64321:28076,64322:28111,64323:28152,64324:28146,64325:28156,64326:28217,64327:28252,64328:28199,64329:28220,64330:28351,64331:28552,64332:28597,64333:28661,64334:28677,64335:28679,64336:28712,64337:28805,64338:28843,64339:28943,64340:28932,64341:29020,64342:28998,64343:28999,64344:64021,64345:29121,64346:29182,64347:29361,64348:29374,64349:29476,64350:64022,64351:29559,64352:29629,64353:29641,64354:29654,64355:29667,64356:29650,64357:29703,64358:29685,64359:29734,64360:29738,64361:29737,64362:29742,64363:29794,64364:29833,64365:29855,64366:29953,64367:30063,64368:30338,64369:30364,64370:30366,64371:30363,64372:30374,64373:64023,64374:30534,64375:21167,64376:30753,64377:30798,64378:30820,64379:30842,64380:31024,64381:64024,64382:64025,64384:64026,64385:31124,64386:64027,64387:31131,64388:31441,64389:31463,64390:64028,64391:31467,64392:31646,64393:64029,64394:32072,64395:32092,64396:32183,64397:32160,64398:32214,64399:32338,64400:32583,64401:32673,64402:64030,64403:33537,64404:33634,64405:33663,64406:33735,64407:33782,64408:33864,64409:33972,64410:34131,64411:34137,64412:34155,64413:64031,64414:34224,64415:64032,64416:64033,64417:34823,64418:35061,64419:35346,64420:35383,64421:35449,64422:35495,64423:35518,64424:35551,64425:64034,64426:35574,64427:35667,64428:35711,64429:36080,64430:36084,64431:36114,64432:36214,64433:64035,64434:36559,64435:64036,64436:64037,64437:36967,64438:37086,64439:64038,64440:37141,64441:37159,64442:37338,64443:37335,64444:37342,64445:37357,64446:37358,64447:37348,64448:37349,64449:37382,64450:37392,64451:37386,64452:37434,64453:37440,64454:37436,64455:37454,64456:37465,64457:37457,64458:37433,64459:37479,64460:37543,64461:37495,64462:37496,64463:37607,64464:37591,64465:37593,64466:37584,64467:64039,64468:37589,64469:37600,64470:37587,64471:37669,64472:37665,64473:37627,64474:64040,64475:37662,64476:37631,64477:37661,64478:37634,64479:37744,64480:37719,64481:37796,64482:37830,64483:37854,64484:37880,64485:37937,64486:37957,64487:37960,64488:38290,64489:63964,64490:64041,64491:38557,64492:38575,64493:38707,64494:38715,64495:38723,64496:38733,64497:38735,64498:38737,64499:38741,64500:38999,64501:39013,64502:64042,64503:64043,64504:39207,64505:64044,64506:39326,64507:39502,64508:39641,64576:39644,64577:39797,64578:39794,64579:39823,64580:39857,64581:39867,64582:39936,64583:40304,64584:40299,64585:64045,64586:40473,64587:40657},KF.prototype={constructor:KF,getInt8:function(){var t=this.dv.getInt8(this.offset);return this.offset+=1,t},getInt8Array:function(t){for(var e=[],s=0;s<t;s++)e.push(this.getInt8());return e},getUint8:function(){var t=this.dv.getUint8(this.offset);return this.offset+=1,t},getUint8Array:function(t){for(var e=[],s=0;s<t;s++)e.push(this.getUint8());return e},getInt16:function(){var t=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,t},getInt16Array:function(t){for(var e=[],s=0;s<t;s++)e.push(this.getInt16());return e},getUint16:function(){var t=this.dv.getUint16(this.offset,this.littleEndian);return this.offset+=2,t},getUint16Array:function(t){for(var e=[],s=0;s<t;s++)e.push(this.getUint16());return e},getInt32:function(){var t=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,t},getInt32Array:function(t){for(var e=[],s=0;s<t;s++)e.push(this.getInt32());return e},getUint32:function(){var t=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,t},getUint32Array:function(t){for(var e=[],s=0;s<t;s++)e.push(this.getUint32());return e},getFloat32:function(){var t=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t},getFloat32Array:function(t){for(var e=[],s=0;s<t;s++)e.push(this.getFloat32());return e},getFloat64:function(){var t=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t},getFloat64Array:function(t){for(var e=[],s=0;s<t;s++)e.push(this.getFloat64());return e},getIndex:function(t,e){switch(t){case 1:return!0===e?this.getUint8():this.getInt8();case 2:return!0===e?this.getUint16():this.getInt16();case 4:return this.getInt32();default:throw"unknown number type "+t+" exception."}},getIndexArray:function(t,e,s){for(var r=[],i=0;i<e;i++)r.push(this.getIndex(t,s));return r},getChars:function(t){for(var e="";t>0;){var s=this.getUint8();if(t--,0===s)break;e+=String.fromCharCode(s)}for(;t>0;)this.getUint8(),t--;return e},getSjisStringsAsUnicode:function(t){for(var e=[];t>0;){var s=this.getUint8();if(t--,0===s)break;e.push(s)}for(;t>0;)this.getUint8(),t--;return this.encoder.s2u(new Uint8Array(e))},getUnicodeStrings:function(t){for(var e="";t>0;){var s=this.getUint16();if(t-=2,0===s)break;e+=String.fromCharCode(s)}for(;t>0;)this.getUint8(),t--;return e},getTextBuffer:function(){var t=this.getUint32();return this.getUnicodeStrings(t)}},JF.prototype={constructor:JF,leftToRightVector3:function(t){t[2]=-t[2]},leftToRightQuaternion:function(t){t[0]=-t[0],t[1]=-t[1]},leftToRightEuler:function(t){t[0]=-t[0],t[1]=-t[1]},leftToRightIndexOrder:function(t){var e=t[2];t[2]=t[0],t[0]=e},leftToRightVector3Range:function(t,e){var s=-e[2];e[2]=-t[2],t[2]=s},leftToRightEulerRange:function(t,e){var s=-e[0],r=-e[1];e[0]=-t[0],e[1]=-t[1],t[0]=s,t[1]=r}},$F.prototype.parsePmd=function(t,e){var s={},r=new KF(t);s.metadata={},s.metadata.format="pmd",s.metadata.coordinateSystem="left";var i;return function(){var t=s.metadata;if(t.magic=r.getChars(3),"Pmd"!==t.magic)throw"PMD file magic is not Pmd, but "+t.magic;t.version=r.getFloat32(),t.modelName=r.getSjisStringsAsUnicode(20),t.comment=r.getSjisStringsAsUnicode(256)}(),function(){var t,e=s.metadata;e.vertexCount=r.getUint32(),s.vertices=[];for(var i=0;i<e.vertexCount;i++)s.vertices.push((t=void 0,(t={}).position=r.getFloat32Array(3),t.normal=r.getFloat32Array(3),t.uv=r.getFloat32Array(2),t.skinIndices=r.getUint16Array(2),t.skinWeights=[r.getUint8()/100],t.skinWeights.push(1-t.skinWeights[0]),t.edgeFlag=r.getUint8(),t))}(),function(){var t,e=s.metadata;e.faceCount=r.getUint32()/3,s.faces=[];for(var i=0;i<e.faceCount;i++)s.faces.push((t=void 0,(t={}).indices=r.getUint16Array(3),t))}(),function(){var t,e=s.metadata;e.materialCount=r.getUint32(),s.materials=[];for(var i=0;i<e.materialCount;i++)s.materials.push((t=void 0,(t={}).diffuse=r.getFloat32Array(4),t.shininess=r.getFloat32(),t.specular=r.getFloat32Array(3),t.ambient=r.getFloat32Array(3),t.toonIndex=r.getInt8(),t.edgeFlag=r.getUint8(),t.faceCount=r.getUint32()/3,t.fileName=r.getSjisStringsAsUnicode(20),t))}(),function(){var t,e=s.metadata;e.boneCount=r.getUint16(),s.bones=[];for(var i=0;i<e.boneCount;i++)s.bones.push((t=void 0,(t={}).name=r.getSjisStringsAsUnicode(20),t.parentIndex=r.getInt16(),t.tailIndex=r.getInt16(),t.type=r.getUint8(),t.ikIndex=r.getInt16(),t.position=r.getFloat32Array(3),t))}(),function(){var t=function(){var t={};t.target=r.getUint16(),t.effector=r.getUint16(),t.linkCount=r.getUint8(),t.iteration=r.getUint16(),t.maxAngle=r.getFloat32(),t.links=[];for(var e=0;e<t.linkCount;e++){var s={};s.index=r.getUint16(),t.links.push(s)}return t},e=s.metadata;e.ikCount=r.getUint16(),s.iks=[];for(var i=0;i<e.ikCount;i++)s.iks.push(t())}(),function(){var t=function(){var t={};t.name=r.getSjisStringsAsUnicode(20),t.elementCount=r.getUint32(),t.type=r.getUint8(),t.elements=[];for(var e=0;e<t.elementCount;e++)t.elements.push({index:r.getUint32(),position:r.getFloat32Array(3)});return t},e=s.metadata;e.morphCount=r.getUint16(),s.morphs=[];for(var i=0;i<e.morphCount;i++)s.morphs.push(t())}(),function(){var t,e=s.metadata;e.morphFrameCount=r.getUint8(),s.morphFrames=[];for(var i=0;i<e.morphFrameCount;i++)s.morphFrames.push((t=void 0,(t={}).index=r.getUint16(),t))}(),function(){var t,e=s.metadata;e.boneFrameNameCount=r.getUint8(),s.boneFrameNames=[];for(var i=0;i<e.boneFrameNameCount;i++)s.boneFrameNames.push((t=void 0,(t={}).name=r.getSjisStringsAsUnicode(50),t))}(),function(){var t,e=s.metadata;e.boneFrameCount=r.getUint32(),s.boneFrames=[];for(var i=0;i<e.boneFrameCount;i++)s.boneFrames.push((t=void 0,(t={}).boneIndex=r.getInt16(),t.frameIndex=r.getUint8(),t))}(),(i=s.metadata).englishCompatibility=r.getUint8(),i.englishCompatibility>0&&(i.englishModelName=r.getSjisStringsAsUnicode(20),i.englishComment=r.getSjisStringsAsUnicode(256)),function(){var t=s.metadata;if(0!==t.englishCompatibility){s.englishBoneNames=[];for(var e=0;e<t.boneCount;e++)s.englishBoneNames.push((i=void 0,(i={}).name=r.getSjisStringsAsUnicode(20),i));var i}}(),function(){var t=s.metadata;if(0!==t.englishCompatibility){s.englishMorphNames=[];for(var e=0;e<t.morphCount-1;e++)s.englishMorphNames.push((i=void 0,(i={}).name=r.getSjisStringsAsUnicode(20),i));var i}}(),function(){var t=s.metadata;if(0!==t.englishCompatibility){s.englishBoneFrameNames=[];for(var e=0;e<t.boneFrameNameCount;e++)s.englishBoneFrameNames.push((i=void 0,(i={}).name=r.getSjisStringsAsUnicode(50),i));var i}}(),function(){var t;s.toonTextures=[];for(var e=0;e<10;e++)s.toonTextures.push((t=void 0,(t={}).fileName=r.getSjisStringsAsUnicode(100),t))}(),function(){var t,e=s.metadata;e.rigidBodyCount=r.getUint32(),s.rigidBodies=[];for(var i=0;i<e.rigidBodyCount;i++)s.rigidBodies.push((t=void 0,(t={}).name=r.getSjisStringsAsUnicode(20),t.boneIndex=r.getInt16(),t.groupIndex=r.getUint8(),t.groupTarget=r.getUint16(),t.shapeType=r.getUint8(),t.width=r.getFloat32(),t.height=r.getFloat32(),t.depth=r.getFloat32(),t.position=r.getFloat32Array(3),t.rotation=r.getFloat32Array(3),t.weight=r.getFloat32(),t.positionDamping=r.getFloat32(),t.rotationDamping=r.getFloat32(),t.restitution=r.getFloat32(),t.friction=r.getFloat32(),t.type=r.getUint8(),t))}(),function(){var t,e=s.metadata;e.constraintCount=r.getUint32(),s.constraints=[];for(var i=0;i<e.constraintCount;i++)s.constraints.push((t=void 0,(t={}).name=r.getSjisStringsAsUnicode(20),t.rigidBodyIndex1=r.getUint32(),t.rigidBodyIndex2=r.getUint32(),t.position=r.getFloat32Array(3),t.rotation=r.getFloat32Array(3),t.translationLimitation1=r.getFloat32Array(3),t.translationLimitation2=r.getFloat32Array(3),t.rotationLimitation1=r.getFloat32Array(3),t.rotationLimitation2=r.getFloat32Array(3),t.springPosition=r.getFloat32Array(3),t.springRotation=r.getFloat32Array(3),t))}(),!0===e&&this.leftToRightModel(s),s},$F.prototype.parsePmx=function(t,e){var s={},r=new KF(t);s.metadata={},s.metadata.format="pmx",s.metadata.coordinateSystem="left";return function(){var t=s.metadata;if(t.magic=r.getChars(4),"PMX "!==t.magic)throw"PMX file magic is not PMX , but "+t.magic;if(t.version=r.getFloat32(),2!==t.version&&2.1!==t.version)throw"PMX version "+t.version+" is not supported.";t.headerSize=r.getUint8(),t.encoding=r.getUint8(),t.additionalUvNum=r.getUint8(),t.vertexIndexSize=r.getUint8(),t.textureIndexSize=r.getUint8(),t.materialIndexSize=r.getUint8(),t.boneIndexSize=r.getUint8(),t.morphIndexSize=r.getUint8(),t.rigidBodyIndexSize=r.getUint8(),t.modelName=r.getTextBuffer(),t.englishModelName=r.getTextBuffer(),t.comment=r.getTextBuffer(),t.englishComment=r.getTextBuffer()}(),function(){var t=function(){var t={};t.position=r.getFloat32Array(3),t.normal=r.getFloat32Array(3),t.uv=r.getFloat32Array(2),t.auvs=[];for(var i=0;i<s.metadata.additionalUvNum;i++)t.auvs.push(r.getFloat32Array(4));t.type=r.getUint8();var n=e.boneIndexSize;if(0===t.type)t.skinIndices=r.getIndexArray(n,1),t.skinWeights=[1];else if(1===t.type)t.skinIndices=r.getIndexArray(n,2),t.skinWeights=r.getFloat32Array(1),t.skinWeights.push(1-t.skinWeights[0]);else if(2===t.type)t.skinIndices=r.getIndexArray(n,4),t.skinWeights=r.getFloat32Array(4);else{if(3!==t.type)throw"unsupport bone type "+t.type+" exception.";t.skinIndices=r.getIndexArray(n,2),t.skinWeights=r.getFloat32Array(1),t.skinWeights.push(1-t.skinWeights[0]),t.skinC=r.getFloat32Array(3),t.skinR0=r.getFloat32Array(3),t.skinR1=r.getFloat32Array(3),t.type=1}return t.edgeRatio=r.getFloat32(),t},e=s.metadata;e.vertexCount=r.getUint32(),s.vertices=[];for(var i=0;i<e.vertexCount;i++)s.vertices.push(t())}(),function(){var t,e=s.metadata;e.faceCount=r.getUint32()/3,s.faces=[];for(var i=0;i<e.faceCount;i++)s.faces.push((t=void 0,(t={}).indices=r.getIndexArray(e.vertexIndexSize,3,!0),t))}(),function(){var t=s.metadata;t.textureCount=r.getUint32(),s.textures=[];for(var e=0;e<t.textureCount;e++)s.textures.push(r.getTextBuffer())}(),function(){var t=function(){var t={};if(t.name=r.getTextBuffer(),t.englishName=r.getTextBuffer(),t.diffuse=r.getFloat32Array(4),t.specular=r.getFloat32Array(3),t.shininess=r.getFloat32(),t.ambient=r.getFloat32Array(3),t.flag=r.getUint8(),t.edgeColor=r.getFloat32Array(4),t.edgeSize=r.getFloat32(),t.textureIndex=r.getIndex(s.metadata.textureIndexSize),t.envTextureIndex=r.getIndex(s.metadata.textureIndexSize),t.envFlag=r.getUint8(),t.toonFlag=r.getUint8(),0===t.toonFlag)t.toonIndex=r.getIndex(s.metadata.textureIndexSize);else{if(1!==t.toonFlag)throw"unknown toon flag "+t.toonFlag+" exception.";t.toonIndex=r.getInt8()}return t.comment=r.getTextBuffer(),t.faceCount=r.getUint32()/3,t},e=s.metadata;e.materialCount=r.getUint32(),s.materials=[];for(var i=0;i<e.materialCount;i++)s.materials.push(t())}(),function(){var t=function(){var t={};if(t.name=r.getTextBuffer(),t.englishName=r.getTextBuffer(),t.position=r.getFloat32Array(3),t.parentIndex=r.getIndex(s.metadata.boneIndexSize),t.transformationClass=r.getUint32(),t.flag=r.getUint16(),1&t.flag?t.connectIndex=r.getIndex(s.metadata.boneIndexSize):t.offsetPosition=r.getFloat32Array(3),256&t.flag||512&t.flag){var e={};e.isLocal=0!=(128&t.flag),e.affectRotation=0!=(256&t.flag),e.affectPosition=0!=(512&t.flag),e.parentIndex=r.getIndex(s.metadata.boneIndexSize),e.ratio=r.getFloat32(),t.grant=e}if(1024&t.flag&&(t.fixAxis=r.getFloat32Array(3)),2048&t.flag&&(t.localXVector=r.getFloat32Array(3),t.localZVector=r.getFloat32Array(3)),8192&t.flag&&(t.key=r.getUint32()),32&t.flag){var i={};i.effector=r.getIndex(s.metadata.boneIndexSize),i.target=null,i.iteration=r.getUint32(),i.maxAngle=r.getFloat32(),i.linkCount=r.getUint32(),i.links=[];for(var n=0;n<i.linkCount;n++){var o={};o.index=r.getIndex(s.metadata.boneIndexSize),o.angleLimitation=r.getUint8(),1===o.angleLimitation&&(o.lowerLimitationAngle=r.getFloat32Array(3),o.upperLimitationAngle=r.getFloat32Array(3)),i.links.push(o)}t.ik=i}return t},e=s.metadata;e.boneCount=r.getUint32(),s.bones=[];for(var i=0;i<e.boneCount;i++)s.bones.push(t())}(),function(){var t=function(){var t={};t.name=r.getTextBuffer(),t.englishName=r.getTextBuffer(),t.panel=r.getUint8(),t.type=r.getUint8(),t.elementCount=r.getUint32(),t.elements=[];for(var e=0;e<t.elementCount;e++){if(0===t.type)(i={}).index=r.getIndex(s.metadata.morphIndexSize),i.ratio=r.getFloat32(),t.elements.push(i);else if(1===t.type){(i={}).index=r.getIndex(s.metadata.vertexIndexSize,!0),i.position=r.getFloat32Array(3),t.elements.push(i)}else if(2===t.type){(i={}).index=r.getIndex(s.metadata.boneIndexSize),i.position=r.getFloat32Array(3),i.rotation=r.getFloat32Array(4),t.elements.push(i)}else if(3===t.type){(i={}).index=r.getIndex(s.metadata.vertexIndexSize,!0),i.uv=r.getFloat32Array(4),t.elements.push(i)}else if(4===t.type);else if(5===t.type);else if(6===t.type);else if(7===t.type);else if(8===t.type){var i;(i={}).index=r.getIndex(s.metadata.materialIndexSize),i.type=r.getUint8(),i.diffuse=r.getFloat32Array(4),i.specular=r.getFloat32Array(3),i.shininess=r.getFloat32(),i.ambient=r.getFloat32Array(3),i.edgeColor=r.getFloat32Array(4),i.edgeSize=r.getFloat32(),i.textureColor=r.getFloat32Array(4),i.sphereTextureColor=r.getFloat32Array(4),i.toonColor=r.getFloat32Array(4),t.elements.push(i)}}return t},e=s.metadata;e.morphCount=r.getUint32(),s.morphs=[];for(var i=0;i<e.morphCount;i++)s.morphs.push(t())}(),function(){var t=function(){var t={};t.name=r.getTextBuffer(),t.englishName=r.getTextBuffer(),t.type=r.getUint8(),t.elementCount=r.getUint32(),t.elements=[];for(var e=0;e<t.elementCount;e++){var i={};i.target=r.getUint8(),i.index=0===i.target?r.getIndex(s.metadata.boneIndexSize):r.getIndex(s.metadata.morphIndexSize),t.elements.push(i)}return t},e=s.metadata;e.frameCount=r.getUint32(),s.frames=[];for(var i=0;i<e.frameCount;i++)s.frames.push(t())}(),function(){var t,e=s.metadata;e.rigidBodyCount=r.getUint32(),s.rigidBodies=[];for(var i=0;i<e.rigidBodyCount;i++)s.rigidBodies.push((t=void 0,(t={}).name=r.getTextBuffer(),t.englishName=r.getTextBuffer(),t.boneIndex=r.getIndex(s.metadata.boneIndexSize),t.groupIndex=r.getUint8(),t.groupTarget=r.getUint16(),t.shapeType=r.getUint8(),t.width=r.getFloat32(),t.height=r.getFloat32(),t.depth=r.getFloat32(),t.position=r.getFloat32Array(3),t.rotation=r.getFloat32Array(3),t.weight=r.getFloat32(),t.positionDamping=r.getFloat32(),t.rotationDamping=r.getFloat32(),t.restitution=r.getFloat32(),t.friction=r.getFloat32(),t.type=r.getUint8(),t))}(),function(){var t,e=s.metadata;e.constraintCount=r.getUint32(),s.constraints=[];for(var i=0;i<e.constraintCount;i++)s.constraints.push((t=void 0,(t={}).name=r.getTextBuffer(),t.englishName=r.getTextBuffer(),t.type=r.getUint8(),t.rigidBodyIndex1=r.getIndex(s.metadata.rigidBodyIndexSize),t.rigidBodyIndex2=r.getIndex(s.metadata.rigidBodyIndexSize),t.position=r.getFloat32Array(3),t.rotation=r.getFloat32Array(3),t.translationLimitation1=r.getFloat32Array(3),t.translationLimitation2=r.getFloat32Array(3),t.rotationLimitation1=r.getFloat32Array(3),t.rotationLimitation2=r.getFloat32Array(3),t.springPosition=r.getFloat32Array(3),t.springRotation=r.getFloat32Array(3),t))}(),!0===e&&this.leftToRightModel(s),s},$F.prototype.parseVmd=function(t,e){var s={},r=new KF(t);s.metadata={},s.metadata.coordinateSystem="left";return function(){var t=s.metadata;if(t.magic=r.getChars(30),"Vocaloid Motion Data 0002"!==t.magic)throw"VMD file magic is not Vocaloid Motion Data 0002, but "+t.magic;t.name=r.getSjisStringsAsUnicode(20)}(),function(){var t,e=s.metadata;e.motionCount=r.getUint32(),s.motions=[];for(var i=0;i<e.motionCount;i++)s.motions.push((t=void 0,(t={}).boneName=r.getSjisStringsAsUnicode(15),t.frameNum=r.getUint32(),t.position=r.getFloat32Array(3),t.rotation=r.getFloat32Array(4),t.interpolation=r.getUint8Array(64),t))}(),function(){var t,e=s.metadata;e.morphCount=r.getUint32(),s.morphs=[];for(var i=0;i<e.morphCount;i++)s.morphs.push((t=void 0,(t={}).morphName=r.getSjisStringsAsUnicode(15),t.frameNum=r.getUint32(),t.weight=r.getFloat32(),t))}(),function(){var t,e=s.metadata;e.cameraCount=r.getUint32(),s.cameras=[];for(var i=0;i<e.cameraCount;i++)s.cameras.push((t=void 0,(t={}).frameNum=r.getUint32(),t.distance=r.getFloat32(),t.position=r.getFloat32Array(3),t.rotation=r.getFloat32Array(3),t.interpolation=r.getUint8Array(24),t.fov=r.getUint32(),t.perspective=r.getUint8(),t))}(),!0===e&&this.leftToRightVmd(s),s},$F.prototype.parseVpd=function(t,e){var s={metadata:{}};s.metadata.coordinateSystem="left",s.bones=[];var r=t.replace(/\/\/\w*(\r|\n|\r\n)/g,"").split(/\r|\n|\r\n/);function i(){throw"the file seems not vpd file."}return"Vocaloid Pose Data file"!==r[0]&&i(),r.length<4&&i(),s.metadata.parentFile=r[2],s.metadata.boneCount=parseInt(r[3]),function(){for(var t=/^\s*(Bone[0-9]+)\s*\{\s*(.*)$/,e=/^\s*(-?[0-9]+\.[0-9]+)\s*,\s*(-?[0-9]+\.[0-9]+)\s*,\s*(-?[0-9]+\.[0-9]+)\s*;/,n=/^\s*(-?[0-9]+\.[0-9]+)\s*,\s*(-?[0-9]+\.[0-9]+)\s*,\s*(-?[0-9]+\.[0-9]+)\s*,\s*(-?[0-9]+\.[0-9]+)\s*;/,o=/^\s*}/,a=s.bones,h=null,c=null,l=null,u=4;u<r.length;u++){var p,d=r[u];null!==(p=d.match(t))&&(null!==h&&i(),h=p[2]),null!==(p=d.match(e))&&(null!==c&&i(),c=[parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3])]),null!==(p=d.match(n))&&(null!==l&&i(),l=[parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3]),parseFloat(p[4])]),null!==(p=d.match(o))&&(null!==h&&null!==c&&null!==l||i(),a.push({name:h,translation:c,quaternion:l}),h=null,c=null,l=null)}null===h&&null===c&&null===l||i()}(),!0===e&&this.leftToRightVpd(s),s},$F.prototype.mergeVmds=function(t){var e={metadata:{}};e.metadata.name=t[0].metadata.name,e.metadata.coordinateSystem=t[0].metadata.coordinateSystem,e.metadata.motionCount=0,e.metadata.morphCount=0,e.metadata.cameraCount=0,e.motions=[],e.morphs=[],e.cameras=[];for(var s=0;s<t.length;s++){var r=t[s];e.metadata.motionCount+=r.metadata.motionCount,e.metadata.morphCount+=r.metadata.morphCount,e.metadata.cameraCount+=r.metadata.cameraCount;for(var i=0;i<r.metadata.motionCount;i++)e.motions.push(r.motions[i]);for(i=0;i<r.metadata.morphCount;i++)e.morphs.push(r.morphs[i]);for(i=0;i<r.metadata.cameraCount;i++)e.cameras.push(r.cameras[i])}return e},$F.prototype.leftToRightModel=function(t){if("right"!==t.metadata.coordinateSystem){t.metadata.coordinateSystem="right";for(var e=new JF,s=0;s<t.metadata.vertexCount;s++)e.leftToRightVector3(t.vertices[s].position),e.leftToRightVector3(t.vertices[s].normal);for(s=0;s<t.metadata.faceCount;s++)e.leftToRightIndexOrder(t.faces[s].indices);for(s=0;s<t.metadata.boneCount;s++)e.leftToRightVector3(t.bones[s].position);for(s=0;s<t.metadata.morphCount;s++){var r=t.morphs[s];if("pmx"!==t.metadata.format||1===r.type)for(var i=0;i<r.elements.length;i++)e.leftToRightVector3(r.elements[i].position)}for(s=0;s<t.metadata.rigidBodyCount;s++)e.leftToRightVector3(t.rigidBodies[s].position),e.leftToRightEuler(t.rigidBodies[s].rotation);for(s=0;s<t.metadata.constraintCount;s++)e.leftToRightVector3(t.constraints[s].position),e.leftToRightEuler(t.constraints[s].rotation),e.leftToRightVector3Range(t.constraints[s].translationLimitation1,t.constraints[s].translationLimitation2),e.leftToRightEulerRange(t.constraints[s].rotationLimitation1,t.constraints[s].rotationLimitation2)}},$F.prototype.leftToRightVmd=function(t){if("right"!==t.metadata.coordinateSystem){t.metadata.coordinateSystem="right";for(var e=new JF,s=0;s<t.metadata.motionCount;s++)e.leftToRightVector3(t.motions[s].position),e.leftToRightQuaternion(t.motions[s].rotation);for(s=0;s<t.metadata.cameraCount;s++)e.leftToRightVector3(t.cameras[s].position),e.leftToRightEuler(t.cameras[s].rotation)}},$F.prototype.leftToRightVpd=function(t){if("right"!==t.metadata.coordinateSystem){t.metadata.coordinateSystem="right";for(var e=new JF,s=0;s<t.bones.length;s++)e.leftToRightVector3(t.bones[s].translation),e.leftToRightQuaternion(t.bones[s].quaternion)}};var ZF={CharsetEncoder:qF,Parser:$F};class QF extends Qc{constructor(t){super(t),this.loader=new el(this.manager),this.parser=null,this.meshBuilder=new sM(this.manager),this.animationBuilder=new nM}setAnimationPath(t){return this.animationPath=t,this}load(t,e,s,r){const i=this.meshBuilder.setCrossOrigin(this.crossOrigin);let n;n=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:Rl.extractUrlBase(t);const o=this._extractExtension(t).toLowerCase();"pmd"===o||"pmx"===o?this["pmd"===o?"loadPMD":"loadPMX"](t,(function(t){e(i.build(t,n,s,r))}),s,r):r&&r(new Error("THREE.MMDLoader: Unknown model file extension ."+o+"."))}loadAnimation(t,e,s,r,i){const n=this.animationBuilder;this.loadVMD(t,(function(t){s(e.isCamera?n.buildCameraAnimation(t):n.build(t,e))}),r,i)}loadWithAnimation(t,e,s,r,i){const n=this;this.load(t,(function(t){n.loadAnimation(e,t,(function(e){s({mesh:t,animation:e})}),r,i)}),r,i)}loadPMD(t,e,s,r){const i=this._getParser();this.loader.setMimeType(void 0).setPath(this.path).setResponseType("arraybuffer").setRequestHeader(this.requestHeader).setWithCredentials(this.withCredentials).load(t,(function(t){e(i.parsePmd(t,!0))}),s,r)}loadPMX(t,e,s,r){const i=this._getParser();this.loader.setMimeType(void 0).setPath(this.path).setResponseType("arraybuffer").setRequestHeader(this.requestHeader).setWithCredentials(this.withCredentials).load(t,(function(t){e(i.parsePmx(t,!0))}),s,r)}loadVMD(t,e,s,r){const i=Array.isArray(t)?t:[t],n=[],o=i.length,a=this._getParser();this.loader.setMimeType(void 0).setPath(this.animationPath).setResponseType("arraybuffer").setRequestHeader(this.requestHeader).setWithCredentials(this.withCredentials);for(let t=0,h=i.length;t<h;t++)this.loader.load(i[t],(function(t){n.push(a.parseVmd(t,!0)),n.length===o&&e(a.mergeVmds(n))}),s,r)}loadVPD(t,e,s,r,i){const n=this._getParser();this.loader.setMimeType(e?void 0:"text/plain; charset=shift_jis").setPath(this.animationPath).setResponseType("text").setRequestHeader(this.requestHeader).setWithCredentials(this.withCredentials).load(t,(function(t){s(n.parseVpd(t,!0))}),r,i)}_extractExtension(t){const e=t.lastIndexOf(".");return e<0?"":t.slice(e+1)}_getParser(){if(null===this.parser){if(void 0===ZF)throw new Error("THREE.MMDLoader: Import MMDParser https://github.com/takahirox/mmd-parser");this.parser=new ZF.Parser}return this.parser}}const tM=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAL0lEQVRYR+3QQREAAAzCsOFfNJPBJ1XQS9r2hsUAAQIECBAgQIAAAQIECBAgsBZ4MUx/ofm2I/kAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAN0lEQVRYR+3WQREAMBACsZ5/bWiiMvgEBTt5cW37hjsBBAgQIECAwFwgyfYPCCBAgAABAgTWAh8aBHZBl14e8wAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAOUlEQVRYR+3WMREAMAwDsYY/yoDI7MLwIiP40+RJklfcCCBAgAABAgTqArfb/QMCCBAgQIAAgbbAB3z/e0F3js2cAAAAAElFTkSuQmCC","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAN0lEQVRYR+3WQREAMBACsZ5/B5ilMvgEBTt5cW37hjsBBAgQIECAwFwgyfYPCCBAgAABAgTWAh81dWyx0gFwKAAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAOklEQVRYR+3WoREAMAwDsWb/UQtCy9wxTOQJ/oQ8SXKKGwEECBAgQIBAXeDt7f4BAQQIECBAgEBb4AOz8Hzx7WLY4wAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABPUlEQVRYR+1XwW7CMAy1+f9fZOMysSEOEweEOPRNdm3HbdOyIhAcklPrOs/PLy9RygBALxzcCDQFmgJNgaZAU6Ap0BR4PwX8gsRMVLssMRH5HcpzJEaWL7EVg9F1IHRlyqQohgVr4FGUlUcMJSjcUlDw0zvjeun70cLWmneoyf7NgBTQSniBTQQSuJAZsOnnaczjIMb5hCiuHKxokCrJfVnrctyZL0PkJAJe1HMil4nxeyi3Ypfn1kX51jpPvo/JeCNC4PhVdHdJw2XjBR8brF8PEIhNVn12AgP7uHsTBguBn53MUZCqv7Lp07Pn5k1Ro+uWmUNn7D+M57rtk7aG0Vo73xyF/fbFf0bPJjDXngnGocDTdFhygZjwUQrMNrDcmZlQT50VJ/g/UwNyHpu778+yW+/ksOz/BFo54P4AsUXMfRq7XWsAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACMElEQVRYR+2Xv4pTQRTGf2dubhLdICiii2KnYKHVolhauKWPoGAnNr6BD6CvIVaihYuI2i1ia0BY0MZGRHQXjZj/mSPnnskfNWiWZUlzJ5k7M2cm833nO5Mziej2DWWJRUoCpQKlAntSQCqgw39/iUWAGmh37jrRnVsKlgpiqmkoGVABA7E57fvY+pJDdgKqF6HzFCSADkDq+F6AHABtQ+UMVE5D7zXod7fFNhTEckTbj5XQgHzNN+5tQvc5NG7C6BNkp6D3EmpXHDR+dQAjFLchW3VS9rlw3JBh+B7ys5Cf9z0GW1C/7P32AyBAOAz1q4jGliIH3YPuBnSfQX4OGreTIgEYQb/pBDtPnEQ4CivXYPAWBk13oHrB54yA9QuSn2H4AcKRpEILDt0BUzj+RLR1V5EqjD66NPRBVpLcQwjHoHYJOhsQv6U4mnzmrIXJCFr4LDwm/xBUoboG9XX4cc9VKdYoSA2yk5NQLJaKDUjTBoveG3Z2TElTxwjNK4M3LEZgUdDdruvcXzKBpStgp2NPiWi3ks9ZXxIoFVi+AvHLdc9TqtjL3/aYjpPlrzOcEnK62Szhimdd7xX232zFDTgtxezOu3WNMRLjiKgjtOhHVMd1loynVHvOgjuIIJMaELEqhJAV/RCSLbWTcfPFakFgFlALTRRvx+ok6Hlp/Q+v3fmx90bMyUzaEAhmM3KvHlXTL5DxnbGf/1M8RNNACLL5MNtPxP/mypJAqcDSFfgFhpYqWUzhTEAAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAL0lEQVRYR+3QQREAAAzCsOFfNJPBJ1XQS9r2hsUAAQIECBAgQIAAAQIECBAgsBZ4MUx/ofm2I/kAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAL0lEQVRYR+3QQREAAAzCsOFfNJPBJ1XQS9r2hsUAAQIECBAgQIAAAQIECBAgsBZ4MUx/ofm2I/kAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAL0lEQVRYR+3QQREAAAzCsOFfNJPBJ1XQS9r2hsUAAQIECBAgQIAAAQIECBAgsBZ4MUx/ofm2I/kAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAL0lEQVRYR+3QQREAAAzCsOFfNJPBJ1XQS9r2hsUAAQIECBAgQIAAAQIECBAgsBZ4MUx/ofm2I/kAAAAASUVORK5CYII="],eM=[ot,lt,ut,mt,ft];class sM{constructor(t){this.crossOrigin="anonymous",this.geometryBuilder=new rM,this.materialBuilder=new iM(t)}setCrossOrigin(t){return this.crossOrigin=t,this}build(t,e,s,r){const i=this.geometryBuilder.build(t),n=this.materialBuilder.setCrossOrigin(this.crossOrigin).setResourcePath(e).build(t,i,s,r),o=new wa(i,n),a=new Aa(function(t){const e=t.geometry,s=[];if(e&&void 0!==e.bones){for(let t=0,r=e.bones.length;t<r;t++){const r=e.bones[t],i=new xa;s.push(i),i.name=r.name,i.position.fromArray(r.pos),i.quaternion.fromArray(r.rotq),void 0!==r.scl&&i.scale.fromArray(r.scl)}for(let r=0,i=e.bones.length;r<i;r++){const i=e.bones[r];-1!==i.parent&&null!==i.parent&&void 0!==s[i.parent]?s[i.parent].add(s[r]):t.add(s[r])}}return t.updateMatrixWorld(!0),s}(o));return o.bind(a),o}}class rM{build(t){const e=[],s=[],r=[],i=[],n=[],o=[],a=[],h=[],c=[],l=[],u=[],p=[],d=[],m=[];let f=0;const g={};for(let i=0;i<t.metadata.vertexCount;i++){const n=t.vertices[i];for(let t=0,s=n.position.length;t<s;t++)e.push(n.position[t]);for(let t=0,e=n.normal.length;t<e;t++)r.push(n.normal[t]);for(let t=0,e=n.uv.length;t<e;t++)s.push(n.uv[t]);for(let t=0;t<4;t++)a.push(n.skinIndices.length-1>=t?n.skinIndices[t]:0);for(let t=0;t<4;t++)h.push(n.skinWeights.length-1>=t?n.skinWeights[t]:0)}for(let e=0;e<t.metadata.faceCount;e++){const s=t.faces[e];for(let t=0,e=s.indices.length;t<e;t++)i.push(s.indices[t])}for(let e=0;e<t.metadata.materialCount;e++){const s=t.materials[e];n.push({offset:3*f,count:3*s.faceCount}),f+=s.faceCount}for(let e=0;e<t.metadata.rigidBodyCount;e++){const s=t.rigidBodies[e];let r=g[s.boneIndex];r=void 0===r?s.type:Math.max(s.type,r),g[s.boneIndex]=r}for(let e=0;e<t.metadata.boneCount;e++){const s=t.bones[e],r={index:e,transformationClass:s.transformationClass,parent:s.parentIndex,name:s.name,pos:s.position.slice(0,3),rotq:[0,0,0,1],scl:[1,1,1],rigidBodyType:void 0!==g[e]?g[e]:-1};-1!==r.parent&&(r.pos[0]-=t.bones[r.parent].position[0],r.pos[1]-=t.bones[r.parent].position[1],r.pos[2]-=t.bones[r.parent].position[2]),o.push(r)}if("pmd"===t.metadata.format)for(let e=0;e<t.metadata.ikCount;e++){const s=t.iks[e],r={target:s.target,effector:s.effector,iteration:s.iteration,maxAngle:4*s.maxAngle,links:[]};for(let e=0,i=s.links.length;e<i;e++){const i={};i.index=s.links[e].index,i.enabled=!0,t.bones[i.index].name.indexOf("ひざ")>=0&&(i.limitation=new Ge(1,0,0)),r.links.push(i)}u.push(r)}else for(let e=0;e<t.metadata.boneCount;e++){const s=t.bones[e].ik;if(void 0===s)continue;const r={target:e,effector:s.effector,iteration:s.iteration,maxAngle:s.maxAngle,links:[]};for(let t=0,e=s.links.length;t<e;t++){const e={};if(e.index=s.links[t].index,e.enabled=!0,1===s.links[t].angleLimitation){const r=s.links[t].lowerLimitationAngle,i=s.links[t].upperLimitationAngle,n=-i[0],o=-i[1];i[0]=-r[0],i[1]=-r[1],r[0]=n,r[1]=o,e.rotationMin=(new Ge).fromArray(r),e.rotationMax=(new Ge).fromArray(i)}r.links.push(e)}u.push(r),o[e].ik=r}if("pmx"===t.metadata.format){const e={};for(let s=0;s<t.metadata.boneCount;s++){const r=t.bones[s],i=r.grant;if(void 0===i)continue;const n={index:s,parentIndex:i.parentIndex,ratio:i.ratio,isLocal:i.isLocal,affectRotation:i.affectRotation,affectPosition:i.affectPosition,transformationClass:r.transformationClass};e[s]={parent:null,children:[],param:n,visited:!1}}const s={parent:null,children:[],param:null,visited:!1};for(const t in e){const r=e[t],i=e[r.parentIndex]||s;r.parent=i,i.children.push(r)}!function t(e){e.param&&(p.push(e.param),o[e.param.index].grant=e.param),e.visited=!0;for(let s=0,r=e.children.length;s<r;s++){const r=e.children[s];r.visited||t(r)}}(s)}function y(e,s,r){for(let i=0;i<s.elementCount;i++){const n=s.elements[i];let o;o="pmd"===t.metadata.format?t.morphs[0].elements[n.index].index:n.index,e.array[3*o+0]+=n.position[0]*r,e.array[3*o+1]+=n.position[1]*r,e.array[3*o+2]+=n.position[2]*r}}for(let s=0;s<t.metadata.morphCount;s++){const r=t.morphs[s],i={name:r.name},n=new fr(3*t.metadata.vertexCount,3);n.name=r.name;for(let s=0;s<3*t.metadata.vertexCount;s++)n.array[s]=e[s];if("pmd"===t.metadata.format)0!==s&&y(n,r,1);else if(0===r.type)for(let e=0;e<r.elementCount;e++){const s=t.morphs[r.elements[e].index],i=r.elements[e].ratio;1===s.type&&y(n,s,i)}else 1===r.type?y(n,r,1):2===r.type||3===r.type||4===r.type||5===r.type||6===r.type||7===r.type||r.type;c.push(i),l.push(n)}for(let e=0;e<t.metadata.rigidBodyCount;e++){const s=t.rigidBodies[e],r={};for(const t in s)r[t]=s[t];if("pmx"===t.metadata.format&&-1!==r.boneIndex){const e=t.bones[r.boneIndex];r.position[0]-=e.position[0],r.position[1]-=e.position[1],r.position[2]-=e.position[2]}d.push(r)}for(let e=0;e<t.metadata.constraintCount;e++){const s=t.constraints[e],r={};for(const t in s)r[t]=s[t];const i=d[r.rigidBodyIndex1],n=d[r.rigidBodyIndex2];0!==i.type&&2===n.type&&-1!==i.boneIndex&&-1!==n.boneIndex&&t.bones[n.boneIndex].parentIndex===i.boneIndex&&(n.type=1),m.push(r)}const T=new Er;T.setAttribute("position",new fr(e,3)),T.setAttribute("normal",new fr(r,3)),T.setAttribute("uv",new fr(s,2)),T.setAttribute("skinIndex",new ur(a,4)),T.setAttribute("skinWeight",new fr(h,4)),T.setIndex(i);for(let t=0,e=n.length;t<e;t++)T.addGroup(n[t].offset,n[t].count,t);return T.bones=o,T.morphTargets=c,T.morphAttributes.position=l,T.morphTargetsRelative=!1,T.userData.MMD={bones:o,iks:u,grants:p,rigidBodies:d,constraints:m,format:t.metadata.format},T.computeBoundingSphere(),T}}class iM{constructor(t){this.manager=t,this.textureLoader=new ol(this.manager),this.tgaLoader=null,this.crossOrigin="anonymous",this.resourcePath=void 0}setCrossOrigin(t){return this.crossOrigin=t,this}setResourcePath(t){return this.resourcePath=t,this}build(t,e){const s=[],r={};this.textureLoader.setCrossOrigin(this.crossOrigin);for(let i=0;i<t.metadata.materialCount;i++){const n=t.materials[i],o={userData:{MMD:{}}};if(void 0!==n.name&&(o.name=n.name),o.diffuse=(new Ae).fromArray(n.diffuse),o.opacity=n.diffuse[3],o.specular=(new Ae).fromArray(n.specular),o.shininess=n.shininess,o.emissive=(new Ae).fromArray(n.ambient),o.transparent=1!==o.opacity,o.fog=!0,o.blending=5,o.blendSrc=M,o.blendDst=P,o.blendSrcAlpha=M,o.blendDstAlpha=206,"pmx"===t.metadata.format&&1==(1&n.flag)?o.side=2:o.side=1===o.opacity?0:2,"pmd"===t.metadata.format){if(n.fileName){const t=n.fileName.split("*");if(o.map=this._loadTexture(t[0],r),t.length>1){const e=t[1].slice(-4).toLowerCase();o.envMap=this._loadTexture(t[1],r),o.combine=".sph"===e?0:2}}const e=-1===n.toonIndex?"toon00.bmp":t.toonTextures[n.toonIndex].fileName;o.gradientMap=this._loadTexture(e,r,{isToonTexture:!0,isDefaultToonTexture:this._isDefaultToonTexture(e)}),o.userData.outlineParameters={thickness:1===n.edgeFlag?.003:0,color:[0,0,0],alpha:1,visible:1===n.edgeFlag}}else{let e,s;-1!==n.textureIndex&&(o.map=this._loadTexture(t.textures[n.textureIndex],r),o.userData.MMD.mapFileName=t.textures[n.textureIndex]),-1===n.envTextureIndex||1!==n.envFlag&&2!=n.envFlag||(o.matcap=this._loadTexture(t.textures[n.envTextureIndex],r),o.userData.MMD.matcapFileName=t.textures[n.envTextureIndex],o.matcapCombine=1===n.envFlag?0:2),-1===n.toonIndex||0!==n.toonFlag?(e="toon"+("0"+(n.toonIndex+1)).slice(-2)+".bmp",s=!0):(e=t.textures[n.toonIndex],s=!1),o.gradientMap=this._loadTexture(e,r,{isToonTexture:!0,isDefaultToonTexture:s}),o.userData.outlineParameters={thickness:n.edgeSize/300,color:n.edgeColor.slice(0,3),alpha:n.edgeColor[3],visible:0!=(16&n.flag)&&n.edgeSize>0}}void 0!==o.map&&(o.transparent||this._checkImageTransparency(o.map,e,i),o.emissive.multiplyScalar(.2)),s.push(new aM(o))}if("pmx"===t.metadata.format){function i(t,e){for(let s=0,r=t.length;s<r;s++){const r=t[s];if(-1===r.index)continue;const i=e[r.index];i.opacity!==r.diffuse[3]&&(i.transparent=!0)}}for(let e=0,r=t.morphs.length;e<r;e++){const r=t.morphs[e],n=r.elements;if(0===r.type)for(let e=0,r=n.length;e<r;e++){const r=t.morphs[n[e].index];8===r.type&&i(r.elements,s)}else 8===r.type&&i(n,s)}}return s}_getTGALoader(){if(null===this.tgaLoader){if(void 0===Om)throw new Error("THREE.MMDLoader: Import TGALoader");this.tgaLoader=new Om(this.manager)}return this.tgaLoader}_isDefaultToonTexture(t){return 10===t.length&&/toon(10|0[0-9])\.bmp/.test(t)}_loadTexture(t,e,s,r,i){const n=this;let o;if(!0===(s=s||{}).isDefaultToonTexture){let e;try{e=parseInt(t.match(/toon([0-9]{2})\.bmp$/)[1])}catch(s){console.warn("THREE.MMDLoader: "+t+" seems like a not right default texture path. Using toon00.bmp instead."),e=0}o=tM[e]}else o=this.resourcePath+t;if(void 0!==e[o])return e[o];let a=this.manager.getHandler(o);null===a&&(a=".tga"===t.slice(-4).toLowerCase()?this._getTGALoader():this.textureLoader);const h=a.load(o,(function(t){!0===s.isToonTexture&&(t.image=n._getRotatedImage(t.image),t.magFilter=V,t.minFilter=V),t.flipY=!1,t.wrapS=G,t.wrapT=G;for(let t=0;t<h.readyCallbacks.length;t++)h.readyCallbacks[t](h);delete h.readyCallbacks}),r,i);return h.readyCallbacks=[],e[o]=h,h}_getRotatedImage(t){const e=document.createElement("canvas"),s=e.getContext("2d"),r=t.width,i=t.height;return e.width=r,e.height=i,s.clearRect(0,0,r,i),s.translate(r/2,i/2),s.rotate(.5*Math.PI),s.translate(-r/2,-i/2),s.drawImage(t,0,0),s.getImageData(0,0,r,i)}_checkImageTransparency(t,e,s){t.readyCallbacks.push((function(r){function i(t,e){const s=t.width,r=t.height;let i=Math.round(e.x*s)%s,n=Math.round(e.y*r)%r;i<0&&(i+=s),n<0&&(n+=r);const o=n*s+i;return t.data[4*o+3]}if(!0===r.isCompressedTexture)return void(eM.includes(r.format)?t.transparent=!1:t.transparent=!0);const n=void 0!==r.image.data?r.image:function(t){const e=document.createElement("canvas");e.width=t.width,e.height=t.height;const s=e.getContext("2d");return s.drawImage(t,0,0),s.getImageData(0,0,e.width,e.height)}(r.image),o=e.groups[s];(function(t,e,s){const r=t.width,n=t.height;if(t.data.length/(r*n)!=4)return!1;for(let r=0;r<s.length;r+=3){const n={x:0,y:0};for(let o=0;o<3;o++){const a=s[3*r+o],h={x:e[2*a+0],y:e[2*a+1]};if(i(t,h)<253)return!0;n.x+=h.x,n.y+=h.y}if(n.x/=3,n.y/=3,i(t,n)<253)return!0}return!1})(n,e.attributes.uv.array,e.index.array.slice(o.start,o.start+o.count))&&(t.transparent=!0)}))}}class nM{build(t,e){const s=this.buildSkeletalAnimation(t,e).tracks,r=this.buildMorphAnimation(t,e).tracks;for(let t=0,e=r.length;t<e;t++)s.push(r[t]);return new qc("",-1,s)}buildSkeletalAnimation(t,e){function s(t,e,s){t.push(e[s+0]/127),t.push(e[s+8]/127),t.push(e[s+4]/127),t.push(e[s+12]/127)}const r=[],i={},n=e.skeleton.bones,o={};for(let t=0,e=n.length;t<e;t++)o[n[t].name]=!0;for(let e=0;e<t.metadata.motionCount;e++){const s=t.motions[e],r=s.boneName;void 0!==o[r]&&(i[r]=i[r]||[],i[r].push(s))}for(const t in i){const n=i[t];n.sort((function(t,e){return t.frameNum-e.frameNum}));const o=[],a=[],h=[],c=[],l=[],u=e.skeleton.getBoneByName(t).position.toArray();for(let t=0,e=n.length;t<e;t++){const e=n[t].frameNum/30,r=n[t].position,i=n[t].rotation,p=n[t].interpolation;o.push(e);for(let t=0;t<3;t++)a.push(u[t]+r[t]);for(let t=0;t<4;t++)h.push(i[t]);for(let t=0;t<3;t++)s(c,p,t);s(l,p,3)}const p=".bones["+t+"]";r.push(this._createTrack(p+".position",Xc,o,a,c)),r.push(this._createTrack(p+".quaternion",Wc,o,h,l))}return new qc("",-1,r)}buildMorphAnimation(t,e){const s=[],r={},i=e.morphTargetDictionary;for(let e=0;e<t.metadata.morphCount;e++){const s=t.morphs[e],n=s.morphName;void 0!==i[n]&&(r[n]=r[n]||[],r[n].push(s))}for(const t in r){const e=r[t];e.sort((function(t,e){return t.frameNum-e.frameNum}));const n=[],o=[];for(let t=0,s=e.length;t<s;t++)n.push(e[t].frameNum/30),o.push(e[t].weight);s.push(new zc(".morphTargetInfluences["+i[t]+"]",n,o))}return new qc("",-1,s)}buildCameraAnimation(t){function e(t,e){t.push(e.x),t.push(e.y),t.push(e.z)}function s(t,e,s){t.push(e[4*s+0]/127),t.push(e[4*s+1]/127),t.push(e[4*s+2]/127),t.push(e[4*s+3]/127)}const r=void 0===t.cameras?[]:t.cameras.slice();r.sort((function(t,e){return t.frameNum-e.frameNum}));const i=[],n=[],o=[],a=[],h=[],c=[],l=[],u=[],p=[],d=new Be,m=new Cs,f=new Ge,g=new Ge;for(let t=0,v=r.length;t<v;t++){const v=r[t],b=v.frameNum/30,w=v.position,x=v.rotation,I=v.distance,E=v.fov,S=v.interpolation;i.push(b),f.set(0,0,-I),g.set(w[0],w[1],w[2]),m.set(-x[0],-x[1],-x[2]),d.setFromEuler(m),f.add(g),f.applyQuaternion(d),e(n,g),(y=o).push((T=d).x),y.push(T.y),y.push(T.z),y.push(T.w),e(a,f),h.push(E);for(let t=0;t<3;t++)s(c,S,t);s(l,S,3);for(let t=0;t<3;t++)s(u,S,4);s(p,S,5)}var y,T;const v=[];return v.push(this._createTrack("target.position",Xc,i,n,c)),v.push(this._createTrack(".quaternion",Wc,i,o,l)),v.push(this._createTrack(".position",Xc,i,a,u)),v.push(this._createTrack(".fov",zc,i,h,p)),new qc("",-1,v)}_createTrack(t,e,s,r,i){if(s.length>2){s=s.slice(),r=r.slice(),i=i.slice();const t=r.length/s.length,e=i.length/s.length;let n=1;for(let o=2,a=s.length;o<a;o++){for(let e=0;e<t;e++)if(r[n*t+e]!==r[(n-1)*t+e]||r[n*t+e]!==r[o*t+e]){n++;break}if(o>n){s[n]=s[o];for(let e=0;e<t;e++)r[n*t+e]=r[o*t+e];for(let t=0;t<e;t++)i[n*e+t]=i[o*e+t]}}s.length=n+1,r.length=(n+1)*t,i.length=(n+1)*e}const n=new e(t,s,r);return n.createInterpolant=function(t){return new oM(this.times,this.values,this.getValueSize(),t,new Float32Array(i))},n}}class oM extends Lc{constructor(t,e,s,r,i){super(t,e,s,r),this.interpolationParams=i}interpolate_(t,e,s,r){const i=this.resultBuffer,n=this.sampleValues,o=this.valueSize,a=this.interpolationParams,h=t*o,c=h-o,l=r-e<.05?0:(s-e)/(r-e);if(4===o){const e=a[4*t+0],s=a[4*t+1],r=a[4*t+2],o=a[4*t+3],u=this._calculate(e,s,r,o,l);Be.slerpFlat(i,0,n,c,n,h,u)}else if(3===o)for(let e=0;e!==o;++e){const s=a[12*t+4*e+0],r=a[12*t+4*e+1],o=a[12*t+4*e+2],u=a[12*t+4*e+3],p=this._calculate(s,r,o,u,l);i[e]=n[c+e]*(1-p)+n[h+e]*p}else{const e=a[4*t+0],s=a[4*t+1],r=a[4*t+2],o=a[4*t+3],u=this._calculate(e,s,r,o,l);i[0]=n[c]*(1-u)+n[h]*u}return i}_calculate(t,e,s,r,i){let n=.5,o=n,a=1-o;const h=Math;let c,l,u;for(let s=0;s<15;s++){c=3*a*a*o,l=3*a*o*o,u=o*o*o;const s=c*t+l*e+u-i;if(h.abs(s)<1e-5)break;n/=2,o+=s<0?n:-n,a=1-o}return c*s+l*r+u}}class aM extends qr{constructor(t){super(),this._matcapCombine=2,this.emissiveIntensity=1,this.normalMapType=0,this.combine=0,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.lights=!0,this.vertexShader=XF.vertexShader,this.fragmentShader=XF.fragmentShader,this.defines=Object.assign({},XF.defines),Object.defineProperty(this,"matcapCombine",{get:function(){return this._matcapCombine},set:function(t){switch(this._matcapCombine=t,t){case 0:this.defines.MATCAP_BLENDING_MULTIPLY=!0,delete this.defines.MATCAP_BLENDING_ADD;break;default:case 2:this.defines.MATCAP_BLENDING_ADD=!0,delete this.defines.MATCAP_BLENDING_MULTIPLY}}}),this.uniforms=Xr.clone(XF.uniforms);const e=["specular","opacity","diffuse","map","matcap","gradientMap","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveMap","bumpMap","bumpScale","normalMap","normalScale","displacemantBias","displacemantMap","displacemantScale","specularMap","alphaMap","envMap","reflectivity","refractionRatio"];for(const t of e)Object.defineProperty(this,t,{get:function(){return this.uniforms[t].value},set:function(e){this.uniforms[t].value=e}});this._shininess=30,Object.defineProperty(this,"shininess",{get:function(){return this._shininess},set:function(t){this._shininess=t,this.uniforms.shininess.value=Math.max(this._shininess,1e-4)}}),Object.defineProperty(this,"color",Object.getOwnPropertyDescriptor(this,"diffuse")),this.setValues(t)}copy(t){return super.copy(t),this.matcapCombine=t.matcapCombine,this.emissiveIntensity=t.emissiveIntensity,this.normalMapType=t.normalMapType,this.combine=t.combine,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this}}aM.prototype.isMMDToonMaterial=!0;class hM extends Qc{constructor(t){super(t)}load(t,e,s,r){const i=this,n=""===this.path?Rl.extractUrlBase(t):this.path,o=new el(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,(function(s){try{e(i.parse(s,n))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),s,r)}setMaterialOptions(t){return this.materialOptions=t,this}parse(t,e){const s=t.split("\n");let r={};const i=/\s+/,n={};for(let t=0;t<s.length;t++){let e=s[t];if(e=e.trim(),0===e.length||"#"===e.charAt(0))continue;const o=e.indexOf(" ");let a=o>=0?e.substring(0,o):e;a=a.toLowerCase();let h=o>=0?e.substring(o+1):"";if(h=h.trim(),"newmtl"===a)r={name:h},n[h]=r;else if("ka"===a||"kd"===a||"ks"===a||"ke"===a){const t=h.split(i,3);r[a]=[parseFloat(t[0]),parseFloat(t[1]),parseFloat(t[2])]}else r[a]=h}const o=new cM(this.resourcePath||e,this.materialOptions);return o.setCrossOrigin(this.crossOrigin),o.setManager(this.manager),o.setMaterials(n),o}}class cM{constructor(t="",e={}){this.baseUrl=t,this.options=e,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=void 0!==this.options.side?this.options.side:0,this.wrap=void 0!==this.options.wrap?this.options.wrap:G}setCrossOrigin(t){return this.crossOrigin=t,this}setManager(t){this.manager=t}setMaterials(t){this.materialsInfo=this.convert(t),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(t){if(!this.options)return t;const e={};for(const s in t){const r=t[s],i={};e[s]=i;for(const t in r){let e=!0,s=r[t];const n=t.toLowerCase();switch(n){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(s=[s[0]/255,s[1]/255,s[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===s[0]&&0===s[1]&&0===s[2]&&(e=!1)}e&&(i[n]=s)}}return e}preload(){for(const t in this.materialsInfo)this.create(t)}getIndex(t){return this.nameLookup[t]}getAsArray(){let t=0;for(const e in this.materialsInfo)this.materialsArray[t]=this.create(e),this.nameLookup[e]=t,t++;return this.materialsArray}create(t){return void 0===this.materials[t]&&this.createMaterial_(t),this.materials[t]}createMaterial_(t){const e=this,s=this.materialsInfo[t],r={name:t,side:this.side};function i(t,s){if(r[t])return;const i=e.getTextureParams(s,r),n=e.loadTexture((o=e.baseUrl,"string"!=typeof(a=i.url)||""===a?"":/^https?:\/\//i.test(a)?a:o+a));var o,a;n.repeat.copy(i.scale),n.offset.copy(i.offset),n.wrapS=e.wrap,n.wrapT=e.wrap,"map"!==t&&"emissiveMap"!==t||(n.encoding=zt),r[t]=n}for(const t in s){const e=s[t];let n;if(""!==e)switch(t.toLowerCase()){case"kd":r.color=(new Ae).fromArray(e).convertSRGBToLinear();break;case"ks":r.specular=(new Ae).fromArray(e).convertSRGBToLinear();break;case"ke":r.emissive=(new Ae).fromArray(e).convertSRGBToLinear();break;case"map_kd":i("map",e);break;case"map_ks":i("specularMap",e);break;case"map_ke":i("emissiveMap",e);break;case"norm":i("normalMap",e);break;case"map_bump":case"bump":i("bumpMap",e);break;case"map_d":i("alphaMap",e),r.transparent=!0;break;case"ns":r.shininess=parseFloat(e);break;case"d":n=parseFloat(e),n<1&&(r.opacity=n,r.transparent=!0);break;case"tr":n=parseFloat(e),this.options&&this.options.invertTrProperty&&(n=1-n),n>0&&(r.opacity=1-n,r.transparent=!0)}}return this.materials[t]=new Cc(r),this.materials[t]}getTextureParams(t,e){const s={scale:new le(1,1),offset:new le(0,0)},r=t.split(/\s+/);let i;return i=r.indexOf("-bm"),i>=0&&(e.bumpScale=parseFloat(r[i+1]),r.splice(i,2)),i=r.indexOf("-s"),i>=0&&(s.scale.set(parseFloat(r[i+1]),parseFloat(r[i+2])),r.splice(i,4)),i=r.indexOf("-o"),i>=0&&(s.offset.set(parseFloat(r[i+1]),parseFloat(r[i+2])),r.splice(i,4)),s.url=r.join(" ").trim(),s}loadTexture(t,e,s,r,i){const n=void 0!==this.manager?this.manager:Zc;let o=n.getHandler(t);null===o&&(o=new ol(n)),o.setCrossOrigin&&o.setCrossOrigin(this.crossOrigin);const a=o.load(t,s,r,i);return void 0!==e&&(a.mapping=e),a}}function lM(t,e,s){const r=this;this.volume=t,e=e||0,Object.defineProperty(this,"index",{get:function(){return e},set:function(t){return e=t,r.geometryNeedsUpdate=!0,e}}),this.axis=s||"z",this.canvas=document.createElement("canvas"),this.canvasBuffer=document.createElement("canvas"),this.updateGeometry();const i=new Fe(this.canvas);i.minFilter=X,i.wrapS=i.wrapT=j;const n=new rr({map:i,side:2,transparent:!0});this.mesh=new jr(this.geometry,n),this.mesh.matrixAutoUpdate=!1,this.geometryNeedsUpdate=!0,this.repaint()}function uM(t,e,s,r,i){if(arguments.length>0){switch(this.xLength=Number(t)||1,this.yLength=Number(e)||1,this.zLength=Number(s)||1,this.axisOrder=["x","y","z"],r){case"Uint8":case"uint8":case"uchar":case"unsigned char":case"uint8_t":this.data=new Uint8Array(i);break;case"Int8":case"int8":case"signed char":case"int8_t":this.data=new Int8Array(i);break;case"Int16":case"int16":case"short":case"short int":case"signed short":case"signed short int":case"int16_t":this.data=new Int16Array(i);break;case"Uint16":case"uint16":case"ushort":case"unsigned short":case"unsigned short int":case"uint16_t":this.data=new Uint16Array(i);break;case"Int32":case"int32":case"int":case"signed int":case"int32_t":this.data=new Int32Array(i);break;case"Uint32":case"uint32":case"uint":case"unsigned int":case"uint32_t":this.data=new Uint32Array(i);break;case"longlong":case"long long":case"long long int":case"signed long long":case"signed long long int":case"int64":case"int64_t":case"ulonglong":case"unsigned long long":case"unsigned long long int":case"uint64":case"uint64_t":throw new Error("Error in Volume constructor : this type is not supported in JavaScript");case"Float32":case"float32":case"float":this.data=new Float32Array(i);break;case"Float64":case"float64":case"double":this.data=new Float64Array(i);break;default:this.data=new Uint8Array(i)}if(this.data.length!==this.xLength*this.yLength*this.zLength)throw new Error("Error in Volume constructor, lengths are not matching arrayBuffer size")}this.spacing=[1,1,1],this.offset=[0,0,0],this.matrix=new ue,this.matrix.identity();let n=-1/0;Object.defineProperty(this,"lowerThreshold",{get:function(){return n},set:function(t){n=t,this.sliceList.forEach((function(t){t.geometryNeedsUpdate=!0}))}});let o=1/0;Object.defineProperty(this,"upperThreshold",{get:function(){return o},set:function(t){o=t,this.sliceList.forEach((function(t){t.geometryNeedsUpdate=!0}))}}),this.sliceList=[]}lM.prototype={constructor:lM,repaint:function(){this.geometryNeedsUpdate&&this.updateGeometry();const t=this.iLength,e=this.jLength,s=this.sliceAccess,r=this.volume,i=this.canvasBuffer,n=this.ctxBuffer,o=n.getImageData(0,0,t,e),a=o.data,h=r.data,c=r.upperThreshold,l=r.lowerThreshold,u=r.windowLow,p=r.windowHigh;let d=0;if("label"===r.dataType)for(let r=0;r<e;r++)for(let e=0;e<t;e++){let t=h[s(e,r)];t=t>=this.colorMap.length?t%this.colorMap.length+1:t;const i=this.colorMap[t];a[4*d]=i>>24&255,a[4*d+1]=i>>16&255,a[4*d+2]=i>>8&255,a[4*d+3]=255&i,d++}else for(let r=0;r<e;r++)for(let e=0;e<t;e++){let t=h[s(e,r)],i=255;i=c>=t&&l<=t?i:0,t=Math.floor(255*(t-u)/(p-u)),t=t>255?255:t<0?0:0|t,a[4*d]=t,a[4*d+1]=t,a[4*d+2]=t,a[4*d+3]=i,d++}n.putImageData(o,0,0),this.ctx.drawImage(i,0,0,t,e,0,0,this.canvas.width,this.canvas.height),this.mesh.material.map.needsUpdate=!0},updateGeometry:function(){const t=this.volume.extractPerpendicularPlane(this.axis,this.index);this.sliceAccess=t.sliceAccess,this.jLength=t.jLength,this.iLength=t.iLength,this.matrix=t.matrix,this.canvas.width=t.planeWidth,this.canvas.height=t.planeHeight,this.canvasBuffer.width=this.iLength,this.canvasBuffer.height=this.jLength,this.ctx=this.canvas.getContext("2d"),this.ctxBuffer=this.canvasBuffer.getContext("2d"),this.geometry&&this.geometry.dispose(),this.geometry=new li(t.planeWidth,t.planeHeight),this.mesh&&(this.mesh.geometry=this.geometry,this.mesh.matrix.identity(),this.mesh.applyMatrix4(this.matrix)),this.geometryNeedsUpdate=!1}},uM.prototype={constructor:uM,getData:function(t,e,s){return this.data[s*this.xLength*this.yLength+e*this.xLength+t]},access:function(t,e,s){return s*this.xLength*this.yLength+e*this.xLength+t},reverseAccess:function(t){const e=Math.floor(t/(this.yLength*this.xLength)),s=Math.floor((t-e*this.yLength*this.xLength)/this.xLength);return[t-e*this.yLength*this.xLength-s*this.xLength,s,e]},map:function(t,e){const s=this.data.length;e=e||this;for(let r=0;r<s;r++)this.data[r]=t.call(e,this.data[r],r,this.data);return this},extractPerpendicularPlane:function(t,e){let s,r,i,n;const o=new Ge,a=new Ge,h=new Ge,c=(new Ts).identity(),l=this,u=new Ge(this.xLength,this.yLength,this.zLength);switch(t){case"x":o.set(1,0,0),a.set(0,0,-1),h.set(0,-1,0),s=this.spacing[this.axisOrder.indexOf("z")],r=this.spacing[this.axisOrder.indexOf("y")],n=new Ge(e,0,0),c.multiply((new Ts).makeRotationY(Math.PI/2)),i=(l.RASDimensions[0]-1)/2,c.setPosition(new Ge(e-i,0,0));break;case"y":o.set(0,1,0),a.set(1,0,0),h.set(0,0,1),s=this.spacing[this.axisOrder.indexOf("x")],r=this.spacing[this.axisOrder.indexOf("z")],n=new Ge(0,e,0),c.multiply((new Ts).makeRotationX(-Math.PI/2)),i=(l.RASDimensions[1]-1)/2,c.setPosition(new Ge(0,e-i,0));break;case"z":default:o.set(0,0,1),a.set(1,0,0),h.set(0,-1,0),s=this.spacing[this.axisOrder.indexOf("x")],r=this.spacing[this.axisOrder.indexOf("y")],n=new Ge(0,0,e),i=(l.RASDimensions[2]-1)/2,c.setPosition(new Ge(0,0,e-i))}a.applyMatrix4(l.inverseMatrix).normalize(),a.arglet="i",h.applyMatrix4(l.inverseMatrix).normalize(),h.arglet="j",o.applyMatrix4(l.inverseMatrix).normalize();const p=Math.floor(Math.abs(a.dot(u))),d=Math.floor(Math.abs(h.dot(u))),m=Math.abs(p*s),f=Math.abs(d*r);n=Math.abs(Math.round(n.applyMatrix4(l.inverseMatrix).dot(o)));const g=[new Ge(1,0,0),new Ge(0,1,0),new Ge(0,0,1)],y=[a,h,o].find((function(t){return Math.abs(t.dot(g[0]))>.9})),T=[a,h,o].find((function(t){return Math.abs(t.dot(g[1]))>.9})),v=[a,h,o].find((function(t){return Math.abs(t.dot(g[2]))>.9}));return{iLength:p,jLength:d,sliceAccess:function(t,e){const s=y===o?n:"i"===y.arglet?t:e,r=T===o?n:"i"===T.arglet?t:e,i=v===o?n:"i"===v.arglet?t:e,a=y.dot(g[0])>0?s:l.xLength-1-s,h=T.dot(g[1])>0?r:l.yLength-1-r,c=v.dot(g[2])>0?i:l.zLength-1-i;return l.access(a,h,c)},matrix:c,planeWidth:m,planeHeight:f}},extractSlice:function(t,e){const s=new lM(this,e,t);return this.sliceList.push(s),s},repaintAllSlices:function(){return this.sliceList.forEach((function(t){t.repaint()})),this},computeMinMax:function(){let t=1/0,e=-1/0;const s=this.data.length;let r=0;for(r=0;r<s;r++)if(!isNaN(this.data[r])){const s=this.data[r];t=Math.min(t,s),e=Math.max(e,s)}return this.min=t,this.max=e,[t,e]}};class pM extends Qc{constructor(t){super(t)}load(t,e,s,r){const i=this,n=new el(i.manager);n.setPath(i.path),n.setResponseType("arraybuffer"),n.setRequestHeader(i.requestHeader),n.setWithCredentials(i.withCredentials),n.load(t,(function(s){try{e(i.parse(s))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),s,r)}parse(t){let e=t,s=0;const r=new Int8Array(new Int16Array([1]).buffer)[0]>0,i={};const n=function(t,i){null==i&&(i=1);let n=1,o=Uint8Array;switch(t){case"uchar":break;case"schar":o=Int8Array;break;case"ushort":o=Uint16Array,n=2;break;case"sshort":o=Int16Array,n=2;break;case"uint":o=Uint32Array,n=4;break;case"sint":o=Int32Array,n=4;break;case"float":o=Float32Array,n=4;break;case"complex":case"double":o=Float64Array,n=8}let a=new o(e.slice(s,s+=i*n));return true!=r&&(a=function(t,e){const s=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);for(let r=0;r<t.byteLength;r+=e)for(let t=r+e-1,i=r;t>i;t--,i++){const e=s[i];s[i]=s[t],s[t]=e}return t}(a,n)),1==i?a[0]:a}("uchar",t.byteLength),o=n.length;let a,h=null,c=0;for(a=1;a<o;a++)if(10==n[a-1]&&10==n[a]){h=this.parseChars(n,0,a-2),c=a+1;break}if(function(t){let e,s,r,n,o,a,h,c;const l=t.split(/\r?\n/);for(h=0,c=l.length;h<c;h++)o=l[h],o.match(/NRRD\d+/)?i.isNrrd=!0:o.match(/^#/)||(a=o.match(/(.*):(.*)/))&&(s=a[1].trim(),e=a[2].trim(),r=dM[s],r?r.call(i,e):i[s]=e);if(!i.isNrrd)throw new Error("Not an NRRD file");if("bz2"===i.encoding||"bzip2"===i.encoding)throw new Error("Bzip is not supported");if(!i.vectors&&(i.vectors=[],i.vectors.push([1,0,0]),i.vectors.push([0,1,0]),i.vectors.push([0,0,1]),i.spacings))for(n=0;n<=2;n++)if(!isNaN(i.spacings[n]))for(let t=0;t<=2;t++)i.vectors[n][t]*=i.spacings[n]}(h),e=n.subarray(c),"gz"===i.encoding.substring(0,2))e=Vd(new Uint8Array(e));else if("ascii"===i.encoding||"text"===i.encoding||"txt"===i.encoding||"hex"===i.encoding)e=function(t,e,s){let r,n="";e=e||0,s=s||t.length;const o=i.sizes.reduce((function(t,e){return t*e}),1);let a=10;"hex"===i.encoding&&(a=16);const h=new i.__array(o);let c=0,l=parseInt;i.__array!==Float32Array&&i.__array!==Float64Array||(l=parseFloat);for(let i=e;i<s;i++)r=t[i],(r<9||r>13)&&32!==r?n+=String.fromCharCode(r):(""!==n&&(h[c]=l(n,a),c++),n="");return""!==n&&(h[c]=l(n,a),c++),h}(e);else if("raw"===i.encoding){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e[s];e=t}e=e.buffer;const l=new uM;l.header=i,l.data=new i.__array(e);const u=l.computeMinMax(),p=u[0],d=u[1];if(l.windowLow=p,l.windowHigh=d,l.dimensions=[i.sizes[0],i.sizes[1],i.sizes[2]],l.xLength=l.dimensions[0],l.yLength=l.dimensions[1],l.zLength=l.dimensions[2],i.vectors){const t=i.vectors.findIndex((t=>0!==t[0])),e=i.vectors.findIndex((t=>0!==t[1])),s=i.vectors.findIndex((t=>0!==t[2])),r=[];r[t]="x",r[e]="y",r[s]="z",l.axisOrder=r}else l.axisOrder=["x","y","z"];const m=(new Ge).fromArray(i.vectors[0]).length(),f=(new Ge).fromArray(i.vectors[1]).length(),g=(new Ge).fromArray(i.vectors[2]).length();l.spacing=[m,f,g],l.matrix=new Ts;const y=new Ts;if("left-posterior-superior"===i.space?y.set(-1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1):"left-anterior-superior"===i.space&&y.set(1,0,0,0,0,1,0,0,0,0,-1,0,0,0,0,1),i.vectors){const t=i.vectors,e=(new Ts).set(t[0][0],t[1][0],t[2][0],0,t[0][1],t[1][1],t[2][1],0,t[0][2],t[1][2],t[2][2],0,0,0,0,1),s=(new Ts).multiplyMatrices(e,y);l.matrix=s}else l.matrix.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return l.inverseMatrix=new Ts,l.inverseMatrix.copy(l.matrix).invert(),l.RASDimensions=new Ge(l.xLength,l.yLength,l.zLength).applyMatrix4(l.matrix).round().toArray().map(Math.abs),l.lowerThreshold===-1/0&&(l.lowerThreshold=p),l.upperThreshold===1/0&&(l.upperThreshold=d),l}parseChars(t,e,s){void 0===e&&(e=0),void 0===s&&(s=t.length);let r="",i=0;for(i=e;i<s;++i)r+=String.fromCharCode(t[i]);return r}}const dM={type:function(t){switch(t){case"uchar":case"unsigned char":case"uint8":case"uint8_t":this.__array=Uint8Array;break;case"signed char":case"int8":case"int8_t":this.__array=Int8Array;break;case"short":case"short int":case"signed short":case"signed short int":case"int16":case"int16_t":this.__array=Int16Array;break;case"ushort":case"unsigned short":case"unsigned short int":case"uint16":case"uint16_t":this.__array=Uint16Array;break;case"int":case"signed int":case"int32":case"int32_t":this.__array=Int32Array;break;case"uint":case"unsigned int":case"uint32":case"uint32_t":this.__array=Uint32Array;break;case"float":this.__array=Float32Array;break;case"double":this.__array=Float64Array;break;default:throw new Error("Unsupported NRRD data type: "+t)}return this.type=t},endian:function(t){return this.endian=t},encoding:function(t){return this.encoding=t},dimension:function(t){return this.dim=parseInt(t,10)},sizes:function(t){let e;return this.sizes=function(){const s=t.split(/\s+/),r=[];for(let t=0,i=s.length;t<i;t++)e=s[t],r.push(parseInt(e,10));return r}()},space:function(t){return this.space=t},"space origin":function(t){return this.space_origin=t.split("(")[1].split(")")[0].split(",")},"space directions":function(t){let e,s;const r=t.match(/\(.*?\)/g);return this.vectors=function(){const t=[];for(let i=0,n=r.length;i<n;i++)s=r[i],t.push(function(){const t=s.slice(1,-1).split(/,/),r=[];for(let s=0,i=t.length;s<i;s++)e=t[s],r.push(parseFloat(e));return r}());return t}()},spacings:function(t){let e;const s=t.split(/\s+/);return this.spacings=function(){const t=[];for(let r=0,i=s.length;r<i;r++)e=s[r],t.push(parseFloat(e));return t}()}},mM=/^[og]\s*(.+)?/,fM=/^mtllib /,gM=/^usemtl /,yM=/^usemap /,TM=new Ge,vM=new Ge,bM=new Ge,wM=new Ge,xM=new Ge,IM=new Ae;function EM(){const t={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(t,e){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=t,void(this.object.fromDeclaration=!1!==e);const s=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:t||"",fromDeclaration:!1!==e,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(t,e){const s=this._finalize(!1);s&&(s.inherited||s.groupCount<=0)&&this.materials.splice(s.index,1);const r={index:this.materials.length,name:t||"",mtllib:Array.isArray(e)&&e.length>0?e[e.length-1]:"",smooth:void 0!==s?s.smooth:this.smooth,groupStart:void 0!==s?s.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(t){const e={index:"number"==typeof t?t:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return e.clone=this.clone.bind(e),e}};return this.materials.push(r),r},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(t){const e=this.currentMaterial();if(e&&-1===e.groupEnd&&(e.groupEnd=this.geometry.vertices.length/3,e.groupCount=e.groupEnd-e.groupStart,e.inherited=!1),t&&this.materials.length>1)for(let t=this.materials.length-1;t>=0;t--)this.materials[t].groupCount<=0&&this.materials.splice(t,1);return t&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),e}},s&&s.name&&"function"==typeof s.clone){const t=s.clone(0);t.inherited=!0,this.object.materials.push(t)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(t,e){const s=parseInt(t,10);return 3*(s>=0?s-1:s+e/3)},parseNormalIndex:function(t,e){const s=parseInt(t,10);return 3*(s>=0?s-1:s+e/3)},parseUVIndex:function(t,e){const s=parseInt(t,10);return 2*(s>=0?s-1:s+e/2)},addVertex:function(t,e,s){const r=this.vertices,i=this.object.geometry.vertices;i.push(r[t+0],r[t+1],r[t+2]),i.push(r[e+0],r[e+1],r[e+2]),i.push(r[s+0],r[s+1],r[s+2])},addVertexPoint:function(t){const e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])},addVertexLine:function(t){const e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])},addNormal:function(t,e,s){const r=this.normals,i=this.object.geometry.normals;i.push(r[t+0],r[t+1],r[t+2]),i.push(r[e+0],r[e+1],r[e+2]),i.push(r[s+0],r[s+1],r[s+2])},addFaceNormal:function(t,e,s){const r=this.vertices,i=this.object.geometry.normals;TM.fromArray(r,t),vM.fromArray(r,e),bM.fromArray(r,s),xM.subVectors(bM,vM),wM.subVectors(TM,vM),xM.cross(wM),xM.normalize(),i.push(xM.x,xM.y,xM.z),i.push(xM.x,xM.y,xM.z),i.push(xM.x,xM.y,xM.z)},addColor:function(t,e,s){const r=this.colors,i=this.object.geometry.colors;void 0!==r[t]&&i.push(r[t+0],r[t+1],r[t+2]),void 0!==r[e]&&i.push(r[e+0],r[e+1],r[e+2]),void 0!==r[s]&&i.push(r[s+0],r[s+1],r[s+2])},addUV:function(t,e,s){const r=this.uvs,i=this.object.geometry.uvs;i.push(r[t+0],r[t+1]),i.push(r[e+0],r[e+1]),i.push(r[s+0],r[s+1])},addDefaultUV:function(){const t=this.object.geometry.uvs;t.push(0,0),t.push(0,0),t.push(0,0)},addUVLine:function(t){const e=this.uvs;this.object.geometry.uvs.push(e[t+0],e[t+1])},addFace:function(t,e,s,r,i,n,o,a,h){const c=this.vertices.length;let l=this.parseVertexIndex(t,c),u=this.parseVertexIndex(e,c),p=this.parseVertexIndex(s,c);if(this.addVertex(l,u,p),this.addColor(l,u,p),void 0!==o&&""!==o){const t=this.normals.length;l=this.parseNormalIndex(o,t),u=this.parseNormalIndex(a,t),p=this.parseNormalIndex(h,t),this.addNormal(l,u,p)}else this.addFaceNormal(l,u,p);if(void 0!==r&&""!==r){const t=this.uvs.length;l=this.parseUVIndex(r,t),u=this.parseUVIndex(i,t),p=this.parseUVIndex(n,t),this.addUV(l,u,p),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(t){this.object.geometry.type="Points";const e=this.vertices.length;for(let s=0,r=t.length;s<r;s++){const r=this.parseVertexIndex(t[s],e);this.addVertexPoint(r),this.addColor(r)}},addLineGeometry:function(t,e){this.object.geometry.type="Line";const s=this.vertices.length,r=this.uvs.length;for(let e=0,r=t.length;e<r;e++)this.addVertexLine(this.parseVertexIndex(t[e],s));for(let t=0,s=e.length;t<s;t++)this.addUVLine(this.parseUVIndex(e[t],r))}};return t.startObject("",!1),t}class SM extends Qc{constructor(t){super(t),this.materials=null}load(t,e,s,r){const i=this,n=new el(this.manager);n.setPath(this.path),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials),n.load(t,(function(s){try{e(i.parse(s))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),s,r)}setMaterials(t){return this.materials=t,this}parse(t){const e=new EM;-1!==t.indexOf("\r\n")&&(t=t.replace(/\r\n/g,"\n")),-1!==t.indexOf("\\\n")&&(t=t.replace(/\\\n/g,""));const s=t.split("\n");let r="",i="",n=0,o=[];const a="function"==typeof"".trimLeft;for(let t=0,h=s.length;t<h;t++)if(r=s[t],r=a?r.trimLeft():r.trim(),n=r.length,0!==n&&(i=r.charAt(0),"#"!==i))if("v"===i){const t=r.split(/\s+/);switch(t[0]){case"v":e.vertices.push(parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3])),t.length>=7?(IM.setRGB(parseFloat(t[4]),parseFloat(t[5]),parseFloat(t[6])).convertSRGBToLinear(),e.colors.push(IM.r,IM.g,IM.b)):e.colors.push(void 0,void 0,void 0);break;case"vn":e.normals.push(parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3]));break;case"vt":e.uvs.push(parseFloat(t[1]),parseFloat(t[2]))}}else if("f"===i){const t=r.slice(1).trim().split(/\s+/),s=[];for(let e=0,r=t.length;e<r;e++){const r=t[e];if(r.length>0){const t=r.split("/");s.push(t)}}const i=s[0];for(let t=1,r=s.length-1;t<r;t++){const r=s[t],n=s[t+1];e.addFace(i[0],r[0],n[0],i[1],r[1],n[1],i[2],r[2],n[2])}}else if("l"===i){const t=r.substring(1).trim().split(" ");let s=[];const i=[];if(-1===r.indexOf("/"))s=t;else for(let e=0,r=t.length;e<r;e++){const r=t[e].split("/");""!==r[0]&&s.push(r[0]),""!==r[1]&&i.push(r[1])}e.addLineGeometry(s,i)}else if("p"===i){const t=r.slice(1).trim().split(" ");e.addPointGeometry(t)}else if(null!==(o=mM.exec(r))){const t=(" "+o[0].slice(1).trim()).slice(1);e.startObject(t)}else if(gM.test(r))e.object.startMaterial(r.substring(7).trim(),e.materialLibraries);else if(fM.test(r))e.materialLibraries.push(r.substring(7).trim());else if(yM.test(r))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===i){if(o=r.split(" "),o.length>1){const t=o[1].trim().toLowerCase();e.object.smooth="0"!==t&&"off"!==t}else e.object.smooth=!0;const t=e.object.currentMaterial();t&&(t.smooth=e.object.smooth)}else{if("\0"===r)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+r+'"')}e.finalize();const h=new ko;h.materialLibraries=[].concat(e.materialLibraries);if(!0===!(1===e.objects.length&&0===e.objects[0].geometry.vertices.length))for(let t=0,s=e.objects.length;t<s;t++){const s=e.objects[t],r=s.geometry,i=s.materials,n="Line"===r.type,o="Points"===r.type;let a=!1;if(0===r.vertices.length)continue;const c=new Er;c.setAttribute("position",new fr(r.vertices,3)),r.normals.length>0&&c.setAttribute("normal",new fr(r.normals,3)),r.colors.length>0&&(a=!0,c.setAttribute("color",new fr(r.colors,3))),!0===r.hasUVIndices&&c.setAttribute("uv",new fr(r.uvs,2));const l=[];for(let t=0,s=i.length;t<s;t++){const s=i[t],r=s.name+"_"+s.smooth+"_"+a;let h=e.materials[r];if(null!==this.materials)if(h=this.materials.create(s.name),!n||!h||h instanceof Ma){if(o&&h&&!(h instanceof Va)){const t=new Va({size:10,sizeAttenuation:!1});sr.prototype.copy.call(t,h),t.color.copy(h.color),t.map=h.map,h=t}}else{const t=new Ma;sr.prototype.copy.call(t,h),t.color.copy(h.color),h=t}void 0===h&&(h=n?new Ma:o?new Va({size:1,sizeAttenuation:!1}):new Cc,h.name=s.name,h.flatShading=!s.smooth,h.vertexColors=a,e.materials[r]=h),l.push(h)}let u;if(l.length>1){for(let t=0,e=i.length;t<e;t++){const e=i[t];c.addGroup(e.groupStart,e.groupCount,t)}u=n?new ja(c,l):o?new Ka(c,l):new jr(c,l)}else u=n?new ja(c,l[0]):o?new Ka(c,l[0]):new jr(c,l[0]);u.name=s.name,h.add(u)}else if(e.vertices.length>0){const t=new Va({size:1,sizeAttenuation:!1}),s=new Er;s.setAttribute("position",new fr(e.vertices,3)),e.colors.length>0&&void 0!==e.colors[0]&&(s.setAttribute("color",new fr(e.colors,3)),t.vertexColors=!0);const r=new Ka(s,t);h.add(r)}return h}}class AM extends Qc{constructor(t){super(t),this.littleEndian=!0}load(t,e,s,r){const i=this,n=new el(i.manager);n.setPath(i.path),n.setResponseType("arraybuffer"),n.setRequestHeader(i.requestHeader),n.setWithCredentials(i.withCredentials),n.load(t,(function(s){try{e(i.parse(s,t))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),s,r)}parse(t,e){const s=Rl.decodeText(new Uint8Array(t)),r=function(t){const e={},s=t.search(/[\r\n]DATA\s(\S*)\s/i),r=/[\r\n]DATA\s(\S*)\s/i.exec(t.slice(s-1));if(e.data=r[1],e.headerLen=r[0].length+s,e.str=t.slice(0,e.headerLen),e.str=e.str.replace(/\#.*/gi,""),e.version=/VERSION (.*)/i.exec(e.str),e.fields=/FIELDS (.*)/i.exec(e.str),e.size=/SIZE (.*)/i.exec(e.str),e.type=/TYPE (.*)/i.exec(e.str),e.count=/COUNT (.*)/i.exec(e.str),e.width=/WIDTH (.*)/i.exec(e.str),e.height=/HEIGHT (.*)/i.exec(e.str),e.viewpoint=/VIEWPOINT (.*)/i.exec(e.str),e.points=/POINTS (.*)/i.exec(e.str),null!==e.version&&(e.version=parseFloat(e.version[1])),e.fields=null!==e.fields?e.fields[1].split(" "):[],null!==e.type&&(e.type=e.type[1].split(" ")),null!==e.width&&(e.width=parseInt(e.width[1])),null!==e.height&&(e.height=parseInt(e.height[1])),null!==e.viewpoint&&(e.viewpoint=e.viewpoint[1]),null!==e.points&&(e.points=parseInt(e.points[1],10)),null===e.points&&(e.points=e.width*e.height),null!==e.size&&(e.size=e.size[1].split(" ").map((function(t){return parseInt(t,10)}))),null!==e.count)e.count=e.count[1].split(" ").map((function(t){return parseInt(t,10)}));else{e.count=[];for(let t=0,s=e.fields.length;t<s;t++)e.count.push(1)}e.offset={};let i=0;for(let t=0,s=e.fields.length;t<s;t++)"ascii"===e.data?e.offset[e.fields[t]]=t:(e.offset[e.fields[t]]=i,i+=e.size[t]*e.count[t]);return e.rowSize=i,e}(s),i=[],n=[],o=[];if("ascii"===r.data){const t=r.offset,e=s.slice(r.headerLen).split("\n");for(let s=0,a=e.length;s<a;s++){if(""===e[s])continue;const a=e[s].split(" ");if(void 0!==t.x&&(i.push(parseFloat(a[t.x])),i.push(parseFloat(a[t.y])),i.push(parseFloat(a[t.z]))),void 0!==t.rgb){const e=r.fields.findIndex((t=>"rgb"===t)),s=r.type[e],i=parseFloat(a[t.rgb]);let n=i;if("F"===s){const t=new Float32Array(1);t[0]=i,n=new Int32Array(t.buffer)[0]}const h=n>>16&255,c=n>>8&255,l=n>>0&255;o.push(h/255,c/255,l/255)}void 0!==t.normal_x&&(n.push(parseFloat(a[t.normal_x])),n.push(parseFloat(a[t.normal_y])),n.push(parseFloat(a[t.normal_z])))}}if("binary_compressed"===r.data){const e=new Uint32Array(t.slice(r.headerLen,r.headerLen+8)),s=e[0],a=e[1],h=function(t,e){const s=t.length,r=new Uint8Array(e);let i,n,o,a=0,h=0;do{if(i=t[a++],i<32){if(i++,h+i>e)throw new Error("Output buffer is not large enough");if(a+i>s)throw new Error("Invalid compressed data");do{r[h++]=t[a++]}while(--i)}else{if(n=i>>5,o=h-((31&i)<<8)-1,a>=s)throw new Error("Invalid compressed data");if(7===n&&(n+=t[a++],a>=s))throw new Error("Invalid compressed data");if(o-=t[a++],h+n+2>e)throw new Error("Output buffer is not large enough");if(o<0)throw new Error("Invalid compressed data");if(o>=h)throw new Error("Invalid compressed data");do{r[h++]=r[o++]}while(2+--n)}}while(a<s);return r}(new Uint8Array(t,r.headerLen+8,s),a),c=new DataView(h.buffer),l=r.offset;for(let t=0;t<r.points;t++)void 0!==l.x&&(i.push(c.getFloat32(r.points*l.x+r.size[0]*t,this.littleEndian)),i.push(c.getFloat32(r.points*l.y+r.size[1]*t,this.littleEndian)),i.push(c.getFloat32(r.points*l.z+r.size[2]*t,this.littleEndian))),void 0!==l.rgb&&(o.push(c.getUint8(r.points*l.rgb+r.size[3]*t+2)/255),o.push(c.getUint8(r.points*l.rgb+r.size[3]*t+1)/255),o.push(c.getUint8(r.points*l.rgb+r.size[3]*t+0)/255)),void 0!==l.normal_x&&(n.push(c.getFloat32(r.points*l.normal_x+r.size[4]*t,this.littleEndian)),n.push(c.getFloat32(r.points*l.normal_y+r.size[5]*t,this.littleEndian)),n.push(c.getFloat32(r.points*l.normal_z+r.size[6]*t,this.littleEndian)))}if("binary"===r.data){const e=new DataView(t,r.headerLen),s=r.offset;for(let t=0,a=0;t<r.points;t++,a+=r.rowSize)void 0!==s.x&&(i.push(e.getFloat32(a+s.x,this.littleEndian)),i.push(e.getFloat32(a+s.y,this.littleEndian)),i.push(e.getFloat32(a+s.z,this.littleEndian))),void 0!==s.rgb&&(o.push(e.getUint8(a+s.rgb+2)/255),o.push(e.getUint8(a+s.rgb+1)/255),o.push(e.getUint8(a+s.rgb+0)/255)),void 0!==s.normal_x&&(n.push(e.getFloat32(a+s.normal_x,this.littleEndian)),n.push(e.getFloat32(a+s.normal_y,this.littleEndian)),n.push(e.getFloat32(a+s.normal_z,this.littleEndian)))}const a=new Er;i.length>0&&a.setAttribute("position",new fr(i,3)),n.length>0&&a.setAttribute("normal",new fr(n,3)),o.length>0&&a.setAttribute("color",new fr(o,3)),a.computeBoundingSphere();const h=new Va({size:.005});o.length>0?h.vertexColors=!0:h.color.setHex(16777215*Math.random());const c=new Ka(a,h);let l=e.split("").reverse().join("");return l=/([^\/]*)/.exec(l),l=l[1].split("").reverse().join(""),c.name=l,c}}class RM extends Qc{constructor(t){super(t)}load(t,e,s,r){const i=this,n=new el(i.manager);n.setPath(i.path),n.setRequestHeader(i.requestHeader),n.setWithCredentials(i.withCredentials),n.load(t,(function(s){try{e(i.parse(s))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),s,r)}parse(t){function e(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function s(t){return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()}function r(t,e,s,r){const i=parseInt(c[r].slice(t,t+e));if(i){const t=(n=s,h=i,"s"+Math.min(n,h)+"e"+Math.max(n,h));void 0===a[t]&&(o.push([s-1,i-1,1]),a[t]=o.length-1)}var n,h}const i={h:[255,255,255],he:[217,255,255],li:[204,128,255],be:[194,255,0],b:[255,181,181],c:[144,144,144],n:[48,80,248],o:[255,13,13],f:[144,224,80],ne:[179,227,245],na:[171,92,242],mg:[138,255,0],al:[191,166,166],si:[240,200,160],p:[255,128,0],s:[255,255,48],cl:[31,240,31],ar:[128,209,227],k:[143,64,212],ca:[61,255,0],sc:[230,230,230],ti:[191,194,199],v:[166,166,171],cr:[138,153,199],mn:[156,122,199],fe:[224,102,51],co:[240,144,160],ni:[80,208,80],cu:[200,128,51],zn:[125,128,176],ga:[194,143,143],ge:[102,143,143],as:[189,128,227],se:[255,161,0],br:[166,41,41],kr:[92,184,209],rb:[112,46,176],sr:[0,255,0],y:[148,255,255],zr:[148,224,224],nb:[115,194,201],mo:[84,181,181],tc:[59,158,158],ru:[36,143,143],rh:[10,125,140],pd:[0,105,133],ag:[192,192,192],cd:[255,217,143],in:[166,117,115],sn:[102,128,128],sb:[158,99,181],te:[212,122,0],i:[148,0,148],xe:[66,158,176],cs:[87,23,143],ba:[0,201,0],la:[112,212,255],ce:[255,255,199],pr:[217,255,199],nd:[199,255,199],pm:[163,255,199],sm:[143,255,199],eu:[97,255,199],gd:[69,255,199],tb:[48,255,199],dy:[31,255,199],ho:[0,255,156],er:[0,230,117],tm:[0,212,82],yb:[0,191,56],lu:[0,171,36],hf:[77,194,255],ta:[77,166,255],w:[33,148,214],re:[38,125,171],os:[38,102,150],ir:[23,84,135],pt:[208,208,224],au:[255,209,35],hg:[184,184,208],tl:[166,84,77],pb:[87,89,97],bi:[158,79,181],po:[171,92,0],at:[117,79,69],rn:[66,130,150],fr:[66,0,102],ra:[0,125,0],ac:[112,171,250],th:[0,186,255],pa:[0,161,255],u:[0,143,255],np:[0,128,255],pu:[0,107,255],am:[84,92,242],cm:[120,92,227],bk:[138,79,227],cf:[161,54,212],es:[179,31,212],fm:[179,31,186],md:[179,13,166],no:[189,13,135],lr:[199,0,102],rf:[204,0,89],db:[209,0,79],sg:[217,0,69],bh:[224,0,56],hs:[230,0,46],mt:[235,0,38],ds:[235,0,38],rg:[235,0,38],cn:[235,0,38],uut:[235,0,38],uuq:[235,0,38],uup:[235,0,38],uuh:[235,0,38],uus:[235,0,38],uuo:[235,0,38]},n=[],o=[],a={},h={},c=t.split("\n");for(let t=0,o=c.length;t<o;t++)if("ATOM"===c[t].slice(0,4)||"HETATM"===c[t].slice(0,6)){const r=parseFloat(c[t].slice(30,37)),o=parseFloat(c[t].slice(38,45)),a=parseFloat(c[t].slice(46,53)),l=parseInt(c[t].slice(6,11))-1;let u=e(c[t].slice(76,78)).toLowerCase();""===u&&(u=e(c[t].slice(12,14)).toLowerCase());const p=[r,o,a,i[u],s(u)];n.push(p),h[l]=p}else if("CONECT"===c[t].slice(0,6)){const e=parseInt(c[t].slice(6,11));r(11,5,e,t),r(16,5,e,t),r(21,5,e,t),r(26,5,e,t)}return function(){const t={geometryAtoms:new Er,geometryBonds:new Er,json:{atoms:n}},e=t.geometryAtoms,s=t.geometryBonds,r=[],i=[],a=[];for(let t=0,e=n.length;t<e;t++){const e=n[t],s=e[0],o=e[1],a=e[2];r.push(s,o,a);const h=e[3][0]/255,c=e[3][1]/255,l=e[3][2]/255;i.push(h,c,l)}for(let t=0,e=o.length;t<e;t++){const e=o[t],s=e[0],r=e[1],i=h[s],n=h[r];let c=i[0],l=i[1],u=i[2];a.push(c,l,u),c=n[0],l=n[1],u=n[2],a.push(c,l,u)}return e.setAttribute("position",new fr(r,3)),e.setAttribute("color",new fr(i,3)),s.setAttribute("position",new fr(a,3)),t}()}}const CM=new Ae;class OM extends Qc{constructor(t){super(t),this.propertyNameMapping={}}load(t,e,s,r){const i=this,n=new el(this.manager);n.setPath(this.path),n.setResponseType("arraybuffer"),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials),n.load(t,(function(s){try{e(i.parse(s))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),s,r)}setPropertyNameMapping(t){this.propertyNameMapping=t}parse(t){function e(t){let e="",s=0;const r=/^ply([\s\S]*)end_header\r?\n/.exec(t);null!==r&&(e=r[1],s=new Blob([r[0]]).size);const i={comments:[],elements:[],headerLength:s,objInfo:""},n=e.split("\n");let o;function a(t,e){const s={type:t[0]};return"list"===s.type?(s.name=t[3],s.countType=t[1],s.itemType=t[2]):s.name=t[1],s.name in e&&(s.name=e[s.name]),s}for(let t=0;t<n.length;t++){let e=n[t];if(e=e.trim(),""===e)continue;const s=e.split(/\s+/),r=s.shift();switch(e=s.join(" "),r){case"format":i.format=s[0],i.version=s[1];break;case"comment":i.comments.push(e);break;case"element":void 0!==o&&i.elements.push(o),o={},o.name=s[0],o.count=parseInt(s[1]),o.properties=[];break;case"property":o.properties.push(a(s,l.propertyNameMapping));break;case"obj_info":i.objInfo=e;break;default:console.log("unhandled",r,s)}}return void 0!==o&&i.elements.push(o),i}function s(t,e){switch(e){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(t);case"float":case"double":case"float32":case"float64":return parseFloat(t)}}function r(t,e){const r=e.split(/\s+/),i={};for(let e=0;e<t.length;e++)if("list"===t[e].type){const n=[],o=s(r.shift(),t[e].countType);for(let i=0;i<o;i++)n.push(s(r.shift(),t[e].itemType));i[t[e].name]=n}else i[t[e].name]=s(r.shift(),t[e].type);return i}function i(t,e){const s={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[]};let i;let a="";null!==(i=/end_header\s([\s\S]*)$/.exec(t))&&(a=i[1]);const h=a.split("\n");let c=0,l=0;for(let t=0;t<h.length;t++){let i=h[t];if(i=i.trim(),""===i)continue;l>=e.elements[c].count&&(c++,l=0);const n=r(e.elements[c].properties,i);o(s,e.elements[c].name,n),l++}return n(s)}function n(t){let e=new Er;return t.indices.length>0&&e.setIndex(t.indices),e.setAttribute("position",new fr(t.vertices,3)),t.normals.length>0&&e.setAttribute("normal",new fr(t.normals,3)),t.uvs.length>0&&e.setAttribute("uv",new fr(t.uvs,2)),t.colors.length>0&&e.setAttribute("color",new fr(t.colors,3)),t.faceVertexUvs.length>0&&(e=e.toNonIndexed(),e.setAttribute("uv",new fr(t.faceVertexUvs,2))),e.computeBoundingSphere(),e}function o(t,e,s){function r(t){for(let e=0,r=t.length;e<r;e++){const r=t[e];if(r in s)return r}return null}const i=r(["x","px","posx"])||"x",n=r(["y","py","posy"])||"y",o=r(["z","pz","posz"])||"z",a=r(["nx","normalx"]),h=r(["ny","normaly"]),c=r(["nz","normalz"]),l=r(["s","u","texture_u","tx"]),u=r(["t","v","texture_v","ty"]),p=r(["red","diffuse_red","r","diffuse_r"]),d=r(["green","diffuse_green","g","diffuse_g"]),m=r(["blue","diffuse_blue","b","diffuse_b"]);if("vertex"===e)t.vertices.push(s[i],s[n],s[o]),null!==a&&null!==h&&null!==c&&t.normals.push(s[a],s[h],s[c]),null!==l&&null!==u&&t.uvs.push(s[l],s[u]),null!==p&&null!==d&&null!==m&&(CM.setRGB(s[p]/255,s[d]/255,s[m]/255).convertSRGBToLinear(),t.colors.push(CM.r,CM.g,CM.b));else if("face"===e){const e=s.vertex_indices||s.vertex_index,r=s.texcoord;3===e.length?(t.indices.push(e[0],e[1],e[2]),r&&6===r.length&&(t.faceVertexUvs.push(r[0],r[1]),t.faceVertexUvs.push(r[2],r[3]),t.faceVertexUvs.push(r[4],r[5]))):4===e.length&&(t.indices.push(e[0],e[1],e[3]),t.indices.push(e[1],e[2],e[3]))}}function a(t,e,s,r){switch(s){case"int8":case"char":return[t.getInt8(e),1];case"uint8":case"uchar":return[t.getUint8(e),1];case"int16":case"short":return[t.getInt16(e,r),2];case"uint16":case"ushort":return[t.getUint16(e,r),2];case"int32":case"int":return[t.getInt32(e,r),4];case"uint32":case"uint":return[t.getUint32(e,r),4];case"float32":case"float":return[t.getFloat32(e,r),4];case"float64":case"double":return[t.getFloat64(e,r),8]}}function h(t,e,s,r){const i={};let n,o=0;for(let h=0;h<s.length;h++)if("list"===s[h].type){const c=[];n=a(t,e+o,s[h].countType,r);const l=n[0];o+=n[1];for(let i=0;i<l;i++)n=a(t,e+o,s[h].itemType,r),c.push(n[0]),o+=n[1];i[s[h].name]=c}else n=a(t,e+o,s[h].type,r),i[s[h].name]=n[0],o+=n[1];return[i,o]}let c;const l=this;if(t instanceof ArrayBuffer){const s=Rl.decodeText(new Uint8Array(t)),r=e(s);c="ascii"===r.format?i(s,r):function(t,e){const s={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[]},r="binary_little_endian"===e.format,i=new DataView(t,e.headerLength);let a,c=0;for(let t=0;t<e.elements.length;t++)for(let n=0;n<e.elements[t].count;n++){a=h(i,c,e.elements[t].properties,r),c+=a[1];const n=a[0];o(s,e.elements[t].name,n)}return n(s)}(t,r)}else c=i(t,e(t));return c}}let _M=null;function DM(){if(null===_M){const t=new ArrayBuffer(2),e=new Uint8Array(t),s=new Uint16Array(t);e[0]=170,e[1]=187,_M=43707===s[0]}return _M}const FM=[null,Float32Array,null,Int8Array,Int16Array,null,Int32Array,Uint8Array,Uint16Array,null,Uint32Array],MM={Uint16Array:"getUint16",Uint32Array:"getUint32",Int16Array:"getInt16",Int32Array:"getInt32",Float32Array:"getFloat32",Float64Array:"getFloat64"};function PM(t,e,s,r,i){const n=e.BYTES_PER_ELEMENT;let o;if(i===DM()||1===n)o=new e(t,s,r);else{const a=new DataView(t,s,r*n),h=MM[e.name],c=!i;o=new e(r);for(let t=0;t<r;t++)o[t]=a[h](t*n,c)}return o}class NM extends Qc{constructor(t){super(t)}load(t,e,s,r){const i=this,n=new el(i.manager);n.setPath(i.path),n.setResponseType("arraybuffer"),n.setRequestHeader(i.requestHeader),n.setWithCredentials(i.withCredentials),t=t.replace(/\*/g,DM()?"be":"le"),n.load(t,(function(s){try{e(i.parse(s))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),s,r)}parse(t){const e=function(t){const e=new Uint8Array(t),s=e[0];let r=e[1];const i=!!(r>>7&1),n=r>>6&1,o=1==(r>>5&1),a=31&r;let h=0,c=0;if(o?(h=(e[2]<<16)+(e[3]<<8)+e[4],c=(e[5]<<16)+(e[6]<<8)+e[7]):(h=e[2]+(e[3]<<8)+(e[4]<<16),c=e[5]+(e[6]<<8)+(e[7]<<16)),0===s)throw new Error("PRWM decoder: Invalid format version: 0");if(1!==s)throw new Error("PRWM decoder: Unsupported format version: "+s);if(!i){if(0!==n)throw new Error("PRWM decoder: Indices type must be set to 0 for non-indexed geometries");if(0!==c)throw new Error("PRWM decoder: Number of indices must be set to 0 for non-indexed geometries")}let l=8;const u={};for(let s=0;s<a;s++){let s="";for(;l<e.length;){const t=e[l];if(l++,0===t)break;s+=String.fromCharCode(t)}r=e[l];const i=r>>7&1,n=1+(r>>4&3),a=FM[15&r];l++,l=4*Math.ceil(l/4);const c=PM(t,a,l,n*h,o);l+=a.BYTES_PER_ELEMENT*n*h,u[s]={type:i,cardinality:n,values:c}}l=4*Math.ceil(l/4);let p=null;return i&&(p=PM(t,1===n?Uint32Array:Uint16Array,l,c,o)),{version:s,attributes:u,indices:p}}(t),s=Object.keys(e.attributes),r=new Er;for(let t=0;t<s.length;t++){const i=e.attributes[s[t]];r.setAttribute(s[t],new or(i.values,i.cardinality,i.normalized))}return null!==e.indices&&r.setIndex(new or(e.indices,1)),r}static isBigEndianPlatform(){return DM()}}class LM extends sl{constructor(t){super(t)}parse(t,e){const s=new Uint32Array(t,0,13),r={buffer:t,header:s,loadMipmaps:e};return 55727696===s[0]?function(t){const e=t.header;let s,r;const i=e[12],n=e[2],o=e[6],a=e[7],h=e[10],c=e[11];switch(n){case 0:s=2,r=ut;break;case 1:s=2,r=dt;break;case 2:s=4,r=lt;break;case 3:s=4,r=pt;break;default:console.error("THREE.PVRLoader: Unsupported PVR format:",n)}return t.dataPtr=52+i,t.bpp=s,t.format=r,t.width=a,t.height=o,t.numSurfaces=h,t.numMipmaps=c,t.isCubemap=6===h,kM(t)}(r):559044176===s[11]?function(t){const e=t.header,s=e[0],r=e[1],i=e[2],n=e[3],o=e[4],a=e[10],h=e[12],c=24,l=255&o;let u,p;const d=a>0;25===l?(p=d?pt:lt,u=4):l===c?(p=d?dt:ut,u=2):console.error("THREE.PVRLoader: Unknown PVR format:",l);return t.dataPtr=s,t.bpp=u,t.format=p,t.width=i,t.height=r,t.numSurfaces=h,t.numMipmaps=n+1,t.isCubemap=6===h,kM(t)}(r):void console.error("THREE.PVRLoader: Unknown PVR format.")}}function kM(t){const e={mipmaps:[],width:t.width,height:t.height,format:t.format,mipmapCount:t.numMipmaps,isCubemap:t.isCubemap},s=t.buffer;let r=t.dataPtr,i=0,n=0,o=0,a=0,h=0,c=0;const l=t.bpp,u=t.numSurfaces;2===l?(o=8,a=4):(o=4,a=4),n=o*a*l/8,e.mipmaps.length=t.numMipmaps*u;let p=0;for(;p<t.numMipmaps;){const l=t.width>>p,d=t.height>>p;h=l/o,c=d/a,h<2&&(h=2),c<2&&(c=2),i=h*c*n;for(let n=0;n<u;n++){const o={data:new Uint8Array(s,r,i),width:l,height:d};e.mipmaps[n*t.numMipmaps+p]=o,r+=i}p++}return e}class UM extends Qc{constructor(t){super(t)}load(t,e,s,r){const i=this,n=new el(this.manager);n.setPath(this.path),n.setResponseType("arraybuffer"),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials),n.load(t,(function(s){try{e(i.parse(s))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),s,r)}parse(t){function e(t,e,s){for(let r=0,i=t.length;r<i;r++)if(t[r]!==e.getUint8(s+r))return!1;return!0}const s=function(t){if("string"==typeof t){const e=new Uint8Array(t.length);for(let s=0;s<t.length;s++)e[s]=255&t.charCodeAt(s);return e.buffer||e}return t}(t);return function(t){const s=new DataView(t);if(84+50*s.getUint32(80,!0)===s.byteLength)return!0;const r=[115,111,108,105,100];for(let t=0;t<5;t++)if(e(r,s,t))return!1;return!0}(s)?function(t){const e=new DataView(t),s=e.getUint32(80,!0);let r,i,n,o,a,h,c,l,u=!1;for(let t=0;t<70;t++)1129270351==e.getUint32(t,!1)&&82==e.getUint8(t+4)&&61==e.getUint8(t+5)&&(u=!0,o=new Float32Array(3*s*3),a=e.getUint8(t+6)/255,h=e.getUint8(t+7)/255,c=e.getUint8(t+8)/255,l=e.getUint8(t+9)/255);const p=new Er,d=new Float32Array(3*s*3),m=new Float32Array(3*s*3);for(let t=0;t<s;t++){const s=84+50*t,l=e.getFloat32(s,!0),p=e.getFloat32(s+4,!0),f=e.getFloat32(s+8,!0);if(u){const t=e.getUint16(s+48,!0);0==(32768&t)?(r=(31&t)/31,i=(t>>5&31)/31,n=(t>>10&31)/31):(r=a,i=h,n=c)}for(let a=1;a<=3;a++){const h=s+12*a,c=3*t*3+3*(a-1);d[c]=e.getFloat32(h,!0),d[c+1]=e.getFloat32(h+4,!0),d[c+2]=e.getFloat32(h+8,!0),m[c]=l,m[c+1]=p,m[c+2]=f,u&&(o[c]=r,o[c+1]=i,o[c+2]=n)}}return p.setAttribute("position",new or(d,3)),p.setAttribute("normal",new or(m,3)),u&&(p.setAttribute("color",new or(o,3)),p.hasColors=!0,p.alpha=l),p}(s):function(t){const e=new Er,s=/solid([\s\S]*?)endsolid/g,r=/facet([\s\S]*?)endfacet/g;let i=0;const n=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,o=new RegExp("vertex"+n+n+n,"g"),a=new RegExp("normal"+n+n+n,"g"),h=[],c=[],l=new Ge;let u,p=0,d=0,m=0;for(;null!==(u=s.exec(t));){d=m;const t=u[0];for(;null!==(u=r.exec(t));){let t=0,e=0;const s=u[0];for(;null!==(u=a.exec(s));)l.x=parseFloat(u[1]),l.y=parseFloat(u[2]),l.z=parseFloat(u[3]),e++;for(;null!==(u=o.exec(s));)h.push(parseFloat(u[1]),parseFloat(u[2]),parseFloat(u[3])),c.push(l.x,l.y,l.z),t++,m++;1!==e&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+i),3!==t&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+i),i++}const s=d,n=m-d;e.addGroup(s,n,p),p++}return e.setAttribute("position",new fr(h,3)),e.setAttribute("normal",new fr(c,3)),e}("string"!=typeof(r=t)?Rl.decodeText(new Uint8Array(r)):r);var r}}class HM extends Qc{constructor(t){super(t),this.defaultDPI=90,this.defaultUnit="px"}load(t,e,s,r){const i=this,n=new el(i.manager);n.setPath(i.path),n.setRequestHeader(i.requestHeader),n.setWithCredentials(i.withCredentials),n.load(t,(function(s){try{e(i.parse(s))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),s,r)}parse(t){const e=this;function s(t,e,s,i,n,o,a,h){if(0==e||0==s)return void t.lineTo(h.x,h.y);i=i*Math.PI/180,e=Math.abs(e),s=Math.abs(s);const c=(a.x-h.x)/2,l=(a.y-h.y)/2,u=Math.cos(i)*c+Math.sin(i)*l,p=-Math.sin(i)*c+Math.cos(i)*l;let d=e*e,m=s*s;const f=u*u,g=p*p,y=f/d+g/m;if(y>1){const t=Math.sqrt(y);d=(e*=t)*e,m=(s*=t)*s}const T=d*g+m*f,v=(d*m-T)/T;let b=Math.sqrt(Math.max(0,v));n===o&&(b=-b);const w=b*e*p/s,x=-b*s*u/e,I=Math.cos(i)*w-Math.sin(i)*x+(a.x+h.x)/2,E=Math.sin(i)*w+Math.cos(i)*x+(a.y+h.y)/2,S=r(1,0,(u-w)/e,(p-x)/s),A=r((u-w)/e,(p-x)/s,(-u-w)/e,(-p-x)/s)%(2*Math.PI);t.currentPath.absellipse(I,E,e,s,S,S+A,0===o,i)}function r(t,e,s,r){const i=t*s+e*r,n=Math.sqrt(t*t+e*e)*Math.sqrt(s*s+r*r);let o=Math.acos(Math.max(-1,Math.min(1,i/n)));return t*r-e*s<0&&(o=-o),o}function i(t,e){e=Object.assign({},e);let s={};if(t.hasAttribute("class")){const e=t.getAttribute("class").split(/\s/).filter(Boolean).map((t=>t.trim()));for(let t=0;t<e.length;t++)s=Object.assign(s,d["."+e[t]])}function r(r,i,n){void 0===n&&(n=function(t){return t.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),t}),t.hasAttribute(r)&&(e[i]=n(t.getAttribute(r))),s[r]&&(e[i]=n(s[r])),t.style&&""!==t.style[r]&&(e[i]=n(t.style[r]))}function i(t){return Math.max(0,Math.min(1,c(t)))}function n(t){return Math.max(0,c(t))}return t.hasAttribute("id")&&(s=Object.assign(s,d["#"+t.getAttribute("id")])),r("fill","fill"),r("fill-opacity","fillOpacity",i),r("fill-rule","fillRule"),r("opacity","opacity",i),r("stroke","stroke"),r("stroke-opacity","strokeOpacity",i),r("stroke-width","strokeWidth",n),r("stroke-linejoin","strokeLineJoin"),r("stroke-linecap","strokeLineCap"),r("stroke-miterlimit","strokeMiterLimit",n),r("visibility","visibility"),e}function n(t,e){return t-(e-t)}function o(t,e,s){if("string"!=typeof t)throw new TypeError("Invalid input: "+typeof t);const r={SEPARATOR:/[ \t\r\n\,.\-+]/,WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/};let i=0,n=!0,o="",a="";const h=[];function c(t,e,s){const r=new SyntaxError('Unexpected character "'+t+'" at index '+e+".");throw r.partial=s,r}function l(){""!==o&&(""===a?h.push(Number(o)):h.push(Number(o)*Math.pow(10,Number(a)))),o="",a=""}let u;const p=t.length;for(let d=0;d<p;d++)if(u=t[d],Array.isArray(e)&&e.includes(h.length%s)&&r.FLAGS.test(u))i=1,o=u,l();else{if(0===i){if(r.WHITESPACE.test(u))continue;if(r.DIGIT.test(u)||r.SIGN.test(u)){i=1,o=u;continue}if(r.POINT.test(u)){i=2,o=u;continue}r.COMMA.test(u)&&(n&&c(u,d,h),n=!0)}if(1===i){if(r.DIGIT.test(u)){o+=u;continue}if(r.POINT.test(u)){o+=u,i=2;continue}if(r.EXP.test(u)){i=3;continue}r.SIGN.test(u)&&1===o.length&&r.SIGN.test(o[0])&&c(u,d,h)}if(2===i){if(r.DIGIT.test(u)){o+=u;continue}if(r.EXP.test(u)){i=3;continue}r.POINT.test(u)&&"."===o[o.length-1]&&c(u,d,h)}if(3===i){if(r.DIGIT.test(u)){a+=u;continue}if(r.SIGN.test(u)){if(""===a){a+=u;continue}1===a.length&&r.SIGN.test(a)&&c(u,d,h)}}r.WHITESPACE.test(u)?(l(),i=0,n=!1):r.COMMA.test(u)?(l(),i=0,n=!0):r.SIGN.test(u)?(l(),i=1,o=u):r.POINT.test(u)?(l(),i=2,o=u):c(u,d,h)}return l(),h}const a=["mm","cm","in","pt","pc","px"],h={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:12,pc:1,px:-1},px:{px:1}};function c(t){let s,r="px";if("string"==typeof t||t instanceof String)for(let e=0,s=a.length;e<s;e++){const s=a[e];if(t.endsWith(s)){r=s,t=t.substring(0,t.length-s.length);break}}return"px"===r&&"px"!==e.defaultUnit?s=h.in[e.defaultUnit]/e.defaultDPI:(s=h[r][e.defaultUnit],s<0&&(s=h[r].in*e.defaultDPI)),s*parseFloat(t)}function l(t){const e=t.elements;return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function u(t){const e=t.elements;return Math.sqrt(e[3]*e[3]+e[4]*e[4])}const p=[],d={},m=[],f=new ue,g=new ue,y=new ue,T=new ue,v=new le,b=new Ge,w=new ue,x=(new DOMParser).parseFromString(t,"image/svg+xml");!function t(e,r){if(1!==e.nodeType)return;const a=function(t){if(!(t.hasAttribute("transform")||"use"===t.nodeName&&(t.hasAttribute("x")||t.hasAttribute("y"))))return null;const e=function(t){const e=new ue,s=f;if("use"===t.nodeName&&(t.hasAttribute("x")||t.hasAttribute("y"))){const s=c(t.getAttribute("x")),r=c(t.getAttribute("y"));e.translate(s,r)}if(t.hasAttribute("transform")){const r=t.getAttribute("transform").split(")");for(let t=r.length-1;t>=0;t--){const i=r[t].trim();if(""===i)continue;const n=i.indexOf("("),a=i.length;if(n>0&&n<a){const t=i.slice(0,n),e=o(i.slice(n+1));switch(s.identity(),t){case"translate":if(e.length>=1){const t=e[0];let r=t;e.length>=2&&(r=e[1]),s.translate(t,r)}break;case"rotate":if(e.length>=1){let t=0,r=0,i=0;t=-e[0]*Math.PI/180,e.length>=3&&(r=e[1],i=e[2]),g.identity().translate(-r,-i),y.identity().rotate(t),T.multiplyMatrices(y,g),g.identity().translate(r,i),s.multiplyMatrices(g,T)}break;case"scale":if(e.length>=1){const t=e[0];let r=t;e.length>=2&&(r=e[1]),s.scale(t,r)}break;case"skewX":1===e.length&&s.set(1,Math.tan(e[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":1===e.length&&s.set(1,0,0,Math.tan(e[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":6===e.length&&s.set(e[0],e[2],e[4],e[1],e[3],e[5],0,0,1)}}e.premultiply(s)}}return e}(t);m.length>0&&e.premultiply(m[m.length-1]);return w.copy(e),m.push(e),e}(e);let h=!1,x=null;switch(e.nodeName){case"svg":break;case"style":!function(t){if(!t.sheet||!t.sheet.cssRules||!t.sheet.cssRules.length)return;for(let e=0;e<t.sheet.cssRules.length;e++){const s=t.sheet.cssRules[e];if(1!==s.type)continue;const r=s.selectorText.split(/,/gm).filter(Boolean).map((t=>t.trim()));for(let t=0;t<r.length;t++){const e=Object.fromEntries(Object.entries(s.style).filter((([,t])=>""!==t)));d[r[t]]=Object.assign(d[r[t]]||{},e)}}}(e);break;case"g":r=i(e,r);break;case"path":r=i(e,r),e.hasAttribute("d")&&(x=function(t){const e=new Ku,r=new le,i=new le,a=new le;let h=!0,c=!1;const l=t.getAttribute("d").match(/[a-df-z][^a-df-z]*/gi);for(let t=0,u=l.length;t<u;t++){const u=l[t],p=u.charAt(0),d=u.slice(1).trim();let m;switch(!0===h&&(c=!0,h=!1),p){case"M":m=o(d);for(let t=0,s=m.length;t<s;t+=2)r.x=m[t+0],r.y=m[t+1],i.x=r.x,i.y=r.y,0===t?e.moveTo(r.x,r.y):e.lineTo(r.x,r.y),0===t&&a.copy(r);break;case"H":m=o(d);for(let t=0,s=m.length;t<s;t++)r.x=m[t],i.x=r.x,i.y=r.y,e.lineTo(r.x,r.y),0===t&&!0===c&&a.copy(r);break;case"V":m=o(d);for(let t=0,s=m.length;t<s;t++)r.y=m[t],i.x=r.x,i.y=r.y,e.lineTo(r.x,r.y),0===t&&!0===c&&a.copy(r);break;case"L":m=o(d);for(let t=0,s=m.length;t<s;t+=2)r.x=m[t+0],r.y=m[t+1],i.x=r.x,i.y=r.y,e.lineTo(r.x,r.y),0===t&&!0===c&&a.copy(r);break;case"C":m=o(d);for(let t=0,s=m.length;t<s;t+=6)e.bezierCurveTo(m[t+0],m[t+1],m[t+2],m[t+3],m[t+4],m[t+5]),i.x=m[t+2],i.y=m[t+3],r.x=m[t+4],r.y=m[t+5],0===t&&!0===c&&a.copy(r);break;case"S":m=o(d);for(let t=0,s=m.length;t<s;t+=4)e.bezierCurveTo(n(r.x,i.x),n(r.y,i.y),m[t+0],m[t+1],m[t+2],m[t+3]),i.x=m[t+0],i.y=m[t+1],r.x=m[t+2],r.y=m[t+3],0===t&&!0===c&&a.copy(r);break;case"Q":m=o(d);for(let t=0,s=m.length;t<s;t+=4)e.quadraticCurveTo(m[t+0],m[t+1],m[t+2],m[t+3]),i.x=m[t+0],i.y=m[t+1],r.x=m[t+2],r.y=m[t+3],0===t&&!0===c&&a.copy(r);break;case"T":m=o(d);for(let t=0,s=m.length;t<s;t+=2){const s=n(r.x,i.x),o=n(r.y,i.y);e.quadraticCurveTo(s,o,m[t+0],m[t+1]),i.x=s,i.y=o,r.x=m[t+0],r.y=m[t+1],0===t&&!0===c&&a.copy(r)}break;case"A":m=o(d,[3,4],7);for(let t=0,n=m.length;t<n;t+=7){if(m[t+5]==r.x&&m[t+6]==r.y)continue;const n=r.clone();r.x=m[t+5],r.y=m[t+6],i.x=r.x,i.y=r.y,s(e,m[t],m[t+1],m[t+2],m[t+3],m[t+4],n,r),0===t&&!0===c&&a.copy(r)}break;case"m":m=o(d);for(let t=0,s=m.length;t<s;t+=2)r.x+=m[t+0],r.y+=m[t+1],i.x=r.x,i.y=r.y,0===t?e.moveTo(r.x,r.y):e.lineTo(r.x,r.y),0===t&&a.copy(r);break;case"h":m=o(d);for(let t=0,s=m.length;t<s;t++)r.x+=m[t],i.x=r.x,i.y=r.y,e.lineTo(r.x,r.y),0===t&&!0===c&&a.copy(r);break;case"v":m=o(d);for(let t=0,s=m.length;t<s;t++)r.y+=m[t],i.x=r.x,i.y=r.y,e.lineTo(r.x,r.y),0===t&&!0===c&&a.copy(r);break;case"l":m=o(d);for(let t=0,s=m.length;t<s;t+=2)r.x+=m[t+0],r.y+=m[t+1],i.x=r.x,i.y=r.y,e.lineTo(r.x,r.y),0===t&&!0===c&&a.copy(r);break;case"c":m=o(d);for(let t=0,s=m.length;t<s;t+=6)e.bezierCurveTo(r.x+m[t+0],r.y+m[t+1],r.x+m[t+2],r.y+m[t+3],r.x+m[t+4],r.y+m[t+5]),i.x=r.x+m[t+2],i.y=r.y+m[t+3],r.x+=m[t+4],r.y+=m[t+5],0===t&&!0===c&&a.copy(r);break;case"s":m=o(d);for(let t=0,s=m.length;t<s;t+=4)e.bezierCurveTo(n(r.x,i.x),n(r.y,i.y),r.x+m[t+0],r.y+m[t+1],r.x+m[t+2],r.y+m[t+3]),i.x=r.x+m[t+0],i.y=r.y+m[t+1],r.x+=m[t+2],r.y+=m[t+3],0===t&&!0===c&&a.copy(r);break;case"q":m=o(d);for(let t=0,s=m.length;t<s;t+=4)e.quadraticCurveTo(r.x+m[t+0],r.y+m[t+1],r.x+m[t+2],r.y+m[t+3]),i.x=r.x+m[t+0],i.y=r.y+m[t+1],r.x+=m[t+2],r.y+=m[t+3],0===t&&!0===c&&a.copy(r);break;case"t":m=o(d);for(let t=0,s=m.length;t<s;t+=2){const s=n(r.x,i.x),o=n(r.y,i.y);e.quadraticCurveTo(s,o,r.x+m[t+0],r.y+m[t+1]),i.x=s,i.y=o,r.x=r.x+m[t+0],r.y=r.y+m[t+1],0===t&&!0===c&&a.copy(r)}break;case"a":m=o(d,[3,4],7);for(let t=0,n=m.length;t<n;t+=7){if(0==m[t+5]&&0==m[t+6])continue;const n=r.clone();r.x+=m[t+5],r.y+=m[t+6],i.x=r.x,i.y=r.y,s(e,m[t],m[t+1],m[t+2],m[t+3],m[t+4],n,r),0===t&&!0===c&&a.copy(r)}break;case"Z":case"z":e.currentPath.autoClose=!0,e.currentPath.curves.length>0&&(r.copy(a),e.currentPath.currentPoint.copy(r),h=!0);break;default:console.warn(u)}c=!1}return e}(e));break;case"rect":r=i(e,r),x=function(t){const e=c(t.getAttribute("x")||0),s=c(t.getAttribute("y")||0),r=c(t.getAttribute("rx")||t.getAttribute("ry")||0),i=c(t.getAttribute("ry")||t.getAttribute("rx")||0),n=c(t.getAttribute("width")),o=c(t.getAttribute("height")),a=.448084975506,h=new Ku;h.moveTo(e+r,s),h.lineTo(e+n-r,s),(0!==r||0!==i)&&h.bezierCurveTo(e+n-r*a,s,e+n,s+i*a,e+n,s+i);h.lineTo(e+n,s+o-i),(0!==r||0!==i)&&h.bezierCurveTo(e+n,s+o-i*a,e+n-r*a,s+o,e+n-r,s+o);h.lineTo(e+r,s+o),(0!==r||0!==i)&&h.bezierCurveTo(e+r*a,s+o,e,s+o-i*a,e,s+o-i);h.lineTo(e,s+i),(0!==r||0!==i)&&h.bezierCurveTo(e,s+i*a,e+r*a,s,e+r,s);return h}(e);break;case"polygon":r=i(e,r),x=function(t){function e(t,e,s){const n=c(e),o=c(s);0===i?r.moveTo(n,o):r.lineTo(n,o),i++}const s=/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,r=new Ku;let i=0;return t.getAttribute("points").replace(s,e),r.currentPath.autoClose=!0,r}(e);break;case"polyline":r=i(e,r),x=function(t){function e(t,e,s){const n=c(e),o=c(s);0===i?r.moveTo(n,o):r.lineTo(n,o),i++}const s=/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,r=new Ku;let i=0;return t.getAttribute("points").replace(s,e),r.currentPath.autoClose=!1,r}(e);break;case"circle":r=i(e,r),x=function(t){const e=c(t.getAttribute("cx")||0),s=c(t.getAttribute("cy")||0),r=c(t.getAttribute("r")||0),i=new xh;i.absarc(e,s,r,0,2*Math.PI);const n=new Ku;return n.subPaths.push(i),n}(e);break;case"ellipse":r=i(e,r),x=function(t){const e=c(t.getAttribute("cx")||0),s=c(t.getAttribute("cy")||0),r=c(t.getAttribute("rx")||0),i=c(t.getAttribute("ry")||0),n=new xh;n.absellipse(e,s,r,i,0,2*Math.PI);const o=new Ku;return o.subPaths.push(n),o}(e);break;case"line":r=i(e,r),x=function(t){const e=c(t.getAttribute("x1")||0),s=c(t.getAttribute("y1")||0),r=c(t.getAttribute("x2")||0),i=c(t.getAttribute("y2")||0),n=new Ku;return n.moveTo(e,s),n.lineTo(r,i),n.currentPath.autoClose=!1,n}(e);break;case"defs":h=!0;break;case"use":r=i(e,r);const a=(e.getAttributeNS("http://www.w3.org/1999/xlink","href")||"").substring(1),l=e.viewportElement.getElementById(a);l?t(l,r):console.warn("SVGLoader: 'use node' references non-existent node id: "+a)}x&&(void 0!==r.fill&&"none"!==r.fill&&x.color.setStyle(r.fill),function(t,e){function s(t){b.set(t.x,t.y,1).applyMatrix3(e),t.set(b.x,b.y)}const r=function(t){return 0!==t.elements[1]||0!==t.elements[3]}(e),i=t.subPaths;for(let t=0,n=i.length;t<n;t++){const n=i[t].curves;for(let t=0;t<n.length;t++){const i=n[t];i.isLineCurve?(s(i.v1),s(i.v2)):i.isCubicBezierCurve?(s(i.v0),s(i.v1),s(i.v2),s(i.v3)):i.isQuadraticBezierCurve?(s(i.v0),s(i.v1),s(i.v2)):i.isEllipseCurve&&(r&&console.warn("SVGLoader: Elliptic arc or ellipse rotation or skewing is not implemented."),v.set(i.aX,i.aY),s(v),i.aX=v.x,i.aY=v.y,i.xRadius*=l(e),i.yRadius*=u(e))}}}(x,w),p.push(x),x.userData={node:e,style:r});const I=e.childNodes;for(let e=0;e<I.length;e++){const s=I[e];h&&"style"!==s.nodeName&&"defs"!==s.nodeName||t(s,r)}a&&(m.pop(),m.length>0?w.copy(m[m.length-1]):w.identity())}(x.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4});return{paths:p,xml:x.documentElement}}static createShapes(t){const e=999999999,s=0,r=1,i=2,n=3,o=4,a=5,h=6,c={loc:s,t:0};function l(t,e,r,n){const o=t.x,a=e.x,h=r.x,l=n.x,p=t.y,d=e.y,m=r.y,f=n.y,g=(l-h)*(p-m)-(f-m)*(o-h),y=(f-m)*(a-o)-(l-h)*(d-p),T=g/y,v=((a-o)*(p-m)-(d-p)*(o-h))/y;if(0===y&&0!==g||T<=0||T>=1||v<0||v>1)return null;if(0===g&&0===y){for(let h=0;h<2;h++){if(u(0===h?r:n,t,e),c.loc==s){const t=0===h?r:n;return{x:t.x,y:t.y,t:c.t}}if(c.loc==i){return{x:+(o+c.t*(a-o)).toPrecision(10),y:+(p+c.t*(d-p)).toPrecision(10),t:c.t}}}return null}for(let i=0;i<2;i++)if(u(0===i?r:n,t,e),c.loc==s){const t=0===i?r:n;return{x:t.x,y:t.y,t:c.t}}return{x:+(o+T*(a-o)).toPrecision(10),y:+(p+T*(d-p)).toPrecision(10),t:T}}function u(t,e,l){const u=l.x-e.x,p=l.y-e.y,d=t.x-e.x,m=t.y-e.y,f=u*m-d*p;if(t.x===e.x&&t.y===e.y)return c.loc=s,void(c.t=0);if(t.x===l.x&&t.y===l.y)return c.loc=r,void(c.t=1);if(f<-Number.EPSILON)return void(c.loc=n);if(f>Number.EPSILON)return void(c.loc=o);if(u*d<0||p*m<0)return void(c.loc=a);if(Math.sqrt(u*u+p*p)<Math.sqrt(d*d+m*m))return void(c.loc=h);let g;g=0!==u?d/u:m/p,c.loc=i,c.t=g}function p(t,e,s){const r=new le;e.getCenter(r);const i=[];return s.forEach((e=>{if(e.boundingBox.containsPoint(r)){(function(t,e){const s=[],r=[];for(let i=1;i<t.length;i++){const n=t[i-1],o=t[i];for(let t=1;t<e.length;t++){const i=l(n,o,e[t-1],e[t]);null!==i&&void 0===s.find((t=>t.t<=i.t+Number.EPSILON&&t.t>=i.t-Number.EPSILON))&&(s.push(i),r.push(new le(i.x,i.y)))}}return r})(t,e.points).forEach((t=>{i.push({identifier:e.identifier,isCW:e.isCW,point:t})}))}})),i.sort(((t,e)=>t.point.x-e.point.x)),i}let d=0,m=e,f=-999999999,g=t.subPaths.map((t=>{const s=t.getPoints();let r=-999999999,i=e,n=-999999999,o=e;for(let t=0;t<s.length;t++){const e=s[t];e.y>r&&(r=e.y),e.y<i&&(i=e.y),e.x>n&&(n=e.x),e.x<o&&(o=e.x)}return f<=n&&(f=n+1),m>=o&&(m=o-1),{curves:t.curves,points:s,isCW:ac.isClockWise(s),identifier:d++,boundingBox:new Iu(new le(o,i),new le(n,r))}}));g=g.filter((t=>t.points.length>1));const y=g.map((e=>function(t,e,s,r,i){null!=i&&""!==i||(i="nonzero");const n=new le;t.boundingBox.getCenter(n);const o=p([new le(s,n.y),new le(r,n.y)],t.boundingBox,e);o.sort(((t,e)=>t.point.x-e.point.x));const a=[],h=[];o.forEach((e=>{e.identifier===t.identifier?a.push(e):h.push(e)}));const c=a[0].point.x,l=[];let u=0;for(;u<h.length&&h[u].point.x<c;)l.length>0&&l[l.length-1]===h[u].identifier?l.pop():l.push(h[u].identifier),u++;if(l.push(t.identifier),"evenodd"===i){const e=l.length%2==0,s=l[l.length-2];return{identifier:t.identifier,isHole:e,for:s}}if("nonzero"===i){let s=!0,r=null,i=null;for(let t=0;t<l.length;t++){const n=l[t];s?(i=e[n].isCW,s=!1,r=n):i!==e[n].isCW&&(i=e[n].isCW,s=!0)}return{identifier:t.identifier,isHole:s,for:r}}console.warn('fill-rule: "'+i+'" is currently not implemented.')}(e,g,m,f,t.userData.style.fillRule))),T=[];return g.forEach((t=>{if(!y[t.identifier].isHole){const e=new Nh;e.curves=t.curves;y.filter((e=>e.isHole&&e.for===t.identifier)).forEach((t=>{const s=g[t.identifier],r=new xh;r.curves=s.curves,e.holes.push(r)})),T.push(e)}})),T}static getStrokeStyle(t,e,s,r,i){return{strokeColor:e=void 0!==e?e:"#000",strokeWidth:t=void 0!==t?t:1,strokeLineJoin:s=void 0!==s?s:"miter",strokeLineCap:r=void 0!==r?r:"butt",strokeMiterLimit:i=void 0!==i?i:4}}static pointsToStroke(t,e,s,r){const i=[],n=[],o=[];if(0===HM.pointsToStrokeWithBuffers(t,e,s,r,i,n,o))return null;const a=new Er;return a.setAttribute("position",new fr(i,3)),a.setAttribute("normal",new fr(n,3)),a.setAttribute("uv",new fr(o,2)),a}static pointsToStrokeWithBuffers(t,e,s,r,i,n,o,a){const h=new le,c=new le,l=new le,u=new le,p=new le,d=new le,m=new le,f=new le,g=new le,y=new le,T=new le,v=new le,b=new le,w=new le,x=new le,I=new le,E=new le;s=void 0!==s?s:12,r=void 0!==r?r:.001,a=void 0!==a?a:0;const S=(t=function(t){let e=!1;for(let s=1,i=t.length-1;s<i;s++)if(t[s].distanceTo(t[s+1])<r){e=!0;break}if(!e)return t;const s=[];s.push(t[0]);for(let e=1,i=t.length-1;e<i;e++)t[e].distanceTo(t[e+1])>=r&&s.push(t[e]);return s.push(t[t.length-1]),s}(t)).length;if(S<2)return 0;const A=t[0].equals(t[S-1]);let R,C,O=t[0];const _=e.strokeWidth/2,D=1/(S-1);let F,M,P,N,L=0,k=!1,U=0,H=3*a,B=2*a;G(t[0],t[1],h).multiplyScalar(_),f.copy(t[0]).sub(h),g.copy(t[0]).add(h),y.copy(f),T.copy(g);for(let s=1;s<S;s++){R=t[s],C=s===S-1?A?t[1]:void 0:t[s+1];const r=h;if(G(O,R,r),l.copy(r).multiplyScalar(_),v.copy(R).sub(l),b.copy(R).add(l),F=L+D,M=!1,void 0!==C){G(R,C,c),l.copy(c).multiplyScalar(_),w.copy(R).sub(l),x.copy(R).add(l),P=!0,l.subVectors(C,O),r.dot(l)<0&&(P=!1),1===s&&(k=P),l.subVectors(C,R),l.normalize();const t=Math.abs(r.dot(l));if(0!==t){const s=_/t;l.multiplyScalar(-s),u.subVectors(R,O),p.copy(u).setLength(s).add(l),I.copy(p).negate();const r=p.length(),i=u.length();u.divideScalar(i),d.subVectors(C,R);const n=d.length();switch(d.divideScalar(n),u.dot(I)<i&&d.dot(I)<n&&(M=!0),E.copy(p).add(R),I.add(R),N=!1,M?P?(x.copy(I),b.copy(I)):(w.copy(I),v.copy(I)):V(),e.strokeLineJoin){case"bevel":W(P,M,F);break;case"round":Y(P,M),P?z(R,v,w,F,0):z(R,x,b,F,1);break;case"miter":case"miter-clip":default:const t=_*e.strokeMiterLimit/r;if(t<1){if("miter-clip"!==e.strokeLineJoin){W(P,M,F);break}Y(P,M),P?(d.subVectors(E,v).multiplyScalar(t).add(v),m.subVectors(E,w).multiplyScalar(t).add(w),j(v,F,0),j(d,F,0),j(R,F,.5),j(R,F,.5),j(d,F,0),j(m,F,0),j(R,F,.5),j(m,F,0),j(w,F,0)):(d.subVectors(E,b).multiplyScalar(t).add(b),m.subVectors(E,x).multiplyScalar(t).add(x),j(b,F,1),j(d,F,1),j(R,F,.5),j(R,F,.5),j(d,F,1),j(m,F,1),j(R,F,.5),j(m,F,1),j(x,F,1))}else M?(P?(j(g,L,1),j(f,L,0),j(E,F,0),j(g,L,1),j(E,F,0),j(I,F,1)):(j(g,L,1),j(f,L,0),j(E,F,1),j(f,L,0),j(I,F,0),j(E,F,1)),P?w.copy(E):x.copy(E)):P?(j(v,F,0),j(E,F,0),j(R,F,.5),j(R,F,.5),j(E,F,0),j(w,F,0)):(j(b,F,1),j(E,F,1),j(R,F,.5),j(R,F,.5),j(E,F,1),j(x,F,1)),N=!0}}else V()}else V();A||s!==S-1||X(t[0],y,T,P,!0,L),L=F,O=R,f.copy(w),g.copy(x)}if(A){if(M&&i){let t=E,e=I;k!==P&&(t=I,e=E),P?(N||k)&&(e.toArray(i,0),e.toArray(i,9),N&&t.toArray(i,3)):!N&&k||(e.toArray(i,3),e.toArray(i,9),N&&t.toArray(i,0))}}else X(R,v,b,P,!1,F);return U;function G(t,e,s){return s.subVectors(e,t),s.set(-s.y,s.x).normalize()}function j(t,e,s){i&&(i[H]=t.x,i[H+1]=t.y,i[H+2]=0,n&&(n[H]=0,n[H+1]=0,n[H+2]=1),H+=3,o&&(o[B]=e,o[B+1]=s,B+=2)),U+=3}function z(t,e,r,i,n){h.copy(e).sub(t).normalize(),c.copy(r).sub(t).normalize();let o=Math.PI;const a=h.dot(c);Math.abs(a)<1&&(o=Math.abs(Math.acos(a))),o/=s,l.copy(e);for(let e=0,r=s-1;e<r;e++)u.copy(l).rotateAround(t,o),j(l,i,n),j(u,i,n),j(t,i,.5),l.copy(u);j(u,i,n),j(r,i,n),j(t,i,.5)}function V(){j(g,L,1),j(f,L,0),j(v,F,0),j(g,L,1),j(v,F,1),j(b,F,0)}function W(t,e,s){e?t?(j(g,L,1),j(f,L,0),j(v,F,0),j(g,L,1),j(v,F,0),j(I,F,1),j(v,s,0),j(w,s,0),j(I,s,.5)):(j(g,L,1),j(f,L,0),j(b,F,1),j(f,L,0),j(I,F,0),j(b,F,1),j(b,s,1),j(x,s,0),j(I,s,.5)):t?(j(v,s,0),j(w,s,0),j(R,s,.5)):(j(b,s,1),j(x,s,0),j(R,s,.5))}function Y(t,e){e&&(t?(j(g,L,1),j(f,L,0),j(v,F,0),j(g,L,1),j(v,F,0),j(I,F,1),j(v,L,0),j(R,F,.5),j(I,F,1),j(R,F,.5),j(w,L,0),j(I,F,1)):(j(g,L,1),j(f,L,0),j(b,F,1),j(f,L,0),j(I,F,0),j(b,F,1),j(b,L,1),j(I,F,0),j(R,F,.5),j(R,F,.5),j(I,F,0),j(x,L,1)))}function X(t,s,r,n,o,a){switch(e.strokeLineCap){case"round":o?z(t,r,s,a,.5):z(t,s,r,a,.5);break;case"square":if(o)h.subVectors(s,t),c.set(h.y,-h.x),l.addVectors(h,c).add(t),u.subVectors(c,h).add(t),n?(l.toArray(i,3),u.toArray(i,0),u.toArray(i,9)):(l.toArray(i,3),l.toArray(i,9),u.toArray(i,0));else{h.subVectors(r,t),c.set(h.y,-h.x),l.addVectors(h,c).add(t),u.subVectors(c,h).add(t);const e=i.length;n?(l.toArray(i,e-3),u.toArray(i,e-6),u.toArray(i,e-12)):(l.toArray(i,e-6),u.toArray(i,e-3),u.toArray(i,e-12))}}}}}class BM extends Qc{constructor(t){super(t),this.debug=!1,this.group=null,this.materials=[],this.meshes=[]}load(t,e,s,r){const i=this,n=""===this.path?Rl.extractUrlBase(t):this.path,o=new el(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,(function(s){try{e(i.parse(s,n))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),s,r)}parse(t,e){this.group=new ko,this.materials=[],this.meshes=[],this.readFile(t,e);for(let t=0;t<this.meshes.length;t++)this.group.add(this.meshes[t]);return this.group}readFile(t,e){const s=new DataView(t),r=new GM(s,0,this.debugMessage);if(r.id===zM||r.id===VM||r.id===jM){let t=r.readChunk();for(;t;){if(t.id===WM){const e=t.readDWord();this.debugMessage("3DS file version: "+e)}else t.id===ZM?this.readMeshData(t,e):this.debugMessage("Unknown main chunk: "+t.hexId);t=r.readChunk()}}this.debugMessage("Parsed "+this.meshes.length+" meshes")}readMeshData(t,e){let s=t.readChunk();for(;s;){if(s.id===QM){const t=+s.readDWord();this.debugMessage("Mesh Version: "+t)}else if(s.id===tP){const t=s.readFloat();this.debugMessage("Master scale: "+t),this.group.scale.set(t,t,t)}else s.id===wP?(this.debugMessage("Named Object"),this.readNamedObject(s)):s.id===eP?(this.debugMessage("Material"),this.readMaterialEntry(s,e)):this.debugMessage("Unknown MDATA chunk: "+s.hexId);s=t.readChunk()}}readNamedObject(t){const e=t.readString();let s=t.readChunk();for(;s;){if(s.id===xP){const t=this.readMesh(s);t.name=e,this.meshes.push(t)}else this.debugMessage("Unknown named object chunk: "+s.hexId);s=t.readChunk()}}readMaterialEntry(t,e){let s=t.readChunk();const r=new Cc;for(;s;){if(s.id===sP)r.name=s.readString(),this.debugMessage("   Name: "+r.name);else if(s.id===lP)this.debugMessage("   Wireframe"),r.wireframe=!0;else if(s.id===uP){const t=s.readByte();r.wireframeLinewidth=t,this.debugMessage("   Wireframe Thickness: "+t)}else if(s.id===hP)r.side=2,this.debugMessage("   DoubleSided");else if(s.id===cP)this.debugMessage("   Additive Blending"),r.blending=2;else if(s.id===iP)this.debugMessage("   Diffuse Color"),r.color=this.readColor(s);else if(s.id===nP)this.debugMessage("   Specular Color"),r.specular=this.readColor(s);else if(s.id===rP)this.debugMessage("   Ambient color"),r.color=this.readColor(s);else if(s.id===oP){const t=this.readPercentage(s);r.shininess=100*t,this.debugMessage("   Shininess : "+t)}else if(s.id===aP){const t=this.readPercentage(s);r.opacity=1-t,this.debugMessage("  Transparency : "+t),r.transparent=r.opacity<1}else s.id===pP?(this.debugMessage("   ColorMap"),r.map=this.readMap(s,e)):s.id===mP?(this.debugMessage("   BumpMap"),r.bumpMap=this.readMap(s,e)):s.id===dP?(this.debugMessage("   OpacityMap"),r.alphaMap=this.readMap(s,e)):s.id===fP?(this.debugMessage("   SpecularMap"),r.specularMap=this.readMap(s,e)):this.debugMessage("   Unknown material chunk: "+s.hexId);s=t.readChunk()}this.materials[r.name]=r}readMesh(t){let e=t.readChunk();const s=new Er,r=new Cc,i=new jr(s,r);for(i.name="mesh";e;){if(e.id===IP){const t=e.readWord();this.debugMessage("   Vertex: "+t);const r=[];for(let s=0;s<t;s++)r.push(e.readFloat()),r.push(e.readFloat()),r.push(e.readFloat());s.setAttribute("position",new fr(r,3))}else if(e.id===EP)this.readFaceArray(e,i);else if(e.id===AP){const t=e.readWord();this.debugMessage("   UV: "+t);const r=[];for(let s=0;s<t;s++)r.push(e.readFloat()),r.push(e.readFloat());s.setAttribute("uv",new fr(r,2))}else if(e.id===RP){this.debugMessage("   Tranformation Matrix (TODO)");const t=[];for(let s=0;s<12;s++)t[s]=e.readFloat();const r=new Ts;r.elements[0]=t[0],r.elements[1]=t[6],r.elements[2]=t[3],r.elements[3]=t[9],r.elements[4]=t[2],r.elements[5]=t[8],r.elements[6]=t[5],r.elements[7]=t[11],r.elements[8]=t[1],r.elements[9]=t[7],r.elements[10]=t[4],r.elements[11]=t[10],r.elements[12]=0,r.elements[13]=0,r.elements[14]=0,r.elements[15]=1,r.transpose();const n=new Ts;n.copy(r).invert(),s.applyMatrix4(n),r.decompose(i.position,i.quaternion,i.scale)}else this.debugMessage("   Unknown mesh chunk: "+e.hexId);e=t.readChunk()}return s.computeVertexNormals(),i}readFaceArray(t,e){const s=t.readWord();this.debugMessage("   Faces: "+s);const r=[];for(let e=0;e<s;++e)r.push(t.readWord(),t.readWord(),t.readWord()),t.readWord();e.geometry.setIndex(r);let i=0,n=0;for(;!t.endOfChunk;){const s=t.readChunk();if(s.id===SP){this.debugMessage("      Material Group");const t=this.readMaterialGroup(s),r=3*t.index.length;e.geometry.addGroup(n,r,i),n+=r,i++;const o=this.materials[t.name];!1===Array.isArray(e.material)&&(e.material=[]),void 0!==o&&e.material.push(o)}else this.debugMessage("      Unknown face array chunk: "+s.hexId)}1===e.material.length&&(e.material=e.material[0])}readMap(t,e){let s=t.readChunk(),r={};const i=new ol(this.manager);for(i.setPath(this.resourcePath||e).setCrossOrigin(this.crossOrigin);s;){if(s.id===gP){const t=s.readString();r=i.load(t),this.debugMessage("      File: "+e+t)}else s.id===vP?(r.offset.x=s.readFloat(),this.debugMessage("      OffsetX: "+r.offset.x)):s.id===bP?(r.offset.y=s.readFloat(),this.debugMessage("      OffsetY: "+r.offset.y)):s.id===yP?(r.repeat.x=s.readFloat(),this.debugMessage("      RepeatX: "+r.repeat.x)):s.id===TP?(r.repeat.y=s.readFloat(),this.debugMessage("      RepeatY: "+r.repeat.y)):this.debugMessage("      Unknown map chunk: "+s.hexId);s=t.readChunk()}return r}readMaterialGroup(t){const e=t.readString(),s=t.readWord();this.debugMessage("         Name: "+e),this.debugMessage("         Faces: "+s);const r=[];for(let e=0;e<s;++e)r.push(t.readWord());return{name:e,index:r}}readColor(t){const e=t.readChunk(),s=new Ae;if(e.id===XM||e.id===qM){const t=e.readByte(),r=e.readByte(),i=e.readByte();s.setRGB(t/255,r/255,i/255),this.debugMessage("      Color: "+s.r+", "+s.g+", "+s.b)}else if(e.id===YM||e.id===KM){const t=e.readFloat(),r=e.readFloat(),i=e.readFloat();s.setRGB(t,r,i),this.debugMessage("      Color: "+s.r+", "+s.g+", "+s.b)}else this.debugMessage("      Unknown color chunk: "+e.hexId);return s}readPercentage(t){const e=t.readChunk();switch(e.id){case JM:return e.readShort()/100;case $M:return e.readFloat();default:return this.debugMessage("      Unknown percentage chunk: "+e.hexId),0}}debugMessage(t){this.debug&&console.log(t)}}class GM{constructor(t,e,s){this.data=t,this.offset=e,this.position=e,this.debugMessage=s,this.debugMessage instanceof Function&&(this.debugMessage=function(){}),this.id=this.readWord(),this.size=this.readDWord(),this.end=this.offset+this.size,this.end>t.byteLength&&this.debugMessage("Bad chunk size for chunk at "+e)}readChunk(){if(this.endOfChunk)return null;try{const t=new GM(this.data,this.position,this.debugMessage);return this.position+=t.size,t}catch(t){return this.debugMessage("Unable to read chunk at "+this.position),null}}get hexId(){return this.id.toString(16)}get endOfChunk(){return this.position>=this.end}readByte(){const t=this.data.getUint8(this.position,!0);return this.position+=1,t}readFloat(){try{const t=this.data.getFloat32(this.position,!0);return this.position+=4,t}catch(t){return this.debugMessage(t+" "+this.position+" "+this.data.byteLength),0}}readInt(){const t=this.data.getInt32(this.position,!0);return this.position+=4,t}readShort(){const t=this.data.getInt16(this.position,!0);return this.position+=2,t}readDWord(){const t=this.data.getUint32(this.position,!0);return this.position+=4,t}readWord(){const t=this.data.getUint16(this.position,!0);return this.position+=2,t}readString(){let t="",e=this.readByte();for(;e;)t+=String.fromCharCode(e),e=this.readByte();return t}}const jM=19789,zM=15786,VM=49725,WM=2,YM=16,XM=17,qM=18,KM=19,JM=48,$M=49,ZM=15677,QM=15678,tP=256,eP=45055,sP=40960,rP=40976,iP=40992,nP=41008,oP=41024,aP=41040,hP=41089,cP=41091,lP=41093,uP=41095,pP=41472,dP=41488,mP=41520,fP=41476,gP=41728,yP=41812,TP=41814,vP=41816,bP=41818,wP=16384,xP=16640,IP=16656,EP=16672,SP=16688,AP=16704,RP=16736;class CP extends Qc{load(t,e,s,r){const i=this,n=new el(this.manager);n.setPath(this.path),n.setResponseType("arraybuffer"),n.setWithCredentials(this.withCredentials),n.load(t,(function(s){try{e(i.parse(s))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),s,r)}parse(t){const e=new ko,s=Em(new Uint8Array(t.slice(16))),r=JSON.parse(hm(s["metadata.json"])),i=new DataView(s["data.sketch"].buffer),n=i.getInt32(16,!0),o={};let a=20;for(let t=0;t<n;t++){const t=i.getInt32(a,!0),e=[i.getFloat32(a+4,!0),i.getFloat32(a+8,!0),i.getFloat32(a+12,!0),i.getFloat32(a+16,!0)],s=i.getFloat32(a+20,!0),r=i.getUint32(a+24,!0),n=i.getUint32(a+28,!0);let h=0,c=0;for(let t=0;t<4;t++){const e=1<<t;(r&e)>0&&(h+=4),(n&e)>0&&(c+=4)}a=a+28+h+4;const l=i.getInt32(a,!0),u=new Float32Array(3*l),p=new Float32Array(4*l);a+=4;for(let t=0,e=0;t<u.length;t+=3,e+=4)u[t+0]=i.getFloat32(a+0,!0),u[t+1]=i.getFloat32(a+4,!0),u[t+2]=i.getFloat32(a+8,!0),p[e+0]=i.getFloat32(a+12,!0),p[e+1]=i.getFloat32(a+16,!0),p[e+2]=i.getFloat32(a+20,!0),p[e+3]=i.getFloat32(a+24,!0),a=a+28+c;t in o==!1&&(o[t]=[]),o[t].push([u,p,s,e])}for(const t in o){const s=new OP(o[t]),i=MP(r.BrushIndex[t]);e.add(new jr(s,i))}return e}}class OP extends Er{constructor(t){super();const e=[],s=[],r=[],i=new Ge,n=new Ge,o=new Be,a=new Be,h=new Ge,c=new Ge,l=new Ge,u=new Ge;for(const p in t){const d=t[p],m=d[0],f=d[1],g=d[2],y=d[3];n.fromArray(m,0),a.fromArray(f,0);for(let t=3,p=4,d=m.length;t<d;t+=3,p+=4){i.fromArray(m,t),o.fromArray(f,p),h.set(-g,0,0),h.applyQuaternion(o),h.add(i),c.set(g,0,0),c.applyQuaternion(o),c.add(i),l.set(g,0,0),l.applyQuaternion(a),l.add(n),u.set(-g,0,0),u.applyQuaternion(a),u.add(n),e.push(h.x,h.y,-h.z),e.push(c.x,c.y,-c.z),e.push(u.x,u.y,-u.z),e.push(c.x,c.y,-c.z),e.push(l.x,l.y,-l.z),e.push(u.x,u.y,-u.z),n.copy(i),a.copy(o),s.push(...y),s.push(...y),s.push(...y),s.push(...y),s.push(...y),s.push(...y);const T=t/d,v=(t-3)/d;r.push(T,0),r.push(T,1),r.push(v,0),r.push(T,1),r.push(v,1),r.push(v,0)}}this.setAttribute("position",new or(new Float32Array(e),3)),this.setAttribute("color",new or(new Float32Array(s),4)),this.setAttribute("uv",new or(new Float32Array(r),2))}}const _P={"89d104cd-d012-426b-b5b3-bbaee63ac43c":"Bubbles","700f3aa8-9a7c-2384-8b8a-ea028905dd8c":"CelVinyl","0f0ff7b2-a677-45eb-a7d6-0cd7206f4816":"ChromaticWave","1161af82-50cf-47db-9706-0c3576d43c43":"CoarseBristles","79168f10-6961-464a-8be1-57ed364c5600":"CoarseBristlesSingleSided","1caa6d7d-f015-3f54-3a4b-8b5354d39f81":"Comet","c8313697-2563-47fc-832e-290f4c04b901":"DiamondHull","4391aaaa-df73-4396-9e33-31e4e4930b27":"Disco","d1d991f2-e7a0-4cf1-b328-f57e915e6260":"DotMarker","6a1cf9f9-032c-45ec-9b1d-a6680bee30f7":"Dots","0d3889f3-3ede-470c-8af4-f44813306126":"DoubleTaperedFlat","0d3889f3-3ede-470c-8af4-de4813306126":"DoubleTaperedMarker","d0262945-853c-4481-9cbd-88586bed93cb":"DuctTape","3ca16e2f-bdcd-4da2-8631-dcef342f40f1":"DuctTapeSingleSided","f6e85de3-6dcc-4e7f-87fd-cee8c3d25d51":"Electricity","02ffb866-7fb2-4d15-b761-1012cefb1360":"Embers","cb92b597-94ca-4255-b017-0e3f42f12f9e":"Fire","2d35bcf0-e4d8-452c-97b1-3311be063130":"Flat","55303bc4-c749-4a72-98d9-d23e68e76e18":"FlatDeprecated","280c0a7a-aad8-416c-a7d2-df63d129ca70":"FlatSingleSided","cf019139-d41c-4eb0-a1d0-5cf54b0a42f3":"Highlighter","6a1cf9f9-032c-45ec-9b6e-a6680bee32e9":"HyperGrid","dce872c2-7b49-4684-b59b-c45387949c5c":"Hypercolor","e8ef32b1-baa8-460a-9c2c-9cf8506794f5":"HypercolorSingleSided","2f212815-f4d3-c1a4-681a-feeaf9c6dc37":"Icing","f5c336cf-5108-4b40-ade9-c687504385ab":"Ink","c0012095-3ffd-4040-8ee1-fc180d346eaa":"InkSingleSided","4a76a27a-44d8-4bfe-9a8c-713749a499b0":"Leaves","ea19de07-d0c0-4484-9198-18489a3c1487":"LeavesSingleSided","2241cd32-8ba2-48a5-9ee7-2caef7e9ed62":"Light","4391aaaa-df81-4396-9e33-31e4e4930b27":"LightWire","d381e0f5-3def-4a0d-8853-31e9200bcbda":"Lofted","429ed64a-4e97-4466-84d3-145a861ef684":"Marker","79348357-432d-4746-8e29-0e25c112e3aa":"MatteHull","b2ffef01-eaaa-4ab5-aa64-95a2c4f5dbc6":"NeonPulse","f72ec0e7-a844-4e38-82e3-140c44772699":"OilPaint","c515dad7-4393-4681-81ad-162ef052241b":"OilPaintSingleSided","f1114e2e-eb8d-4fde-915a-6e653b54e9f5":"Paper","759f1ebd-20cd-4720-8d41-234e0da63716":"PaperSingleSided","e0abbc80-0f80-e854-4970-8924a0863dcc":"Petal","c33714d1-b2f9-412e-bd50-1884c9d46336":"Plasma","ad1ad437-76e2-450d-a23a-e17f8310b960":"Rainbow","faaa4d44-fcfb-4177-96be-753ac0421ba3":"ShinyHull","70d79cca-b159-4f35-990c-f02193947fe8":"Smoke","d902ed8b-d0d1-476c-a8de-878a79e3a34c":"Snow","accb32f5-4509-454f-93f8-1df3fd31df1b":"SoftHighlighter","cf7f0059-7aeb-53a4-2b67-c83d863a9ffa":"Spikes","8dc4a70c-d558-4efd-a5ed-d4e860f40dc3":"Splatter","7a1c8107-50c5-4b70-9a39-421576d6617e":"SplatterSingleSided","0eb4db27-3f82-408d-b5a1-19ebd7d5b711":"Stars","44bb800a-fbc3-4592-8426-94ecb05ddec3":"Streamers","0077f88c-d93a-42f3-b59b-b31c50cdb414":"Taffy","b468c1fb-f254-41ed-8ec9-57030bc5660c":"TaperedFlat","c8ccb53d-ae13-45ef-8afb-b730d81394eb":"TaperedFlatSingleSided","d90c6ad8-af0f-4b54-b422-e0f92abe1b3c":"TaperedMarker","1a26b8c0-8a07-4f8a-9fac-d2ef36e0cad0":"TaperedMarker_Flat","75b32cf0-fdd6-4d89-a64b-e2a00b247b0f":"ThickPaint","fdf0326a-c0d1-4fed-b101-9db0ff6d071f":"ThickPaintSingleSided","4391385a-df73-4396-9e33-31e4e4930b27":"Toon","a8fea537-da7c-4d4b-817f-24f074725d6d":"UnlitHull","d229d335-c334-495a-a801-660ac8a87360":"VelvetInk","10201aa3-ebc2-42d8-84b7-2e63f6eeb8ab":"Waveform","b67c0e81-ce6d-40a8-aeb0-ef036b081aa3":"WetPaint","dea67637-cd1a-27e4-c9b1-52f4bbcb84e5":"WetPaintSingleSided","5347acf0-a8e2-47b6-8346-30c70719d763":"WigglyGraphite","e814fef1-97fd-7194-4a2f-50c2bb918be2":"WigglyGraphiteSingleSided","4391385a-cf83-4396-9e33-31e4e4930b27":"Wire"},DP={BloomColor:"\n\t\t\tvec3 BloomColor(vec3 color, float gain) {\n\t\t\t\t// Guarantee that there's at least a little bit of all 3 channels.\n\t\t\t\t// This makes fully-saturated strokes (which only have 2 non-zero\n\t\t\t\t// color channels) eventually clip to white rather than to a secondary.\n\t\t\t\tfloat cmin = length(color.rgb) * .05;\n\t\t\t\tcolor.rgb = max(color.rgb, vec3(cmin, cmin, cmin));\n\t\t\t\t// If we try to remove this pow() from .a, it brightens up\n\t\t\t\t// pressure-sensitive strokes; looks better as-is.\n\t\t\t\tcolor = pow(color, vec3(2.2));\n\t\t\t\tcolor.rgb *= 2. * exp(gain * 10.);\n\t\t\t\treturn color;\n\t\t\t}\n\t\t",LinearToSrgb:"\n\t\t\tvec3 LinearToSrgb(vec3 color) {\n\t\t\t\t// Approximation http://chilliant.blogspot.com/2012/08/srgb-approximations-for-hlsl.html\n\t\t\t\tvec3 linearColor = color.rgb;\n\t\t\t\tvec3 S1 = sqrt(linearColor);\n\t\t\t\tvec3 S2 = sqrt(S1);\n\t\t\t\tvec3 S3 = sqrt(S2);\n\t\t\t\tcolor.rgb = 0.662002687 * S1 + 0.684122060 * S2 - 0.323583601 * S3 - 0.0225411470 * linearColor;\n\t\t\t\treturn color;\n\t\t\t}\n\t\t",hsv:"\n\t\t\t// uniform sampler2D lookupTex;\n\t\t\tvec4 lookup(vec4 textureColor) {\n\t\t\t\treturn textureColor;\n\t\t\t}\n\n\t\t\tvec3 lookup(vec3 textureColor) {\n\t\t\t\treturn textureColor;\n\t\t\t}\n\n\t\t\tvec3 hsv2rgb( vec3 hsv ) {\n\t\t\t\tvec3 rgb = clamp( abs(mod(hsv.x*6.0+vec3(0.0,4.0,2.0),6.0)-3.0)-1.0, 0.0, 1.0 );\n\t\t\t\treturn hsv.z * mix( vec3(1.0), rgb, hsv.y);\n\t\t\t}\n\n\t\t\tvec3 rgb2hsv( vec3 rgb ) {\n\t\t\t\tvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n\t\t\t\tvec4 p = mix(vec4(rgb.bg, K.wz), vec4(rgb.gb, K.xy), step(rgb.b, rgb.g));\n\t\t\t\tvec4 q = mix(vec4(p.xyw, rgb.r), vec4(rgb.r, p.yzx), step(p.x, rgb.r));\n\n\t\t\t\tfloat d = q.x - min(q.w, q.y);\n\t\t\t\tfloat e = 1.0e-10;\n\n\t\t\t\treturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n\t\t\t}\n\t\t",SrgbToLinear:"\n\t\t\tvec3 SrgbToLinear(vec3 color) {\n\t\t\t\t// Approximation http://chilliant.blogspot.com/2012/08/srgb-approximations-for-hlsl.html\n\t\t\t\tvec3 sRGB = color.rgb;\n\t\t\t\tcolor.rgb = sRGB * (sRGB * (sRGB * 0.305306011 + 0.682171111) + 0.012522878);\n\t\t\t\treturn color;\n\t\t\t}\n\t\t"};let FP=null;function MP(t){switch(_P[t]){case"Light":return new Sc(function(){if(null===FP){const t=(new ol).setPath("./textures/tiltbrush/");FP={Light:{uniforms:{mainTex:{value:t.load("Light.webp")},alphaTest:{value:.067},emission_gain:{value:.45},alpha:{value:1}},vertexShader:`\n\t\t\t\t\tprecision highp float;\n\t\t\t\t\tprecision highp int;\n\n\t\t\t\t\tattribute vec2 uv;\n\t\t\t\t\tattribute vec4 color;\n\t\t\t\t\tattribute vec3 position;\n\n\t\t\t\t\tuniform mat4 modelMatrix;\n\t\t\t\t\tuniform mat4 modelViewMatrix;\n\t\t\t\t\tuniform mat4 projectionMatrix;\n\t\t\t\t\tuniform mat4 viewMatrix;\n\t\t\t\t\tuniform mat3 normalMatrix;\n\t\t\t\t\tuniform vec3 cameraPosition;\n\n\t\t\t\t\tvarying vec2 vUv;\n\t\t\t\t\tvarying vec3 vColor;\n\n\t\t\t\t\t${DP.LinearToSrgb}\n\t\t\t\t\t${DP.hsv}\n\n\t\t\t\t\tvoid main() {\n\n\t\t\t\t\t\tvUv = uv;\n\n\t\t\t\t\t\tvColor = lookup(color.rgb);\n\n\t\t\t\t\t\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\n\t\t\t\t\t\tgl_Position = projectionMatrix * mvPosition;\n\n\t\t\t\t\t}\n\t\t\t\t`,fragmentShader:`\n\t\t\t\t\tprecision highp float;\n\t\t\t\t\tprecision highp int;\n\n\t\t\t\t\tuniform float emission_gain;\n\n\t\t\t\t\tuniform sampler2D mainTex;\n\t\t\t\t\tuniform float alphaTest;\n\n\t\t\t\t\tvarying vec2 vUv;\n\t\t\t\t\tvarying vec3 vColor;\n\n\t\t\t\t\t${DP.BloomColor}\n\t\t\t\t\t${DP.SrgbToLinear}\n\n\t\t\t\t\tvoid main(){\n\t\t\t\t\t\tvec4 col = texture2D(mainTex, vUv);\n\t\t\t\t\t\tvec3 color = vColor;\n\t\t\t\t\t\tcolor = BloomColor(color, emission_gain);\n\t\t\t\t\t\tcolor = color * col.rgb;\n\t\t\t\t\t\tcolor = color * col.a;\n\t\t\t\t\t\tcolor = SrgbToLinear(color);\n\t\t\t\t\t\tgl_FragColor = vec4(color, 1.0);\n\t\t\t\t\t}\n\t\t\t\t`,side:2,transparent:!0,depthFunc:2,depthWrite:!0,depthTest:!1,blending:5,blendDst:201,blendDstAlpha:201,blendEquation:100,blendEquationAlpha:100,blendSrc:201,blendSrcAlpha:201}}}return FP}().Light);default:return new rr({vertexColors:!0,side:2})}}class PP extends Qc{load(t,e,s,r){const i=this,n=new el(i.manager);n.setPath(i.path),n.setResponseType("arraybuffer"),n.setRequestHeader(i.requestHeader),n.load(t,(function(s){try{e(i.parse(s))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),s,r)}parse(t){const e=new DataView(t),s=e.getUint32(0,!0),r=e.getUint32(4,!0);if(542658390!==s||150!==r)return void console.error("Not a valid VOX file");const i=[0,4294967295,4291624959,4288282623,4284940287,4281597951,4278255615,4294954239,4291611903,4288269567,4284927231,4281584895,4278242559,4294941183,4291598847,4288256511,4284914175,4281571839,4278229503,4294928127,4291585791,4288243455,4284901119,4281558783,4278216447,4294915071,4291572735,4288230399,4284888063,4281545727,4278203391,4294902015,4291559679,4288217343,4284875007,4281532671,4278190335,4294967244,4291624908,4288282572,4284940236,4281597900,4278255564,4294954188,4291611852,4288269516,4284927180,4281584844,4278242508,4294941132,4291598796,4288256460,4284914124,4281571788,4278229452,4294928076,4291585740,4288243404,4284901068,4281558732,4278216396,4294915020,4291572684,4288230348,4284888012,4281545676,4278203340,4294901964,4291559628,4288217292,4284874956,4281532620,4278190284,4294967193,4291624857,4288282521,4284940185,4281597849,4278255513,4294954137,4291611801,4288269465,4284927129,4281584793,4278242457,4294941081,4291598745,4288256409,4284914073,4281571737,4278229401,4294928025,4291585689,4288243353,4284901017,4281558681,4278216345,4294914969,4291572633,4288230297,4284887961,4281545625,4278203289,4294901913,4291559577,4288217241,4284874905,4281532569,4278190233,4294967142,4291624806,4288282470,4284940134,4281597798,4278255462,4294954086,4291611750,4288269414,4284927078,4281584742,4278242406,4294941030,4291598694,4288256358,4284914022,4281571686,4278229350,4294927974,4291585638,4288243302,4284900966,4281558630,4278216294,4294914918,4291572582,4288230246,4284887910,4281545574,4278203238,4294901862,4291559526,4288217190,4284874854,4281532518,4278190182,4294967091,4291624755,4288282419,4284940083,4281597747,4278255411,4294954035,4291611699,4288269363,4284927027,4281584691,4278242355,4294940979,4291598643,4288256307,4284913971,4281571635,4278229299,4294927923,4291585587,4288243251,4284900915,4281558579,4278216243,4294914867,4291572531,4288230195,4284887859,4281545523,4278203187,4294901811,4291559475,4288217139,4284874803,4281532467,4278190131,4294967040,4291624704,4288282368,4284940032,4281597696,4278255360,4294953984,4291611648,4288269312,4284926976,4281584640,4278242304,4294940928,4291598592,4288256256,4284913920,4281571584,4278229248,4294927872,4291585536,4288243200,4284900864,4281558528,4278216192,4294914816,4291572480,4288230144,4284887808,4281545472,4278203136,4294901760,4291559424,4288217088,4284874752,4281532416,4278190318,4278190301,4278190267,4278190250,4278190216,4278190199,4278190165,4278190148,4278190114,4278190097,4278251008,4278246656,4278237952,4278233600,4278224896,4278220544,4278211840,4278207488,4278198784,4278194432,4293787648,4292673536,4290445312,4289331200,4287102976,4285988864,4283760640,4282646528,4280418304,4279304192,4293848814,4292730333,4290493371,4289374890,4287137928,4286019447,4283782485,4282664004,4280427042,4279308561];let n,o=8;const a=[];for(;o<e.byteLength;){let s="";for(let t=0;t<4;t++)s+=String.fromCharCode(e.getUint8(o++));const r=e.getUint32(o,!0);if(o+=4,e.getUint32(o,!0),o+=4,"SIZE"===s){const t=e.getUint32(o,!0);o+=4;const s=e.getUint32(o,!0);o+=4;const h=e.getUint32(o,!0);o+=4,n={palette:i,size:{x:t,y:s,z:h}},a.push(n),o+=r-12}else if("XYZI"===s){const s=e.getUint32(o,!0);o+=4,n.data=new Uint8Array(t,o,4*s),o+=4*s}else if("RGBA"===s){const t=[0];for(let s=0;s<256;s++)t[s+1]=e.getUint32(o,!0),o+=4;n.palette=t}else o+=r}return a}}class NP extends jr{constructor(t){const e=t.data,s=t.size,r=t.palette,i=[],n=[],o=[0,0,0,0,0,1,0,1,0,0,1,1,0,1,0,0,0,1],a=[1,0,0,1,1,0,1,0,1,1,1,1,1,0,1,1,1,0],h=[0,0,1,1,0,1,0,1,1,1,1,1,0,1,1,1,0,1],c=[0,0,0,0,1,0,1,0,0,1,1,0,1,0,0,0,1,0],l=[0,0,1,0,0,0,1,0,1,1,0,0,1,0,1,0,0,0],u=[0,1,1,1,1,1,0,1,0,1,1,0,0,1,0,1,1,1];function p(t,e,r,o,a,h,c){e-=s.x/2,r-=s.z/2,o+=s.y/2;for(let s=0;s<18;s+=3)i.push(t[s+0]+e,t[s+1]+r,t[s+2]+o),n.push(a,h,c)}const d=s.x,m=s.x*s.y,f=new Uint8Array(s.x*s.y*s.z);for(let t=0;t<e.length;t+=4){f[e[t+0]+e[t+1]*d+e[t+2]*m]=255}let g=!1;for(let t=0;t<e.length;t+=4){const i=e[t+0],n=e[t+1],y=e[t+2],T=r[e[t+3]],v=(T>>0&255)/255,b=(T>>8&255)/255,w=(T>>16&255)/255;(v>0||b>0||w>0)&&(g=!0);const x=i+n*d+y*m;0!==f[x+1]&&i!==s.x-1||p(a,i,y,-n,v,b,w),0!==f[x-1]&&0!==i||p(o,i,y,-n,v,b,w),0!==f[x+d]&&n!==s.y-1||p(c,i,y,-n,v,b,w),0!==f[x-d]&&0!==n||p(h,i,y,-n,v,b,w),0!==f[x+m]&&y!==s.z-1||p(u,i,y,-n,v,b,w),0!==f[x-m]&&0!==y||p(l,i,y,-n,v,b,w)}const y=new Er;y.setAttribute("position",new fr(i,3)),y.computeVertexNormals();const T=new Ac;g&&(y.setAttribute("color",new fr(n,3)),T.vertexColors=!0),super(y,T)}}
/*! chevrotain - v9.0.1 */var LP=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),kP=LP((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="9.0.1"})),UP=LP(((t,e)=>{var s=t&&t.__spreadArray||function(t,e){for(var s=0,r=e.length,i=t.length;s<r;s++,i++)t[i]=e[s];return t};function r(t){return t&&0===t.length}function i(t){return null==t?[]:Object.keys(t)}function n(t){for(var e=[],s=Object.keys(t),r=0;r<s.length;r++)e.push(t[s[r]]);return e}function o(t,e){if(Array.isArray(t))for(var s=0;s<t.length;s++)e.call(null,t[s],s);else{if(!f(t))throw Error("non exhaustive match");var r=i(t);for(s=0;s<r.length;s++){var n=r[s],o=t[n];e.call(null,o,n)}}}function a(t,e){var s=[];if(Array.isArray(t))for(var r=0;r<t.length;r++){var i=t[r];e.call(null,i)&&s.push(i)}return s}function h(t,e){return a(t,(function(t){return!e(t)}))}function c(t,e){return!!f(t)&&t.hasOwnProperty(e)}function l(t,e){return void 0!==d(t,(function(t){return t===e}))}function u(t){for(var e=[],s=0;s<t.length;s++)e.push(t[s]);return e}function p(t){var e={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}function d(t,e){for(var s=0;s<t.length;s++){var r=t[s];if(e.call(null,r))return r}}function m(t,e,s){for(var r=Array.isArray(t),o=r?t:n(t),a=r?[]:i(t),h=s,c=0;c<o.length;c++)h=e.call(null,h,o[c],r?c:a[c]);return h}function f(t){return t instanceof Object}function g(t){for(var e=[],s=1;s<arguments.length;s++)e[s-1]=arguments[s];for(var r=0;r<e.length;r++)for(var n=e[r],o=i(n),a=0;a<o.length;a++){var h=o[a];c(t,h)||(t[h]=n[h])}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.toFastProperties=t.timer=t.peek=t.isES2015MapSupported=t.PRINT_WARNING=t.PRINT_ERROR=t.packArray=t.IDENTITY=t.NOOP=t.merge=t.groupBy=t.defaults=t.assignNoOverwrite=t.assign=t.zipObject=t.sortBy=t.indexOf=t.some=t.difference=t.every=t.isObject=t.isRegExp=t.isArray=t.partial=t.uniq=t.compact=t.reduce=t.findAll=t.find=t.cloneObj=t.cloneArr=t.contains=t.has=t.pick=t.reject=t.filter=t.dropRight=t.drop=t.isFunction=t.isUndefined=t.isString=t.forEach=t.last=t.first=t.flatten=t.map=t.mapValues=t.values=t.keys=t.isEmpty=void 0,t.isEmpty=r,t.keys=i,t.values=n,t.mapValues=function(t,e){for(var s=[],r=i(t),n=0;n<r.length;n++){var o=r[n];s.push(e.call(null,t[o],o))}return s},t.map=function(t,e){for(var s=[],r=0;r<t.length;r++)s.push(e.call(null,t[r],r));return s},t.flatten=function t(e){for(var s=[],r=0;r<e.length;r++){var i=e[r];Array.isArray(i)?s=s.concat(t(i)):s.push(i)}return s},t.first=function(t){return r(t)?void 0:t[0]},t.last=function(t){var e=t&&t.length;return e?t[e-1]:void 0},t.forEach=o,t.isString=function(t){return"string"==typeof t},t.isUndefined=function(t){return void 0===t},t.isFunction=function(t){return t instanceof Function},t.drop=function(t,e){return void 0===e&&(e=1),t.slice(e,t.length)},t.dropRight=function(t,e){return void 0===e&&(e=1),t.slice(0,t.length-e)},t.filter=a,t.reject=h,t.pick=function(t,e){for(var s=Object.keys(t),r={},i=0;i<s.length;i++){var n=s[i],o=t[n];e(o)&&(r[n]=o)}return r},t.has=c,t.contains=l,t.cloneArr=u,t.cloneObj=p,t.find=d,t.findAll=function(t,e){for(var s=[],r=0;r<t.length;r++){var i=t[r];e.call(null,i)&&s.push(i)}return s},t.reduce=m,t.compact=function(t){return h(t,(function(t){return null==t}))},t.uniq=function(t,e){void 0===e&&(e=function(t){return t});var s=[];return m(t,(function(t,r){var i=e(r);return l(s,i)?t:(s.push(i),t.concat(r))}),[])},t.partial=function(t){for(var e=[],s=1;s<arguments.length;s++)e[s-1]=arguments[s];var r=[null],i=r.concat(e);return Function.bind.apply(t,i)},t.isArray=function(t){return Array.isArray(t)},t.isRegExp=function(t){return t instanceof RegExp},t.isObject=f,t.every=function(t,e){for(var s=0;s<t.length;s++)if(!e(t[s],s))return!1;return!0},t.difference=function(t,e){return h(t,(function(t){return l(e,t)}))},t.some=function(t,e){for(var s=0;s<t.length;s++)if(e(t[s]))return!0;return!1},t.indexOf=function(t,e){for(var s=0;s<t.length;s++)if(t[s]===e)return s;return-1},t.sortBy=function(t,e){var s=u(t);return s.sort((function(t,s){return e(t)-e(s)})),s},t.zipObject=function(t,e){if(t.length!==e.length)throw Error("can't zipObject with different number of keys and values!");for(var s={},r=0;r<t.length;r++)s[t[r]]=e[r];return s},t.assign=function(t){for(var e=[],s=1;s<arguments.length;s++)e[s-1]=arguments[s];for(var r=0;r<e.length;r++)for(var n=e[r],o=i(n),a=0;a<o.length;a++){var h=o[a];t[h]=n[h]}return t},t.assignNoOverwrite=g,t.defaults=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return g.apply(void 0,s([{}],t))},t.groupBy=function(t,e){var s={};return o(t,(function(t){var r=e(t),i=s[r];i?i.push(t):s[r]=[t]})),s},t.merge=function(t,e){for(var s=p(t),r=i(e),n=0;n<r.length;n++){var o=r[n],a=e[o];s[o]=a}return s},t.NOOP=function(){},t.IDENTITY=function(t){return t},t.packArray=function(t){for(var e=[],s=0;s<t.length;s++){var r=t[s];e.push(void 0!==r?r:void 0)}return e},t.PRINT_ERROR=function(t){console&&console.error&&console.error("Error: "+t)},t.PRINT_WARNING=function(t){console&&console.warn&&console.warn("Warning: "+t)},t.isES2015MapSupported=function(){return"function"==typeof Map},t.peek=function(t){return t[t.length-1]},t.timer=function(t){var e=(new Date).getTime(),s=t();return{time:(new Date).getTime()-e,value:s}},t.toFastProperties=function(t){return t}})),HP=LP(((t,e)=>{var s,r;s="undefined"!=typeof self?self:t,r=function(){function t(){}t.prototype.saveState=function(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}},t.prototype.restoreState=function(t){this.idx=t.idx,this.input=t.input,this.groupIdx=t.groupIdx},t.prototype.pattern=function(t){this.idx=0,this.input=t,this.groupIdx=0,this.consumeChar("/");var e=this.disjunction();this.consumeChar("/");for(var s={type:"Flags",loc:{begin:this.idx,end:t.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};this.isRegExpFlag();)switch(this.popChar()){case"g":o(s,"global");break;case"i":o(s,"ignoreCase");break;case"m":o(s,"multiLine");break;case"u":o(s,"unicode");break;case"y":o(s,"sticky")}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:s,value:e,loc:this.loc(0)}},t.prototype.disjunction=function(){var t=[],e=this.idx;for(t.push(this.alternative());"|"===this.peekChar();)this.consumeChar("|"),t.push(this.alternative());return{type:"Disjunction",value:t,loc:this.loc(e)}},t.prototype.alternative=function(){for(var t=[],e=this.idx;this.isTerm();)t.push(this.term());return{type:"Alternative",value:t,loc:this.loc(e)}},t.prototype.term=function(){return this.isAssertion()?this.assertion():this.atom()},t.prototype.assertion=function(){var t=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(t)};case"$":return{type:"EndAnchor",loc:this.loc(t)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(t)};case"B":return{type:"NonWordBoundary",loc:this.loc(t)}}throw Error("Invalid Assertion Escape");case"(":var e;switch(this.consumeChar("?"),this.popChar()){case"=":e="Lookahead";break;case"!":e="NegativeLookahead"}a(e);var s=this.disjunction();return this.consumeChar(")"),{type:e,value:s,loc:this.loc(t)}}!function(){throw Error("Internal Error - Should never get here!")}()},t.prototype.quantifier=function(t){var e,s=this.idx;switch(this.popChar()){case"*":e={atLeast:0,atMost:1/0};break;case"+":e={atLeast:1,atMost:1/0};break;case"?":e={atLeast:0,atMost:1};break;case"{":var r=this.integerIncludingZero();switch(this.popChar()){case"}":e={atLeast:r,atMost:r};break;case",":e=this.isDigit()?{atLeast:r,atMost:this.integerIncludingZero()}:{atLeast:r,atMost:1/0},this.consumeChar("}")}if(!0===t&&void 0===e)return;a(e)}if(!0!==t||void 0!==e)return a(e),"?"===this.peekChar(0)?(this.consumeChar("?"),e.greedy=!1):e.greedy=!0,e.type="Quantifier",e.loc=this.loc(s),e},t.prototype.atom=function(){var t,e=this.idx;switch(this.peekChar()){case".":t=this.dotAll();break;case"\\":t=this.atomEscape();break;case"[":t=this.characterClass();break;case"(":t=this.group()}return void 0===t&&this.isPatternCharacter()&&(t=this.patternCharacter()),a(t),t.loc=this.loc(e),this.isQuantifier()&&(t.quantifier=this.quantifier()),t},t.prototype.dotAll=function(){return this.consumeChar("."),{type:"Set",complement:!0,value:[i("\n"),i("\r"),i("\u2028"),i("\u2029")]}},t.prototype.atomEscape=function(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},t.prototype.decimalEscapeAtom=function(){return{type:"GroupBackReference",value:this.positiveInteger()}},t.prototype.characterClassEscape=function(){var t,e=!1;switch(this.popChar()){case"d":t=c;break;case"D":t=c,e=!0;break;case"s":t=u;break;case"S":t=u,e=!0;break;case"w":t=l;break;case"W":t=l,e=!0}return a(t),{type:"Set",value:t,complement:e}},t.prototype.controlEscapeAtom=function(){var t;switch(this.popChar()){case"f":t=i("\f");break;case"n":t=i("\n");break;case"r":t=i("\r");break;case"t":t=i("\t");break;case"v":t=i("\v")}return a(t),{type:"Character",value:t}},t.prototype.controlLetterEscapeAtom=function(){this.consumeChar("c");var t=this.popChar();if(!1===/[a-zA-Z]/.test(t))throw Error("Invalid ");return{type:"Character",value:t.toUpperCase().charCodeAt(0)-64}},t.prototype.nulCharacterAtom=function(){return this.consumeChar("0"),{type:"Character",value:i("\0")}},t.prototype.hexEscapeSequenceAtom=function(){return this.consumeChar("x"),this.parseHexDigits(2)},t.prototype.regExpUnicodeEscapeSequenceAtom=function(){return this.consumeChar("u"),this.parseHexDigits(4)},t.prototype.identityEscapeAtom=function(){return{type:"Character",value:i(this.popChar())}},t.prototype.classPatternCharacterAtom=function(){switch(this.peekChar()){case"\n":case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:return{type:"Character",value:i(this.popChar())}}},t.prototype.characterClass=function(){var t=[],e=!1;for(this.consumeChar("["),"^"===this.peekChar(0)&&(this.consumeChar("^"),e=!0);this.isClassAtom();){var s=this.classAtom();if("Character"===s.type&&this.isRangeDash()){this.consumeChar("-");var r=this.classAtom();if("Character"===r.type){if(r.value<s.value)throw Error("Range out of order in character class");t.push({from:s.value,to:r.value})}else n(s.value,t),t.push(i("-")),n(r.value,t)}else n(s.value,t)}return this.consumeChar("]"),{type:"Set",complement:e,value:t}},t.prototype.classAtom=function(){switch(this.peekChar()){case"]":case"\n":case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}},t.prototype.classEscape=function(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:i("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},t.prototype.group=function(){var t=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),t=!1;break;default:this.groupIdx++}var e=this.disjunction();this.consumeChar(")");var s={type:"Group",capturing:t,value:e};return t&&(s.idx=this.groupIdx),s},t.prototype.positiveInteger=function(){var t=this.popChar();if(!1===r.test(t))throw Error("Expecting a positive integer");for(;s.test(this.peekChar(0));)t+=this.popChar();return parseInt(t,10)},t.prototype.integerIncludingZero=function(){var t=this.popChar();if(!1===s.test(t))throw Error("Expecting an integer");for(;s.test(this.peekChar(0));)t+=this.popChar();return parseInt(t,10)},t.prototype.patternCharacter=function(){var t=this.popChar();switch(t){case"\n":case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:i(t)}}},t.prototype.isRegExpFlag=function(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}},t.prototype.isRangeDash=function(){return"-"===this.peekChar()&&this.isClassAtom(1)},t.prototype.isDigit=function(){return s.test(this.peekChar(0))},t.prototype.isClassAtom=function(t){switch(void 0===t&&(t=0),this.peekChar(t)){case"]":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}},t.prototype.isTerm=function(){return this.isAtom()||this.isAssertion()},t.prototype.isAtom=function(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}},t.prototype.isAssertion=function(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return"?"===this.peekChar(1)&&("="===this.peekChar(2)||"!"===this.peekChar(2));default:return!1}},t.prototype.isQuantifier=function(){var t=this.saveState();try{return void 0!==this.quantifier(!0)}catch(t){return!1}finally{this.restoreState(t)}},t.prototype.isPatternCharacter=function(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}},t.prototype.parseHexDigits=function(t){for(var s="",r=0;r<t;r++){var i=this.popChar();if(!1===e.test(i))throw Error("Expecting a HexDecimal digits");s+=i}return{type:"Character",value:parseInt(s,16)}},t.prototype.peekChar=function(t){return void 0===t&&(t=0),this.input[this.idx+t]},t.prototype.popChar=function(){var t=this.peekChar(0);return this.consumeChar(),t},t.prototype.consumeChar=function(t){if(void 0!==t&&this.input[this.idx]!==t)throw Error("Expected: '"+t+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++},t.prototype.loc=function(t){return{begin:t,end:this.idx}};var e=/[0-9a-fA-F]/,s=/[0-9]/,r=/[1-9]/;function i(t){return t.charCodeAt(0)}function n(t,e){void 0!==t.length?t.forEach((function(t){e.push(t)})):e.push(t)}function o(t,e){if(!0===t[e])throw"duplicate flag "+e;t[e]=!0}function a(t){if(void 0===t)throw Error("Internal Error - Should never get here!")}var h,c=[];for(h=i("0");h<=i("9");h++)c.push(h);var l=[i("_")].concat(c);for(h=i("a");h<=i("z");h++)l.push(h);for(h=i("A");h<=i("Z");h++)l.push(h);var u=[i(" "),i("\f"),i("\n"),i("\r"),i("\t"),i("\v"),i("\t"),i(" "),i(" "),i(" "),i(" "),i(" "),i(" "),i(" "),i(" "),i(" "),i(" "),i(" "),i(" "),i(" "),i("\u2028"),i("\u2029"),i(" "),i(" "),i("　"),i("\ufeff")];function p(){}return p.prototype.visitChildren=function(t){for(var e in t){var s=t[e];t.hasOwnProperty(e)&&(void 0!==s.type?this.visit(s):Array.isArray(s)&&s.forEach((function(t){this.visit(t)}),this))}},p.prototype.visit=function(t){switch(t.type){case"Pattern":this.visitPattern(t);break;case"Flags":this.visitFlags(t);break;case"Disjunction":this.visitDisjunction(t);break;case"Alternative":this.visitAlternative(t);break;case"StartAnchor":this.visitStartAnchor(t);break;case"EndAnchor":this.visitEndAnchor(t);break;case"WordBoundary":this.visitWordBoundary(t);break;case"NonWordBoundary":this.visitNonWordBoundary(t);break;case"Lookahead":this.visitLookahead(t);break;case"NegativeLookahead":this.visitNegativeLookahead(t);break;case"Character":this.visitCharacter(t);break;case"Set":this.visitSet(t);break;case"Group":this.visitGroup(t);break;case"GroupBackReference":this.visitGroupBackReference(t);break;case"Quantifier":this.visitQuantifier(t)}this.visitChildren(t)},p.prototype.visitPattern=function(t){},p.prototype.visitFlags=function(t){},p.prototype.visitDisjunction=function(t){},p.prototype.visitAlternative=function(t){},p.prototype.visitStartAnchor=function(t){},p.prototype.visitEndAnchor=function(t){},p.prototype.visitWordBoundary=function(t){},p.prototype.visitNonWordBoundary=function(t){},p.prototype.visitLookahead=function(t){},p.prototype.visitNegativeLookahead=function(t){},p.prototype.visitCharacter=function(t){},p.prototype.visitSet=function(t){},p.prototype.visitGroup=function(t){},p.prototype.visitGroupBackReference=function(t){},p.prototype.visitQuantifier=function(t){},{RegExpParser:t,BaseRegExpVisitor:p,VERSION:"0.5.0"}},"function"==typeof define&&define.amd?define([],r):"object"==typeof e&&e.exports?e.exports=r():s.regexpToAst=r()})),BP=LP((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clearRegExpParserCache=t.getRegExpAst=void 0;var e=HP(),s={},r=new e.RegExpParser;t.getRegExpAst=function(t){var e=t.toString();if(s.hasOwnProperty(e))return s[e];var i=r.pattern(e);return s[e]=i,i},t.clearRegExpParserCache=function(){s={}}})),GP=LP((t=>{var e,s=t&&t.__extends||(e=function(t,s){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])})(t,s)},function(t,s){if("function"!=typeof s&&null!==s)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function r(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(r.prototype=s.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.canMatchCharCode=t.firstCharOptimizedIndices=t.getOptimizedStartCodesIndices=t.failedOptimizationPrefixMsg=void 0;var r=HP(),i=UP(),n=BP(),o=jP(),a="Complement Sets are not supported for first char optimization";function h(t,e,s){switch(t.type){case"Disjunction":for(var r=0;r<t.value.length;r++)h(t.value[r],e,s);break;case"Alternative":var n=t.value;for(r=0;r<n.length;r++){var l=n[r];switch(l.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}var p=l;switch(p.type){case"Character":c(p.value,e,s);break;case"Set":if(!0===p.complement)throw Error(a);i.forEach(p.value,(function(t){if("number"==typeof t)c(t,e,s);else{var r=t;if(!0===s)for(var i=r.from;i<=r.to;i++)c(i,e,s);else{for(i=r.from;i<=r.to&&i<o.minOptimizationVal;i++)c(i,e,s);if(r.to>=o.minOptimizationVal)for(var n=r.from>=o.minOptimizationVal?r.from:o.minOptimizationVal,a=r.to,h=o.charCodeToOptimizedIndex(n),l=o.charCodeToOptimizedIndex(a),u=h;u<=l;u++)e[u]=u}}}));break;case"Group":h(p.value,e,s);break;default:throw Error("Non Exhaustive Match")}var d=void 0!==p.quantifier&&0===p.quantifier.atLeast;if("Group"===p.type&&!1===u(p)||"Group"!==p.type&&!1===d)break}break;default:throw Error("non exhaustive match!")}return i.values(e)}function c(t,e,s){var r=o.charCodeToOptimizedIndex(t);e[r]=r,!0===s&&function(t,e){var s=String.fromCharCode(t),r=s.toUpperCase();if(r!==s){e[i=o.charCodeToOptimizedIndex(r.charCodeAt(0))]=i}else{var i,n=s.toLowerCase();if(n!==s)e[i=o.charCodeToOptimizedIndex(n.charCodeAt(0))]=i}}(t,e)}function l(t,e){return i.find(t.value,(function(t){if("number"==typeof t)return i.contains(e,t);var s=t;return void 0!==i.find(e,(function(t){return s.from<=t&&t<=s.to}))}))}function u(t){return!(!t.quantifier||0!==t.quantifier.atLeast)||!!t.value&&(i.isArray(t.value)?i.every(t.value,u):u(t.value))}t.failedOptimizationPrefixMsg='Unable to use "first char" lexer optimizations:\n',t.getOptimizedStartCodesIndices=function(e,s){void 0===s&&(s=!1);try{var o=n.getRegExpAst(e);return h(o.value,{},o.flags.ignoreCase)}catch(n){if(n.message===a)s&&i.PRINT_WARNING(t.failedOptimizationPrefixMsg+"\tUnable to optimize: < "+e.toString()+" >\n\tComplement Sets cannot be automatically optimized.\n\tThis will disable the lexer's first char optimizations.\n\tSee: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.");else{var c="";s&&(c="\n\tThis will disable the lexer's first char optimizations.\n\tSee: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details."),i.PRINT_ERROR(t.failedOptimizationPrefixMsg+"\n\tFailed parsing: < "+e.toString()+" >\n\tUsing the regexp-to-ast library version: "+r.VERSION+"\n\tPlease open an issue at: https://github.com/bd82/regexp-to-ast/issues"+c)}}return[]},t.firstCharOptimizedIndices=h;var p=function(t){function e(e){var s=t.call(this)||this;return s.targetCharCodes=e,s.found=!1,s}return s(e,t),e.prototype.visitChildren=function(e){if(!0!==this.found){switch(e.type){case"Lookahead":return void this.visitLookahead(e);case"NegativeLookahead":return void this.visitNegativeLookahead(e)}t.prototype.visitChildren.call(this,e)}},e.prototype.visitCharacter=function(t){i.contains(this.targetCharCodes,t.value)&&(this.found=!0)},e.prototype.visitSet=function(t){t.complement?void 0===l(t,this.targetCharCodes)&&(this.found=!0):void 0!==l(t,this.targetCharCodes)&&(this.found=!0)},e}(r.BaseRegExpVisitor);t.canMatchCharCode=function(t,e){if(e instanceof RegExp){var s=n.getRegExpAst(e),r=new p(t);return r.visit(s),r.found}return void 0!==i.find(e,(function(e){return i.contains(t,e.charCodeAt(0))}))}})),jP=LP((t=>{var e,s=t&&t.__extends||(e=function(t,s){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])})(t,s)},function(t,s){if("function"!=typeof s&&null!==s)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function r(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(r.prototype=s.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.charCodeToOptimizedIndex=t.minOptimizationVal=t.buildLineBreakIssueMessage=t.LineTerminatorOptimizedTester=t.isShortPattern=t.isCustomPattern=t.cloneEmptyGroups=t.performWarningRuntimeChecks=t.performRuntimeChecks=t.addStickyFlag=t.addStartOfInput=t.findUnreachablePatterns=t.findModesThatDoNotExist=t.findInvalidGroupType=t.findDuplicatePatterns=t.findUnsupportedFlags=t.findStartOfInputAnchor=t.findEmptyMatchRegExps=t.findEndOfInputAnchor=t.findInvalidPatterns=t.findMissingPatterns=t.validatePatterns=t.analyzeTokenTypes=t.enableSticky=t.disableSticky=t.SUPPORT_STICKY=t.MODES=t.DEFAULT_MODE=void 0;var r=HP(),i=WP(),n=UP(),o=GP(),a=BP(),h="PATTERN";function c(t){var e=n.filter(t,(function(t){return!n.has(t,h)}));return{errors:n.map(e,(function(t){return{message:"Token Type: ->"+t.name+"<- missing static 'PATTERN' property",type:i.LexerDefinitionErrorType.MISSING_PATTERN,tokenTypes:[t]}})),valid:n.difference(t,e)}}function l(t){var e=n.filter(t,(function(t){var e=t[h];return!(n.isRegExp(e)||n.isFunction(e)||n.has(e,"exec")||n.isString(e))}));return{errors:n.map(e,(function(t){return{message:"Token Type: ->"+t.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:i.LexerDefinitionErrorType.INVALID_PATTERN,tokenTypes:[t]}})),valid:n.difference(t,e)}}t.DEFAULT_MODE="defaultMode",t.MODES="modes",t.SUPPORT_STICKY="boolean"==typeof new RegExp("(?:)").sticky,t.disableSticky=function(){t.SUPPORT_STICKY=!1},t.enableSticky=function(){t.SUPPORT_STICKY=!0},t.analyzeTokenTypes=function(e,s){var r,a=(s=n.defaults(s,{useSticky:t.SUPPORT_STICKY,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r","\n"],tracer:function(t,e){return e()}})).tracer;a("initCharCodeToOptimizedIndexMap",(function(){!function(){if(n.isEmpty(O)){O=new Array(65536);for(var t=0;t<65536;t++)O[t]=t>255?255+~~(t/255):t}}()})),a("Reject Lexer.NA",(function(){r=n.reject(e,(function(t){return t[h]===i.Lexer.NA}))}));var c,l,u,p,d,m,f,g,y,T,v,b=!1;a("Transform Patterns",(function(){b=!1,c=n.map(r,(function(t){var e=t[h];if(n.isRegExp(e)){var r=e.source;return 1!==r.length||"^"===r||"$"===r||"."===r||e.ignoreCase?2!==r.length||"\\"!==r[0]||n.contains(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],r[1])?s.useSticky?x(e):w(e):r[1]:r}if(n.isFunction(e))return b=!0,{exec:e};if(n.has(e,"exec"))return b=!0,e;if("string"==typeof e){if(1===e.length)return e;var i=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),o=new RegExp(i);return s.useSticky?x(o):w(o)}throw Error("non exhaustive match")}))})),a("misc mapping",(function(){l=n.map(r,(function(t){return t.tokenTypeIdx})),u=n.map(r,(function(t){var e=t.GROUP;if(e!==i.Lexer.SKIPPED){if(n.isString(e))return e;if(n.isUndefined(e))return!1;throw Error("non exhaustive match")}})),p=n.map(r,(function(t){var e=t.LONGER_ALT;if(e)return n.indexOf(r,e)})),d=n.map(r,(function(t){return t.PUSH_MODE})),m=n.map(r,(function(t){return n.has(t,"POP_MODE")}))})),a("Line Terminator Handling",(function(){var t=R(s.lineTerminatorCharacters);f=n.map(r,(function(t){return!1})),"onlyOffset"!==s.positionTracking&&(f=n.map(r,(function(e){return n.has(e,"LINE_BREAKS")?e.LINE_BREAKS:!1===S(e,t)?o.canMatchCharCode(t,e.PATTERN):void 0})))})),a("Misc Mapping #2",(function(){g=n.map(r,I),y=n.map(c,E),T=n.reduce(r,(function(t,e){var s=e.GROUP;return n.isString(s)&&s!==i.Lexer.SKIPPED&&(t[s]=[]),t}),{}),v=n.map(c,(function(t,e){return{pattern:c[e],longerAlt:p[e],canLineTerminator:f[e],isCustom:g[e],short:y[e],group:u[e],push:d[e],pop:m[e],tokenTypeIdx:l[e],tokenType:r[e]}}))}));var A=!0,D=[];return s.safeMode||a("First Char Optimization",(function(){D=n.reduce(r,(function(t,e,r){if("string"==typeof e.PATTERN){var i=_(e.PATTERN.charCodeAt(0));C(t,i,v[r])}else if(n.isArray(e.START_CHARS_HINT)){var a;n.forEach(e.START_CHARS_HINT,(function(e){var s=_("string"==typeof e?e.charCodeAt(0):e);a!==s&&(a=s,C(t,s,v[r]))}))}else if(n.isRegExp(e.PATTERN))if(e.PATTERN.unicode)A=!1,s.ensureOptimizations&&n.PRINT_ERROR(o.failedOptimizationPrefixMsg+"\tUnable to analyze < "+e.PATTERN.toString()+" > pattern.\n\tThe regexp unicode flag is not currently supported by the regexp-to-ast library.\n\tThis will disable the lexer's first char optimizations.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE");else{var h=o.getOptimizedStartCodesIndices(e.PATTERN,s.ensureOptimizations);n.isEmpty(h)&&(A=!1),n.forEach(h,(function(e){C(t,e,v[r])}))}else s.ensureOptimizations&&n.PRINT_ERROR(o.failedOptimizationPrefixMsg+"\tTokenType: <"+e.name+"> is using a custom token pattern without providing <start_chars_hint> parameter.\n\tThis will disable the lexer's first char optimizations.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE"),A=!1;return t}),[])})),a("ArrayPacking",(function(){D=n.packArray(D)})),{emptyGroups:T,patternIdxToConfig:v,charCodeToPatternIdxToConfig:D,hasCustom:b,canBeOptimized:A}},t.validatePatterns=function(t,e){var s=[],r=c(t);s=s.concat(r.errors);var i=l(r.valid),o=i.valid;return s=(s=(s=(s=(s=s.concat(i.errors)).concat(function(t){var e=[],s=n.filter(t,(function(t){return n.isRegExp(t[h])}));return(e=(e=(e=(e=e.concat(p(s))).concat(f(s))).concat(g(s))).concat(y(s))).concat(d(s))}(o))).concat(T(o))).concat(v(o,e))).concat(b(o))},t.findMissingPatterns=c,t.findInvalidPatterns=l;var u=/[^\\][\$]/;function p(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.found=!1,e}return s(e,t),e.prototype.visitEndAnchor=function(t){this.found=!0},e}(r.BaseRegExpVisitor),o=n.filter(t,(function(t){var s=t[h];try{var r=a.getRegExpAst(s),i=new e;return i.visit(r),i.found}catch(t){return u.test(s.source)}}));return n.map(o,(function(t){return{message:"Unexpected RegExp Anchor Error:\n\tToken Type: ->"+t.name+"<- static 'PATTERN' cannot contain end of input anchor '$'\n\tSee chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS\tfor details.",type:i.LexerDefinitionErrorType.EOI_ANCHOR_FOUND,tokenTypes:[t]}}))}function d(t){var e=n.filter(t,(function(t){return t[h].test("")}));return n.map(e,(function(t){return{message:"Token Type: ->"+t.name+"<- static 'PATTERN' must not match an empty string",type:i.LexerDefinitionErrorType.EMPTY_MATCH_PATTERN,tokenTypes:[t]}}))}t.findEndOfInputAnchor=p,t.findEmptyMatchRegExps=d;var m=/[^\\[][\^]|^\^/;function f(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.found=!1,e}return s(e,t),e.prototype.visitStartAnchor=function(t){this.found=!0},e}(r.BaseRegExpVisitor),o=n.filter(t,(function(t){var s=t[h];try{var r=a.getRegExpAst(s),i=new e;return i.visit(r),i.found}catch(t){return m.test(s.source)}}));return n.map(o,(function(t){return{message:"Unexpected RegExp Anchor Error:\n\tToken Type: ->"+t.name+"<- static 'PATTERN' cannot contain start of input anchor '^'\n\tSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS\tfor details.",type:i.LexerDefinitionErrorType.SOI_ANCHOR_FOUND,tokenTypes:[t]}}))}function g(t){var e=n.filter(t,(function(t){var e=t[h];return e instanceof RegExp&&(e.multiline||e.global)}));return n.map(e,(function(t){return{message:"Token Type: ->"+t.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:i.LexerDefinitionErrorType.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[t]}}))}function y(t){var e=[],s=n.map(t,(function(s){return n.reduce(t,(function(t,r){return s.PATTERN.source===r.PATTERN.source&&!n.contains(e,r)&&r.PATTERN!==i.Lexer.NA&&(e.push(r),t.push(r)),t}),[])}));s=n.compact(s);var r=n.filter(s,(function(t){return t.length>1}));return n.map(r,(function(t){var e=n.map(t,(function(t){return t.name}));return{message:"The same RegExp pattern ->"+n.first(t).PATTERN+"<-has been used in all of the following Token Types: "+e.join(", ")+" <-",type:i.LexerDefinitionErrorType.DUPLICATE_PATTERNS_FOUND,tokenTypes:t}}))}function T(t){var e=n.filter(t,(function(t){if(!n.has(t,"GROUP"))return!1;var e=t.GROUP;return e!==i.Lexer.SKIPPED&&e!==i.Lexer.NA&&!n.isString(e)}));return n.map(e,(function(t){return{message:"Token Type: ->"+t.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:i.LexerDefinitionErrorType.INVALID_GROUP_TYPE_FOUND,tokenTypes:[t]}}))}function v(t,e){var s=n.filter(t,(function(t){return void 0!==t.PUSH_MODE&&!n.contains(e,t.PUSH_MODE)}));return n.map(s,(function(t){return{message:"Token Type: ->"+t.name+"<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->"+t.PUSH_MODE+"<-which does not exist",type:i.LexerDefinitionErrorType.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[t]}}))}function b(t){var e=[],s=n.reduce(t,(function(t,e,s){var r=e.PATTERN;return r===i.Lexer.NA||(n.isString(r)?t.push({str:r,idx:s,tokenType:e}):n.isRegExp(r)&&function(t){var e=[".","\\","[","]","|","^","$","(",")","?","*","+","{"];return void 0===n.find(e,(function(e){return-1!==t.source.indexOf(e)}))}(r)&&t.push({str:r.source,idx:s,tokenType:e})),t}),[]);return n.forEach(t,(function(t,r){n.forEach(s,(function(s){var o=s.str,a=s.idx,h=s.tokenType;if(r<a&&function(t,e){if(n.isRegExp(e)){var s=e.exec(t);return null!==s&&0===s.index}if(n.isFunction(e))return e(t,0,[],{});if(n.has(e,"exec"))return e.exec(t,0,[],{});if("string"==typeof e)return e===t;throw Error("non exhaustive match")}(o,t.PATTERN)){var c="Token: ->"+h.name+"<- can never be matched.\nBecause it appears AFTER the Token Type ->"+t.name+"<-in the lexer's definition.\nSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE";e.push({message:c,type:i.LexerDefinitionErrorType.UNREACHABLE_PATTERN,tokenTypes:[t,h]})}}))})),e}function w(t){var e=t.ignoreCase?"i":"";return new RegExp("^(?:"+t.source+")",e)}function x(t){var e=t.ignoreCase?"iy":"y";return new RegExp(""+t.source,e)}function I(t){var e=t.PATTERN;if(n.isRegExp(e))return!1;if(n.isFunction(e))return!0;if(n.has(e,"exec"))return!0;if(n.isString(e))return!1;throw Error("non exhaustive match")}function E(t){return!(!n.isString(t)||1!==t.length)&&t.charCodeAt(0)}function S(t,e){if(n.has(t,"LINE_BREAKS"))return!1;if(n.isRegExp(t.PATTERN)){try{o.canMatchCharCode(e,t.PATTERN)}catch(t){return{issue:i.LexerDefinitionErrorType.IDENTIFY_TERMINATOR,errMsg:t.message}}return!1}if(n.isString(t.PATTERN))return!1;if(I(t))return{issue:i.LexerDefinitionErrorType.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}function A(t,e){if(e.issue===i.LexerDefinitionErrorType.IDENTIFY_TERMINATOR)return"Warning: unable to identify line terminator usage in pattern.\n\tThe problem is in the <"+t.name+"> Token Type\n\t Root cause: "+e.errMsg+".\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR";if(e.issue===i.LexerDefinitionErrorType.CUSTOM_LINE_BREAK)return"Warning: A Custom Token Pattern should specify the <line_breaks> option.\n\tThe problem is in the <"+t.name+"> Token Type\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK";throw Error("non exhaustive match")}function R(t){return n.map(t,(function(t){return n.isString(t)&&t.length>0?t.charCodeAt(0):t}))}function C(t,e,s){void 0===t[e]?t[e]=[s]:t[e].push(s)}t.findStartOfInputAnchor=f,t.findUnsupportedFlags=g,t.findDuplicatePatterns=y,t.findInvalidGroupType=T,t.findModesThatDoNotExist=v,t.findUnreachablePatterns=b,t.addStartOfInput=w,t.addStickyFlag=x,t.performRuntimeChecks=function(e,s,r){var o=[];return n.has(e,t.DEFAULT_MODE)||o.push({message:"A MultiMode Lexer cannot be initialized without a <"+t.DEFAULT_MODE+"> property in its definition\n",type:i.LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),n.has(e,t.MODES)||o.push({message:"A MultiMode Lexer cannot be initialized without a <"+t.MODES+"> property in its definition\n",type:i.LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),n.has(e,t.MODES)&&n.has(e,t.DEFAULT_MODE)&&!n.has(e.modes,e.defaultMode)&&o.push({message:"A MultiMode Lexer cannot be initialized with a "+t.DEFAULT_MODE+": <"+e.defaultMode+">which does not exist\n",type:i.LexerDefinitionErrorType.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),n.has(e,t.MODES)&&n.forEach(e.modes,(function(t,e){n.forEach(t,(function(t,s){n.isUndefined(t)&&o.push({message:"A Lexer cannot be initialized using an undefined Token Type. Mode:<"+e+"> at index: <"+s+">\n",type:i.LexerDefinitionErrorType.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED})}))})),o},t.performWarningRuntimeChecks=function(t,e,s){var r=[],a=!1,c=n.compact(n.flatten(n.mapValues(t.modes,(function(t){return t})))),l=n.reject(c,(function(t){return t[h]===i.Lexer.NA})),u=R(s);return e&&n.forEach(l,(function(t){var e=S(t,u);if(!1!==e){var s={message:A(t,e),type:e.issue,tokenType:t};r.push(s)}else n.has(t,"LINE_BREAKS")?!0===t.LINE_BREAKS&&(a=!0):o.canMatchCharCode(u,t.PATTERN)&&(a=!0)})),e&&!a&&r.push({message:"Warning: No LINE_BREAKS Found.\n\tThis Lexer has been defined to track line and column information,\n\tBut none of the Token Types can be identified as matching a line terminator.\n\tSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS\n\tfor details.",type:i.LexerDefinitionErrorType.NO_LINE_BREAKS_FLAGS}),r},t.cloneEmptyGroups=function(t){var e={},s=n.keys(t);return n.forEach(s,(function(s){var r=t[s];if(!n.isArray(r))throw Error("non exhaustive match");e[s]=[]})),e},t.isCustomPattern=I,t.isShortPattern=E,t.LineTerminatorOptimizedTester={test:function(t){for(var e=t.length,s=this.lastIndex;s<e;s++){var r=t.charCodeAt(s);if(10===r)return this.lastIndex=s+1,!0;if(13===r)return 10===t.charCodeAt(s+1)?this.lastIndex=s+2:this.lastIndex=s+1,!0}return!1},lastIndex:0},t.buildLineBreakIssueMessage=A,t.minOptimizationVal=256;var O=[];function _(e){return e<t.minOptimizationVal?e:O[e]}t.charCodeToOptimizedIndex=_})),zP=LP((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isTokenType=t.hasExtendingTokensTypesMapProperty=t.hasExtendingTokensTypesProperty=t.hasCategoriesProperty=t.hasShortKeyProperty=t.singleAssignCategoriesToksMap=t.assignCategoriesMapProp=t.assignCategoriesTokensProp=t.assignTokenDefaultProps=t.expandCategories=t.augmentTokenTypes=t.tokenIdxToClass=t.tokenShortNameIdx=t.tokenStructuredMatcherNoCategories=t.tokenStructuredMatcher=void 0;var e=UP();function s(t){for(var s=e.cloneArr(t),r=t,i=!0;i;){r=e.compact(e.flatten(e.map(r,(function(t){return t.CATEGORIES}))));var n=e.difference(r,s);s=s.concat(n),e.isEmpty(n)?i=!1:r=n}return s}function r(s){e.forEach(s,(function(s){a(s)||(t.tokenIdxToClass[t.tokenShortNameIdx]=s,s.tokenTypeIdx=t.tokenShortNameIdx++),h(s)&&!e.isArray(s.CATEGORIES)&&(s.CATEGORIES=[s.CATEGORIES]),h(s)||(s.CATEGORIES=[]),c(s)||(s.categoryMatches=[]),l(s)||(s.categoryMatchesMap={})}))}function i(s){e.forEach(s,(function(s){s.categoryMatches=[],e.forEach(s.categoryMatchesMap,(function(e,r){s.categoryMatches.push(t.tokenIdxToClass[r].tokenTypeIdx)}))}))}function n(t){e.forEach(t,(function(t){o([],t)}))}function o(t,s){e.forEach(t,(function(t){s.categoryMatchesMap[t.tokenTypeIdx]=!0})),e.forEach(s.CATEGORIES,(function(r){var i=t.concat(s);e.contains(i,r)||o(i,r)}))}function a(t){return e.has(t,"tokenTypeIdx")}function h(t){return e.has(t,"CATEGORIES")}function c(t){return e.has(t,"categoryMatches")}function l(t){return e.has(t,"categoryMatchesMap")}t.tokenStructuredMatcher=function(t,e){var s=t.tokenTypeIdx;return s===e.tokenTypeIdx||!0===e.isParent&&!0===e.categoryMatchesMap[s]},t.tokenStructuredMatcherNoCategories=function(t,e){return t.tokenTypeIdx===e.tokenTypeIdx},t.tokenShortNameIdx=1,t.tokenIdxToClass={},t.augmentTokenTypes=function(t){var o=s(t);r(o),n(o),i(o),e.forEach(o,(function(t){t.isParent=t.categoryMatches.length>0}))},t.expandCategories=s,t.assignTokenDefaultProps=r,t.assignCategoriesTokensProp=i,t.assignCategoriesMapProp=n,t.singleAssignCategoriesToksMap=o,t.hasShortKeyProperty=a,t.hasCategoriesProperty=h,t.hasExtendingTokensTypesProperty=c,t.hasExtendingTokensTypesMapProperty=l,t.isTokenType=function(t){return e.has(t,"tokenTypeIdx")}})),VP=LP((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultLexerErrorProvider=void 0,t.defaultLexerErrorProvider={buildUnableToPopLexerModeMessage:function(t){return"Unable to pop Lexer Mode after encountering Token ->"+t.image+"<- The Mode Stack is empty"},buildUnexpectedCharactersMessage:function(t,e,s,r,i){return"unexpected character: ->"+t.charAt(e)+"<- at offset: "+e+", skipped "+s+" characters."}}})),WP=LP((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Lexer=t.LexerDefinitionErrorType=void 0;var e,s=jP(),r=UP(),i=zP(),n=VP(),o=BP();(e=t.LexerDefinitionErrorType||(t.LexerDefinitionErrorType={}))[e.MISSING_PATTERN=0]="MISSING_PATTERN",e[e.INVALID_PATTERN=1]="INVALID_PATTERN",e[e.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",e[e.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",e[e.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",e[e.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",e[e.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",e[e.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",e[e.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",e[e.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",e[e.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",e[e.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",e[e.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",e[e.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",e[e.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",e[e.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",e[e.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK";var a={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:["\n","\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:n.defaultLexerErrorProvider,traceInitPerf:!1,skipValidations:!1};Object.freeze(a);var h=function(){function t(t,e){var n=this;if(void 0===e&&(e=a),this.lexerDefinition=t,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.config=void 0,this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},"boolean"==typeof e)throw Error("The second argument to the Lexer constructor is now an ILexerConfig Object.\na boolean 2nd argument is no longer supported");this.config=r.merge(a,e);var h=this.config.traceInitPerf;!0===h?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):"number"==typeof h&&(this.traceInitMaxIdent=h,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",(function(){var h,c=!0;n.TRACE_INIT("Lexer Config handling",(function(){if(n.config.lineTerminatorsPattern===a.lineTerminatorsPattern)n.config.lineTerminatorsPattern=s.LineTerminatorOptimizedTester;else if(n.config.lineTerminatorCharacters===a.lineTerminatorCharacters)throw Error("Error: Missing <lineTerminatorCharacters> property on the Lexer config.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS");if(e.safeMode&&e.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');n.trackStartLines=/full|onlyStart/i.test(n.config.positionTracking),n.trackEndLines=/full/i.test(n.config.positionTracking),r.isArray(t)?((h={modes:{}}).modes[s.DEFAULT_MODE]=r.cloneArr(t),h[s.DEFAULT_MODE]=s.DEFAULT_MODE):(c=!1,h=r.cloneObj(t))})),!1===n.config.skipValidations&&(n.TRACE_INIT("performRuntimeChecks",(function(){n.lexerDefinitionErrors=n.lexerDefinitionErrors.concat(s.performRuntimeChecks(h,n.trackStartLines,n.config.lineTerminatorCharacters))})),n.TRACE_INIT("performWarningRuntimeChecks",(function(){n.lexerDefinitionWarning=n.lexerDefinitionWarning.concat(s.performWarningRuntimeChecks(h,n.trackStartLines,n.config.lineTerminatorCharacters))}))),h.modes=h.modes?h.modes:{},r.forEach(h.modes,(function(t,e){h.modes[e]=r.reject(t,(function(t){return r.isUndefined(t)}))}));var l=r.keys(h.modes);if(r.forEach(h.modes,(function(t,o){n.TRACE_INIT("Mode: <"+o+"> processing",(function(){var a;(n.modes.push(o),!1===n.config.skipValidations&&n.TRACE_INIT("validatePatterns",(function(){n.lexerDefinitionErrors=n.lexerDefinitionErrors.concat(s.validatePatterns(t,l))})),r.isEmpty(n.lexerDefinitionErrors))&&(i.augmentTokenTypes(t),n.TRACE_INIT("analyzeTokenTypes",(function(){a=s.analyzeTokenTypes(t,{lineTerminatorCharacters:n.config.lineTerminatorCharacters,positionTracking:e.positionTracking,ensureOptimizations:e.ensureOptimizations,safeMode:e.safeMode,tracer:n.TRACE_INIT.bind(n)})})),n.patternIdxToConfig[o]=a.patternIdxToConfig,n.charCodeToPatternIdxToConfig[o]=a.charCodeToPatternIdxToConfig,n.emptyGroups=r.merge(n.emptyGroups,a.emptyGroups),n.hasCustom=a.hasCustom||n.hasCustom,n.canModeBeOptimized[o]=a.canBeOptimized)}))})),n.defaultMode=h.defaultMode,!r.isEmpty(n.lexerDefinitionErrors)&&!n.config.deferDefinitionErrorsHandling){var u=r.map(n.lexerDefinitionErrors,(function(t){return t.message})).join("-----------------------\n");throw new Error("Errors detected in definition of Lexer:\n"+u)}r.forEach(n.lexerDefinitionWarning,(function(t){r.PRINT_WARNING(t.message)})),n.TRACE_INIT("Choosing sub-methods implementations",(function(){if(s.SUPPORT_STICKY?(n.chopInput=r.IDENTITY,n.match=n.matchWithTest):(n.updateLastIndex=r.NOOP,n.match=n.matchWithExec),c&&(n.handleModes=r.NOOP),!1===n.trackStartLines&&(n.computeNewColumn=r.IDENTITY),!1===n.trackEndLines&&(n.updateTokenEndLineColumnLocation=r.NOOP),/full/i.test(n.config.positionTracking))n.createTokenInstance=n.createFullToken;else if(/onlyStart/i.test(n.config.positionTracking))n.createTokenInstance=n.createStartOnlyToken;else{if(!/onlyOffset/i.test(n.config.positionTracking))throw Error('Invalid <positionTracking> config option: "'+n.config.positionTracking+'"');n.createTokenInstance=n.createOffsetOnlyToken}n.hasCustom?(n.addToken=n.addTokenUsingPush,n.handlePayload=n.handlePayloadWithCustom):(n.addToken=n.addTokenUsingMemberAccess,n.handlePayload=n.handlePayloadNoCustom)})),n.TRACE_INIT("Failed Optimization Warnings",(function(){var t=r.reduce(n.canModeBeOptimized,(function(t,e,s){return!1===e&&t.push(s),t}),[]);if(e.ensureOptimizations&&!r.isEmpty(t))throw Error("Lexer Modes: < "+t.join(", ")+' > cannot be optimized.\n\t Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.\n\t Or inspect the console log for details on how to resolve these issues.')})),n.TRACE_INIT("clearRegExpParserCache",(function(){o.clearRegExpParserCache()})),n.TRACE_INIT("toFastProperties",(function(){r.toFastProperties(n)}))}))}return t.prototype.tokenize=function(t,e){if(void 0===e&&(e=this.defaultMode),!r.isEmpty(this.lexerDefinitionErrors)){var s=r.map(this.lexerDefinitionErrors,(function(t){return t.message})).join("-----------------------\n");throw new Error("Unable to Tokenize because Errors detected in definition of Lexer:\n"+s)}return this.tokenizeInternal(t,e)},t.prototype.tokenizeInternal=function(t,e){var i,n,o,a,h,c,l,u,p,d,m,f,g,y,T=this,v=t,b=v.length,w=0,x=0,I=this.hasCustom?0:Math.floor(t.length/10),E=new Array(I),S=[],A=this.trackStartLines?1:void 0,R=this.trackStartLines?1:void 0,C=s.cloneEmptyGroups(this.emptyGroups),O=this.trackStartLines,_=this.config.lineTerminatorsPattern,D=0,F=[],M=[],P=[],N=[];Object.freeze(N);var L=void 0;function k(){return F}function U(t){var e=s.charCodeToOptimizedIndex(t),r=M[e];return void 0===r?N:r}var H,B=function(t){if(1===P.length&&void 0===t.tokenType.PUSH_MODE){var e=T.config.errorMessageProvider.buildUnableToPopLexerModeMessage(t);S.push({offset:t.startOffset,line:void 0!==t.startLine?t.startLine:void 0,column:void 0!==t.startColumn?t.startColumn:void 0,length:t.image.length,message:e})}else{P.pop();var s=r.last(P);F=T.patternIdxToConfig[s],M=T.charCodeToPatternIdxToConfig[s],D=F.length;var i=T.canModeBeOptimized[s]&&!1===T.config.safeMode;L=M&&i?U:k}};function G(t){P.push(t),M=this.charCodeToPatternIdxToConfig[t],F=this.patternIdxToConfig[t],D=F.length,D=F.length;var e=this.canModeBeOptimized[t]&&!1===this.config.safeMode;L=M&&e?U:k}for(G.call(this,e);w<b;){h=null;var j=v.charCodeAt(w),z=L(j),V=z.length;for(i=0;i<V;i++){var W=(H=z[i]).pattern;if(c=null,!1!==(et=H.short)?j===et&&(h=W):!0===H.isCustom?null!==(y=W.exec(v,w,E,C))?(h=y[0],void 0!==y.payload&&(c=y.payload)):h=null:(this.updateLastIndex(W,w),h=this.match(W,t,w)),null!==h){if(void 0!==(a=H.longerAlt)){var Y=F[a],X=Y.pattern;l=null,!0===Y.isCustom?null!==(y=X.exec(v,w,E,C))?(o=y[0],void 0!==y.payload&&(l=y.payload)):o=null:(this.updateLastIndex(X,w),o=this.match(X,t,w)),o&&o.length>h.length&&(h=o,c=l,H=Y)}break}}if(null!==h){if(u=h.length,void 0!==(p=H.group)&&(d=H.tokenTypeIdx,m=this.createTokenInstance(h,w,d,H.tokenType,A,R,u),this.handlePayload(m,c),!1===p?x=this.addToken(E,x,m):C[p].push(m)),t=this.chopInput(t,u),w+=u,R=this.computeNewColumn(R,u),!0===O&&!0===H.canLineTerminator){var q=0,K=void 0,J=void 0;_.lastIndex=0;do{!0===(K=_.test(h))&&(J=_.lastIndex-1,q++)}while(!0===K);0!==q&&(A+=q,R=u-J,this.updateTokenEndLineColumnLocation(m,p,J,q,A,R,u))}this.handleModes(H,B,G,m)}else{for(var $=w,Z=A,Q=R,tt=!1;!tt&&w<b;)for(v.charCodeAt(w),t=this.chopInput(t,1),w++,n=0;n<D;n++){var et,st=F[n];W=st.pattern;if(!1!==(et=st.short)?v.charCodeAt(w)===et&&(tt=!0):!0===st.isCustom?tt=null!==W.exec(v,w,E,C):(this.updateLastIndex(W,w),tt=null!==W.exec(t)),!0===tt)break}f=w-$,g=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(v,$,f,Z,Q),S.push({offset:$,line:Z,column:Q,length:f,message:g})}}return this.hasCustom||(E.length=x),{tokens:E,groups:C,errors:S}},t.prototype.handleModes=function(t,e,s,r){if(!0===t.pop){var i=t.push;e(r),void 0!==i&&s.call(this,i)}else void 0!==t.push&&s.call(this,t.push)},t.prototype.chopInput=function(t,e){return t.substring(e)},t.prototype.updateLastIndex=function(t,e){t.lastIndex=e},t.prototype.updateTokenEndLineColumnLocation=function(t,e,s,r,i,n,o){var a,h;void 0!==e&&(h=(a=s===o-1)?-1:0,1===r&&!0===a||(t.endLine=i+h,t.endColumn=n-1-h))},t.prototype.computeNewColumn=function(t,e){return t+e},t.prototype.createTokenInstance=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return null},t.prototype.createOffsetOnlyToken=function(t,e,s,r){return{image:t,startOffset:e,tokenTypeIdx:s,tokenType:r}},t.prototype.createStartOnlyToken=function(t,e,s,r,i,n){return{image:t,startOffset:e,startLine:i,startColumn:n,tokenTypeIdx:s,tokenType:r}},t.prototype.createFullToken=function(t,e,s,r,i,n,o){return{image:t,startOffset:e,endOffset:e+o-1,startLine:i,endLine:i,startColumn:n,endColumn:n+o-1,tokenTypeIdx:s,tokenType:r}},t.prototype.addToken=function(t,e,s){return 666},t.prototype.addTokenUsingPush=function(t,e,s){return t.push(s),e},t.prototype.addTokenUsingMemberAccess=function(t,e,s){return t[e]=s,++e},t.prototype.handlePayload=function(t,e){},t.prototype.handlePayloadNoCustom=function(t,e){},t.prototype.handlePayloadWithCustom=function(t,e){null!==e&&(t.payload=e)},t.prototype.match=function(t,e,s){return null},t.prototype.matchWithTest=function(t,e,s){return!0===t.test(e)?e.substring(s,t.lastIndex):null},t.prototype.matchWithExec=function(t,e){var s=t.exec(e);return null!==s?s[0]:s},t.prototype.TRACE_INIT=function(t,e){if(!0===this.traceInitPerf){this.traceInitIndent++;var s=new Array(this.traceInitIndent+1).join("\t");this.traceInitIndent<this.traceInitMaxIdent&&console.log(s+"--\x3e <"+t+">");var i=r.timer(e),n=i.time,o=i.value,a=n>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&a(s+"<-- <"+t+"> time: "+n+"ms"),this.traceInitIndent--,o}return e()},t.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.",t.NA=/NOT_APPLICABLE/,t}();t.Lexer=h})),YP=LP((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.tokenMatcher=t.createTokenInstance=t.EOF=t.createToken=t.hasTokenLabel=t.tokenName=t.tokenLabel=void 0;var e=UP(),s=WP(),r=zP();function i(t){return e.isString(t.LABEL)&&""!==t.LABEL}t.tokenLabel=function(t){return i(t)?t.LABEL:t.name},t.tokenName=function(t){return t.name},t.hasTokenLabel=i;var n="parent",o="categories",a="label",h="group",c="push_mode",l="pop_mode",u="longer_alt",p="line_breaks",d="start_chars_hint";function m(t){return function(t){var s=t.pattern,i={};if(i.name=t.name,e.isUndefined(s)||(i.PATTERN=s),e.has(t,n))throw"The parent property is no longer supported.\nSee: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.";return e.has(t,o)&&(i.CATEGORIES=t[o]),r.augmentTokenTypes([i]),e.has(t,a)&&(i.LABEL=t[a]),e.has(t,h)&&(i.GROUP=t[h]),e.has(t,l)&&(i.POP_MODE=t[l]),e.has(t,c)&&(i.PUSH_MODE=t[c]),e.has(t,u)&&(i.LONGER_ALT=t[u]),e.has(t,p)&&(i.LINE_BREAKS=t[p]),e.has(t,d)&&(i.START_CHARS_HINT=t[d]),i}(t)}t.createToken=m,t.EOF=m({name:"EOF",pattern:s.Lexer.NA}),r.augmentTokenTypes([t.EOF]),t.createTokenInstance=function(t,e,s,r,i,n,o,a){return{image:e,startOffset:s,endOffset:r,startLine:i,endLine:n,startColumn:o,endColumn:a,tokenTypeIdx:t.tokenTypeIdx,tokenType:t}},t.tokenMatcher=function(t,e){return r.tokenStructuredMatcher(t,e)}})),XP=LP((t=>{var e,s=t&&t.__extends||(e=function(t,s){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])})(t,s)},function(t,s){if("function"!=typeof s&&null!==s)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function r(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(r.prototype=s.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.serializeProduction=t.serializeGrammar=t.Terminal=t.Alternation=t.RepetitionWithSeparator=t.Repetition=t.RepetitionMandatoryWithSeparator=t.RepetitionMandatory=t.Option=t.Alternative=t.Rule=t.NonTerminal=t.AbstractProduction=void 0;var r=UP(),i=YP(),n=function(){function t(t){this._definition=t}return Object.defineProperty(t.prototype,"definition",{get:function(){return this._definition},set:function(t){this._definition=t},enumerable:!1,configurable:!0}),t.prototype.accept=function(t){t.visit(this),r.forEach(this.definition,(function(e){e.accept(t)}))},t}();t.AbstractProduction=n;var o=function(t){function e(e){var s=t.call(this,[])||this;return s.idx=1,r.assign(s,r.pick(e,(function(t){return void 0!==t}))),s}return s(e,t),Object.defineProperty(e.prototype,"definition",{get:function(){return void 0!==this.referencedRule?this.referencedRule.definition:[]},set:function(t){},enumerable:!1,configurable:!0}),e.prototype.accept=function(t){t.visit(this)},e}(n);t.NonTerminal=o;var a=function(t){function e(e){var s=t.call(this,e.definition)||this;return s.orgText="",r.assign(s,r.pick(e,(function(t){return void 0!==t}))),s}return s(e,t),e}(n);t.Rule=a;var h=function(t){function e(e){var s=t.call(this,e.definition)||this;return s.ignoreAmbiguities=!1,r.assign(s,r.pick(e,(function(t){return void 0!==t}))),s}return s(e,t),e}(n);t.Alternative=h;var c=function(t){function e(e){var s=t.call(this,e.definition)||this;return s.idx=1,r.assign(s,r.pick(e,(function(t){return void 0!==t}))),s}return s(e,t),e}(n);t.Option=c;var l=function(t){function e(e){var s=t.call(this,e.definition)||this;return s.idx=1,r.assign(s,r.pick(e,(function(t){return void 0!==t}))),s}return s(e,t),e}(n);t.RepetitionMandatory=l;var u=function(t){function e(e){var s=t.call(this,e.definition)||this;return s.idx=1,r.assign(s,r.pick(e,(function(t){return void 0!==t}))),s}return s(e,t),e}(n);t.RepetitionMandatoryWithSeparator=u;var p=function(t){function e(e){var s=t.call(this,e.definition)||this;return s.idx=1,r.assign(s,r.pick(e,(function(t){return void 0!==t}))),s}return s(e,t),e}(n);t.Repetition=p;var d=function(t){function e(e){var s=t.call(this,e.definition)||this;return s.idx=1,r.assign(s,r.pick(e,(function(t){return void 0!==t}))),s}return s(e,t),e}(n);t.RepetitionWithSeparator=d;var m=function(t){function e(e){var s=t.call(this,e.definition)||this;return s.idx=1,s.ignoreAmbiguities=!1,s.hasPredicates=!1,r.assign(s,r.pick(e,(function(t){return void 0!==t}))),s}return s(e,t),Object.defineProperty(e.prototype,"definition",{get:function(){return this._definition},set:function(t){this._definition=t},enumerable:!1,configurable:!0}),e}(n);t.Alternation=m;var f=function(){function t(t){this.idx=1,r.assign(this,r.pick(t,(function(t){return void 0!==t})))}return t.prototype.accept=function(t){t.visit(this)},t}();function g(t){function e(t){return r.map(t,g)}if(t instanceof o)return{type:"NonTerminal",name:t.nonTerminalName,idx:t.idx};if(t instanceof h)return{type:"Alternative",definition:e(t.definition)};if(t instanceof c)return{type:"Option",idx:t.idx,definition:e(t.definition)};if(t instanceof l)return{type:"RepetitionMandatory",idx:t.idx,definition:e(t.definition)};if(t instanceof u)return{type:"RepetitionMandatoryWithSeparator",idx:t.idx,separator:g(new f({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof d)return{type:"RepetitionWithSeparator",idx:t.idx,separator:g(new f({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof p)return{type:"Repetition",idx:t.idx,definition:e(t.definition)};if(t instanceof m)return{type:"Alternation",idx:t.idx,definition:e(t.definition)};if(t instanceof f){var s={type:"Terminal",name:t.terminalType.name,label:i.tokenLabel(t.terminalType),idx:t.idx},n=t.terminalType.PATTERN;return t.terminalType.PATTERN&&(s.pattern=r.isRegExp(n)?n.source:n),s}if(t instanceof a)return{type:"Rule",name:t.name,orgText:t.orgText,definition:e(t.definition)};throw Error("non exhaustive match")}t.Terminal=f,t.serializeGrammar=function(t){return r.map(t,g)},t.serializeProduction=g})),qP=LP((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RestWalker=void 0;var e=UP(),s=XP(),r=function(){function t(){}return t.prototype.walk=function(t,r){var i=this;void 0===r&&(r=[]),e.forEach(t.definition,(function(n,o){var a=e.drop(t.definition,o+1);if(n instanceof s.NonTerminal)i.walkProdRef(n,a,r);else if(n instanceof s.Terminal)i.walkTerminal(n,a,r);else if(n instanceof s.Alternative)i.walkFlat(n,a,r);else if(n instanceof s.Option)i.walkOption(n,a,r);else if(n instanceof s.RepetitionMandatory)i.walkAtLeastOne(n,a,r);else if(n instanceof s.RepetitionMandatoryWithSeparator)i.walkAtLeastOneSep(n,a,r);else if(n instanceof s.RepetitionWithSeparator)i.walkManySep(n,a,r);else if(n instanceof s.Repetition)i.walkMany(n,a,r);else{if(!(n instanceof s.Alternation))throw Error("non exhaustive match");i.walkOr(n,a,r)}}))},t.prototype.walkTerminal=function(t,e,s){},t.prototype.walkProdRef=function(t,e,s){},t.prototype.walkFlat=function(t,e,s){var r=e.concat(s);this.walk(t,r)},t.prototype.walkOption=function(t,e,s){var r=e.concat(s);this.walk(t,r)},t.prototype.walkAtLeastOne=function(t,e,r){var i=[new s.Option({definition:t.definition})].concat(e,r);this.walk(t,i)},t.prototype.walkAtLeastOneSep=function(t,e,s){var r=i(t,e,s);this.walk(t,r)},t.prototype.walkMany=function(t,e,r){var i=[new s.Option({definition:t.definition})].concat(e,r);this.walk(t,i)},t.prototype.walkManySep=function(t,e,s){var r=i(t,e,s);this.walk(t,r)},t.prototype.walkOr=function(t,r,i){var n=this,o=r.concat(i);e.forEach(t.definition,(function(t){var e=new s.Alternative({definition:[t]});n.walk(e,o)}))},t}();function i(t,e,r){return[new s.Option({definition:[new s.Terminal({terminalType:t.separator})].concat(t.definition)})].concat(e,r)}t.RestWalker=r})),KP=LP((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GAstVisitor=void 0;var e=XP(),s=function(){function t(){}return t.prototype.visit=function(t){var s=t;switch(s.constructor){case e.NonTerminal:return this.visitNonTerminal(s);case e.Alternative:return this.visitAlternative(s);case e.Option:return this.visitOption(s);case e.RepetitionMandatory:return this.visitRepetitionMandatory(s);case e.RepetitionMandatoryWithSeparator:return this.visitRepetitionMandatoryWithSeparator(s);case e.RepetitionWithSeparator:return this.visitRepetitionWithSeparator(s);case e.Repetition:return this.visitRepetition(s);case e.Alternation:return this.visitAlternation(s);case e.Terminal:return this.visitTerminal(s);case e.Rule:return this.visitRule(s);default:throw Error("non exhaustive match")}},t.prototype.visitNonTerminal=function(t){},t.prototype.visitAlternative=function(t){},t.prototype.visitOption=function(t){},t.prototype.visitRepetition=function(t){},t.prototype.visitRepetitionMandatory=function(t){},t.prototype.visitRepetitionMandatoryWithSeparator=function(t){},t.prototype.visitRepetitionWithSeparator=function(t){},t.prototype.visitAlternation=function(t){},t.prototype.visitTerminal=function(t){},t.prototype.visitRule=function(t){},t}();t.GAstVisitor=s})),JP=LP((t=>{var e,s=t&&t.__extends||(e=function(t,s){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])})(t,s)},function(t,s){if("function"!=typeof s&&null!==s)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function r(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(r.prototype=s.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.collectMethods=t.DslMethodsCollectorVisitor=t.getProductionDslName=t.isBranchingProd=t.isOptionalProd=t.isSequenceProd=void 0;var r=UP(),i=XP(),n=KP();t.isSequenceProd=function(t){return t instanceof i.Alternative||t instanceof i.Option||t instanceof i.Repetition||t instanceof i.RepetitionMandatory||t instanceof i.RepetitionMandatoryWithSeparator||t instanceof i.RepetitionWithSeparator||t instanceof i.Terminal||t instanceof i.Rule},t.isOptionalProd=function t(e,s){return void 0===s&&(s=[]),!!(e instanceof i.Option||e instanceof i.Repetition||e instanceof i.RepetitionWithSeparator)||(e instanceof i.Alternation?r.some(e.definition,(function(e){return t(e,s)})):!(e instanceof i.NonTerminal&&r.contains(s,e))&&(e instanceof i.AbstractProduction&&(e instanceof i.NonTerminal&&s.push(e),r.every(e.definition,(function(e){return t(e,s)})))))},t.isBranchingProd=function(t){return t instanceof i.Alternation},t.getProductionDslName=function(t){if(t instanceof i.NonTerminal)return"SUBRULE";if(t instanceof i.Option)return"OPTION";if(t instanceof i.Alternation)return"OR";if(t instanceof i.RepetitionMandatory)return"AT_LEAST_ONE";if(t instanceof i.RepetitionMandatoryWithSeparator)return"AT_LEAST_ONE_SEP";if(t instanceof i.RepetitionWithSeparator)return"MANY_SEP";if(t instanceof i.Repetition)return"MANY";if(t instanceof i.Terminal)return"CONSUME";throw Error("non exhaustive match")};var o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.separator="-",e.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]},e}return s(e,t),e.prototype.reset=function(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}},e.prototype.visitTerminal=function(t){var e=t.terminalType.name+this.separator+"Terminal";r.has(this.dslMethods,e)||(this.dslMethods[e]=[]),this.dslMethods[e].push(t)},e.prototype.visitNonTerminal=function(t){var e=t.nonTerminalName+this.separator+"Terminal";r.has(this.dslMethods,e)||(this.dslMethods[e]=[]),this.dslMethods[e].push(t)},e.prototype.visitOption=function(t){this.dslMethods.option.push(t)},e.prototype.visitRepetitionWithSeparator=function(t){this.dslMethods.repetitionWithSeparator.push(t)},e.prototype.visitRepetitionMandatory=function(t){this.dslMethods.repetitionMandatory.push(t)},e.prototype.visitRepetitionMandatoryWithSeparator=function(t){this.dslMethods.repetitionMandatoryWithSeparator.push(t)},e.prototype.visitRepetition=function(t){this.dslMethods.repetition.push(t)},e.prototype.visitAlternation=function(t){this.dslMethods.alternation.push(t)},e}(n.GAstVisitor);t.DslMethodsCollectorVisitor=o;var a=new o;t.collectMethods=function(t){a.reset(),t.accept(a);var e=a.dslMethods;return a.reset(),e}})),$P=LP((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.firstForTerminal=t.firstForBranching=t.firstForSequence=t.first=void 0;var e=UP(),s=XP(),r=JP();function i(t){if(t instanceof s.NonTerminal)return i(t.referencedRule);if(t instanceof s.Terminal)return a(t);if(r.isSequenceProd(t))return n(t);if(r.isBranchingProd(t))return o(t);throw Error("non exhaustive match")}function n(t){for(var s,n=[],o=t.definition,a=0,h=o.length>a,c=!0;h&&c;)s=o[a],c=r.isOptionalProd(s),n=n.concat(i(s)),a+=1,h=o.length>a;return e.uniq(n)}function o(t){var s=e.map(t.definition,(function(t){return i(t)}));return e.uniq(e.flatten(s))}function a(t){return[t.terminalType]}t.first=i,t.firstForSequence=n,t.firstForBranching=o,t.firstForTerminal=a})),ZP=LP((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IN=void 0,t.IN="_~IN~_"})),QP=LP((t=>{var e,s=t&&t.__extends||(e=function(t,s){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])})(t,s)},function(t,s){if("function"!=typeof s&&null!==s)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function r(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(r.prototype=s.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.buildInProdFollowPrefix=t.buildBetweenProdsFollowPrefix=t.computeAllProdsFollows=t.ResyncFollowsWalker=void 0;var r=qP(),i=$P(),n=UP(),o=ZP(),a=XP(),h=function(t){function e(e){var s=t.call(this)||this;return s.topProd=e,s.follows={},s}return s(e,t),e.prototype.startWalking=function(){return this.walk(this.topProd),this.follows},e.prototype.walkTerminal=function(t,e,s){},e.prototype.walkProdRef=function(t,e,s){var r=c(t.referencedRule,t.idx)+this.topProd.name,n=e.concat(s),o=new a.Alternative({definition:n}),h=i.first(o);this.follows[r]=h},e}(r.RestWalker);function c(t,e){return t.name+e+o.IN}t.ResyncFollowsWalker=h,t.computeAllProdsFollows=function(t){var e={};return n.forEach(t,(function(t){var s=new h(t).startWalking();n.assign(e,s)})),e},t.buildBetweenProdsFollowPrefix=c,t.buildInProdFollowPrefix=function(t){return t.terminalType.name+t.idx+o.IN}})),tN=LP((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultGrammarValidatorErrorProvider=t.defaultGrammarResolverErrorProvider=t.defaultParserErrorProvider=void 0;var e=YP(),s=UP(),r=UP(),i=XP(),n=JP();t.defaultParserErrorProvider={buildMismatchTokenMessage:function(t){var s=t.expected,r=t.actual;t.previous,t.ruleName;return"Expecting "+(e.hasTokenLabel(s)?"--\x3e "+e.tokenLabel(s)+" <--":"token of type --\x3e "+s.name+" <--")+" but found --\x3e '"+r.image+"' <--"},buildNotAllInputParsedMessage:function(t){var e=t.firstRedundant;t.ruleName;return"Redundant input, expecting EOF but found: "+e.image},buildNoViableAltMessage:function(t){var s=t.expectedPathsPerAlt,i=t.actual,n=(t.previous,t.customUserDescription),o=(t.ruleName,"Expecting: "),a="\nbut found: '"+r.first(i).image+"'";if(n)return o+n+a;var h=r.reduce(s,(function(t,e){return t.concat(e)}),[]),c=r.map(h,(function(t){return"["+r.map(t,(function(t){return e.tokenLabel(t)})).join(", ")+"]"}));return o+("one of these possible Token sequences:\n"+r.map(c,(function(t,e){return"  "+(e+1)+". "+t})).join("\n"))+a},buildEarlyExitMessage:function(t){var s=t.expectedIterationPaths,i=t.actual,n=t.customUserDescription,o=(t.ruleName,"Expecting: "),a="\nbut found: '"+r.first(i).image+"'";return n?o+n+a:o+("expecting at least one iteration which starts with one of these possible Token sequences::\n  <"+r.map(s,(function(t){return"["+r.map(t,(function(t){return e.tokenLabel(t)})).join(",")+"]"})).join(" ,")+">")+a}},Object.freeze(t.defaultParserErrorProvider),t.defaultGrammarResolverErrorProvider={buildRuleNotFoundError:function(t,e){return"Invalid grammar, reference to a rule which is not defined: ->"+e.nonTerminalName+"<-\ninside top level rule: ->"+t.name+"<-"}},t.defaultGrammarValidatorErrorProvider={buildDuplicateFoundError:function(t,e){var s,o=t.name,a=r.first(e),h=a.idx,c=n.getProductionDslName(a),l=(s=a)instanceof i.Terminal?s.terminalType.name:s instanceof i.NonTerminal?s.nonTerminalName:"",u="->"+c+(h>0?h:"")+"<- "+(l?"with argument: ->"+l+"<-":"")+"\n                  appears more than once ("+e.length+" times) in the top level rule: ->"+o+"<-.\n                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES\n                  ";return u=(u=u.replace(/[ \t]+/g," ")).replace(/\s\s+/g,"\n")},buildNamespaceConflictError:function(t){return"Namespace conflict found in grammar.\nThe grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <"+t.name+">.\nTo resolve this make sure each Terminal and Non-Terminal names are unique\nThis is easy to accomplish by using the convention that Terminal names start with an uppercase letter\nand Non-Terminal names start with a lower case letter."},buildAlternationPrefixAmbiguityError:function(t){var s=r.map(t.prefixPath,(function(t){return e.tokenLabel(t)})).join(", "),i=0===t.alternation.idx?"":t.alternation.idx;return"Ambiguous alternatives: <"+t.ambiguityIndices.join(" ,")+"> due to common lookahead prefix\nin <OR"+i+"> inside <"+t.topLevelRule.name+"> Rule,\n<"+s+"> may appears as a prefix path in all these alternatives.\nSee: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX\nFor Further details."},buildAlternationAmbiguityError:function(t){var s=r.map(t.prefixPath,(function(t){return e.tokenLabel(t)})).join(", "),i=0===t.alternation.idx?"":t.alternation.idx,n="Ambiguous Alternatives Detected: <"+t.ambiguityIndices.join(" ,")+"> in <OR"+i+"> inside <"+t.topLevelRule.name+"> Rule,\n<"+s+"> may appears as a prefix path in all these alternatives.\n";return n+="See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES\nFor Further details."},buildEmptyRepetitionError:function(t){var e=n.getProductionDslName(t.repetition);return 0!==t.repetition.idx&&(e+=t.repetition.idx),"The repetition <"+e+"> within Rule <"+t.topLevelRule.name+"> can never consume any tokens.\nThis could lead to an infinite loop."},buildTokenNameError:function(t){return"deprecated"},buildEmptyAlternationError:function(t){return"Ambiguous empty alternative: <"+(t.emptyChoiceIdx+1)+"> in <OR"+t.alternation.idx+"> inside <"+t.topLevelRule.name+"> Rule.\nOnly the last alternative may be an empty alternative."},buildTooManyAlternativesError:function(t){return"An Alternation cannot have more than 256 alternatives:\n<OR"+t.alternation.idx+"> inside <"+t.topLevelRule.name+"> Rule.\n has "+(t.alternation.definition.length+1)+" alternatives."},buildLeftRecursionError:function(t){var e=t.topLevelRule.name;return"Left Recursion found in grammar.\nrule: <"+e+"> can be invoked from itself (directly or indirectly)\nwithout consuming any Tokens. The grammar path that causes this is:\n "+(e+" --\x3e "+s.map(t.leftRecursionPath,(function(t){return t.name})).concat([e]).join(" --\x3e "))+"\n To fix this refactor your grammar to remove the left recursion.\nsee: https://en.wikipedia.org/wiki/LL_parser#Left_Factoring."},buildInvalidRuleNameError:function(t){return"deprecated"},buildDuplicateRuleNameError:function(t){return"Duplicate definition, rule: ->"+(t.topLevelRule instanceof i.Rule?t.topLevelRule.name:t.topLevelRule)+"<- is already defined in the grammar: ->"+t.grammarName+"<-"}}})),eN=LP((t=>{var e,s=t&&t.__extends||(e=function(t,s){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])})(t,s)},function(t,s){if("function"!=typeof s&&null!==s)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function r(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(r.prototype=s.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.GastRefResolverVisitor=t.resolveGrammar=void 0;var r=xN(),i=UP(),n=KP();t.resolveGrammar=function(t,e){var s=new o(t,e);return s.resolveRefs(),s.errors};var o=function(t){function e(e,s){var r=t.call(this)||this;return r.nameToTopRule=e,r.errMsgProvider=s,r.errors=[],r}return s(e,t),e.prototype.resolveRefs=function(){var t=this;i.forEach(i.values(this.nameToTopRule),(function(e){t.currTopLevel=e,e.accept(t)}))},e.prototype.visitNonTerminal=function(t){var e=this.nameToTopRule[t.nonTerminalName];if(e)t.referencedRule=e;else{var s=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,t);this.errors.push({message:s,type:r.ParserDefinitionErrorType.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:t.nonTerminalName})}},e}(n.GAstVisitor);t.GastRefResolverVisitor=o})),sN=LP((t=>{var e,s=t&&t.__extends||(e=function(t,s){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])})(t,s)},function(t,s){if("function"!=typeof s&&null!==s)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function r(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(r.prototype=s.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.nextPossibleTokensAfter=t.possiblePathsFrom=t.NextTerminalAfterAtLeastOneSepWalker=t.NextTerminalAfterAtLeastOneWalker=t.NextTerminalAfterManySepWalker=t.NextTerminalAfterManyWalker=t.AbstractNextTerminalAfterProductionWalker=t.NextAfterTokenWalker=t.AbstractNextPossibleTokensWalker=void 0;var r=qP(),i=UP(),n=$P(),o=XP(),a=function(t){function e(e,s){var r=t.call(this)||this;return r.topProd=e,r.path=s,r.possibleTokTypes=[],r.nextProductionName="",r.nextProductionOccurrence=0,r.found=!1,r.isAtEndOfPath=!1,r}return s(e,t),e.prototype.startWalking=function(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=i.cloneArr(this.path.ruleStack).reverse(),this.occurrenceStack=i.cloneArr(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes},e.prototype.walk=function(e,s){void 0===s&&(s=[]),this.found||t.prototype.walk.call(this,e,s)},e.prototype.walkProdRef=function(t,e,s){if(t.referencedRule.name===this.nextProductionName&&t.idx===this.nextProductionOccurrence){var r=e.concat(s);this.updateExpectedNext(),this.walk(t.referencedRule,r)}},e.prototype.updateExpectedNext=function(){i.isEmpty(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())},e}(r.RestWalker);t.AbstractNextPossibleTokensWalker=a;var h=function(t){function e(e,s){var r=t.call(this,e,s)||this;return r.path=s,r.nextTerminalName="",r.nextTerminalOccurrence=0,r.nextTerminalName=r.path.lastTok.name,r.nextTerminalOccurrence=r.path.lastTokOccurrence,r}return s(e,t),e.prototype.walkTerminal=function(t,e,s){if(this.isAtEndOfPath&&t.terminalType.name===this.nextTerminalName&&t.idx===this.nextTerminalOccurrence&&!this.found){var r=e.concat(s),i=new o.Alternative({definition:r});this.possibleTokTypes=n.first(i),this.found=!0}},e}(a);t.NextAfterTokenWalker=h;var c=function(t){function e(e,s){var r=t.call(this)||this;return r.topRule=e,r.occurrence=s,r.result={token:void 0,occurrence:void 0,isEndOfRule:void 0},r}return s(e,t),e.prototype.startWalking=function(){return this.walk(this.topRule),this.result},e}(r.RestWalker);t.AbstractNextTerminalAfterProductionWalker=c;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.walkMany=function(e,s,r){if(e.idx===this.occurrence){var n=i.first(s.concat(r));this.result.isEndOfRule=void 0===n,n instanceof o.Terminal&&(this.result.token=n.terminalType,this.result.occurrence=n.idx)}else t.prototype.walkMany.call(this,e,s,r)},e}(c);t.NextTerminalAfterManyWalker=l;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.walkManySep=function(e,s,r){if(e.idx===this.occurrence){var n=i.first(s.concat(r));this.result.isEndOfRule=void 0===n,n instanceof o.Terminal&&(this.result.token=n.terminalType,this.result.occurrence=n.idx)}else t.prototype.walkManySep.call(this,e,s,r)},e}(c);t.NextTerminalAfterManySepWalker=u;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.walkAtLeastOne=function(e,s,r){if(e.idx===this.occurrence){var n=i.first(s.concat(r));this.result.isEndOfRule=void 0===n,n instanceof o.Terminal&&(this.result.token=n.terminalType,this.result.occurrence=n.idx)}else t.prototype.walkAtLeastOne.call(this,e,s,r)},e}(c);t.NextTerminalAfterAtLeastOneWalker=p;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.walkAtLeastOneSep=function(e,s,r){if(e.idx===this.occurrence){var n=i.first(s.concat(r));this.result.isEndOfRule=void 0===n,n instanceof o.Terminal&&(this.result.token=n.terminalType,this.result.occurrence=n.idx)}else t.prototype.walkAtLeastOneSep.call(this,e,s,r)},e}(c);function m(t,e,s,r){var n=i.cloneArr(s);n.push(t.name);var o=i.cloneArr(r);return o.push(1),{idx:e,def:t.definition,ruleStack:n,occurrenceStack:o}}t.NextTerminalAfterAtLeastOneSepWalker=d,t.possiblePathsFrom=function t(e,s,r){void 0===r&&(r=[]),r=i.cloneArr(r);var n=[],a=0;function h(o){var h=t(function(t){return t.concat(i.drop(e,a+1))}(o),s,r);return n.concat(h)}for(;r.length<s&&a<e.length;){var c=e[a];if(c instanceof o.Alternative)return h(c.definition);if(c instanceof o.NonTerminal)return h(c.definition);if(c instanceof o.Option)n=h(c.definition);else{if(c instanceof o.RepetitionMandatory)return h(l=c.definition.concat([new o.Repetition({definition:c.definition})]));if(c instanceof o.RepetitionMandatoryWithSeparator)return h(l=[new o.Alternative({definition:c.definition}),new o.Repetition({definition:[new o.Terminal({terminalType:c.separator})].concat(c.definition)})]);if(c instanceof o.RepetitionWithSeparator){var l=c.definition.concat([new o.Repetition({definition:[new o.Terminal({terminalType:c.separator})].concat(c.definition)})]);n=h(l)}else if(c instanceof o.Repetition){l=c.definition.concat([new o.Repetition({definition:c.definition})]);n=h(l)}else{if(c instanceof o.Alternation)return i.forEach(c.definition,(function(t){!1===i.isEmpty(t.definition)&&(n=h(t.definition))})),n;if(!(c instanceof o.Terminal))throw Error("non exhaustive match");r.push(c.terminalType)}}a++}return n.push({partialPath:r,suffixDef:i.drop(e,a)}),n},t.nextPossibleTokensAfter=function(t,e,s,r){var n="EXIT_NONE_TERMINAL",a=[n],h="EXIT_ALTERNATIVE",c=!1,l=e.length,u=l-r-1,p=[],d=[];for(d.push({idx:-1,def:t,ruleStack:[],occurrenceStack:[]});!i.isEmpty(d);){var f=d.pop();if(f!==h){var g=f.def,y=f.idx,T=f.ruleStack,v=f.occurrenceStack;if(!i.isEmpty(g)){var b=g[0];if(b===n){var w={idx:y,def:i.drop(g),ruleStack:i.dropRight(T),occurrenceStack:i.dropRight(v)};d.push(w)}else if(b instanceof o.Terminal)if(y<l-1){var x=y+1;if(s(e[x],b.terminalType)){w={idx:x,def:i.drop(g),ruleStack:T,occurrenceStack:v};d.push(w)}}else{if(y!==l-1)throw Error("non exhaustive match");p.push({nextTokenType:b.terminalType,nextTokenOccurrence:b.idx,ruleStack:T,occurrenceStack:v}),c=!0}else if(b instanceof o.NonTerminal){var I=i.cloneArr(T);I.push(b.nonTerminalName);var E=i.cloneArr(v);E.push(b.idx);w={idx:y,def:b.definition.concat(a,i.drop(g)),ruleStack:I,occurrenceStack:E};d.push(w)}else if(b instanceof o.Option){var S={idx:y,def:i.drop(g),ruleStack:T,occurrenceStack:v};d.push(S),d.push(h);var A={idx:y,def:b.definition.concat(i.drop(g)),ruleStack:T,occurrenceStack:v};d.push(A)}else if(b instanceof o.RepetitionMandatory){var R=new o.Repetition({definition:b.definition,idx:b.idx});w={idx:y,def:b.definition.concat([R],i.drop(g)),ruleStack:T,occurrenceStack:v};d.push(w)}else if(b instanceof o.RepetitionMandatoryWithSeparator){var C=new o.Terminal({terminalType:b.separator});R=new o.Repetition({definition:[C].concat(b.definition),idx:b.idx}),w={idx:y,def:b.definition.concat([R],i.drop(g)),ruleStack:T,occurrenceStack:v};d.push(w)}else if(b instanceof o.RepetitionWithSeparator){S={idx:y,def:i.drop(g),ruleStack:T,occurrenceStack:v};d.push(S),d.push(h);C=new o.Terminal({terminalType:b.separator});var O=new o.Repetition({definition:[C].concat(b.definition),idx:b.idx});A={idx:y,def:b.definition.concat([O],i.drop(g)),ruleStack:T,occurrenceStack:v};d.push(A)}else if(b instanceof o.Repetition){S={idx:y,def:i.drop(g),ruleStack:T,occurrenceStack:v};d.push(S),d.push(h);O=new o.Repetition({definition:b.definition,idx:b.idx}),A={idx:y,def:b.definition.concat([O],i.drop(g)),ruleStack:T,occurrenceStack:v};d.push(A)}else if(b instanceof o.Alternation)for(var _=b.definition.length-1;_>=0;_--){var D={idx:y,def:b.definition[_].definition.concat(i.drop(g)),ruleStack:T,occurrenceStack:v};d.push(D),d.push(h)}else if(b instanceof o.Alternative)d.push({idx:y,def:b.definition.concat(i.drop(g)),ruleStack:T,occurrenceStack:v});else{if(!(b instanceof o.Rule))throw Error("non exhaustive match");d.push(m(b,y,T,v))}}}else c&&i.last(d).idx<=u&&d.pop()}return p}})),rN=LP((t=>{var e,s=t&&t.__extends||(e=function(t,s){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])})(t,s)},function(t,s){if("function"!=typeof s&&null!==s)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function r(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(r.prototype=s.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.areTokenCategoriesNotUsed=t.isStrictPrefixOfPath=t.containsPath=t.getLookaheadPathsForOptionalProd=t.getLookaheadPathsForOr=t.lookAheadSequenceFromAlternatives=t.buildSingleAlternativeLookaheadFunction=t.buildAlternativesLookAheadFunc=t.buildLookaheadFuncForOptionalProd=t.buildLookaheadFuncForOr=t.getProdType=t.PROD_TYPE=void 0;var r,i=UP(),n=sN(),o=qP(),a=zP(),h=XP(),c=KP();!function(t){t[t.OPTION=0]="OPTION",t[t.REPETITION=1]="REPETITION",t[t.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",t[t.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",t[t.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",t[t.ALTERNATION=5]="ALTERNATION"}(r=t.PROD_TYPE||(t.PROD_TYPE={})),t.getProdType=function(t){if(t instanceof h.Option)return r.OPTION;if(t instanceof h.Repetition)return r.REPETITION;if(t instanceof h.RepetitionMandatory)return r.REPETITION_MANDATORY;if(t instanceof h.RepetitionMandatoryWithSeparator)return r.REPETITION_MANDATORY_WITH_SEPARATOR;if(t instanceof h.RepetitionWithSeparator)return r.REPETITION_WITH_SEPARATOR;if(t instanceof h.Alternation)return r.ALTERNATION;throw Error("non exhaustive match")},t.buildLookaheadFuncForOr=function(t,e,s,r,i,n){var o=g(t,e,s);return n(o,r,v(o)?a.tokenStructuredMatcherNoCategories:a.tokenStructuredMatcher,i)},t.buildLookaheadFuncForOptionalProd=function(t,e,s,r,i,n){var o=y(t,e,i,s),h=v(o)?a.tokenStructuredMatcherNoCategories:a.tokenStructuredMatcher;return n(o[0],h,r)},t.buildAlternativesLookAheadFunc=function(t,e,s,r){var n=t.length,o=i.every(t,(function(t){return i.every(t,(function(t){return 1===t.length}))}));if(e)return function(e){for(var r=i.map(e,(function(t){return t.GATE})),o=0;o<n;o++){var a=t[o],h=a.length,c=r[o];if(void 0===c||!1!==c.call(this))t:for(var l=0;l<h;l++){for(var u=a[l],p=u.length,d=0;d<p;d++){var m=this.LA(d+1);if(!1===s(m,u[d]))continue t}return o}}};if(o&&!r){var a=i.map(t,(function(t){return i.flatten(t)})),h=i.reduce(a,(function(t,e,s){return i.forEach(e,(function(e){i.has(t,e.tokenTypeIdx)||(t[e.tokenTypeIdx]=s),i.forEach(e.categoryMatches,(function(e){i.has(t,e)||(t[e]=s)}))})),t}),[]);return function(){var t=this.LA(1);return h[t.tokenTypeIdx]}}return function(){for(var e=0;e<n;e++){var r=t[e],i=r.length;t:for(var o=0;o<i;o++){for(var a=r[o],h=a.length,c=0;c<h;c++){var l=this.LA(c+1);if(!1===s(l,a[c]))continue t}return e}}}},t.buildSingleAlternativeLookaheadFunction=function(t,e,s){var r=i.every(t,(function(t){return 1===t.length})),n=t.length;if(r&&!s){var o=i.flatten(t);if(1===o.length&&i.isEmpty(o[0].categoryMatches)){var a=o[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===a}}var h=i.reduce(o,(function(t,e,s){return t[e.tokenTypeIdx]=!0,i.forEach(e.categoryMatches,(function(e){t[e]=!0})),t}),[]);return function(){var t=this.LA(1);return!0===h[t.tokenTypeIdx]}}return function(){t:for(var s=0;s<n;s++){for(var r=t[s],i=r.length,o=0;o<i;o++){var a=this.LA(o+1);if(!1===e(a,r[o]))continue t}return!0}return!1}};var l=function(t){function e(e,s,r){var i=t.call(this)||this;return i.topProd=e,i.targetOccurrence=s,i.targetProdType=r,i}return s(e,t),e.prototype.startWalking=function(){return this.walk(this.topProd),this.restDef},e.prototype.checkIsTarget=function(t,e,s,r){return t.idx===this.targetOccurrence&&this.targetProdType===e&&(this.restDef=s.concat(r),!0)},e.prototype.walkOption=function(e,s,i){this.checkIsTarget(e,r.OPTION,s,i)||t.prototype.walkOption.call(this,e,s,i)},e.prototype.walkAtLeastOne=function(e,s,i){this.checkIsTarget(e,r.REPETITION_MANDATORY,s,i)||t.prototype.walkOption.call(this,e,s,i)},e.prototype.walkAtLeastOneSep=function(e,s,i){this.checkIsTarget(e,r.REPETITION_MANDATORY_WITH_SEPARATOR,s,i)||t.prototype.walkOption.call(this,e,s,i)},e.prototype.walkMany=function(e,s,i){this.checkIsTarget(e,r.REPETITION,s,i)||t.prototype.walkOption.call(this,e,s,i)},e.prototype.walkManySep=function(e,s,i){this.checkIsTarget(e,r.REPETITION_WITH_SEPARATOR,s,i)||t.prototype.walkOption.call(this,e,s,i)},e}(o.RestWalker),u=function(t){function e(e,s,r){var i=t.call(this)||this;return i.targetOccurrence=e,i.targetProdType=s,i.targetRef=r,i.result=[],i}return s(e,t),e.prototype.checkIsTarget=function(t,e){t.idx===this.targetOccurrence&&this.targetProdType===e&&(void 0===this.targetRef||t===this.targetRef)&&(this.result=t.definition)},e.prototype.visitOption=function(t){this.checkIsTarget(t,r.OPTION)},e.prototype.visitRepetition=function(t){this.checkIsTarget(t,r.REPETITION)},e.prototype.visitRepetitionMandatory=function(t){this.checkIsTarget(t,r.REPETITION_MANDATORY)},e.prototype.visitRepetitionMandatoryWithSeparator=function(t){this.checkIsTarget(t,r.REPETITION_MANDATORY_WITH_SEPARATOR)},e.prototype.visitRepetitionWithSeparator=function(t){this.checkIsTarget(t,r.REPETITION_WITH_SEPARATOR)},e.prototype.visitAlternation=function(t){this.checkIsTarget(t,r.ALTERNATION)},e}(c.GAstVisitor);function p(t){for(var e=new Array(t),s=0;s<t;s++)e[s]=[];return e}function d(t){for(var e=[""],s=0;s<t.length;s++){for(var r=t[s],i=[],n=0;n<e.length;n++){var o=e[n];i.push(o+"_"+r.tokenTypeIdx);for(var a=0;a<r.categoryMatches.length;a++){var h="_"+r.categoryMatches[a];i.push(o+h)}}e=i}return e}function m(t,e,s){for(var r=0;r<t.length;r++)if(r!==s)for(var i=t[r],n=0;n<e.length;n++){if(!0===i[e[n]])return!1}return!0}function f(t,e){for(var s=i.map(t,(function(t){return n.possiblePathsFrom([t],1)})),r=p(s.length),o=i.map(s,(function(t){var e={};return i.forEach(t,(function(t){var s=d(t.partialPath);i.forEach(s,(function(t){e[t]=!0}))})),e})),a=s,h=1;h<=e;h++){var c=a;a=p(c.length);for(var l=function(t){for(var s=c[t],l=0;l<s.length;l++){var u=s[l].partialPath,p=s[l].suffixDef,f=d(u);if(m(o,f,t)||i.isEmpty(p)||u.length===e){var g=r[t];if(!1===T(g,u)){g.push(u);for(var y=0;y<f.length;y++){var v=f[y];o[t][v]=!0}}}else{var b=n.possiblePathsFrom(p,h+1,u);a[t]=a[t].concat(b),i.forEach(b,(function(e){var s=d(e.partialPath);i.forEach(s,(function(e){o[t][e]=!0}))}))}}},u=0;u<c.length;u++)l(u)}return r}function g(t,e,s,i){var n=new u(t,r.ALTERNATION,i);return e.accept(n),f(n.result,s)}function y(t,e,s,r){var i=new u(t,s);e.accept(i);var n=i.result,o=new l(e,t,s).startWalking();return f([new h.Alternative({definition:n}),new h.Alternative({definition:o})],r)}function T(t,e){t:for(var s=0;s<t.length;s++){var r=t[s];if(r.length===e.length){for(var i=0;i<r.length;i++){var n=e[i],o=r[i];if(!1===(n===o||void 0!==o.categoryMatchesMap[n.tokenTypeIdx]))continue t}return!0}}return!1}function v(t){return i.every(t,(function(t){return i.every(t,(function(t){return i.every(t,(function(t){return i.isEmpty(t.categoryMatches)}))}))}))}t.lookAheadSequenceFromAlternatives=f,t.getLookaheadPathsForOr=g,t.getLookaheadPathsForOptionalProd=y,t.containsPath=T,t.isStrictPrefixOfPath=function(t,e){return t.length<e.length&&i.every(t,(function(t,s){var r=e[s];return t===r||r.categoryMatchesMap[t.tokenTypeIdx]}))},t.areTokenCategoriesNotUsed=v})),iN=LP((t=>{var e,s=t&&t.__extends||(e=function(t,s){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])})(t,s)},function(t,s){if("function"!=typeof s&&null!==s)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function r(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(r.prototype=s.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.checkPrefixAlternativesAmbiguities=t.validateSomeNonEmptyLookaheadPath=t.validateTooManyAlts=t.RepetionCollector=t.validateAmbiguousAlternationAlternatives=t.validateEmptyOrAlternative=t.getFirstNoneTerminal=t.validateNoLeftRecursion=t.validateRuleIsOverridden=t.validateRuleDoesNotAlreadyExist=t.OccurrenceValidationCollector=t.identifyProductionForDuplicates=t.validateGrammar=void 0;var r=UP(),i=UP(),n=xN(),o=JP(),a=rN(),h=sN(),c=XP(),l=KP();function u(t){return o.getProductionDslName(t)+"_#_"+t.idx+"_#_"+p(t)}function p(t){return t instanceof c.Terminal?t.terminalType.name:t instanceof c.NonTerminal?t.nonTerminalName:""}t.validateGrammar=function(t,e,s,a,h){var c=r.map(t,(function(t){return function(t,e){var s=new d;t.accept(s);var i=s.allProductions,a=r.groupBy(i,u),h=r.pick(a,(function(t){return t.length>1}));return r.map(r.values(h),(function(s){var i=r.first(s),a=e.buildDuplicateFoundError(t,s),h=o.getProductionDslName(i),c={message:a,type:n.ParserDefinitionErrorType.DUPLICATE_PRODUCTIONS,ruleName:t.name,dslName:h,occurrence:i.idx},l=p(i);return l&&(c.parameter=l),c}))}(t,a)})),l=r.map(t,(function(t){return f(t,t,a)})),g=[],y=[],b=[];i.every(l,i.isEmpty)&&(g=i.map(t,(function(t){return T(t,a)})),y=i.map(t,(function(t){return v(t,e,a)})),b=x(t,e,a));var I=function(t,e,s){var r=[],o=i.map(e,(function(t){return t.name}));return i.forEach(t,(function(t){var e=t.name;if(i.contains(o,e)){var a=s.buildNamespaceConflictError(t);r.push({message:a,type:n.ParserDefinitionErrorType.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:e})}})),r}(t,s,a),E=i.map(t,(function(t){return w(t,a)})),S=i.map(t,(function(e){return m(e,t,h,a)}));return r.flatten(c.concat(b,l,g,y,I,E,S))},t.identifyProductionForDuplicates=u;var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.allProductions=[],e}return s(e,t),e.prototype.visitNonTerminal=function(t){this.allProductions.push(t)},e.prototype.visitOption=function(t){this.allProductions.push(t)},e.prototype.visitRepetitionWithSeparator=function(t){this.allProductions.push(t)},e.prototype.visitRepetitionMandatory=function(t){this.allProductions.push(t)},e.prototype.visitRepetitionMandatoryWithSeparator=function(t){this.allProductions.push(t)},e.prototype.visitRepetition=function(t){this.allProductions.push(t)},e.prototype.visitAlternation=function(t){this.allProductions.push(t)},e.prototype.visitTerminal=function(t){this.allProductions.push(t)},e}(l.GAstVisitor);function m(t,e,s,r){var o=[];if(i.reduce(e,(function(e,s){return s.name===t.name?e+1:e}),0)>1){var a=r.buildDuplicateRuleNameError({topLevelRule:t,grammarName:s});o.push({message:a,type:n.ParserDefinitionErrorType.DUPLICATE_RULE_NAME,ruleName:t.name})}return o}function f(t,e,s,i){void 0===i&&(i=[]);var o=[],a=g(e.definition);if(r.isEmpty(a))return[];var h=t.name;r.contains(a,t)&&o.push({message:s.buildLeftRecursionError({topLevelRule:t,leftRecursionPath:i}),type:n.ParserDefinitionErrorType.LEFT_RECURSION,ruleName:h});var c=r.difference(a,i.concat([t])),l=r.map(c,(function(e){var n=r.cloneArr(i);return n.push(e),f(t,e,s,n)}));return o.concat(r.flatten(l))}function g(t){var e=[];if(r.isEmpty(t))return e;var s=r.first(t);if(s instanceof c.NonTerminal)e.push(s.referencedRule);else if(s instanceof c.Alternative||s instanceof c.Option||s instanceof c.RepetitionMandatory||s instanceof c.RepetitionMandatoryWithSeparator||s instanceof c.RepetitionWithSeparator||s instanceof c.Repetition)e=e.concat(g(s.definition));else if(s instanceof c.Alternation)e=r.flatten(r.map(s.definition,(function(t){return g(t.definition)})));else if(!(s instanceof c.Terminal))throw Error("non exhaustive match");var i=o.isOptionalProd(s),n=t.length>1;if(i&&n){var a=r.drop(t);return e.concat(g(a))}return e}t.OccurrenceValidationCollector=d,t.validateRuleDoesNotAlreadyExist=m,t.validateRuleIsOverridden=function(t,e,s){var i,o=[];return r.contains(e,t)||(i="Invalid rule override, rule: ->"+t+"<- cannot be overridden in the grammar: ->"+s+"<-as it is not defined in any of the super grammars ",o.push({message:i,type:n.ParserDefinitionErrorType.INVALID_RULE_OVERRIDE,ruleName:t})),o},t.validateNoLeftRecursion=f,t.getFirstNoneTerminal=g;var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.alternations=[],e}return s(e,t),e.prototype.visitAlternation=function(t){this.alternations.push(t)},e}(l.GAstVisitor);function T(t,e){var s=new y;t.accept(s);var i=s.alternations;return r.reduce(i,(function(s,i){var o=r.dropRight(i.definition),a=r.map(o,(function(s,o){var a=h.nextPossibleTokensAfter([s],[],null,1);return r.isEmpty(a)?{message:e.buildEmptyAlternationError({topLevelRule:t,alternation:i,emptyChoiceIdx:o}),type:n.ParserDefinitionErrorType.NONE_LAST_EMPTY_ALT,ruleName:t.name,occurrence:i.idx,alternative:o+1}:null}));return s.concat(r.compact(a))}),[])}function v(t,e,s){var o=new y;t.accept(o);var h=o.alternations;return h=i.reject(h,(function(t){return!0===t.ignoreAmbiguities})),r.reduce(h,(function(o,h){var c=h.idx,l=h.maxLookahead||e,u=a.getLookaheadPathsForOr(c,t,l,h),p=function(t,e,s,o){var h=[],c=i.reduce(t,(function(s,r,n){return!0===e.definition[n].ignoreAmbiguities||i.forEach(r,(function(r){var o=[n];i.forEach(t,(function(t,s){n!==s&&a.containsPath(t,r)&&!0!==e.definition[s].ignoreAmbiguities&&o.push(s)})),o.length>1&&!a.containsPath(h,r)&&(h.push(r),s.push({alts:o,path:r}))})),s}),[]);return r.map(c,(function(t){var r=i.map(t.alts,(function(t){return t+1}));return{message:o.buildAlternationAmbiguityError({topLevelRule:s,alternation:e,ambiguityIndices:r,prefixPath:t.path}),type:n.ParserDefinitionErrorType.AMBIGUOUS_ALTS,ruleName:s.name,occurrence:e.idx,alternatives:[t.alts]}}))}(u,h,t,s),d=I(u,h,t,s);return o.concat(p,d)}),[])}t.validateEmptyOrAlternative=T,t.validateAmbiguousAlternationAlternatives=v;var b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.allProductions=[],e}return s(e,t),e.prototype.visitRepetitionWithSeparator=function(t){this.allProductions.push(t)},e.prototype.visitRepetitionMandatory=function(t){this.allProductions.push(t)},e.prototype.visitRepetitionMandatoryWithSeparator=function(t){this.allProductions.push(t)},e.prototype.visitRepetition=function(t){this.allProductions.push(t)},e}(l.GAstVisitor);function w(t,e){var s=new y;t.accept(s);var i=s.alternations;return r.reduce(i,(function(s,r){return r.definition.length>255&&s.push({message:e.buildTooManyAlternativesError({topLevelRule:t,alternation:r}),type:n.ParserDefinitionErrorType.TOO_MANY_ALTS,ruleName:t.name,occurrence:r.idx}),s}),[])}function x(t,e,s){var r=[];return i.forEach(t,(function(t){var o=new b;t.accept(o);var h=o.allProductions;i.forEach(h,(function(o){var h=a.getProdType(o),c=o.maxLookahead||e,l=o.idx,u=a.getLookaheadPathsForOptionalProd(l,t,h,c)[0];if(i.isEmpty(i.flatten(u))){var p=s.buildEmptyRepetitionError({topLevelRule:t,repetition:o});r.push({message:p,type:n.ParserDefinitionErrorType.NO_NON_EMPTY_LOOKAHEAD,ruleName:t.name})}}))})),r}function I(t,e,s,r){var o=[],h=i.reduce(t,(function(t,e,s){var r=i.map(e,(function(t){return{idx:s,path:t}}));return t.concat(r)}),[]);return i.forEach(h,(function(t){if(!0!==e.definition[t.idx].ignoreAmbiguities){var c=t.idx,l=t.path,u=i.findAll(h,(function(t){return!0!==e.definition[t.idx].ignoreAmbiguities&&t.idx<c&&a.isStrictPrefixOfPath(t.path,l)})),p=i.map(u,(function(t){var i=[t.idx+1,c+1],o=0===e.idx?"":e.idx;return{message:r.buildAlternationPrefixAmbiguityError({topLevelRule:s,alternation:e,ambiguityIndices:i,prefixPath:t.path}),type:n.ParserDefinitionErrorType.AMBIGUOUS_PREFIX_ALTS,ruleName:s.name,occurrence:o,alternatives:i}}));o=o.concat(p)}})),o}t.RepetionCollector=b,t.validateTooManyAlts=w,t.validateSomeNonEmptyLookaheadPath=x,t.checkPrefixAlternativesAmbiguities=I})),nN=LP((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateGrammar=t.resolveGrammar=void 0;var e=UP(),s=eN(),r=iN(),i=tN();t.resolveGrammar=function(t){t=e.defaults(t,{errMsgProvider:i.defaultGrammarResolverErrorProvider});var r={};return e.forEach(t.rules,(function(t){r[t.name]=t})),s.resolveGrammar(r,t.errMsgProvider)},t.validateGrammar=function(t){return t=e.defaults(t,{errMsgProvider:i.defaultGrammarValidatorErrorProvider}),r.validateGrammar(t.rules,t.maxLookahead,t.tokenTypes,t.errMsgProvider,t.grammarName)}})),oN=LP((t=>{var e,s=t&&t.__extends||(e=function(t,s){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])})(t,s)},function(t,s){if("function"!=typeof s&&null!==s)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function r(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(r.prototype=s.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.EarlyExitException=t.NotAllInputParsedException=t.NoViableAltException=t.MismatchedTokenException=t.isRecognitionException=void 0;var r=UP(),i="MismatchedTokenException",n="NoViableAltException",o="EarlyExitException",a="NotAllInputParsedException",h=[i,n,o,a];Object.freeze(h),t.isRecognitionException=function(t){return r.contains(h,t.name)};var c=function(t){function e(e,s){var r=this.constructor,i=t.call(this,e)||this;return i.token=s,i.resyncedTokens=[],Object.setPrototypeOf(i,r.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,i.constructor),i}return s(e,t),e}(Error),l=function(t){function e(e,s,r){var n=t.call(this,e,s)||this;return n.previousToken=r,n.name=i,n}return s(e,t),e}(c);t.MismatchedTokenException=l;var u=function(t){function e(e,s,r){var i=t.call(this,e,s)||this;return i.previousToken=r,i.name=n,i}return s(e,t),e}(c);t.NoViableAltException=u;var p=function(t){function e(e,s){var r=t.call(this,e,s)||this;return r.name=a,r}return s(e,t),e}(c);t.NotAllInputParsedException=p;var d=function(t){function e(e,s,r){var i=t.call(this,e,s)||this;return i.previousToken=r,i.name=o,i}return s(e,t),e}(c);t.EarlyExitException=d})),aN=LP((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.attemptInRepetitionRecovery=t.Recoverable=t.InRuleRecoveryException=t.IN_RULE_RECOVERY_EXCEPTION=t.EOF_FOLLOW_KEY=void 0;var e=YP(),s=UP(),r=oN(),i=ZP(),n=xN();function o(e){this.name=t.IN_RULE_RECOVERY_EXCEPTION,this.message=e}t.EOF_FOLLOW_KEY={},t.IN_RULE_RECOVERY_EXCEPTION="InRuleRecoveryException",t.InRuleRecoveryException=o,o.prototype=Error.prototype;var a=function(){function a(){}return a.prototype.initRecoverable=function(t){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=s.has(t,"recoveryEnabled")?t.recoveryEnabled:n.DEFAULT_PARSER_CONFIG.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=h)},a.prototype.getTokenToInsert=function(t){var s=e.createTokenInstance(t,"",NaN,NaN,NaN,NaN,NaN,NaN);return s.isInsertedInRecovery=!0,s},a.prototype.canTokenTypeBeInsertedInRecovery=function(t){return!0},a.prototype.tryInRepetitionRecovery=function(t,e,i,n){for(var o=this,a=this.findReSyncTokenType(),h=this.exportLexerState(),c=[],l=!1,u=this.LA(1),p=this.LA(1),d=function(){var t=o.LA(0),e=o.errorMessageProvider.buildMismatchTokenMessage({expected:n,actual:u,previous:t,ruleName:o.getCurrRuleFullName()}),i=new r.MismatchedTokenException(e,u,o.LA(0));i.resyncedTokens=s.dropRight(c),o.SAVE_ERROR(i)};!l;){if(this.tokenMatcher(p,n))return void d();if(i.call(this))return d(),void t.apply(this,e);this.tokenMatcher(p,a)?l=!0:(p=this.SKIP_TOKEN(),this.addToResyncTokens(p,c))}this.importLexerState(h)},a.prototype.shouldInRepetitionRecoveryBeTried=function(t,e,s){return!(!1===s||void 0===t||void 0===e||this.tokenMatcher(this.LA(1),t)||this.isBackTracking()||this.canPerformInRuleRecovery(t,this.getFollowsForInRuleRecovery(t,e)))},a.prototype.getFollowsForInRuleRecovery=function(t,e){var s=this.getCurrentGrammarPath(t,e);return this.getNextPossibleTokenTypes(s)},a.prototype.tryInRuleRecovery=function(t,e){if(this.canRecoverWithSingleTokenInsertion(t,e))return this.getTokenToInsert(t);if(this.canRecoverWithSingleTokenDeletion(t)){var s=this.SKIP_TOKEN();return this.consumeToken(),s}throw new o("sad sad panda")},a.prototype.canPerformInRuleRecovery=function(t,e){return this.canRecoverWithSingleTokenInsertion(t,e)||this.canRecoverWithSingleTokenDeletion(t)},a.prototype.canRecoverWithSingleTokenInsertion=function(t,e){var r=this;if(!this.canTokenTypeBeInsertedInRecovery(t)||s.isEmpty(e))return!1;var i=this.LA(1);return void 0!==s.find(e,(function(t){return r.tokenMatcher(i,t)}))},a.prototype.canRecoverWithSingleTokenDeletion=function(t){return this.tokenMatcher(this.LA(2),t)},a.prototype.isInCurrentRuleReSyncSet=function(t){var e=this.getCurrFollowKey(),r=this.getFollowSetFromFollowKey(e);return s.contains(r,t)},a.prototype.findReSyncTokenType=function(){for(var t=this.flattenFollowSet(),e=this.LA(1),r=2;;){var i=e.tokenType;if(s.contains(t,i))return i;e=this.LA(r),r++}},a.prototype.getCurrFollowKey=function(){if(1===this.RULE_STACK.length)return t.EOF_FOLLOW_KEY;var e=this.getLastExplicitRuleShortName(),s=this.getLastExplicitRuleOccurrenceIndex(),r=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(e),idxInCallingRule:s,inRule:this.shortRuleNameToFullName(r)}},a.prototype.buildFullFollowKeyStack=function(){var e=this,r=this.RULE_STACK,i=this.RULE_OCCURRENCE_STACK;return s.map(r,(function(s,n){return 0===n?t.EOF_FOLLOW_KEY:{ruleName:e.shortRuleNameToFullName(s),idxInCallingRule:i[n],inRule:e.shortRuleNameToFullName(r[n-1])}}))},a.prototype.flattenFollowSet=function(){var t=this,e=s.map(this.buildFullFollowKeyStack(),(function(e){return t.getFollowSetFromFollowKey(e)}));return s.flatten(e)},a.prototype.getFollowSetFromFollowKey=function(s){if(s===t.EOF_FOLLOW_KEY)return[e.EOF];var r=s.ruleName+s.idxInCallingRule+i.IN+s.inRule;return this.resyncFollows[r]},a.prototype.addToResyncTokens=function(t,s){return this.tokenMatcher(t,e.EOF)||s.push(t),s},a.prototype.reSyncTo=function(t){for(var e=[],r=this.LA(1);!1===this.tokenMatcher(r,t);)r=this.SKIP_TOKEN(),this.addToResyncTokens(r,e);return s.dropRight(e)},a.prototype.attemptInRepetitionRecovery=function(t,e,s,r,i,n,o){},a.prototype.getCurrentGrammarPath=function(t,e){return{ruleStack:this.getHumanReadableRuleStack(),occurrenceStack:s.cloneArr(this.RULE_OCCURRENCE_STACK),lastTok:t,lastTokOccurrence:e}},a.prototype.getHumanReadableRuleStack=function(){var t=this;return s.map(this.RULE_STACK,(function(e){return t.shortRuleNameToFullName(e)}))},a}();function h(t,s,r,i,n,o,a){var h=this.getKeyForAutomaticLookahead(i,n),c=this.firstAfterRepMap[h];if(void 0===c){var l=this.getCurrRuleFullName();c=new o(this.getGAstProductions()[l],n).startWalking(),this.firstAfterRepMap[h]=c}var u=c.token,p=c.occurrence,d=c.isEndOfRule;1===this.RULE_STACK.length&&d&&void 0===u&&(u=e.EOF,p=1),this.shouldInRepetitionRecoveryBeTried(u,p,a)&&this.tryInRepetitionRecovery(t,s,r,u)}t.Recoverable=a,t.attemptInRepetitionRecovery=h})),hN=LP((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getKeyForAutomaticLookahead=t.AT_LEAST_ONE_SEP_IDX=t.MANY_SEP_IDX=t.AT_LEAST_ONE_IDX=t.MANY_IDX=t.OPTION_IDX=t.OR_IDX=t.BITS_FOR_ALT_IDX=t.BITS_FOR_RULE_IDX=t.BITS_FOR_OCCURRENCE_IDX=t.BITS_FOR_METHOD_TYPE=void 0,t.BITS_FOR_METHOD_TYPE=4,t.BITS_FOR_OCCURRENCE_IDX=8,t.BITS_FOR_RULE_IDX=12,t.BITS_FOR_ALT_IDX=8,t.OR_IDX=1<<t.BITS_FOR_OCCURRENCE_IDX,t.OPTION_IDX=2<<t.BITS_FOR_OCCURRENCE_IDX,t.MANY_IDX=3<<t.BITS_FOR_OCCURRENCE_IDX,t.AT_LEAST_ONE_IDX=4<<t.BITS_FOR_OCCURRENCE_IDX,t.MANY_SEP_IDX=5<<t.BITS_FOR_OCCURRENCE_IDX,t.AT_LEAST_ONE_SEP_IDX=6<<t.BITS_FOR_OCCURRENCE_IDX,t.getKeyForAutomaticLookahead=function(t,e,s){return s|e|t};t.BITS_FOR_ALT_IDX})),cN=LP((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LooksAhead=void 0;var e=rN(),s=UP(),r=xN(),i=hN(),n=JP(),o=function(){function t(){}return t.prototype.initLooksAhead=function(t){this.dynamicTokensEnabled=s.has(t,"dynamicTokensEnabled")?t.dynamicTokensEnabled:r.DEFAULT_PARSER_CONFIG.dynamicTokensEnabled,this.maxLookahead=s.has(t,"maxLookahead")?t.maxLookahead:r.DEFAULT_PARSER_CONFIG.maxLookahead,this.lookAheadFuncsCache=s.isES2015MapSupported()?new Map:[],s.isES2015MapSupported()?(this.getLaFuncFromCache=this.getLaFuncFromMap,this.setLaFuncCache=this.setLaFuncCacheUsingMap):(this.getLaFuncFromCache=this.getLaFuncFromObj,this.setLaFuncCache=this.setLaFuncUsingObj)},t.prototype.preComputeLookaheadFunctions=function(t){var r=this;s.forEach(t,(function(t){r.TRACE_INIT(t.name+" Rule Lookahead",(function(){var o=n.collectMethods(t),a=o.alternation,h=o.repetition,c=o.option,l=o.repetitionMandatory,u=o.repetitionMandatoryWithSeparator,p=o.repetitionWithSeparator;s.forEach(a,(function(s){var o=0===s.idx?"":s.idx;r.TRACE_INIT(""+n.getProductionDslName(s)+o,(function(){var n=e.buildLookaheadFuncForOr(s.idx,t,s.maxLookahead||r.maxLookahead,s.hasPredicates,r.dynamicTokensEnabled,r.lookAheadBuilderForAlternatives),o=i.getKeyForAutomaticLookahead(r.fullRuleNameToShort[t.name],i.OR_IDX,s.idx);r.setLaFuncCache(o,n)}))})),s.forEach(h,(function(s){r.computeLookaheadFunc(t,s.idx,i.MANY_IDX,e.PROD_TYPE.REPETITION,s.maxLookahead,n.getProductionDslName(s))})),s.forEach(c,(function(s){r.computeLookaheadFunc(t,s.idx,i.OPTION_IDX,e.PROD_TYPE.OPTION,s.maxLookahead,n.getProductionDslName(s))})),s.forEach(l,(function(s){r.computeLookaheadFunc(t,s.idx,i.AT_LEAST_ONE_IDX,e.PROD_TYPE.REPETITION_MANDATORY,s.maxLookahead,n.getProductionDslName(s))})),s.forEach(u,(function(s){r.computeLookaheadFunc(t,s.idx,i.AT_LEAST_ONE_SEP_IDX,e.PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR,s.maxLookahead,n.getProductionDslName(s))})),s.forEach(p,(function(s){r.computeLookaheadFunc(t,s.idx,i.MANY_SEP_IDX,e.PROD_TYPE.REPETITION_WITH_SEPARATOR,s.maxLookahead,n.getProductionDslName(s))}))}))}))},t.prototype.computeLookaheadFunc=function(t,s,r,n,o,a){var h=this;this.TRACE_INIT(""+a+(0===s?"":s),(function(){var a=e.buildLookaheadFuncForOptionalProd(s,t,o||h.maxLookahead,h.dynamicTokensEnabled,n,h.lookAheadBuilderForOptional),c=i.getKeyForAutomaticLookahead(h.fullRuleNameToShort[t.name],r,s);h.setLaFuncCache(c,a)}))},t.prototype.lookAheadBuilderForOptional=function(t,s,r){return e.buildSingleAlternativeLookaheadFunction(t,s,r)},t.prototype.lookAheadBuilderForAlternatives=function(t,s,r,i){return e.buildAlternativesLookAheadFunc(t,s,r,i)},t.prototype.getKeyForAutomaticLookahead=function(t,e){var s=this.getLastExplicitRuleShortName();return i.getKeyForAutomaticLookahead(s,t,e)},t.prototype.getLaFuncFromCache=function(t){},t.prototype.getLaFuncFromMap=function(t){return this.lookAheadFuncsCache.get(t)},t.prototype.getLaFuncFromObj=function(t){return this.lookAheadFuncsCache[t]},t.prototype.setLaFuncCache=function(t,e){},t.prototype.setLaFuncCacheUsingMap=function(t,e){this.lookAheadFuncsCache.set(t,e)},t.prototype.setLaFuncUsingObj=function(t,e){this.lookAheadFuncsCache[t]=e},t}();t.LooksAhead=o})),lN=LP((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addNoneTerminalToCst=t.addTerminalToCst=t.setNodeLocationFull=t.setNodeLocationOnlyOffset=void 0,t.setNodeLocationOnlyOffset=function(t,e){!0===isNaN(t.startOffset)?(t.startOffset=e.startOffset,t.endOffset=e.endOffset):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset)},t.setNodeLocationFull=function(t,e){!0===isNaN(t.startOffset)?(t.startOffset=e.startOffset,t.startColumn=e.startColumn,t.startLine=e.startLine,t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine)},t.addTerminalToCst=function(t,e,s){void 0===t.children[s]?t.children[s]=[e]:t.children[s].push(e)},t.addNoneTerminalToCst=function(t,e,s){void 0===t.children[e]?t.children[e]=[s]:t.children[e].push(s)}})),uN=LP((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defineNameProp=t.functionName=t.classNameFromInstance=void 0;var e=UP();t.classNameFromInstance=function(t){return r(t.constructor)};var s="name";function r(t){return t.name||"anonymous"}t.functionName=r,t.defineNameProp=function(t,r){var i=Object.getOwnPropertyDescriptor(t,s);return!(!e.isUndefined(i)&&!i.configurable)&&(Object.defineProperty(t,s,{enumerable:!1,configurable:!0,writable:!1,value:r}),!0)}})),pN=LP((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateRedundantMethods=t.validateMissingCstMethods=t.validateVisitor=t.CstVisitorDefinitionError=t.createBaseVisitorConstructorWithDefaults=t.createBaseSemanticVisitorConstructor=t.defaultVisit=void 0;var e,s,r=UP(),i=uN();function n(t,e){for(var s=r.keys(t),i=s.length,n=0;n<i;n++)for(var o=t[s[n]],a=o.length,h=0;h<a;h++){var c=o[h];void 0===c.tokenTypeIdx&&this[c.name](c.children,e)}}function o(t,e){var s=a(t,e),r=c(t,e);return s.concat(r)}function a(t,s){var n=r.map(s,(function(s){if(!r.isFunction(t[s]))return{msg:"Missing visitor method: <"+s+"> on "+i.functionName(t.constructor)+" CST Visitor.",type:e.MISSING_METHOD,methodName:s}}));return r.compact(n)}t.defaultVisit=n,t.createBaseSemanticVisitorConstructor=function(t,e){var s=function(){};return i.defineNameProp(s,t+"BaseSemantics"),(s.prototype={visit:function(t,e){if(r.isArray(t)&&(t=t[0]),!r.isUndefined(t))return this[t.name](t.children,e)},validateVisitor:function(){var t=o(this,e);if(!r.isEmpty(t)){var s=r.map(t,(function(t){return t.msg}));throw Error("Errors Detected in CST Visitor <"+i.functionName(this.constructor)+">:\n\t"+s.join("\n\n").replace(/\n/g,"\n\t"))}}}).constructor=s,s._RULE_NAMES=e,s},t.createBaseVisitorConstructorWithDefaults=function(t,e,s){var o=function(){};i.defineNameProp(o,t+"BaseSemanticsWithDefaults");var a=Object.create(s.prototype);return r.forEach(e,(function(t){a[t]=n})),(o.prototype=a).constructor=o,o},(s=e=t.CstVisitorDefinitionError||(t.CstVisitorDefinitionError={}))[s.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",s[s.MISSING_METHOD=1]="MISSING_METHOD",t.validateVisitor=o,t.validateMissingCstMethods=a;var h=["constructor","visit","validateVisitor"];function c(t,s){var n=[];for(var o in t)r.isFunction(t[o])&&!r.contains(h,o)&&!r.contains(s,o)&&n.push({msg:"Redundant visitor method: <"+o+"> on "+i.functionName(t.constructor)+" CST Visitor\nThere is no Grammar Rule corresponding to this method's name.\n",type:e.REDUNDANT_METHOD,methodName:o});return n}t.validateRedundantMethods=c})),dN=LP((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TreeBuilder=void 0;var e=lN(),s=UP(),r=pN(),i=xN(),n=function(){function t(){}return t.prototype.initTreeBuilder=function(t){if(this.CST_STACK=[],this.outputCst=t.outputCst,this.nodeLocationTracking=s.has(t,"nodeLocationTracking")?t.nodeLocationTracking:i.DEFAULT_PARSER_CONFIG.nodeLocationTracking,this.outputCst)if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=e.setNodeLocationFull,this.setNodeLocationFromNode=e.setNodeLocationFull,this.cstPostRule=s.NOOP,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=s.NOOP,this.setNodeLocationFromNode=s.NOOP,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=e.setNodeLocationOnlyOffset,this.setNodeLocationFromNode=e.setNodeLocationOnlyOffset,this.cstPostRule=s.NOOP,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=s.NOOP,this.setNodeLocationFromNode=s.NOOP,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else{if(!/none/i.test(this.nodeLocationTracking))throw Error('Invalid <nodeLocationTracking> config option: "'+t.nodeLocationTracking+'"');this.setNodeLocationFromToken=s.NOOP,this.setNodeLocationFromNode=s.NOOP,this.cstPostRule=s.NOOP,this.setInitialNodeLocation=s.NOOP}else this.cstInvocationStateUpdate=s.NOOP,this.cstFinallyStateUpdate=s.NOOP,this.cstPostTerminal=s.NOOP,this.cstPostNonTerminal=s.NOOP,this.cstPostRule=s.NOOP},t.prototype.setInitialNodeLocationOnlyOffsetRecovery=function(t){t.location={startOffset:NaN,endOffset:NaN}},t.prototype.setInitialNodeLocationOnlyOffsetRegular=function(t){t.location={startOffset:this.LA(1).startOffset,endOffset:NaN}},t.prototype.setInitialNodeLocationFullRecovery=function(t){t.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}},t.prototype.setInitialNodeLocationFullRegular=function(t){var e=this.LA(1);t.location={startOffset:e.startOffset,startLine:e.startLine,startColumn:e.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}},t.prototype.cstInvocationStateUpdate=function(t,e){var s={name:t,children:{}};this.setInitialNodeLocation(s),this.CST_STACK.push(s)},t.prototype.cstFinallyStateUpdate=function(){this.CST_STACK.pop()},t.prototype.cstPostRuleFull=function(t){var e=this.LA(0),s=t.location;s.startOffset<=e.startOffset?(s.endOffset=e.endOffset,s.endLine=e.endLine,s.endColumn=e.endColumn):(s.startOffset=NaN,s.startLine=NaN,s.startColumn=NaN)},t.prototype.cstPostRuleOnlyOffset=function(t){var e=this.LA(0),s=t.location;s.startOffset<=e.startOffset?s.endOffset=e.endOffset:s.startOffset=NaN},t.prototype.cstPostTerminal=function(t,s){var r=this.CST_STACK[this.CST_STACK.length-1];e.addTerminalToCst(r,s,t),this.setNodeLocationFromToken(r.location,s)},t.prototype.cstPostNonTerminal=function(t,s){var r=this.CST_STACK[this.CST_STACK.length-1];e.addNoneTerminalToCst(r,s,t),this.setNodeLocationFromNode(r.location,t.location)},t.prototype.getBaseCstVisitorConstructor=function(){if(s.isUndefined(this.baseCstVisitorConstructor)){var t=r.createBaseSemanticVisitorConstructor(this.className,s.keys(this.gastProductionsCache));return this.baseCstVisitorConstructor=t,t}return this.baseCstVisitorConstructor},t.prototype.getBaseCstVisitorConstructorWithDefaults=function(){if(s.isUndefined(this.baseCstVisitorWithDefaultsConstructor)){var t=r.createBaseVisitorConstructorWithDefaults(this.className,s.keys(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=t,t}return this.baseCstVisitorWithDefaultsConstructor},t.prototype.getLastExplicitRuleShortName=function(){var t=this.RULE_STACK;return t[t.length-1]},t.prototype.getPreviousExplicitRuleShortName=function(){var t=this.RULE_STACK;return t[t.length-2]},t.prototype.getLastExplicitRuleOccurrenceIndex=function(){var t=this.RULE_OCCURRENCE_STACK;return t[t.length-1]},t}();t.TreeBuilder=n})),mN=LP((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LexerAdapter=void 0;var e=xN(),s=function(){function t(){}return t.prototype.initLexerAdapter=function(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1},Object.defineProperty(t.prototype,"input",{get:function(){return this.tokVector},set:function(t){if(!0!==this.selfAnalysisDone)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=t,this.tokVectorLength=t.length},enumerable:!1,configurable:!0}),t.prototype.SKIP_TOKEN=function(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):e.END_OF_FILE},t.prototype.LA=function(t){var s=this.currIdx+t;return s<0||this.tokVectorLength<=s?e.END_OF_FILE:this.tokVector[s]},t.prototype.consumeToken=function(){this.currIdx++},t.prototype.exportLexerState=function(){return this.currIdx},t.prototype.importLexerState=function(t){this.currIdx=t},t.prototype.resetLexerState=function(){this.currIdx=-1},t.prototype.moveToTerminatedState=function(){this.currIdx=this.tokVector.length-1},t.prototype.getLexerPosition=function(){return this.exportLexerState()},t}();t.LexerAdapter=s})),fN=LP((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RecognizerApi=void 0;var e=UP(),s=oN(),r=xN(),i=tN(),n=iN(),o=XP(),a=function(){function t(){}return t.prototype.ACTION=function(t){return t.call(this)},t.prototype.consume=function(t,e,s){return this.consumeInternal(e,t,s)},t.prototype.subrule=function(t,e,s){return this.subruleInternal(e,t,s)},t.prototype.option=function(t,e){return this.optionInternal(e,t)},t.prototype.or=function(t,e){return this.orInternal(e,t)},t.prototype.many=function(t,e){return this.manyInternal(t,e)},t.prototype.atLeastOne=function(t,e){return this.atLeastOneInternal(t,e)},t.prototype.CONSUME=function(t,e){return this.consumeInternal(t,0,e)},t.prototype.CONSUME1=function(t,e){return this.consumeInternal(t,1,e)},t.prototype.CONSUME2=function(t,e){return this.consumeInternal(t,2,e)},t.prototype.CONSUME3=function(t,e){return this.consumeInternal(t,3,e)},t.prototype.CONSUME4=function(t,e){return this.consumeInternal(t,4,e)},t.prototype.CONSUME5=function(t,e){return this.consumeInternal(t,5,e)},t.prototype.CONSUME6=function(t,e){return this.consumeInternal(t,6,e)},t.prototype.CONSUME7=function(t,e){return this.consumeInternal(t,7,e)},t.prototype.CONSUME8=function(t,e){return this.consumeInternal(t,8,e)},t.prototype.CONSUME9=function(t,e){return this.consumeInternal(t,9,e)},t.prototype.SUBRULE=function(t,e){return this.subruleInternal(t,0,e)},t.prototype.SUBRULE1=function(t,e){return this.subruleInternal(t,1,e)},t.prototype.SUBRULE2=function(t,e){return this.subruleInternal(t,2,e)},t.prototype.SUBRULE3=function(t,e){return this.subruleInternal(t,3,e)},t.prototype.SUBRULE4=function(t,e){return this.subruleInternal(t,4,e)},t.prototype.SUBRULE5=function(t,e){return this.subruleInternal(t,5,e)},t.prototype.SUBRULE6=function(t,e){return this.subruleInternal(t,6,e)},t.prototype.SUBRULE7=function(t,e){return this.subruleInternal(t,7,e)},t.prototype.SUBRULE8=function(t,e){return this.subruleInternal(t,8,e)},t.prototype.SUBRULE9=function(t,e){return this.subruleInternal(t,9,e)},t.prototype.OPTION=function(t){return this.optionInternal(t,0)},t.prototype.OPTION1=function(t){return this.optionInternal(t,1)},t.prototype.OPTION2=function(t){return this.optionInternal(t,2)},t.prototype.OPTION3=function(t){return this.optionInternal(t,3)},t.prototype.OPTION4=function(t){return this.optionInternal(t,4)},t.prototype.OPTION5=function(t){return this.optionInternal(t,5)},t.prototype.OPTION6=function(t){return this.optionInternal(t,6)},t.prototype.OPTION7=function(t){return this.optionInternal(t,7)},t.prototype.OPTION8=function(t){return this.optionInternal(t,8)},t.prototype.OPTION9=function(t){return this.optionInternal(t,9)},t.prototype.OR=function(t){return this.orInternal(t,0)},t.prototype.OR1=function(t){return this.orInternal(t,1)},t.prototype.OR2=function(t){return this.orInternal(t,2)},t.prototype.OR3=function(t){return this.orInternal(t,3)},t.prototype.OR4=function(t){return this.orInternal(t,4)},t.prototype.OR5=function(t){return this.orInternal(t,5)},t.prototype.OR6=function(t){return this.orInternal(t,6)},t.prototype.OR7=function(t){return this.orInternal(t,7)},t.prototype.OR8=function(t){return this.orInternal(t,8)},t.prototype.OR9=function(t){return this.orInternal(t,9)},t.prototype.MANY=function(t){this.manyInternal(0,t)},t.prototype.MANY1=function(t){this.manyInternal(1,t)},t.prototype.MANY2=function(t){this.manyInternal(2,t)},t.prototype.MANY3=function(t){this.manyInternal(3,t)},t.prototype.MANY4=function(t){this.manyInternal(4,t)},t.prototype.MANY5=function(t){this.manyInternal(5,t)},t.prototype.MANY6=function(t){this.manyInternal(6,t)},t.prototype.MANY7=function(t){this.manyInternal(7,t)},t.prototype.MANY8=function(t){this.manyInternal(8,t)},t.prototype.MANY9=function(t){this.manyInternal(9,t)},t.prototype.MANY_SEP=function(t){this.manySepFirstInternal(0,t)},t.prototype.MANY_SEP1=function(t){this.manySepFirstInternal(1,t)},t.prototype.MANY_SEP2=function(t){this.manySepFirstInternal(2,t)},t.prototype.MANY_SEP3=function(t){this.manySepFirstInternal(3,t)},t.prototype.MANY_SEP4=function(t){this.manySepFirstInternal(4,t)},t.prototype.MANY_SEP5=function(t){this.manySepFirstInternal(5,t)},t.prototype.MANY_SEP6=function(t){this.manySepFirstInternal(6,t)},t.prototype.MANY_SEP7=function(t){this.manySepFirstInternal(7,t)},t.prototype.MANY_SEP8=function(t){this.manySepFirstInternal(8,t)},t.prototype.MANY_SEP9=function(t){this.manySepFirstInternal(9,t)},t.prototype.AT_LEAST_ONE=function(t){this.atLeastOneInternal(0,t)},t.prototype.AT_LEAST_ONE1=function(t){return this.atLeastOneInternal(1,t)},t.prototype.AT_LEAST_ONE2=function(t){this.atLeastOneInternal(2,t)},t.prototype.AT_LEAST_ONE3=function(t){this.atLeastOneInternal(3,t)},t.prototype.AT_LEAST_ONE4=function(t){this.atLeastOneInternal(4,t)},t.prototype.AT_LEAST_ONE5=function(t){this.atLeastOneInternal(5,t)},t.prototype.AT_LEAST_ONE6=function(t){this.atLeastOneInternal(6,t)},t.prototype.AT_LEAST_ONE7=function(t){this.atLeastOneInternal(7,t)},t.prototype.AT_LEAST_ONE8=function(t){this.atLeastOneInternal(8,t)},t.prototype.AT_LEAST_ONE9=function(t){this.atLeastOneInternal(9,t)},t.prototype.AT_LEAST_ONE_SEP=function(t){this.atLeastOneSepFirstInternal(0,t)},t.prototype.AT_LEAST_ONE_SEP1=function(t){this.atLeastOneSepFirstInternal(1,t)},t.prototype.AT_LEAST_ONE_SEP2=function(t){this.atLeastOneSepFirstInternal(2,t)},t.prototype.AT_LEAST_ONE_SEP3=function(t){this.atLeastOneSepFirstInternal(3,t)},t.prototype.AT_LEAST_ONE_SEP4=function(t){this.atLeastOneSepFirstInternal(4,t)},t.prototype.AT_LEAST_ONE_SEP5=function(t){this.atLeastOneSepFirstInternal(5,t)},t.prototype.AT_LEAST_ONE_SEP6=function(t){this.atLeastOneSepFirstInternal(6,t)},t.prototype.AT_LEAST_ONE_SEP7=function(t){this.atLeastOneSepFirstInternal(7,t)},t.prototype.AT_LEAST_ONE_SEP8=function(t){this.atLeastOneSepFirstInternal(8,t)},t.prototype.AT_LEAST_ONE_SEP9=function(t){this.atLeastOneSepFirstInternal(9,t)},t.prototype.RULE=function(t,s,n){if(void 0===n&&(n=r.DEFAULT_RULE_CONFIG),e.contains(this.definedRulesNames,t)){var o={message:i.defaultGrammarValidatorErrorProvider.buildDuplicateRuleNameError({topLevelRule:t,grammarName:this.className}),type:r.ParserDefinitionErrorType.DUPLICATE_RULE_NAME,ruleName:t};this.definitionErrors.push(o)}this.definedRulesNames.push(t);var a=this.defineRule(t,s,n);return this[t]=a,a},t.prototype.OVERRIDE_RULE=function(t,e,s){void 0===s&&(s=r.DEFAULT_RULE_CONFIG);var i=[];i=i.concat(n.validateRuleIsOverridden(t,this.definedRulesNames,this.className)),this.definitionErrors=this.definitionErrors.concat(i);var o=this.defineRule(t,e,s);return this[t]=o,o},t.prototype.BACKTRACK=function(t,e){return function(){this.isBackTrackingStack.push(1);var r=this.saveRecogState();try{return t.apply(this,e),!0}catch(t){if(s.isRecognitionException(t))return!1;throw t}finally{this.reloadRecogState(r),this.isBackTrackingStack.pop()}}},t.prototype.getGAstProductions=function(){return this.gastProductionsCache},t.prototype.getSerializedGastProductions=function(){return o.serializeGrammar(e.values(this.gastProductionsCache))},t}();t.RecognizerApi=a})),gN=LP((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RecognizerEngine=void 0;var e=UP(),s=hN(),r=oN(),i=rN(),n=sN(),o=xN(),a=aN(),h=YP(),c=zP(),l=uN(),u=function(){function t(){}return t.prototype.initRecognizerEngine=function(t,s){if(this.className=l.classNameFromInstance(this),this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=c.tokenStructuredMatcherNoCategories,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},e.has(s,"serializedGrammar"))throw Error("The Parser's configuration can no longer contain a <serializedGrammar> property.\n\tSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0\n\tFor Further details.");if(e.isArray(t)){if(e.isEmpty(t))throw Error("A Token Vocabulary cannot be empty.\n\tNote that the first argument for the parser constructor\n\tis no longer a Token vector (since v4.0).");if("number"==typeof t[0].startOffset)throw Error("The Parser constructor no longer accepts a token vector as the first argument.\n\tSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0\n\tFor Further details.")}if(e.isArray(t))this.tokensMap=e.reduce(t,(function(t,e){return t[e.name]=e,t}),{});else if(e.has(t,"modes")&&e.every(e.flatten(e.values(t.modes)),c.isTokenType)){var r=e.flatten(e.values(t.modes)),i=e.uniq(r);this.tokensMap=e.reduce(i,(function(t,e){return t[e.name]=e,t}),{})}else{if(!e.isObject(t))throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap=e.cloneObj(t)}this.tokensMap.EOF=h.EOF;var n=e.every(e.values(t),(function(t){return e.isEmpty(t.categoryMatches)}));this.tokenMatcher=n?c.tokenStructuredMatcherNoCategories:c.tokenStructuredMatcher,c.augmentTokenTypes(e.values(this.tokensMap))},t.prototype.defineRule=function(t,r,i){if(this.selfAnalysisDone)throw Error("Grammar rule <"+t+"> may not be defined after the 'performSelfAnalysis' method has been called'\nMake sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.");var n=e.has(i,"resyncEnabled")?i.resyncEnabled:o.DEFAULT_RULE_CONFIG.resyncEnabled,a=e.has(i,"recoveryValueFunc")?i.recoveryValueFunc:o.DEFAULT_RULE_CONFIG.recoveryValueFunc,h=this.ruleShortNameIdx<<s.BITS_FOR_METHOD_TYPE+s.BITS_FOR_OCCURRENCE_IDX;function c(t){try{if(!0===this.outputCst){r.apply(this,t);var e=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(e),e}return r.apply(this,t)}catch(t){return this.invokeRuleCatch(t,n,a)}finally{this.ruleFinallyStateUpdate()}}this.ruleShortNameIdx++,this.shortRuleNameToFull[h]=t,this.fullRuleNameToShort[t]=h;var l=function(e,s){return void 0===e&&(e=0),this.ruleInvocationStateUpdate(h,t,e),c.call(this,s)};return l.ruleName=t,l.originalGrammarAction=r,l},t.prototype.invokeRuleCatch=function(t,e,s){var i=1===this.RULE_STACK.length,n=e&&!this.isBackTracking()&&this.recoveryEnabled;if(r.isRecognitionException(t)){var o=t;if(n){var a,h=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(h))return o.resyncedTokens=this.reSyncTo(h),this.outputCst?((a=this.CST_STACK[this.CST_STACK.length-1]).recoveredNode=!0,a):s();throw this.outputCst&&((a=this.CST_STACK[this.CST_STACK.length-1]).recoveredNode=!0,o.partialCstResult=a),o}if(i)return this.moveToTerminatedState(),s();throw o}throw t},t.prototype.optionInternal=function(t,e){var r=this.getKeyForAutomaticLookahead(s.OPTION_IDX,e);return this.optionInternalLogic(t,e,r)},t.prototype.optionInternalLogic=function(t,e,s){var r,i,n=this,o=this.getLaFuncFromCache(s);if(void 0!==t.DEF){if(r=t.DEF,void 0!==(i=t.GATE)){var a=o;o=function(){return i.call(n)&&a.call(n)}}}else r=t;if(!0===o.call(this))return r.call(this)},t.prototype.atLeastOneInternal=function(t,e){var r=this.getKeyForAutomaticLookahead(s.AT_LEAST_ONE_IDX,t);return this.atLeastOneInternalLogic(t,e,r)},t.prototype.atLeastOneInternalLogic=function(t,e,r){var o,a,h=this,c=this.getLaFuncFromCache(r);if(void 0!==e.DEF){if(o=e.DEF,void 0!==(a=e.GATE)){var l=c;c=function(){return a.call(h)&&l.call(h)}}}else o=e;if(!0!==c.call(this))throw this.raiseEarlyExitException(t,i.PROD_TYPE.REPETITION_MANDATORY,e.ERR_MSG);for(var u=this.doSingleRepetition(o);!0===c.call(this)&&!0===u;)u=this.doSingleRepetition(o);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[t,e],c,s.AT_LEAST_ONE_IDX,t,n.NextTerminalAfterAtLeastOneWalker)},t.prototype.atLeastOneSepFirstInternal=function(t,e){var r=this.getKeyForAutomaticLookahead(s.AT_LEAST_ONE_SEP_IDX,t);this.atLeastOneSepFirstInternalLogic(t,e,r)},t.prototype.atLeastOneSepFirstInternalLogic=function(t,e,r){var o=this,a=e.DEF,h=e.SEP;if(!0!==this.getLaFuncFromCache(r).call(this))throw this.raiseEarlyExitException(t,i.PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR,e.ERR_MSG);a.call(this);for(var c=function(){return o.tokenMatcher(o.LA(1),h)};!0===this.tokenMatcher(this.LA(1),h);)this.CONSUME(h),a.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,h,c,a,n.NextTerminalAfterAtLeastOneSepWalker],c,s.AT_LEAST_ONE_SEP_IDX,t,n.NextTerminalAfterAtLeastOneSepWalker)},t.prototype.manyInternal=function(t,e){var r=this.getKeyForAutomaticLookahead(s.MANY_IDX,t);return this.manyInternalLogic(t,e,r)},t.prototype.manyInternalLogic=function(t,e,r){var i,o,a=this,h=this.getLaFuncFromCache(r);if(void 0!==e.DEF){if(i=e.DEF,void 0!==(o=e.GATE)){var c=h;h=function(){return o.call(a)&&c.call(a)}}}else i=e;for(var l=!0;!0===h.call(this)&&!0===l;)l=this.doSingleRepetition(i);this.attemptInRepetitionRecovery(this.manyInternal,[t,e],h,s.MANY_IDX,t,n.NextTerminalAfterManyWalker,l)},t.prototype.manySepFirstInternal=function(t,e){var r=this.getKeyForAutomaticLookahead(s.MANY_SEP_IDX,t);this.manySepFirstInternalLogic(t,e,r)},t.prototype.manySepFirstInternalLogic=function(t,e,r){var i=this,o=e.DEF,a=e.SEP;if(!0===this.getLaFuncFromCache(r).call(this)){o.call(this);for(var h=function(){return i.tokenMatcher(i.LA(1),a)};!0===this.tokenMatcher(this.LA(1),a);)this.CONSUME(a),o.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,a,h,o,n.NextTerminalAfterManySepWalker],h,s.MANY_SEP_IDX,t,n.NextTerminalAfterManySepWalker)}},t.prototype.repetitionSepSecondInternal=function(t,e,r,i,n){for(;r();)this.CONSUME(e),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,e,r,i,n],r,s.AT_LEAST_ONE_SEP_IDX,t,n)},t.prototype.doSingleRepetition=function(t){var e=this.getLexerPosition();return t.call(this),this.getLexerPosition()>e},t.prototype.orInternal=function(t,r){var i=this.getKeyForAutomaticLookahead(s.OR_IDX,r),n=e.isArray(t)?t:t.DEF,o=this.getLaFuncFromCache(i).call(this,n);if(void 0!==o)return n[o].ALT.call(this);this.raiseNoAltException(r,t.ERR_MSG)},t.prototype.ruleFinallyStateUpdate=function(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),0===this.RULE_STACK.length&&!1===this.isAtEndOfInput()){var t=this.LA(1),e=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:t,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new r.NotAllInputParsedException(e,t))}},t.prototype.subruleInternal=function(t,e,s){var r;try{var i=void 0!==s?s.ARGS:void 0;return r=t.call(this,e,i),this.cstPostNonTerminal(r,void 0!==s&&void 0!==s.LABEL?s.LABEL:t.ruleName),r}catch(e){this.subruleInternalError(e,s,t.ruleName)}},t.prototype.subruleInternalError=function(t,e,s){throw r.isRecognitionException(t)&&void 0!==t.partialCstResult&&(this.cstPostNonTerminal(t.partialCstResult,void 0!==e&&void 0!==e.LABEL?e.LABEL:s),delete t.partialCstResult),t},t.prototype.consumeInternal=function(t,e,s){var r;try{var i=this.LA(1);!0===this.tokenMatcher(i,t)?(this.consumeToken(),r=i):this.consumeInternalError(t,i,s)}catch(s){r=this.consumeInternalRecovery(t,e,s)}return this.cstPostTerminal(void 0!==s&&void 0!==s.LABEL?s.LABEL:t.name,r),r},t.prototype.consumeInternalError=function(t,e,s){var i,n=this.LA(0);throw i=void 0!==s&&s.ERR_MSG?s.ERR_MSG:this.errorMessageProvider.buildMismatchTokenMessage({expected:t,actual:e,previous:n,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new r.MismatchedTokenException(i,e,n))},t.prototype.consumeInternalRecovery=function(t,e,s){if(!this.recoveryEnabled||"MismatchedTokenException"!==s.name||this.isBackTracking())throw s;var r=this.getFollowsForInRuleRecovery(t,e);try{return this.tryInRuleRecovery(t,r)}catch(t){throw t.name===a.IN_RULE_RECOVERY_EXCEPTION?s:t}},t.prototype.saveRecogState=function(){var t=this.errors,s=e.cloneArr(this.RULE_STACK);return{errors:t,lexerState:this.exportLexerState(),RULE_STACK:s,CST_STACK:this.CST_STACK}},t.prototype.reloadRecogState=function(t){this.errors=t.errors,this.importLexerState(t.lexerState),this.RULE_STACK=t.RULE_STACK},t.prototype.ruleInvocationStateUpdate=function(t,e,s){this.RULE_OCCURRENCE_STACK.push(s),this.RULE_STACK.push(t),this.cstInvocationStateUpdate(e,t)},t.prototype.isBackTracking=function(){return 0!==this.isBackTrackingStack.length},t.prototype.getCurrRuleFullName=function(){var t=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[t]},t.prototype.shortRuleNameToFullName=function(t){return this.shortRuleNameToFull[t]},t.prototype.isAtEndOfInput=function(){return this.tokenMatcher(this.LA(1),h.EOF)},t.prototype.reset=function(){this.resetLexerState(),this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]},t}();t.RecognizerEngine=u})),yN=LP((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorHandler=void 0;var e=oN(),s=UP(),r=rN(),i=xN(),n=function(){function t(){}return t.prototype.initErrorHandler=function(t){this._errors=[],this.errorMessageProvider=s.has(t,"errorMessageProvider")?t.errorMessageProvider:i.DEFAULT_PARSER_CONFIG.errorMessageProvider},t.prototype.SAVE_ERROR=function(t){if(e.isRecognitionException(t))return t.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:s.cloneArr(this.RULE_OCCURRENCE_STACK)},this._errors.push(t),t;throw Error("Trying to save an Error which is not a RecognitionException")},Object.defineProperty(t.prototype,"errors",{get:function(){return s.cloneArr(this._errors)},set:function(t){this._errors=t},enumerable:!1,configurable:!0}),t.prototype.raiseEarlyExitException=function(t,s,i){for(var n=this.getCurrRuleFullName(),o=this.getGAstProductions()[n],a=r.getLookaheadPathsForOptionalProd(t,o,s,this.maxLookahead)[0],h=[],c=1;c<=this.maxLookahead;c++)h.push(this.LA(c));var l=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:a,actual:h,previous:this.LA(0),customUserDescription:i,ruleName:n});throw this.SAVE_ERROR(new e.EarlyExitException(l,this.LA(1),this.LA(0)))},t.prototype.raiseNoAltException=function(t,s){for(var i=this.getCurrRuleFullName(),n=this.getGAstProductions()[i],o=r.getLookaheadPathsForOr(t,n,this.maxLookahead),a=[],h=1;h<=this.maxLookahead;h++)a.push(this.LA(h));var c=this.LA(0),l=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:o,actual:a,previous:c,customUserDescription:s,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new e.NoViableAltException(l,this.LA(1),c))},t}();t.ErrorHandler=n})),TN=LP((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ContentAssist=void 0;var e=sN(),s=UP(),r=function(){function t(){}return t.prototype.initContentAssist=function(){},t.prototype.computeContentAssist=function(t,r){var i=this.gastProductionsCache[t];if(s.isUndefined(i))throw Error("Rule ->"+t+"<- does not exist in this grammar.");return e.nextPossibleTokensAfter([i],r,this.tokenMatcher,this.maxLookahead)},t.prototype.getNextPossibleTokenTypes=function(t){var r=s.first(t.ruleStack),i=this.getGAstProductions()[r];return new e.NextAfterTokenWalker(i,t).startWalking()},t}();t.ContentAssist=r})),vN=LP((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GastRecorder=void 0;var e=UP(),s=XP(),r=WP(),i=zP(),n=YP(),o=xN(),a=hN(),h={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(h);var c=Math.pow(2,a.BITS_FOR_OCCURRENCE_IDX)-1,l=n.createToken({name:"RECORDING_PHASE_TOKEN",pattern:r.Lexer.NA});i.augmentTokenTypes([l]);var u=n.createTokenInstance(l,"This IToken indicates the Parser is in Recording Phase\n\tSee: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details",-1,-1,-1,-1,-1,-1);Object.freeze(u);var p={name:"This CSTNode indicates the Parser is in Recording Phase\n\tSee: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details",children:{}},d=function(){function t(){}return t.prototype.initGastRecorder=function(t){this.recordingProdStack=[],this.RECORDING_PHASE=!1},t.prototype.enableRecording=function(){var t=this;this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",(function(){for(var e=function(e){var s=e>0?e:"";t["CONSUME"+s]=function(t,s){return this.consumeInternalRecord(t,e,s)},t["SUBRULE"+s]=function(t,s){return this.subruleInternalRecord(t,e,s)},t["OPTION"+s]=function(t){return this.optionInternalRecord(t,e)},t["OR"+s]=function(t){return this.orInternalRecord(t,e)},t["MANY"+s]=function(t){this.manyInternalRecord(e,t)},t["MANY_SEP"+s]=function(t){this.manySepFirstInternalRecord(e,t)},t["AT_LEAST_ONE"+s]=function(t){this.atLeastOneInternalRecord(e,t)},t["AT_LEAST_ONE_SEP"+s]=function(t){this.atLeastOneSepFirstInternalRecord(e,t)}},s=0;s<10;s++)e(s);t.consume=function(t,e,s){return this.consumeInternalRecord(e,t,s)},t.subrule=function(t,e,s){return this.subruleInternalRecord(e,t,s)},t.option=function(t,e){return this.optionInternalRecord(e,t)},t.or=function(t,e){return this.orInternalRecord(e,t)},t.many=function(t,e){this.manyInternalRecord(t,e)},t.atLeastOne=function(t,e){this.atLeastOneInternalRecord(t,e)},t.ACTION=t.ACTION_RECORD,t.BACKTRACK=t.BACKTRACK_RECORD,t.LA=t.LA_RECORD}))},t.prototype.disableRecording=function(){var t=this;this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",(function(){for(var e=0;e<10;e++){var s=e>0?e:"";delete t["CONSUME"+s],delete t["SUBRULE"+s],delete t["OPTION"+s],delete t["OR"+s],delete t["MANY"+s],delete t["MANY_SEP"+s],delete t["AT_LEAST_ONE"+s],delete t["AT_LEAST_ONE_SEP"+s]}delete t.consume,delete t.subrule,delete t.option,delete t.or,delete t.many,delete t.atLeastOne,delete t.ACTION,delete t.BACKTRACK,delete t.LA}))},t.prototype.ACTION_RECORD=function(t){},t.prototype.BACKTRACK_RECORD=function(t,e){return function(){return!0}},t.prototype.LA_RECORD=function(t){return o.END_OF_FILE},t.prototype.topLevelRuleRecord=function(t,e){try{var r=new s.Rule({definition:[],name:t});return r.name=t,this.recordingProdStack.push(r),e.call(this),this.recordingProdStack.pop(),r}catch(t){if(!0!==t.KNOWN_RECORDER_ERROR)try{t.message=t.message+'\n\t This error was thrown during the "grammar recording phase" For more info see:\n\thttps://chevrotain.io/docs/guide/internals.html#grammar-recording'}catch(e){throw t}throw t}},t.prototype.optionInternalRecord=function(t,e){return m.call(this,s.Option,t,e)},t.prototype.atLeastOneInternalRecord=function(t,e){m.call(this,s.RepetitionMandatory,e,t)},t.prototype.atLeastOneSepFirstInternalRecord=function(t,e){m.call(this,s.RepetitionMandatoryWithSeparator,e,t,true)},t.prototype.manyInternalRecord=function(t,e){m.call(this,s.Repetition,e,t)},t.prototype.manySepFirstInternalRecord=function(t,e){m.call(this,s.RepetitionWithSeparator,e,t,true)},t.prototype.orInternalRecord=function(t,e){return f.call(this,t,e)},t.prototype.subruleInternalRecord=function(t,r,i){if(y(r),!t||!1===e.has(t,"ruleName")){var n=new Error("<SUBRULE"+g(r)+"> argument is invalid expecting a Parser method reference but got: <"+JSON.stringify(t)+">\n inside top level rule: <"+this.recordingProdStack[0].name+">");throw n.KNOWN_RECORDER_ERROR=!0,n}var o=e.peek(this.recordingProdStack),a=t.ruleName,c=new s.NonTerminal({idx:r,nonTerminalName:a,referencedRule:void 0});return o.definition.push(c),this.outputCst?p:h},t.prototype.consumeInternalRecord=function(t,r,n){if(y(r),!i.hasShortKeyProperty(t)){var o=new Error("<CONSUME"+g(r)+"> argument is invalid expecting a TokenType reference but got: <"+JSON.stringify(t)+">\n inside top level rule: <"+this.recordingProdStack[0].name+">");throw o.KNOWN_RECORDER_ERROR=!0,o}var a=e.peek(this.recordingProdStack),h=new s.Terminal({idx:r,terminalType:t});return a.definition.push(h),u},t}();function m(t,s,r,i){void 0===i&&(i=!1),y(r);var n=e.peek(this.recordingProdStack),o=e.isFunction(s)?s:s.DEF,a=new t({definition:[],idx:r});return i&&(a.separator=s.SEP),e.has(s,"MAX_LOOKAHEAD")&&(a.maxLookahead=s.MAX_LOOKAHEAD),this.recordingProdStack.push(a),o.call(this),n.definition.push(a),this.recordingProdStack.pop(),h}function f(t,r){var i=this;y(r);var n=e.peek(this.recordingProdStack),o=!1===e.isArray(t),a=!1===o?t:t.DEF,c=new s.Alternation({definition:[],idx:r,ignoreAmbiguities:o&&!0===t.IGNORE_AMBIGUITIES});e.has(t,"MAX_LOOKAHEAD")&&(c.maxLookahead=t.MAX_LOOKAHEAD);var l=e.some(a,(function(t){return e.isFunction(t.GATE)}));return c.hasPredicates=l,n.definition.push(c),e.forEach(a,(function(t){var r=new s.Alternative({definition:[]});c.definition.push(r),e.has(t,"IGNORE_AMBIGUITIES")?r.ignoreAmbiguities=t.IGNORE_AMBIGUITIES:e.has(t,"GATE")&&(r.ignoreAmbiguities=!0),i.recordingProdStack.push(r),t.ALT.call(i),i.recordingProdStack.pop()})),h}function g(t){return 0===t?"":""+t}function y(t){if(t<0||t>c){var e=new Error("Invalid DSL Method idx value: <"+t+">\n\tIdx value must be a none negative value smaller than "+(c+1));throw e.KNOWN_RECORDER_ERROR=!0,e}}t.GastRecorder=d})),bN=LP((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PerformanceTracer=void 0;var e=UP(),s=xN(),r=function(){function t(){}return t.prototype.initPerformanceTracer=function(t){if(e.has(t,"traceInitPerf")){var r=t.traceInitPerf,i="number"==typeof r;this.traceInitMaxIdent=i?r:1/0,this.traceInitPerf=i?r>0:r}else this.traceInitMaxIdent=0,this.traceInitPerf=s.DEFAULT_PARSER_CONFIG.traceInitPerf;this.traceInitIndent=-1},t.prototype.TRACE_INIT=function(t,s){if(!0===this.traceInitPerf){this.traceInitIndent++;var r=new Array(this.traceInitIndent+1).join("\t");this.traceInitIndent<this.traceInitMaxIdent&&console.log(r+"--\x3e <"+t+">");var i=e.timer(s),n=i.time,o=i.value,a=n>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&a(r+"<-- <"+t+"> time: "+n+"ms"),this.traceInitIndent--,o}return s()},t}();t.PerformanceTracer=r})),wN=LP((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.applyMixins=void 0,t.applyMixins=function(t,e){e.forEach((function(e){var s=e.prototype;Object.getOwnPropertyNames(s).forEach((function(r){if("constructor"!==r){var i=Object.getOwnPropertyDescriptor(s,r);i&&(i.get||i.set)?Object.defineProperty(t.prototype,r,i):t.prototype[r]=e.prototype[r]}}))}))}})),xN=LP((t=>{var e,s=t&&t.__extends||(e=function(t,s){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])})(t,s)},function(t,s){if("function"!=typeof s&&null!==s)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function r(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(r.prototype=s.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.EmbeddedActionsParser=t.CstParser=t.Parser=t.EMPTY_ALT=t.ParserDefinitionErrorType=t.DEFAULT_RULE_CONFIG=t.DEFAULT_PARSER_CONFIG=t.END_OF_FILE=void 0;var r=UP(),i=QP(),n=YP(),o=tN(),a=nN(),h=aN(),c=cN(),l=dN(),u=mN(),p=fN(),d=gN(),m=yN(),f=TN(),g=vN(),y=bN(),T=wN();t.END_OF_FILE=n.createTokenInstance(n.EOF,"",NaN,NaN,NaN,NaN,NaN,NaN),Object.freeze(t.END_OF_FILE),t.DEFAULT_PARSER_CONFIG=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:o.defaultParserErrorProvider,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),t.DEFAULT_RULE_CONFIG=Object.freeze({recoveryValueFunc:function(){},resyncEnabled:!0}),function(t){t[t.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",t[t.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",t[t.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",t[t.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",t[t.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",t[t.LEFT_RECURSION=5]="LEFT_RECURSION",t[t.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",t[t.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",t[t.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",t[t.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",t[t.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",t[t.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",t[t.TOO_MANY_ALTS=12]="TOO_MANY_ALTS"}(t.ParserDefinitionErrorType||(t.ParserDefinitionErrorType={})),t.EMPTY_ALT=function(t){return void 0===t&&(t=void 0),function(){return t}};var v=function(){function e(e,s){this.definitionErrors=[],this.selfAnalysisDone=!1;var i=this;if(i.initErrorHandler(s),i.initLexerAdapter(),i.initLooksAhead(s),i.initRecognizerEngine(e,s),i.initRecoverable(s),i.initTreeBuilder(s),i.initContentAssist(),i.initGastRecorder(s),i.initPerformanceTracer(s),r.has(s,"ignoredIssues"))throw new Error("The <ignoredIssues> IParserConfig property has been deprecated.\n\tPlease use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.\n\tSee: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES\n\tFor further details.");this.skipValidations=r.has(s,"skipValidations")?s.skipValidations:t.DEFAULT_PARSER_CONFIG.skipValidations}return e.performSelfAnalysis=function(t){throw Error("The **static** `performSelfAnalysis` method has been deprecated.\t\nUse the **instance** method with the same name instead.")},e.prototype.performSelfAnalysis=function(){var t=this;this.TRACE_INIT("performSelfAnalysis",(function(){var s;t.selfAnalysisDone=!0;var n=t.className;t.TRACE_INIT("toFastProps",(function(){r.toFastProperties(t)})),t.TRACE_INIT("Grammar Recording",(function(){try{t.enableRecording(),r.forEach(t.definedRulesNames,(function(e){var s=t[e].originalGrammarAction,r=void 0;t.TRACE_INIT(e+" Rule",(function(){r=t.topLevelRuleRecord(e,s)})),t.gastProductionsCache[e]=r}))}finally{t.disableRecording()}}));var h=[];if(t.TRACE_INIT("Grammar Resolving",(function(){h=a.resolveGrammar({rules:r.values(t.gastProductionsCache)}),t.definitionErrors=t.definitionErrors.concat(h)})),t.TRACE_INIT("Grammar Validations",(function(){if(r.isEmpty(h)&&!1===t.skipValidations){var e=a.validateGrammar({rules:r.values(t.gastProductionsCache),maxLookahead:t.maxLookahead,tokenTypes:r.values(t.tokensMap),errMsgProvider:o.defaultGrammarValidatorErrorProvider,grammarName:n});t.definitionErrors=t.definitionErrors.concat(e)}})),r.isEmpty(t.definitionErrors)&&(t.recoveryEnabled&&t.TRACE_INIT("computeAllProdsFollows",(function(){var e=i.computeAllProdsFollows(r.values(t.gastProductionsCache));t.resyncFollows=e})),t.TRACE_INIT("ComputeLookaheadFunctions",(function(){t.preComputeLookaheadFunctions(r.values(t.gastProductionsCache))}))),!e.DEFER_DEFINITION_ERRORS_HANDLING&&!r.isEmpty(t.definitionErrors))throw s=r.map(t.definitionErrors,(function(t){return t.message})),new Error("Parser Definition Errors detected:\n "+s.join("\n-------------------------------\n"))}))},e.DEFER_DEFINITION_ERRORS_HANDLING=!1,e}();t.Parser=v,T.applyMixins(v,[h.Recoverable,c.LooksAhead,l.TreeBuilder,u.LexerAdapter,d.RecognizerEngine,p.RecognizerApi,m.ErrorHandler,f.ContentAssist,g.GastRecorder,y.PerformanceTracer]);var b=function(e){function i(s,i){void 0===i&&(i=t.DEFAULT_PARSER_CONFIG);var n=r.cloneObj(i);return n.outputCst=!0,e.call(this,s,n)||this}return s(i,e),i}(v);t.CstParser=b;var w=function(e){function i(s,i){void 0===i&&(i=t.DEFAULT_PARSER_CONFIG);var n=r.cloneObj(i);return n.outputCst=!1,e.call(this,s,n)||this}return s(i,e),i}(v);t.EmbeddedActionsParser=w})),IN=LP((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createSyntaxDiagramsCode=void 0;var e=kP();t.createSyntaxDiagramsCode=function(t,s){var r=void 0===s?{}:s,i=r.resourceBase,n=void 0===i?"https://unpkg.com/chevrotain@"+e.VERSION+"/diagrams/":i,o=r.css;return'\n\x3c!-- This is a generated file --\x3e\n<!DOCTYPE html>\n<meta charset="utf-8">\n<style>\n  body {\n    background-color: hsl(30, 20%, 95%)\n  }\n</style>\n\n'+("\n<link rel='stylesheet' href='"+(void 0===o?"https://unpkg.com/chevrotain@"+e.VERSION+"/diagrams/diagrams.css":o)+"'>\n")+("\n<script src='"+n+"vendor/railroad-diagrams.js'><\/script>\n<script src='"+n+"src/diagrams_builder.js'><\/script>\n<script src='"+n+"src/diagrams_behavior.js'><\/script>\n<script src='"+n+"src/main.js'><\/script>\n")+'\n<div id="diagrams" align="center"></div>\n'+("\n<script>\n    window.serializedGrammar = "+JSON.stringify(t,null,"  ")+";\n<\/script>\n")+'\n<script>\n    var diagramsDiv = document.getElementById("diagrams");\n    main.drawDiagramsFromSerializedGrammar(serializedGrammar, diagramsDiv);\n<\/script>\n'}})),EN=LP((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Parser=t.createSyntaxDiagramsCode=t.clearCache=t.GAstVisitor=t.serializeProduction=t.serializeGrammar=t.Terminal=t.Rule=t.RepetitionWithSeparator=t.RepetitionMandatoryWithSeparator=t.RepetitionMandatory=t.Repetition=t.Option=t.NonTerminal=t.Alternative=t.Alternation=t.defaultLexerErrorProvider=t.NoViableAltException=t.NotAllInputParsedException=t.MismatchedTokenException=t.isRecognitionException=t.EarlyExitException=t.defaultParserErrorProvider=t.tokenName=t.tokenMatcher=t.tokenLabel=t.EOF=t.createTokenInstance=t.createToken=t.LexerDefinitionErrorType=t.Lexer=t.EMPTY_ALT=t.ParserDefinitionErrorType=t.EmbeddedActionsParser=t.CstParser=t.VERSION=void 0;var e=kP();Object.defineProperty(t,"VERSION",{enumerable:!0,get:function(){return e.VERSION}});var s=xN();Object.defineProperty(t,"CstParser",{enumerable:!0,get:function(){return s.CstParser}}),Object.defineProperty(t,"EmbeddedActionsParser",{enumerable:!0,get:function(){return s.EmbeddedActionsParser}}),Object.defineProperty(t,"ParserDefinitionErrorType",{enumerable:!0,get:function(){return s.ParserDefinitionErrorType}}),Object.defineProperty(t,"EMPTY_ALT",{enumerable:!0,get:function(){return s.EMPTY_ALT}});var r=WP();Object.defineProperty(t,"Lexer",{enumerable:!0,get:function(){return r.Lexer}}),Object.defineProperty(t,"LexerDefinitionErrorType",{enumerable:!0,get:function(){return r.LexerDefinitionErrorType}});var i=YP();Object.defineProperty(t,"createToken",{enumerable:!0,get:function(){return i.createToken}}),Object.defineProperty(t,"createTokenInstance",{enumerable:!0,get:function(){return i.createTokenInstance}}),Object.defineProperty(t,"EOF",{enumerable:!0,get:function(){return i.EOF}}),Object.defineProperty(t,"tokenLabel",{enumerable:!0,get:function(){return i.tokenLabel}}),Object.defineProperty(t,"tokenMatcher",{enumerable:!0,get:function(){return i.tokenMatcher}}),Object.defineProperty(t,"tokenName",{enumerable:!0,get:function(){return i.tokenName}});var n=tN();Object.defineProperty(t,"defaultParserErrorProvider",{enumerable:!0,get:function(){return n.defaultParserErrorProvider}});var o=oN();Object.defineProperty(t,"EarlyExitException",{enumerable:!0,get:function(){return o.EarlyExitException}}),Object.defineProperty(t,"isRecognitionException",{enumerable:!0,get:function(){return o.isRecognitionException}}),Object.defineProperty(t,"MismatchedTokenException",{enumerable:!0,get:function(){return o.MismatchedTokenException}}),Object.defineProperty(t,"NotAllInputParsedException",{enumerable:!0,get:function(){return o.NotAllInputParsedException}}),Object.defineProperty(t,"NoViableAltException",{enumerable:!0,get:function(){return o.NoViableAltException}});var a=VP();Object.defineProperty(t,"defaultLexerErrorProvider",{enumerable:!0,get:function(){return a.defaultLexerErrorProvider}});var h=XP();Object.defineProperty(t,"Alternation",{enumerable:!0,get:function(){return h.Alternation}}),Object.defineProperty(t,"Alternative",{enumerable:!0,get:function(){return h.Alternative}}),Object.defineProperty(t,"NonTerminal",{enumerable:!0,get:function(){return h.NonTerminal}}),Object.defineProperty(t,"Option",{enumerable:!0,get:function(){return h.Option}}),Object.defineProperty(t,"Repetition",{enumerable:!0,get:function(){return h.Repetition}}),Object.defineProperty(t,"RepetitionMandatory",{enumerable:!0,get:function(){return h.RepetitionMandatory}}),Object.defineProperty(t,"RepetitionMandatoryWithSeparator",{enumerable:!0,get:function(){return h.RepetitionMandatoryWithSeparator}}),Object.defineProperty(t,"RepetitionWithSeparator",{enumerable:!0,get:function(){return h.RepetitionWithSeparator}}),Object.defineProperty(t,"Rule",{enumerable:!0,get:function(){return h.Rule}}),Object.defineProperty(t,"Terminal",{enumerable:!0,get:function(){return h.Terminal}});var c=XP();Object.defineProperty(t,"serializeGrammar",{enumerable:!0,get:function(){return c.serializeGrammar}}),Object.defineProperty(t,"serializeProduction",{enumerable:!0,get:function(){return c.serializeProduction}});var l=KP();Object.defineProperty(t,"GAstVisitor",{enumerable:!0,get:function(){return l.GAstVisitor}}),t.clearCache=function(){console.warn("The clearCache function was 'soft' removed from the Chevrotain API.\n\t It performs no action other than printing this message.\n\t Please avoid using it as it will be completely removed in the future")};var u=IN();Object.defineProperty(t,"createSyntaxDiagramsCode",{enumerable:!0,get:function(){return u.createSyntaxDiagramsCode}});var p=function(){throw new Error("The Parser class has been deprecated, use CstParser or EmbeddedActionsParser instead.\nSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_7-0-0")};t.Parser=p}))();class SN extends Qc{constructor(t){if(super(t),void 0===EN)throw Error("THREE.VRMLLoader: External library chevrotain.min.js required.")}load(t,e,s,r){const i=this,n=""===i.path?Rl.extractUrlBase(t):i.path,o=new el(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(t,(function(s){try{e(i.parse(s,n))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),s,r)}parse(t,e){const s={};function r(t){t.DEF&&(s[t.DEF]=t);const e=t.fields;for(let t=0,s=e.length;t<s;t++){const s=e[t];if("node"===s.type){const t=s.values;for(let e=0,s=t.length;e<s;e++)r(t[e])}}}function i(t){return t.USE?function(t){const e=i(s[t]);return e.isObject3D||e.isMaterial?e.clone():e}(t.USE):(void 0!==t.build||(t.build=function(t){const e=t.name;let s;switch(e){case"Group":case"Transform":case"Collision":s=function(t){const e=new ko,s=t.fields;for(let t=0,r=s.length;t<r;t++){const r=s[t],i=r.name,n=r.values;switch(i){case"bboxCenter":case"bboxSize":case"center":break;case"children":a(n,e);break;case"collide":break;case"rotation":const t=new Ge(n[0],n[1],n[2]),s=n[3];e.quaternion.setFromAxisAngle(t,s);break;case"scale":e.scale.set(n[0],n[1],n[2]);break;case"scaleOrientation":break;case"translation":e.position.set(n[0],n[1],n[2]);break;case"proxy":break;default:console.warn("THREE.VRMLLoader: Unknown field:",i)}}return e}(t);break;case"Background":s=function(t){const e=new ko;let s,r,i,n;const o=t.fields;for(let t=0,e=o.length;t<e;t++){const e=o[t],a=e.name,h=e.values;switch(a){case"groundAngle":s=h;break;case"groundColor":r=h;break;case"backUrl":case"bottomUrl":case"frontUrl":case"leftUrl":case"rightUrl":case"topUrl":break;case"skyAngle":i=h;break;case"skyColor":n=h;break;default:console.warn("THREE.VRMLLoader: Unknown field:",a)}}const a=1e4;if(n){const t=new gc(a,32,16),s=new rr({fog:!1,side:1,depthWrite:!1,depthTest:!1});n.length>3?(C(t,a,i,R(n),!0),s.vertexColors=!0):s.color.setRGB(n[0],n[1],n[2]);const r=new jr(t,s);e.add(r)}if(r&&r.length>0){const t=new gc(a,32,16,0,2*Math.PI,.5*Math.PI,1.5*Math.PI),i=new rr({fog:!1,side:1,vertexColors:!0,depthWrite:!1,depthTest:!1});C(t,a,s,R(r),!1);const n=new jr(t,i);e.add(n)}return e.renderOrder=-1/0,e}(t);break;case"Shape":s=function(t){const e=t.fields;let s,r,n=new rr({color:0});for(let t=0,r=e.length;t<r;t++){const r=e[t],o=r.name,a=r.values;switch(o){case"appearance":null!==a[0]&&(n=i(a[0]));break;case"geometry":null!==a[0]&&(s=i(a[0]));break;default:console.warn("THREE.VRMLLoader: Unknown field:",o)}}if(s&&s.attributes.position){const t=s._type;if("points"===t){const t=new Va({color:16777215});void 0!==s.attributes.color?t.vertexColors=!0:n.isMeshPhongMaterial&&t.color.copy(n.emissive),r=new Ka(s,t)}else if("line"===t){const t=new Ma({color:16777215});void 0!==s.attributes.color?t.vertexColors=!0:n.isMeshPhongMaterial&&t.color.copy(n.emissive),r=new ja(s,t)}else void 0!==s._solid&&(n.side=s._solid?0:2),void 0!==s.attributes.color&&(n.vertexColors=!0),r=new jr(s,n)}else r=new zs,r.visible=!1;return r}(t);break;case"Appearance":s=function(t){let e,s=new Cc;const r=t.fields;for(let t=0,n=r.length;t<n;t++){const n=r[t],o=n.name,a=n.values;switch(o){case"material":if(null!==a[0]){const t=i(a[0]);t.diffuseColor&&s.color.copy(t.diffuseColor),t.emissiveColor&&s.emissive.copy(t.emissiveColor),t.shininess&&(s.shininess=t.shininess),t.specularColor&&s.specular.copy(t.specularColor),t.transparency&&(s.opacity=1-t.transparency),t.transparency>0&&(s.transparent=!0)}else s=new rr({color:0});break;case"texture":const t=a[0];null!==t&&("ImageTexture"!==t.name&&"PixelTexture"!==t.name||(s.map=i(t)));break;case"textureTransform":null!==a[0]&&(e=i(a[0]));break;default:console.warn("THREE.VRMLLoader: Unknown field:",o)}}if(s.map){if(s.map.__type){switch(s.map.__type){case _N.INTENSITY_ALPHA:s.opacity=1;break;case _N.RGB:s.color.set(16777215);break;case _N.RGBA:s.color.set(16777215),s.opacity=1}delete s.map.__type}e&&(s.map.center.copy(e.center),s.map.rotation=e.rotation,s.map.repeat.copy(e.scale),s.map.offset.copy(e.translation))}return s}(t);break;case"Material":s=function(t){const e={},s=t.fields;for(let t=0,r=s.length;t<r;t++){const r=s[t],i=r.name,n=r.values;switch(i){case"ambientIntensity":break;case"diffuseColor":e.diffuseColor=new Ae(n[0],n[1],n[2]);break;case"emissiveColor":e.emissiveColor=new Ae(n[0],n[1],n[2]);break;case"shininess":e.shininess=n[0];break;case"specularColor":e.emissiveColor=new Ae(n[0],n[1],n[2]);break;case"transparency":e.transparency=n[0];break;default:console.warn("THREE.VRMLLoader: Unknown field:",i)}}return e}(t);break;case"ImageTexture":s=function(t){let e,s=G,r=G;const i=t.fields;for(let t=0,n=i.length;t<n;t++){const n=i[t],o=n.name,a=n.values;switch(o){case"url":const t=a[0];t&&(e=O.load(t));break;case"repeatS":!1===a[0]&&(s=j);break;case"repeatT":!1===a[0]&&(r=j);break;default:console.warn("THREE.VRMLLoader: Unknown field:",o)}}e&&(e.wrapS=s,e.wrapT=r);return e}(t);break;case"PixelTexture":s=function(t){let e,s=G,r=G;const i=t.fields;for(let t=0,a=i.length;t<a;t++){const a=i[t],h=a.name,c=a.values;switch(h){case"image":const t=c[0],i=c[1],a=o(c[2]),l=new Uint8Array(4*t*i),u={r:0,g:0,b:0,a:0};for(let t=3,e=0,s=c.length;t<s;t++,e++){n(c[t],a,u);const s=4*e;l[s+0]=u.r,l[s+1]=u.g,l[s+2]=u.b,l[s+3]=u.a}e=new Ia(l,t,i),e.needsUpdate=!0,e.__type=a;break;case"repeatS":!1===c[0]&&(s=j);break;case"repeatT":!1===c[0]&&(r=j);break;default:console.warn("THREE.VRMLLoader: Unknown field:",h)}}e&&(e.wrapS=s,e.wrapT=r);return e}(t);break;case"TextureTransform":s=function(t){const e={center:new le,rotation:new le,scale:new le,translation:new le},s=t.fields;for(let t=0,r=s.length;t<r;t++){const r=s[t],i=r.name,n=r.values;switch(i){case"center":e.center.set(n[0],n[1]);break;case"rotation":e.rotation=n[0];break;case"scale":e.scale.set(n[0],n[1]);break;case"translation":e.translation.set(n[0],n[1]);break;default:console.warn("THREE.VRMLLoader: Unknown field:",i)}}return e}(t);break;case"IndexedFaceSet":s=function(t){let e,s,r,n,o,a,u,p,d=!0,m=!0,f=0,g=!0,y=!0;const T=t.fields;for(let t=0,h=T.length;t<h;t++){const h=T[t],c=h.name,l=h.values;switch(c){case"color":const t=l[0];null!==t&&(e=i(t));break;case"coord":const h=l[0];null!==h&&(s=i(h));break;case"normal":const T=l[0];null!==T&&(r=i(T));break;case"texCoord":const v=l[0];null!==v&&(n=i(v));break;case"ccw":d=l[0];break;case"colorIndex":o=l;break;case"colorPerVertex":g=l[0];break;case"convex":break;case"coordIndex":a=l;break;case"creaseAngle":f=l[0];break;case"normalIndex":u=l;break;case"normalPerVertex":y=l[0];break;case"solid":m=l[0];break;case"texCoordIndex":p=l;break;default:console.warn("THREE.VRMLLoader: Unknown field:",c)}}if(void 0===a)return console.warn("THREE.VRMLLoader: Missing coordIndex."),new Er;const w=h(a,d);let I,E,A;if(e)if(!0===g)if(o&&o.length>0){I=v(w,h(o,d),e,3)}else I=x(w,new fr(e,3));else if(o&&o.length>0){I=b(w,c(l(e,o),a))}else{I=b(w,c(e,a))}if(r)if(!0===y)if(u&&u.length>0){E=v(w,h(u,d),r,3)}else E=x(w,new fr(r,3));else if(u&&u.length>0){E=b(w,c(l(r,u),a))}else{E=b(w,c(r,a))}else E=S(w,s,f);if(n)if(p&&p.length>0){A=v(w,h(p,d),n,2)}else A=x(w,new fr(n,2));const R=new Er,C=x(w,new fr(s,3));R.setAttribute("position",C),R.setAttribute("normal",E),I&&R.setAttribute("color",I);A&&R.setAttribute("uv",A);return R._solid=m,R._type="mesh",R}(t);break;case"IndexedLineSet":s=function(t){let e,s,r,n,o=!0;const a=t.fields;for(let t=0,h=a.length;t<h;t++){const h=a[t],c=h.name,l=h.values;switch(c){case"color":const t=l[0];null!==t&&(e=i(t));break;case"coord":const a=l[0];null!==a&&(s=i(a));break;case"colorIndex":r=l;break;case"colorPerVertex":o=l[0];break;case"coordIndex":n=l;break;default:console.warn("THREE.VRMLLoader: Unknown field:",c)}}let h;const c=u(n);if(e)if(!0===o)if(r.length>0){h=v(c,u(r),e,3)}else h=x(c,new fr(e,3));else if(r.length>0){h=w(c,p(l(e,r),n))}else{h=w(c,p(e,n))}const d=new Er,m=x(c,new fr(s,3));d.setAttribute("position",m),h&&d.setAttribute("color",h);return d._type="line",d}(t);break;case"PointSet":s=function(t){let e,s;const r=t.fields;for(let t=0,n=r.length;t<n;t++){const n=r[t],o=n.name,a=n.values;switch(o){case"color":const t=a[0];null!==t&&(e=i(t));break;case"coord":const r=a[0];null!==r&&(s=i(r));break;default:console.warn("THREE.VRMLLoader: Unknown field:",o)}}const n=new Er;n.setAttribute("position",new fr(s,3)),e&&n.setAttribute("color",new fr(e,3));return n._type="points",n}(t);break;case"Box":s=function(t){const e=new Ge(2,2,2),s=t.fields;for(let t=0,r=s.length;t<r;t++){const r=s[t],i=r.name,n=r.values;switch(i){case"size":e.x=n[0],e.y=n[1],e.z=n[2];break;default:console.warn("THREE.VRMLLoader: Unknown field:",i)}}return new Vr(e.x,e.y,e.z)}(t);break;case"Cone":s=function(t){let e=1,s=2,r=!1;const i=t.fields;for(let t=0,n=i.length;t<n;t++){const n=i[t],o=n.name,a=n.values;switch(o){case"bottom":r=!a[0];break;case"bottomRadius":e=a[0];break;case"height":s=a[0];break;case"side":break;default:console.warn("THREE.VRMLLoader: Unknown field:",o)}}return new Rh(e,s,16,1,r)}(t);break;case"Cylinder":s=function(t){let e=1,s=2;const r=t.fields;for(let t=0,i=r.length;t<i;t++){const i=r[t],n=i.name,o=i.values;switch(n){case"bottom":break;case"radius":e=o[0];break;case"height":s=o[0];break;case"side":case"top":break;default:console.warn("THREE.VRMLLoader: Unknown field:",n)}}return new Ah(e,e,s,16,1)}(t);break;case"Sphere":s=function(t){let e=1;const s=t.fields;for(let t=0,r=s.length;t<r;t++){const r=s[t],i=r.name,n=r.values;switch(i){case"radius":e=n[0];break;default:console.warn("THREE.VRMLLoader: Unknown field:",i)}}return new gc(e,16,16)}(t);break;case"ElevationGrid":s=function(t){let e,s,r,n,o=!0,a=!0,h=!0,c=!0,l=0,u=2,p=2,d=1,m=1;const f=t.fields;for(let t=0,g=f.length;t<g;t++){const g=f[t],y=g.name,T=g.values;switch(y){case"color":const t=T[0];null!==t&&(e=i(t));break;case"normal":const f=T[0];null!==f&&(s=i(f));break;case"texCoord":const g=T[0];null!==g&&(r=i(g));break;case"height":n=T;break;case"ccw":c=T[0];break;case"colorPerVertex":o=T[0];break;case"creaseAngle":l=T[0];break;case"normalPerVertex":a=T[0];break;case"solid":h=T[0];break;case"xDimension":u=T[0];break;case"xSpacing":d=T[0];break;case"zDimension":p=T[0];break;case"zSpacing":m=T[0];break;default:console.warn("THREE.VRMLLoader: Unknown field:",y)}}const g=[],y=[],T=[],v=[];for(let t=0;t<p;t++)for(let i=0;i<u;i++){const h=t*u+i,c=d*t,l=n[h],f=m*i;if(g.push(c,l,f),e&&!0===o){const t=e[3*h+0],s=e[3*h+1],r=e[3*h+2];T.push(t,s,r)}if(s&&!0===a){const t=s[3*h+0],e=s[3*h+1],r=s[3*h+2];y.push(t,e,r)}if(r){const t=r[2*h+0],e=r[2*h+1];v.push(t,e)}else v.push(t/(u-1),i/(p-1))}const b=[];for(let t=0;t<u-1;t++)for(let e=0;e<p-1;e++){const s=t+e*u,r=t+(e+1)*u,i=t+1+(e+1)*u,n=t+1+e*u;!0===c?(b.push(s,i,r),b.push(i,s,n)):(b.push(s,r,i),b.push(i,n,s))}const w=x(b,new fr(g,3)),I=x(b,new fr(v,2));let E,A;if(e)if(!1===o){for(let t=0;t<u-1;t++)for(let s=0;s<p-1;s++){const r=t+s*(u-1),i=e[3*r+0],n=e[3*r+1],o=e[3*r+2];T.push(i,n,o),T.push(i,n,o),T.push(i,n,o),T.push(i,n,o),T.push(i,n,o),T.push(i,n,o)}E=new fr(T,3)}else E=x(b,new fr(T,3));if(s)if(!1===a){for(let t=0;t<u-1;t++)for(let e=0;e<p-1;e++){const r=t+e*(u-1),i=s[3*r+0],n=s[3*r+1],o=s[3*r+2];y.push(i,n,o),y.push(i,n,o),y.push(i,n,o),y.push(i,n,o),y.push(i,n,o),y.push(i,n,o)}A=new fr(y,3)}else A=x(b,new fr(y,3));else A=S(b,g,l);const R=new Er;R.setAttribute("position",w),R.setAttribute("normal",A),R.setAttribute("uv",I),E&&R.setAttribute("color",E);return R._solid=h,R._type="mesh",R}(t);break;case"Extrusion":s=function(t){let e,s,r=[1,1,1,-1,-1,-1,-1,1,1,1],i=[0,0,0,0,1,0],n=!0,o=!0,a=0,h=!0,c=!0;const l=t.fields;for(let t=0,u=l.length;t<u;t++){const u=l[t],p=u.name,d=u.values;switch(p){case"beginCap":n=d[0];break;case"ccw":o=d[0];break;case"convex":break;case"creaseAngle":a=d[0];break;case"crossSection":r=d;break;case"endCap":h=d[0];break;case"orientation":s=d;break;case"scale":e=d;break;case"solid":c=d[0];break;case"spine":i=d;break;default:console.warn("THREE.VRMLLoader: Unknown field:",p)}}const u=r[0]===r[r.length-2]&&r[1]===r[r.length-1],p=[],d=new Ge,m=new Ge,f=new Ge,g=new Ge,y=new Be;for(let t=0,n=0,o=0,a=i.length;t<a;t+=3,n+=2,o+=4){d.fromArray(i,t),m.x=e?e[n+0]:1,m.y=1,m.z=e?e[n+1]:1,f.x=s?s[o+0]:0,f.y=s?s[o+1]:0,f.z=s?s[o+2]:1;const a=s?s[o+3]:0;for(let t=0,e=r.length;t<e;t+=2)g.x=r[t+0],g.y=0,g.z=r[t+1],g.multiply(m),y.setFromAxisAngle(f,a),g.applyQuaternion(y),g.add(d),p.push(g.x,g.y,g.z)}const T=[],v=i.length/3,b=r.length/2;for(let t=0;t<v-1;t++)for(let e=0;e<b-1;e++){const s=e+t*b;let r=e+1+t*b;const i=e+(t+1)*b;let n=e+1+(t+1)*b;e===b-2&&!0===u&&(r=t*b,n=(t+1)*b),!0===o?(T.push(s,r,i),T.push(i,r,n)):(T.push(s,i,r),T.push(i,n,r))}if(!0===n||!0===h){const t=[];for(let e=0,s=r.length;e<s;e+=2)t.push(new le(r[e],r[e+1]));const e=ac.triangulateShape(t,[]),s=[];for(let t=0,r=e.length;t<r;t++){const r=e[t];s.push(r[0],r[1],r[2])}if(!0===n)for(let t=0,e=s.length;t<e;t+=3)!0===o?T.push(s[t+0],s[t+1],s[t+2]):T.push(s[t+0],s[t+2],s[t+1]);if(!0===h){const t=b*(v-1);for(let e=0,r=s.length;e<r;e+=3)!0===o?T.push(t+s[e+0],t+s[e+2],t+s[e+1]):T.push(t+s[e+0],t+s[e+1],t+s[e+2])}}const w=x(T,new fr(p,3)),I=S(T,p,a),E=new Er;return E.setAttribute("position",w),E.setAttribute("normal",I),E._solid=c,E._type="mesh",E}(t);break;case"Color":case"Coordinate":case"Normal":case"TextureCoordinate":s=function(t){return t.fields[0].values}(t);break;case"WorldInfo":s=function(t){const e={},s=t.fields;for(let t=0,r=s.length;t<r;t++){const r=s[t],i=r.name,n=r.values;switch(i){case"title":e.title=n[0];break;case"info":e.info=n;break;default:console.warn("THREE.VRMLLoader: Unknown field:",i)}}return e}(t);break;case"Anchor":case"Billboard":case"Inline":case"LOD":case"Switch":case"AudioClip":case"DirectionalLight":case"PointLight":case"Script":case"Sound":case"SpotLight":case"CylinderSensor":case"PlaneSensor":case"ProximitySensor":case"SphereSensor":case"TimeSensor":case"TouchSensor":case"VisibilitySensor":case"Text":case"FontStyle":case"MovieTexture":case"ColorInterpolator":case"CoordinateInterpolator":case"NormalInterpolator":case"OrientationInterpolator":case"PositionInterpolator":case"ScalarInterpolator":case"Fog":case"NavigationInfo":case"Viewpoint":break;default:console.warn("THREE.VRMLLoader: Unknown node:",e)}void 0!==s&&void 0!==t.DEF&&!0===s.hasOwnProperty("name")&&(s.name=t.DEF);return s}(t)),t.build)}function n(t,e,s){let r;switch(e){case _N.INTENSITY:r=parseInt(t),s.r=r,s.g=r,s.b=r,s.a=1;break;case _N.INTENSITY_ALPHA:r=parseInt("0x"+t.substring(2,4)),s.r=r,s.g=r,s.b=r,s.a=parseInt("0x"+t.substring(4,6));break;case _N.RGB:s.r=parseInt("0x"+t.substring(2,4)),s.g=parseInt("0x"+t.substring(4,6)),s.b=parseInt("0x"+t.substring(6,8)),s.a=1;break;case _N.RGBA:s.r=parseInt("0x"+t.substring(2,4)),s.g=parseInt("0x"+t.substring(4,6)),s.b=parseInt("0x"+t.substring(6,8)),s.a=parseInt("0x"+t.substring(8,10))}}function o(t){let e;switch(t){case 1:e=_N.INTENSITY;break;case 2:e=_N.INTENSITY_ALPHA;break;case 3:e=_N.RGB;break;case 4:e=_N.RGBA}return e}function a(t,e){for(let s=0,r=t.length;s<r;s++){const r=i(t[s]);r instanceof zs&&e.add(r)}}function h(t,e){const s=[];let r=0;for(let i=0,n=t.length;i<n;i++){const o=t[r],a=t[i+(e?1:2)],h=t[i+(e?2:1)];s.push(o,a,h),(-1===t[i+3]||i+3>=n)&&(i+=3,r=i+1)}return s}function c(t,e){const s=[];let r=0;for(let i=0,n=e.length;i<n;i++){const o=3*r,a=t[o],h=t[o+1],c=t[o+2];s.push(a,h,c),(-1===e[i+3]||i+3>=n)&&(i+=3,r++)}return s}function l(t,e){const s=[];for(let r=0,i=e.length;r<i;r++){const i=3*e[r],n=t[i],o=t[i+1],a=t[i+2];s.push(n,o,a)}return s}function u(t){const e=[];for(let s=0,r=t.length;s<r;s++){const i=t[s],n=t[s+1];e.push(i,n),(-1===t[s+2]||s+2>=r)&&(s+=2)}return e}function p(t,e){const s=[];let r=0;for(let i=0,n=e.length;i<n;i++){const o=3*r,a=t[o],h=t[o+1],c=t[o+2];s.push(a,h,c),(-1===e[i+2]||i+2>=n)&&(i+=2,r++)}return s}const d=new Ge,m=new Ge,f=new Ge,g=new le,y=new le,T=new le;function v(t,e,s,r){const i=[];for(let n=0,o=t.length;n<o;n+=3){const t=e[n],o=e[n+1],a=e[n+2];2===r?(g.fromArray(s,t*r),y.fromArray(s,o*r),T.fromArray(s,a*r),i.push(g.x,g.y),i.push(y.x,y.y),i.push(T.x,T.y)):(d.fromArray(s,t*r),m.fromArray(s,o*r),f.fromArray(s,a*r),i.push(d.x,d.y,d.z),i.push(m.x,m.y,m.z),i.push(f.x,f.y,f.z))}return new fr(i,r)}function b(t,e){const s=[];for(let r=0,i=0,n=t.length;r<n;r+=3,i++)d.fromArray(e,3*i),s.push(d.x,d.y,d.z),s.push(d.x,d.y,d.z),s.push(d.x,d.y,d.z);return new fr(s,3)}function w(t,e){const s=[];for(let r=0,i=0,n=t.length;r<n;r+=2,i++)d.fromArray(e,3*i),s.push(d.x,d.y,d.z),s.push(d.x,d.y,d.z);return new fr(s,3)}function x(t,e){const s=e.array,r=e.itemSize,i=new s.constructor(t.length*r);let n=0,o=0;for(let e=0,a=t.length;e<a;e++){n=t[e]*r;for(let t=0;t<r;t++)i[o++]=s[n++]}return new fr(i,r)}const I=new Ge,E=new Ge;function S(t,e,s){const r=[],i={};for(let s=0,n=t.length;s<n;s+=3){const n=t[s],o=t[s+1],a=t[s+2],h=new ON(n,o,a);d.fromArray(e,3*n),m.fromArray(e,3*o),f.fromArray(e,3*a),E.subVectors(f,m),I.subVectors(d,m),E.cross(I),E.normalize(),h.normal.copy(E),void 0===i[n]&&(i[n]=[]),void 0===i[o]&&(i[o]=[]),void 0===i[a]&&(i[a]=[]),i[n].push(h.normal),i[o].push(h.normal),i[a].push(h.normal),r.push(h)}const n=[];for(let t=0,o=r.length;t<o;t++){const o=r[t],a=A(i[o.a],o.normal,s),h=A(i[o.b],o.normal,s),c=A(i[o.c],o.normal,s);d.fromArray(e,3*o.a),m.fromArray(e,3*o.b),f.fromArray(e,3*o.c),n.push(a.x,a.y,a.z),n.push(h.x,h.y,h.z),n.push(c.x,c.y,c.z)}return new fr(n,3)}function A(t,e,s){const r=new Ge;if(0===s)r.copy(e);else for(let i=0,n=t.length;i<n;i++)t[i].angleTo(e)<s&&r.add(t[i]);return r.normalize()}function R(t){const e=[];for(let s=0,r=t.length;s<r;s+=3)e.push(new Ae(t[s],t[s+1],t[s+2]));return e}function C(t,e,s,r,i){const n=[],o=!0===i?0:Math.PI;for(let t=0,a=r.length;t<a;t++){let r=0===t?0:s[t-1];r=!0===i?r:o-r;const a=new Ge;a.setFromSphericalCoords(e,r,0),n.push(a)}const a=t.index,h=t.attributes.position,c=new or(new Float32Array(3*t.attributes.position.count),3),l=new Ge,u=new Ae;for(let t=0;t<a.count;t++){const e=a.getX(t);let s,o;l.fromBufferAttribute(h,e);let p=1;for(let t=1;t<n.length;t++){s=t-1,o=t;const e=n[s],r=n[o];if(!0===i){if(l.y<=e.y&&l.y>r.y){p=Math.abs(e.y-l.y)/Math.abs(e.y-r.y);break}}else if(l.y>=e.y&&l.y<r.y){p=Math.abs(e.y-l.y)/Math.abs(e.y-r.y);break}}const d=r[s],m=r[o];u.copy(d).lerp(m,p),c.setXYZ(e,u.r,u.g,u.b)}t.setAttribute("color",c)}const O=new ol(this.manager);if(O.setPath(this.resourcePath||e).setCrossOrigin(this.crossOrigin),-1===t.indexOf("#VRML V2.0"))throw Error("THREE.VRMLLexer: Version of VRML asset not supported.");return function(t){const e=t.nodes,s=new Xo;for(let t=0,s=e.length;t<s;t++){r(e[t])}for(let t=0,r=e.length;t<r;t++){const r=e[t],n=i(r);n instanceof zs&&s.add(n),"WorldInfo"===r.name&&(s.userData.worldInfo=n)}return s}(function(t){const e=function(){const t=EN.createToken,e=t({name:"RouteIdentifier",pattern:/[^\x30-\x39\0-\x20\x22\x27\x23\x2b\x2c\x2d\x2e\x5b\x5d\x5c\x7b\x7d][^\0-\x20\x22\x27\x23\x2b\x2c\x2d\x2e\x5b\x5d\x5c\x7b\x7d]*[\.][^\x30-\x39\0-\x20\x22\x27\x23\x2b\x2c\x2d\x2e\x5b\x5d\x5c\x7b\x7d][^\0-\x20\x22\x27\x23\x2b\x2c\x2d\x2e\x5b\x5d\x5c\x7b\x7d]*/}),s=t({name:"Identifier",pattern:/[^\x30-\x39\0-\x20\x22\x27\x23\x2b\x2c\x2d\x2e\x5b\x5d\x5c\x7b\x7d][^\0-\x20\x22\x27\x23\x2b\x2c\x2d\x2e\x5b\x5d\x5c\x7b\x7d]*/,longer_alt:e}),r=["Anchor","Billboard","Collision","Group","Transform","Inline","LOD","Switch","AudioClip","DirectionalLight","PointLight","Script","Shape","Sound","SpotLight","WorldInfo","CylinderSensor","PlaneSensor","ProximitySensor","SphereSensor","TimeSensor","TouchSensor","VisibilitySensor","Box","Cone","Cylinder","ElevationGrid","Extrusion","IndexedFaceSet","IndexedLineSet","PointSet","Sphere","Color","Coordinate","Normal","TextureCoordinate","Appearance","FontStyle","ImageTexture","Material","MovieTexture","PixelTexture","TextureTransform","ColorInterpolator","CoordinateInterpolator","NormalInterpolator","OrientationInterpolator","PositionInterpolator","ScalarInterpolator","Background","Fog","NavigationInfo","Viewpoint","Text"],i=t({name:"Version",pattern:/#VRML.*/,longer_alt:s}),n=t({name:"NodeName",pattern:new RegExp(r.join("|")),longer_alt:s}),o=t({name:"DEF",pattern:/DEF/,longer_alt:s}),a=t({name:"USE",pattern:/USE/,longer_alt:s}),h=t({name:"ROUTE",pattern:/ROUTE/,longer_alt:s}),c=t({name:"TO",pattern:/TO/,longer_alt:s}),l=t({name:"StringLiteral",pattern:/"(?:[^\\"\n\r]|\\[bfnrtv"\\/]|\\u[0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F])*"/}),u=t({name:"HexLiteral",pattern:/0[xX][0-9a-fA-F]+/}),p=t({name:"NumberLiteral",pattern:/[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?/}),d=t({name:"TrueLiteral",pattern:/TRUE/}),m=t({name:"FalseLiteral",pattern:/FALSE/}),f=t({name:"NullLiteral",pattern:/NULL/}),g=t({name:"LSquare",pattern:/\[/}),y=t({name:"RSquare",pattern:/]/}),T=t({name:"LCurly",pattern:/{/}),v=t({name:"RCurly",pattern:/}/}),b=t({name:"Comment",pattern:/#.*/,group:EN.Lexer.SKIPPED}),w=[t({name:"WhiteSpace",pattern:/[ ,\s]/,group:EN.Lexer.SKIPPED}),n,o,a,h,c,d,m,f,i,s,e,l,u,p,g,y,T,v,b],x={};for(let t=0,e=w.length;t<e;t++){const e=w[t];x[e.name]=e}return{tokens:w,tokenVocabulary:x}}(),s=new AN(e.tokens),r=new CN(e.tokenVocabulary),i=function(t){function e(){t.call(this),this.validateVisitor()}function s(t,e){const s={type:null,values:[]};if(e.node){s.type="node";for(let r=0,i=e.node.length;r<i;r++){const i=e.node[r];s.values.push(t.visit(i))}}if(e.use){s.type="use";for(let r=0,i=e.use.length;r<i;r++){const i=e.use[r];s.values.push(t.visit(i))}}if(e.StringLiteral){s.type="string";for(let t=0,r=e.StringLiteral.length;t<r;t++){const r=e.StringLiteral[t];s.values.push(r.image.replace(/'|"/g,""))}}if(e.NumberLiteral){s.type="number";for(let t=0,r=e.NumberLiteral.length;t<r;t++){const r=e.NumberLiteral[t];s.values.push(parseFloat(r.image))}}if(e.HexLiteral){s.type="hex";for(let t=0,r=e.HexLiteral.length;t<r;t++){const r=e.HexLiteral[t];s.values.push(r.image)}}if(e.TrueLiteral){s.type="boolean";for(let t=0,r=e.TrueLiteral.length;t<r;t++){"TRUE"===e.TrueLiteral[t].image&&s.values.push(!0)}}if(e.FalseLiteral){s.type="boolean";for(let t=0,r=e.FalseLiteral.length;t<r;t++){"FALSE"===e.FalseLiteral[t].image&&s.values.push(!1)}}return e.NullLiteral&&(s.type="null",e.NullLiteral.forEach((function(){s.values.push(null)}))),s}return e.prototype=Object.assign(Object.create(t.prototype),{constructor:e,vrml:function(t){const e={version:this.visit(t.version),nodes:[],routes:[]};for(let s=0,r=t.node.length;s<r;s++){const r=t.node[s];e.nodes.push(this.visit(r))}if(t.route)for(let s=0,r=t.route.length;s<r;s++){const r=t.route[s];e.routes.push(this.visit(r))}return e},version:function(t){return t.Version[0].image},node:function(t){const e={name:t.NodeName[0].image,fields:[]};if(t.field)for(let s=0,r=t.field.length;s<r;s++){const r=t.field[s];e.fields.push(this.visit(r))}return t.def&&(e.DEF=this.visit(t.def[0])),e},field:function(t){const e={name:t.Identifier[0].image,type:null,values:null};let s;return t.singleFieldValue&&(s=this.visit(t.singleFieldValue[0])),t.multiFieldValue&&(s=this.visit(t.multiFieldValue[0])),e.type=s.type,e.values=s.values,e},def:function(t){return(t.Identifier||t.NodeName)[0].image},use:function(t){return{USE:(t.Identifier||t.NodeName)[0].image}},singleFieldValue:function(t){return s(this,t)},multiFieldValue:function(t){return s(this,t)},route:function(t){return{FROM:t.RouteIdentifier[0].image,TO:t.RouteIdentifier[1].image}}}),new e}(r.getBaseCstVisitorConstructor()),n=s.lex(t);r.input=n.tokens;const o=r.vrml();if(r.errors.length>0)throw console.error(r.errors),Error("THREE.VRMLLoader: Parsing errors detected.");return i.visit(o)}(t))}}class AN{constructor(t){this.lexer=new EN.Lexer(t)}lex(t){const e=this.lexer.tokenize(t);if(e.errors.length>0)throw console.error(e.errors),Error("THREE.VRMLLexer: Lexing errors detected.");return e}}const RN=EN.CstParser;class CN extends RN{constructor(t){super(t);const e=this,s=t.Version,r=t.LCurly,i=t.RCurly,n=t.LSquare,o=t.RSquare,a=t.Identifier,h=t.RouteIdentifier,c=t.StringLiteral,l=t.HexLiteral,u=t.NumberLiteral,p=t.TrueLiteral,d=t.FalseLiteral,m=t.NullLiteral,f=t.DEF,g=t.USE,y=t.ROUTE,T=t.TO,v=t.NodeName;e.RULE("vrml",(function(){e.SUBRULE(e.version),e.AT_LEAST_ONE((function(){e.SUBRULE(e.node)})),e.MANY((function(){e.SUBRULE(e.route)}))})),e.RULE("version",(function(){e.CONSUME(s)})),e.RULE("node",(function(){e.OPTION((function(){e.SUBRULE(e.def)})),e.CONSUME(v),e.CONSUME(r),e.MANY((function(){e.SUBRULE(e.field)})),e.CONSUME(i)})),e.RULE("field",(function(){e.CONSUME(a),e.OR2([{ALT:function(){e.SUBRULE(e.singleFieldValue)}},{ALT:function(){e.SUBRULE(e.multiFieldValue)}}])})),e.RULE("def",(function(){e.CONSUME(f),e.OR([{ALT:function(){e.CONSUME(a)}},{ALT:function(){e.CONSUME(v)}}])})),e.RULE("use",(function(){e.CONSUME(g),e.OR([{ALT:function(){e.CONSUME(a)}},{ALT:function(){e.CONSUME(v)}}])})),e.RULE("singleFieldValue",(function(){e.AT_LEAST_ONE((function(){e.OR([{ALT:function(){e.SUBRULE(e.node)}},{ALT:function(){e.SUBRULE(e.use)}},{ALT:function(){e.CONSUME(c)}},{ALT:function(){e.CONSUME(l)}},{ALT:function(){e.CONSUME(u)}},{ALT:function(){e.CONSUME(p)}},{ALT:function(){e.CONSUME(d)}},{ALT:function(){e.CONSUME(m)}}])}))})),e.RULE("multiFieldValue",(function(){e.CONSUME(n),e.MANY((function(){e.OR([{ALT:function(){e.SUBRULE(e.node)}},{ALT:function(){e.SUBRULE(e.use)}},{ALT:function(){e.CONSUME(c)}},{ALT:function(){e.CONSUME(l)}},{ALT:function(){e.CONSUME(u)}},{ALT:function(){e.CONSUME(m)}}])})),e.CONSUME(o)})),e.RULE("route",(function(){e.CONSUME(y),e.CONSUME(h),e.CONSUME(T),e.CONSUME2(h)})),this.performSelfAnalysis()}}class ON{constructor(t,e,s){this.a=t,this.b=e,this.c=s,this.normal=new Ge}}const _N={INTENSITY:1,INTENSITY_ALPHA:2,RGB:3,RGBA:4};class DN extends Qc{constructor(t){super(t)}load(t,e,s,r){const i=this,n=new el(i.manager);n.setPath(i.path),n.setResponseType("arraybuffer"),n.setRequestHeader(i.requestHeader),n.setWithCredentials(i.withCredentials),n.load(t,(function(s){try{e(i.parse(s))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),s,r)}parse(t){function e(t,e){const s=t.length,r=new Float32Array(s+e.length);return r.set(t),r.set(e,s),r}function s(t,e){const s=t.length,r=new Int32Array(s+e.length);return r.set(t),r.set(e,s),r}const r=Rl.decodeText(new Uint8Array(t,0,250)).split("\n");return-1!==r[0].indexOf("xml")?function(t){function r(t){const e="undefined"!=typeof Uint8Array?Uint8Array:Array,s=[],r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(let t=0,e=r.length;t<e;++t)s[r.charCodeAt(t)]=t;s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63;const i=t.length;if(i%4>0)throw new Error("Invalid string. Length must be a multiple of 4");const n="="===t[i-2]?2:"="===t[i-1]?1:0,o=new e(3*i/4-n),a=n>0?i-4:i;let h,c,l=0;for(h=0,c=0;h<a;h+=4,c+=3){const e=s[t.charCodeAt(h)]<<18|s[t.charCodeAt(h+1)]<<12|s[t.charCodeAt(h+2)]<<6|s[t.charCodeAt(h+3)];o[l++]=(16711680&e)>>16,o[l++]=(65280&e)>>8,o[l++]=255&e}if(2===n){const e=s[t.charCodeAt(h)]<<2|s[t.charCodeAt(h+1)]>>4;o[l++]=255&e}else if(1===n){const e=s[t.charCodeAt(h)]<<10|s[t.charCodeAt(h+1)]<<4|s[t.charCodeAt(h+2)]>>2;o[l++]=e>>8&255,o[l++]=255&e}return o}function i(t,i){let o,a,h=0;if("UInt64"===n.attributes.header_type?h=8:"UInt32"===n.attributes.header_type&&(h=4),"binary"===t.attributes.format&&i){"Float32"===t.attributes.type?o=new Float32Array:"Int32"!==t.attributes.type&&"Int64"!==t.attributes.type||(o=new Int32Array);const i=t["#text"],n=r(Array.isArray(i)?i[0]:i),c=8;let l=n[0];for(let t=1;t<h-1;t++)l|=n[t]<<t*c;let u=(l+3)*h;u+=u%3>0?3-u%3:0;const p=[];let d=u;p.push(d);const m=3*h;for(let t=0;t<l;t++){let e=n[t*h+m];for(let s=1;s<h-1;s++)e|=n[t*h+m+s]<<s*c;d+=e,p.push(d)}for(let r=0;r<p.length-1;r++)a=$d(n.slice(p[r],p[r+1])).buffer,"Float32"===t.attributes.type?(a=new Float32Array(a),o=e(o,a)):"Int32"!==t.attributes.type&&"Int64"!==t.attributes.type||(a=new Int32Array(a),o=s(o,a));delete t["#text"],"Int64"===t.attributes.type&&"binary"===t.attributes.format&&(o=o.filter((function(t,e){if(e%2!=1)return!0})))}else"binary"!==t.attributes.format||i?a=t["#text"]?t["#text"].split(/\s+/).filter((function(t){if(""!==t)return t})):new Int32Array(0).buffer:(a=r(t["#text"]),a=a.slice(h).buffer),delete t["#text"],"Float32"===t.attributes.type?o=new Float32Array(a):"Int32"===t.attributes.type?o=new Int32Array(a):"Int64"===t.attributes.type&&(o=new Int32Array(a),"binary"===t.attributes.format&&(o=o.filter((function(t,e){if(e%2!=1)return!0}))));return o}const n=function t(e){let s={};if(1===e.nodeType){if(e.attributes&&e.attributes.length>0){s.attributes={};for(let t=0;t<e.attributes.length;t++){const r=e.attributes.item(t);s.attributes[r.nodeName]=r.nodeValue.trim()}}}else 3===e.nodeType&&(s=e.nodeValue.trim());if(e.hasChildNodes())for(let r=0;r<e.childNodes.length;r++){const i=e.childNodes.item(r),n=i.nodeName;if(void 0===s[n]){const e=t(i);""!==e&&(s[n]=e)}else{if(void 0===s[n].push){const t=s[n];s[n]=[t]}const e=t(i);""!==e&&s[n].push(e)}}return s}((new DOMParser).parseFromString(t,"application/xml").documentElement);let o=[],a=[],h=[];if(n.PolyData){const t=n.PolyData.Piece,e=n.attributes.hasOwnProperty("compressor"),s=["PointData","Points","Strips","Polys"];let r=0;const c=s.length;for(;r<c;){const n=t[s[r]];if(n&&n.DataArray){let c;c="[object Array]"===Object.prototype.toString.call(n.DataArray)?n.DataArray:[n.DataArray];let l=0;const u=c.length;for(;l<u;)"#text"in c[l]&&c[l]["#text"].length>0&&(c[l].text=i(c[l],e)),l++;switch(s[r]){case"PointData":{const e=parseInt(t.attributes.NumberOfPoints),s=n.attributes.Normals;if(e>0)for(let t=0,r=c.length;t<r;t++)if(s===c[t].attributes.Name){const s=c[t].attributes.NumberOfComponents;a=new Float32Array(e*s),a.set(c[t].text,0)}}break;case"Points":{const e=parseInt(t.attributes.NumberOfPoints);if(e>0){const t=n.DataArray.attributes.NumberOfComponents;o=new Float32Array(e*t),o.set(n.DataArray.text,0)}}break;case"Strips":{const e=parseInt(t.attributes.NumberOfStrips);if(e>0){const t=new Int32Array(n.DataArray[0].text.length),s=new Int32Array(n.DataArray[1].text.length);t.set(n.DataArray[0].text,0),s.set(n.DataArray[1].text,0);const r=e+t.length;h=new Uint32Array(3*r-9*e);let i=0;for(let r=0,n=e;r<n;r++){const e=[];for(let i=0,n=s[r],o=0;i<n-o;i++)e.push(t[i]),r>0&&(o=s[r-1]);for(let t=0,n=s[r],o=0;t<n-o-2;t++)t%2?(h[i++]=e[t],h[i++]=e[t+2],h[i++]=e[t+1]):(h[i++]=e[t],h[i++]=e[t+1],h[i++]=e[t+2]),r>0&&(o=s[r-1])}}}break;case"Polys":{const e=parseInt(t.attributes.NumberOfPolys);if(e>0){const t=new Int32Array(n.DataArray[0].text.length),s=new Int32Array(n.DataArray[1].text.length);t.set(n.DataArray[0].text,0),s.set(n.DataArray[1].text,0);const r=e+t.length;h=new Uint32Array(3*r-9*e);let i=0,o=0,a=0,c=0;const l=e;for(;a<l;){const e=[];let r=0;const n=s[a];for(;r<n-c;)e.push(t[o++]),r++;let l=1;for(;l<n-c-1;)h[i++]=e[0],h[i++]=e[l],h[i++]=e[l+1],l++;a++,c=s[a-1]}}}}}r++}const l=new Er;return l.setIndex(new or(h,1)),l.setAttribute("position",new or(o,3)),a.length===o.length&&l.setAttribute("normal",new or(a,3)),l}throw new Error("Unsupported DATASET type")}(Rl.decodeText(t)):r[2].includes("ASCII")?function(t){const e=[],s=[],r=[],i=[];let n;const o=/^[^\d.\s-]+/,a=/(\-?\d+\.?[\d\-\+e]*)\s+(\-?\d+\.?[\d\-\+e]*)\s+(\-?\d+\.?[\d\-\+e]*)/g,h=/^(\d+)\s+([\s\d]*)/,c=/^POINTS /,l=/^POLYGONS /,u=/^TRIANGLE_STRIPS /,p=/^POINT_DATA[ ]+(\d+)/,d=/^CELL_DATA[ ]+(\d+)/,m=/^COLOR_SCALARS[ ]+(\w+)[ ]+3/,f=/^NORMALS[ ]+(\w+)[ ]+(\w+)/;let g=!1,y=!1,T=!1,v=!1,b=!1,w=!1,x=!1;const I=t.split("\n");for(const t in I){const E=I[t].trim();if(0===E.indexOf("DATASET")){const t=E.split(" ")[1];if("POLYDATA"!==t)throw new Error("Unsupported DATASET type: "+t)}else if(g)for(;null!==(n=a.exec(E))&&null===o.exec(E);){const t=parseFloat(n[1]),e=parseFloat(n[2]),r=parseFloat(n[3]);s.push(t,e,r)}else if(y){if(null!==(n=h.exec(E))){const t=parseInt(n[1]),s=n[2].split(/\s+/);if(t>=3){const r=parseInt(s[0]);let i=1;for(let n=0;n<t-2;++n){const t=parseInt(s[i]),n=parseInt(s[i+1]);e.push(r,t,n),i++}}}}else if(T){if(null!==(n=h.exec(E))){const t=parseInt(n[1]),s=n[2].split(/\s+/);if(t>=3)for(let r=0;r<t-2;r++)if(r%2==1){const t=parseInt(s[r]),i=parseInt(s[r+2]),n=parseInt(s[r+1]);e.push(t,i,n)}else{const t=parseInt(s[r]),i=parseInt(s[r+1]),n=parseInt(s[r+2]);e.push(t,i,n)}}}else if(v||b)if(w)for(;null!==(n=a.exec(E))&&null===o.exec(E);){const t=parseFloat(n[1]),e=parseFloat(n[2]),s=parseFloat(n[3]);r.push(t,e,s)}else if(x)for(;null!==(n=a.exec(E))&&null===o.exec(E);){const t=parseFloat(n[1]),e=parseFloat(n[2]),s=parseFloat(n[3]);i.push(t,e,s)}null!==l.exec(E)?(y=!0,g=!1,T=!1):null!==c.exec(E)?(y=!1,g=!0,T=!1):null!==u.exec(E)?(y=!1,g=!1,T=!0):null!==p.exec(E)?(v=!0,g=!1,y=!1,T=!1):null!==d.exec(E)?(b=!0,g=!1,y=!1,T=!1):null!==m.exec(E)?(w=!0,x=!1,g=!1,y=!1,T=!1):null!==f.exec(E)&&(x=!0,w=!1,g=!1,y=!1,T=!1)}let E=new Er;if(E.setIndex(e),E.setAttribute("position",new fr(s,3)),i.length===s.length&&E.setAttribute("normal",new fr(i,3)),r.length!==e.length)r.length===s.length&&E.setAttribute("color",new fr(r,3));else{E=E.toNonIndexed();const t=E.attributes.position.count/3;if(r.length===3*t){const e=[];for(let s=0;s<t;s++){const t=r[3*s+0],i=r[3*s+1],n=r[3*s+2];e.push(t,i,n),e.push(t,i,n),e.push(t,i,n)}E.setAttribute("color",new fr(e,3))}}return E}(Rl.decodeText(t)):function(t){const e=new Uint8Array(t),s=new DataView(t);let r,i,n=[],o=[],a=[],h=0;function c(t,e){let s=e,r=t[s];const i=[];for(;10!==r;)i.push(String.fromCharCode(r)),s++,r=t[s];return{start:e,end:s,next:s+1,parsedString:i.join("")}}for(;;){if(r=c(e,h),i=r.parsedString,0===i.indexOf("DATASET")){const t=i.split(" ")[1];if("POLYDATA"!==t)throw new Error("Unsupported DATASET type: "+t)}else if(0===i.indexOf("POINTS")){const t=parseInt(i.split(" ")[1],10),e=4*t*3;n=new Float32Array(3*t);let o=r.next;for(let e=0;e<t;e++)n[3*e]=s.getFloat32(o,!1),n[3*e+1]=s.getFloat32(o+4,!1),n[3*e+2]=s.getFloat32(o+8,!1),o+=12;r.next=r.next+e+1}else if(0===i.indexOf("TRIANGLE_STRIPS")){const t=parseInt(i.split(" ")[1],10),e=parseInt(i.split(" ")[2],10),n=4*e;a=new Uint32Array(3*e-9*t);let o=0,h=r.next;for(let e=0;e<t;e++){const t=s.getInt32(h,!1),e=[];h+=4;for(let r=0;r<t;r++)e.push(s.getInt32(h,!1)),h+=4;for(let s=0;s<t-2;s++)s%2?(a[o++]=e[s],a[o++]=e[s+2],a[o++]=e[s+1]):(a[o++]=e[s],a[o++]=e[s+1],a[o++]=e[s+2])}r.next=r.next+n+1}else if(0===i.indexOf("POLYGONS")){const t=parseInt(i.split(" ")[1],10),e=parseInt(i.split(" ")[2],10),n=4*e;a=new Uint32Array(3*e-9*t);let o=0,h=r.next;for(let e=0;e<t;e++){const t=s.getInt32(h,!1),e=[];h+=4;for(let r=0;r<t;r++)e.push(s.getInt32(h,!1)),h+=4;for(let s=1;s<t-1;s++)a[o++]=e[0],a[o++]=e[s],a[o++]=e[s+1]}r.next=r.next+n+1}else if(0===i.indexOf("POINT_DATA")){const t=parseInt(i.split(" ")[1],10);r=c(e,r.next);const n=4*t*3;o=new Float32Array(3*t);let a=r.next;for(let e=0;e<t;e++)o[3*e]=s.getFloat32(a,!1),o[3*e+1]=s.getFloat32(a+4,!1),o[3*e+2]=s.getFloat32(a+8,!1),a+=12;r.next=r.next+n}if(h=r.next,h>=e.byteLength)break}const l=new Er;return l.setIndex(new or(a,1)),l.setAttribute("position",new or(n,3)),o.length===n.length&&l.setAttribute("normal",new or(o,3)),l}(t)}}class FN extends Qc{load(t,e,s,r){const i=this,n=new el(this.manager);n.setPath(this.path),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials),n.load(t,(function(s){try{e(i.parse(s))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),s,r)}parse(t){const e=t.split("\n"),s=[],r=[];for(let t of e){if(t=t.trim(),"#"===t.charAt(0))continue;const e=t.split(/\s+/);3===e.length&&(s.push(parseFloat(e[0])),s.push(parseFloat(e[1])),s.push(parseFloat(e[2]))),6===e.length&&(s.push(parseFloat(e[0])),s.push(parseFloat(e[1])),s.push(parseFloat(e[2])),r.push(parseFloat(e[3])/255),r.push(parseFloat(e[4])/255),r.push(parseFloat(e[5])/255))}const i=new Er;return i.setAttribute("position",new fr(s,3)),r.length>0&&i.setAttribute("color",new fr(r,3)),i}}const MN={type:"change"},PN={type:"start"},NN={type:"end"};class LN extends $t{constructor(t,e){super(),void 0===e&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=t,this.domElement=e,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new Ge,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:_.ROTATE,MIDDLE:_.DOLLY,RIGHT:_.PAN},this.touches={ONE:D.ROTATE,TWO:D.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return o.phi},this.getAzimuthalAngle=function(){return o.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(t){t.addEventListener("keydown",W),this._domElementKeyEvents=t},this.saveState=function(){s.target0.copy(s.target),s.position0.copy(s.object.position),s.zoom0=s.object.zoom},this.reset=function(){s.target.copy(s.target0),s.object.position.copy(s.position0),s.object.zoom=s.zoom0,s.object.updateProjectionMatrix(),s.dispatchEvent(MN),s.update(),i=r.NONE},this.update=function(){const e=new Ge,u=(new Be).setFromUnitVectors(t.up,new Ge(0,1,0)),p=u.clone().invert(),d=new Ge,m=new Be,f=2*Math.PI;return function(){const t=s.object.position;e.copy(t).sub(s.target),e.applyQuaternion(u),o.setFromVector3(e),s.autoRotate&&i===r.NONE&&I(2*Math.PI/60/60*s.autoRotateSpeed),s.enableDamping?(o.theta+=a.theta*s.dampingFactor,o.phi+=a.phi*s.dampingFactor):(o.theta+=a.theta,o.phi+=a.phi);let g=s.minAzimuthAngle,y=s.maxAzimuthAngle;return isFinite(g)&&isFinite(y)&&(g<-Math.PI?g+=f:g>Math.PI&&(g-=f),y<-Math.PI?y+=f:y>Math.PI&&(y-=f),o.theta=g<=y?Math.max(g,Math.min(y,o.theta)):o.theta>(g+y)/2?Math.max(g,o.theta):Math.min(y,o.theta)),o.phi=Math.max(s.minPolarAngle,Math.min(s.maxPolarAngle,o.phi)),o.makeSafe(),o.radius*=h,o.radius=Math.max(s.minDistance,Math.min(s.maxDistance,o.radius)),!0===s.enableDamping?s.target.addScaledVector(c,s.dampingFactor):s.target.add(c),e.setFromSpherical(o),e.applyQuaternion(p),t.copy(s.target).add(e),s.object.lookAt(s.target),!0===s.enableDamping?(a.theta*=1-s.dampingFactor,a.phi*=1-s.dampingFactor,c.multiplyScalar(1-s.dampingFactor)):(a.set(0,0,0),c.set(0,0,0)),h=1,!!(l||d.distanceToSquared(s.object.position)>n||8*(1-m.dot(s.object.quaternion))>n)&&(s.dispatchEvent(MN),d.copy(s.object.position),m.copy(s.object.quaternion),l=!1,!0)}}(),this.dispose=function(){s.domElement.removeEventListener("contextmenu",Y),s.domElement.removeEventListener("pointerdown",B),s.domElement.removeEventListener("pointercancel",z),s.domElement.removeEventListener("wheel",V),s.domElement.removeEventListener("pointermove",G),s.domElement.removeEventListener("pointerup",j),null!==s._domElementKeyEvents&&s._domElementKeyEvents.removeEventListener("keydown",W)};const s=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let i=r.NONE;const n=1e-6,o=new wu,a=new wu;let h=1;const c=new Ge;let l=!1;const u=new le,p=new le,d=new le,m=new le,f=new le,g=new le,y=new le,T=new le,v=new le,b=[],w={};function x(){return Math.pow(.95,s.zoomSpeed)}function I(t){a.theta-=t}function E(t){a.phi-=t}const S=function(){const t=new Ge;return function(e,s){t.setFromMatrixColumn(s,0),t.multiplyScalar(-e),c.add(t)}}(),A=function(){const t=new Ge;return function(e,r){!0===s.screenSpacePanning?t.setFromMatrixColumn(r,1):(t.setFromMatrixColumn(r,0),t.crossVectors(s.object.up,t)),t.multiplyScalar(e),c.add(t)}}(),R=function(){const t=new Ge;return function(e,r){const i=s.domElement;if(s.object.isPerspectiveCamera){const n=s.object.position;t.copy(n).sub(s.target);let o=t.length();o*=Math.tan(s.object.fov/2*Math.PI/180),S(2*e*o/i.clientHeight,s.object.matrix),A(2*r*o/i.clientHeight,s.object.matrix)}else s.object.isOrthographicCamera?(S(e*(s.object.right-s.object.left)/s.object.zoom/i.clientWidth,s.object.matrix),A(r*(s.object.top-s.object.bottom)/s.object.zoom/i.clientHeight,s.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),s.enablePan=!1)}}();function C(t){s.object.isPerspectiveCamera?h/=t:s.object.isOrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom*t)),s.object.updateProjectionMatrix(),l=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function O(t){s.object.isPerspectiveCamera?h*=t:s.object.isOrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom/t)),s.object.updateProjectionMatrix(),l=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function F(t){u.set(t.clientX,t.clientY)}function M(t){m.set(t.clientX,t.clientY)}function P(){if(1===b.length)u.set(b[0].pageX,b[0].pageY);else{const t=.5*(b[0].pageX+b[1].pageX),e=.5*(b[0].pageY+b[1].pageY);u.set(t,e)}}function N(){if(1===b.length)m.set(b[0].pageX,b[0].pageY);else{const t=.5*(b[0].pageX+b[1].pageX),e=.5*(b[0].pageY+b[1].pageY);m.set(t,e)}}function L(){const t=b[0].pageX-b[1].pageX,e=b[0].pageY-b[1].pageY,s=Math.sqrt(t*t+e*e);y.set(0,s)}function k(t){if(1==b.length)p.set(t.pageX,t.pageY);else{const e=K(t),s=.5*(t.pageX+e.x),r=.5*(t.pageY+e.y);p.set(s,r)}d.subVectors(p,u).multiplyScalar(s.rotateSpeed);const e=s.domElement;I(2*Math.PI*d.x/e.clientHeight),E(2*Math.PI*d.y/e.clientHeight),u.copy(p)}function U(t){if(1===b.length)f.set(t.pageX,t.pageY);else{const e=K(t),s=.5*(t.pageX+e.x),r=.5*(t.pageY+e.y);f.set(s,r)}g.subVectors(f,m).multiplyScalar(s.panSpeed),R(g.x,g.y),m.copy(f)}function H(t){const e=K(t),r=t.pageX-e.x,i=t.pageY-e.y,n=Math.sqrt(r*r+i*i);T.set(0,n),v.set(0,Math.pow(T.y/y.y,s.zoomSpeed)),C(v.y),y.copy(T)}function B(t){!1!==s.enabled&&(0===b.length&&(s.domElement.setPointerCapture(t.pointerId),s.domElement.addEventListener("pointermove",G),s.domElement.addEventListener("pointerup",j)),function(t){b.push(t)}(t),"touch"===t.pointerType?function(t){switch(q(t),b.length){case 1:switch(s.touches.ONE){case D.ROTATE:if(!1===s.enableRotate)return;P(),i=r.TOUCH_ROTATE;break;case D.PAN:if(!1===s.enablePan)return;N(),i=r.TOUCH_PAN;break;default:i=r.NONE}break;case 2:switch(s.touches.TWO){case D.DOLLY_PAN:if(!1===s.enableZoom&&!1===s.enablePan)return;s.enableZoom&&L(),s.enablePan&&N(),i=r.TOUCH_DOLLY_PAN;break;case D.DOLLY_ROTATE:if(!1===s.enableZoom&&!1===s.enableRotate)return;s.enableZoom&&L(),s.enableRotate&&P(),i=r.TOUCH_DOLLY_ROTATE;break;default:i=r.NONE}break;default:i=r.NONE}i!==r.NONE&&s.dispatchEvent(PN)}(t):function(t){let e;switch(t.button){case 0:e=s.mouseButtons.LEFT;break;case 1:e=s.mouseButtons.MIDDLE;break;case 2:e=s.mouseButtons.RIGHT;break;default:e=-1}switch(e){case _.DOLLY:if(!1===s.enableZoom)return;!function(t){y.set(t.clientX,t.clientY)}(t),i=r.DOLLY;break;case _.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===s.enablePan)return;M(t),i=r.PAN}else{if(!1===s.enableRotate)return;F(t),i=r.ROTATE}break;case _.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===s.enableRotate)return;F(t),i=r.ROTATE}else{if(!1===s.enablePan)return;M(t),i=r.PAN}break;default:i=r.NONE}i!==r.NONE&&s.dispatchEvent(PN)}(t))}function G(t){!1!==s.enabled&&("touch"===t.pointerType?function(t){switch(q(t),i){case r.TOUCH_ROTATE:if(!1===s.enableRotate)return;k(t),s.update();break;case r.TOUCH_PAN:if(!1===s.enablePan)return;U(t),s.update();break;case r.TOUCH_DOLLY_PAN:if(!1===s.enableZoom&&!1===s.enablePan)return;!function(t){s.enableZoom&&H(t),s.enablePan&&U(t)}(t),s.update();break;case r.TOUCH_DOLLY_ROTATE:if(!1===s.enableZoom&&!1===s.enableRotate)return;!function(t){s.enableZoom&&H(t),s.enableRotate&&k(t)}(t),s.update();break;default:i=r.NONE}}(t):function(t){if(!1===s.enabled)return;switch(i){case r.ROTATE:if(!1===s.enableRotate)return;!function(t){p.set(t.clientX,t.clientY),d.subVectors(p,u).multiplyScalar(s.rotateSpeed);const e=s.domElement;I(2*Math.PI*d.x/e.clientHeight),E(2*Math.PI*d.y/e.clientHeight),u.copy(p),s.update()}(t);break;case r.DOLLY:if(!1===s.enableZoom)return;!function(t){T.set(t.clientX,t.clientY),v.subVectors(T,y),v.y>0?C(x()):v.y<0&&O(x()),y.copy(T),s.update()}(t);break;case r.PAN:if(!1===s.enablePan)return;!function(t){f.set(t.clientX,t.clientY),g.subVectors(f,m).multiplyScalar(s.panSpeed),R(g.x,g.y),m.copy(f),s.update()}(t)}}(t))}function j(t){X(t),0===b.length&&(s.domElement.releasePointerCapture(t.pointerId),s.domElement.removeEventListener("pointermove",G),s.domElement.removeEventListener("pointerup",j)),s.dispatchEvent(NN),i=r.NONE}function z(t){X(t)}function V(t){!1!==s.enabled&&!1!==s.enableZoom&&i===r.NONE&&(t.preventDefault(),s.dispatchEvent(PN),function(t){t.deltaY<0?O(x()):t.deltaY>0&&C(x()),s.update()}(t),s.dispatchEvent(NN))}function W(t){!1!==s.enabled&&!1!==s.enablePan&&function(t){let e=!1;switch(t.code){case s.keys.UP:R(0,s.keyPanSpeed),e=!0;break;case s.keys.BOTTOM:R(0,-s.keyPanSpeed),e=!0;break;case s.keys.LEFT:R(s.keyPanSpeed,0),e=!0;break;case s.keys.RIGHT:R(-s.keyPanSpeed,0),e=!0}e&&(t.preventDefault(),s.update())}(t)}function Y(t){!1!==s.enabled&&t.preventDefault()}function X(t){delete w[t.pointerId];for(let e=0;e<b.length;e++)if(b[e].pointerId==t.pointerId)return void b.splice(e,1)}function q(t){let e=w[t.pointerId];void 0===e&&(e=new le,w[t.pointerId]=e),e.set(t.pageX,t.pageY)}function K(t){const e=t.pointerId===b[0].pointerId?b[1]:b[0];return w[e.pointerId]}s.domElement.addEventListener("contextmenu",Y),s.domElement.addEventListener("pointerdown",B),s.domElement.addEventListener("pointercancel",z),s.domElement.addEventListener("wheel",V,{passive:!1}),this.update()}}let kN,UN,HN;class BN{constructor(t){this.config={modelUrl:"",modelsRoute:"models",nftsRoute:"nfts",castShadow:!0,...t},kN=this.config.three,this.loader=this.config.loader,this.scene=this.config.scene,this.height=this.config.height,this.width=this.config.width,this.depth=this.config.depth,this.modelUrl=this.config.modelUrl,this.mixer=null,this.action=null,this.mesh=null,this.animRunning=!1,this.animations=null,this.initItemEvents()}hasAnimations=t=>(t||(t=this.root),t.animations&&t.animations.length>0?(this.animations=t.animations,!0):!!t.children&&(!!t.children[0]&&(!!(t.children[0].animations&&t.children[0].animations.length>0)&&(this.animations=t.children[0].animations,!0))));getAnimations=()=>!!this.hasAnimations()&&this.animations;initItemEvents=()=>{this.meshPlacedEvent=new CustomEvent("placed",{detail:{mesh:this.mesh}})};placeModel=t=>new Promise(((e,s)=>{this.fetchModel(this.modelUrl,t).then((s=>{e(s,t)})).catch((t=>{console.log(t)}))}));place=t=>{let e=this;return new Promise(((s,r)=>{this.fetchModelUrl().then((r=>{e.modelUrl=r,e.placeModel(t).then(((t,r)=>{e.mesh=t;let i=new CustomEvent("loaded",{detail:{mesh:this.mesh,position:r}});document.body.dispatchEvent(i),document.body.dispatchEvent(this.meshPlacedEvent),s(t,r)}))}))}))};remove=()=>{console.log("remove: ",this.mesh),this.scene.remove(this.mesh.children[0])};moveTo=t=>{console.log("current: ",this.mesh.position),console.log("moveto: ",t),this.mesh.position.copy(t)};centerMeshInScene=t=>{let e=null;if(1===t.children.length)return e=t.children[0],e.geometry.center(),e;t.traverse((t=>{if(t.isMesh)return e=t,e.geometry.center(),e}))};fetchModelUrl=async()=>{let t=this;return new Promise(((e,s)=>{if(""!==this.config.modelUrl)console.log("config url: ",this.config.modelUrl),e(this.config.modelUrl);else{let r=this.config.nftsRoute;console.log("fetchModelUrl: "+r),fetch(r,{method:"get"}).then((t=>t.text())).then((r=>{if(console.log("fetchModelUrl response: "),console.log(r),void 0!==r){console.log("that.config.nftPostHashHex: "+t.config.nftPostHashHex),console.log("that.config.modelsRoute: "+t.config.modelsRoute),console.log("modelUrl: "+t.config.modelUrl);let s=t.config.modelsRoute+"/"+t.config.nftPostHashHex+r.modelUrl;e(s)}else s()}))}}))};fetchModel=async(t,e)=>{let s=this,r=this.addContainerBoxToScene(e),i=(new kN.Box3).setFromObject(r);return new Promise(((r,n)=>{let o=null;console.log("loader attempting load of: ",t),s.loader.load(t,(t=>{this.root=t;let n=null;t.scene?(console.log("NOT using root"),n=t.scene):(console.log("using root"),n=t);let a=this.convertToObj3D(n);if(!1===a)return console.log("could not convert item for scene"),!1;o=(new kN.Box3).setFromObject(a),console.log(o);let h=Math.abs(i.max.x-i.min.x),c=Math.abs(i.max.y-i.min.y),l=Math.abs(i.max.z-i.min.z),u=[h/Math.abs(o.max.x-o.min.x),c/Math.abs(o.max.y-o.min.y),l/Math.abs(o.max.z-o.min.z)],p=Math.min(...u);a.scale.set&&(a.scale.set(p,p,p),a.updateWorldMatrix());let d=(new kN.Box3).setFromObject(a),m={x:Math.abs(d.max.x-d.min.x),y:Math.abs(d.max.y-d.min.y),z:Math.abs(d.max.z-d.min.z)};console.log("height after scale: ",m.y);let f=s.createContainerBoxForModel(m.x,m.y,m.z,e);f.position.copy(e);let g=m.y/2;f.position.setY(f.position.y+g),this.scene.add(f),f.updateMatrixWorld(),f.add(a),a.updateWorldMatrix();var y=new kN.BoxHelper(a,65280);y.update();let T=this.getBoxHelperVertices(y);if(T.applyMatrix4(y.matrixWorld),e.y!==T.y){let t=T.y-e.y;a.position.setY(a.position.y-t),a.position.setX(0),a.position.setZ(0)}r(a)}),this.onProgressCallback,this.onErrorCallback)}))};onProgressCallback=()=>{};onErrorCallback=t=>{console.log("loading error"),console.log(t)};getBoxHelperVertices=t=>{let e=1e6,s=null;for(var r=0;r<8;++r){var i=t.geometry.attributes.position.getX(r),n=t.geometry.attributes.position.getY(r),o=t.geometry.attributes.position.getZ(r);n<e&&(e=n,s=new kN.Vector3(i,n,o))}return console.log("lowest point in helper: ",e),s};getFloorYCoord=t=>t.y;postionMeshOnFLoor=(t,e,s)=>{t.position.copy(e)};addPlaneAtPos=t=>{var e=new kN.PlaneBufferGeometry(20,20),s=new kN.MeshPhongMaterial({color:10092543,side:kN.DoubleSide}),r=new kN.Mesh(e,s);r.rotateX(-Math.PI/2),r.position.copy(t),this.scene.add(r)};createContainerBoxForModel=(t,e,s,r)=>{const i=new kN.BoxGeometry(t,e,s);this.config.color||(this.config.color=16724787);const n=new kN.MeshPhongMaterial({color:this.config.color,opacity:0,transparent:!0});return new kN.Mesh(i,n)};addContainerBoxToScene=t=>{const e=new kN.BoxGeometry(this.config.width,this.config.height,this.config.depth);this.config.color||(this.config.color=16724787);const s=new kN.MeshPhongMaterial({color:this.config.color,opacity:.5,transparent:!0});let r=new kN.Mesh(e,s);return r.position.copy(t),r};convertToObj3D=t=>{let e,s,r,i=t.type;switch(console.log("loaded type: ",i),i){case"Mesh":break;case"BufferGeometry":switch(t.center(),this.config.format){case"xyz":s=!0===t.hasAttribute("color"),e=new kN.PointsMaterial({size:.1,vertexColors:s}),t=new kN.Points(t,e);break;case"vtk":r=t,r.computeVertexNormals(),r.center(),e=new kN.MeshLambertMaterial({color:16711680}),t=new kN.Mesh(r,e)}break;case"Scene":case"Group":break;case void 0:switch(this.config.format){case"vox":let e=new kN.Scene;for(let s=0;s<t.length;s++){const r=t[s],i=new NP(r);i.scale.setScalar(.0015),e.add(i)}return e}break;default:return console.log("unknown type: ",i),!1}return this.configureImportedObject(t)};configureImportedObject=t=>(t.castShadow=!0,t);startAnimation=(t,e)=>{this.setCurrentAnimation(t),this.startCurrentAnimation(e)};setCurrentAnimation=t=>{this.currentAnimation=t};startCurrentAnimation=t=>{t||(t=kN.LoopRepeat);let e=this,s=this.currentAnimation;if(this.animations)if(this.animations[s]){this.mixer=new kN.AnimationMixer(this.mesh);let r=this.animations[s];this.action=this.mixer.clipAction(r),this.action.setLoop(t),this.action.play(),this.animRunning=!0,this.mixer.addEventListener("finished",(t=>{console.log("animation not running now"),e.setAnimRunning(!1)}),!1)}else console.log("animation",s,"doesnt exist");else console.log("no animations: "),console.log(this.mesh)};stopAnimation=()=>{this.action&&(this.action.stop(),this.action=null),this.animRunning=!1};setAnimRunning=t=>{this.animRunning=t,console.log("animation running set to: ",t)};shouldBeCentered=t=>{if(t.length>1)return!1;if(!t[0].isMesh)return!1;let e=t[0];return 0!=e.position.x||(0!=e.position.z||0!=e.position.y)};getImportedObjectSize=t=>{let e=(new kN.Box3).setFromObject(t),s=(new kN.Vector3,new kN.Vector3,e.max),r=e.min;s.z,r.z,s.x,r.x;return s.y-r.y};setScale=t=>{let e=2,s=2,r=2,i=this.getMeshBounds(t),n=[e/Math.abs(i.max.x-i.min.x),s/Math.abs(i.max.y-i.min.y),r/Math.abs(i.max.z-i.min.z)],o=Math.min(...n);t.scale.set(o,o,o)};getMeshBounds=t=>{let e=null;return t.traverse((function(t){t.isMesh&&(t.geometry.computeBoundingBox(),e=t.geometry.boundingBox,console.log(e))})),e};getPosition=()=>{let t=new kN.Vector3;return t.copy(this.mesh.position),console.log("item pos: ",t),t};positionItem=(t,e)=>{t.position.copy(e)};rotateItem=()=>{};addToScene=t=>{this.scene.add(t),console.log("model added to scene"),console.log(this.scene)}}class GN{constructor(t){if(this.config={createListeners:!0,scene:null,...t},null===this.config.scene)throw"D3D Lighting: No Scene available";this.scene=this.config.scene,this.initLights(),this.config.createListeners&&this.addListeners()}addListeners=()=>{this.addEventListenerAmbient(),this.addEventListenersDirectional()};addEventListenerAmbient=()=>{let t=this,e=document.body.querySelector('input[name="ambient"]');if(!e)return!1;e.addEventListener("change",(e=>{let s=e.target.value;t.setIntensity("ambient",s)}),!1)};addEventListenersDirectional=()=>{var t=this;this.dLights=Object.keys(this.dLighting),this.dLights.forEach(((e,s)=>{t.addEventListenerDirectional(e)}))};addEventListenerDirectional=t=>{let e=this,s=document.body.querySelector('input[name="'+t+'"]');if(!s)return!1;this.dLighting[t];s.addEventListener("change",(s=>{let r=s.target.value;e.setIntensity(t,r)}),!1)};initLights=()=>{this.aLight=new xl(16777215,.5),this.scene.add(this.aLight),this.dLighting=[];const t=new wl(16777215,1);t.position.set(0,15,0),this.scene.add(t),this.dLighting.above=t;const e=new wl(16777215,.5);e.position.set(0,-15,0),this.scene.add(e),this.dLighting.below=e;const s=new wl(16777215,0);this.configureLight(s),s.position.set(-15,6,0),this.scene.add(s),this.dLighting.left=s;const r=new wl(16777215,0);this.configureLight(r),r.position.set(15,6,0),this.scene.add(r),this.dLighting.right=r;const i=new wl(16777215,0);this.configureLight(i),i.position.set(0,6,-15),this.scene.add(i),this.dLighting.front=i;const n=new wl(16777215,0);this.configureLight(n),n.position.set(0,6,15),this.scene.add(n),this.dLighting.back=n};configureLight=t=>{t.castShadow=!0,t.shadow.camera.top=200,t.shadow.camera.bottom=-200,t.shadow.camera.left=-200,t.shadow.camera.right=200,t.shadow.camera.near=.1,t.shadow.camera.far=500};setDirectionAll(t){var e=this;this.dLights=Object.keys(this.dLighting),this.dLights.forEach(((s,r)=>{e.dLighting[s].lookAt(t)}))}setIntensity(t,e){"ambient"===t?this.setIntensityAmb(e):this.setIntensityDLight(t,e)}setIntensityAmb(t){this.aLight.intensity=t}setIntensityDLight(t,e){this.dLighting[t].intensity=e}}let jN=!1,zN=!1,VN=!1,WN=!1;const YN=!1,XN=-30,qN=10,KN=5;class JN{constructor(t){let e={el:document.body,handlers:{}};this.config={...e,...t},this.optionsMenu=this.createOptionsMenu(this.el),this.addEventListeners()}createOptionsMenu=()=>{const t=document.getElementById("nft-overlay");if(t){let e=t.cloneNode(!0);return e.setAttribute("style","display:inline-block;"),this.config.el.appendChild(e),e}return!1};addEventListeners=()=>{let t=this,e=this.optionsMenu.querySelector("#floor");e.addEventListener("change",(s=>{t.config.handlers.floor&&t.config.handlers.floor(e.checked)}));let s=this.optionsMenu.querySelector("#sky");s.addEventListener("change",(e=>{t.config.handlers.sky&&t.config.handlers.sky(s.checked)}))}}class $N{constructor(t){this.config={defaultLoader:"gltf",useOwnHandlers:!1,...t}}getLoaderForFormat=t=>{if(!t)throw"Loaders:getLoaderForFormat: Unknown format";let e,s,r;switch(t=t.toLowerCase(),console.log("getLoaderForFormat: ",t),this.loadingManager=new $c,this.loadingManager.addHandler(/\.tga$/i,new Om),t){case"3dm":let t=new hp(this.loadingManager);return t.setLibraryPath("https://cdn.jsdelivr.net/npm/rhino3dm@7.11.1/"),t;case"3ds":return new BM(this.loadingManager);case"3mf":return new Am(this.loadingManager);case"amf":return new Rm(this.loadingManager);case"bvh":return new Cm(this.loadingManager);case"basistexture":return new BasisTextureLoader(this.loadingManager);case"dae":return new _m(this.loadingManager);case"dds":return new Pm(this.loadingManager);case"drc":return e=new Fm(this.loadingManager),e.setDecoderPath("/libs/draco/"),e.setDecoderConfig({type:"js"}),e;case"3xr":return new Nm(this.loadingManager);case"fbx":return new zm(this.loadingManager);case"font":return new cf(this.loadingManager);case"gcode":return new pf(this.loadingManager);case"glb":case"gltf":return r=new df(this.loadingManager),e=new Fm(this.loadingManager),e.setDecoderPath("./libs/draco/"),e.setDecoderConfig({type:"js"}),r.setDRACOLoader(e),s=new uF(this.loadingManager),r.setKTX2Loader(s),r;case"hdrcubetexture":return new mg(this.loadingManager);case"ifc":let i=new oF(this.loadingManager);return i.ifcManager.setWasmPath("./libs/ifc/"),i;case"kmz":return new aF(this.loadingManager);case"ktx2":return new uF(this.loadingManager);case"mpd":return new AF(this.loadingManager);case"lut3dl":return new _F(this.loadingManager);case"lutcube":return new DF(this.loadingManager);case"lwo":return new BF(this.loadingManager);case"logluv":return new RF(this.loadingManager);case"lottie":return new OF(this.loadingManager);case"md2":return new WF(this.loadingManager);case"mdd":return new YF(this.loadingManager);case"mmd":case"pmd":case"vmd":case"vpd":return new QF(this.loadingManager);case"mtl":return new hM(this.loadingManager);case"nrrd":return new pM(this.loadingManager);case"obj":return new SM(this.loadingManager);case"pcd":return new AM(this.loadingManager);case"pdb":return new RM(this.loadingManager);case"ply":return new OM(this.loadingManager);case"prwm":return new NM(this.loadingManager);case"pvr":return new LM(this.loadingManager);case"rgbe":return new dg(this.loadingManager);case"rgbm":return new RGBMLoader(this.loadingManager);case"stl":return new UM(this.loadingManager);case"svg":return new HM(this.loadingManager);case"tds":return new BM(this.loadingManager);case"tga":return new Om(this.loadingManager);case"ttf":return new TTFLoader(this.loadingManager);case"tilt":return new CP(this.loadingManager);case"vox":return new PP(this.loadingManager);case"vrml":case"wrl":return new SN(this.loadingManager);case"vtk":return new DN(this.loadingManager);case"xyz":return new FN(this.loadingManager);default:return!1}}}class ZN{constructor(t){let e={bgColor:0,el:document.body,ctrClass:"data-nft",fitOffset:1.25,nftsRoute:"nfts",modelsRoute:"models",sceneryPath:"/layouts/round_showroom/scene.gltf",skyboxPath:"",skyBoxList:["blue","bluecloud","browncloud","lightblue","yellowcloud"],skyBox:"blue",controls:{maxDistance:1/0,maxPolarAngle:1/0},useOwnHandlers:!1};this.config={...e,...t},this.containerInitialized=!1,this.el=this.config.el,this.playerVelocity=new Ge,this.upVector=new Ge(0,1,0),this.tempVector=new Ge,this.tempVector2=new Ge,this.tempBox=new Ve,this.tempMat=new Ts,this.tempSegment=new Au,this.isFullScreen=!1,this.floorPlane=null,this.cameraVector=new Ge,this.dolly=null,this.prevGamePads=new Map,this.speedFactor=[.1,.1,.1,.1],this.controllers=[],this.loaders=new $N({defaultLoader:this.defaultLoader}),this.initLoaders(),this.showroomLoaded=!1,UN=null,HN=null}setFormat=t=>{console.log("setFormat: ",t);let e=this.loaders.getLoaderForFormat(t);if(!1===e)throw"Error - No Loader Availble for File Format: "+t+" in D3DNFTViewer";console.log("set loader"),this.format=t,this.loader=e};initScene=()=>{this.scene=new Xo};clearScene=t=>{this.scene;this.recursiveDestroy(this.scene,t)};clearMesh=(t,e)=>{this.loadedItem&&this.loadedItem.mesh&&(t=this.loadedItem.mesh,this.recursiveDestroy(t,e))};recursiveDestroy=(t,e)=>{for(;t.children.length>0;)this.recursiveDestroy(t.children[0],e),t.remove(t.children[0]);t.geometry&&t.geometry.dispose(),t.material&&(Object.keys(t.material).forEach((e=>{t.material[e]&&null!==t.material[e]&&"function"==typeof t.material[e].dispose&&t.material[e].dispose()})),t.material.dispose()),0===t.children.length&&e()};initContainer(t){if(this.containerInitialized)return!0;this.parentDivEl=t,this.parentDivElWidth=this.parentDivEl.offsetWidth,this.parentDivElHeight=this.parentDivEl.offsetHeight,this.initScene(),this.clock=new jl,this.initSkybox(),this.config.bgColor&&this.setBgColor(this.config.bgColor),this.initCamera(),this.initRenderer(t),this.initLighting(),this.initPlayer(),this.initControls(),this.addListeners(),this.containerInitialized=!0}initCamera=()=>{this.camera=new Jr(60,this.parentDivElWidth/600,.01,1e3),this.camera.position.set(0,4,12),this.camera.lookAt(0,0,0)};initControls=()=>{this.controls=new LN(this.camera,this.renderer.domElement),this.restrictCameraToRoom(),this.controls.addEventListener("change",this.render),this.controls.update()};restrictCameraToRoom=()=>{console.log("restrictCameraToRoom",this.config.controls),this.controls.maxDistance=this.config.controls.maxDistance,this.controls.maxPolarAngle=this.config.controls.maxPolarAngle,this.controls.update()};unRestrictCamera=()=>{this.controls.maxDistance=1/0,this.controls.maxPolarAngle=1/0,this.controls.update()};initRenderer=t=>{this.renderer=new zo({antialias:!0,alpha:!0,preserveDrawingBuffer:!0}),this.renderer.outputEncoding=zt,this.renderer.shadowMap.enabled=!0,this.renderer.xr.enabled=!0,this.renderer.xr.setFramebufferScaleFactor(2),this.renderer.setSize(this.parentDivElWidth,this.parentDivElHeight),this.renderer.setClearColor(0,1),this.renderer.domElement.style.display="none",this.renderer.domElement.id="3d-nft-canvas",t?t.appendChild(this.renderer.domElement):(this.renderer.domElement.style.display="none",this.el.appendChild(this.renderer.domElement)),this.pmremGenerator=new Oi(this.renderer),this.pmremGenerator.compileEquirectangularShader(),this.renderer.domElement.style.width="100%",this.renderer.domElement.style.height="100%"};initSkybox=()=>{!1!==this.config.skyboxes&&(this.skyBoxLoader=new tL({scene:this.scene,skyBoxPath:this.config.skyboxPath,skyBoxList:this.config.skyBoxList}),this.config.skyBox?this.skyBoxLoader.setSkyBox(this.config.skyBox):this.skyBoxLoader.setRandomSkyBox())};addSky=()=>{this.skyBoxLoader.setRandomSkyBox()};setSkyBox=t=>{this.skyBoxLoader.setSkyBox(t)};setBgColor=t=>{t instanceof Ae||(t=new Ae("#"+t)),this.scene.background=t};removeSky=()=>{this.scene.background=null};initLighting=()=>{this.lights=new GN({scene:this.scene,createListeners:!0})};initLoaders=()=>{this.loader=this.loaders.getLoaderForFormat(this.config.defaultLoader)};addListeners=()=>{this.addEventListenerResize(),this.addEventListenerContextLost(),this.addEventListenerExitFullScreen()};addEventListenerKeys=()=>{let t=this;window.addEventListener("keydown",(function(e){switch(e.code){case"KeyW":jN=!0;break;case"KeyS":zN=!0;break;case"KeyD":WN=!0;break;case"KeyA":VN=!0;break;case"Space":t.playerIsOnGround&&(t.playerVelocity.y=10)}})),window.addEventListener("keyup",(function(t){switch(t.code){case"KeyW":jN=!1;break;case"KeyS":zN=!1;break;case"KeyD":WN=!1;break;case"KeyA":VN=!1}}))};showOverlay=()=>{let t=this;new JN({el:this.parentDivEl,handlers:{floor:e=>{e?t.addScenery():(t.unRestrictCamera(),t.removeFloor())},sky:e=>{e?t.addSky():t.removeSky()}}})};addEventListenerResize=()=>{window.addEventListener("resize",this.resize.bind(this),!1)};addEventListenerContextLost=()=>{let t=this.renderer.getContext();t&&t.canvas&&t.canvas.addEventListener("webglcontextlost",this.onLostContext)};onLostContext=t=>{t.preventDefault(),console.log("lost Context!",t),this.renderer.setAnimationLoop(null)};addEventListenerExitFullScreen=()=>{document.addEventListener&&(document.addEventListener("webkitfullscreenchange",this.fsChangeHandler,!1),document.addEventListener("mozfullscreenchange",this.fsChangeHandler,!1),document.addEventListener("fullscreenchange",this.fsChangeHandler,!1),document.addEventListener("MSFullscreenChange",this.fsChangeHandler,!1))};fsChangeHandler=()=>{if(document.webkitIsFullScreen||document.mozFullScreen||void 0!==document.msFullscreenElement);else{var t=this.renderer.domElement;t.style.width="auto",t.style.height="auto",this.isFullScreen=!1,this.camera.aspect=this.parentDivElWidth/this.parentDivElHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.parentDivElWidth,this.parentDivElHeight)}};resize=()=>{this.renderer.xr.isPresenting||this.resizeCanvas()};resizeCanvas=()=>{if(this.isFullScreen){let t=screen.width,e=screen.height;this.camera.aspect=t/e,this.camera.updateProjectionMatrix(),this.renderer.setSize(t,e)}else this.parentDivElWidth=this.parentDivEl.offsetWidth,this.parentDivElHeight=this.parentDivEl.offsetHeight,this.camera.aspect=this.parentDivElWidth/this.parentDivElHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.parentDivElWidth,this.parentDivElHeight);this.loadedItem&&this.fitCameraToMesh(this.loadedItem)};animate=()=>{this.renderer.setAnimationLoop(this.render)};render=()=>{!0===this.renderer.xr.isPresenting&&this.vrControls.checkControllers();const t=Math.min(this.clock.getDelta(),.1);if(HN){HN.visible=YN;const e=KN;for(let s=0;s<e;s++)this.updatePlayer(t/e)}this.loadedItem&&null!==this.loadedItem.mixer&&this.loadedItem.mixer.update(t),this.renderer.render(this.scene,this.camera)};fitCameraToMesh(t){if(!t.mesh)return!1;const e=(new Ve).setFromObject(t.mesh),s=new Ge,r=new Ge;e.getSize(r),e.getCenter(s);const i=Math.max(r.x,r.y,r.z)/(2*Math.atan(Math.PI*this.camera.fov/360)),n=i/this.camera.aspect,o=this.config.fitOffset*Math.max(i,n);this.distance=o;const a=this.controls.target.clone().sub(this.camera.position).normalize().multiplyScalar(o);this.controls.maxDistance=10*o,this.controls.target.copy(s),this.camera.near=o/100,this.camera.far=100*o,this.camera.updateProjectionMatrix(),this.camera.position.copy(this.controls.target).sub(a),this.controls.update()}centerMeshInScene=t=>{let e=null;if(1===t.children.length)return e=t.children[0],e.geometry.center(),e;t.traverse((t=>{if(t.isMesh)return e=t,e.geometry.center(),e}))};getImportedObjectSize=t=>{let e=(new Ve).setFromObject(t),s=e.max,r=e.min;s.z,r.z,s.x,r.x;return s.y-r.y};updateUI=(t,e)=>{let s=this.config.linkCtrCls;s=document.querySelector("."+s);let r=this.createLinkView3D();this.addClickListener3D(s,r,e);let i=this.createLinkFullScreen();this.addClickListenerFullScreen(s,i,e);let n=this.createLinkVR();this.addClickListenerVR(s,n,e);var o=s;o.innerHTML="",o.appendChild(r),o.appendChild(i),o.appendChild(n),t.setAttribute("model-status","available")};createLinkView3D=()=>{var t=document.createElement("a"),e=document.createTextNode(this.config.linkText);return t.appendChild(e),t.title="View in 3D",t.href="#",t.classList="btn d3d-btn view-3d-btn",t};createLinkFullScreen=()=>{var t=document.createElement("a"),e=document.createTextNode("Full Screen");return t.appendChild(e),t.title="Fullscreen",t.href="#",t.classList="btn d3d-btn view-fullscreen-btn",t.setAttribute("style","display:none;"),t};createLinkVR=()=>{var t=document.createElement("a"),e=document.createTextNode("View in VR");return t.appendChild(e),t.title="View in VR",t.href="#",t.classList="btn d3d-btn view-vr-btn",t.setAttribute("style","display:none;"),t};openFullscreen=()=>{var t=this.renderer.domElement;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen(),t.style.width="100%",t.style.height="100%",this.isFullScreen=!0};addClickListener3D=(t,e,s)=>{let r=this,i=document.querySelector("."+this.config.previewCtrCls),n=i.querySelector("img");e.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation(),r.updateLink(e,"Loading.."),r.initContainer(i);let o=r.initItemForModel(s),a=new Ge(0,3.7,0);o.place(a).then(((t,e)=>{r.resizeCanvas(),n.style.display="none",this.renderer.domElement.style.display="inline-block"})),e.setAttribute("style","display:none;"),e.parentNode.getElementsByClassName("view-fullscreen-btn")[0].setAttribute("style","display:inline-block;"),e.parentNode.getElementsByClassName("view-vr-btn")[0].setAttribute("style","display:inline-block;"),r.start3D()}))};loadModel=t=>{let e=this;return new Promise(((s,r)=>{let i=t.hideElOnLoad,n=t.modelUrl,o=t.containerId,a=document.getElementById(o);if(e.initContainer(a),this.config.useShowroom&&!this.showroomLoaded)this.sceneryLoader=this.loaders.getLoaderForFormat("gltf"),this.loadColliderEnvironment().then((()=>{let t=e.initItemForModel(n),r=new Ge(0,this.floorY,0);t.place(r).then(((r,n)=>{e.mesh=r,e.resizeCanvas();let o=document.querySelector("#"+i);o&&(o.style.display="none"),this.renderer.domElement.style.display="inline-block",s(t,r,n)}))}));else{let t=e.initItemForModel(n),r=new Ge(0,this.floorY,0);t.place(r).then(((r,n)=>{e.mesh=r,e.resizeCanvas();let o=document.querySelector("#"+i);o&&(o.style.display="none"),this.renderer.domElement.style.display="inline-block",s(t,r,n)}))}}))};loadNFT=t=>{let e=this;return new Promise(((s,r)=>{let i=t.hideElOnLoad,n=(t.nftPostHashHex,t.containerId),o=document.getElementById(n);if(e.initContainer(o),this.config.useShowroom&&!this.showroomLoaded)this.sceneryLoader=this.loaders.getLoaderForFormat("gltf"),this.loadColliderEnvironment().then((()=>{let r=e.initItem(t),n=new Ge(0,this.floorY,0);r.place(n).then(((t,n)=>{e.mesh=t,e.resizeCanvas();let o=document.querySelector("#"+i);o&&(o.style.display="none"),this.renderer.domElement.style.display="inline-block",s(r,t,n)}))}));else{let r=e.initItem(t),n=new Ge(0,this.floorY,0);r.place(n).then(((t,n)=>{e.mesh=t,e.resizeCanvas();let o=document.querySelector("#"+i);o&&(o.style.display="none"),this.renderer.domElement.style.display="inline-block",s(r,t,n)}))}}))};start3D=()=>{this.initVR(),this.animate()};initInventory=()=>{this.inventory=new D3DInventory({three:op,items:this.config.items,scene:this.scene,loader:this.loader})};initItem=t=>{let e=t.nftPostHashHex,s="",r=[],i="";if(t.nftRequestParams){let e=t.nftRequestParams;Object.keys(e).forEach(((t,s)=>{r.push(t+"="+e[t])})),s=r.join("&"),i=this.config.nftsRoute+"?"+s}return console.log("initItem nftsRoute: ",i),this.loadedItem=new BN({three:op,scene:this.scene,height:this.config.scaleModelToHeight,width:this.config.scaleModelToWidth,depth:this.config.scaleModelToDepth,loader:this.loaders.getLoaderForFormat(t.format),nftPostHashHex:e,modelsRoute:this.config.modelsRoute,nftsRoute:i}),this.loadedItem};initItemForModel=(t,e)=>{if(void 0===e){let s=t.split(".");e=s[s.length-1]}return console.log("initItem (Model)",e),this.loadedItem=new BN({three:op,loader:this.loaders.getLoaderForFormat(e),scene:this.scene,height:this.config.scaleModelToHeight,width:this.config.scaleModelToWidth,depth:this.config.scaleModelToDepth,modelUrl:t,modelsRoute:this.config.modelsRoute,nftsRoute:this.config.nftsRoute,format:e}),this.loadedItem};initVR=()=>{let t=this;QN.registerSessionGrantedListener();QN.createButton(this.renderer,{btnCtr:this.config.ctrClass});this.vrControls=new eL({scene:this.scene,renderer:this.renderer,camera:this.camera,moveUp:t=>{},moveDown:t=>{},moveLeft:t=>{VN=!0},moveRight:t=>{WN=!0},moveForward:t=>{jN=!0},moveBack:t=>{zN=!0},rotateLeft:e=>{try{let e=.017453;t.player.rotateY(e),t.dolly.rotateY(e)}catch(t){console.log(t)}},rotateRight:e=>{try{let e=-.017453;t.player.rotateY(e),t.dolly.rotateY(e)}catch(t){console.log(t)}}}),this.dolly=this.vrControls.buildControllers()};loadColliderEnvironment=()=>{var t=this;return this.showroomLoaded=!0,new Promise(((e,s)=>{this.sceneryLoader.load(this.config.sceneryPath,(s=>{const r=s.scene;r.scale.set(.2,.2,.2);const i=new Ve;i.setFromObject(r),i.getCenter(r.position).negate(),r.updateMatrixWorld(!0);const n={};r.traverse((t=>{if(t.isMesh){t.castShadow=!1,t.receiveShadow=!0;const e=t.material.color.getHex();n[e]=n[e]||[],n[e].push(t)}})),UN=new ko;for(const t in n){const e=n[t],s=[];if(e.forEach((t=>{if(0!==t.material.emissive.r)UN.attach(t);else{const e=t.geometry.clone();e.applyMatrix4(t.matrixWorld),s.push(e)}})),s.length){const e=GD(s),r=new jr(e,new Ac({color:parseInt(t),shadowSide:2}));r.castShadow=!0,r.receiveShadow=!0,r.material.shadowSide=2,UN.add(r)}}const o=[];UN.updateMatrixWorld(!0),UN.traverse((t=>{if(t.geometry){const e=t.geometry.clone();e.applyMatrix4(t.matrixWorld);for(const t in e.attributes)"position"!==t&&e.deleteAttribute(t);o.push(e)}}));const a=GD(o,!1);a.boundsTree=new Sk(a,{lazyGeneration:!1}),this.bvh=a.boundsTree,HN=new jr(a),HN.material.wireframe=!1,HN.material.opacity=1,HN.material.transparent=!0,HN.position.setX(0),HN.position.setZ(0),this.scene.add(HN),HN.updateMatrixWorld(),r.position.setX(0),r.position.setZ(0),r.updateMatrixWorld(),t.sceneryMesh=r,t.collider=HN,this.floorY=t.getFloorLevel(HN),e(r)}))}))};getFloorLevel=t=>{const e=new Ts;e.copy(this.sceneryMesh.matrixWorld).invert();let s=new Ge(0,100,0),r=new Ge(0,-100,0),i=new Ge;i.subVectors(r,s).normalize();let n=new Tu;n.ray.applyMatrix4(e),n.set(s,i);const o=this.bvh.raycastFirst(n.ray);new Ge(0,o.point.y,0);return o.point.y};addPlaneAtPos=t=>{var e=new li(20,20),s=new Cc({color:16737894,side:2}),r=new jr(e,s);r.rotateX(-Math.PI/2),r.position.copy(t),this.scene.add(r)};addScenery=()=>{let t=this;this.sceneryMesh?(console.log("adding ALREADY loaded sceneryMesh"),this.scene.add(this.sceneryMesh),this.restrictCameraToRoom()):(this.sceneryLoader=this.loaders.getLoaderForFormat("gltf"),this.loadColliderEnvironment().then((()=>{if(console.log("adding newly loaded sceneryMesh"),t.scene.add(t.sceneryMesh),t.sceneryMesh.updateMatrixWorld(),loadedItem.mesh.updateMatrixWorld(),this.loadedItem){let e=new Ge(0,this.floorY,0);this.loadedItem.moveTo(e),t.resizeCanvas(),this.restrictCameraToRoom()}})))};removeScenery=()=>{this.sceneryMesh&&(this.scene.remove(this.sceneryMesh),this.unRestrictCamera())};removeFloor=()=>{this.removeScenery()};addClickListenerFullScreen=(t,e,s)=>{let r=this;e.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation(),r.openFullscreen(),r.resizeCanvas(!0)}))};addClickListenerVR=(t,e,s)=>{let r=this;e.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation(),r.openVR()}))};openVR=t=>{};updateLink=(t,e)=>{t.text=e};findElFrom=(t,e)=>{let s=null,r=e.getElementsByClassName(t);return r.length>0&&(s=r[0]),s};initNFTs=t=>{t||(t=document.body),Array.from(t.getElementsByClassName(this.config.ctrClass)).forEach(this.initModel)};initModel=t=>{const e=this;let s=t.getAttribute("model-status");if(s||(s="requested",t.setAttribute("model-status",s)),"available"!==s){let s=t.getAttribute(this.config.nftDataAttr),r="";r=-1===e.config.modelsRoute.indexOf("http")?"/"+this.config.nftsRoute+"/"+s:this.config.nftsRoute+"/"+s,fetch(r,{method:"post"}).then((t=>t.json())).then((r=>{if(void 0!==r){let i="";i=-1===e.config.modelsRoute.indexOf("http")?"/"+e.config.modelsRoute+"/"+s+r.modelUrl:e.config.modelsRoute+"/"+s+r.modelUrl,this.updateUI(t,i)}})).catch((t=>{console.log(t),console.log(response)}))}};initPlayer=()=>{let t=new Ac;t.opacity=0,t.transparent=!0,this.player=new jr(new Vr(1,1,1),t),this.player.capsuleInfo={radius:.75,segment:new Au(new Ge,new Ge(0,-1,0))},this.player.rotateY(0),this.player.position.set(0,0,6),this.scene.add(this.player)};updatePlayer=t=>{this.showroomLoaded&&(this.playerVelocity.y+=this.playerIsOnGround?0:t*XN),this.player.position.addScaledVector(this.playerVelocity,t),jN&&this.player.translateZ(-qN*t),zN&&this.player.translateZ(qN*t),VN&&this.player.translateX(-qN*t),WN&&this.player.translateX(qN*t),this.player.updateMatrixWorld();const e=this.player.capsuleInfo;this.tempBox.makeEmpty(),this.tempMat.copy(HN.matrixWorld).invert(),this.tempSegment.copy(e.segment),this.tempSegment.start.applyMatrix4(this.player.matrixWorld).applyMatrix4(this.tempMat),this.tempSegment.end.applyMatrix4(this.player.matrixWorld).applyMatrix4(this.tempMat),this.tempBox.expandByPoint(this.tempSegment.start),this.tempBox.expandByPoint(this.tempSegment.end),this.tempBox.min.addScalar(-e.radius),this.tempBox.max.addScalar(e.radius),HN.geometry.boundsTree.shapecast({intersectsBounds:t=>t.intersectsBox(this.tempBox),intersectsTriangle:t=>{const s=this.tempVector,r=this.tempVector2,i=t.closestPointToSegment(this.tempSegment,s,r);if(i<e.radius){const t=e.radius-i,n=r.sub(s).normalize();this.tempSegment.start.addScaledVector(n,t),this.tempSegment.end.addScaledVector(n,t)}}});const s=this.tempVector;s.copy(this.tempSegment.start).applyMatrix4(HN.matrixWorld);const r=this.tempVector2;r.subVectors(s,this.player.position),this.playerIsOnGround=r.y>Math.abs(t*this.playerVelocity.y*.25);const i=Math.max(0,r.length()-1e-5);if(r.normalize().multiplyScalar(i),this.player.position.add(r),this.playerIsOnGround?this.playerVelocity.set(0,0,0):(r.normalize(),this.showroomLoaded&&this.playerVelocity.addScaledVector(r,-r.dot(this.playerVelocity))),this.renderer.xr.isPresenting&&this.player.position&&this.player.position.x){let t=this.player.position.x,e=this.player.position.y,s=this.player.position.z;this.dolly.position.set(t,e+.15,s)}this.player.position.y<-25&&this.reset(),jN=!1,zN=!1,WN=!1,VN=!1};reset=()=>{this.playerVelocity.set(0,0,0),this.player.position.set(0,5,5),this.camera.position.set(0,6.5,5)}}class QN{static createButton(t,e){let s=null;e={btnCls:"view-vr-btn",btnCtr:"collection-wrapper",...e};let r=document.getElementsByClassName(e.btnCls);if(r[0])s=r[0],console.log(s);else{s=document.createElement("button"),s.textContent="View In VR";let t=document.getElementById(e.btnCtr);t&&t.append(s)}function i(){s.style.display="",s.style.cursor="auto",s.style.left="calc(50% - 75px)",s.style.width="150px",s.onmouseenter=null,s.onmouseleave=null,s.onclick=null,s.textContent="VR NOT SUPPORTED"}if(!("xr"in navigator)){console.log("xr NOT FOUND in navigator");const t=document.createElement("a");return!1===window.isSecureContext?(t.href=document.location.href.replace(/^http:/,"https:"),t.innerHTML="WEBXR NEEDS HTTPS"):(t.href="https://immersiveweb.dev/",t.innerHTML="WEBXR NOT AVAILABLE"),t.style.left="calc(50% - 90px)",t.style.width="180px",t.style.textDecoration="none",function(t){t.style.position="absolute",t.style.bottom="20px",t.style.padding="12px 6px",t.style.border="1px solid #fff",t.style.borderRadius="4px",t.style.background="rgba(0,0,0,0.1)",t.style.color="#fff",t.style.font="normal 13px sans-serif",t.style.textAlign="center",t.style.opacity="0.5",t.style.outline="none",t.style.zIndex="999"}(t),t}if(console.log("xr found in navigator"),s)return s.id="VRButton",s.style.display="none",navigator.xr.isSessionSupported("immersive-vr").then((function(e){console.log("immersive-vr supported: ",e),e?function(){let e=null;async function r(r){console.log("session started"),r.addEventListener("end",i),t.xr.setSession(r).then((()=>{s.textContent="EXIT VR",e=r}))}function i(){e.removeEventListener("end",i),s.textContent="ENTER VR",e=null}s.style.display="inline-block",s.onmouseenter=function(){s.style.opacity="1.0"},s.onmouseleave=function(){s.style.opacity="0.5"},s.onclick=function(){if(console.log("click vr button"),null===e){console.log("click vr button2");const t={optionalFeatures:["local-floor","bounded-floor","hand-tracking","layers"]};navigator.xr.requestSession("immersive-vr",t).then(r),console.log("session requested")}else console.log("click vr button: end session"),e.end()},console.log("onclick event added to vr button")}():i(),e&&QN.xrSessionIsGranted&&s.click()})),s;console.log("button NOT found")}static xrSessionIsGranted=!1;static registerSessionGrantedListener(){"xr"in navigator&&navigator.xr.addEventListener("sessiongranted",(()=>{QN.xrSessionIsGranted=!0}))}}class tL{constructor(t){this.config={skyBoxPath:"",castShadow:!0,scene:null,...t},this.setScene(this.config.scene)}getRandomInt(t,e){return Math.floor(Math.random()*(e-t+1))+t}loadSkyBox(t){if(""===this.config.skyBoxPath)return!1;let e="";const s=new il;let r=this.config.skyBoxPath+"/"+t+"/";switch(s.setPath(r),t){case"bluecloud":e=s.load(["bluecloud_ft.jpg","bluecloud_bk.jpg","bluecloud_up.jpg","bluecloud_dn.jpg","bluecloud_rt.jpg","bluecloud_lf.jpg"]);break;case"yellowcloud":e=s.load(["yellowcloud_ft.jpg","yellowcloud_bk.jpg","yellowcloud_up.jpg","yellowcloud_dn.jpg","yellowcloud_rt.jpg","yellowcloud_lf.jpg"]);break;case"browncloud":e=s.load(["browncloud_ft.jpg","browncloud_bk.jpg","browncloud_up.jpg","browncloud_dn.jpg","browncloud_rt.jpg","browncloud_lf.jpg"]);break;case"lightblue":e=s.load(["right.png","left.png","top.png","bot.png","front.png","back.png"]);break;case"blue":e=s.load(["bkg1_right.png","bkg1_left.png","bkg1_top.png","bkg1_bot.png","bkg1_front.png","bkg1_back.png"])}return e}setRandomSkyBox=()=>{let t=this.getRandomInt(this.config.skyBoxList.length-1),e=this.loadSkyBox(this.config.skyBoxList[t]);this.scene.background=e};setSkyBox=t=>{let e=this.loadSkyBox(t);this.scene.background=e};setScene=t=>{this.scene=t}}class eL{constructor(t){this.config={renderer:null,scene:null,...t},this.init()}init=()=>{this.cameraVector=new Ge,this.dolly=null,this.prevGamePads=new Map,this.speedFactor=[.1,.1,.1,.1],this.controllers=[],this.renderer=this.config.renderer,this.scene=this.config.scene,this.camera=this.config.camera};buildControllers(){let t=this.renderer.xr.getController(0);t.name="left",this.scene.add(t);let e=this.renderer.xr.getController(1);e.name="right",this.scene.add(e);var s=new uL(new df);let r=this.renderer.xr.getControllerGrip(0);r.add(s.createControllerModel(r)),this.scene.add(r);let i=this.renderer.xr.getControllerGrip(1);i.add(s.createControllerModel(i)),this.scene.add(i);var n=(new Er).setFromPoints([new Ge(0,0,0),new Ge(0,0,-1)]),o=new Ha(n);o.name="line",o.scale.z=5,t.add(o.clone()),e.add(o.clone());let a=new ko;return a.position.set(0,0,0),a.name="dolly",this.scene.add(a),a.rotateY(0),a.add(this.camera),this.camera.rotateY(0),a.add(t),a.add(e),a.add(r),a.add(i),this.dolly=a,a}checkControllers=()=>{var t="unknown",e=this;const s=this.renderer.xr.getSession();if(s){var r=0;let i=this.renderer.xr.getCamera(this.camera);if(!i)return;if(i.getWorldDirection(e.cameraVector),this.isIterable(s.inputSources))for(const i of s.inputSources){if(i&&i.handedness&&(t=i.handedness),!i.gamepad)continue;this.renderer.xr.getController(r++);const s=this.prevGamePads.get(i),n={handedness:t,buttons:i.gamepad.buttons.map((t=>t.value)),axes:i.gamepad.axes.slice(0)};s&&(n.buttons.forEach(((t,e)=>{t!==s.buttons[e]||Math.abs(t)})),n.axes.forEach(((t,s)=>{Math.abs(t)>.5&&(e.speedFactor[s]>1?e.speedFactor[s]=1:e.speedFactor[s]*=1.001,2==s&&("left"==n.handedness?this.handleLeftController(n):this.handleRightController(n)),3==s&&("left"==n.handedness?this.handleLeftController(n):this.handleRightController(n)))}))),this.prevGamePads.set(i,n)}}};handleLeftController=t=>{this.handleLeftThumbstick("left",t)};handleRightController=t=>{this.handleRightThumbstick("right",t)};handleLeftThumbstick=(t,e)=>{this.isOverMovementThreshold(e.axes[2])&&(e.axes[2]>0?this.moveRight(e):e.axes[2]<0&&this.moveLeft(e)),this.isOverMovementThreshold(e.axes[3])&&(e.axes[3]>0?this.moveDown(e):e.axes[3]<0&&this.moveUp(e))};handleRightThumbstick=(t,e)=>{this.isOverMovementThreshold(e.axes[2])&&(e.axes[2]>0?this.rotateRight(e):e.axes[2]<0&&this.rotateLeft(e)),this.isOverMovementThreshold(e.axes[3])&&(e.axes[3]>0?this.moveBackward(e):e.axes[3]<0&&this.moveForward(e))};isOverMovementThreshold=t=>Math.abs(t)>.5;moveForward=t=>{this.config.moveForward(t)};moveBackward=t=>{this.config.moveBack(t)};moveLeft=t=>{this.config.moveLeft(t)};moveRight=t=>{this.config.moveRight(t)};moveUp=t=>{this.config.moveUp(t)};moveDown=t=>{this.config.moveDown(t)};rotateLeft=t=>{this.config.rotateLeft(t)};rotateRight=t=>{this.config.rotateRight(t)};dollyMove=()=>{var t="unknown",e=this;const s=this.renderer.xr.getSession();if(s){var r=0;let i=this.renderer.xr.getCamera(this.camera);if(!i)return;if(i.getWorldDirection(e.cameraVector),this.isIterable(s.inputSources))for(const i of s.inputSources){if(i&&i.handedness&&(t=i.handedness),!i.gamepad)continue;this.renderer.xr.getController(r++);const s=this.prevGamePads.get(i),n={handedness:t,buttons:i.gamepad.buttons.map((t=>t.value)),axes:i.gamepad.axes.slice(0)};s&&(n.buttons.forEach(((t,r)=>{(t!==s.buttons[r]||Math.abs(t)>.8)&&(1===t?"left"==n.handedness?(1==r&&e.dolly.rotateY(-ce.degToRad(1)),3==r&&(e.dolly.position.x=0,e.dolly.position.y=5,e.dolly.position.z=0)):1==r&&e.dolly.rotateY(ce.degToRad(1)):1==r&&("left"==n.handedness?e.dolly.rotateY(-ce.degToRad(Math.abs(t))):e.dolly.rotateY(ce.degToRad(Math.abs(t)))))})),n.axes.forEach(((t,s)=>{Math.abs(t)>.1?(e.speedFactor[s]>1?e.speedFactor[s]=1:e.speedFactor[s]*=1.001,2==s&&("left"==n.handedness?(e.dolly.position.x-=e.cameraVector.z*e.speedFactor[s]*n.axes[2],e.dolly.position.z+=e.cameraVector.x*e.speedFactor[s]*n.axes[2]):e.dolly.rotateY(-ce.degToRad(n.axes[2]))),3==s&&("left"==n.handedness?e.dolly.position.y-=e.speedFactor[s]*n.axes[3]:(e.dolly.position.x-=e.cameraVector.x*e.speedFactor[s]*n.axes[3],e.dolly.position.z-=e.cameraVector.z*e.speedFactor[s]*n.axes[3]))):Math.abs(t)>.025&&(e.speedFactor[s]=.025)}))),this.prevGamePads.set(i,n)}}};isIterable=t=>null!=t&&"function"==typeof t[Symbol.iterator]}const sL={Handedness:Object.freeze({NONE:"none",LEFT:"left",RIGHT:"right"}),ComponentState:Object.freeze({DEFAULT:"default",TOUCHED:"touched",PRESSED:"pressed"}),ComponentProperty:Object.freeze({BUTTON:"button",X_AXIS:"xAxis",Y_AXIS:"yAxis",STATE:"state"}),ComponentType:Object.freeze({TRIGGER:"trigger",SQUEEZE:"squeeze",TOUCHPAD:"touchpad",THUMBSTICK:"thumbstick",BUTTON:"button"}),ButtonTouchThreshold:.05,AxisTouchThreshold:.1,VisualResponseProperty:Object.freeze({TRANSFORM:"transform",VISIBILITY:"visibility"})};async function rL(t){const e=await fetch(t);if(e.ok)return e.json();throw new Error(e.statusText)}async function iL(t,e,s=null,r=!0){if(!t)throw new Error("No xrInputSource supplied");if(!e)throw new Error("No basePath supplied");const i=await async function(t){if(!t)throw new Error("No basePath supplied");return await rL(`${t}/profilesList.json`)}(e);let n;if(t.profiles.some((t=>{const s=i[t];return s&&(n={profileId:t,profilePath:`${e}/${s.path}`,deprecated:!!s.deprecated}),!!n})),!n){if(!s)throw new Error("No matching profile name found");const t=i[s];if(!t)throw new Error(`No matching profile name found and default profile "${s}" missing.`);n={profileId:s,profilePath:`${e}/${t.path}`,deprecated:!!t.deprecated}}const o=await rL(n.profilePath);let a;if(r){let e;if(e="any"===t.handedness?o.layouts[Object.keys(o.layouts)[0]]:o.layouts[t.handedness],!e)throw new Error(`No matching handedness, ${t.handedness}, in profile ${n.profileId}`);e.assetPath&&(a=n.profilePath.replace("profile.json",e.assetPath))}return{profile:o,assetPath:a}}const nL={xAxis:0,yAxis:0,button:0,state:sL.ComponentState.DEFAULT};class oL{constructor(t){this.componentProperty=t.componentProperty,this.states=t.states,this.valueNodeName=t.valueNodeName,this.valueNodeProperty=t.valueNodeProperty,this.valueNodeProperty===sL.VisualResponseProperty.TRANSFORM&&(this.minNodeName=t.minNodeName,this.maxNodeName=t.maxNodeName),this.value=0,this.updateFromComponent(nL)}updateFromComponent({xAxis:t,yAxis:e,button:s,state:r}){const{normalizedXAxis:i,normalizedYAxis:n}=function(t=0,e=0){let s=t,r=e;if(Math.sqrt(t*t+e*e)>1){const i=Math.atan2(e,t);s=Math.cos(i),r=Math.sin(i)}return{normalizedXAxis:.5*s+.5,normalizedYAxis:.5*r+.5}}(t,e);switch(this.componentProperty){case sL.ComponentProperty.X_AXIS:this.value=this.states.includes(r)?i:.5;break;case sL.ComponentProperty.Y_AXIS:this.value=this.states.includes(r)?n:.5;break;case sL.ComponentProperty.BUTTON:this.value=this.states.includes(r)?s:0;break;case sL.ComponentProperty.STATE:this.valueNodeProperty===sL.VisualResponseProperty.VISIBILITY?this.value=this.states.includes(r):this.value=this.states.includes(r)?1:0;break;default:throw new Error(`Unexpected visualResponse componentProperty ${this.componentProperty}`)}}}class aL{constructor(t,e){if(!(t&&e&&e.visualResponses&&e.gamepadIndices&&0!==Object.keys(e.gamepadIndices).length))throw new Error("Invalid arguments supplied");this.id=t,this.type=e.type,this.rootNodeName=e.rootNodeName,this.touchPointNodeName=e.touchPointNodeName,this.visualResponses={},Object.keys(e.visualResponses).forEach((t=>{const s=new oL(e.visualResponses[t]);this.visualResponses[t]=s})),this.gamepadIndices=Object.assign({},e.gamepadIndices),this.values={state:sL.ComponentState.DEFAULT,button:void 0!==this.gamepadIndices.button?0:void 0,xAxis:void 0!==this.gamepadIndices.xAxis?0:void 0,yAxis:void 0!==this.gamepadIndices.yAxis?0:void 0}}get data(){return{id:this.id,...this.values}}updateFromGamepad(t){if(this.values.state=sL.ComponentState.DEFAULT,void 0!==this.gamepadIndices.button&&t.buttons.length>this.gamepadIndices.button){const e=t.buttons[this.gamepadIndices.button];this.values.button=e.value,this.values.button=this.values.button<0?0:this.values.button,this.values.button=this.values.button>1?1:this.values.button,e.pressed||1===this.values.button?this.values.state=sL.ComponentState.PRESSED:(e.touched||this.values.button>sL.ButtonTouchThreshold)&&(this.values.state=sL.ComponentState.TOUCHED)}void 0!==this.gamepadIndices.xAxis&&t.axes.length>this.gamepadIndices.xAxis&&(this.values.xAxis=t.axes[this.gamepadIndices.xAxis],this.values.xAxis=this.values.xAxis<-1?-1:this.values.xAxis,this.values.xAxis=this.values.xAxis>1?1:this.values.xAxis,this.values.state===sL.ComponentState.DEFAULT&&Math.abs(this.values.xAxis)>sL.AxisTouchThreshold&&(this.values.state=sL.ComponentState.TOUCHED)),void 0!==this.gamepadIndices.yAxis&&t.axes.length>this.gamepadIndices.yAxis&&(this.values.yAxis=t.axes[this.gamepadIndices.yAxis],this.values.yAxis=this.values.yAxis<-1?-1:this.values.yAxis,this.values.yAxis=this.values.yAxis>1?1:this.values.yAxis,this.values.state===sL.ComponentState.DEFAULT&&Math.abs(this.values.yAxis)>sL.AxisTouchThreshold&&(this.values.state=sL.ComponentState.TOUCHED)),Object.values(this.visualResponses).forEach((t=>{t.updateFromComponent(this.values)}))}}class hL{constructor(t,e,s){if(!t)throw new Error("No xrInputSource supplied");if(!e)throw new Error("No profile supplied");this.xrInputSource=t,this.assetUrl=s,this.id=e.profileId,this.layoutDescription=e.layouts[t.handedness],this.components={},Object.keys(this.layoutDescription.components).forEach((t=>{const e=this.layoutDescription.components[t];this.components[t]=new aL(t,e)})),this.updateFromGamepad()}get gripSpace(){return this.xrInputSource.gripSpace}get targetRaySpace(){return this.xrInputSource.targetRaySpace}get data(){const t=[];return Object.values(this.components).forEach((e=>{t.push(e.data)})),t}updateFromGamepad(){Object.values(this.components).forEach((t=>{t.updateFromGamepad(this.xrInputSource.gamepad)}))}}class cL extends zs{constructor(){super(),this.motionController=null,this.envMap=null}setEnvironmentMap(t){return this.envMap==t||(this.envMap=t,this.traverse((t=>{t.isMesh&&(t.material.envMap=this.envMap,t.material.needsUpdate=!0)}))),this}updateMatrixWorld(t){super.updateMatrixWorld(t),this.motionController&&(this.motionController.updateFromGamepad(),Object.values(this.motionController.components).forEach((t=>{Object.values(t.visualResponses).forEach((t=>{const{valueNode:e,minNode:s,maxNode:r,value:i,valueNodeProperty:n}=t;e&&(n===sL.VisualResponseProperty.VISIBILITY?e.visible=i:n===sL.VisualResponseProperty.TRANSFORM&&(e.quaternion.slerpQuaternions(s.quaternion,r.quaternion,i),e.position.lerpVectors(s.position,r.position,i)))}))})))}}function lL(t,e){!function(t,e){Object.values(t.components).forEach((t=>{const{type:s,touchPointNodeName:r,visualResponses:i}=t;if(s===sL.ComponentType.TOUCHPAD)if(t.touchPointNode=e.getObjectByName(r),t.touchPointNode){const e=new gc(.001),s=new rr({color:255}),r=new jr(e,s);t.touchPointNode.add(r)}else console.warn(`Could not find touch dot, ${t.touchPointNodeName}, in touchpad component ${t.id}`);Object.values(i).forEach((t=>{const{valueNodeName:s,minNodeName:r,maxNodeName:i,valueNodeProperty:n}=t;if(n===sL.VisualResponseProperty.TRANSFORM){if(t.minNode=e.getObjectByName(r),t.maxNode=e.getObjectByName(i),!t.minNode)return void console.warn(`Could not find ${r} in the model`);if(!t.maxNode)return void console.warn(`Could not find ${i} in the model`)}t.valueNode=e.getObjectByName(s),t.valueNode||console.warn(`Could not find ${s} in the model`)}))}))}(t.motionController,e),t.envMap&&e.traverse((e=>{e.isMesh&&(e.material.envMap=t.envMap,e.material.needsUpdate=!0)})),t.add(e)}class uL{constructor(t=null){this.gltfLoader=t,this.path="https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@1.0/dist/profiles",this._assetCache={},this.gltfLoader||(this.gltfLoader=new GLTFLoader)}createControllerModel(t){const e=new cL;let s=null;return t.addEventListener("connected",(t=>{const r=t.data;"tracked-pointer"===r.targetRayMode&&r.gamepad&&iL(r,this.path,"generic-trigger").then((({profile:t,assetPath:i})=>{e.motionController=new hL(r,t,i);const n=this._assetCache[e.motionController.assetUrl];if(n)s=n.scene.clone(),lL(e,s);else{if(!this.gltfLoader)throw new Error("GLTFLoader not set.");this.gltfLoader.setPath(""),this.gltfLoader.load(e.motionController.assetUrl,(t=>{this._assetCache[e.motionController.assetUrl]=t,s=t.scene.clone(),lL(e,s)}),null,(()=>{throw new Error(`Asset ${e.motionController.assetUrl} missing or malformed.`)}))}})).catch((t=>{console.warn(t)}))})),t.addEventListener("disconnected",(()=>{e.motionController=null,e.remove(s),s=null})),e}}const pL=1.25,dL=65535,mL=Math.pow(2,-24);class fL{constructor(){}}function gL(t,e,s){return s.min.x=e[t],s.min.y=e[t+1],s.min.z=e[t+2],s.max.x=e[t+3],s.max.y=e[t+4],s.max.z=e[t+5],s}function yL(t){let e=-1,s=-1/0;for(let r=0;r<3;r++){const i=t[r+3]-t[r];i>s&&(s=i,e=r)}return e}function TL(t,e){e.set(t)}function vL(t,e,s){let r,i;for(let n=0;n<3;n++){const o=n+3;r=t[n],i=e[n],s[n]=r<i?r:i,r=t[o],i=e[o],s[o]=r>i?r:i}}function bL(t,e,s){for(let r=0;r<3;r++){const i=e[t+2*r],n=e[t+2*r+1],o=i-n,a=i+n;o<s[r]&&(s[r]=o),a>s[r+3]&&(s[r+3]=a)}}function wL(t){const e=t[3]-t[0],s=t[4]-t[1],r=t[5]-t[2];return 2*(e*s+s*r+r*e)}function xL(t,e,s,r,i=null){let n=1/0,o=1/0,a=1/0,h=-1/0,c=-1/0,l=-1/0,u=1/0,p=1/0,d=1/0,m=-1/0,f=-1/0,g=-1/0;const y=null!==i;for(let r=6*e,i=6*(e+s);r<i;r+=6){const e=t[r+0],s=t[r+1],i=e-s,T=e+s;i<n&&(n=i),T>h&&(h=T),y&&e<u&&(u=e),y&&e>m&&(m=e);const v=t[r+2],b=t[r+3],w=v-b,x=v+b;w<o&&(o=w),x>c&&(c=x),y&&v<p&&(p=v),y&&v>f&&(f=v);const I=t[r+4],E=t[r+5],S=I-E,A=I+E;S<a&&(a=S),A>l&&(l=A),y&&I<d&&(d=I),y&&I>g&&(g=I)}r[0]=n,r[1]=o,r[2]=a,r[3]=h,r[4]=c,r[5]=l,y&&(i[0]=u,i[1]=p,i[2]=d,i[3]=m,i[4]=f,i[5]=g)}const IL=32,EL=(t,e)=>t.candidate-e.candidate,SL=new Array(IL).fill().map((()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0}))),AL=new Float32Array(6);function RL(t,e){function s(t){p&&p(t/d)}function r(e,i,p,d=null,f=0){if(!m&&f>=h&&(m=!0,c&&(console.warn(`MeshBVH: Max depth of ${h} reached when generating BVH. Consider increasing maxDepth.`),console.warn(t))),p<=l||f>=h)return s(i+p),e.offset=i,e.count=p,e;const g=function(t,e,s,r,i,n){let o=-1,a=0;if(0===n)o=yL(e),-1!==o&&(a=(e[o]+e[o+3])/2);else if(1===n)o=yL(t),-1!==o&&(a=function(t,e,s,r){let i=0;for(let n=e,o=e+s;n<o;n++)i+=t[6*n+2*r];return i/s}(s,r,i,o));else if(2===n){const n=wL(t);let h=pL*i;const c=6*r,l=6*(r+i);for(let t=0;t<3;t++){const r=e[t],u=(e[t+3]-r)/IL;if(i<8){const e=[...SL];e.length=i;let r=0;for(let i=c;i<l;i+=6,r++){const n=e[r];n.candidate=s[i+2*t],n.count=0;const{bounds:o,leftCacheBounds:a,rightCacheBounds:h}=n;for(let t=0;t<3;t++)h[t]=1/0,h[t+3]=-1/0,a[t]=1/0,a[t+3]=-1/0,o[t]=1/0,o[t+3]=-1/0;bL(i,s,o)}e.sort(EL);let u=i;for(let t=0;t<u;t++){const s=e[t];for(;t+1<u&&e[t+1].candidate===s.candidate;)e.splice(t+1,1),u--}for(let r=c;r<l;r+=6){const i=s[r+2*t];for(let t=0;t<u;t++){const n=e[t];i>=n.candidate?bL(r,s,n.rightCacheBounds):(bL(r,s,n.leftCacheBounds),n.count++)}}for(let s=0;s<u;s++){const r=e[s],c=r.count,l=i-r.count,u=r.leftCacheBounds,p=r.rightCacheBounds;let d=0;0!==c&&(d=wL(u)/n);let m=0;0!==l&&(m=wL(p)/n);const f=1+pL*(d*c+m*l);f<h&&(o=t,h=f,a=r.candidate)}}else{for(let t=0;t<IL;t++){const e=SL[t];e.count=0,e.candidate=r+u+t*u;const s=e.bounds;for(let t=0;t<3;t++)s[t]=1/0,s[t+3]=-1/0}for(let e=c;e<l;e+=6){let i=~~((s[e+2*t]-r)/u);i>=IL&&(i=31);const n=SL[i];n.count++,bL(e,s,n.bounds)}const e=SL[31];TL(e.bounds,e.rightCacheBounds);for(let t=30;t>=0;t--){const e=SL[t],s=SL[t+1];vL(e.bounds,s.rightCacheBounds,e.rightCacheBounds)}let p=0;for(let e=0;e<31;e++){const s=SL[e],r=s.count,c=s.bounds,l=SL[e+1].rightCacheBounds;0!==r&&(0===p?TL(c,AL):vL(c,AL,AL)),p+=r;let u=0,d=0;0!==p&&(u=wL(AL)/n);const m=i-p;0!==m&&(d=wL(l)/n);const f=1+pL*(u*p+d*m);f<h&&(o=t,h=f,a=s.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${n} used.`);return{axis:o,pos:a}}(e.boundingData,d,o,i,p,u);if(-1===g.axis)return s(i+p),e.offset=i,e.count=p,e;const y=function(t,e,s,r,i){let n=s,o=s+r-1;const a=i.pos,h=2*i.axis;for(;;){for(;n<=o&&e[6*n+h]<a;)n++;for(;n<=o&&e[6*o+h]>=a;)o--;if(!(n<o))return n;for(let s=0;s<3;s++){let r=t[3*n+s];t[3*n+s]=t[3*o+s],t[3*o+s]=r;let i=e[6*n+2*s+0];e[6*n+2*s+0]=e[6*o+2*s+0],e[6*o+2*s+0]=i;let a=e[6*n+2*s+1];e[6*n+2*s+1]=e[6*o+2*s+1],e[6*o+2*s+1]=a}n++,o--}}(a,o,i,p,g);if(y===i||y===i+p)s(i+p),e.offset=i,e.count=p;else{e.splitAxis=g.axis;const t=new fL,s=i,a=y-i;e.left=t,t.boundingData=new Float32Array(6),xL(o,s,a,t.boundingData,n),r(t,s,a,n,f+1);const h=new fL,c=y,l=p-a;e.right=h,h.boundingData=new Float32Array(6),xL(o,c,l,h.boundingData,n),r(h,c,l,n,f+1)}return e}!function(t,e){if(!t.index){const s=t.attributes.position.count,r=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;let i;i=s>65535?new Uint32Array(new r(4*s)):new Uint16Array(new r(2*s)),t.setIndex(new or(i,1));for(let t=0;t<s;t++)i[t]=t}}(t,e);const i=new Float32Array(6),n=new Float32Array(6),o=function(t,e){const s=t.attributes.position,r=s.array,i=t.index.array,n=i.length/3,o=new Float32Array(6*n),a=s.offset||0;let h=3;s.isInterleavedBufferAttribute&&(h=s.data.stride);for(let t=0;t<n;t++){const s=3*t,n=6*t,c=i[s+0]*h+a,l=i[s+1]*h+a,u=i[s+2]*h+a;for(let t=0;t<3;t++){const s=r[c+t],i=r[l+t],a=r[u+t];let h=s;i<h&&(h=i),a<h&&(h=a);let p=s;i>p&&(p=i),a>p&&(p=a);const d=(p-h)/2,m=2*t;o[n+m+0]=h+d,o[n+m+1]=d+(Math.abs(h)+d)*mL,h<e[t]&&(e[t]=h),p>e[t+3]&&(e[t+3]=p)}}return o}(t,i),a=t.index.array,h=e.maxDepth,c=e.verbose,l=e.maxLeafTris,u=e.strategy,p=e.onProgress,d=t.index.count/3;let m=!1;const f=[],g=function(t){if(!t.groups||!t.groups.length)return[{offset:0,count:t.index.count/3}];const e=[],s=new Set;for(const e of t.groups)s.add(e.start),s.add(e.start+e.count);const r=Array.from(s.values()).sort(((t,e)=>t-e));for(let t=0;t<r.length-1;t++){const s=r[t],i=r[t+1];e.push({offset:s/3,count:(i-s)/3})}return e}(t);if(1===g.length){const t=g[0],e=new fL;e.boundingData=i,function(t,e,s,r){let i=1/0,n=1/0,o=1/0,a=-1/0,h=-1/0,c=-1/0;for(let r=6*e,l=6*(e+s);r<l;r+=6){const e=t[r+0];e<i&&(i=e),e>a&&(a=e);const s=t[r+2];s<n&&(n=s),s>h&&(h=s);const l=t[r+4];l<o&&(o=l),l>c&&(c=l)}r[0]=i,r[1]=n,r[2]=o,r[3]=a,r[4]=h,r[5]=c}(o,t.offset,t.count,n),r(e,t.offset,t.count,n),f.push(e)}else for(let t of g){const e=new fL;e.boundingData=new Float32Array(6),xL(o,t.offset,t.count,e.boundingData,n),r(e,t.offset,t.count,n),f.push(e)}return f}class CL{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(t,e){let s=1/0,r=-1/0;for(let i=0,n=t.length;i<n;i++){const n=t[i][e];s=n<s?n:s,r=n>r?n:r}this.min=s,this.max=r}setFromPoints(t,e){let s=1/0,r=-1/0;for(let i=0,n=e.length;i<n;i++){const n=e[i],o=t.dot(n);s=o<s?o:s,r=o>r?o:r}this.min=s,this.max=r}isSeparated(t){return this.min>t.max||t.min>this.max}}CL.prototype.setFromBox=function(){const t=new Ge;return function(e,s){const r=s.min,i=s.max;let n=1/0,o=-1/0;for(let s=0;s<=1;s++)for(let a=0;a<=1;a++)for(let h=0;h<=1;h++){t.x=r.x*s+i.x*(1-s),t.y=r.y*a+i.y*(1-a),t.z=r.z*h+i.z*(1-h);const c=e.dot(t);n=Math.min(c,n),o=Math.max(c,o)}this.min=n,this.max=o}}();const OL=function(){const t=new Ge,e=new Ge,s=new Ge;return function(r,i,n){const o=r.start,a=t,h=i.start,c=e;s.subVectors(o,h),t.subVectors(r.end,i.start),e.subVectors(i.end,i.start);const l=s.dot(c),u=c.dot(a),p=c.dot(c),d=s.dot(a),m=a.dot(a)*p-u*u;let f,g;f=0!==m?(l*u-d*p)/m:0,g=(l+f*u)/p,n.x=f,n.y=g}}(),_L=function(){const t=new le,e=new Ge,s=new Ge;return function(r,i,n,o){OL(r,i,t);let a=t.x,h=t.y;if(a>=0&&a<=1&&h>=0&&h<=1)return r.at(a,n),void i.at(h,o);if(a>=0&&a<=1)return h<0?i.at(0,o):i.at(1,o),void r.closestPointToPoint(o,!0,n);if(h>=0&&h<=1)return a<0?r.at(0,n):r.at(1,n),void i.closestPointToPoint(n,!0,o);{let t,c;t=a<0?r.start:r.end,c=h<0?i.start:i.end;const l=e,u=s;return r.closestPointToPoint(c,!0,e),i.closestPointToPoint(t,!0,s),l.distanceToSquared(c)<=u.distanceToSquared(t)?(n.copy(l),void o.copy(c)):(n.copy(t),void o.copy(u))}}}(),DL=function(){const t=new Ge,e=new Ge,s=new ii,r=new Au;return function(i,n){const{radius:o,center:a}=i,{a:h,b:c,c:l}=n;r.start=h,r.end=c;if(r.closestPointToPoint(a,!0,t).distanceTo(a)<=o)return!0;r.start=h,r.end=l;if(r.closestPointToPoint(a,!0,t).distanceTo(a)<=o)return!0;r.start=c,r.end=l;if(r.closestPointToPoint(a,!0,t).distanceTo(a)<=o)return!0;const u=n.getPlane(s);if(Math.abs(u.distanceToPoint(a))<=o){const t=u.projectPoint(a,e);if(n.containsPoint(t))return!0}return!1}}();class FL extends tr{constructor(...t){super(...t),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map((()=>new Ge)),this.satBounds=new Array(4).fill().map((()=>new CL)),this.points=[this.a,this.b,this.c],this.sphere=new cs,this.plane=new ii,this.needsUpdate=!1}intersectsSphere(t){return DL(t,this)}update(){const t=this.a,e=this.b,s=this.c,r=this.points,i=this.satAxes,n=this.satBounds,o=i[0],a=n[0];this.getNormal(o),a.setFromPoints(o,r);const h=i[1],c=n[1];h.subVectors(t,e),c.setFromPoints(h,r);const l=i[2],u=n[2];l.subVectors(e,s),u.setFromPoints(l,r);const p=i[3],d=n[3];p.subVectors(s,t),d.setFromPoints(p,r),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(o,t),this.needsUpdate=!1}}FL.prototype.closestPointToSegment=function(){const t=new Ge,e=new Ge,s=new Au;return function(r,i=null,n=null){const{start:o,end:a}=r,h=this.points;let c,l=1/0;for(let o=0;o<3;o++){const a=(o+1)%3;s.start.copy(h[o]),s.end.copy(h[a]),_L(s,r,t,e),c=t.distanceToSquared(e),c<l&&(l=c,i&&i.copy(t),n&&n.copy(e))}return this.closestPointToPoint(o,t),c=o.distanceToSquared(t),c<l&&(l=c,i&&i.copy(t),n&&n.copy(o)),this.closestPointToPoint(a,t),c=a.distanceToSquared(t),c<l&&(l=c,i&&i.copy(t),n&&n.copy(a)),Math.sqrt(l)}}(),FL.prototype.intersectsTriangle=function(){const t=new FL,e=new Array(3),s=new Array(3),r=new CL,i=new CL,n=new Ge,o=new Ge,a=new Ge,h=new Ge,c=new Au,l=new Au,u=new Au;return function(p,d=null){this.needsUpdate&&this.update(),p.isExtendedTriangle?p.needsUpdate&&p.update():(t.copy(p),t.update(),p=t);const m=this.plane,f=p.plane;if(Math.abs(m.normal.dot(f.normal))>1-1e-10){const t=this.satBounds,o=this.satAxes;s[0]=p.a,s[1]=p.b,s[2]=p.c;for(let e=0;e<4;e++){const i=t[e],n=o[e];if(r.setFromPoints(n,s),i.isSeparated(r))return!1}const a=p.satBounds,h=p.satAxes;e[0]=this.a,e[1]=this.b,e[2]=this.c;for(let t=0;t<4;t++){const s=a[t],i=h[t];if(r.setFromPoints(i,e),s.isSeparated(r))return!1}for(let t=0;t<4;t++){const a=o[t];for(let t=0;t<4;t++){const o=h[t];if(n.crossVectors(a,o),r.setFromPoints(n,e),i.setFromPoints(n,s),r.isSeparated(i))return!1}}return d&&(console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),d.start.set(0,0,0),d.end.set(0,0,0)),!0}{const t=this.points;let e=!1,s=0;for(let r=0;r<3;r++){const i=t[r],n=t[(r+1)%3];if(c.start.copy(i),c.end.copy(n),c.delta(o),0===f.normal.dot(o)&&0===f.distanceToPoint(c.start)){l.copy(c),s=2;break}if(f.intersectLine(c,e?l.start:l.end)){if(s++,e)break;e=!0}}if(2!==s)return!1;const r=p.points;let i=!1,n=0;for(let t=0;t<3;t++){const e=r[t],s=r[(t+1)%3];if(c.start.copy(e),c.end.copy(s),c.delta(a),0===m.normal.dot(a)&&0===m.distanceToPoint(c.start)){u.copy(c),n=2;break}if(m.intersectLine(c,i?u.start:u.end)){if(n++,i)break;i=!0}}if(2!==n)return!1;if(l.delta(o),u.delta(a),o.dot(a)<0){let t=u.start;u.start=u.end,u.end=t}const g=l.start.dot(o),y=l.end.dot(o),T=u.start.dot(o),v=u.end.dot(o),b=y<T,w=g<v;return(g===v||T===y||b!==w)&&(d&&(h.subVectors(l.start,u.start),h.dot(o)>0?d.start.copy(l.start):d.start.copy(u.start),h.subVectors(l.end,u.end),h.dot(o)<0?d.end.copy(l.end):d.end.copy(u.end)),!0)}}}(),FL.prototype.distanceToPoint=function(){const t=new Ge;return function(e){return this.closestPointToPoint(e,t),e.distanceTo(t)}}(),FL.prototype.distanceToTriangle=function(){const t=new Ge,e=new Ge,s=["a","b","c"],r=new Au,i=new Au;return function(n,o=null,a=null){const h=o||a?r:null;if(this.intersectsTriangle(n,h))return(o||a)&&(o&&h.getCenter(o),a&&h.getCenter(a)),0;let c=1/0;for(let e=0;e<3;e++){let r;const i=s[e],h=n[i];this.closestPointToPoint(h,t),r=h.distanceToSquared(t),r<c&&(c=r,o&&o.copy(t),a&&a.copy(h));const l=this[i];n.closestPointToPoint(l,t),r=l.distanceToSquared(t),r<c&&(c=r,o&&o.copy(l),a&&a.copy(t))}for(let h=0;h<3;h++){const l=s[h],u=s[(h+1)%3];r.set(this[l],this[u]);for(let h=0;h<3;h++){const l=s[h],u=s[(h+1)%3];i.set(n[l],n[u]),_L(r,i,t,e);const p=t.distanceToSquared(e);p<c&&(c=p,o&&o.copy(t),a&&a.copy(e))}}return Math.sqrt(c)}}();class ML extends Ve{constructor(...t){super(...t),this.isOrientedBox=!0,this.matrix=new Ts,this.invMatrix=new Ts,this.points=new Array(8).fill().map((()=>new Ge)),this.satAxes=new Array(3).fill().map((()=>new Ge)),this.satBounds=new Array(3).fill().map((()=>new CL)),this.alignedSatBounds=new Array(3).fill().map((()=>new CL)),this.needsUpdate=!1}set(t,e,s){super.set(t,e),this.matrix.copy(s),this.needsUpdate=!0}copy(t){super.copy(t),this.matrix.copy(t.matrix),this.needsUpdate=!0}}ML.prototype.update=function(){const t=this.matrix,e=this.min,s=this.max,r=this.points;for(let i=0;i<=1;i++)for(let n=0;n<=1;n++)for(let o=0;o<=1;o++){const a=r[1*i|2*n|4*o];a.x=i?s.x:e.x,a.y=n?s.y:e.y,a.z=o?s.z:e.z,a.applyMatrix4(t)}const i=this.satBounds,n=this.satAxes,o=r[0];for(let t=0;t<3;t++){const e=n[t],s=i[t],a=r[1<<t];e.subVectors(o,a),s.setFromPoints(e,r)}const a=this.alignedSatBounds;a[0].setFromPointsField(r,"x"),a[1].setFromPointsField(r,"y"),a[2].setFromPointsField(r,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1},ML.prototype.intersectsBox=function(){const t=new CL;return function(e){this.needsUpdate&&this.update();const s=e.min,r=e.max,i=this.satBounds,n=this.satAxes,o=this.alignedSatBounds;if(t.min=s.x,t.max=r.x,o[0].isSeparated(t))return!1;if(t.min=s.y,t.max=r.y,o[1].isSeparated(t))return!1;if(t.min=s.z,t.max=r.z,o[2].isSeparated(t))return!1;for(let s=0;s<3;s++){const r=n[s],o=i[s];if(t.setFromBox(r,e),o.isSeparated(t))return!1}return!0}}(),ML.prototype.intersectsTriangle=function(){const t=new FL,e=new Array(3),s=new CL,r=new CL,i=new Ge;return function(n){this.needsUpdate&&this.update(),n.isExtendedTriangle?n.needsUpdate&&n.update():(t.copy(n),t.update(),n=t);const o=this.satBounds,a=this.satAxes;e[0]=n.a,e[1]=n.b,e[2]=n.c;for(let t=0;t<3;t++){const r=o[t],i=a[t];if(s.setFromPoints(i,e),r.isSeparated(s))return!1}const h=n.satBounds,c=n.satAxes,l=this.points;for(let t=0;t<3;t++){const e=h[t],r=c[t];if(s.setFromPoints(r,l),e.isSeparated(s))return!1}for(let t=0;t<3;t++){const n=a[t];for(let t=0;t<4;t++){const o=c[t];if(i.crossVectors(n,o),s.setFromPoints(i,e),r.setFromPoints(i,l),s.isSeparated(r))return!1}}return!0}}(),ML.prototype.closestPointToPoint=function(t,e){return this.needsUpdate&&this.update(),e.copy(t).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),e},ML.prototype.distanceToPoint=function(){const t=new Ge;return function(e){return this.closestPointToPoint(e,t),e.distanceTo(t)}}(),ML.prototype.distanceToBox=function(){const t=["x","y","z"],e=new Array(12).fill().map((()=>new Au)),s=new Array(12).fill().map((()=>new Au)),r=new Ge,i=new Ge;return function(n,o=0,a=null,h=null){if(this.needsUpdate&&this.update(),this.intersectsBox(n))return(a||h)&&(n.getCenter(i),this.closestPointToPoint(i,r),n.closestPointToPoint(r,i),a&&a.copy(r),h&&h.copy(i)),0;const c=o*o,l=n.min,u=n.max,p=this.points;let d=1/0;for(let t=0;t<8;t++){const e=p[t];i.copy(e).clamp(l,u);const s=e.distanceToSquared(i);if(s<d&&(d=s,a&&a.copy(e),h&&h.copy(i),s<c))return Math.sqrt(s)}let m=0;for(let r=0;r<3;r++)for(let i=0;i<=1;i++)for(let n=0;n<=1;n++){const o=(r+1)%3,a=(r+2)%3,h=1<<r|i<<o|n<<a,c=p[i<<o|n<<a],d=p[h];e[m].set(c,d);const f=t[r],g=t[o],y=t[a],T=s[m],v=T.start,b=T.end;v[f]=l[f],v[g]=i?l[g]:u[g],v[y]=n?l[y]:u[g],b[f]=u[f],b[g]=i?l[g]:u[g],b[y]=n?l[y]:u[g],m++}for(let t=0;t<=1;t++)for(let e=0;e<=1;e++)for(let s=0;s<=1;s++){i.x=t?u.x:l.x,i.y=e?u.y:l.y,i.z=s?u.z:l.z,this.closestPointToPoint(i,r);const n=i.distanceToSquared(r);if(n<d&&(d=n,a&&a.copy(r),h&&h.copy(i),n<c))return Math.sqrt(n)}for(let t=0;t<12;t++){const n=e[t];for(let t=0;t<12;t++){const e=s[t];_L(n,e,r,i);const o=r.distanceToSquared(i);if(o<d&&(d=o,a&&a.copy(r),h&&h.copy(i),o<c))return Math.sqrt(o)}}return Math.sqrt(d)}}();const PL=new Ge,NL=new Ge,LL=new Ge,kL=new le,UL=new le,HL=new le,BL=new Ge;function GL(t,e,s,r,i){const n=3*r,o=t.index.getX(n),a=t.index.getX(n+1),h=t.index.getX(n+2),c=function(t,e,s,r,i,n,o){PL.fromBufferAttribute(e,r),NL.fromBufferAttribute(e,i),LL.fromBufferAttribute(e,n);const a=function(t,e,s,r,i,n){let o;return o=1===n?t.intersectTriangle(r,s,e,!0,i):t.intersectTriangle(e,s,r,2!==n,i),null===o?null:{distance:t.origin.distanceTo(i),point:i.clone()}}(t,PL,NL,LL,BL,o);if(a){s&&(kL.fromBufferAttribute(s,r),UL.fromBufferAttribute(s,i),HL.fromBufferAttribute(s,n),a.uv=tr.getUV(BL,PL,NL,LL,kL,UL,HL,new le));const t={a:r,b:i,c:n,normal:new Ge,materialIndex:0};tr.getNormal(PL,NL,LL,t.normal),a.face=t,a.faceIndex=r}return a}(s,t.attributes.position,t.attributes.uv,o,a,h,e);return c?(c.faceIndex=r,i&&i.push(c),c):null}function jL(t,e,s){return null===t?null:(t.point.applyMatrix4(e.matrixWorld),t.distance=t.point.distanceTo(s.ray.origin),t.object=e,t.distance<s.near||t.distance>s.far?null:t)}function zL(t,e,s,r){const i=t.a,n=t.b,o=t.c;let a=e,h=e+1,c=e+2;s&&(a=s.getX(e),h=s.getX(e+1),c=s.getX(e+2)),i.x=r.getX(a),i.y=r.getY(a),i.z=r.getZ(a),n.x=r.getX(h),n.y=r.getY(h),n.z=r.getZ(h),o.x=r.getX(c),o.y=r.getY(c),o.z=r.getZ(c)}function VL(t,e,s,r,i,n,o){const a=s.index,h=s.attributes.position;for(let s=t,c=e+t;s<c;s++)if(zL(o,3*s,a,h),o.needsUpdate=!0,r(o,s,i,n))return!0;return!1}class WL{constructor(t){this._getNewPrimitive=t,this._primitives=[]}getPrimitive(){const t=this._primitives;return 0===t.length?this._getNewPrimitive():t.pop()}releasePrimitive(t){this._primitives.push(t)}}function YL(t,e){return 65535===e[t+15]}function XL(t,e){return e[t+6]}function qL(t,e){return e[t+14]}function KL(t){return t+8}function JL(t,e){return e[t+6]}const $L=new Ve,ZL=new Ge,QL=["x","y","z"];function tk(t,e,s,r,i){let n=2*t,o=ak,a=hk,h=ck;if(YL(n,a)){!function(t,e,s,r,i,n){for(let o=r,a=r+i;o<a;o++)GL(t,e,s,o,n)}(e,s,r,XL(t,h),qL(n,a),i)}else{const n=KL(t);ik(n,o,r,ZL)&&tk(n,e,s,r,i);const a=JL(t,h);ik(a,o,r,ZL)&&tk(a,e,s,r,i)}}function ek(t,e,s,r){let i=2*t,n=ak,o=hk,a=ck;if(YL(i,o)){return function(t,e,s,r,i){let n=1/0,o=null;for(let a=r,h=r+i;a<h;a++){const r=GL(t,e,s,a);r&&r.distance<n&&(o=r,n=r.distance)}return o}(e,s,r,XL(t,a),qL(i,o))}{const i=function(t,e){return e[t+7]}(t,a),o=QL[i],h=r.direction[o]>=0;let c,l;h?(c=KL(t),l=JL(t,a)):(c=JL(t,a),l=KL(t));const u=ik(c,n,r,ZL)?ek(c,e,s,r):null;if(u){const t=u.point[o];if(h?t<=n[l+i]:t>=n[l+i+3])return u}const p=ik(l,n,r,ZL)?ek(l,e,s,r):null;return u&&p?u.distance<=p.distance?u:p:u||p||null}}const sk=function(){let t,e;const s=[],r=new WL((()=>new Ve));return function(...n){t=r.getPrimitive(),e=r.getPrimitive(),s.push(t,e);const o=i(...n);r.releasePrimitive(t),r.releasePrimitive(e),s.pop(),s.pop();const a=s.length;return a>0&&(e=s[a-1],t=s[a-2]),o};function i(s,r,n,o,a=null,h=0,c=0){function l(t){let e=2*t,s=hk,r=ck;for(;!YL(e,s);)e=2*(t=KL(t));return XL(t,r)}function u(t){let e=2*t,s=hk,r=ck;for(;!YL(e,s);)e=2*(t=JL(t,r));return XL(t,r)+qL(e,s)}let p=2*s,d=ak,m=hk,f=ck;if(YL(p,m)){const e=XL(s,f),r=qL(p,m);return gL(s,d,t),o(e,r,!1,c,h+s,t)}{const p=KL(s),g=JL(s,f);let y,T,v,b,w=p,x=g;if(a&&(v=t,b=e,gL(w,d,v),gL(x,d,b),y=a(v),T=a(b),T<y)){w=g,x=p;const t=y;y=T,T=t,v=b}v||(v=t,gL(w,d,v));const I=n(v,YL(2*w,m),y,c+1,h+w);let E;if(2===I){const t=l(w);E=o(t,u(w)-t,!0,c+1,h+w,v)}else E=I&&i(w,r,n,o,a,h,c+1);if(E)return!0;b=e,gL(x,d,b);const S=n(b,YL(2*x,m),T,c+1,h+x);let A;if(2===S){const t=l(x);A=o(t,u(x)-t,!0,c+1,h+x,b)}else A=S&&i(x,r,n,o,a,h,c+1);return!!A}}}(),rk=function(){const t=new FL,e=new FL,s=new Ts,r=new ML,i=new ML;return function n(o,a,h,c,l=null){let u=2*o,p=ak,d=hk,m=ck;null===l&&(h.boundingBox||h.computeBoundingBox(),r.set(h.boundingBox.min,h.boundingBox.max,c),l=r);if(!YL(u,d)){const t=o+8,e=m[o+6];gL(t,p,$L);if(l.intersectsBox($L)&&n(t,a,h,c,l))return!0;gL(e,p,$L);return!!(l.intersectsBox($L)&&n(e,a,h,c,l))}{const r=a,n=r.index,l=r.attributes.position,f=h.index,g=h.attributes.position,y=XL(o,m),T=qL(u,d);if(s.copy(c).invert(),h.boundsTree){gL(o,p,i),i.matrix.copy(s),i.needsUpdate=!0;return h.boundsTree.shapecast({intersectsBounds:t=>i.intersectsBox(t),intersectsTriangle:t=>{t.a.applyMatrix4(c),t.b.applyMatrix4(c),t.c.applyMatrix4(c),t.needsUpdate=!0;for(let s=3*y,r=3*(T+y);s<r;s+=3)if(zL(e,s,n,l),e.needsUpdate=!0,t.intersectsTriangle(e))return!0;return!1}})}for(let r=3*y,i=T+3*y;r<i;r+=3){zL(t,r,n,l),t.a.applyMatrix4(s),t.b.applyMatrix4(s),t.c.applyMatrix4(s),t.needsUpdate=!0;for(let s=0,r=f.count;s<r;s+=3)if(zL(e,s,f,g),e.needsUpdate=!0,t.intersectsTriangle(e))return!0}}}}();function ik(t,e,s,r){return gL(t,e,$L),s.intersectBox($L,r)}const nk=[];let ok,ak,hk,ck;function lk(t){ok&&nk.push(ok),ok=t,ak=new Float32Array(t),hk=new Uint16Array(t),ck=new Uint32Array(t)}function uk(){ok=null,ak=null,hk=null,ck=null,nk.length&&lk(nk.pop())}const pk=Symbol("skip tree generation"),dk=new Ve,mk=new Ve,fk=new Ts,gk=new ML,yk=new ML,Tk=new Ge,vk=new Ge,bk=new Ge,wk=new Ge,xk=new Ge,Ik=new Ve,Ek=new WL((()=>new FL));class Sk{static serialize(t,e={}){if(e.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),Sk.serialize(arguments[0],{cloneBuffers:void 0===arguments[2]||arguments[2]});e={cloneBuffers:!0,...e};const s=t.geometry,r=t._roots,i=s.getIndex();let n;return n=e.cloneBuffers?{roots:r.map((t=>t.slice())),index:i.array.slice()}:{roots:r,index:i.array},n}static deserialize(t,e,s={}){if("boolean"==typeof s)return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),Sk.deserialize(arguments[0],arguments[1],{setIndex:void 0===arguments[2]||arguments[2]});s={setIndex:!0,...s};const{index:r,roots:i}=t,n=new Sk(e,{...s,[pk]:!0});if(n._roots=i,s.setIndex){const s=e.getIndex();if(null===s){const s=new or(t.index,1,!1);e.setIndex(s)}else s.array!==r&&(s.array.set(r),s.needsUpdate=!0)}return n}constructor(t,e={}){if(!t.isBufferGeometry)throw new Error("MeshBVH: Only BufferGeometries are supported.");if(t.index&&t.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.");if((e=Object.assign({strategy:0,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[pk]:!1},e)).useSharedArrayBuffer&&"undefined"==typeof SharedArrayBuffer)throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,e[pk]||(this._roots=function(t,e){const s=RL(t,e);let r,i,n;const o=[],a=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let t=0;t<s.length;t++){const e=s[t],l=new a(32*h(e));r=new Float32Array(l),i=new Uint32Array(l),n=new Uint16Array(l),c(0,e),o.push(l)}return o;function h(t){return t.count?1:1+h(t.left)+h(t.right)}function c(t,e){const s=t/4,o=t/2,a=!!e.count,h=e.boundingData;for(let t=0;t<6;t++)r[s+t]=h[t];if(a){const r=e.offset,a=e.count;return i[s+6]=r,n[o+14]=a,n[o+15]=dL,t+32}{const r=e.left,n=e.right,o=e.splitAxis;let a;if(a=c(t+32,r),a/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return i[s+6]=a/4,a=c(a,n),i[s+7]=o,a}}}(t,e),!t.boundingBox&&e.setBoundingBox&&(t.boundingBox=this.getBoundingBox(new Ve))),this.geometry=t}refit(t=null){t&&Array.isArray(t)&&(t=new Set(t));const e=this.geometry,s=e.index.array,r=e.attributes.position,i=r.array,n=r.offset||0;let o,a,h,c,l=3;r.isInterleavedBufferAttribute&&(l=r.data.stride);let u=0;const p=this._roots;for(let t=0,e=p.length;t<e;t++)o=p[t],a=new Uint32Array(o),h=new Uint16Array(o),c=new Float32Array(o),d(0,u),u+=o.byteLength;function d(e,r,o=!1){const u=2*e;if(h[u+15]===dL){const t=a[e+6];let r=1/0,o=1/0,p=1/0,d=-1/0,m=-1/0,f=-1/0;for(let e=3*t,a=3*(t+h[u+14]);e<a;e++){const t=s[e]*l+n,a=i[t+0],h=i[t+1],c=i[t+2];a<r&&(r=a),a>d&&(d=a),h<o&&(o=h),h>m&&(m=h),c<p&&(p=c),c>f&&(f=c)}return(c[e+0]!==r||c[e+1]!==o||c[e+2]!==p||c[e+3]!==d||c[e+4]!==m||c[e+5]!==f)&&(c[e+0]=r,c[e+1]=o,c[e+2]=p,c[e+3]=d,c[e+4]=m,c[e+5]=f,!0)}{const s=e+8,i=a[e+6],n=s+r,h=i+r;let l=o,u=!1,p=!1;t?l||(u=t.has(n),p=t.has(h),l=!u&&!p):(u=!0,p=!0);const m=l||p;let f=!1;(l||u)&&(f=d(s,r,l));let g=!1;m&&(g=d(i,r,l));const y=f||g;if(y)for(let t=0;t<3;t++){const r=s+t,n=i+t,o=c[r],a=c[r+3],h=c[n],l=c[n+3];c[e+t]=o<h?o:h,c[e+t+3]=a>l?a:l}return y}}}traverse(t,e=0){const s=this._roots[e],r=new Uint32Array(s),i=new Uint16Array(s);!function e(n,o=0){const a=2*n,h=i[a+15]===dL;if(h){const e=r[n+6],c=i[a+14];t(o,h,new Float32Array(s,4*n,6),e,c)}else{const i=n+8,a=r[n+6],c=r[n+7];t(o,h,new Float32Array(s,4*n,6),c)||(e(i,o+1),e(a,o+1))}}(0)}raycast(t,e=0){const s=this._roots,r=this.geometry,i=[],n=e.isMaterial,o=Array.isArray(e),a=r.groups,h=n?e.side:e;for(let n=0,c=s.length;n<c;n++){const c=o?e[a[n].materialIndex].side:h,l=i.length;if(lk(s[n]),tk(0,r,c,t,i),uk(),o){const t=a[n].materialIndex;for(let e=l,s=i.length;e<s;e++)i[e].face.materialIndex=t}}return i}raycastFirst(t,e=0){const s=this._roots,r=this.geometry,i=e.isMaterial,n=Array.isArray(e);let o=null;const a=r.groups,h=i?e.side:e;for(let i=0,c=s.length;i<c;i++){const c=n?e[a[i].materialIndex].side:h;lk(s[i]);const l=ek(0,r,c,t);uk(),null!=l&&(null==o||l.distance<o.distance)&&(o=l,n&&(l.face.materialIndex=a[i].materialIndex))}return o}intersectsGeometry(t,e){const s=this.geometry;let r=!1;for(const i of this._roots)if(lk(i),r=rk(0,s,t,e),uk(),r)break;return r}shapecast(t,e,s){const r=this.geometry;if(t instanceof Function){if(e){const t=e;e=(e,s,r,i)=>{const n=3*s;return t(e,n,n+1,n+2,r,i)}}t={boundsTraverseOrder:s,intersectsBounds:t,intersectsTriangle:e,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}const i=Ek.getPrimitive();let{boundsTraverseOrder:n,intersectsBounds:o,intersectsRange:a,intersectsTriangle:h}=t;if(a&&h){const t=a;a=(e,s,n,o,a)=>!!t(e,s,n,o,a)||VL(e,s,r,h,n,o,i)}else a||(a=h?(t,e,s,n)=>VL(t,e,r,h,s,n,i):(t,e,s)=>s);let c=!1,l=0;for(const t of this._roots){if(lk(t),c=sk(0,r,o,a,n,l),uk(),c)break;l+=t.byteLength}return Ek.releasePrimitive(i),c}bvhcast(t,e,s){let{intersectsRanges:r,intersectsTriangles:i}=s;const n=this.geometry.index,o=this.geometry.attributes.position,a=t.geometry.index,h=t.geometry.attributes.position;fk.copy(e).invert();const c=Ek.getPrimitive(),l=Ek.getPrimitive();if(i){function u(t,s,r,u,p,d,m,f){for(let g=r,y=r+u;g<y;g++){zL(l,3*g,a,h),l.a.applyMatrix4(e),l.b.applyMatrix4(e),l.c.applyMatrix4(e),l.needsUpdate=!0;for(let e=t,r=t+s;e<r;e++)if(zL(c,3*e,n,o),c.needsUpdate=!0,i(c,l,e,g,p,d,m,f))return!0}return!1}if(r){const t=r;r=function(e,s,r,i,n,o,a,h){return!!t(e,s,r,i,n,o,a,h)||u(e,s,r,i,n,o,a,h)}}else r=u}this.getBoundingBox(mk),mk.applyMatrix4(e);const p=this.shapecast({intersectsBounds:t=>mk.intersectsBox(t),intersectsRange:(e,s,i,n,o,a)=>(dk.copy(a),dk.applyMatrix4(fk),t.shapecast({intersectsBounds:t=>dk.intersectsBox(t),intersectsRange:(t,i,a,h,c)=>r(e,s,t,i,n,o,h,c)}))});return Ek.releasePrimitive(c),Ek.releasePrimitive(l),p}intersectsBox(t,e){return gk.set(t.min,t.max,e),gk.needsUpdate=!0,this.shapecast({intersectsBounds:t=>gk.intersectsBox(t),intersectsTriangle:t=>gk.intersectsTriangle(t)})}intersectsSphere(t){return this.shapecast({intersectsBounds:e=>t.intersectsBox(e),intersectsTriangle:e=>e.intersectsSphere(t)})}closestPointToGeometry(t,e,s={},r={},i=0,n=1/0){t.boundingBox||t.computeBoundingBox(),gk.set(t.boundingBox.min,t.boundingBox.max,e),gk.needsUpdate=!0;const o=this.geometry,a=o.attributes.position,h=o.index,c=t.attributes.position,l=t.index,u=Ek.getPrimitive(),p=Ek.getPrimitive();let d=vk,m=bk,f=null,g=null;r&&(f=wk,g=xk);let y=1/0,T=null,v=null;return fk.copy(e).invert(),yk.matrix.copy(fk),this.shapecast({boundsTraverseOrder:t=>gk.distanceToBox(t),intersectsBounds:(t,e,s)=>s<y&&s<n&&(e&&(yk.min.copy(t.min),yk.max.copy(t.max),yk.needsUpdate=!0),!0),intersectsRange:(s,r)=>{if(t.boundsTree)return t.boundsTree.shapecast({boundsTraverseOrder:t=>yk.distanceToBox(t),intersectsBounds:(t,e,s)=>s<y&&s<n,intersectsRange:(t,n)=>{for(let o=3*t,b=3*(t+n);o<b;o+=3){zL(p,o,l,c),p.a.applyMatrix4(e),p.b.applyMatrix4(e),p.c.applyMatrix4(e),p.needsUpdate=!0;for(let t=3*s,e=3*(s+r);t<e;t+=3){zL(u,t,h,a),u.needsUpdate=!0;const e=u.distanceToTriangle(p,d,f);if(e<y&&(m.copy(d),g&&g.copy(f),y=e,T=t/3,v=o/3),e<i)return!0}}}});for(let t=0,n=l?l.count:c.count;t<n;t+=3){zL(p,t,l,c),p.a.applyMatrix4(e),p.b.applyMatrix4(e),p.c.applyMatrix4(e),p.needsUpdate=!0;for(let e=3*s,n=3*(s+r);e<n;e+=3){zL(u,e,h,a),u.needsUpdate=!0;const s=u.distanceToTriangle(p,d,f);if(s<y&&(m.copy(d),g&&g.copy(f),y=s,T=e/3,v=t/3),s<i)return!0}}}}),Ek.releasePrimitive(u),Ek.releasePrimitive(p),y===1/0?null:(s.point?s.point.copy(m):s.point=m.clone(),s.distance=y,s.faceIndex=T,r&&(r.point?r.point.copy(g):r.point=g.clone(),r.point.applyMatrix4(fk),m.applyMatrix4(fk),r.distance=m.sub(r.point).length(),r.faceIndex=v),s)}closestPointToPoint(t,e={},s=0,r=1/0){const i=s*s,n=r*r;let o=1/0,a=null;if(this.shapecast({boundsTraverseOrder:e=>(Tk.copy(t).clamp(e.min,e.max),Tk.distanceToSquared(t)),intersectsBounds:(t,e,s)=>s<o&&s<n,intersectsTriangle:(e,s)=>{e.closestPointToPoint(t,Tk);const r=t.distanceToSquared(Tk);return r<o&&(vk.copy(Tk),o=r,a=s),r<i}}),o===1/0)return null;const h=Math.sqrt(o);return e.point?e.point.copy(vk):e.point=vk.clone(),e.distance=h,e.faceIndex=a,e}getBoundingBox(t){t.makeEmpty();return this._roots.forEach((e=>{gL(0,new Float32Array(e),Ik),t.union(Ik)})),t}}const Ak=Sk.prototype.raycast;Sk.prototype.raycast=function(...t){if(t[0].isMesh){console.warn('MeshBVH: The function signature and results frame for "raycast" has changed. See docs for new signature.');const[e,s,r,i]=t;return Ak.call(this,r,e.material).forEach((t=>{(t=jL(t,e,s))&&i.push(t)})),i}return Ak.apply(this,t)};const Rk=Sk.prototype.raycastFirst;Sk.prototype.raycastFirst=function(...t){if(t[0].isMesh){console.warn('MeshBVH: The function signature and results frame for "raycastFirst" has changed. See docs for new signature.');const[e,s,r]=t;return jL(Rk.call(this,r,e.material),e,s)}return Rk.apply(this,t)};const Ck=Sk.prototype.closestPointToPoint;Sk.prototype.closestPointToPoint=function(...t){if(t[0].isMesh){console.warn('MeshBVH: The function signature and results frame for "closestPointToPoint" has changed. See docs for new signature.'),t.unshift();const e=t[1],s={};return t[1]=s,Ck.apply(this,t),e&&e.copy(s.point),s.distance}return Ck.apply(this,t)};const Ok=Sk.prototype.closestPointToGeometry;Sk.prototype.closestPointToGeometry=function(...t){const e=t[2],s=t[3];if(e&&e.isVector3||s&&s.isVector3){console.warn('MeshBVH: The function signature and results frame for "closestPointToGeometry" has changed. See docs for new signature.');const r={},i={},n=t[1];return t[2]=r,t[3]=i,Ok.apply(this,t),e&&e.copy(r.point),s&&s.copy(i.point).applyMatrix4(n),r.distance}return Ok.apply(this,t)};const _k=Sk.prototype.refit;Sk.prototype.refit=function(...t){const e=t[0],s=t[1];if(s&&(s instanceof Set||Array.isArray(s))){console.warn('MeshBVH: The function signature for "refit" has changed. See docs for new signature.');const t=new Set;s.forEach((e=>t.add(e))),e&&e.forEach((e=>t.add(e))),_k.call(this,t)}else _k.apply(this,t)},["intersectsGeometry","shapecast","intersectsBox","intersectsSphere"].forEach((t=>{const e=Sk.prototype[t];Sk.prototype[t]=function(...s){return(null===s[0]||s[0].isMesh)&&(s.shift(),console.warn(`MeshBVH: The function signature for "${t}" has changed and no longer takes Mesh. See docs for new signature.`)),e.apply(this,s)}}));var Dk="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Fk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Mk(t,e,s){return t(s={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&s.path)}},s.exports),s.exports}function Pk(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach((function(s){var r=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(e,s,r.get?r:{enumerable:!0,get:function(){return t[s]}})})),e}var Nk=Mk((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Admin=void 0;e.Admin=class{constructor(t,e){this.node=t,this.identity=e}}})),Lk=Mk((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.requestDerive=e.requestLogout=e.requestLogin=e.requestApproval=void 0;e.requestApproval=(t,e,r)=>window.open(`${e}/approve?tx=${t}${s(r)}`,null,"toolbar=no, width=800, height=1000, top=0, left=0");e.requestLogin=(t="4",e,r)=>window.open(`${e}/log-in?accessLevelRequest=${t}&hideJumio=true${s(r)}`,null,"toolbar=no, width=800, height=1000, top=0, left=0");e.requestLogout=(t,e,r)=>window.open(`${e}/logout?publicKey=${t}${s(r)}`,null,"toolbar=no, width=800, height=1000, top=0, left=0");e.requestDerive=(t,e,r)=>{const i=Object.entries(t||{}).filter((([t,e])=>null!=e)).map((([t,e])=>`${t}=${e}`)),n=i.length||r?`?${i.join("&")}${s(r,!i.length)}`:"";return window.open(`${e}/derive${n}`,null,"toolbar=no, width=800, height=1000, top=0, left=0")};const s=(t,e)=>""+(t?(e?"":"&")+"testnet=true":"")})),kk=function(t,e){return(kk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])})(t,e)};var Uk=function(){return(Uk=Object.assign||function(t){for(var e,s=1,r=arguments.length;s<r;s++)for(var i in e=arguments[s])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};var Hk=Object.create?function(t,e,s,r){void 0===r&&(r=s);var i=Object.getOwnPropertyDescriptor(e,s);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[s]}}),Object.defineProperty(t,r,i)}:function(t,e,s,r){void 0===r&&(r=s),t[r]=e[s]};function Bk(t){var e="function"==typeof Symbol&&Symbol.iterator,s=e&&t[e],r=0;if(s)return s.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Gk(t,e){var s="function"==typeof Symbol&&t[Symbol.iterator];if(!s)return t;var r,i,n=s.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=n.next()).done;)o.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(i)throw i.error}}return o}function jk(t){return this instanceof jk?(this.v=t,this):new jk(t)}var zk=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};var Vk=Object.freeze({__proto__:null,__extends:function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function s(){this.constructor=t}kk(t,e),t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)},get __assign(){return Uk},__rest:function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(s[r[i]]=t[r[i]])}return s},__decorate:function(t,e,s,r){var i,n=arguments.length,o=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(n<3?i(o):n>3?i(e,s,o):i(e,s))||o);return n>3&&o&&Object.defineProperty(e,s,o),o},__param:function(t,e){return function(s,r){e(s,r,t)}},__metadata:function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},__awaiter:function(t,e,s,r){return new(s||(s=Promise))((function(i,n){function o(t){try{h(r.next(t))}catch(t){n(t)}}function a(t){try{h(r.throw(t))}catch(t){n(t)}}function h(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(o,a)}h((r=r.apply(t,e||[])).next())}))},__generator:function(t,e){var s,r,i,n,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return n={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function a(n){return function(a){return function(n){if(s)throw new TypeError("Generator is already executing.");for(;o;)try{if(s=1,r&&(i=2&n[0]?r.return:n[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return o.label++,{value:n[1],done:!1};case 5:o.label++,r=n[1],n=[0];continue;case 7:n=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==n[0]&&2!==n[0])){o=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){o.label=n[1];break}if(6===n[0]&&o.label<i[1]){o.label=i[1],i=n;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(n);break}i[2]&&o.ops.pop(),o.trys.pop();continue}n=e.call(t,o)}catch(t){n=[6,t],r=0}finally{s=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}},__createBinding:Hk,__exportStar:function(t,e){for(var s in t)"default"===s||Object.prototype.hasOwnProperty.call(e,s)||Hk(e,t,s)},__values:Bk,__read:Gk,__spread:function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Gk(arguments[e]));return t},__spreadArrays:function(){for(var t=0,e=0,s=arguments.length;e<s;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<s;e++)for(var n=arguments[e],o=0,a=n.length;o<a;o++,i++)r[i]=n[o];return r},__spreadArray:function(t,e,s){if(s||2===arguments.length)for(var r,i=0,n=e.length;i<n;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},__await:jk,__asyncGenerator:function(t,e,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=s.apply(t,e||[]),n=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(t){i[t]&&(r[t]=function(e){return new Promise((function(s,r){n.push([t,e,s,r])>1||a(t,e)}))})}function a(t,e){try{(s=i[t](e)).value instanceof jk?Promise.resolve(s.value.v).then(h,c):l(n[0][2],s)}catch(t){l(n[0][3],t)}var s}function h(t){a("next",t)}function c(t){a("throw",t)}function l(t,e){t(e),n.shift(),n.length&&a(n[0][0],n[0][1])}},__asyncDelegator:function(t){var e,s;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(s=!s)?{value:jk(t[r](e)),done:"return"===r}:i?i(e):e}:i}},__asyncValues:function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,s=t[Symbol.asyncIterator];return s?s.call(t):(t=Bk(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(s){e[s]=t[s]&&function(e){return new Promise((function(r,i){(function(t,e,s,r){Promise.resolve(r).then((function(e){t({value:e,done:s})}),e)})(r,i,(e=t[s](e)).done,e.value)}))}}},__makeTemplateObject:function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},__importStar:function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)"default"!==s&&Object.prototype.hasOwnProperty.call(t,s)&&Hk(e,t,s);return zk(e,t),e},__importDefault:function(t){return t&&t.__esModule?t:{default:t}},__classPrivateFieldGet:function(t,e,s,r){if("a"===s&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?r:"a"===s?r.call(t):r?r.value:e.get(t)},__classPrivateFieldSet:function(t,e,s,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,s):i?i.value=s:e.set(t,s),s},__classPrivateFieldIn:function(t,e){if(null===e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof t?e===t:t.has(e)}}),Wk=Mk((function(t,e){Object.defineProperty(e,"__esModule",{value:!0})})),Yk=Mk((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.DAOCoinLimitOrderOperationTypeString=e.TransactionType=e.NFTLimitOperationString=e.DAOCoinLimitOperationString=e.CreatorCoinLimitOperationString=e.DeSoNetwork=void 0,function(t){t.mainnet="mainnet",t.testnet="testnet"}(e.DeSoNetwork||(e.DeSoNetwork={})),function(t){t.ANY="any",t.BUY="buy",t.SELL="sell",t.TRANSFER="transfer"}(e.CreatorCoinLimitOperationString||(e.CreatorCoinLimitOperationString={})),function(t){t.ANY="any",t.MINT="mint",t.BURN="burn",t.DISABLE_MINTING="disable_minting",t.UPDATE_TRANSFER_RESTRICTION_STATUS="update_transfer_restriction_status",t.TRANSFER="transfer"}(e.DAOCoinLimitOperationString||(e.DAOCoinLimitOperationString={})),function(t){t.ANY="any",t.UPDATE="update",t.BID="nft_bid",t.ACCEPT_BID="accept_nft_bid",t.TRANSFER="transfer",t.BURN="burn",t.ACCEPT_TRANSFER="accept_nft_transfer"}(e.NFTLimitOperationString||(e.NFTLimitOperationString={})),function(t){t.BasicTransfer="BASIC_TRANSFER",t.BitcoinExchange="BITCOIN_EXCHANGE",t.PrivateMessage="PRIVATE_MESSAGE",t.SubmitPost="SUBMIT_POST",t.UpdateProfile="UPDATE_PROFILE",t.UpdateBitcoinUSDExchangeRate="UPDATE_BITCOIN_USD_EXCHANGE_RATE",t.Follow="FOLLOW",t.Like="LIKE",t.CreatorCoin="CREATOR_COIN",t.SwapIdentity="SWAP_IDENTITY",t.UpdateGlobalParams="UPDATE_GLOBAL_PARAMS",t.CreatorCoinTransfer="CREATOR_COIN_TRANSFER",t.CreateNFT="CREATE_NFT",t.UpdateNFT="UPDATE_NFT",t.AcceptNFTBid="ACCEPT_NFT_BID",t.NFTBid="NFT_BID",t.NFTTransfer="NFT_TRANSFER",t.AcceptNFTTransfer="ACCEPT_NFT_TRANSFER",t.BurnNFT="BURN_NFT",t.AuthorizeDerivedKey="AUTHORIZE_DERIVED_KEY",t.MessagingGroup="MESSAGING_GROUP",t.DAOCoin="DAO_COIN",t.DAOCoinTransfer="DAO_COIN_TRANSFER",t.DAOCoinLimitOrder="DAO_COIN_LIMIT_ORDER"}(e.TransactionType||(e.TransactionType={})),function(t){t.DAOCoinLimitOrderOperationTypeStringASK="ASK",t.DAOCoinLimitOrderOperationTypeStringBID="BID"}(e.DAOCoinLimitOrderOperationTypeString||(e.DAOCoinLimitOrderOperationTypeString={}))})),Xk=Pk(Vk),qk=Mk((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),(0,Xk.__exportStar)(Wk,e),(0,Xk.__exportStar)(Yk,e)})),Kk=Mk((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.assignDefaults=e.throwErrors=e.convertExtraDataToHex=e.convertToHex=e.uuid=void 0;e.uuid=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){const e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}));e.convertToHex=t=>t.split("").map((t=>t.charCodeAt(0).toString(16).padStart(2,"0"))).join("");e.convertExtraDataToHex=t=>(Object.keys(t.ExtraData).forEach((s=>{const r=t.ExtraData[s];t.ExtraData[s]=(0,e.convertToHex)(r)})),t);e.throwErrors=(t,e)=>{t.forEach((t=>{if(!e[t])throw Error(`${t} is required`)}))};e.assignDefaults=(t,e)=>(t.forEach((t=>{const s=e[t.name];null==s&&(e[t.name]=t.default)})),e)})),Jk=function(t,e){return function(){for(var s=new Array(arguments.length),r=0;r<s.length;r++)s[r]=arguments[r];return t.apply(e,s)}},$k=Object.prototype.toString;function Zk(t){return Array.isArray(t)}function Qk(t){return void 0===t}function tU(t){return"[object ArrayBuffer]"===$k.call(t)}function eU(t){return null!==t&&"object"==typeof t}function sU(t){if("[object Object]"!==$k.call(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}function rU(t){return"[object Function]"===$k.call(t)}function iU(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),Zk(t))for(var s=0,r=t.length;s<r;s++)e.call(null,t[s],s,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}var nU={isArray:Zk,isArrayBuffer:tU,isBuffer:function(t){return null!==t&&!Qk(t)&&null!==t.constructor&&!Qk(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"[object FormData]"===$k.call(t)},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&tU(t.buffer)},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:eU,isPlainObject:sU,isUndefined:Qk,isDate:function(t){return"[object Date]"===$k.call(t)},isFile:function(t){return"[object File]"===$k.call(t)},isBlob:function(t){return"[object Blob]"===$k.call(t)},isFunction:rU,isStream:function(t){return eU(t)&&rU(t.pipe)},isURLSearchParams:function(t){return"[object URLSearchParams]"===$k.call(t)},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:iU,merge:function t(){var e={};function s(s,r){sU(e[r])&&sU(s)?e[r]=t(e[r],s):sU(s)?e[r]=t({},s):Zk(s)?e[r]=s.slice():e[r]=s}for(var r=0,i=arguments.length;r<i;r++)iU(arguments[r],s);return e},extend:function(t,e,s){return iU(e,(function(e,r){t[r]=s&&"function"==typeof e?Jk(e,s):e})),t},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t}};function oU(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var aU=function(t,e,s){if(!e)return t;var r;if(s)r=s(e);else if(nU.isURLSearchParams(e))r=e.toString();else{var i=[];nU.forEach(e,(function(t,e){null!=t&&(nU.isArray(t)?e+="[]":t=[t],nU.forEach(t,(function(t){nU.isDate(t)?t=t.toISOString():nU.isObject(t)&&(t=JSON.stringify(t)),i.push(oU(e)+"="+oU(t))})))})),r=i.join("&")}if(r){var n=t.indexOf("#");-1!==n&&(t=t.slice(0,n)),t+=(-1===t.indexOf("?")?"?":"&")+r}return t};function hU(){this.handlers=[]}hU.prototype.use=function(t,e,s){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!s&&s.synchronous,runWhen:s?s.runWhen:null}),this.handlers.length-1},hU.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},hU.prototype.forEach=function(t){nU.forEach(this.handlers,(function(e){null!==e&&t(e)}))};var cU=hU,lU=function(t,e){nU.forEach(t,(function(s,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=s,delete t[r])}))},uU=function(t,e,s,r,i){return t.config=e,s&&(t.code=s),t.request=r,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t},pU=function(t,e,s,r,i){var n=new Error(t);return uU(n,e,s,r,i)},dU=nU.isStandardBrowserEnv()?{write:function(t,e,s,r,i,n){var o=[];o.push(t+"="+encodeURIComponent(e)),nU.isNumber(s)&&o.push("expires="+new Date(s).toGMTString()),nU.isString(r)&&o.push("path="+r),nU.isString(i)&&o.push("domain="+i),!0===n&&o.push("secure"),document.cookie=o.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},mU=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],fU=nU.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),s=document.createElement("a");function r(t){var r=t;return e&&(s.setAttribute("href",r),r=s.href),s.setAttribute("href",r),{href:s.href,protocol:s.protocol?s.protocol.replace(/:$/,""):"",host:s.host,search:s.search?s.search.replace(/^\?/,""):"",hash:s.hash?s.hash.replace(/^#/,""):"",hostname:s.hostname,port:s.port,pathname:"/"===s.pathname.charAt(0)?s.pathname:"/"+s.pathname}}return t=r(window.location.href),function(e){var s=nU.isString(e)?r(e):e;return s.protocol===t.protocol&&s.host===t.host}}():function(){return!0};function gU(t){this.message=t}gU.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},gU.prototype.__CANCEL__=!0;var yU=gU,TU=function(t){return new Promise((function(e,s){var r,i=t.data,n=t.headers,o=t.responseType;function a(){t.cancelToken&&t.cancelToken.unsubscribe(r),t.signal&&t.signal.removeEventListener("abort",r)}nU.isFormData(i)&&delete n["Content-Type"];var h=new XMLHttpRequest;if(t.auth){var c=t.auth.username||"",l=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";n.Authorization="Basic "+btoa(c+":"+l)}var u,p,d=(u=t.baseURL,p=t.url,u&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(p)?function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}(u,p):p);function m(){if(h){var r="getAllResponseHeaders"in h?function(t){var e,s,r,i={};return t?(nU.forEach(t.split("\n"),(function(t){if(r=t.indexOf(":"),e=nU.trim(t.substr(0,r)).toLowerCase(),s=nU.trim(t.substr(r+1)),e){if(i[e]&&mU.indexOf(e)>=0)return;i[e]="set-cookie"===e?(i[e]?i[e]:[]).concat([s]):i[e]?i[e]+", "+s:s}})),i):i}(h.getAllResponseHeaders()):null;!function(t,e,s){var r=s.config.validateStatus;s.status&&r&&!r(s.status)?e(pU("Request failed with status code "+s.status,s.config,null,s.request,s)):t(s)}((function(t){e(t),a()}),(function(t){s(t),a()}),{data:o&&"text"!==o&&"json"!==o?h.response:h.responseText,status:h.status,statusText:h.statusText,headers:r,config:t,request:h}),h=null}}if(h.open(t.method.toUpperCase(),aU(d,t.params,t.paramsSerializer),!0),h.timeout=t.timeout,"onloadend"in h?h.onloadend=m:h.onreadystatechange=function(){h&&4===h.readyState&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))&&setTimeout(m)},h.onabort=function(){h&&(s(pU("Request aborted",t,"ECONNABORTED",h)),h=null)},h.onerror=function(){s(pU("Network Error",t,null,h)),h=null},h.ontimeout=function(){var e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",r=t.transitional||IU.transitional;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),s(pU(e,t,r.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",h)),h=null},nU.isStandardBrowserEnv()){var f=(t.withCredentials||fU(d))&&t.xsrfCookieName?dU.read(t.xsrfCookieName):void 0;f&&(n[t.xsrfHeaderName]=f)}"setRequestHeader"in h&&nU.forEach(n,(function(t,e){void 0===i&&"content-type"===e.toLowerCase()?delete n[e]:h.setRequestHeader(e,t)})),nU.isUndefined(t.withCredentials)||(h.withCredentials=!!t.withCredentials),o&&"json"!==o&&(h.responseType=t.responseType),"function"==typeof t.onDownloadProgress&&h.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(r=function(t){h&&(s(!t||t&&t.type?new yU("canceled"):t),h.abort(),h=null)},t.cancelToken&&t.cancelToken.subscribe(r),t.signal&&(t.signal.aborted?r():t.signal.addEventListener("abort",r))),i||(i=null),h.send(i)}))},vU={"Content-Type":"application/x-www-form-urlencoded"};function bU(t,e){!nU.isUndefined(t)&&nU.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var wU,xU={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(wU=TU),wU),transformRequest:[function(t,e){return lU(e,"Accept"),lU(e,"Content-Type"),nU.isFormData(t)||nU.isArrayBuffer(t)||nU.isBuffer(t)||nU.isStream(t)||nU.isFile(t)||nU.isBlob(t)?t:nU.isArrayBufferView(t)?t.buffer:nU.isURLSearchParams(t)?(bU(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):nU.isObject(t)||e&&"application/json"===e["Content-Type"]?(bU(e,"application/json"),function(t,e,s){if(nU.isString(t))try{return(e||JSON.parse)(t),nU.trim(t)}catch(t){if("SyntaxError"!==t.name)throw t}return(s||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){var e=this.transitional||xU.transitional,s=e&&e.silentJSONParsing,r=e&&e.forcedJSONParsing,i=!s&&"json"===this.responseType;if(i||r&&nU.isString(t)&&t.length)try{return JSON.parse(t)}catch(t){if(i){if("SyntaxError"===t.name)throw uU(t,this,"E_JSON_PARSE");throw t}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};nU.forEach(["delete","get","head"],(function(t){xU.headers[t]={}})),nU.forEach(["post","put","patch"],(function(t){xU.headers[t]=nU.merge(vU)}));var IU=xU,EU=function(t,e,s){var r=this||IU;return nU.forEach(s,(function(s){t=s.call(r,t,e)})),t},SU=function(t){return!(!t||!t.__CANCEL__)};function AU(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new yU("canceled")}var RU=function(t){return AU(t),t.headers=t.headers||{},t.data=EU.call(t,t.data,t.headers,t.transformRequest),t.headers=nU.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),nU.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||IU.adapter)(t).then((function(e){return AU(t),e.data=EU.call(t,e.data,e.headers,t.transformResponse),e}),(function(e){return SU(e)||(AU(t),e&&e.response&&(e.response.data=EU.call(t,e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))},CU=function(t,e){e=e||{};var s={};function r(t,e){return nU.isPlainObject(t)&&nU.isPlainObject(e)?nU.merge(t,e):nU.isPlainObject(e)?nU.merge({},e):nU.isArray(e)?e.slice():e}function i(s){return nU.isUndefined(e[s])?nU.isUndefined(t[s])?void 0:r(void 0,t[s]):r(t[s],e[s])}function n(t){if(!nU.isUndefined(e[t]))return r(void 0,e[t])}function o(s){return nU.isUndefined(e[s])?nU.isUndefined(t[s])?void 0:r(void 0,t[s]):r(void 0,e[s])}function a(s){return s in e?r(t[s],e[s]):s in t?r(void 0,t[s]):void 0}var h={url:n,method:n,data:n,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a};return nU.forEach(Object.keys(t).concat(Object.keys(e)),(function(t){var e=h[t]||i,r=e(t);nU.isUndefined(r)&&e!==a||(s[t]=r)})),s},OU="0.25.0",_U=OU,DU={};["object","boolean","number","function","string","symbol"].forEach((function(t,e){DU[t]=function(s){return typeof s===t||"a"+(e<1?"n ":" ")+t}}));var FU={};DU.transitional=function(t,e,s){function r(t,e){return"[Axios v"+_U+"] Transitional option '"+t+"'"+e+(s?". "+s:"")}return function(s,i,n){if(!1===t)throw new Error(r(i," has been removed"+(e?" in "+e:"")));return e&&!FU[i]&&(FU[i]=!0,console.warn(r(i," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(s,i,n)}};var MU={assertOptions:function(t,e,s){if("object"!=typeof t)throw new TypeError("options must be an object");for(var r=Object.keys(t),i=r.length;i-- >0;){var n=r[i],o=e[n];if(o){var a=t[n],h=void 0===a||o(a,n,t);if(!0!==h)throw new TypeError("option "+n+" must be "+h)}else if(!0!==s)throw Error("Unknown option "+n)}},validators:DU},PU=MU.validators;function NU(t){this.defaults=t,this.interceptors={request:new cU,response:new cU}}NU.prototype.request=function(t,e){if("string"==typeof t?(e=e||{}).url=t:e=t||{},!e.url)throw new Error("Provided config url is not valid");(e=CU(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var s=e.transitional;void 0!==s&&MU.assertOptions(s,{silentJSONParsing:PU.transitional(PU.boolean),forcedJSONParsing:PU.transitional(PU.boolean),clarifyTimeoutError:PU.transitional(PU.boolean)},!1);var r=[],i=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(i=i&&t.synchronous,r.unshift(t.fulfilled,t.rejected))}));var n,o=[];if(this.interceptors.response.forEach((function(t){o.push(t.fulfilled,t.rejected)})),!i){var a=[RU,void 0];for(Array.prototype.unshift.apply(a,r),a=a.concat(o),n=Promise.resolve(e);a.length;)n=n.then(a.shift(),a.shift());return n}for(var h=e;r.length;){var c=r.shift(),l=r.shift();try{h=c(h)}catch(t){l(t);break}}try{n=RU(h)}catch(t){return Promise.reject(t)}for(;o.length;)n=n.then(o.shift(),o.shift());return n},NU.prototype.getUri=function(t){if(!t.url)throw new Error("Provided config url is not valid");return t=CU(this.defaults,t),aU(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},nU.forEach(["delete","get","head","options"],(function(t){NU.prototype[t]=function(e,s){return this.request(CU(s||{},{method:t,url:e,data:(s||{}).data}))}})),nU.forEach(["post","put","patch"],(function(t){NU.prototype[t]=function(e,s,r){return this.request(CU(r||{},{method:t,url:e,data:s}))}}));var LU=NU;function kU(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var s=this;this.promise.then((function(t){if(s._listeners){var e,r=s._listeners.length;for(e=0;e<r;e++)s._listeners[e](t);s._listeners=null}})),this.promise.then=function(t){var e,r=new Promise((function(t){s.subscribe(t),e=t})).then(t);return r.cancel=function(){s.unsubscribe(e)},r},t((function(t){s.reason||(s.reason=new yU(t),e(s.reason))}))}kU.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},kU.prototype.subscribe=function(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]},kU.prototype.unsubscribe=function(t){if(this._listeners){var e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}},kU.source=function(){var t;return{token:new kU((function(e){t=e})),cancel:t}};var UU=kU;var HU=function t(e){var s=new LU(e),r=Jk(LU.prototype.request,s);return nU.extend(r,LU.prototype,s),nU.extend(r,s),r.create=function(s){return t(CU(e,s))},r}(IU);HU.Axios=LU,HU.Cancel=yU,HU.CancelToken=UU,HU.isCancel=SU,HU.VERSION=OU,HU.all=function(t){return Promise.all(t)},HU.spread=function(t){return function(e){return t.apply(null,e)}},HU.isAxiosError=function(t){return nU.isObject(t)&&!0===t.isAxiosError};var BU=HU,GU=HU;BU.default=GU;var jU=BU,zU=Mk((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Transactions=void 0;e.Transactions=class{static submitTransaction(t){const e=localStorage.getItem("node_uri");return jU.default.post(`${e}/submit-transaction`,{TransactionHex:t})}static getTransaction(t){const e=localStorage.getItem("node_uri");return jU.default.post(`${e}/get-txn`,{TxnHashHex:t})}static async appendExtraData(t){const e=localStorage.getItem("node_uri");return(await jU.default.post(`${e}/append-extra-data`,t)).data}static getTransactionSpending(t){const e=localStorage.getItem("node_uri");return jU.default.post(`${e}/get-transaction-spending`,t)}}})),VU=Mk((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.handlers=e.iFrameHandler=void 0;e.iFrameHandler=t=>new Promise(((s,r)=>{const i=n=>{(0,e.handlers)(n,i,{...t,data:{...t.data,resolve:s,reject:r}})};window.addEventListener("message",i)}));e.handlers=async(t,e,s)=>{var r,i,n,o,a,h,c,l,u,p,d,m,f,g,y;if("sign"===s.iFrameMethod&&(null===(i=null===(r=null==t?void 0:t.data)||void 0===r?void 0:r.payload)||void 0===i?void 0:i.signedTransactionHex))return zU.Transactions.submitTransaction(null===(o=null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.payload)||void 0===o?void 0:o.signedTransactionHex).then((t=>{var r,i;return(null===(i=null===(r=null==s?void 0:s.data)||void 0===r?void 0:r.prompt)||void 0===i?void 0:i.close)&&s.data.prompt.close(),window.removeEventListener("message",e),s.data.resolve(t),t})).catch((()=>{window.removeEventListener("message",e)}));if("decrypt"===s.iFrameMethod){if(!(null===(h=null===(a=null==t?void 0:t.data)||void 0===a?void 0:a.payload)||void 0===h?void 0:h.decryptedHexes))return;const r=null===(l=null===(c=null==t?void 0:t.data)||void 0===c?void 0:c.payload)||void 0===l?void 0:l.decryptedHexes,i=null===(u=s.data.encryptedMessages)||void 0===u?void 0:u.map((t=>{const e=r[t.EncryptedHex];return{...t,DecryptedMessage:e}}));s.data.resolve(i),window.removeEventListener("message",e)}if("login"===s.iFrameMethod&&"login"===t.data.method){const r=null===(d=null===(p=null==t?void 0:t.data)||void 0===p?void 0:p.payload)||void 0===d?void 0:d.publicKeyAdded,i=JSON.stringify(t.data.payload.users[r]);null===(m=s.data.prompt)||void 0===m||m.close(),s.data.resolve({key:r,user:i}),window.removeEventListener("message",e)}"logout"===s.iFrameMethod&&"login"===t.data.method&&(null===(f=s.data.prompt)||void 0===f||f.close(),s.data.resolve(!0),localStorage.setItem("login_user",""),localStorage.setItem("login_key","")),"jwt"===s.iFrameMethod&&t.data.payload.jwt&&(null===(g=s.data.prompt)||void 0===g||g.close(),s.data.resolve(t.data.payload.jwt),window.removeEventListener("message",e)),"encrypt"===s.iFrameMethod&&t.data.payload.encryptedMessage&&(s.data.resolve(t.data.payload.encryptedMessage),window.removeEventListener("message",e)),"derive"===s.iFrameMethod&&"derive"===t.data.method&&(null===(y=s.data.prompt)||void 0===y||y.close(),s.data.resolve(t.data.payload),window.removeEventListener("derive",e))}})),WU=Mk((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.getIframe=e.approveSignAndSubmit=e.callIdentityMethodAndExecute=void 0;e.callIdentityMethodAndExecute=(t,r)=>{var i;const n=JSON.parse(localStorage.getItem("login_user")),{accessLevelHmac:o,encryptedSeedHex:a,accessLevel:h}=n,c={id:(0,Kk.uuid)(),service:"identity",method:r,payload:{accessLevelHmac:o,encryptedSeedHex:a,accessLevel:h,...s(r,t)}};return null===(i=(0,e.getIframe)().contentWindow)||void 0===i||i.postMessage(c,"*"),(0,VU.iFrameHandler)({iFrameMethod:r,data:s(r,t)})};e.approveSignAndSubmit=(t,e,s)=>{const r=(0,Lk.requestApproval)(t,e,s);return(0,VU.iFrameHandler)({iFrameMethod:"sign",data:{prompt:r}})};e.getIframe=()=>document.getElementById("identity");const s=(t,e)=>"sign"===t?{transactionHex:e}:"encrypt"===t?{message:e.MessageText,recipientPublicKey:e.RecipientPublicKeyBase58Check}:"decrypt"===t?{encryptedMessages:e}:void 0})),YU=Mk((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.BASE_IDENTITY_URI=e.BASE_URI=void 0,e.BASE_URI="https://node.deso.org/api/v0",e.BASE_IDENTITY_URI="https://identity.deso.org"})),XU=Mk((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Identity=void 0;const s="identity_uri";e.Identity=class{constructor(t){var e;this.node=t.node,this.network=t.network||qk.DeSoNetwork.mainnet,this.setUri(null!==(e=t.uri)&&void 0!==e?e:YU.BASE_IDENTITY_URI)}getUri(){return localStorage.getItem(s)||YU.BASE_IDENTITY_URI}setUri(t){localStorage.setItem(s,t)}getIframe(){return(0,WU.getIframe)()}getUser(){const t=localStorage.getItem("login_user");return t?JSON.parse(t):null}getUserKey(){const t=localStorage.getItem("login_key");return t||null}async initialize(){if(!this.getIframe())return new Promise((t=>{window.addEventListener("message",(e=>{e.origin===this.getUri()&&"initialize"===e.data.method&&(e.source.postMessage({id:e.data.id,service:"identity",payload:{}},this.getUri()),t(e.data))})),this.setIdentityFrame(!0)}))}async login(t="4"){const e=(0,Lk.requestLogin)(t,this.getUri(),this.isTestnet()),{key:s,user:r}=await(0,VU.iFrameHandler)({iFrameMethod:"login",data:{prompt:e}});return localStorage.setItem("login_user",r),localStorage.setItem("login_key",s),{user:JSON.parse(r),key:s}}async logout(t){if("string"!=typeof t)throw Error("publicKey needs to be type of string");const e=(0,Lk.requestLogout)(t,this.getUri(),this.isTestnet());return await(0,VU.iFrameHandler)({iFrameMethod:"logout",data:{prompt:e}})}async derive(t){const e={callback:t.callback,webview:t.webview,publicKey:t.publicKey,transactionSpendingLimitResponse:t.transactionSpendingLimitResponse?encodeURIComponent(JSON.stringify(t.transactionSpendingLimitResponse)):void 0,derivedPublicKey:t.derivedPublicKey},s=(0,Lk.requestDerive)(e,this.getUri(),this.isTestnet());return await(0,VU.iFrameHandler)({iFrameMethod:"derive",data:{prompt:s}})}setIdentityFrame(t=!1){let e=document.getElementById("identity");if(e&&t&&e.remove(),!t)return;e=document.createElement("iframe"),e.setAttribute("src",`${this.getUri()}/embed?v=2`),e.setAttribute("id","identity"),e.style.width="100vh",e.style.height="100vh",e.style.position="fixed",e.style.zIndex="1000",e.style.display="none",e.style.left="0",e.style.top="0";const s=document.getElementsByTagName("body")[0];s&&s.appendChild(e)}async submitTransaction(t,e){(null==e?void 0:e.ExtraData)&&Object.keys(null==e?void 0:e.ExtraData).length>0&&(t=(await zU.Transactions.appendExtraData({TransactionHex:t,ExtraData:(0,Kk.convertExtraDataToHex)(e).ExtraData})).TransactionHex);return this.getUser()?(0,WU.callIdentityMethodAndExecute)(t,"sign"):(0,WU.approveSignAndSubmit)(t,this.getUri(),this.isTestnet())}async decrypt(t){let e=this.getUser();return e||(await this.login(),e=this.getUser()),await(0,WU.callIdentityMethodAndExecute)(t,"decrypt")}async encrypt(t){t.RecipientPublicKeyBase58Check;let e=this.getUser();return e||(await this.login(),e=this.getUser()),await(0,WU.callIdentityMethodAndExecute)(t,"encrypt")}async getJwt(){let t=this.getUser();return t||(t=(await this.login()).user),await(0,WU.callIdentityMethodAndExecute)(void 0,"jwt")}isTestnet(){return this.network===qk.DeSoNetwork.testnet}}})),qU=Mk((function(t,e){!function(e,s){t.exports=function(e){var s,r=(e=e||{}).Base64,i="2.6.4",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=function(t){for(var e={},s=0,r=t.length;s<r;s++)e[t.charAt(s)]=s;return e}(n),a=String.fromCharCode,h=function(t){if(t.length<2)return(e=t.charCodeAt(0))<128?t:e<2048?a(192|e>>>6)+a(128|63&e):a(224|e>>>12&15)+a(128|e>>>6&63)+a(128|63&e);var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return a(240|e>>>18&7)+a(128|e>>>12&63)+a(128|e>>>6&63)+a(128|63&e)},c=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,l=function(t){return t.replace(c,h)},u=function(t){var e=[0,2,1][t.length%3],s=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0);return[n.charAt(s>>>18),n.charAt(s>>>12&63),e>=2?"=":n.charAt(s>>>6&63),e>=1?"=":n.charAt(63&s)].join("")},p=e.btoa&&"function"==typeof e.btoa?function(t){return e.btoa(t)}:function(t){if(t.match(/[^\x00-\xFF]/))throw new RangeError("The string contains invalid characters.");return t.replace(/[\s\S]{1,3}/g,u)},d=function(t){return p(l(String(t)))},m=function(t){return t.replace(/[+\/]/g,(function(t){return"+"==t?"-":"_"})).replace(/=/g,"")},f=function(t,e){return e?m(d(t)):d(t)},g=function(t){return f(t,!0)};e.Uint8Array&&(s=function(t,e){for(var s="",r=0,i=t.length;r<i;r+=3){var o=t[r],a=t[r+1],h=t[r+2],c=o<<16|a<<8|h;s+=n.charAt(c>>>18)+n.charAt(c>>>12&63)+(void 0!==a?n.charAt(c>>>6&63):"=")+(void 0!==h?n.charAt(63&c):"=")}return e?m(s):s});var y,T=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,v=function(t){switch(t.length){case 4:var e=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return a(55296+(e>>>10))+a(56320+(1023&e));case 3:return a((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return a((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},b=function(t){return t.replace(T,v)},w=function(t){var e=t.length,s=e%4,r=(e>0?o[t.charAt(0)]<<18:0)|(e>1?o[t.charAt(1)]<<12:0)|(e>2?o[t.charAt(2)]<<6:0)|(e>3?o[t.charAt(3)]:0),i=[a(r>>>16),a(r>>>8&255),a(255&r)];return i.length-=[0,0,2,1][s],i.join("")},x=e.atob&&"function"==typeof e.atob?function(t){return e.atob(t)}:function(t){return t.replace(/\S{1,4}/g,w)},I=function(t){return x(String(t).replace(/[^A-Za-z0-9\+\/]/g,""))},E=function(t){return b(x(t))},S=function(t){return String(t).replace(/[-_]/g,(function(t){return"-"==t?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,"")},A=function(t){return E(S(t))};e.Uint8Array&&(y=function(t){return Uint8Array.from(I(S(t)),(function(t){return t.charCodeAt(0)}))});var R=function(){var t=e.Base64;return e.Base64=r,t};if(e.Base64={VERSION:i,atob:I,btoa:p,fromBase64:A,toBase64:f,utob:l,encode:f,encodeURI:g,btou:b,decode:A,noConflict:R,fromUint8Array:s,toUint8Array:y},"function"==typeof Object.defineProperty){var C=function(t){return{value:t,enumerable:!1,writable:!0,configurable:!0}};e.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",C((function(){return A(this)}))),Object.defineProperty(String.prototype,"toBase64",C((function(t){return f(this,t)}))),Object.defineProperty(String.prototype,"toBase64URI",C((function(){return f(this,!0)})))}}e.Meteor&&(Base64=e.Base64);t.exports&&(t.exports.Base64=e.Base64);return{Base64:e.Base64}}(e)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:Dk)})),KU=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t},JU=Object.prototype.hasOwnProperty;function $U(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(t){return null}}function ZU(t){try{return encodeURIComponent(t)}catch(t){return null}}var QU={stringify:function(t,e){e=e||"";var s,r,i=[];for(r in"string"!=typeof e&&(e="?"),t)if(JU.call(t,r)){if((s=t[r])||null!=s&&!isNaN(s)||(s=""),r=ZU(r),s=ZU(s),null===r||null===s)continue;i.push(r+"="+s)}return i.length?e+i.join("&"):""},parse:function(t){for(var e,s=/([^=?#&]+)=?([^&]*)/g,r={};e=s.exec(t);){var i=$U(e[1]),n=$U(e[2]);null===i||null===n||i in r||(r[i]=n)}return r}},tH=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,eH=/[\n\r\t]/g,sH=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,rH=/:\d+$/,iH=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,nH=/^[a-zA-Z]:/;function oH(t){return(t||"").toString().replace(tH,"")}var aH=[["#","hash"],["?","query"],function(t,e){return lH(e.protocol)?t.replace(/\\/g,"/"):t},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],hH={hash:1,query:1};function cH(t){var e,s=("undefined"!=typeof window?window:void 0!==Dk?Dk:"undefined"!=typeof self?self:{}).location||{},r={},i=typeof(t=t||s);if("blob:"===t.protocol)r=new pH(unescape(t.pathname),{});else if("string"===i)for(e in r=new pH(t,{}),hH)delete r[e];else if("object"===i){for(e in t)e in hH||(r[e]=t[e]);void 0===r.slashes&&(r.slashes=sH.test(t.href))}return r}function lH(t){return"file:"===t||"ftp:"===t||"http:"===t||"https:"===t||"ws:"===t||"wss:"===t}function uH(t,e){t=(t=oH(t)).replace(eH,""),e=e||{};var s,r=iH.exec(t),i=r[1]?r[1].toLowerCase():"",n=!!r[2],o=!!r[3],a=0;return n?o?(s=r[2]+r[3]+r[4],a=r[2].length+r[3].length):(s=r[2]+r[4],a=r[2].length):o?(s=r[3]+r[4],a=r[3].length):s=r[4],"file:"===i?a>=2&&(s=s.slice(2)):lH(i)?s=r[4]:i?n&&(s=s.slice(2)):a>=2&&lH(e.protocol)&&(s=r[4]),{protocol:i,slashes:n||lH(i),slashesCount:a,rest:s}}function pH(t,e,s){if(t=(t=oH(t)).replace(eH,""),!(this instanceof pH))return new pH(t,e,s);var r,i,n,o,a,h,c=aH.slice(),l=typeof e,u=this,p=0;for("object"!==l&&"string"!==l&&(s=e,e=null),s&&"function"!=typeof s&&(s=QU.parse),r=!(i=uH(t||"",e=cH(e))).protocol&&!i.slashes,u.slashes=i.slashes||r&&e.slashes,u.protocol=i.protocol||e.protocol||"",t=i.rest,("file:"===i.protocol&&(2!==i.slashesCount||nH.test(t))||!i.slashes&&(i.protocol||i.slashesCount<2||!lH(u.protocol)))&&(c[3]=[/(.*)/,"pathname"]);p<c.length;p++)"function"!=typeof(o=c[p])?(n=o[0],h=o[1],n!=n?u[h]=t:"string"==typeof n?~(a="@"===n?t.lastIndexOf(n):t.indexOf(n))&&("number"==typeof o[2]?(u[h]=t.slice(0,a),t=t.slice(a+o[2])):(u[h]=t.slice(a),t=t.slice(0,a))):(a=n.exec(t))&&(u[h]=a[1],t=t.slice(0,a.index)),u[h]=u[h]||r&&o[3]&&e[h]||"",o[4]&&(u[h]=u[h].toLowerCase())):t=o(t,u);s&&(u.query=s(u.query)),r&&e.slashes&&"/"!==u.pathname.charAt(0)&&(""!==u.pathname||""!==e.pathname)&&(u.pathname=function(t,e){if(""===t)return e;for(var s=(e||"/").split("/").slice(0,-1).concat(t.split("/")),r=s.length,i=s[r-1],n=!1,o=0;r--;)"."===s[r]?s.splice(r,1):".."===s[r]?(s.splice(r,1),o++):o&&(0===r&&(n=!0),s.splice(r,1),o--);return n&&s.unshift(""),"."!==i&&".."!==i||s.push(""),s.join("/")}(u.pathname,e.pathname)),"/"!==u.pathname.charAt(0)&&lH(u.protocol)&&(u.pathname="/"+u.pathname),KU(u.port,u.protocol)||(u.host=u.hostname,u.port=""),u.username=u.password="",u.auth&&(~(a=u.auth.indexOf(":"))?(u.username=u.auth.slice(0,a),u.username=encodeURIComponent(decodeURIComponent(u.username)),u.password=u.auth.slice(a+1),u.password=encodeURIComponent(decodeURIComponent(u.password))):u.username=encodeURIComponent(decodeURIComponent(u.auth)),u.auth=u.password?u.username+":"+u.password:u.username),u.origin="file:"!==u.protocol&&lH(u.protocol)&&u.host?u.protocol+"//"+u.host:"null",u.href=u.toString()}pH.prototype={set:function(t,e,s){var r=this;switch(t){case"query":"string"==typeof e&&e.length&&(e=(s||QU.parse)(e)),r[t]=e;break;case"port":r[t]=e,KU(e,r.protocol)?e&&(r.host=r.hostname+":"+e):(r.host=r.hostname,r[t]="");break;case"hostname":r[t]=e,r.port&&(e+=":"+r.port),r.host=e;break;case"host":r[t]=e,rH.test(e)?(e=e.split(":"),r.port=e.pop(),r.hostname=e.join(":")):(r.hostname=e,r.port="");break;case"protocol":r.protocol=e.toLowerCase(),r.slashes=!s;break;case"pathname":case"hash":if(e){var i="pathname"===t?"/":"#";r[t]=e.charAt(0)!==i?i+e:e}else r[t]=e;break;case"username":case"password":r[t]=encodeURIComponent(e);break;case"auth":var n=e.indexOf(":");~n?(r.username=e.slice(0,n),r.username=encodeURIComponent(decodeURIComponent(r.username)),r.password=e.slice(n+1),r.password=encodeURIComponent(decodeURIComponent(r.password))):r.username=encodeURIComponent(decodeURIComponent(e))}for(var o=0;o<aH.length;o++){var a=aH[o];a[4]&&(r[a[1]]=r[a[1]].toLowerCase())}return r.auth=r.password?r.username+":"+r.password:r.username,r.origin="file:"!==r.protocol&&lH(r.protocol)&&r.host?r.protocol+"//"+r.host:"null",r.href=r.toString(),r},toString:function(t){t&&"function"==typeof t||(t=QU.stringify);var e,s=this,r=s.host,i=s.protocol;i&&":"!==i.charAt(i.length-1)&&(i+=":");var n=i+(s.protocol&&s.slashes||lH(s.protocol)?"//":"");return s.username?(n+=s.username,s.password&&(n+=":"+s.password),n+="@"):s.password?(n+=":"+s.password,n+="@"):"file:"!==s.protocol&&lH(s.protocol)&&!r&&"/"!==s.pathname&&(n+="@"),(":"===r[r.length-1]||rH.test(s.hostname)&&!s.port)&&(r+=":"),n+=r+s.pathname,(e="object"==typeof s.query?t(s.query):s.query)&&(n+="?"!==e.charAt(0)?"?"+e:e),s.hash&&(n+=s.hash),n}},pH.extractProtocol=uH,pH.location=cH,pH.trimLeft=oH,pH.qs=QU;var dH=pH;function mH(t){return(mH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fH(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gH(t,e){return!e||"object"!==mH(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function yH(t){var e="function"==typeof Map?new Map:void 0;return(yH=function(t){if(null===t||(s=t,-1===Function.toString.call(s).indexOf("[native code]")))return t;var s;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return TH(t,arguments,wH(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),bH(r,t)})(t)}function TH(t,e,s){return(TH=vH()?Reflect.construct:function(t,e,s){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return s&&bH(i,s.prototype),i}).apply(null,arguments)}function vH(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function bH(t,e){return(bH=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function wH(t){return(wH=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xH=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bH(t,e)}(i,t);var e,s,r=(e=i,s=vH(),function(){var t,r=wH(e);if(s){var i=wH(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return gH(this,t)});function i(t){var e,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(fH(this,i),(e=r.call(this,t)).originalRequest=n,e.originalResponse=o,e.causingError=s,null!=s&&(t+=", caused by ".concat(s.toString())),null!=n){var a=n.getHeader("X-Request-ID")||"n/a",h=n.getMethod(),c=n.getURL(),l=o?o.getStatus():"n/a",u=o?o.getBody()||"":"n/a";t+=", originated from request (method: ".concat(h,", url: ").concat(c,", response code: ").concat(l,", response text: ").concat(u,", request id: ").concat(a,")")}return e.message=t,e}return i}(yH(Error)),IH=!1;function EH(t){IH&&console.log(t)}function SH(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,r)}return s}function AH(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?SH(Object(s),!0).forEach((function(e){RH(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):SH(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function RH(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function CH(t,e){for(var s=0;s<e.length;s++){var r=e[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var OH={endpoint:null,uploadUrl:null,metadata:{},fingerprint:null,uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,_onUploadUrlAvailable:null,overridePatchMethod:!1,headers:{},addRequestId:!1,onBeforeRequest:null,onAfterResponse:null,onShouldRetry:null,chunkSize:1/0,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1,urlStorage:null,fileReader:null,httpStack:null},_H=function(){function t(e,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"resume"in s&&console.log("tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead."),this.options=s,this.options.chunkSize=+this.options.chunkSize,this._urlStorage=this.options.urlStorage,this.file=e,this.url=null,this._req=null,this._fingerprint=null,this._urlStorageKey=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0,this._parallelUploads=null,this._parallelUploadUrls=null}var e,s,r;return e=t,r=[{key:"terminate",value:function(e,s){if(arguments.length>1&&"function"==typeof arguments[arguments.length-1])throw new Error("tus: the terminate function does not accept a callback since v2 anymore; please use the returned Promise instead");void 0===s&&(s={});var r=MH("DELETE",e,s);return PH(r,null,s).then((function(t){if(204!==t.getStatus())throw new xH("tus: unexpected response while terminating upload",null,r,t)})).catch((function(i){if(i instanceof xH||(i=new xH("tus: failed to terminate upload",i,r,null)),!NH(i,0,s))throw i;var n=s.retryDelays[0],o=s.retryDelays.slice(1),a=AH(AH({},s),{},{retryDelays:o});return new Promise((function(t){return setTimeout(t,n)})).then((function(){return t.terminate(e,a)}))}))}}],(s=[{key:"findPreviousUploads",value:function(){var t=this;return this.options.fingerprint(this.file,this.options).then((function(e){return t._urlStorage.findUploadsByFingerprint(e)}))}},{key:"resumeFromPreviousUpload",value:function(t){this.url=t.uploadUrl||null,this._parallelUploadUrls=t.parallelUploadUrls||null,this._urlStorageKey=t.urlStorageKey}},{key:"start",value:function(){var t=this,e=this.file;if(e)if(this.options.endpoint||this.options.uploadUrl){var s=this.options.retryDelays;null==s||"[object Array]"===Object.prototype.toString.call(s)?(this.options.parallelUploads>1&&["uploadUrl","uploadSize","uploadLengthDeferred"].forEach((function(e){t.options[e]&&t._emitError(new Error("tus: cannot use the ".concat(e," option when parallelUploads is enabled")))})),this.options.fingerprint(e,this.options).then((function(s){return EH(null==s?"No fingerprint was calculated meaning that the upload cannot be stored in the URL storage.":"Calculated fingerprint: ".concat(s)),t._fingerprint=s,t._source?t._source:t.options.fileReader.openFile(e,t.options.chunkSize)})).then((function(e){t._source=e,t.options.parallelUploads>1||null!=t._parallelUploadUrls?t._startParallelUpload():t._startSingleUpload()})).catch((function(e){t._emitError(e)}))):this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"))}else this._emitError(new Error("tus: neither an endpoint or an upload URL is provided"));else this._emitError(new Error("tus: no file or stream to upload provided"))}},{key:"_startParallelUpload",value:function(){var e=this,s=this._size=this._source.size,r=0;this._parallelUploads=[];var i=null!=this._parallelUploadUrls?this._parallelUploadUrls.length:this.options.parallelUploads,n=function(t,e,s){for(var r=Math.floor(t/e),i=[],n=0;n<e;n++)i.push({start:r*n,end:r*(n+1)});return i[e-1].end=t,s&&i.forEach((function(t,e){t.uploadUrl=s[e]||null})),i}(this._source.size,i,this._parallelUploadUrls);this._parallelUploadUrls=new Array(n.length);var o,a=n.map((function(i,o){var a=0;return e._source.slice(i.start,i.end).then((function(h){var c=h.value;return new Promise((function(h,l){var u=AH(AH({},e.options),{},{uploadUrl:i.uploadUrl||null,storeFingerprintForResuming:!1,removeFingerprintOnSuccess:!1,parallelUploads:1,metadata:{},headers:AH(AH({},e.options.headers),{},{"Upload-Concat":"partial"}),onSuccess:h,onError:l,onProgress:function(t){r=r-a+t,a=t,e._emitProgress(r,s)},_onUploadUrlAvailable:function(){e._parallelUploadUrls[o]=p.url,e._parallelUploadUrls.filter((function(t){return!!t})).length===n.length&&e._saveUploadInUrlStorage()}}),p=new t(c,u);p.start(),e._parallelUploads.push(p)}))}))}));Promise.all(a).then((function(){(o=e._openRequest("POST",e.options.endpoint)).setHeader("Upload-Concat","final;".concat(e._parallelUploadUrls.join(" ")));var t=DH(e.options.metadata);return""!==t&&o.setHeader("Upload-Metadata",t),e._sendRequest(o,null)})).then((function(t){if(FH(t.getStatus(),200)){var s=t.getHeader("Location");null!=s?(e.url=LH(e.options.endpoint,s),EH("Created upload at ".concat(e.url)),e._emitSuccess()):e._emitHttpError(o,t,"tus: invalid or missing Location header")}else e._emitHttpError(o,t,"tus: unexpected response while creating upload")})).catch((function(t){e._emitError(t)}))}},{key:"_startSingleUpload",value:function(){if(this.options.uploadLengthDeferred)this._size=null;else if(null!=this.options.uploadSize){if(this._size=+this.options.uploadSize,isNaN(this._size))return void this._emitError(new Error("tus: cannot convert `uploadSize` option into a number"))}else if(this._size=this._source.size,null==this._size)return void this._emitError(new Error("tus: cannot automatically derive upload's size from input. Specify it manually using the `uploadSize` option or use the `uploadLengthDeferred` option"));return this._aborted=!1,null!=this.url?(EH("Resuming upload from previous URL: ".concat(this.url)),void this._resumeUpload()):null!=this.options.uploadUrl?(EH("Resuming upload from provided URL: ".concat(this.options.uploadUrl)),this.url=this.options.uploadUrl,void this._resumeUpload()):(EH("Creating a new upload"),void this._createUpload())}},{key:"abort",value:function(e){var s=this;if(arguments.length>1&&"function"==typeof arguments[1])throw new Error("tus: the abort function does not accept a callback since v2 anymore; please use the returned Promise instead");return null!=this._parallelUploads&&this._parallelUploads.forEach((function(t){t.abort(e)})),null!==this._req&&(this._req.abort(),this._source.close()),this._aborted=!0,null!=this._retryTimeout&&(clearTimeout(this._retryTimeout),this._retryTimeout=null),e&&null!=this.url?t.terminate(this.url,this.options).then((function(){return s._removeFromUrlStorage()})):Promise.resolve()}},{key:"_emitHttpError",value:function(t,e,s,r){this._emitError(new xH(s,r,t,e))}},{key:"_emitError",value:function(t){var e=this;if(!this._aborted){if(null!=this.options.retryDelays&&(null!=this._offset&&this._offset>this._offsetBeforeRetry&&(this._retryAttempt=0),NH(t,this._retryAttempt,this.options))){var s=this.options.retryDelays[this._retryAttempt++];return this._offsetBeforeRetry=this._offset,void(this._retryTimeout=setTimeout((function(){e.start()}),s))}if("function"!=typeof this.options.onError)throw t;this.options.onError(t)}}},{key:"_emitSuccess",value:function(){this.options.removeFingerprintOnSuccess&&this._removeFromUrlStorage(),"function"==typeof this.options.onSuccess&&this.options.onSuccess()}},{key:"_emitProgress",value:function(t,e){"function"==typeof this.options.onProgress&&this.options.onProgress(t,e)}},{key:"_emitChunkComplete",value:function(t,e,s){"function"==typeof this.options.onChunkComplete&&this.options.onChunkComplete(t,e,s)}},{key:"_createUpload",value:function(){var t=this;if(this.options.endpoint){var e=this._openRequest("POST",this.options.endpoint);this.options.uploadLengthDeferred?e.setHeader("Upload-Defer-Length",1):e.setHeader("Upload-Length",this._size);var s,r=DH(this.options.metadata);""!==r&&e.setHeader("Upload-Metadata",r),this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred?(this._offset=0,s=this._addChunkToRequest(e)):s=this._sendRequest(e,null),s.then((function(s){if(FH(s.getStatus(),200)){var r=s.getHeader("Location");if(null!=r){if(t.url=LH(t.options.endpoint,r),EH("Created upload at ".concat(t.url)),"function"==typeof t.options._onUploadUrlAvailable&&t.options._onUploadUrlAvailable(),0===t._size)return t._emitSuccess(),void t._source.close();t._saveUploadInUrlStorage(),t.options.uploadDataDuringCreation?t._handleUploadResponse(e,s):(t._offset=0,t._performUpload())}else t._emitHttpError(e,s,"tus: invalid or missing Location header")}else t._emitHttpError(e,s,"tus: unexpected response while creating upload")})).catch((function(s){t._emitHttpError(e,null,"tus: failed to create upload",s)}))}else this._emitError(new Error("tus: unable to create upload because no endpoint is provided"))}},{key:"_resumeUpload",value:function(){var t=this,e=this._openRequest("HEAD",this.url);this._sendRequest(e,null).then((function(s){var r=s.getStatus();if(!FH(r,200))return FH(r,400)&&t._removeFromUrlStorage(),423===r?void t._emitHttpError(e,s,"tus: upload is currently locked; retry later"):t.options.endpoint?(t.url=null,void t._createUpload()):void t._emitHttpError(e,s,"tus: unable to resume upload (new upload cannot be created without an endpoint)");var i=parseInt(s.getHeader("Upload-Offset"),10);if(isNaN(i))t._emitHttpError(e,s,"tus: invalid or missing offset value");else{var n=parseInt(s.getHeader("Upload-Length"),10);if(!isNaN(n)||t.options.uploadLengthDeferred){if("function"==typeof t.options._onUploadUrlAvailable&&t.options._onUploadUrlAvailable(),i===n)return t._emitProgress(n,n),void t._emitSuccess();t._offset=i,t._performUpload()}else t._emitHttpError(e,s,"tus: invalid or missing length value")}})).catch((function(s){t._emitHttpError(e,null,"tus: failed to resume upload",s)}))}},{key:"_performUpload",value:function(){var t,e=this;this._aborted||(this.options.overridePatchMethod?(t=this._openRequest("POST",this.url)).setHeader("X-HTTP-Method-Override","PATCH"):t=this._openRequest("PATCH",this.url),t.setHeader("Upload-Offset",this._offset),this._addChunkToRequest(t).then((function(s){FH(s.getStatus(),200)?e._handleUploadResponse(t,s):e._emitHttpError(t,s,"tus: unexpected response while uploading chunk")})).catch((function(s){e._aborted||e._emitHttpError(t,null,"tus: failed to upload chunk at offset ".concat(e._offset),s)})))}},{key:"_addChunkToRequest",value:function(t){var e=this,s=this._offset,r=this._offset+this.options.chunkSize;return t.setProgressHandler((function(t){e._emitProgress(s+t,e._size)})),t.setHeader("Content-Type","application/offset+octet-stream"),(r===1/0||r>this._size)&&!this.options.uploadLengthDeferred&&(r=this._size),this._source.slice(s,r).then((function(s){var r=s.value,i=s.done;return e.options.uploadLengthDeferred&&i&&(e._size=e._offset+(r&&r.size?r.size:0),t.setHeader("Upload-Length",e._size)),null===r?e._sendRequest(t):(e._emitProgress(e._offset,e._size),e._sendRequest(t,r))}))}},{key:"_handleUploadResponse",value:function(t,e){var s=parseInt(e.getHeader("Upload-Offset"),10);if(isNaN(s))this._emitHttpError(t,e,"tus: invalid or missing offset value");else{if(this._emitProgress(s,this._size),this._emitChunkComplete(s-this._offset,s,this._size),this._offset=s,s==this._size)return this._emitSuccess(),void this._source.close();this._performUpload()}}},{key:"_openRequest",value:function(t,e){var s=MH(t,e,this.options);return this._req=s,s}},{key:"_removeFromUrlStorage",value:function(){var t=this;this._urlStorageKey&&(this._urlStorage.removeUpload(this._urlStorageKey).catch((function(e){t._emitError(e)})),this._urlStorageKey=null)}},{key:"_saveUploadInUrlStorage",value:function(){var t=this;if(this.options.storeFingerprintForResuming&&this._fingerprint){var e={size:this._size,metadata:this.options.metadata,creationTime:(new Date).toString()};this._parallelUploads?e.parallelUploadUrls=this._parallelUploadUrls:e.uploadUrl=this.url,this._urlStorage.addUpload(this._fingerprint,e).then((function(e){return t._urlStorageKey=e})).catch((function(e){t._emitError(e)}))}}},{key:"_sendRequest",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return PH(t,e,this.options)}}])&&CH(e.prototype,s),r&&CH(e,r),t}();function DH(t){var e=[];for(var s in t)e.push("".concat(s," ").concat(qU.Base64.encode(t[s])));return e.join(",")}function FH(t,e){return t>=e&&t<e+100}function MH(t,e,s){var r=s.httpStack.createRequest(t,e);r.setHeader("Tus-Resumable","1.0.0");var i=s.headers||{};for(var n in i)r.setHeader(n,i[n]);if(s.addRequestId){var o="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}));r.setHeader("X-Request-ID",o)}return r}function PH(t,e,s){return("function"==typeof s.onBeforeRequest?Promise.resolve(s.onBeforeRequest(t)):Promise.resolve()).then((function(){return t.send(e).then((function(e){return("function"==typeof s.onAfterResponse?Promise.resolve(s.onAfterResponse(t,e)):Promise.resolve()).then((function(){return e}))}))}))}function NH(t,e,s){if(null==s.retryDelays||e>=s.retryDelays.length||null==t.originalRequest)return!1;if(s&&"function"==typeof s.onShouldRetry)return s.onShouldRetry(t,e,s);var r,i=t.originalResponse?t.originalResponse.getStatus():0;return(!FH(i,400)||409===i||423===i)&&(r=!0,"undefined"!=typeof window&&"navigator"in window&&!1===window.navigator.onLine&&(r=!1),r)}function LH(t,e){return new dH(e,t).toString()}function kH(t,e){for(var s=0;s<e.length;s++){var r=e[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}_H.defaultOptions=OH;var UH=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,s,r;return e=t,(s=[{key:"listAllUploads",value:function(){return Promise.resolve([])}},{key:"findUploadsByFingerprint",value:function(t){return Promise.resolve([])}},{key:"removeUpload",value:function(t){return Promise.resolve()}},{key:"addUpload",value:function(t,e){return Promise.resolve(null)}}])&&kH(e.prototype,s),r&&kH(e,r),t}();function HH(t,e){for(var s=0;s<e.length;s++){var r=e[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var BH=!1;try{BH="localStorage"in window;var GH="tusSupport";localStorage.setItem(GH,localStorage.getItem(GH))}catch(t){if(t.code!==t.SECURITY_ERR&&t.code!==t.QUOTA_EXCEEDED_ERR)throw t;BH=!1}var jH=BH,zH=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,s,r;return e=t,(s=[{key:"findAllUploads",value:function(){var t=this._findEntries("tus::");return Promise.resolve(t)}},{key:"findUploadsByFingerprint",value:function(t){var e=this._findEntries("tus::".concat(t,"::"));return Promise.resolve(e)}},{key:"removeUpload",value:function(t){return localStorage.removeItem(t),Promise.resolve()}},{key:"addUpload",value:function(t,e){var s=Math.round(1e12*Math.random()),r="tus::".concat(t,"::").concat(s);return localStorage.setItem(r,JSON.stringify(e)),Promise.resolve(r)}},{key:"_findEntries",value:function(t){for(var e=[],s=0;s<localStorage.length;s++){var r=localStorage.key(s);if(0===r.indexOf(t))try{var i=JSON.parse(localStorage.getItem(r));i.urlStorageKey=r,e.push(i)}catch(t){}}return e}}])&&HH(e.prototype,s),r&&HH(e,r),t}();function VH(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function WH(t,e){for(var s=0;s<e.length;s++){var r=e[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function YH(t,e,s){return e&&WH(t.prototype,e),s&&WH(t,s),t}var XH=function(){function t(){VH(this,t)}return YH(t,[{key:"createRequest",value:function(t,e){return new qH(t,e)}},{key:"getName",value:function(){return"XHRHttpStack"}}]),t}(),qH=function(){function t(e,s){VH(this,t),this._xhr=new XMLHttpRequest,this._xhr.open(e,s,!0),this._method=e,this._url=s,this._headers={}}return YH(t,[{key:"getMethod",value:function(){return this._method}},{key:"getURL",value:function(){return this._url}},{key:"setHeader",value:function(t,e){this._xhr.setRequestHeader(t,e),this._headers[t]=e}},{key:"getHeader",value:function(t){return this._headers[t]}},{key:"setProgressHandler",value:function(t){"upload"in this._xhr&&(this._xhr.upload.onprogress=function(e){e.lengthComputable&&t(e.loaded)})}},{key:"send",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise((function(s,r){t._xhr.onload=function(){s(new KH(t._xhr))},t._xhr.onerror=function(t){r(t)},t._xhr.send(e)}))}},{key:"abort",value:function(){return this._xhr.abort(),Promise.resolve()}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),t}(),KH=function(){function t(e){VH(this,t),this._xhr=e}return YH(t,[{key:"getStatus",value:function(){return this._xhr.status}},{key:"getHeader",value:function(t){return this._xhr.getResponseHeader(t)}},{key:"getBody",value:function(){return this._xhr.responseText}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),t}(),JH=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase()};function $H(t,e){for(var s=0;s<e.length;s++){var r=e[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ZH=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._file=e,this.size=e.size}var e,s,r;return e=t,(s=[{key:"slice",value:function(t,e){if("undefined"!=typeof window&&(void 0!==window.PhoneGap||void 0!==window.Cordova||void 0!==window.cordova))return s=this._file.slice(t,e),new Promise((function(t,e){var r=new FileReader;r.onload=function(){var e=new Uint8Array(r.result);t({value:e})},r.onerror=function(t){e(t)},r.readAsArrayBuffer(s)}));var s,r=this._file.slice(t,e);return Promise.resolve({value:r})}},{key:"close",value:function(){}}])&&$H(e.prototype,s),r&&$H(e,r),t}();function QH(t,e){for(var s=0;s<e.length;s++){var r=e[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function tB(t){return void 0===t?0:void 0!==t.size?t.size:t.length}var eB=function(){function t(e,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._chunkSize=s,this._buffer=void 0,this._bufferOffset=0,this._reader=e,this._done=!1}var e,s,r;return e=t,(s=[{key:"slice",value:function(t,e){return t<this._bufferOffset?Promise.reject(new Error("Requested data is before the reader's current offset")):this._readUntilEnoughDataOrDone(t,e)}},{key:"_readUntilEnoughDataOrDone",value:function(t,e){var s=this,r=e<=this._bufferOffset+tB(this._buffer);if(this._done||r){var i=this._getDataFromBuffer(t,e),n=null==i&&this._done;return Promise.resolve({value:i,done:n})}return this._reader.read().then((function(r){var i=r.value;return r.done?s._done=!0:void 0===s._buffer?s._buffer=i:s._buffer=function(t,e){if(t.concat)return t.concat(e);if(t instanceof Blob)return new Blob([t,e],{type:t.type});if(t.set){var s=new t.constructor(t.length+e.length);return s.set(t),s.set(e,t.length),s}throw new Error("Unknown data type")}(s._buffer,i),s._readUntilEnoughDataOrDone(t,e)}))}},{key:"_getDataFromBuffer",value:function(t,e){t>this._bufferOffset&&(this._buffer=this._buffer.slice(t-this._bufferOffset),this._bufferOffset=t);var s=0===tB(this._buffer);return this._done&&s?null:this._buffer.slice(0,e-t)}},{key:"close",value:function(){this._reader.cancel&&this._reader.cancel()}}])&&QH(e.prototype,s),r&&QH(e,r),t}();function sB(t,e){for(var s=0;s<e.length;s++){var r=e[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var rB=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,s,r;return e=t,(s=[{key:"openFile",value:function(t,e){return JH()&&t&&void 0!==t.uri?(s=t.uri,new Promise((function(t,e){var r=new XMLHttpRequest;r.responseType="blob",r.onload=function(){var e=r.response;t(e)},r.onerror=function(t){e(t)},r.open("GET",s),r.send()}))).then((function(t){return new ZH(t)})).catch((function(t){throw new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. ".concat(t))})):"function"==typeof t.slice&&void 0!==t.size?Promise.resolve(new ZH(t)):"function"==typeof t.read?(e=+e,isFinite(e)?Promise.resolve(new eB(t,e)):Promise.reject(new Error("cannot create source for stream without a finite value for the `chunkSize` option"))):Promise.reject(new Error("source object may only be an instance of File, Blob, or Reader in this environment"));var s}}])&&sB(e.prototype,s),r&&sB(e,r),t}();function iB(t){return(iB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nB(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oB(t,e){for(var s=0;s<e.length;s++){var r=e[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function aB(t,e){return(aB=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function hB(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var s,r=lB(t);if(e){var i=lB(this).constructor;s=Reflect.construct(r,arguments,i)}else s=r.apply(this,arguments);return cB(this,s)}}function cB(t,e){return!e||"object"!==iB(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function lB(t){return(lB=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function uB(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,r)}return s}function pB(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?uB(Object(s),!0).forEach((function(e){dB(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):uB(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function dB(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var mB=pB(pB({},_H.defaultOptions),{},{httpStack:new XH,fileReader:new rB,urlStorage:jH?new zH:new UH,fingerprint:function(t,e){return JH()?Promise.resolve(function(t,e){var s=t.exif?function(t){var e=0;if(0===t.length)return e;for(var s=0;s<t.length;s++){e=(e<<5)-e+t.charCodeAt(s),e&=e}return e}(JSON.stringify(t.exif)):"noexif";return["tus-rn",t.name||"noname",t.size||"nosize",s,e.endpoint].join("/")}(t,e)):Promise.resolve(["tus-br",t.name,t.type,t.size,t.lastModified,e.endpoint].join("-"))}}),fB=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&aB(t,e)}(n,t);var e,s,r,i=hB(n);function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return nB(this,n),e=pB(pB({},mB),e),i.call(this,t,e)}return e=n,r=[{key:"terminate",value:function(t,e,s){return e=pB(pB({},mB),e),_H.terminate(t,e,s)}}],(s=null)&&oB(e.prototype,s),r&&oB(e,r),n}(_H),gB=window,yB=gB.XMLHttpRequest,TB=gB.Blob,vB=yB&&TB&&"function"==typeof TB.prototype.slice,bB=Pk(Object.freeze({__proto__:null,Upload:fB,canStoreURLs:jH,defaultOptions:mB,isSupported:vB,enableDebugLog:function(){IH=!0},HttpStack:XH})),wB=Mk((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.uploadImageHelper=e.selectFile=e.uploadVideoToCloudFlare=void 0;e.uploadVideoToCloudFlare=(t,e,s)=>{if(!e||!e.type.startsWith("video/"))throw Error("invalid file or file type");let r;return new Promise(((i,n)=>{const o={endpoint:t,chunkSize:52428800,uploadSize:e.size,onError:function(t){throw new Error(t)},onProgress:function(t,e){},onSuccess:function(){r||n("no media id");i(`https://iframe.videodelivery.net/${r}`)},onAfterResponse:function(t,e){const s=e.getHeader("stream-media-id");!r&&s&&(r=s)}};(null==s?void 0:s.onAfterResponse)&&(o.onAfterResponse=s.onAfterResponse),(null==s?void 0:s.onProgress)&&(o.onProgress=s.onProgress),new bB.Upload(e,o).start()}))};e.selectFile=()=>{const t=document.createElement("input");t.type="file",t.click();return new Promise(((e,s)=>{t.onchange=()=>{t&&t.files&&t.files[0]?e(t.files[0]):s(new Error("No File selected"))}}))};e.uploadImageHelper=async(t,e,s)=>{const r=new FormData;return r.append("file",t.file),r.append("UserPublicKeyBase58Check",t.UserPublicKeyBase58Check),r.append("JWT",s),await(await jU.default.post(`${e.getUri()}/upload-image`,r)).data}})),xB=Mk((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Media=void 0;e.Media=class{constructor(t,e){this.node=t,this.identity=e}async uploadImage(t){const e=await this.identity.getJwt();if(document&&!t.file){const e=await(0,wB.selectFile)();e&&(t.file=e)}if((0,Kk.throwErrors)(["UserPublicKeyBase58Check","file"],t),t.file&&t.file.type.startsWith("image/"))return(0,wB.uploadImageHelper)(t,this.node,e)}async uploadVideo(t={}){if(!(null==t?void 0:t.file)){const e=await(0,wB.selectFile)();t.file=e}return(0,wB.uploadVideoToCloudFlare)(`${this.node.getUri()}/upload-video`,t.file)}async getVideoStatus(t){(0,Kk.throwErrors)(["videoId"],t);return await jU.default.get(`${this.node.getUri()}/get-video-status/${t.videoId}`)}async getFullTikTokUrl(t){return await jU.default.post(`${this.node.getUri()}/get-full-tiktok-url`,t)}}})),IB=Mk((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MetaData=void 0;e.MetaData=class{constructor(t,e){this.node=t,this.identity=e}async getAppState(t){return(await jU.default.post(`${YU.BASE_URI}/get-app-state`,t)).data}async getExchangeRate(){return(await jU.default.get(`${YU.BASE_URI}/get-exchange-rate`)).data}async healthCheck(){return(await jU.default.get(`${YU.BASE_URI}/health-check`)).data}}})),EB=Mk((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Miner=void 0;e.Miner=class{constructor(t,e){this.node=t,this.identity=e}async getBlockTemplate(t){return await jU.default.post(`${this.node.getUri()}/get-block-template`,t)}async submitBlock(t){return await jU.default.post(`${this.node.getUri()}/submit-block`,t)}}})),SB=Mk((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Nft=void 0;e.Nft=class{constructor(t,e){this.node=t,this.identity=e}async getNftsForUser(t){return await jU.default.post(`${this.node.getUri()}/get-nfts-for-user`,t)}async getNftBidsForUser(t){return await jU.default.post(`${this.node.getUri()}/get-nft-bids-for-user`,t)}async getNftBidsForNftPost(t){return await jU.default.post(`${this.node.getUri()}/get-nft-bids-for-nft-post`,t)}async getNftShowcase(t){return await jU.default.post(`${this.node.getUri()}/get-nft-showcase`,t)}async getNextNftShowCase(t){return await jU.default.post(`${this.node.getUri()}/get-next-nft-showcase`,t)}async getNftCollectionSummary(t){return await jU.default.post(`${this.node.getUri()}/get-nft-collection-summary`,t)}async getNftEntriesForPostHash(t){return await jU.default.post(`${this.node.getUri()}/get-nft-entries-for-nft-post`,t)}async createNft(t){const e=(await jU.default.post(`${this.node.getUri()}/create-nft`,t)).data;return await this.identity.submitTransaction(e.TransactionHex).then((()=>e)).catch((()=>{throw Error("something went wrong while signing")}))}async updateNft(t){const e=(await jU.default.post(`${this.node.getUri()}/update-nft`,t)).data;return await this.identity.submitTransaction(e.TransactionHex).then((()=>e)).catch((()=>{throw Error("something went wrong while signing")}))}async createNftBid(t){const e=(await jU.default.post(`${this.node.getUri()}/create-nft-bid`,t)).data;return await this.identity.submitTransaction(e.TransactionHex).then((()=>e)).catch((()=>{throw Error("something went wrong while signing")}))}async acceptNftBid(t){const e=await(await jU.default.post(`${this.node.getUri()}/accept-nft-bid`,t)).data;return await this.identity.submitTransaction(e.TransactionHex).then((()=>e)).catch((()=>{throw Error("something went wrong while signing")}))}async transferNft(t){const e=await(await jU.default.post(`${this.node.getUri()}/transfer-nft`,t)).data;return await this.identity.submitTransaction(e.TransactionHex).then((()=>e)).catch((()=>{throw Error("something went wrong while signing")}))}async acceptNftTransfer(t){const e=(await jU.default.post(`${this.node.getUri()}/accept-nft-transfer`,t)).data;return await this.identity.submitTransaction(e.TransactionHex).then((()=>e)).catch((()=>{throw Error("something went wrong while signing")}))}async burnNft(t){const e=(await jU.default.post(`${this.node.getUri()}/burn-nft`,t)).data;return await this.identity.submitTransaction(e.TransactionHex).then((()=>e)).catch((()=>{throw Error("something went wrong while signing")}))}}})),AB=Mk((function(t,e){let s;Object.defineProperty(e,"__esModule",{value:!0}),e.Notification=void 0;e.Notification=class{constructor(t,e){this.node=t,this.identity=e,s=this}async getNotifications(t){return await jU.default.post(`${this.node.getUri()}/get-notifications`,t)}async getUnreadNotificationsCount(t){return await jU.default.post(`${this.node.getUri()}/get-unread-notifications-count`,t)}async setNotificationMetadata(t){const e=await this.identity.getJwt(),r=await s.getUnreadNotificationsCount({PublicKeyBase58Check:t.PublicKeyBase58Check});t.LastSeenIndex=r.LastUnreadNotificationIndex,t.UnreadNotifications=0,t.JWT=e;return await jU.default.post(`${this.node.getUri()}/set-notification-metadata`,t)}}})),RB=Mk((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Posts=void 0;e.Posts=class{constructor(t,e){this.node=t,this.identity=e}async getPostsForPublicKey(t){return(await jU.default.post(`${this.node.getUri()}/get-posts-for-public-key`,t)).data}async submitPost(t,e){if(!t.UpdaterPublicKeyBase58Check)throw Error("UpdaterPublicKeyBase58Check is required");if(!t.BodyObj)throw Error("BodyObj is required");t.MinFeeRateNanosPerKB||(t.MinFeeRateNanosPerKB=1500);const s=(await jU.default.post(`${this.node.getUri()}/submit-post`,t)).data;return await this.identity.submitTransaction(s.TransactionHex,e).then((t=>(s.PostHashHex=t.data.TxnHashHex,s))).catch((()=>{throw Error("something went wrong while signing")}))}async getPostsStateless(t){return await(await jU.default.post(`${this.node.getUri()}/get-posts-stateless`,t)).data}async getSinglePost(t){(0,Kk.throwErrors)(["PostHashHex"],t);return await(await jU.default.post(`${this.node.getUri()}/get-single-post`,t)).data}async getHotFeed(t){return await(await jU.default.post(`${this.node.getUri()}/get-hot-feed`,t)).data}async getDiamondedPosts(t){return await(await jU.default.post(`${this.node.getUri()}/get-diamonded-posts`,t)).data}async getLikesForPost(t){return await(await jU.default.post(`${this.node.getUri()}/get-likes-for-post`,t)).data}async getDiamondsForPost(t){return await(await jU.default.post(`${this.node.getUri()}/get-diamonds-for-post`,t)).data}async getRepostsForPost(t){return await(await jU.default.post(`${this.node.getUri()}/get-reposts-for-post`,t)).data}async getQuoteRepostsForPost(t){return await(await jU.default.post(`${this.node.getUri()}/get-quote-reposts-for-post`,t)).data}}})),CB=Mk((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Referral=void 0;e.Referral=class{constructor(t,e){this.node=t,this.identity=e}async getReferralInfoForUser(t){if((0,Kk.throwErrors)(["PublicKeyBase58Check"],t),!t.JWT){const e=await this.identity.getJwt();t.JWT=e}return await jU.default.post(`${this.node.getUri()}/get-referral-info-for-user`,t)}async getReferralInfoForReferralHash(t){(0,Kk.throwErrors)(["ReferralHash"],t);return await jU.default.post(`${this.node.getUri()}/get-referral-info-for-referral-hash`,t)}}})),OB=Mk((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Social=void 0;e.Social=class{constructor(t,e,s){this.user=s,this.node=t,this.identity=e}async sendMessage(t){const e=await this.identity.encrypt(t);t.EncryptedMessageText=e,t.MinFeeRateNanosPerKB||(t.MinFeeRateNanosPerKB=1e3);const s=(await jU.default.post(`${this.node.getUri()}/send-message-stateless`,t)).data;return await this.identity.submitTransaction(s.TransactionHex)}async createFollowTxnStateless(t){if(!t.FollowerPublicKeyBase58Check)throw Error("FollowerPublicKeyBase58Check is undefined");if(!t.FollowedPublicKeyBase58Check)throw Error("FollowedPublicKeyBase58Check is undefined");if(t.IsUnfollow instanceof Boolean)throw Error("IsUnfollow is undefined");t={MinFeeRateNanosPerKB:1e3,...t};const e=(await jU.default.post(`${this.node.getUri()}/create-follow-txn-stateless`,t)).data;return await this.identity.submitTransaction(e.TransactionHex)}async getFollowsStateless(t){return(await jU.default.post(`${this.node.getUri()}/get-follows-stateless`,t)).data}async getMessagesStateless(t){const e=(await jU.default.post(`${this.node.getUri()}/get-messages-stateless`,t)).data.OrderedContactsWithMessages.map((t=>null===t.Messages?[]:t.Messages.map((t=>({EncryptedHex:t.EncryptedText,PublicKey:t.IsSender?t.RecipientPublicKeyBase58Check:t.SenderPublicKeyBase58Check,IsSender:t.IsSender,Legacy:!t.V2&&(!t.Version||t.Version<2),Version:t.Version,SenderMessagingPublicKey:t.SenderMessagingPublicKey,SenderMessagingGroupKeyName:t.SenderMessagingGroupKeyName,RecipientMessagingPublicKey:t.RecipientMessagingPublicKey,RecipientMessagingGroupKeyName:t.RecipientMessagingGroupKeyName}))))).flat();return this.identity.decrypt(e)}async getHodlersForPublicKey(t){return await jU.default.post(`${this.node.getUri()}/get-hodlers-for-public-key`,t)}async getDiamondsForPublicKey(t){return await jU.default.post(`${this.node.getUri()}/get-diamonds-for-public-key`,t)}async isFollowingPublicKey(t){return await jU.default.post(`${this.node.getUri()}/is-following-public-key`,t)}async isHodlingPublicKey(t){return await jU.default.post(`${this.node.getUri()}/is-hodling-public-key`,t)}async updateProfile(t){const e=(await jU.default.post(`${this.node.getUri()}/update-profile`,t)).data;return await this.identity.submitTransaction(e.TransactionHex).then((()=>e)).catch((()=>{throw Error("something went wrong while signing")}))}async sendDiamonds(t){const e=(await jU.default.post(`${this.node.getUri()}/send-diamonds`,t)).data;return await this.identity.submitTransaction(e.TransactionHex).then((()=>e)).catch((()=>{throw Error("something went wrong while signing")}))}async createLikeStateless(t){const e=await(await jU.default.post(`${this.node.getUri()}/create-like-stateless`,t)).data;return await this.identity.submitTransaction(e.TransactionHex).then((()=>e)).catch((()=>{throw Error("something went wrong while signing")}))}}})),_B=Mk((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.User=void 0;e.User=class{constructor(t,e){this.node=t,this.identity=e}async getUserStateless(t){return(await jU.default.post(`${this.node.getUri()}/get-users-stateless`,t)).data}getSingleProfilePicture(t){return`${this.node.getUri()}/get-single-profile-picture/${t}`}async getSingleProfile(t){return(await jU.default.post(`${this.node.getUri()}/get-single-profile`,t)).data}async getProfiles(t){return(await jU.default.post(`${this.node.getUri()}/get-profiles`,t)).data}async getUserMetadata(t){const e=`get-user-metadata/${t.PublicKeyBase58Check}`;return(await jU.default.get(`${this.node.getUri()}/${e}`)).data}async deletePii(t){if(!t.PublicKeyBase58Check)throw Error("PublicKeyBase58Check is undefined");const e=await this.identity.getJwt();return await jU.default.post(`${this.node.getUri()}/delete-pii`,{...t,JWT:e}),!0}async blockPublicKey(t){if(!t.PublicKeyBase58Check)throw Error("PublicKeyBase58Check is undefined");if(!t.BlockPublicKeyBase58Check)throw Error("BlockPublicKeyBase58Check is undefined");const e=await this.identity.getJwt();return await jU.default.post(`${this.node.getUri()}/block-public-key`,{...t,JWT:e})}async getUserDerivedKeys(t){if(!t.PublicKeyBase58Check)throw Error("PublicKeyBase58Check is undefined");const e=await this.identity.getJwt();return await jU.default.post(`${this.node.getUri()}/get-user-derived-keys`,{...t,JWT:e})}async authorizeDerivedKey(t,e){(0,Kk.throwErrors)(["MinFeeRateNanosPerKB"],t);const s=await this.identity.derive({publicKey:this.identity.getUserKey()||void 0,transactionSpendingLimitResponse:t.TransactionSpendingLimitResponse,derivedPublicKey:t.DerivedPublicKeyBase58Check}),r={OwnerPublicKeyBase58Check:s.publicKeyBase58Check,DerivedPublicKeyBase58Check:s.derivedPublicKeyBase58Check,ExpirationBlock:s.expirationBlock,AccessSignature:s.accessSignature,DeleteKey:t.DeleteKey,ExtraData:t.ExtraData,TransactionSpendingLimitHex:s.transactionSpendingLimitHex,Memo:t.Memo,AppName:t.AppName,TransactionFees:t.TransactionFees,MinFeeRateNanosPerKB:t.MinFeeRateNanosPerKB},i=(await jU.default.post(`${this.node.getUri()}/authorize-derived-key`,r)).data;return e?await this.identity.submitTransaction(i.TransactionHex).then((()=>i)).catch((()=>{throw Error("something went wrong while signing")})):i}}})),DB=Mk((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Node=void 0;e.Node=class{getUri(){return localStorage.getItem("node_uri")||YU.BASE_URI}setUri(t){localStorage.setItem("node_uri",t)}constructor(t){this.setUri(null!=t?t:YU.BASE_URI)}}})),FB=Mk((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Wallet=void 0;e.Wallet=class{constructor(t,e){this.node=t,this.identity=e}async sendDesoRequest(t){const e=(await jU.default.post(`${this.node.getUri()}/send-deso`,t)).data;return await this.identity.submitTransaction(e.TransactionHex).then((()=>e)).catch((()=>{throw Error("something went wrong while signing")}))}async buyOrSellCreatorCoin(t){const e=(await jU.default.post(`${this.node.getUri()}/buy-or-sell-creator-coin`,t)).data;return await this.identity.submitTransaction(e.TransactionHex).then((()=>e)).catch((()=>{throw Error("something went wrong while signing")}))}async transferCreatorCoin(t){const e=(await jU.default.post(`${this.node.getUri()}/transfer-creator-coin`,t)).data;return await this.identity.submitTransaction(e.TransactionHex).then((()=>e)).catch((()=>{throw Error("something went wrong while signing")}))}}})),MB=Mk((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.DAO=void 0;e.DAO=class{constructor(t,e){this.node=t,this.identity=e}async executeTransaction(t,e){t={MinFeeRateNanosPerKB:1e3,...t};const s=(await jU.default.post(`${this.node.getUri()}/${e}`,t)).data;return await this.identity.submitTransaction(s.TransactionHex).then((()=>s))}async executePost(t,e){return(await jU.default.post(`${this.node.getUri()}/${e}`,t)).data}async DAOCoin(t){return this.executeTransaction(t,"dao-coin")}async transferDAOCoin(t){return this.executeTransaction(t,"transfer-dao-coin")}async createDAOCoinLimitOrder(t){return t.BuyingDAOCoinCreatorPublicKeyBase58Check||(t.BuyingDAOCoinCreatorPublicKeyBase58Check=""),t.SellingDAOCoinCreatorPublicKeyBase58Check||(t.SellingDAOCoinCreatorPublicKeyBase58Check=""),this.executeTransaction(t,"create-dao-coin-limit-order")}async cancelDAOCoinLimitOrder(t){return this.executeTransaction(t,"cancel-dao-coin-limit-order")}async getDAOCoinLimitOrders(t){return t.DAOCoin2CreatorPublicKeyBase58CheckOrUsername||(t.DAOCoin2CreatorPublicKeyBase58CheckOrUsername=""),t.DAOCoin1CreatorPublicKeyBase58CheckOrUsername||(t.DAOCoin1CreatorPublicKeyBase58CheckOrUsername=""),this.executePost(t,"get-dao-coin-limit-orders")}getTransactorDAOCoinLimitOrders(t){return this.executePost(t,"get-transactor-dao-coin-limit-orders")}createDaoCoinMarketOrder(t){return this.executePost(t,"create-dao-coin-market-order")}}})),PB=Fk(Mk((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Deso=void 0;class s{constructor(t){this.node=new DB.Node,this.identity=new XU.Identity({node:this.node}),this.admin=new Nk.Admin(this.node,this.identity),this.media=new xB.Media(this.node,this.identity),this.metaData=new IB.MetaData(this.node,this.identity),this.miner=new EB.Miner(this.node,this.identity),this.nft=new SB.Nft(this.node,this.identity),this.notification=new AB.Notification(this.node,this.identity),this.user=new _B.User(this.node,this.identity),this.social=new OB.Social(this.node,this.identity,this.user),this.dao=new MB.DAO(this.node,this.identity),this.posts=new RB.Posts(this.node,this.identity),this.transaction=zU.Transactions,this.wallet=new FB.Wallet(this.node,this.identity),this.referral=new CB.Referral(this.node,this.identity),this.node=new DB.Node(null==t?void 0:t.nodeUri),this.identity=new XU.Identity({...null==t?void 0:t.identityConfig,node:this.node}),this.identity.initialize(),this.reinitialize()}reinitialize(){this.admin=new Nk.Admin(this.node,this.identity),this.media=new xB.Media(this.node,this.identity),this.metaData=new IB.MetaData(this.node,this.identity),this.miner=new EB.Miner(this.node,this.identity),this.nft=new SB.Nft(this.node,this.identity),this.notification=new AB.Notification(this.node,this.identity),this.user=new _B.User(this.node,this.identity),this.social=new OB.Social(this.node,this.identity,this.user),this.dao=new MB.DAO(this.node,this.identity),this.posts=new RB.Posts(this.node,this.identity),this.transaction=zU.Transactions,this.wallet=new FB.Wallet(this.node,this.identity),this.referral=new CB.Referral(this.node,this.identity)}}e.Deso=s,e.default=s})));new PB;class NB{constructor(t){this.nftPostHashHex=t.nftPostHashHex,this.endPoint=LB(t.endPoint,"/"),this.parse(t.extraData3D),this.getModelList(),this.getAvailableFormats(),console.log(this.formats),console.log("endPoint: ",this.endPoint)}parse=t=>{this.extraData3D=JSON.parse(t)};getModelList=()=>{this.models=this.extraData3D["3DModels"],console.log("getModelList: ",this.models)};getAvailableFormats=t=>{let e=[],s=this;this.models.forEach(((t,r)=>{let i=s.getFormatsForModel(r);e=[...e,...i]})),this.formats=e.filter(((t,s)=>e.indexOf(t)===s))};getFormatsForModel=t=>!!this.models[t]&&Object.keys(this.models[t].ModelFormats);getAvailableVersions=(t,e)=>{if(!this.models[t])return!1;let s=[],r=this.models[t].ModelFormats;return Object.keys(r).forEach(((t,i)=>{let n=t;if("gtlf"===t&&(n="gltf"),n.trim()===e.trim()){console.log(t.trim()+"="+e.trim());let i=r[t];console.log(i);let n=e+"/"+i;console.log(n),s.push(n)}else console.log('"'+t.trim()+'"<>"'+e.trim()+'"')})),console.log("versions",s),s};getVersionsForFormat=(t,e)=>this.models[t].ModelFormats[e]?this.models[t].ModelFormats[e]:(console.log("format not available"),!1);getModelPath(t,e,s){if(!this.models[t])return console.log("no model ",t),!1;let r="",i="",n=this.getFormatsForModel(t);r=n.indexOf(e.toLowerCase())>-1?e:n[0];let o=this.getVersionsForFormat(t,r);return i=o.indexOf(s.toLowerCase())>-1?s:o[0],this.endPoint+"/"+this.nftPostHashHex+"/"+r+"/"+i}}const LB=(t,e)=>{var s=e?new RegExp(e+"+$"):new RegExp("\\s+$");return t.replace(s,"")},kB=()=>{document.querySelector("div#nft-overlay-holder").style.display="inline-block"},UB=t=>{let e=document.querySelector("select#sky");e.addEventListener("change",(e=>{t.setSkyBox(e.target.value)})),document.querySelector('input[name="3dsky"]').addEventListener("change",(s=>{s.target.checked?t.setSkyBox(e.value):t.removeSky()})),document.querySelector('input[name="3dfloor"]').addEventListener("change",(e=>{e.target.checked?(console.log("addScenery"),t.addScenery()):(console.log("removeScenery"),t.removeScenery())}));let s=t.loadedItem.getAnimations();if(s){let e=document.querySelector("select#animation-select");HB(e,s),GB(),e.addEventListener("change",(e=>{if(e.target.value>1){zB();let s=parseInt(e.target.value)-1;console.log("startAnimation: "+s),t.loadedItem.startAnimation(s,Mt)}else t.loadedItem.stopAnimation()}))}else jB()},HB=(t,e)=>{let s=t.getElementsByTagName("option");for(var r=s.length;r--;)t.removeChild(s[r]);BB(t,-1,"Play/Pause");for(r=0;r<e.length;r++){let s=e[r].name+": "+e[r].duration;BB(t,r,s)}},BB=(t,e,s)=>{var r=document.createElement("option");r.value=e+1,r.innerHTML=s,t.appendChild(r)},GB=()=>{document.querySelector("select#animation-select").style.display="inline-block",document.querySelector('label[for="3dloop"]').style.display="inline-block"},jB=()=>{document.querySelector("select#animation-select").style.display="none",document.querySelector('label[for="3dloop"]').style.display="none"},zB=()=>document.querySelector('input[name="3dloop"]').checked?Mt:Ft;function VB(e){let s,r,i,n,p,d,m,f,g,y,T,v,b,w,x,I,E,S,A,R,C,O,_;return{c(){s=h("div"),r=h("div"),i=h("img"),p=c(),d=h("div"),m=h("div"),f=h("label"),f.innerHTML='<input type="checkbox" name="3dsky" id="3dsky" class="svelte-n8t4is" checked=""/> \n\t\t\t\t<br/>Sky',g=c(),y=h("select"),T=h("option"),T.textContent="space 1",v=h("option"),v.textContent="space 2",b=h("option"),b.textContent="clouds 1",w=h("option"),w.textContent="clouds 2",x=h("option"),x.textContent="clouds 3",I=c(),E=h("label"),E.innerHTML='<input type="checkbox" name="3dfloor" id="3dfloor" class="svelte-n8t4is"/><br/>Room',S=c(),A=h("div"),R=c(),C=h("select"),O=c(),_=h("label"),_.innerHTML='<input type="checkbox" name="3dloop" id="3dloop" class="svelte-n8t4is"/><br/>Loop',l(i,"id","nft-preview-img"),l(i,"class","nft-preview"),i.src!==(n=e[2])&&l(i,"src",n),l(r,"class","container"),l(r,"id","nft-img"),l(f,"for","3dsky"),l(f,"class","svelte-n8t4is"),T.__value="blue",T.value=T.__value,v.__value="lightblue",v.value=v.__value,b.__value="bluecloud",b.value=b.__value,w.__value="browncloud",w.value=w.__value,x.__value="yellowcloud",x.value=x.__value,l(y,"id","sky"),l(y,"class","svelte-n8t4is"),l(E,"for","3dfloor"),l(E,"class","svelte-n8t4is"),l(A,"class","background-option svelte-n8t4is"),u(A,"background","rgb(0, 0, 0) none repeat scroll 0% 0%"),u(C,"display","none"),l(C,"id","animation-select"),l(C,"class","svelte-n8t4is"),l(_,"for","3dloop"),u(_,"display","none"),l(_,"class","no-mobile svelte-n8t4is"),l(m,"id","nft-overlay"),l(m,"class","nft-3d-overlay svelte-n8t4is"),l(d,"id","nft-overlay-holder"),l(d,"class","svelte-n8t4is"),u(d,"display","none"),l(s,"id","nft-ctr"),l(s,"class","nft-ctr"),l(s,"data-nft",e[1])},m(t,n){!function(t,e,s){t.insertBefore(e,s||null)}(t,s,n),o(s,r),o(r,i),o(s,p),o(s,d),o(d,m),o(m,f),o(m,g),o(m,y),o(y,T),o(y,v),o(y,b),o(y,w),o(y,x),o(m,I),o(m,E),o(m,S),o(m,A),o(m,R),o(m,C),o(m,O),o(m,_),e[3](s)},p(t,[e]){4&e&&i.src!==(n=t[2])&&l(i,"src",n),2&e&&l(s,"data-nft",t[1])},i:t,o:t,d(t){t&&a(s),e[3](null)}}}function WB(t,e,s){const r=new PB;let i,n="",o="";const a=new URLSearchParams(window.location.search);n=a.get("nftPostHashHex");const h={PostHashHex:n};return r.posts.getSinglePost(h).then((t=>{t.PostFound.ImageURLs[0]&&s(2,o=t.PostFound.ImageURLs[0])})),m((t=>{console.log("nftPostHashHex: ",n),((t,e)=>{const s="https://bitcloutweb.azureedge.net";let r=new ZN({el:document.body,defaultLoader:"gltf",ctrClass:"nft-ctr",nftDataAttr:"data-nft",nftsRoute:"https://backend.nftz.zone/api/post/get3DScene",modelsRoute:"https://desodata.azureedge.net/unzipped/",linkText:"View in 3D",linkCtrCls:"nft-viewer",previewCtrCls:"container",skyboxes:!0,skyboxPath:s+"/public/3d/images/skyboxes",sceneryPath:s+"/public/3d/layouts/round_showroom/scene.gltf",useShowroom:!0,scaleModelToHeight:5,scaleModelToWidth:5,scaleModelToDepth:5});fetch("https://backend.nftz.zone/api/post/getnft?hash="+e).then((t=>{t.json().then((t=>{console.log(t);let s=new NB({nftPostHashHex:e,extraData3D:t.path3D,endPoint:"https://desodata.azureedge.net/unzipped/"}),i=s.getAvailableVersions(0,"gltf")[0];if(i.indexOf(".")>-1){let t=s.getModelPath(0,"gltf","any");console.log("modelUrl: ",t),console.log("we have the full path, load model");let i={containerId:"nft-ctr",hideElOnLoad:"nft-preview-img",nftPostHashHex:e,modelUrl:t};r.loadModel(i).then(((t,e,s)=>{r.loadedItem&&(r.start3D(),kB(),UB(r))}))}else{console.log("get path params and load NFT"),console.log("retrieve path from zip");let t={nftRequestParams:{postHex:e,path:i,format:"gltf"},containerId:"nft-ctr",hideElOnLoad:"nft-preview-img",nftPostHashHex:e,format:"gltf"};r.loadNFT(t).then(((t,e,s)=>{r.loadedItem&&(r.start3D(),kB(),UB(r))}))}}))}))})(0,n)})),[i,n,o,function(t){g[t?"unshift":"push"]((()=>{i=t,s(0,i)}))}]}return new class extends class{$destroy(){!function(t,e){const s=t.$$;null!==s.fragment&&(r(s.on_destroy),s.fragment&&s.fragment.d(e),s.on_destroy=s.fragment=null,s.ctx=[])}(this,1),this.$destroy=t}$on(t,e){const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(e),()=>{const t=s.indexOf(e);-1!==t&&s.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}{constructor(t){super(),C(this,t,WB,VB,n,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
